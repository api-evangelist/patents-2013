---

title: Providing devices as a service
abstract: Devices, such as hardware security modules, are provided as a service. A customer of a computing resource provider is able to request the addition of a device to a network of the customer hosted by the computing resource provider. The computing resource provider reconfigures a set of computing resources so that the devices of the customer are able to communicate with the device as if the device was in the customer's own network.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09426154&OS=09426154&RS=09426154
owner: Amazon Technologies, Inc.
number: 09426154
owner_city: Seattle
owner_country: US
publication_date: 20130314
---
Distributed computer systems provide increasingly effective ways of providing numerous types of services. As the complexity and ubiquity of distributed computer systems increases however maintaining data security becomes more challenging. There is a constant struggle to address security vulnerabilities at least as fast as they discovered. This struggle is exacerbated by the speed at which computer systems and their use evolve and the rate at which the stakes increase. At the same time in many contexts the security of data is of great importance. Many people for example trust companies with data that is intended to be kept private except in relatively few circumstances. Security breaches consequently can have harmful effects on an organization s operations from a loss of trust and goodwill to an inability to do business due to a system malfunction caused by a security breach.

Over the years many strategies have been developed to address the ever increasing threats to data security. Data encryption for example can provide an effective way of preventing unauthorized access to data. As a result complex devices have been developed to securely store cryptographic information such as cryptographic keys. While such devices often perform well for various purposes integrating the devices into various infrastructure strategies can present many challenges. Further such devices often require a significant investment which can be an obstacle to many organizations.

In the following description various embodiments will be described. For purposes of explanation specific configurations and details are set forth in order to provide a thorough understanding of the embodiments. However it will also be apparent to one skilled in the art that the embodiments may be practiced without the specific details. Furthermore well known features may be omitted or simplified in order not to obscure the embodiment being described.

Embodiments of the present disclosure relate to providing use of devices as a service. In some examples the devices are hardware security modules HSMs provided as a service to customers by a computing resource provider that remotely hosts various computing resources that are remotely managed and operated by the customers examples of which are described below. A customer of the computing resource provider may utilize services of the computing resource to maintain a private network such as a virtual local area network VLAN hosted by the computing resource provider. The VLAN may for instance be supported by infrastructure operated by the computing resource provider.

A secure connection such as a virtual private network connection over an Internet protocol security IPsec tunnel may connect the remotely hosted network to a network that is hosted on the premises of the customer. Traffic to and from the remotely hosted network may be managed by the computing resource provider so that from the perspective of devices in the customer s on premises network communications with devices in the remotely hosted network occur as if the devices of the remotely hosted network are located in the customer s on premise network. For example communications to devices in the remotely hosted network may be addressed by the customer devices to addresses in a space of network addresses managed by the customer e.g. to network addresses in a subnet of a network managed by the customer . The computing resource provider can use various techniques such as network address translation NAT to route network communications over its own network to their proper destinations.

In various embodiments of the present disclosure customers are able to interact with the computing resource provider e.g. through appropriate systems operated by the computing resource provider for the purpose of managing remotely hosted networks. A customer may for instance submit an electronic request to the computing resource provider to add one or more devices to the remotely hosted network to remove one or more devices from the remotely hosted network to reconfigure the network topology of the remotely hosted network and for other purposes. Requests may occur for example over appropriately configured application programming interface API calls which may utilize various Web services techniques. The computing resource provider may process the requests and if appropriate reconfigure the customer s network as requested.

In some embodiments customers are able to interact with the computing resource provider for the purpose of adding one or more HSMs to a remotely hosted network. To process a request for an HSM to be added to the customer s network the computing resource provider may select a suitable HSM from a set of available HSMs and allocate the HSM to the customer such as by marking assignment of the HSM to the customer in a data store to prevent the HSM from being used for other customers while assigned to the customer. The computing resource provider may set up a network service network for the HSM such as a VLAN and add a network interface to the service network in the customer s remotely hosted network. The network interface to the service network may have an address in the customer s IP space so that the customer can communicate to the HSM as if the HSM was in the customer s own network. The customer may configure one or more HSM clients in the customer s on premise network off premise network or both. This process may be repeated to provide the customer use of multiple HSMs such as to increase availability or decrease latency.

Various techniques may be employed to provide customers enhanced data security. For instance in some examples an HSM has at least two administrative interfaces. A first administrative interface may be used by the computing resource provider to perform various administrative functions such as permanently i.e. irrevocably erasing any cryptographic information stored on the HSM. Another administrative function available through the first administrative interface in some embodiments is to create an account having access to the second administrative interface. An account able to access the first administrative interface may share some privileges with one or more accounts able to access the second administrative interface such as the ability to permanently erase cryptographic information. An account that is able to access the first administrative interface may however have some differing access rights. For instance in some embodiments the first administrative interface is unable to access cryptographic information stored by the HSM. The second administrative interface however may have additional administrative abilities such as the ability to create security officer accounts. A security officer account may have the ability to create and or delete partitions of the HSM create clients and cause the HSM to perform cryptographic operations.

To assure a customer that the computing resource provider does not have access to the customer s cryptographic information stored in an HSM the computing resource provider may provide the customer access to the HSM in a manner giving the customer control over who can access the HSMs cryptographic information. For example the computing resource provider may use a first administrative interface to create an account able to access the second administrative interface. Credentials for the created account may be provided to the customer who can use the credentials to change the credentials e.g. change the password thereby removing access to the second administrative interface from the computing resource provider. The customer can then use the second administrative interface to further configure the HSM with confidence that the computing resource provider is unable to access cryptographic information stored by the HSM. Additional details and features are discussed in more detail below.

As noted above a computing resource provider may use its computing hardware resources to provide customers with use of one or more hardware security modules HSMs as a service. An HSM is a hardware device e.g. hardware appliance that is dedicated to protect information e.g. cryptographic keys from unauthorized disclosure and to perform operations using the protected information. An HSM may be implemented in a variety of ways such as a plug in card configured to plug into circuitry of a computing device or an external TCP IP security device that may be connected to a computing device or may be accessible over a network. An HSM may store cryptographic keys that are used by the HSM to perform one or more types of cryptographic operation such as encryption decryption or electronic signature generation. An HSM may utilize one or more secure cryptoprocessor chips to prevent tampering and bus probing. In addition an HSM may be configured to comply with one or more security standards. In some examples HSMs are configured to comply with one or more of the National Institute of Standards and Technology s NIST s Federal Information Processing Standards FIPSs such a security level e.g. level 1 level 2 level 3 or level 4 of FIPS Publication 140 2 which is incorporated herein by reference.

It should be noted that while the present disclosure uses HSMs when providing illustrative examples the techniques of the present disclosure are also applicable to security modules also referred to as cryptographic modules in general. For example while many security modules e.g. HSMs utilize specialized cryptoprocesors and or other hardware one or more of the above features may be implemented using software. For instance a security module may be produced to be compliant with one or more levels of FIPS Publication 140 2 using commodity hardware and appropriately configured software instead specialty hardware often found in commercial HSMs.

In the environment illustrated in the computing resource provider hosts a provider hosted customer network on behalf of the customer . The provider hosted customer network may be a network of computing devices managed by the customer . The provider hosted customer network may be a virtual network implemented by a physical network of devices of the computing resource provider which may also implement virtual devices and or virtual networks for other customers of the computing resource provider not shown . Suitable provider hosted customer networks are often referred to as virtual private clouds VPCs . Generally the provider hosted customer network may be definable configurable and or otherwise manageable by the customer via appropriately configured application programming interface API calls to the computing resource provider . The provider hosted customer network may be for example configured by the customer to have a virtual network topology that closely resembles a traditional network that the customer might operate in its own datacenter. The computing resource provider may also implement provider hosted customer networks so as to be isolated from one another. For example a provider hosted customer network of a customer may be implemented so that the devices in the network are not communicatively or otherwise accessible to other customers of the computing resource provider without the customer having configured the network to allow such access.

As noted the customer may configure the provider hosted customer network in various ways. The customer may for example assign IP addresses to devices from the customer s own IP address range instead of using IP addresses assigned by the computing resource provider create one or more subnets configure routing tables configure network gateways and or otherwise configure the network. In instances where the customer assigns IP addresses from its own IP address space the computing resource provider may utilize network address translation NAT techniques to manage network traffic among the various devices hosted by the computing resource provider. For instance the computing resource provider may wrap packets addressed to IP addresses of the customer in packets addressed to IP addresses managed by the computing resource provider for transmission among the various devices managed by the computing resource provider. Upon delivery to a customer device having an IP address addressed from the customer IP space the computing resource provider may unwrap the packets.

With respect to subnet configuration and management numerous arrangements may be utilized by customers. For example the customer may create a public facing subnet for webservers that have access to the Internet. The customer may create a private facing subnet for backend systems with no Internet access. The customer may leverage multiple layers of security including firewalls and network access control lists to help control access to devices in each subnet.

Additionally as illustrated in the customer may have its own self hosted customer network . The self hosted customer network may be a network physical virtual or combination of physical and virtual hosted using the customer s own hardware. As illustrated in the self hosted customer network and provider hosted customer network communicate with one another over a secure channel such as an Internet Protocol Security IPsec tunnel or a direct connection although other mechanisms for secure communication may be used. In one example the secure channel is a virtual private network VPN connection using an appropriate security protocol such as IPsec. In this manner the secure channel effectively extends the customer s self hosted customer network with the provider hosted customer network as if the resources of both networks were co located using hardware resources of a single facility.

It should be noted however that the particular configuration of the environment illustrated in is for the purpose of illustration and that other configurations are also considered as being within the scope of the present disclosure. For example environments that utilize the techniques described herein do not necessarily need to include a self hosted customer network connected to a provider hosted customer network over a secure channel. A customer may for instance maintain a provider hosted customer network separate from any self hosted customer networks. In addition a fewer or greater number of networks than illustrated in may be included in environments that utilize various embodiments of the present disclosure. Further while a customer computing resource provider relationship is used extensively throughout the present disclosure for the purpose of illustration the scope of the present disclosure is not limited to environments that utilize such relationships. Various techniques described herein for example may be used to enable one entity to provide use of one or more devices e.g. HSMs to one or more other entities. Further an entity providing the service and an entity consuming the service may be sub entities of the same entity. For example a computing resource provider may utilize the techniques described herein to provide use of an HSM to a sub entity of the computing resource provider e.g. a business unit that provides another type of service to customers .

As noted above embodiments of the present disclosure provide customers the ability to remotely request and configure HSMs to become part of provider hosted customer networks. As illustrated the customer may submit a request labeled as Request HSM in the figure to the computing resource provider . The customer may for instance transmit an appropriately configured API call to the computing resource provider which may include one or more systems configured to process API calls. The computing resource provider may initiate a workflow that causes computing resources of the computing resource provider to in response to the request cause one or more HSMs to logically become part of the provider hosted customer network. In other words the computing resource provider may configure appropriate computing resources so that the customer is able to communicate with the HSM as if the HSM was in the customer s own network. For instance requests to the HSM may be addressed to an IP address for the HSM that is part of the customer s own IP space e.g. a public IP address that the customer owns or controls or a private IP address of the customer .

As illustrated in the environment includes a customer logical network and a virtual computer system VCS service substrate which may be a collection of devices forming a network that is used to implement virtual computer systems that are provided as a service. For example the VCS service substrate may include one or more hardware server devices that are each configurable configured to implement one or more virtual computer systems such as virtual servers. The VCS service substrate may also include other devices that enable the VCS service such as switches routers and or other devices that enable communications to from within devices of the VCS substrate .

The customer logical network may be a network comprising one or more self hosted customer networks and one or more provider hosted customer networks such as described above in connection with . As illustrated the customer logical network includes resources hosted by a computing resource provider e.g. resources shown inside both the VCS service substrate and the customer logical network and resources hosted by a customer of the computing resource provider e.g. resources shown inside the customer logical network but outside of the VCS service substrate . For instance as illustrated in the customer logical network includes a customer premises network e.g. a self hosted customer network and a customer virtual network VN e.g. a provider hosted customer network . The customer premises network and customer VN may be virtual local area networks VLANs which may be mutually isolated logical divisions of respective larger networks.

The customer premises network and customer VN may be configured to operate as a single network. For example as illustrated the customer premises network and customer VN may be configured so that data is able to flow securely between the two networks. For example a direct connection between the customer premises network and customer VN may be utilized. In another example the customer premises network and customer VN are connected by a virtual private network VPN connection e.g. over IPsec . The customer logical network may also include various devices that enable its operation such as an on premise virtual gateway VGW and a VGW that is implemented by the VCS service substrate off premise VGW . The on premise VGW and off premise VGW may be gateway devices configured to enable communication between devices on premise of the customer and devices on premise devices of the computing resource provider. The VGW and VGW may each be configured for example to translate between one communications protocol to another communications protocol and or perform any other operations so that communications are possible between the devices of the customer and computing resource provider. In some examples the on premise VGW and off premise VGW communicate over a secure channel such as an IPsec tunnel or a direct connection. Also illustrated the customer network may include one or more customer remote personal identification number PIN entry devices RPEDs . A customer RPED in an embodiment is a device specifically configured for the purpose of authentication with one or more HSMs. A customer RPED may be manufacturer specific so that for instance if a customer requests a particular type of HSM the customer may purchase a customer RPED for the particular type of HSM requested and add the customer RPED to the customer logical network . Customer RPEDs may be tamper proof and may include other security features to prevent key logging and other security breaches. An operator of the customer e.g authorized user may utilize the RPED to input a password to gain access to information stored by a corresponding HSM or set of HSMs .

As illustrated in the customer logical network may include a customer on premise HSM . The customer on premise HSM may be an HSM hosted by the customer for the purpose of securely storing information e.g. cryptographic keys and performing cryptographic operations with the securely stored information. Accordingly the customer logical network may include as part of the customer premises network one or more on premise HSM clients that are devices or components of devices such as programming modules loaded on devices configured to submit requests to the on premise HSM and perhaps as discussed below to one or more off premise HSMs . In some examples the on premise HSM clients and customer logical network are collectively configured such that each customer HSM client is able to submit requests to an off premise HSM appliance as described below . Such requests and responses to the requests may be routed through an on premise VGW and off premise VGW over a secure channel e.g. IPsec tunnel as discussed above.

The customer logical network may also include as part of the customer VN one or more devices that are not hosted by the customer but may be hosted by a computing resource provider. For example shows the customer logical network including off premise customer HSM clients that are hosted by the computing resource provider. In this particular example the off premise customer HSM clients are implemented by the VCS service substrate e.g. as virtual computer systems implemented by physical servers of the VCS service substrate . The off premise customer HSM clients may be devices e.g. virtual computer systems configured to communicate with an HSM e.g. the on premise customer HSM or a customer off premise HSM described below such as the on premise HSM client described above. As illustrated the customer VGW is also implemented by the VCS service substrate in this example.

In an embodiment the VCS substrate implements a collection of devices outside of the customer logical network that enable the computing resource provider to provide use of an HSM as a service in particular by enabling communication to an HSM appliance that from the customer s perspective is addressed to an IP address of a customer s subnet. For instance in an embodiment the VCS service substrate includes a service VN which may be a VLAN that includes an HSM Service VCS network address translation proxy NAT Instance and a service VN bastion . The NAT instance may be a device e.g. virtual computer system implemented by the VCS service substrate that is configured to perform network address translation NAT between an HSM appliance and a subnet in the customer VN as described in more detail below. Briefly the NAT performed by the NAT instance enables a customer to address communications to an IP address of the customer s IP space while the computing resource provider can route such communications using IP addresses of its own IP space.

The service VN bastion may be a device e.g. virtual computer system implemented by the VCS service substrate that is configured in a public subnet with an Internet gateway. The service VN bastion may be configured to receive messages in connection with monitoring the HSM appliance. The VN bastion may for instance receive messages from metrics systems such a monitoring system logging archival services and the use of various other services of the computing resource provider e.g. a data storage service for storing monitoring data and or a queue service . The VN bastion may also be configured with appropriate security controls that will only allow certain connections e.g. secure shell SSH connections from computing resource provider firewalls. Firewalls between the service VN bastion and the NAT instance may be configured to prevent undesirable connections such as SSH connections between the service VN bastion and NAT instance .

As illustrated the service VN bastion communicates over the Internet through a service VN integrated gateway IGW to various services such as a data storage service and an HSM management and monitoring service . The HSM management and monitoring service may be a system configured to perform various management and monitoring of HSMs provided as a service. The HSM management and monitoring service may include various components such as a network time protocol NTP server a monitoring sub service and an HSM service diagnostics and management sub service. The data storage service may be a service that stores data sent to the service through the service VN IGW for consumption by other services and or archival reasons as well as other data provided in other ways by other systems. The monitoring sub service may be a service that consumes data from the service VN bastion and if applicable detects malfunctions and or other events. The HSM service diagnostic and management sub service may be configured to consume data from the service VN bastion and or monitoring sub service and perform analysis on the data to provide diagnostic information and to perform management functions e.g. cause reprovisioning of failed devices supporting the HSM service and or other management functions .

As noted above the customer logical network includes devices that communicate with an HSM appliance which in some examples is an abstraction of a physical HSM. Accordingly as illustrated in in various embodiments the environment includes a computing resource provider CRP HSM . The CRP HSM as with the customer HSM may be a physical HSM device. An example physical HSM device is the Luna SA HSM by SafeNet Inc. although other models are considered as being within the scope of the present disclosure. The CRP HSM in an embodiment is allocated exclusively to a single customer. In this manner unlike other computing resources provided as a service other customers do not utilize the device unless authorized by the customer to whom the CRP HSM is allocated . As illustrated the CRP HSM is communicatively connected to the service VN so that network traffic can be routed between the customer VN and the CRP HSM over the service VN. In the example shown in the CRP HSM is configured to communicate with the service VN through a VCS service overlay device . Because the CRP HSM as a physical hardware device connected to the VCS service substrate is outside of the service VN the VCS service overlay device may employ network address translation as appropriate to enable traffic from the CRP HSM to travel over the service VN to the customer VN and vice versa.

In an example embodiment the CRP HSM is connected to an HSM top of rack ToR switch that is configured to route traffic from the CRP HSM to a direct connection DX to an overlay network that includes the service VN . For example the CRP HSM may connect to the Service VN through a DX router configured to route network traffic between the service VN and the CRP HSM . The DX router may route traffic to from a VCS service overlay device . Likewise the DX router may route packets from the CRP HSM received via the HSM service TOR switch so that the packets are appropriately provided to their appropriate destination e.g. an appropriate customer HSM client that transmitted a request to the CRP HSM .

Summarizing a computing resource provider hosts a physical CRP HSM . Various techniques may be utilized to allow a customer of the computing resource provider to use the CRP HSM as if the CRP HSM was in the customer s own data center. In an example embodiment the CRP HSM is in a server rack of the computing resource provider and connected to a ToR switch e.g. a ToR switch in the same rack by a suitable physical connection such as an Ethernet connection. The ToR switch has a physical connection to a DX router which is configured to route network traffic to from the CRP HSM and a VCS service overlay device. The VCS service overlay device in some examples is configured to route traffic to from through a private VLAN the service VN to the customer VGW . A NAT instance uses network address translation to route packets across the different interfaces of the service VN and the customer VN .

The customer of the computing resource provider can submit requests to the CRP HSM by transmitting the requests to an IP address that from the perspective of the customer is an HSM appliance but in terms of the example network topology illustrated in is an interface of the NAT instance which is configured to route the requests over the service VN to the CRP HSM which has an IP address different from the NAT instance . Similarly when the CRP HSM generates a response to a request e.g. by performing one or more cryptographic operations and or by providing in the response results of performance of the one or more cryptographic operations the response is routed to the appropriate HSM client e.g. off premise customer HSM client or on premise customer HSM client with network address translation being performed to enable the routing to be performed correctly and so that from the perspective of the customer devices to enable the response to have an originating address as if the response originated from the customer s own network.

Also illustrated in is a CRP management system which may be a network of computing devices configured to manage the resources of the computing resource provider such as the computing resources of the VCS service substrate and HSMs. The CRP management system in an embodiment is configured to perform various operations in connection with management of the resources. For example the CRP management system provides an application programming interface API that enables customers to submit requests over a network e.g. the Internet . In some examples the CRP management system include one or more web servers such as described in more detail below configured to receive API calls in the form of Web service requests. The web servers may be configured to upon receipt of a Web service request transmit a request e.g. forward the request or transmit a new request generated based at least in part on the Web service request to a subsystem of the CRP management system configured to process the request by executing one or more workflows for fulfilling the request. Example requests include requests to provision or deprovision virtual computer systems to create a VN to reconfigure a VN requests to add one or more HSMs to a VN requests to provision storage devices for a data storage service not shown and the like. The CRP management system in an embodiment is also configured to process the requests and perform additional operations in connection with request processing e.g. authentication . Processing a request may include processing a workflow managed by the CRP management system . A workflow may comprise a set of operations to be performed to process a corresponding request. For example operations for provisioning a virtual computer system may include operations such as selecting a hardware resource e.g. hardware server to implement the virtual computer system loading a machine image onto the selected hardware resource reconfiguring network routing and or other operations.

As discussed above various techniques described herein allow a customer to configure a network to include a remotely hosted HSM. shows an illustrative example of one manner by which this may be done. in particular shows an illustrative example of an environment for enabling a customer of a computing resource provider to utilize a computing resource provider s offering of use of an HSM as a service. As illustrated in the environment includes a customer VN and an HSM service VN which may be the customer VN and Service VN respectively described above.

The computing resources of the customer VN may include computing resources hosted in one or more data zones. A data zone may comprise a set of computing resources that is separated from another set of computing resources of another data zone. Data zones may be engineered for the purpose of fault tolerance so that events causing inoperability of one or more computing resources one data zone have little or no effect on the operability of logically independent computing resources in one or more other data zones. As an illustrative example a set of computing resources hosted in a first data center may comprise a first data zone and another set of computing resources hosted in a second data center may comprise a second data zone. A power failure in the first data center that causes an inoperability of one or more computing resources of the first data zone would not cause a loss of power to the computing resources of the second data zone. Thus the power failure would not affect the operability computing resources of the second data zone unless for example a computing resource of the second data zone was a client of an inoperable computing resource e.g. virtual server of the first data zone.

Data zones may be implemented in various ways. For example a data zone may be implemented by a data center or collection of data centers clustered in a geographic region and having direct communication connections among one another. As another example data zones may be implemented by different rooms of a data center that are each supplied by a different power generator. Generally data zones may be implemented in any manner that increases the fault tolerance of one data zone with respect to events power loss fire earthquake operator error and the like occurring in one or more other data zones. A computing resource provider or generally any entity may operate multiple data zones to provide customers greater fault tolerance failover options and other benefits such as reduced latency. The computing resource provider may for instance operate multiple data zones throughout the world to provide customers with numerous options for performance and fault tolerance.

Accordingly as illustrated in the customer VN comprises resources in a data zone . While a single data zone is illustrated as discussed in more detail below the customer VN may comprise computing resources from multiple data zones. A subnet VN subnet of the customer in this example is implemented using resources of the data zone . Using classless inter domain routing CIDR notation the VN subnet uses an illustrative example of IP addresses in this instance 10.0.0.0 16. It should be noted that for the purpose of illustration IP addresses are illustratively provides as Internet protocol version four IPv4 IP addresses. However different addressing methods including but not limited to Internet protocol version six IPv6 addresses may be used in various embodiments.

The VN subnet in this example includes various devices which may be for example virtual computer systems or virtual storage devices that have IP addresses of the customer in the 10.0.0.0 16 range. The VN subnet of the customer VN also includes a customer service gateway customer SG which may be a gateway device configured with a virtual network interface VNI . The VNI as illustrated has an IP address of 10.0.0.201.

As with the customer VN the HSM service VN may be implemented using computing resources of a data zone which may be the same data zone as the data zone of the customer VN or which may be different from the data zone . Computing resources of the data zone are used to implement a VN subnet which in this example has an IP address space of 192.168.0.0 24. The VN subnet includes a service SG that comprises a NAT instance which may be a NAT instance such as described above and a VNI . The VNI as an illustrative example has an IP address in the IP space of the VN subnet the address being 192.168.0.55.

Also as illustrated in the environment includes a physical HSM appliance which in this example has an IP address of 10.10.0.3. The HSM appliance may be directly connected to the VNI and the NAT instance may be configured to perform appropriate network address translation.

In an embodiment the NAT instance performs network address translation. For example network traffic from the customer facing VNI may be forwarded to 10.10.0.3 the IP address of the HSM appliance . The NAT instance may perform network address translation to change network traffic s destination IP address to 10.10.0.3. To ensure that the return traffic from the HSM appliance reaches the same NAT instance e.g. if multiple NAT instances are used the NAT instance may also change the source IP address to 192.168.0.55 its own inward facing IP address. Because the network traffic returns from the HSM to the same device the NAT instance is able to ensure that the traffic reaches the correct destination. For example the NAT instance may be programmed to forward traffic from the HSM appliance to the NAT instance to an appropriate customer device e.g. the device that originally submitted the request to the HSM performing NAT as appropriate.

In this manner from the perspective of the HSM appliance client traffic originates from 192 168.0.55 the IP address of the NAT instance. Further the HSM appliance may lack any information identifying characteristics e.g. IP addresses of the customer VN . From the point of view of a customer device the IP address of the VNI 10.0.0.201 appears to be the IP address of the HSM appliance . For instance a customer device may transmit a request to perform one or more cryptographic operations to 10.0.0.201 receive a response from 10.0.0.201 while a device with a different IP address i.e. the HSM appliance actually performs the requested cryptographic operations.

Various embodiments of the present disclosure allow a computing resource provider to provide use of an HSM as a service while addressing various security concerns. For example some customers of a computing resource provider may insist that a computing resource provider lack access to any cryptographic information stored by an HSM on behalf of the customer e.g. keys used by the customer . shows a diagram illustrating an example manner in which this may be accomplished. It should be noted however that the processes illustrated in and discussed herein are illustrative in nature and that other methods of providing an HSM as a service without a computing resource provider retaining access to information stored by the HSM may be used. For example different HSM manufacturers may employ different processes and or interfaces that may be used in different ways to ensure a computing resource provider cannot access sensitive customer information stored on an HSM.

In particular the diagram in shows an HSM appliance which may be an HSM appliance requested by a customer of a computing resource provider and that is hosted by the computing resource provider such as described above. The HSM appliance may be a logical container that contains the HSM administrative interface and a portion of the HSM appliance that physically and securely contains the cryptographic information labeled as the physical HSM in . In an embodiment the HSM appliance can be considered an appliance that comprises components defined by accessibility. For example in an embodiment the HSM appliance includes an administrative interface accessible by those having certain administrative roles. In this example the roles include a CRP administrator and a customer administrator . Access to the administrative interface may require appropriate authentication e.g. through presentation of credentials and the amount of access may depend on specific role. Further access to the administrative interface may require a secure connection for example through SSH. In an embodiment an authenticated CRP HSM administrator may have the ability to create for the HSM appliance one or more customer HSM administrators . Other actions that may be performed by an CRP HSM administrator include in various embodiments creation and management of policies network setup logging and or other administrative activities.

A customer HSM administrator may have the ability to interact with the HSM administrative interface to perform various administrative activities such as initialization of the HSM appliance such as by submitting an Initialize HSM command to the HSM appliance . Initialization of the HSM may result in the creation of one or more security officer SO roles. An authenticated security officer labeled as a customer security officer may have the ability to manage the configuration of the HSM such as by creating partitions creating clients a set of devices with access rights sufficient for submission of requests to the HSM in connection with a corresponding partition assign clients to partitions i.e. define which partition s each client can access and the like. Creation of a client may include updating an entry in a data store of the HSM appliance that indicates the client is authorized to utilize the HSM. The SO that created a client or another operator may configure a client device with appropriate software to enable utilization of the HSM. In other words enabling a device to utilize the HSM appliance may include appropriate configuration of both the HSM appliance and the device acting as a client of the HSM.

The HSM appliance may be configured such that only the customer HSM administrator and security officer accounts created by the HSM administrator have access to the cryptographic information stored by the HSM. Stated in another way the HSM appliance may be configured such that the CRP HSM administrator role lacks access to cryptographic material stored by the HSM appliance . In this manner a computing resource provider can use the role of CRP HSM administrator to create a customer HSM administrator account. Credentials e.g. login and password can be provided to an authorized person of the customer and the authorized person can change the login and password thereby causing the computing resource provider to lack access to any subsequently created logical partitions. Thus while the computing resource provider may retain some administrative privileges e.g. to securely erase cryptographic material after termination of a business relationship with the customer and to create a new customer HSM administrator account the computing resource provider lacks access to the securely stored cryptographic material once the customer changes the login credentials of the customer HSM administrator account.

Various embodiments of the present disclosure also allow customers of a computing resource provider to utilize HSMs of the computing resource provider in a way that increases the likelihood that an HSM is operational when needed and or in a way that improves performance e.g. latency . accordingly shows an illustrative example of an environment in which such technical advantages may be achieved. In the example of a VN subnet of a customer VN may include various computing resources at least some of which may be hosted by the computing resource provider as described above. For example as illustrated in the VN subnet of the environment includes one or more HSM clients . Instead of communicating with a service gateway as discussed above in connection with in the HSM clients communicate with a load balancer . The load balancer may be a device e.g. a virtual computer system provided by a virtual computer system service that is configured to utilize one or more load balancing techniques e.g. round robin and variations thereof to distribute requests from the HSM clients . In this example the load balancer is configured to facilitate communication to one of a plurality of physical HSM appliances such as described above. It should be noted however that capabilities of the load balancer may be incorporated into one or more of the HSM clients. For example one or more clients may have a load balancing application that performs load balancing functions or generally an ability to communicate with multiple HSMs which do not necessarily store information redundantly.

For example the load balancer may route traffic from an HSM client to an HSM appliance through a corresponding service gateway and virtual network interface SG VNI of the VN subnet and through a service gateway NAT device and VNI SG NAT VNI of a service VN subnet such as described above in connection with . Thus in this manner from the perspective of the VN subnet of the customer VN in particular from the perspective of the load balancer communications to an HSM appliance are directed to the corresponding service gateway of the SG VNI . Thus for an HSM client to submit a request to an HSM the client device may address the request to the IP address of the load balancer which may forward the request to an appropriate HSM appliance receive any responses and forward responses to the requestor.

In this manner high availability of HSMs is achieved while maintaining a simple configuration from the customer perspective. Further techniques illustrated in and variations thereof may be used to provide numerous technical advantages. For example as illustrated in each HSM appliance may reside in a different data zone . The different data zones may be used to provide fault tolerance and or lower latency such as when HSM clients are distributed among different data zones .

As with all environments described herein variations are considered as being within the scope of the present disclosure. For example the SG VNI components of the environment need not in some embodiments sit behind a load balancer such as when different HSMs are used for different purposes e.g. when multiple HSMs each storing a different key space are used . In addition additional features in addition to those illustrated in the figures are considered as being within the scope of the present disclosure. For example in environments where multiple HSMs are used for the purpose of redundancy secure methods may be used to synchronize the information redundantly stored by the HSMs. For example a public key cryptography scheme can be used to securely transfer information from one HSM to another. An HSM can encrypt information using the public key of a public private key pair used by another HSM. The encrypted information can be transferred over a network to the other HSM to be decrypted using the private key of the public private key pair.

As discussed above various embodiments of the present disclosure allow for customers of a virtual resource provider to add HSMs to virtual networks such that the computing resource provider hosts the HSM but customers are able to utilize the HSMs as if they were in the customers own data centers. shows an illustrative example of a process for processing a request for an HSM in accordance with at least one embodiment. The process may be performed by any suitable system such as the CRP management system discussed above in connection with or any system involved in the processing of requests submitted to a computing resource provider. In an embodiment the process includes receiving from a customer e.g. from a customer computing device a request for an HSM where the request includes a set of parameters for the HSM. The request may be for instance an API call with API parameters that encode the HSM parameters. It should be noted however that while shows the parameters being included as part of the request the parameters for the HSM may be provided separately from the request. Example parameters include an identifier of a VN of the customer hosted by the computing resource provider an identifier of a subnet of the VN of the customer hosted by the computing resource provider a model identifier for the HSM in embodiments where the customer is provided the ability to select from multiple HSM models an IP address space an IP address type e.g. IPv4 or IPv6 a notification mode e.g. email address message queue identifier or other identifier used for notifications and or other relevant information. In addition the HSM parameters may specify one or more firewall parameters to apply to a network interface that will be placed in the identified customer VN. Generally the parameters provide the computing resource provider information that enables the computing resource provider to integrate an HSM with a VN of the customer hosted by the computing resource provider.

Upon receipt of the request the process may include creating a service VN such as the service VN that has attached an appropriate HSM device e.g. a device with model number matching HSM parameters . Creating the service VN may include provisioning and or configuring one or more computing resources that comprise the service VN. The service VN may include components such as those discussed above in connection with . Further the service VN may be created as a VLAN with public and private subnet the public subnet used for the purpose of monitoring and diagnostics and the private subnet used for communication with the customer VN. The service may be created to ensure that the service VN has a IP range that does not overlap with the IP range of the customer VN.

It should be noted that creating the service VN may be performed in various ways in accordance with various embodiments. For example in some embodiments the computing resource provider provisions and prepares a service VN prior to receipt of a request for an HSM that when processed will utilize the service VN. In such embodiments creating the service VN may include reconfiguring existing resources to integrate with the customer VN specified in the request. In other words the computing resource provider may perform some operations for creating the service VN prior to receipt of the request. In addition creating the service VN may include additional operations such as configuring the HSM device with which the customer will communicate through the service VN. Configuration of the HSM device may be performed in various way which may vary according to various HSM manufacturers and models. Generally configuring the HSM device may include taking any actions that enable and or facilitate the HSM device s operation as an HSM for the customer.

Upon creation of the service VN the process may include modifying an access control list ACL for the service to restrict communications to those from a service team management system. In this manner the service VN is isolated from various unnecessary communications yet allows for intervention by the computing resource provider should such intervention become necessary. A firewall for the service VN may then be created for use when launching service instances e.g. virtual computer systems to become part of the service VN . One or more service instances may then be launched in the service VN referencing the created firewall. The service instances may be virtual computer systems that operate inside of the service VN such as the NAT instance and service VN bastion described above in connection with . Launching a service instance may include processing a provisioning workflow for the service instances such as described above. Further as noted previously the instances may be launched at a different time and simply reconfigured. In this manner the time between receipt of the request and when the HSM is available for use by the customer may be reduced. Launching the service instance may also include reconfiguration operations such as loading software and or configuring any settings that need to be configured to enable the instance to function in the service VN.

As illustrated in the process includes creating a network interface in the customer s virtual network e.g. a customer VN specified in the HSM parameters. As discussed above the network interface may be a VNI created and hosted by the computing resource provider. In an embodiment creating the network interface may include using account impersonation to create the network interface in an appropriate subnet e.g. a subnet specified by the HSM parameters of the customer. Creating the network interface may also include other operations such as giving the network interface a description that corresponds to the HSM service. The description may for instance identify an HSM or that the network interface is for connecting to an HSM. In this manner the customer may e.g. in an inventory of customer devices hosted by the computing resource provider distinguish the created network interface from any other network interfaces that the customer may have in its virtual network hosted by the computing resource provider. Other operations included in creating the network interface may include assigning a private IP address to the network interface and configuring any security settings e.g. to prevent the customer from changing a firewall of the network interface which may result in a loss of ability to manage the network interface from the computing resource provider perspective .

In an embodiment the process includes attaching the created network interface to an appropriate service instance e.g. the NAT instance discussed above in connection with . Attaching the created network interface to the created service instance may include configuring any settings in both the service virtual network and the network interface to allow for communications to the network interface to proceed to the service virtual network and vice versa. For example because the customer VN may be isolated account impersonation may be used to modify settings for the customer VN to allow the customer VN to communicate with the service instance. Once the network interface has been attached to the service instance the process may include notifying the customer of the availability of the HSM. Notification may occur in various ways in accordance with the various embodiments such as by electronic mail instant message putting a notification message in a notification queue and or in other ways. Further the manner in which notification occurs may be specified in the HSM parameters received in connection with the request.

Once created the remotely hosted virtual network may be configured for connection to a remotely hosted HSM. Configuring the remotely hosted virtual network may be performed for example by submitting API calls to a management system of the computing resource provider. Configuring the remotely hosted virtual network may include setting appropriate access permissions to enable the computing resource provider to create a network interface inside of the remotely hosted virtual network. For example appropriate API calls may be made to create a new role that allows the computing resource provider to create and attach a network interface. The role may be a third party role able to access the virtual network. A policy may be created for the role that allows the computing resource provider to create the network interface. Information about the role may be provided to the computing resource provider which may use the information to create the network interface and then send the customer further instructions.

As illustrated the process includes submitting a request for a remotely hosted HSM to the computing resource provider. The request may be an appropriately configured API call with HSM parameters such as described above. The computing resource provider may then provide a network address and credentials for an HSM. The network address may be a network address through which an administrative interface of the HSM can be accessed such as the network interface that was created in the customer s virtual network. Accordingly the process includes obtaining the network address and credentials for the remotely hosted HSM appliance.

With the network address and credentials for the HSM appliance the process may include initializing and configuring the remotely hosted HSM. Initializing and configuring the remotely hosted HSM may include connecting to the HSM over SSH or in another suitable manner and performing one or more operations. The operations may include changing the credentials e.g. changing the password so as to limit the ability of the computing resource provider to access information stored by the HSM. Other operations may include setting the time zone system date and time for the HSM adding a syslog endpoint to the HSM configuration to enable monitoring adding a simple network management protocol SNMP and syslog configuration to the existing settings that have been provisioned by the computing resource provider. In addition the initializing and configuring the HSM may include reinitializing an HSM partition to permanently i.e. irrevocably delete any keys and or cryptographic domains on the HSM and creating a public private key pair for the HSM to communicate with other HSMs such as described above. Creating the public private key pair may include generating a certificate from the public key which may be provided to one or more HSM clients to enable communication with the HSM using a public private key electronic signature scheme. Creating the public private key pair may include transmitting a command to the HSM to cause the HSM to generate the public private key pair and the certificate. In addition to the above initializing and configuring the remotely hosted HSM may include creating one or more HSM clients such as discussed above in the HSM i.e. specifying to the HSM which clients are authorized to use the HSM.

As illustrated the process includes configuring one or more HSM clients so that the one or more HSM clients are able to utilize the HSM. For instance in an embodiment configuring the HSM client may include creating a public private key pair for an HSM client which generates a certificate from the public key from the public private key pair such as described above. This certificate may be provided to the HSM e.g. by encrypting the certificate using the public key of the HSM for decryption by the HSM using the corresponding private key to enable the HSM to use the public key for generating electronic signatures provided to the HSM client for verification. Other operations may include registering the HSM client s with the HSM and assigning the HSM client s to one or more partitions of the HSM.

As with all processes described herein variations of the process are considered as being within the scope of the present disclosure. For example the operations illustrated do not necessarily need to be performed in the order presented. In addition additional operations may be included for various purposes such as for integrating HSMs into various environments. For example numerous operations may be completed for numerous HSMs and customer VNs. Multiple HSMs may be set up for the purpose of increasing HSM availability increasing performance and decreasing the chance of total operational failure e.g. by providing options for failover should an HSM become inoperable. In addition customers may host their own on premise HSMs. Various embodiments of the present disclosure may include synchronizing one or more on premise HSMs with one or more remotely hosted HSMs so that for example a customer may utilize an on premise HSM and should the on premise HSM fail use the remotely hosted HSM. Further should the customer choose to terminate a business relationship with the computing resource provider the customer will maintain a copy of information e.g. cryptographic keys stored in the HSMs in its own HSM.

In addition various embodiments of the present disclosure allow for re use of an HSM once no longer needed by a customer. For instance in some embodiments a customer is required e.g. by contract by a computing resource provider to irrevocably erase cryptographic keys stored in any remotely hosted HSMs used by the customer before terminating use of the HSM as a service. In the case of bad debt e.g. a customer does not or cannot pay perhaps due to a bankruptcy the computing resource provider may remote access to any remotely hosted HSMs used by the customer e.g. by disconnecting the HSM from a network unplugging a power supply and the like and still maintain the information on the HSM for a period of time during which the customer is provided opportunity to restore access to the HSM e.g. by paying down debt or otherwise arranging access . After passage of the period of time the computing resource provider may use its administrative access to transmit a command to any applicable HSMs to cause the HSM s to irrevocably erase any cryptographic information stored by the HSM s . At this point the computing resource provider may utilize any reclaimed HSMs to serve other customers such as in a manner described above.

Numerous other variations are considered as being within the scope of the present disclosure. For example as noted above a computing resource provider may provide numerous types of services for use by customers. Various embodiments of the present disclosure include integration of a customer logical network with the services so that HSMs can be used in connection with use of those services. As an illustrative example referring to a customer may configure its customer VN to communicate with a data storage service offered by the computing resource provider or another computing resource provider . One or more virtual computer systems of the customer VN for example may be configured to communicate over the Internet and use a Web services interface of the data storage service. Permissions on data storage objects stored by the data storage service may limit access to the data objects for instance so the objects are only accessible from the customer VN. Various embodiments of the present disclosure allow for integration with the data storage service to allow for instance server side encryption. The customer VN may be configured so that a server of the data storage service can submit data to the HSM to be encrypted. The server may provide plaintext to the HSM and the HSM can return ciphertext generated using an appropriate key e.g. a key having an identifier specified by the server or specified by default . The plaintext may be a key used by the server to encrypt a data object and the server can store with the encrypted data object the encrypted key. Similarly the server can provide the encrypted key to the HSM for decryption and the HSM can decrypt the key provide the decrypted key for use by the server in decrypting the data object. Other variations are also considered as being within the scope of the present disclosure.

The illustrative environment includes at least one application server and a data store . It should be understood that there can be several application servers layers or other elements processes or components which may be chained or otherwise configured which can interact to perform tasks such as obtaining data from an appropriate data store. Servers as used herein may be implemented in various ways such as hardware devices or virtual computer systems. In some contexts servers may refer to a programming module being executed on a computer system. As used herein the term data store refers to any device or combination of devices capable of storing accessing and retrieving data which may include any combination and number of data servers databases data storage devices and data storage media in any standard distributed or clustered environment. The application server can include any appropriate hardware and software for integrating with the data store as needed to execute aspects of one or more applications for the client device handling a some even a majority of the data access and business logic for an application. The application server may provide access control services in cooperation with the data store and is able to generate content such as text graphics audio and or video to be transferred to the user which may be served to the user by the Web server in the form of HyperText Markup Language HTML Extensible Markup Language XML or another appropriate structured language in this example. The handling of all requests and responses as well as the delivery of content between the client device and the application server can be handled by the Web server. It should be understood that the Web and application servers are not required and are merely example components as structured code discussed herein can be executed on any appropriate device or host machine as discussed elsewhere herein. Further operations described herein as being performed by a single device may unless otherwise clear from context be performed collectively by multiple devices which may form a distributed system.

The data store can include several separate data tables databases or other data storage mechanisms and media for storing data relating to a particular aspect of the present disclosure. For example the data store illustrated may include mechanisms for storing production data and user information which can be used to serve content for the production side. The data store also is shown to include a mechanism for storing log data which can be used for reporting analysis or other such purposes. It should be understood that there can be many other aspects that may need to be stored in the data store such as for page image information and to access right information which can be stored in any of the above listed mechanisms as appropriate or in additional mechanisms in the data store . The data store is operable through logic associated therewith to receive instructions from the application server and obtain update or otherwise process data in response thereto. In one example a user through a device operated by the user might submit a search request for a certain type of item. In this case the data store might access the user information to verify the identity of the user and can access the catalog detail information to obtain information about items of that type. The information then can be returned to the user such as in a results listing on a Web page that the user is able to view via a browser on the user device . Information for a particular item of interest can be viewed in a dedicated page or window of the browser. It should be noted however that embodiments of the present disclosure are not necessarily limited to the context of Web pages but may be more generally applicable to processing requests in general where the requests are not necessarily requests for content.

Each server typically will include an operating system that provides executable program instructions for the general administration and operation of that server and typically will include a computer readable storage medium e.g. a hard disk random access memory read only memory etc. storing instructions that when executed by a processor of the server allow the server to perform its intended functions. Suitable implementations for the operating system and general functionality of the servers are known or commercially available and are readily implemented by persons having ordinary skill in the art particularly in light of the disclosure herein.

The environment in one embodiment is a distributed computing environment utilizing several computer systems and components that are interconnected via communication links using one or more computer networks or direct connections. However it will be appreciated by those of ordinary skill in the art that such a system could operate equally well in a system having fewer or a greater number of components than are illustrated in . Thus the depiction of the system in should be taken as being illustrative in nature and not limiting to the scope of the disclosure.

The various embodiments further can be implemented in a wide variety of operating environments which in some cases can include one or more user computers computing devices or processing devices which can be used to operate any of a number of applications. User or client devices can include any of a number of general purpose personal computers such as desktop laptop or tablet computers running a standard operating system as well as cellular wireless and handheld devices running mobile software and capable of supporting a number of networking and messaging protocols. Such a system also can include a number of workstations running any of a variety of commercially available operating systems and other known applications for purposes such as development and database management. These devices also can include other electronic devices such as dummy terminals thin clients gaming systems and other devices capable of communicating via a network.

Various embodiments of the present disclosure utilize at least one network that would be familiar to those skilled in the art for supporting communications using any of a variety of commercially available protocols such as Transmission Control Protocol Internet Protocol TCP IP protocols operating in various layers of the Open System Interconnection OSI model File Transfer Protocol FTP Universal Plug and Play UpnP Network File System NFS Common Internet File System CIFS and AppleTalk. The network can be for example a local area network a wide area network a virtual private network the Internet an intranet an extranet a public switched telephone network an infrared network a wireless network and any combination thereof.

In embodiments utilizing a Web server the Web server can run any of a variety of server or mid tier applications including Hypertext Transfer Protocol HTTP servers FTP servers Common Gateway Interface CGI servers data servers Java servers and business application servers. The server s also may be capable of executing programs or scripts in response requests from user devices such as by executing one or more Web applications that may be implemented as one or more scripts or programs written in any programming language such as Java C C or C or any scripting language such as Perl Python or TCL as well as combinations thereof. The server s may also include database servers including without limitation those commercially available from Oracle Microsoft Sybase and IBM .

The environment can include a variety of data stores and other memory and storage media as discussed above. These can reside in a variety of locations such as on a storage medium local to and or resident in one or more of the computers or remote from any or all of the computers across the network. In a particular set of embodiments the information may reside in a storage area network SAN familiar to those skilled in the art. Similarly any necessary files for performing the functions attributed to the computers servers or other network devices may be stored locally and or remotely as appropriate. Where a system includes computerized devices each such device can include hardware elements that may be electrically coupled via a bus the elements including for example at least one central processing unit CPU or processor at least one input device e.g. a mouse keyboard controller touch screen or keypad and at least one output device e.g. a display device printer or speaker . Such a system may also include one or more storage devices such as disk drives optical storage devices and solid state storage devices such as random access memory RAM or read only memory ROM as well as removable media devices memory cards flash cards etc.

Such devices also can include a computer readable storage media reader a communications device e.g. a modem a network card wireless or wired an infrared communication device etc. and working memory as described above. The computer readable storage media reader can be connected with or configured to receive a computer readable storage medium representing remote local fixed and or removable storage devices as well as storage media for temporarily and or more permanently containing storing transmitting and retrieving computer readable information. The system and various devices also typically will include a number of software applications modules services or other elements located within at least one working memory device including an operating system and application programs such as a client application or Web browser. It should be appreciated that alternate embodiments may have numerous variations from that described above. For example customized hardware might also be used and or particular elements might be implemented in hardware software including portable software such as applets or both. Further connection to other computing devices such as network input output devices may be employed.

Storage media and computer readable media for containing code or portions of code can include any appropriate media known or used in the art including storage media and communication media such as but not limited to volatile and non volatile removable and non removable media implemented in any method or technology for storage and or transmission of information such as computer readable instructions data structures program modules or other data including RAM ROM Electrically Erasable Programmable Read Only Memory EEPROM flash memory or other memory technology Compact Disc Read Only Memory CD ROM digital versatile disk DVD or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store the desired information and which can be accessed by the a system device. Based on the disclosure and teachings provided herein a person of ordinary skill in the art will appreciate other ways and or methods to implement the various embodiments.

The specification and drawings are accordingly to be regarded in an illustrative rather than a restrictive sense. It will however be evident that various modifications and changes may be made thereunto without departing from the broader spirit and scope of the invention as set forth in the claims.

Other variations are within the spirit of the present disclosure. Thus while the disclosed techniques are susceptible to various modifications and alternative constructions certain illustrated embodiments thereof are shown in the drawings and have been described above in detail. It should be understood however that there is no intention to limit the invention to the specific form or forms disclosed but on the contrary the intention is to cover all modifications alternative constructions and equivalents falling within the spirit and scope of the invention as defined in the appended claims.

The use of the terms a and an and the and similar referents in the context of describing the disclosed embodiments especially in the context of the following claims are to be construed to cover both the singular and the plural unless otherwise indicated herein or clearly contradicted by context. The terms comprising having including and containing are to be construed as open ended terms i.e. meaning including but not limited to unless otherwise noted. The term connected when unmodified and referring to physical connections is to be construed as partly or wholly contained within attached to or joined together even if there is something intervening. Recitation of ranges of values herein are merely intended to serve as a shorthand method of referring individually to each separate value falling within the range unless otherwise indicated herein and each separate value is incorporated into the specification as if it were individually recited herein. The use of the term set e.g. a set of items or subset unless otherwise noted or contradicted by context is to be construed as a nonempty collection comprising one or more members. Further unless otherwise noted or contradicted by context the term subset of a corresponding set does not necessarily denote a proper subset of the corresponding set but the subset and the corresponding set may be equal.

Operations of processes described herein can be performed in any suitable order unless otherwise indicated herein or otherwise clearly contradicted by context. Processes described herein or variations and or combinations thereof may be performed under the control of one or more computer systems configured with executable instructions and may be implemented as code e.g. executable instructions one or more computer programs or one or more applications executing collectively on one or more processors by hardware or combinations thereof. The code may be stored on a computer readable storage medium for example in the form of a computer program comprising a plurality of instructions executable by one or more processors. The computer readable storage medium may be non transitory.

The use of any and all examples or exemplary language e.g. such as provided herein is intended merely to better illuminate embodiments of the invention and does not pose a limitation on the scope of the invention unless otherwise claimed. No language in the specification should be construed as indicating any non claimed element as essential to the practice of the invention.

Preferred embodiments of this disclosure are described herein including the best mode known to the inventors for carrying out the invention. Variations of those preferred embodiments may become apparent to those of ordinary skill in the art upon reading the foregoing description. The inventors expect skilled artisans to employ such variations as appropriate and the inventors intend for embodiments of the present disclosure to be practiced otherwise than as specifically described herein. Accordingly the scope of the present disclosure includes all modifications and equivalents of the subject matter recited in the claims appended hereto as permitted by applicable law. Moreover any combination of the above described elements in all possible variations thereof is encompassed by the scope of the present disclosure unless otherwise indicated herein or otherwise clearly contradicted by context.

All references including publications patent applications and patents cited herein are hereby incorporated by reference to the same extent as if each reference were individually and specifically indicated to be incorporated by reference and were set forth in its entirety herein.

