---

title: Conditional promotion through packet reordering
abstract: Techniques are described for promoting content items in a page to load in a different order than the order in which they were initially designated to load in the page source. A page may include critical content items designated to load earlier than non-critical content items. In instances where there is a delay due to latency in generating or retrieving the critical content items, one or more non-critical content items may be promoted to be sent earlier than initially designated. Promotion may include packet reordering, such that packets including non-critical content items are sent to a user device prior to the packets that include critical content items. By promoting non-critical content items to be sent during the period in which the loading of the page may otherwise be stalled, overall page load times may be reduced.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09626344&OS=09626344&RS=09626344
owner: Amazon Technologies, Inc.
number: 09626344
owner_city: Reno
owner_country: US
publication_date: 20130919
---
With the increasing number and variety of products available for purchase over the World Wide Web more users are opting to purchase products and services online instead of patronizing more traditional brick and mortar businesses. As network capacities and device capabilities improve customers who shop online may come to expect faster presentation of content describing products and services of interest. In many cases a delay in loading the content of a web page may lead to a potential customer growing impatient and navigating away from the site resulting in lost business.

Certain implementations and embodiments will now be described more fully below with reference to the accompanying figures in which various aspects are shown. However various aspects may be implemented in many different forms and should not be construed as limited to the implementations set forth herein. Like numbers refer to like elements throughout.

This disclosure describes implementations of systems devices methods and computer readable media for promoting content items in a page to load in a different order than the order in which they were initially designated to load in the source of the page enabling the page as a whole to load faster. A page may include one or more first content items that are initially designated to load earlier during the presentation of the page through a web browser a user agent or some other type of application executing on a user device. The page may also include one or more second content items that are initially designated to load following the first content item s . For example in cases where the page is a web page that is configured to be presented in a web browser the first content item s may be included in the head section of the Hypertext Markup Language HTML source or other description of the page. The second content item s may be included in the body section of the page such that they are initially designated to load following the first content item s . In some cases the second content item s may be designated to load in response to a particular event such as a JavaScript onload event that is triggered when a user agent e.g. a web browser has substantially completed loading the other content items in a page. In such cases an event handler of the user agent may detect the onload event and load one or more second content items that are designated to load in response to the onload event.

In some cases the first content item s may include critical content items that are designated to load earlier when the page is presented. Critical content items may include content that is a goal or a purpose of the user s browsing experience. For example on an e commerce web site a user may be seeking information describing a particular product that the user may be interested in purchasing. Accordingly critical content items may include images of the product descriptions of the product information regarding the price or availability of the product customer or expert reviews of the product and so forth. In some cases the user s interest in a product may be inferred or otherwise determined based on a history of searches requested by the user the user s page view history on one or more web sites demographic or other characteristics of the user and so forth. Critical content items may also include content items which when loaded earlier on a page have been shown to increase the probability of a completed transaction e.g. a purchase through the page. Such a determination may be based on clickthrough data transaction data or other data describing the previous interactions of one or more users with one or more pages.

Critical content items may also include content items that are designated to load earlier when a page is presented because such content items enable the loading of other content. For example a navigation bar on one or more pages of a web site may be divided into two portions. A first portion may include content that is visible near the top of the page when displayed. In some cases such content may be designated to load earlier to enable other content on the page to load and to not be blocked. The second portion may include content that may be loaded later such as other parts of a navigation bar menu items or navigation items on the navigation bar data that is displayed as fly out data mouse over data other types of data not immediately visible on the page when it is loaded and so forth. In some cases one or more elements of a page e.g. navigation bars or menus may be loaded to enable product information to be presented. Accordingly critical content items may include content items that are loaded to enable the loading of other critical content items such as product information.

A web page may include resources that are loaded in conjunction with the page such as JavaScript files Cascading Style Sheet CSS files or other types of rich or dynamic content. In many cases web page designers may be presented with a choice whether to load such resources earlier during page presentation to improve the user s visual experience or to prioritize the loading of critical content items such as product information. In some cases the critical content items may be prioritized as first content items and the other content resources e.g. CSS files JavaScript files and so forth may be designated to load later as second content items.

Although a page may be initially designed such that critical content items are to be loaded earlier than non critical content items in some cases there may be a delay from a time when the user initially requests a page until the critical content items are available to load. Such a delay may be associated with one or more of the following a time during which a server device e.g. a content server or backend server dynamically generates one or more of the critical content items a latency in retrieving one or more of the critical content items from storage in memory a time to transmit one or more of the critical content items from a server device to a user device where the page is to be presented or between various server devices e.g. from a backend server to an edge server and so forth or a time to load and present the critical content items on the user device after they have been received at the user device. Because the critical content items may be designated to load first in a web page or to load earlier than non critical content items the delayed availability of the critical content items may result in a stall or interruption in the loading of the page on the user device.

Implementations provide for the promotion of one or more non critical content items such that the non critical content item s are loaded during the delay when the critical content items are unavailable. In some implementations the critical content item s may be initially designated e.g. in an initial version of the page to load in the head section and the non critical content item s may be initially designated to load following the head section such as in response to a JavaScript onload event. In such cases the promotion of one or more non critical content items may include altering the delivery of the non critical content item s so that they are loaded in the head section. Alternatively the promotion of one or more non critical content items may include modifying the source of the page to specify the non critical content item s at a different location or in a different section of the Document Object Model DOM of the page. Because the time period during the delay may be otherwise unutilized for loading content implementations may provide for a more efficient or faster overall loading of pages. In some cases the promotion of the non critical content items for earlier loading may not result in a further delay in the loading of the critical content items beyond the delay in loading the critical content items that may have resulted regardless of the promotion.

Although the examples herein may describe the promotion of non critical content items to load prior to critical content items when the availability of the critical content items is delayed implementations are not so limited. Implementations support the promotion of any type of second content items to load prior to any type of first content items when presenting a page that includes the first content items and the second content items that are initially designated to load in a particular order. For example first content items may describe any content items that are initially designated to load earlier than the second content items during the presentation of a page.

In some implementations pages may include web pages that are described using any version of HTML Dynamic HTML DHTML or other languages. Implementations may support content item promotion in pages that are described using any language in which the ordering of the loading of content items is based at least partly on an order in which the content items are referenced in the specification description or source of the page. Pages may also include dynamic or rich content that is provided through the use of JavaScript files CSS files and so forth. Although the examples herein may describe pages as web pages specified in HTML JavaScript CSS and so forth implementations are not so limited. Implementations provide for the promotion of content items that are included in any type of page and that may be subject to incremental delivery to a user device for presentation. For example implementations may support pages that include other types of content such as Scalable Vector Graphics SVG Virtual Reality Modeling Language VRML Extensible Markup Language XML content in which elements may be delivered in various sequences and so forth. Content items such as the first content items and the second content items described herein may be any type of data including but not limited to the following formatted or unformatted text numeric data of any type multimedia content such as images audio video graphics or haptic output data metadata executable code such as JavaScript or CSS and so forth.

Delivery of the content of a page may be performed using a communication protocol that operates at any level of a multi layer communications model such as the Open Systems Interconnection OSI model. For example content delivery may be performed using a protocol that primarily operates at the application layer such as any version of the Hypertext Transfer Protocol HTTP . Alternatively content delivery may be performed using a protocol that primarily operates at the transport or Internet layer or any other layer of the OSI model.

In some implementations content delivery may be performed using a multi stream networking protocol. Utilizing such a protocol a plurality of content delivery streams may be delivered to a client device such as a user device through the multiplexing of a plurality of data streams. Such multiplexing may include the interleaving of data frames from the plurality of streams of concurrent streams across a single channel or connection e.g. across a single Transmission Control Protocol TCP connection. In some cases the multiplexing may be time based multiplexing such that the data frames from the plurality of streams are interleaved in time. By multiplexing multiple streams the multi stream networking protocol may reduce latency in communications and may efficiently deliver information such as web content over a single connection to the client device. The multi stream networking protocol may operate at the application layer session layer or any other layer of the OSI model. In some implementations the multi stream networking protocol may be any version of SPDY developed primarily at Google Inc. of Mountain View Calif. USA. Implementations support the use of any multi stream networking protocol that multiplexes frames from multiple streams and that operates at any level of the OSI model.

The environment may include one or more user devices which may be employed by one or more users to view or otherwise access information on a page such as a web page. The user device s may comprise any type of computing device including but not limited to a smartphone a tablet computer a wearable computer an implanted computer a mobile gaming device an electronic book reader an automotive computer a desktop computer a personal computer a laptop computer a thin client a terminal a game console a smart appliance a home entertainment device and so forth. An example of the user device s is described further with reference to .

The user device s may execute a browser module . The browser module may be any type of web browser including but not limited to the following Mozilla Firefox Microsoft Internet Explorer Google Chrome Apple Safari Rockmelt Amazon Silk and so forth. The user device s may also execute a user application . The user application may include any type of application configured to present content. As shown in the example of the user application may execute as a web application within the browser module . However implementations are not so limited and also support any type of user application that executes outside the browser module . A user may employ one or both of the browser module or the user application to generate a page request for one or more pages such as a web page. The page request may include an identification of the requested page such as one or more of a Uniform Resource Identifier URI a Uniform Resource Locator URL a Uniform Resource Name URN an Internet Protocol IP address a file or directory path and so forth.

The user device s may communicate the page request to one or more server device s . The server device s may include any type of computing device including but not limited to a server computer personal computer network computer cloud computing or distributed computing device any of the types of computing devices described with reference to the user device s or other types of computing devices. An example of the server device s is described further with reference to .

In some implementations the server device s may execute a content service module . The content service module may receive and analyze the page request sent from the user device s . In some implementations the content service module may include software modules configured to process the page requests and the software modules may include modules from a web server an application server and so forth. The server device s may also execute a content generation retrieval module . In some implementations as in the example of the content generation retrieval module may execute as a sub module sub component or sub process of the content service module . Alternatively the content generation retrieval module may execute separately from the content service module .

The content generation retrieval module may perform operations to dynamically generate content to be served to the user device s in response to the page request . Alternatively the content generation retrieval module may access content storage to retrieve content to be served in response to the page request . The content storage may comprise any number of data storage systems that employ any type of data storage technology including relational databases non relational databases or both relational and non relational databases. Although the content storage is depicted in as external to the server device s implementations are not so limited. In some implementations the content storage may be at least partly incorporated into the server device s as local storage. The content storage may store one or more pages . In some implementations the content generation retrieval module may retrieve the page s that include content requested in the page request . Alternatively the content storage stores one or more content items that may be retrieved by the content generation retrieval module and assembled to dynamically generate the page s requested by the page request . In some implementations the content generation retrieval module may dynamically generate the page s to be served in response to the page request and cache the dynamically generated pages. The cached pages may then be served in response to subsequent similar requests for content until the cached version times out.

As described above the page to be served in response to the page request may specify one or more first content items and one or more second content items . In an initial version of the page such as in the version of the page retrieved or generated by the content generation retrieval module the first content item s may be initially designated to be loaded earlier than the second content item s during the presentation of the page and the second content item s may be initially designated to load after the first content item s . As described above in some cases the first content item s may include critical content items and the second content item s may include non critical content items.

In some implementations the page specified in the page request may be a dynamic web page. A dynamic web page may be at least in part generated dynamically on the server device s prior to being sent to the request user device s . In such cases the promotion of the second content item s may include dynamically generating the page such that references to the second content item s are included in the page description e.g. the page source before references to one or more of the first content items . For example one or more second content items may be promoted such that they are referenced in a resource tag object tag or other metadata element that is in the head section of the page instead of in the body section. Alternatively one or more second content items may be referenced earlier in the body section than they may otherwise be referenced in an absence of promotion. Promoting the second content item s to be referenced earlier in the page description than they would otherwise be referenced may enable the promoted second content item s to be retrieved and presented on the user device s while the first content item s are unavailable.

In some implementations the page specified in the page request may be a substantially static web page that is retrieved and sent to the user device s in response to the page request . In such cases the promotion of the second content item s may include modifying the source of the page before it is sent to the user device s . For example an initial version of the page may include one or more first content items that are referenced e.g. using object or resource tags prior to one or more second content items in the source of the page . Promotion may include editing the source to move one or more second content items to be referenced prior to one or more of the first content items in the source of the page . This may enable the user device s to request the promoted second content item s prior to the first content item s while the first content item s are unavailable.

In some implementations the determination to promote one or more second content items may be made substantially in real time when responding to the page request . For example while processing the page request a determination may be made that the generation or retrieval of one or more first content items is stalled and that the first content item s may therefore be unavailable during the delay . In such cases a dynamic determination may be made to promote one or more second content items to be sent to the user device or to be presented on the user device during the delay . Alternatively the determination to promote one or more second content items may be made at least in part prior to receiving the page request . For example such a determination may be made based on historical performance data describing previous delays while the first content item s are retrieved or generated for the requested page .

In the example of the second content item s are included in an onload event section description that is a subsection of the body section description . The onload event section description may include content that is initially specified to be loaded in response to a JavaScript onload event following the loading of other content in the page . Implementations are not limited to the example initial version of the page illustrated in . For example the initial version of the page may include first content item s and second content item s specified in the body section description such that the first content item s are initially designated to be loaded prior to second content item s . In general implementations support the specification of the first content item s and the second content item s in any section or portion of the DOM that describes the page and at any number of locations in the specification of the page .

Returning to in some implementations the server device s may include a content promotion module . As shown in the example of the content promotion module may execute as a sub module sub component or sub process of the content service module . Alternatively the content promotion module may execute as a separate module from the content service module . The content promotion module may analyze the content specified to be loaded within the page and determine whether promotion of any of the second content item s may result in faster page loading. Operations of the content promotion module are described further with reference to .

In some implementations the server device s may execute a delay estimation module which analyzes the page to determine whether there may be a latency delay pause or interruption in retrieving or generating one or more of the first content item s that are initially specified to load earlier within the page . If so then the delay estimation module may estimate an amount of time corresponding to a delay in retrieving or generating one or more of the first content item s . The delay may be estimated as a time period using any unit of measure such as milliseconds. Operations of the delay estimation module are described further with reference to . Although the delay estimation module is depicted in as a sub module sub component or sub process of the content promotion module in some implementations the delay estimation module may execute separately from the content promotion module .

In some implementations one or more of the second content item s may be promoted to load prior to the first content item s when the page is being presented on the user device s . Such promotion may generate an updated version of the page . depicts a schematic illustrating an example of a version of the page after promotion . This example illustrates the page as shown in modified by the promotion of one or more of the second content items . As shown in one or more of the second content items that are initially designated to be loaded in response to an onload event have been promoted to load within the head section. Accordingly following the promotion operations one or more second content item s are specified in the head section description and one or more other second content item s remain specified in the onload event section description .

In some implementations the promotion operations may generate an updated version of the page by modifying the source of the page . Alternatively instead of modifying the source the promotion operations may specify that certain content items be delivered to the user device or loaded on the user device in a different order than initially specified in the initial version of the page .

Returning to following the promotion operations the first content item s and the second content item s may be sent to the user device s . Based on the promotion operations the second content item s may be sent such that they may be loaded and presented on the user device s during the delay when the first content item s are being retrieved or generated. Accordingly implementations may provide for faster page loads by utilizing the delay to load content that may be otherwise stalled waiting for the retrieval or generation of the first content item s .

As described above with reference to the user device s may generate the page request which is sent to the server device s . The server device s may execute a content service module which receives the page request . Based on the page request the content service module may determine one or more server devices based on their suitability to provide content to satisfy the page request . The content service module may forward the page request to the content service module executing on the determined server device s . As described above the server device s may execute the content generation retrieval module which may perform operations to generate or retrieve the initial version of the page . The page may then be sent to the content service module executing on the server device s .

In some cases the server device s may cache one or more pages previously retrieved or generated in response to one or more page requests . In cases where there is a cached version of the page on the server device s and where the cached version is more recent than a predetermined threshold age the content service module may retrieve the cached version of the page instead of requesting a new version of the page from the server device s .

In implementations illustrated by the server device s may execute the content promotion module and the delay estimation module to determine whether any of the second content item s included in the page may be promoted to enable faster loading of the page . Such operations may proceed as described above and as further described below with reference to . Following the promotion operations performed on the server device s the first content item s and the second content item s may be sent to the user device s . As described herein the second content item s may be sent such that they may be loaded and presented on the user device s during the delay when the first content item s are being retrieved or generated.

As described above the user device s may generate the page request that is sent to the server device s and the server device s may retrieve or generate a specification for the requested page which is then sent back to the user device s . Alternatively in some implementations the page request may be sent to an intermediate server device such as the server device s described with reference to and the server device s may send the specification for the page to the user device s .

In implementations illustrated by the user device s may execute a user device content promotion module the operations of which are described further with reference to . The user device content promotion module may perform operations to determine whether any of the second content item s specified in the page may be promoted to enable faster loading of the page on the user device s . If so then promotion operations may be performed to specify that one or more of the second content item s be loaded prior to the first content item s during the delay while the first content item s are unavailable. Although not shown in the user device s may execute a delay estimation module to estimate the delay by performing operations similar to those of the delay estimation module . The user device content promotion module may generate a modified version of the page in which one or more second content items are promoted to be loaded and presented prior to one or more first content items during the delay when the first content item s may be available. The user device content promotion module may then provide the modified version of the page to the browser module which may then request the promoted second content item s prior to the first content item s as shown in the example of .

In some implementations the user device s may receive the first content item s and the second content item s from a same server device as shown in . Alternatively the user device s may receive two or more of the first content item s and the second content item s from different server devices e.g. in configurations where various content items are served by different ones of the server devices .

As described above the user device s may generate the page request which is sent to the server device s . The server device s may execute the content generation retrieval module which may generate or retrieve a specification for the requested page . The content promotion module the delay estimation module or both may perform operations to determine whether one or more of the second content item s specified in the page may be promoted to enable faster loading of the page on the user device s . Alternatively in some implementations the page request may be sent to an intermediate server device such as the server device s described with reference to and the server device s may send the specification for the page to the user device s after performing promotion operations.

The server device s may execute a multi stream networking protocol module which may mediate or control the communication of information over a multi stream networking protocol. Although depicts the multi stream networking protocol module as a sub module sub component or sub process of the content service module in some implementations the multi stream networking protocol module may execute as a separate module from the content service module . As shown in the multi stream networking protocol module may communicate with the content promotion module and receive information regarding which if any of the second content item s are to be promoted. The multi stream networking protocol module may then implement such promotion by prioritizing the writing of various content items to various streams included in a plurality of streams supported by the multi stream networking protocol. For example the multi stream networking protocol module may designate a first stream in which to communicate the first content item s and may designate a second stream in which to communicate the second content item s .

Although not shown in in some implementations the remainder of the requested page including content other than the first content item s and the promoted second content item s may be delivered to the user device s in the first stream . In some cases such remaining content may include one or more unpromoted second content items .

Returning to in some implementations the user device s may execute a user device multi stream networking protocol module . Although the user device multi stream networking protocol module is depicted in as a sub module sub component or sub process of the browser module in some implementations the user device multi stream networking protocol module may execute separately from the browser module . The user device multi stream networking protocol module may perform operations to receive and process the information communicated by the plurality of streams of the multi stream networking protocol and may communicate the contents of the page for presentation by one or both of the browser module and the user application .

Implementations may employ any of the example environments depicted in alone or in any combination. Implementations support content promotion operations performed on any device or in any stage of the content delivery process. The content promotion operations may be performed on the user device s by the user application the browser module or another module of the user device s . The content promotion operations may be performed by module s executing on any of the server device s including but not limited to a backend server a primary server a content server a mid tier server an intermediate server an edge server or on any other device. Moreover promotion operations may be performed incrementally by multiple devices. For example one of the server device s may promote one or more second content items and the user device s may promote one or more different second content items . Additionally the multi stream networking protocol content delivery mechanism described with reference to may be employed at least in part in any of the other system configurations described with reference to .

The various devices of the environments and may communicate with one another using one or more networks. Such networks may include public networks such as the Internet private networks such as an institutional or personal intranet or some combination of private and public networks. The networks may include any type of wired or wireless network including but not limited to local area networks LANs wide area networks WANs wireless WANs WWANs wireless LANs WLANs mobile communications networks e.g. 3G 4G etc. and so forth. In some implementations communications between the various devices in the environments and may be encrypted or otherwise secured. For example such communications may employ one or more public or private cryptographic keys digital certificates or other credentials supported by a security protocol such as any version of the Secure Socket Layer SSL or the Transport Layer Security TLS protocol.

The server device may include one or more input output I O devices . The I O device s may include input devices such as a keyboard a mouse a pen a game controller a touch input device an audio input device e.g. a microphone a gestural input device a haptic input device an image or video capture device e.g. a camera or other devices. In some cases the I O device s may also include output devices such as a display an audio output device e.g. a speaker a printer a haptic output device and so forth. The I O device s may be physically incorporated with the server device or may be externally placed.

The server device may include one or more I O interfaces to enable components or modules of the server device to control interface with or otherwise communicate with the I O device s . The I O interface s may enable information to be transferred in or out of the server device or between components of the server device through serial communication parallel communication or other types of communication. For example the I O interface s may comply with a version of the RS 232 standard for serial ports or with a version of the Institute of Electrical and Electronics Engineers IEEE 1284 standard for parallel ports. As another example the I O interface s may be configured to provide a connection over Universal Serial Bus USB or Ethernet. In some cases the I O interface s may be configured to provide a serial connection that is compliant with a version of the IEEE 1394 standard. The server device may also include one or more busses or other internal communications hardware or software that allow for the transfer of data between the various modules and components of the server device .

The server device may include one or more network interfaces that enable communications between the server device and other networked devices such as other server device s the user device s or the content storage . The network interface s may include one or more network interface controllers NICs or other types of transceiver devices configured to send and receive communications over a network.

The server device may include one or more memories described herein as memory . The memory comprises one or more computer readable storage media CRSM . The CRSM may include one or more of an electronic storage medium a magnetic storage medium an optical storage medium a quantum storage medium a mechanical computer storage medium and so forth. The memory provides storage of computer readable instructions that may describe data structures program modules processes or applications and other data for the operation of the server device .

The memory may include an operating system OS module . The OS module may be configured to manage hardware resources such as the I O device s the I O interface s and the network interface s and to provide various services to applications processes or modules executing on the processor s . The OS module may include one or more of the following any version of the Linux operating system originally released by Linus Torvalds any version of iOS from Apple Corp. of Cupertino Calif. USA any version of Windows or Windows Mobile from Microsoft Corp. of Redmond Wash. USA any version of Android from Google Corp. of Mountain View Calif. USA and its derivatives from various sources any version of Palm OS from Palm Computing Inc. of Sunnyvale Calif. USA and its derivatives from various sources any version of BlackBerry OS from Research In Motion Ltd. of Waterloo Ontario Canada any version of VxWorks from Wind River Systems of Alameda Calif. USA or other operating systems.

The memory may include one or more of the modules described above as executing on the server device s such as one or more of the content service modules the content generation retrieval module the content promotion module the delay estimation module or the multi stream networking protocol module . The memory may also include one or more other modules such as a user authentication module or an access control module to secure access to the server device and so forth.

The memory may include data storage to store data for operations of the server device . The data storage may comprise a database array structured list tree or other data structure and may be a relational or a non relational datastore. The data storage may store one or more of the page request or the page including the first content item s and the second content item s . In some implementations the data storage may also store delay estimation information that may be employed by the delay estimation module to estimate the delay in presenting the first content item s on the user device s . The delay estimation information may include one or more of the following historical timing information describing an amount of time taken to previously generate or retrieve the first content item s computing capabilities processing speed network capabilities or other characteristics of one or more server devices that generate or retrieve the first content item s characteristics of a network available to communicate the first content item s to the user device s such as bandwidth latency speed and so forth computing capabilities processing speed or network capabilities or other characteristics of the user device s to receive and present the first content item s or information describing characteristics of the first content item s such as file size file type format and so forth.

The data storage may also store other data such as user authentication information or access control data. In some implementations at least a portion of the information stored in the data storage may be stored externally to the server device on other devices that are accessible to the server device via the I O interface s or via the network interface s .

The user device may include one or more memories described herein as memory . The memory comprises one or more CRSM. The CRSM may include one or more of an electronic storage medium a magnetic storage medium an optical storage medium a quantum storage medium a mechanical computer storage medium and so forth. The memory provides storage of computer readable instructions data structures program modules and other data for the operation of the user device . The memory may include an OS module . The OS module may be configured to manage hardware resources such as the I O device s the I O interface s and the network interface s and to provide various services to applications processes or modules executing on the processor s . The OS module may include one or more of the operating systems described above with reference to OS module .

The memory may include any of the modules described above as executing on the user device s such as the browser module the user application the user device content promotion module or the user device multi stream networking protocol module . The memory may also include one or more other modules such as a user authentication module or an access control module to secure access to the user device and so forth.

The memory may include data storage to store data for operations of the user device . The data storage may comprise a database array structured list tree or other data structure and may be a relational or a non relational datastore. The data storage may store the page request . The data storage may store the page including the first content item s and the second content item s . In some implementations the data storage may store the delay estimation information that may be employed by the user device content promotion module to determine whether any of the second content item s are to be promoted. The data storage may also store other data such as user authentication information or access control data. In some implementations at least a portion of the information stored in the data storage may be stored externally to the user device on other devices that are accessible to the user device via the I O interface s or via the network interface s .

At the page request is received from the user device s requesting delivery of content included in the page . As described herein the requested page may specify the first content item s and the second content item s the first content item s being initially designated to load prior to the second content item s during presentation of the page . In some implementations the first content item s may have been previously identified as critical content items based on a determination that the first content item s provide information regarding a product available for purchase through the page such as a product image description price availability user or expert review and so forth. In some implementations the first content item s may have been previously identified as critical content items based on a determination that the first content item s provide information that contributes to a positive user experience. Such a determination may be based on clickstream data or other data describing user behavior on the page . The determination may also be based on usability testing customer satisfaction survey information and so forth. In some cases the first content item s may have been previously identified as critical content items based on a determination that the first content item s contributed to the completion of at least one previous transaction through the page . Such a determination may be based on historical data describing previous transactions clickstream data describing the browsing or navigation behavior of users and so forth.

At the delay may be estimated or otherwise determined. The delay may be a time period during which is it predicted that the first content item s may be unavailable such as while the first content item s are being generated or retrieved from storage. Accordingly in the absence of promotion the loading of the page may be stalled while waiting for the first content items . Determination of the delay is described further with reference to .

At at least one of the second content items may be designated to be promoted to load earlier during the loading of the page than initially designated. In some implementations the determination of the second content item s to promote may be based on a determination that the time to load the promoted second content item s is not greater than the delay . In some implementations to avoid any further delay in loading the first content item s the second content item s chosen for promotion may include the second content item s for which loading may be completed within the span of the delay . The time to load and present the second content item s may be estimated based on one or more of the following a file size and file type of the second content item s the network capacity available to communicate the second content item s to the user device s the processing capabilities speed or other characteristics of the server device s that serve the second content item s or the processing capabilities speed or other characteristics of the user device s on which the second content item s are to be presented.

In some implementations the determination of which of the second content item s to promote may be further based on an analysis of user behavior or the previous navigation that brought the user to the page . For example if the user is browsing a page that describes a product offered for sale through an e commerce web site and the user reached the page from search results generated by an external search engine an inference may be made that the user is interested in examining a particular product and making a substantially immediate choice whether to buy the product. In such cases implementations may determine to promote content items that may help the user make such a decision such as content items that implement shopping cart or purchase functionality. As another example if the user reached the page after browsing other pages for products within the e commerce web site an inference may be made that the user is more casually browsing a general class or type of products within one or more categories. In such cases implementations may determine to promote content items that aid the user in his or her browsing such as content items associated with category or brand information or product options for color size quantity and so forth.

Moreover in some implementations the determination of which of the second content item s to promote may be based on an analysis of user characteristics such as age gender demographic data location language information and so forth. For example if it is determined that previous promotions of particular second content item s led to purchases by users with similar characteristics to those of a current user those particular second content item s may also be promoted to generate the page that is presented to the current user.

In some implementations the determination of which of the second content item s to promote may be based on a prediction of the user s behavior on the page such as whether the user is likely to scroll down the page . For example based on the user s previous behavior or the behavior of similar users a prediction may be made that the user is likely to scroll down the page to read a first listed review of a product or multiple reviews. The page may include JavaScript to support the reading and rating of reviews on a product page and such JavaScript may normally be loaded following an onload event. Based on the determination that the user is likely to scroll down to read at least one review the JavaScript content items supporting the reviews may be promoted to facilitate the user s activity. Moreover one or more additional second content items may be promoted to support the activity such as mouse over content that provides information regarding the reviewer s identity rating and so forth or other background functionality related to review features on the page .

As another example the page may provide functionality that enables zooming scrolling or rotating of an image or the playing of video content in response to pop over events mouse over events clicks and so forth. In an initial version of the page the content items e.g. JavaScript providing such functionality may not be loaded until the user performs the events. For example the content items for a feature enabling an image zoom in response to a click event may not be loaded until the click event. In cases where the user s past behavior shows a tendency to click on an image to zoom the second content item s enabling the zoom feature may be promoted to provide that functionality earlier in the page load process enhancing the user experience.

Alternatively in some implementations the candidates for promotion among the second content item s may include those content items that are designated to load in a steady state of the page e.g. the content items that may be loaded in the absence of any user inputs beyond the user s initial request for the page .

At the second content item s designated for promotion at may be sent to the user device s . As described herein the second content item s may be loaded for presentation on the user device s at least partly during the delay while the first content item s are unavailable. In some cases the loading of the second content item s may begin during the delay and complete following the delay . At following the delay the first content items may be sent to the user device s to be loaded for presentation on the user device s . Moreover in some cases any unpromoted second content item s may also be sent at along with any other content of the page .

In some implementations the specification of one or more of the second content item s in the description of the page may also be modified such that the second content item s are included inline in the source of the page instead of incorporated by reference. The inlining the second content item s may include modifying the source of the page to include all or a portion of the code for second content item s that are JavaScript files or CSS files. In some cases the inlining may enable the promoted second content item s to load faster given that the user device s may avoid an additional network operation to retrieve the code for referenced second content item s . The decision to modify the specification of the second content item s in the source for the page may be based at least in part on the user s navigation history in reaching the page . For example if the user has reached the page from another page that is internal to the same web site an assumption may be made that the code for the second content item s e.g. JavaScript and CSS files may already be cached in memory on the user device s or the server device s e.g. an edge server . In such cases implementations may opt not to inline the second content items s given that the code for such items may already be readily available in cache. Alternatively if the user has reached the page from an external web site an assumption may be made that the code for the second content item s may not be present in a cache or that the cache may be cold. In such cases implementations may opt to inline the code for the second content item s to enable the second content item s to load faster. Additionally in such cases implementations may also leave a reference to the second content item s in their original location in the source for the page such as in the onload event section description . Leaving the reference at onload may ensure that the code for the second content item s is cached in preparation for a subsequent request.

At a determination may be made of the page to be presented in a user interface executing on the user device s . The user interface may be a user interface provided by the browser module the user application or another module executing on the user device s . As described herein the page may include one or more first content items and one or more second content items . In some implementations the determination of the page may be based on the URL or other identifier included in the page request . The determination of the page may also be based at least in part on receiving the source or other specification for the page from the server device s .

At the delay may be estimated or otherwise determined based at least in part one on or more of the following a latency in receiving the first content item s from a remote server such as the server device s or a render time to render or present the first content item s on the user device s . Estimation of the delay is described further with reference to .

At a determination may be made of at least one of the second content items to be promoted to load earlier during the loading of the page than initially designated. Such a determination may proceed similarly to that described above with reference to .

At the second content item s determined at may be promoted as described above such that the promoted second content item s are loaded in the user interface during the delay while the first content item s may be unavailable. In some implementations such promotion may include modifying the source of the page that is received at the user device s in response to the page request to alter the order in which the content items are specified in the source. At following the delay the first content items may be loaded for presentation in the user interface.

In some implementations the determination to promote one or more second content items may be based at least partly on a determination that the second content item s may take longer to render or present on the user device s . In such cases the second content item s may be promoted such that their rendering may begin sooner than otherwise in the absence of promotion providing more time for the rendering of the promoted second content item s .

At the page request is received from the user device s requesting delivery of content included in the page . As described herein the requested page may specify the first content item s and the second content item s the first content item s being initially designated to load prior to the second content item s during presentation of the page .

At the first stream may be designated to communicate the first content item s to the user device s and the second stream may be designated to communicate the second content item s to the user device s . As described above with reference to the first stream and the second stream may be included in a plurality of streams that are multiplexed by a multi stream networking protocol such as SPDY . In some cases the multiplexing of the plurality of streams may be performed over a single network connection to the user device s .

At a determination may be made of at least one of the second content items to be promoted to load earlier during the loading of the page than initially designated. Such a determination may proceed similarly to that described above with reference to .

At the information describing the second content item s may be written to the second stream such that the second content item s are communicated to or loaded on the user device during the delay . Having been written to the second stream the second content item s may be communicated to the user device s during the delay while the first stream is stalled waiting for the availability of the first content items .

At an event may be detected that indicates that the first content item s have become available for transport to the user device s . The event may include one or more of the following a completion event e.g. an IOCompletion event generated by a process e.g. content generation retrieval module that executes on the server device s to retrieve or to dynamically generate at least in part the first content item s a state transition of the process to a state indicating that the process has completed its generation or retrieval of the first content item s an event indicating an exhaustion of the second content item s available for promotion e.g. indicating that there are no more available content items that may be promoted or an expiration of the estimated delay .

At based at least partly on the event detected at the information describing the first content item s may be written to the first stream to be communicated to the user device s .

At a determination is made of a generation time to dynamically generate at least in part one or more first content items on the server device s in cases where the first content items are at least in part generated dynamically. The determination of the generation time may be based on characteristics of the first content item s to be generated such as a file size and file type of the first content item s . The determination of the generation time may also be based on the processing capacity speed or other characteristics of the server device s where the first content item s are to be generated. The determination of the generation time may also be based on characteristics of the process that executes to generate the first content item s .

At a determination is made of a retrieval time to retrieve one or more first content items from the content storage . The determination of the retrieval time may be based on characteristics of the first content item s to be retrieved such as a file size of the first content item s . The determination of the retrieval time may also be based on characteristics e.g. speed bandwidth latency and so forth of a network connecting the content storage and the server device s retrieving the first content item s . In some cases the determination of the retrieval time may be further based on the processing capacity speed or other characteristics of the content storage or of the server device s retrieving the first content item s .

At estimate determination is made of a transmission time to transmit the first content item s to the user device s . This determination may be based at least in part on characteristics e.g. speed bandwidth latency and so forth of a network connecting the user device s and the server device s .

At a determination is made of a load time to load the first content item s for presentation on the user device s . This determination may be based at least in part on one or more of the following a type of the user device such as whether the user device is a mobile device performance capabilities of the user device such as processing capacity speed memory available and so forth or performance capabilities of the user application the browser module or any other user agent that is executing on the user device to present the content.

At data may be accessed that describes one or more previous load times associated with the loading of the first content item s during at least one previous presentation of the page or during a simulation of a presentation of the page . Such historical data may be employed to estimate or otherwise determine the delay .

At the delay may be determined based on one or more of the generation time the retrieval time the transmission time the load time or the one or more previous load times determined at and respectively. The delay may be employed to determine which if any of the second content item s to promote.

In some implementations the promotion of one or more second content items may include sending the promoted second content item s to the user device prior to the sending of the delayed first content item s . In such cases promotion may include the reordering of network packets communications frames or other communicated data portions that transport the content items to the user device at any layer of a multi layer communications model. Promotion based on packet reordering is described further with reference to . Promotion based on frame reordering is described further with reference to .

At the page request may be received from the user device as described above with reference to . The requested page may include the first content item s and the second content item s . As described above the first content item s may include critical content item s and the second content item s may include non critical content item s . In some cases the first content item s may be designated to be sent to the user device in one or more first packets of a packet stream. The second content item s may be designated to be sent to the user device in one or more second packets that are initially designated to be sent after the sending of the first packet s in the packet stream. A packet stream may include any number of packets associated with any packet type or any protocol that are communicated over a network.

For example the first content item s and the second content item s of the page may be sent to a network interface and the data for the content item s may be distributed among one or more network packets for communication to the user device . Such network packets may include TCP packets Stream Control Transmission Protocol SCTP packets or other packets that are at a transport layer of a multi layer communications model such as the OSI model. The content item s may also be included in packets at any other layer of the multi layer communications model. The first transport layer packet s e.g. carrying data for the first content item s may be incorporated into a first set of one or more network layer packets such as IP packets that are at a network layer of the multi layer communications model. The second transport layer packet s e.g. carrying data for the second content item s may be incorporated into a second set of one or more network layer packets which are initially designated to be sent to the user device following the first set of network layer packet s . In some cases the initial order designation may include a sequence numbering of the transport layer packets with the first transport layer packet s having a lower sequence numbering than the second transport layer packet s .

At a determination is made of the delay in presenting at least one of the first content item s on the user device . At a determination is made of at least one of the second content item s to be promoted. The operations at and may proceed similarly as described above with reference to and .

In some embodiments at a portion e.g. a window of the packet stream may be reserved or otherwise allocated for the number of first packet s that were to be sent prior to the at least one of the second packet s in the absence of promotion. In some cases this allocation may include estimating an amount of data that would have been sent in the first packet s and allocating the estimated amount in the packet stream following the second packet s . In cases where the size of the packets is fixed the allocated portion may be a multiplicative product of the number of the delayed first packet s and the packet size. For example where the packet size is 1 kilobyte and four first packet s are being delayed the allocated portion may be 4 kilobytes.

In cases where the size of the packets is variable such that the packet size may range from a minimize size to a maximum size the allocated portion may range from a minimum allocated size to a maximum allocated size. In such cases the minimum allocated size may be the number of delayed first packet s multiplied by the minimum packet size and the maximum allocated size may be the number of delayed first packet s multiplied by the maximum packet size. For example the minimum packet size may be 100 bytes and the maximum packet size may be 1 kilobyte. Accordingly if the number of first packet s is four the allocated portion may range in size from 400 bytes to 4 kilobytes.

In some implementations the first content item s may be adjusted to ensure that the delayed first content item s substantially fit into the portion of the packet stream that is allocated for the delayed first packet s . Adjustment may include truncating the first content item s to fit within the allocated portion. Adjustment may also include padding or augmenting the first content item s to use the allocated portion. In cases where the packets correspond to a communication protocol that supports fixed size packets such as Asynchronous Transfer Mode ATM packets e.g. frames implementations may truncate the first content item s to fit within the allocated portion that is a number of the first packet s multiplied by the fixed packet size. In such cases with a fixed packet size implementations may also augment or pad the first content item s to use the allocated portion. Augmentation may include inserting spaces or other additional data into the first packet s carrying the first content item s . In cases where the packets correspond to a communication protocol with variable packet size such as TCP or Ethernet packets the first content item s may be truncated to fit within the maximum packet size multiplied by the number of first packet s .

In some implementations the adjustment of the size of the first content item s may be performed by one or more processes that generate the first content item s such as the content generation retrieval module . For example the size of the allocated portion of the packet stream may be conveyed to the process es that generate the first content item s which may then generate the first content item s with a size corresponding to the size of the allocated portion. In some cases the adjustment of the size of the first content item s may include selecting particular first content item s to send in the first packet s within the allocated portion of the packet stream and not sending or further delaying the sending of other first content item s .

In some implementations where the first and second packets are TCP packets at a size of a TCP congestion window may be adjusted. A congestion window may be employed when using TCP to communicate information over a network the congestion window being associated with a number of outstanding packets that a client device e.g. the user device s and a server device e.g. the server device s may accept from each other. In some implementations promotion operations may include specifying a TCP congestion window of a size that is large enough to accommodate the promoted second content item s and the delayed first content item s . For example in cases where the second content item s are to be carried in five packets and the first content item s are to be carried in four packets the TCP congestion window may be set to a size corresponding to at least nine packets. Such a sizing of the TCP congestion window may ensure that the second content item s are held in buffer and not dropped. For example absent a large enough congestion window the user device s receiving the second packet s may infer based on the received second packet s being out of order in sequence number that the first packet s have been lost. Specifying a large enough congestion window may ensure that the second packet s are held in buffer until the eventual receipt of the first packet s .

At at least one of the second packet s may be sent to the user device in the packet stream the at least one of the second packet s including the at least one of the second content item s that were designated for promotion at . The sending of the second packet s may be performed prior to the sending of at least one of the first packet s that includes the delayed first content item s .

At following the delay e.g. when the first content item s become available the first packet s carrying the first content item s may be sent to the user device in the portion of the packet stream allocated at . In this way some implementations may provide for the promotion of second content item s by sending the packets carrying the promoted second content item s in an order that is different from the order in which the packets may have been sent absent promotion. In some implementations the first content item s may be adjusted or generated based at least partly on the size of the allocated portion of the packet stream. As described above the adjustment may include generating the first content item s to be of a size that substantially fits within the size of the allocated portion of the packet stream.

In some cases various TCP packets may be routed differently over a network at the IP level and accordingly may be received by the user device in a different order from the order in which they were sent. On receiving the out of order transport layer packets the user device or a network interface or controller operating on the user device may buffer at least some of the earlier received packets until the later packets are received and reconstruct the initial order of the TCP packets according to their sequence numbers. Such reconstruction of the initial order may be performed automatically on the user device in accordance with TCP or in accordance with any other protocol that supports a sequential ordering of packets. Implementations may exploit this feature of network packet processing e.g. in accordance with TCP to reorder packets that were sent out of order from the server device s . For example as described with reference to implementations may promote the second content item s to be sent in second packets prior to the sending of the first packets carrying the first content item s instead of waiting for the first content item s to become available. The out of order packets may then be reordered automatically following their arrival at the user device . By avoiding or mitigating a delay in data transmission due to the delayed availability of the first content item s implementations may enable the communication of the contents of the page more efficiently than may otherwise occur absent promotion.

Some implementations may include one or more modifications to a network controller network interface or network stack on the server device s to enable the packet reordering described above. For example modifications may be made to enable processes to write out of order TCP packets to a sequence of IP packets as described above. Such modification may enable processes to open and write to an IP socket instead of opening and writing to a TCP socket on the server device s . The application code for a process such as the content service module may send a stream of out of order TCP packets to be included in the payloads of one or more IP packets to be communicated to the user device .

Alternatively in some implementations the kernel of the server device s may be modified to enable discrete TCP packets to be sent to the network interface in a designated order. For example instead of writing bytes to a stream which is then distributed into TCP packets by the network interface implementations may provide a driver that may be installed in the kernel and that may expose an application programming interface API . Such an API may enable applications to request that data be sent in an out of order sequence of packets as described above.

The operations described in may be performed on any device e.g. a server side device that generates IP packets to carry TCP packets including the content item s of the page . For example a TCP connection may be formed between a server side device such as a proxy server or other intermediate server and a device on the client side of the connection. The device that terminates the TCP connection on the client side may be a gateway or other device that performs network address translation NAT operations for the user device s . In such cases e.g. when IP version 4 is in use the packet reordering on the client side may be performed at the NAT device and the sending of the reordered packets may be performed on a proxy server on the server side of the connection. Alternatively e.g. when IP version 6 is in use the packet reordering on the client side may be performed at the user device itself given that IP version 6 may enable a connection between the user device s and the server device s that is substantially unmediated by a NAT device or another intermediate device.

Although the examples included herein describe promotion through the reorder of packets at the transport level such as TCP or SCTP packets implementations are not so limited. Implementations support packet reordering at any layer of a multi layer communications model including the reordering of any type of packets that are sequentially ordered according to a communications protocol that operates at any layer.

At the page request may be received from the user device as described above with reference to . The requested page may include the first content item s and the second content item s . As described above the first content item s may include critical content item s and the second content item s may include non critical content item s . In some cases the first content item s may be designated to be communicated to the user device in one or more first communication frames of a frame sequence. The second content item s may be designated to be sent to the user device in one or more second communication frames that are initially designated to be sent after the sending of the first frame s in the frame sequence. In some cases a frame may include a group of packets that may be an ordered group of packets. A frame sequence may include any number of frames.

At a determination is made of the delay in presenting at least one of the first content item s on the user device . At a determination is made of at least one of the second content item s to promote. The operations at and may proceed similarly as described above with reference to and .

In some embodiments at a portion e.g. a window of the frame sequence may be reserved or otherwise allocated for the number of first frame s that were to be sent prior to the at least one of the second frames in the absence of promotion. In some cases this allocation may include estimating an amount of data that would have been sent in the first frame s and allocating the estimated amount in the frame sequence following the second frame s . In cases where the size of the frames is fixed the allocated portion may be a multiplicative product of the number of the delayed first frame s and the frame size. For example where the frame size is 1 kilobyte and four first frame s are being delayed the allocated portion may be 4 kilobytes.

In cases where the size of the frames is variable such that the frame size may range from a minimize size to a maximum size the allocated portion may range from a minimum allocated size to a maximum allocated size. In such cases the minimum allocated size may be the number of delayed first frame s multiplied by the minimum frame size and the maximum allocated size may be the number of delayed first frame s multiplied by the maximum frame size. For example the minimum frame size may be 100 bytes and the maximum frame size may be 1 kilobyte. Accordingly if the number of first frame s is four the allocated portion may range in size from 400 bytes to 4 kilobytes.

In some implementations the first content item s may be adjusted to ensure that the delayed first content item s fit into the portion of the frame sequence that is allocated for the delayed first frame s . In some cases the adjustment of the first content item s may include adjusting a rate of compression of the first content item s or altering a compression algorithm employed to compress the first content item s . For example when the first content item s include content that is compressed according to a dictionary based compression algorithm such as a ZIP based algorithm altering the compression may include employing a different compression dictionary for various frames. Altering the compression may also include compressing certain frames and not compressing other frames. In some cases compression may be altered by determining to compress one or more particular types of data e.g. textual data or metadata such as HTML and determining not to compress other types of data e.g. image data that may already be in a compressed format such as the Joint Photographic Experts Group JPEG image format . In some cases the determination to adjust the rate of compression of the first content item s may be based at least in part on considerations regarding the additional latency that may be incurred by altering the compression.

At at least one of the second frame s may be sent to the user device in the frame sequence the at least one of the second frame s including the at least one of the second content item s that were designated for promotion at . The sending of the second frame s may be performed prior to the sending of at least one of the first frame s that includes the delayed first content item s .

At following the delay e.g. when the first content item s become available the first frame s carrying the first content item s may be sent to the user device in the allocated portion of the frame sequence. In some implementations the first content item s may be adjusted based at least partly on a size of the allocated portion of the frame sequence as described above. In this way some implementations may provide for the promotion of second content item s by sending the frames carrying the promoted second content item s in an order that is different from the order in which the frames may have been sent absent promotion.

In some implementations the inclusion of the first content item s and the second content item s in one or more frames may be similar to the packet based communications described with reference to but with processing being performed at the frame level instead of at the packet level. For example content may be incorporated into one or more frames that operate at an application layer of the multi layer communications model such as the OSI model instead of into one or more packets at the transport or network layer. Such framing may be based on SPDY or on any other process at the application layer that communicates data using an ordered sequence of communications frames. Implementations also support framing at any other layer of a multi layer communications model.

In some implementations where the framing is at the application layer one or more modifications may be made to an application server or other software executing on the server device s to enable the application server or other software to send out of order frames to a network controller network interface or network stack. Implementations may also include one or more modifications to software executing on the user device s to enable the software to receive out of order frames and to reorder them before sending the reordered frames on to the user application or the browser module .

In some implementations the promotion of content items may employ one or more priority indicators incorporated into the specification e.g. source of the page . Such priority indicators may be incorporated into the page at a content server or another server device before the page is served to the user device and may provide to the user device a suggestion or a hint of an order in which to request content items for the page . Incorporation of priority indicators may include modifying the source of retrieved static pages. Incorporation of priority indicators may also include dynamically generating dynamic pages to include the priority indicators.

At the browser module or another module executing on the user device may generate the page request requesting the page to be presented on the user device . The page request may be sent to the server device s as described above.

At the content service module or another process executing on the server device s may receive the page request . As described above the requested page may include references to one or more first content items and one or more second content items . For example in cases where the page is specified using any version of HTML DHTML XHTML or some other markup language the content item references may be metadata tags that identify or otherwise reference the content items provide a location where the content items may be retrieved provide attributes that indicate how the content items may be presented and so forth. The first content item s may be initially designated to load prior to the second content item s based on a listed order of references in the page . In cases where the page is a substantially static page such an initial order designation may be based on the references to the first content item s occurring earlier than the references to the second content item s in the source of the page . The first content item s may include critical content items as described above. In cases where the page is a substantially dynamic page that is at least partly generated in response to the page request the initial order designation may be determined by one or more processes that generate the page in the absence of promotion operations.

At a determination is made of a suggested order for requesting the first content item s and the second content item s during a presentation of the page . The suggested order may differ at least partly from the listed order of the references in the page . In some cases the determination of the suggested order is based on a determination to promote one or more of the second content item s such that the promoted second content item s may be requested by the user device earlier than initially designated. The decision to promote one or more of the second content item s may proceed as described with reference to . For example the decision to promote one or more of the second content item s may be based on the determined delay in the availability of one or more of the first content item s as described with reference to .

The decision to promote may also be based at least partly on user experience considerations. For example based on historical data describing the behaviors of previous users on the page or other pages certain content items may be determined to contribute to a substantially positive user experience or may be determined to have contributed to at least one transaction e.g. product purchase completed through the page . Such content items may be promoted to load earlier than initially designated.

In some cases the decision to promote may be based at least partly on a determination that one or more other content items depend on a prior loading or presentation of the promoted second content item s . For example a decision may be made to promote an image content item specifying an image that is of unknown size prior to its loading given that the size of the image may affect the page layout in general. In some cases a browser may not render the remainder of the page until the size of the image is known e.g. until the image is loaded . Accordingly implementations may promote the image content item to enable the remainder of the page to be rendered earlier than it may otherwise be rendered absent such promotion. As another example a decision may be made to promote script objects code objects or other types of objects on which other content items depend. For example the loading of one or more JavaScript objects may depend on a particular JavaScript library having been previously loaded or script objects for menu items may depend on the prior loading of the script describing the menu itself. In such cases the content item for the depended upon object may be promoted based on the dependency of other objects.

At one or more priority indicators may be incorporated into the page . Such priority indicator s may indicate suggest or hint at the suggested order in which one or more content items of the page may be requested by the user device . In cases where one or more second content item s are promoted to load prior to one or more first content item s the priority indicator s may indicate such promotion. Implementations may also employ the priority indicator s to suggest an order in which the user device may request any or all of the content items in the page including but not limited to the first content items and the second content items .

In some implementations the priority indicator s may suggest or hint at an order in which the content items may be requested by the user device and the browser module or other module of the user device may determine a request order by considering the suggested order in view of other considerations as described further with reference to . Alternatively in some implementations the priority indicator s may indicate an order in which the content items are to be requested by the browser module or other module of the user device e.g. providing for substantially no discretion by the user device in determining the request order.

In some implementations the priority indicators may be incorporated as metadata elements into the source or specification of the page . For example in cases where the page is described using a version of HTML the priority indicators may be incorporated as attributes in the HTML tags that reference one or more content items such as images scripts text elements and so forth. Examples of such metadata based priority indicators are described further with reference to .

At the page including the incorporated priority indicator s may be sent to the user device . At the browser module or another module of the user device may receive the page including the priority indicator s . The processing of the received page on the user device is described further with reference to .

At the browser module or another module executing on the user device may determine an order in which to request the content items referenced in the page such as the first content item s and the second content item s . The determined order of requests may be based at least partly on the order suggested or otherwise indicated by the priority indicator s incorporated into the page as described above with reference to .

At in some implementations the order may be modified or further determined based on one or more other considerations. In some cases the order may be modified based on a determination that one or more content items for the page are currently cached or otherwise stored in memory on the user device and that such cached content items were cached recently enough that they may reflect the current versions of the content items available through the server device s . For example one or more priority indicators may suggest that a particular second content item be promoted to load prior to a particular first content item based on the delay in the availability of the particular first content item . The browser module may determine that a substantially current version of the first content item is available in cache on the user device and may therefore choose to disregard the suggested request order indicated by the priority indicators.

In some implementations the order may be modified based on current network conditions e.g. bandwidth latency and so forth of one or more networks that enable communications between the user device and other devices. Such network conditions may be measured at the user device . Alternatively data describing the network conditions may be measured at another device and communicated to the user device . For example one or more priority indicators may suggest that a particular second content item be promoted to load prior to a particular first content item . However it may be determined that the second content item may be delivered substantially more slowly to the user device than the first content item based on current network conditions on network path over which the second content item may be delivered. In such cases the browser module or another module of the user device may disregard the suggested request order indicated by the priority indicator s . Implementations may determine the request order based on the order indicated by the priority indicator s based on whether content items are locally cached based on current network conditions or based on other factors and considerations.

At the content items of the page e.g. the first content item s the second content item s or other content items may be requested in one or more requests for content items sent from the user device s to the server device s . The one or more requests for content items may be sent in the order determined at and .

At the request s for content item s may be received at the server device s . At the requested content item s may be served to the user device s . In some cases the content item s may be served according to the order in which they were requested.

At the requested content items e.g. the first content item s the second content item s or other content items may be received loaded and presented by the browser module or another module executing on the user device .

Although depicts the priority indicator s incorporated into the page as HTML attributes in HTML tags corresponding to the content items implementations are not so limited. Implementations may support the use of priority indicators that are incorporated into the page as any type of data or metadata in accordance with any markup language or any other type of language employed to describe a page. Moreover although depicts the priority indicator s indicating a numeric order e.g. 1 2 3 and so forth implementations support other types of priority indicators . For example the priority indicators may provide a non numeric suggestion of a request order such as a high medium or low priority. Further although depicts the priority indicator s indicating an order along a single dimension employing a single variable e.g. the priority attribute implementations support the use of priority indicator s that specify information along multiple dimensions or that use one or more variables. Implementations may also support priority indicator s as metadata elements that are identified using attributes other than priority. 

In the example of three types of priority indicator s are depicted ue priority render priority and script priority. The ue priority type of the priority indicator may indicate that the decision to promote was based at least partly on user experience considerations. As described above with reference to such user experience considerations may for example be based on a determination that particular content items previously contributed to a substantially positive user experience or a completed purchase. The render priority type of the priority indicator may indicate that the decision to promote was based at least partly on a determination that unknown characteristics of a content item may block the rendering of the page until the content item is rendered. For example as described above an unknown image size may affect page layout and may therefore block the loading of other elements of the page until the image is loaded. The script priority type of the priority indicator may indicate that the decision to promote was based at least partly on a determination that other content items may depend on the loading of the promoted content item. Such dependencies may include dependencies between script or code elements as described above or through other types of dependencies.

Some implementations may provide the priority hierarchy that indicates a priority ordering between the various types of the first dimension of the priority indicators . For example as shown in render priority may be given a higher priority than ue priority which may be given a higher priority than script priority. The browser module or another module of the user device may sort the content items of the page according to their priority indicator s to determine the request order . In some implementations such sorting may be performed first on the type of the priority indicator according to the priority hierarchy . Secondary sorting may then be performed based on the values of the priority indicators e.g. the values of the attributes . For example as shown in the request order includes first the render priority content items sorted based on their numeric values followed by the ue priority content items sorted based on their numeric values followed by the script priority content items sorted based on their numeric values .

Although illustrates an example in which the priority indicator s include multiple dimensions associated with the priority hierarchy implementations are not limited to this particular example. Implementations support other priority indicator s that include multiple dimensions. For example in some implementations the priority indicator s may be metadata attributes of a form type N where N may be any numeric value e.g. 1 2 3 and so forth and type may indicate a type of the first dimension e.g. ue render script and so forth . The priority hierarchy may describe a hierarchy between these various types as described above such as render ranked higher than ue and ue ranked higher than script. Thus a metadata tag referencing a resource may include the attribute priority ue 2 indicating that the resource has been assigned the first dimension priority of ue and the second dimension priority of 2. Another metadata tag may include the attribute priority render 3 indicating that a resource has been assigned the first dimension priority of render and the second dimension priority of 3.

In some cases the various types of the priority indicator s may be assigned based at least partly on whether content items of the page are static or dynamic. For example static elements of the page may be assigned render priority or script priority types of priority indicator s based on expected behaviors of such elements e.g. predetermined dependencies between elements predetermined uncertainties in size of images and so forth . Dynamic elements of the page may be assigned ue priority types of priority indicator s based on past observed user behaviors.

In some implementations where the priority indicator s are incorporated as metadata elements e.g. HTML attributes modifications may be made to enable the browser module to parse and interpret the metadata elements. In cases where the priority indicator s are incorporated as HTML attributes that modify previously supported HTML tags e.g. for images objects scripts and so forth such modifications may enable more recent browsers to interpret the attributes. Older e.g. unmodified browsers may ignore the priority indicator s as unknown HTML attributes and may render the page while disregarding the priority indicator s . Accordingly page s that include the priority indicator s may still be displayable in the older browsers.

Those having ordinary skill in the art will readily recognize that certain steps or operations illustrated in the figures above can be eliminated combined subdivided executed in parallel or taken in an alternate order. Moreover the methods described above may be implemented as one or more software programs for a computer system and are encoded in one or more computer readable storage media as instructions executable on one or more processors.

Separate instances of these programs may be executed on or distributed across separate computer systems. Thus although certain steps have been described as being performed by certain devices software programs processes or entities this need not be the case and a variety of alternative implementations will be understood by those having ordinary skill in the art.

Additionally those having ordinary skill in the art readily recognize that the techniques described above can be utilized in a variety of devices environments and situations. Embodiments of the disclosure can be described in view of the following clauses 

receiving from a user device a request for a web page the web page including one or more first content items and one or more second content items the one or more first content items being initially designated to load prior to the one or more second content items during a presentation of the web page on the user device the one or more first content items including content previously identified as contributing to a completion of at least one transaction through the web page 

based at least partly on data describing at least one previous presentation of the web page determining a delay in presenting at least one of the one or more first content items 

determining whether to promote any of the one or more second content items to be loaded before the one or more first content items wherein the determination of whether to promote any of the one or more second content items is based at least partly on a previous presentation of the web page and on a time for presenting at least one of the second content items being less than or equal to the delay 

in response to determining to promote at least one of the one or more second content items sending to the user device the at least one of the one or more second content items to be loaded for presentation on the user device at least partly during the delay and

sending to the user device the one or more first content items to be loaded for presentation on the user device following the delay.

Clause 2 The method of clause 1 wherein the delay in presenting the at least one of the first content items is at least partly associated with one or more of 

a generation time to dynamically generate at least in part the at least one of the first content items 

Clause 3 The method of any one of clauses 1 and 2 wherein the web page is described at least partly using one or more of Hypertext Markup Language HTML JavaScript Cascading Style Sheets CSS Scalable Vector Graphics SVG or Virtual Reality Modeling Language VRML .

Clause 4 The method of any one of clauses 1 3 wherein the one or more first content items describe one or more of a product or a service that is available for purchase through the web page.

Clause 5 A system comprising at least one computing device configured to implement one or more services wherein the one or more services are configured to 

determine a page of content to be presented on a user device the page including one or more first content items and one or more second content items the one or more first content items being initially designated to load prior to the one or more second content items during a presentation of the page 

determine whether a time for presenting at least one of the one or more second content items is less than or equal to the delay and

in response to determining that the time for presenting at least one of the one or more second content items is less than or equal to the delay provide the at least one of the one or more second content items to be loaded for presentation on the user device at least partly during the delay and provide the one or more first content items to be loaded for presentation on the user device following the delay.

Clause 6 The system of clause 5 wherein the one or more first content items include content previously identified as contributing to a completion of at least one transaction through the page.

Clause 7 The system of any one of clauses 5 and 6 wherein the determining of the delay is based at least partly on data describing at least one previous presentation of the page.

the at least one of the one or more first content items are initially designated to load prior to the one or more second content items based on the at least one of the first content items being included in a head section of the page and

the at least one of the second content items are initially designated to load following the at least one of the first content items based on the at least one of the second content items being included in one or more sections of the page that are subsequent to the head section.

Clause 9 The system of any one of clauses 5 8 wherein the providing of the at least one of the second content items to be loaded for presentation on the user device during the delay further comprises promoting the at least one of the second items to the head section of the page.

Clause 10 The system of any one of clauses 5 9 wherein the at least one of the second content items are initially designated to load in response to an onload event.

Clause 11 The system of any one of clauses 5 10 wherein the delay in presenting the at least one of the first content items is at least partly associated with one or more of 

a generation time to dynamically generate at least in part the at least one of the first content items 

Clause 12 The system of any one of clauses 5 11 wherein the delay is determined based at least in part on determining that the user device is a mobile device.

Clause 13 One or more computer readable media storing instructions which when executed by at least one processor instruct the at least one processor to perform actions comprising 

in response to receiving a request for a page of content determining the page of content to be presented in a user interface the page including a set of first content items and a set of second content items the set of first content items being initially designated to load in the user interface prior to loading the set of second content items during a presentation of the page 

determining a delay in presenting at least one of the set of first content items the delay based at least in part on a latency in receiving the at least one of the set of first content items from a remote server 

determining whether to promote at least one of the set of second content items based at least partly on a time for presenting the at least one of the set of second content items being less than or equal to the delay and

in response to determining to promote at least one of the set of second content items promoting the at least one of the set of second content items such that the at least one of the set of second content items is loaded in the user interface at least partly during the delay.

Clause 14 The one or more computer readable media of clause 13 wherein the set of first content items include content previously identified as contributing to a completion of at least one transaction through the page.

Clause 15 The one or more computer readable media of any one of clauses 13 and 14 wherein the set of first content items include one or more of an image of a product available for purchase through the page a description of the product a price of the product or a review of the product.

the at least one of the set of first content items are initially designated to load prior to the set of second content items based on the at least one of the set of first content items being included in a head section of the page and

the at least one of the set of second content items are initially designated to load following the set of first content items based on the at least one of the set of second content items being included in one or more sections of the page that are subsequent to the head section.

Clause 17 The one or more computer readable media of any one of clauses 13 16 wherein the promoting of the at least one of the set of second content items includes promoting the at least one of the set of second content items to load in the head section of the page.

Clause 18 The one or more computer readable media of any one of clauses 13 17 wherein the at least one of the set of second content items are designated to load in response to an onload event.

Clause 19 The one or more computer readable media of any one of clauses 13 18 wherein the determining of the at least one of the set of second content items to be promoted is further based at least partly on one or more other pages previously navigated to within the user interface.

Clause 20 The one or more computer readable media of any one of clauses 13 19 wherein the at least one of the set of second content items to be promoted includes content designated to be loaded in an absence of input events subsequent to an initial request for the page.

receiving from a user device a request for a web page the web page including one or more first content items and one or more second content items the one or more first content items including content previously identified as contributing to a completion of at least one transaction through the web page 

designating a first stream to communicate the one or more first content items to the user device and a second stream to communicate the one or more second content items to the user device the first stream and the second stream included in a plurality of streams that are multiplexed by a multi stream networking protocol to communicate with the user device 

based at least partly on data describing at least one previous presentation of the web page determining a delay in presenting at least one of the one or more first content items 

determining whether to promote any of the one or more second content items to be loaded before the one or more first content items wherein the determination of whether to promote any of the one or more second content items is based at least partly on a time for presenting at least one of the second content items being less than or equal to the delay 

in response to determining to promote at least one of the one or more second content items writing the at least one of the second content items to the second stream such that the at least one of the second content items is communicated to the user device at least partly during the delay and

writing the one or more first content items to the first stream such that the one or more first content items are communicated to the user device following the delay.

Clause 22 The method of clause 21 wherein the delay in presenting the at least one of the first content items is at least partly associated with one or more of 

a generation time to dynamically generate at least in part the at least one of the first content items 

Clause 23 The method of any one of clauses 21 and 22 wherein the web page is described at least partly using one or more of HyperText Markup Language HTML JavaScript Cascading Style Sheets CSS Scalable Vector Graphics SVG or Virtual Reality Modeling Language VRML .

Clause 24 The method of any one of clauses 21 23 wherein the one or more first content items describe one or more of a product or a service that is available for purchase through the web page.

Clause 25 A system comprising at least one computing device configured to implement one or more services wherein the one or more services are configured to 

determine a page of content to be presented on a user device the page including one or more first content items and one or more second content items 

designate a first stream to communicate the one or more first content items to the user device and a second stream to communicate the one or more second content items to the user device the first stream and the second stream included in a plurality of streams that are multiplexed by a multi stream networking protocol to communicate with the user device 

determine whether a time for presenting at least one of the one or more second content items is less than or equal to the delay and

in response to determining that the time for presenting at least one of the one or more second content items is less than or equal to the delay write the at least one of the second content items to the second stream such that the at least one of the second content items is communicated to the user device at least partly during the delay and write the one or more first content items to the first stream such that the one or more first content items are communicated to the user device following the delay.

Clause 26 The system of clause 25 wherein the one or more first content items include content previously identified as contributing to a completion of at least one transaction through the page.

Clause 27 The system of any one of clauses 25 and 26 wherein the estimating of the delay is based at least partly on data describing at least one previous presentation of the page.

the at least one of the first content items are initially designated to load prior to the one or more second content items based on the at least one of the first content items being included in a head section of the page and

the at least one of the second content items are initially designated to load following the one or more first content items based on the at least one of the second content items being included in one or more sections of the page that are subsequent to the head section.

Clause 29 The system of any one of clauses 25 28 wherein the multi stream networking protocol multiplexes the plurality of streams within a single network connection to the user device.

Clause 30 The system of any one of clauses 25 29 wherein the multi stream networking protocol employs a time based multiplexing of data frames from the plurality of streams across the single network connection.

Clause 31 The system of any one of clauses 25 30 wherein the delay in presenting the at least one of the first content items is at least partly associated with one or more of 

a generation time to dynamically generate at least in part the at least one of the first content items 

Clause 32 The system of any one of clauses 25 31 wherein the delay is determined based at least in part on determining that the user device is a mobile device.

Clause 33 One or more computer readable media storing instructions which when executed by at least one processor instruct the at least one processor to perform actions comprising 

in response to receiving a request for a page of content determining the page of content to be presented on a user device the page including one or more first content items and one or more second content items 

designating a first stream to communicate the one or more first content items to the user device and a second stream to communicate the one or more second content items to the user device the first stream and the second stream included in a plurality of streams of a multi stream networking protocol wherein the multi stream networking protocol employs a time based multiplexing of data frames from the plurality of streams to communicate with the user device across a single network connection 

determining at least one of the one or more second content items based at least partly on a time to present the at least one of the second content items being not greater than the delay and

writing the at least one of the second content items to the second stream such that the at least one of the second content items is communicated to the user device at least partly during the delay.

Clause 34 The one or more computer readable media of clause 33 wherein the one or more first content items include content previously identified as contributing to a completion of at least one transaction through the page.

Clause 35 The one or more computer readable media of any one of clauses 33 and 34 wherein the one or more first content items include one or more of an image of a product available for purchase through the page a description of the product a price of the product or a review of the product.

the at least one of the first content items are initially designated to load prior to the one or more second content items based on the at least one of the first content items being included in a head section of the page and

the at least one of the second content items are initially designated to load following the one or more first content items based on the at least one of the second content items being included in one or more sections of the page that are subsequent to the head section.

Clause 37 The one or more computer readable media of any one of clauses 33 36 the actions further comprising 

detecting an event generated by at least one process that dynamically generates the one or more first content items the event indicating that the first content items are available and

based at least partly on the detecting of the event writing the one or more first content items to the first stream such that the one or more first content items are communicated to the user device following the delay.

Clause 38 The one or more computer readable media of any one of clauses 33 37 the actions further comprising 

detecting a state transition of at least one process that dynamically generates the one or more first content items the state transition indicating that the one or more first content items are available and

based at least partly on the detecting of the state transition writing the one or more first content items to the first stream such that the one or more first content items are communicated to the user device following the delay.

Clause 39 The one or more computer readable media of any one of clauses 33 38 wherein the determining of the at least one of the second content items to be promoted is further based at least partly on one or more other pages previously navigated to within the user interface.

Clause 40 The one or more computer readable media of any one of clauses 33 39 wherein the at least one of the second content items to be promoted includes content designated to be loaded in an absence of input events subsequent to an initial request for the page.

receiving from a user device a request for a web page the web page including one or more first content items and one or more second content items the one or more first content items being initially designated to load prior to the one or more second content items during a presentation of the web page the one or more first content items being designated to be sent to the user device in one or more first packets the one or more second content items being designated to be sent to the user device in one or more second packets that are initially designated to be sent after the sending of the one or more first packets and the one or more first content items including content previously identified as contributing to a completion of at least one transaction through the web page 

based at least partly on data describing at least one previous presentation of the web page determining a delay in presenting at least one of the one or more first content items 

determining at least one of the one or more second content items based at least partly on a time for presenting the at least one of the second content items being not greater than the delay 

sending to the user device at least one of the one or more second packets including the at least one of the second content items prior to sending at least one of the one or more first packets that includes the at least one of the one or more first content items and

sending to the user device the at least one of the one or more first packets including the at least one of the one or more first content items.

Clause 42 The method of clause 41 wherein the delay in presenting the at least one of the first content items is at least partly associated with one or more of 

a generation time to dynamically generate at least in part the at least one of the first content items 

Clause 43 The method of any one of clauses 41 and 42 wherein the web page is described at least partly using one or more of Hypertext Markup Language HTML JavaScript Cascading Style Sheets CSS Scalable Vector Graphics SVG or Virtual Reality Modeling Language VRML .

Clause 44 The method of any one of clauses 41 43 wherein the one or more first packets and the one or more second packets include transport layer packets.

at least one computing device configured to implement one or more services wherein the one or more services are configured to 

determine a page of content to be presented on a user device the page including one or more first content items and one or more second content items the one or more first content items being designated to be sent to the user device in one or more first packets and the one or more second content items being designated to be sent to the user device in one or more second packets that are initially designated to be sent after the sending of the one or more first packets 

determine at least one of the one or more second content items based at least partly on a time for presenting the at least one of the second content items being not greater than the delay 

send to the user device at least one of the one or more second packets including the at least one of the second content items prior to sending at least one of the one or more first packets that includes the at least one of the one or more first content items and

send to the user device the at least one of the one or more first packets including the at least one of the one or more first content items.

Clause 46 The system of clause 45 wherein the one or more first content items include content previously identified as contributing to a completion of at least one transaction through the page.

Clause 47 The system of any one of clauses 45 and 46 wherein the determining of the delay is based at least partly on data describing at least one previous presentation of the page.

the one or more first packets and the one or more second packets include first layer packets at a first layer of a multi layer communications model and

the sending of the at least one of the one or more second packets further comprises incorporating the at least one of the one or more second packets into one or more second layer packets that are sent prior to the sending of the at least one of the one or more first packets the one or more second layer packets being at a lower layer of the multi layer communications model than the first layer packets.

Clause 49 The system of any one of clauses 45 48 wherein the first layer packets include transport layer packets and the one or more second layer packets include network layer packets.

the first layer packets include one or more of Transmission Control Protocol TCP packets or Stream Control Transmission Protocol SCTP packets and

Clause 51 The system of any one of clauses 45 50 wherein the delay in presenting the at least one of the first content items is at least partly associated with one or more of 

a generation time to dynamically generate at least in part the at least one of the first content items 

Clause 52 The system of any one of clauses 45 51 wherein the delay is determined based at least in part on determining that the user device is a mobile device.

Clause 53 One or more computer readable media storing instructions which when executed by at least one processor instruct the at least one processor to perform actions comprising 

determining a page of content to be presented on a user device the page including one or more first content items and one or more second content items the one or more first content items being designated to be sent to the user device in one or more first packets in a packet stream and the one or more second content items being designated to be sent to the user device in one or more second packets that are initially designated to be sent after the sending of the one or more first packets in the packet stream 

determining at least one of the one or more second content items to be promoted based at least partly on a time for presenting the at least one of the second content items being not greater than the delay and

promoting the at least one of the one or more second content items including sending in the packet stream to the user device at least one of the one or more second packets prior to sending at least one of the one or more first packets that includes the at least one of the one or more first content items.

allocating a portion of the packet stream to carry the at least one of the first packets after the at least one of the one or more second packets and

sending in the allocated portion of the packet stream the at least one of the one or more first packets including the at least one of the one or more first content items.

Clause 55 The one or more computer readable media of any one of clauses 53 and 54 wherein the at least one of the one or more first content items is generated based at least partly on a size of the allocated portion of the packet stream.

the one or more first packets and the one or more second packets include first layer packets at a first layer of a multi layer communications model and

the sending of the at least one of the one or more second packets further comprises incorporating the at least one of the one or more second packets into one or more second layer packets that are sent prior to the sending of the at least one of the one or more first packets the one or more second layer packets being at a lower layer of the multi layer communications model than the first layer packets.

Clause 57 The one or more computer readable media of any one of clauses 53 56 wherein the first layer packets include transport layer packets and the one or more second layer packets include network layer packets.

the first layer packets include one or more of Transmission Control Protocol TCP packets or Stream Control Transmission Protocol SCTP packets and

Clause 59 The one or more computer readable media of any one of clauses 53 58 the actions further comprising determining a congestion window such that the at least one of the one or more second packets are buffered on the user device prior to receipt of the at least one of the one or more first packets.

Clause 60 The one or more computer readable media of any one of clauses 53 59 wherein the at least one of the second content items to be promoted includes content designated to be loaded in an absence of input events subsequent to an initial request for the page.

receiving from a user device a request for a web page the web page including one or more first content items and one or more second content items the one or more first content items being initially designated to load prior to the one or more second content items during a presentation of the web page the one or more first content items being designated to be sent to the user device in one or more first frames the one or more second content items being designated to be sent to the user device in one or more second frames that are initially designated to be sent after the sending of the one or more first frames and the one or more first content items including content previously identified as contributing to a completion of at least one transaction through the web page 

based at least partly on data describing at least one previous presentation of the web page determining a delay in presenting at least one of the one or more first content items 

determining at least one of the one or more second content items based at least partly on a time for presenting the at least one of the second content items being not greater than the delay 

sending to the user device at least one of the one or more second frames including the at least one of the second content items prior to sending at least one of the one or more first frames that includes the at least one of the one or more first content items and

sending to the user device the at least one of the one or more first frames including the at least one of the one or more first content items.

Clause 62 The method of clause 61 wherein the delay in presenting the at least one of the first content items is at least partly associated with one or more of 

a generation time to dynamically generate at least in part the at least one of the first content items 

Clause 63 The method of any one of clauses 61 and 62 wherein the web page is described at least partly using one or more of Hypertext Markup Language HTML JavaScript Cascading Style Sheets CSS Scalable Vector Graphics SVG or Virtual Reality Modeling Language VRML .

Clause 64 The method of any one of clauses 61 63 wherein the one or more first frames and the one or more second frames include application layer frames.

at least one computing device configured to implement one or more services wherein the one or more services are configured to 

determine a page of content to be presented on a user device the page including one or more first content items and one or more second content items the one or more first content items being designated to be sent to the user device in one or more first frames and the one or more second content items being designated to be sent to the user device in one or more second frames that are initially designated to be sent after the sending of the one or more first frames 

determine at least one of the one or more second content items based at least partly on a time for presenting the at least one of the second content items being not greater than the delay 

send to the user device at least one of the one or more second frames including the at least one of the second content items prior to sending at least one of the one or more first frames that includes the at least one of the one or more first content items and

send to the user device the at least one of the one or more first frames including the at least one of the one or more first content items.

Clause 66 The system of clause 65 wherein the one or more first content items include content previously identified as contributing to a completion of at least one transaction through the page.

Clause 67 The system of any one of clauses 65 and 66 wherein the determining of the delay is based at least partly on data describing at least one previous presentation of the page.

Clause 68 The system of any one of clauses 65 67 wherein the one or more first frames and the one or more second frames include frames at a layer of a multi layer communications model the layer being higher than a transport layer of the multi layer communications model.

Clause 69 The system of any one of clauses 65 68 wherein the one or more first frames and the one or more second frames include application layer frames.

Clause 70 The system of any one of clauses 65 69 wherein the application layer frames include data describing at least one Hypertext Transport Protocol HTTP communication.

Clause 71 The system of any one of clauses 65 70 wherein the delay in presenting the at least one of the first content items is at least partly associated with one or more of 

a generation time to dynamically generate at least in part the at least one of the first content items 

Clause 72 The system of any one of clauses 65 71 wherein the delay is determined based at least in part on determining that the user device is a mobile device.

Clause 73 One or more computer readable media storing instructions which when executed by at least one processor instruct the at least one processor to perform actions comprising 

determining a page of content to be presented on a user device the page including one or more first content items and one or more second content items the one or more first content items being designated to be sent to the user device in one or more first frames in a frame sequence and the one or more second content items being designated to be sent to the user device in one or more second frames that are initially designated to be sent after the sending of the one or more first frames in the frame sequence 

determining at least one of the one or more second content items to be promoted based at least partly on a time for presenting the at least one of the second content items being not greater than the delay and

promoting the at least one of the one or more second content items including sending in the frame sequence to the user device at least one of the one or more second frames prior to sending at least one of the one or more first frames that includes the at least one of the one or more first content items.

Clause 74 The one or more computer readable media of clause 73 wherein the one or more first content items include content previously identified as contributing to a completion of at least one transaction through the page.

Clause 75 The one or more computer readable media of any one of clauses 73 and 74 wherein the first content items include one or more of an image of a product available for purchase through the page a description of the product a price of the product or a review of the product.

Clause 76 The one or more computer readable media of any one of clauses 73 75 wherein the one or more first frames and the one or more second frames include frames at a layer of a multi layer communications model the layer being higher than a transport layer of the multi layer communications model.

Clause 77 The one or more computer readable media of any one of clauses 73 76 wherein the one or more first frames and the one or more second frames include application layer frames.

Clause 78 The one or more computer readable media of any one of clauses 73 77 the actions further comprising 

allocating a portion of the frame sequence to carry the at least one of the first frames after the at least one of the one or more second frames and

sending in the allocated portion of the frame sequence the at least one of the one or more first frames including the at least one of the one or more first content items.

Clause 79 The one or more computer readable media of any one of clauses 73 78 wherein a compression of the at least one of the one or more first content items is altered based at least partly on a size of the allocated portion of the frame sequence.

Clause 80 The one or more computer readable media of any one of clauses 73 79 wherein the at least one of the second content items to be promoted includes content designated to be loaded in an absence of input events subsequent to an initial request for the page.

receiving from a user device a request for a web page the web page including metadata tags that reference content items to be requested for presentation of the web page 

determining a suggested order for requesting the content items during the presentation of the web page the suggested order being different than a listed order of the metadata tags in the web page 

incorporating into the web page priority indicators indicating the suggested order for requesting the content items the priority indicators including one or more metadata attributes that are included in the metadata tags that reference the content items and sending to the user device the web page including the priority indicators.

Clause 82 The method of clause 81 wherein the determining of the suggested order for requesting the content items further comprises 

determining at least one second content item of the content items based at least partly on a time for presenting the at least one second content item being not greater than the delay and

determining the suggested order such that the at least one second content item is requested prior to the at least one first content item.

Clause 83 The method of any one of clauses 81 and 82 wherein the delay in presenting the at least one first content item is at least partly associated with one or more of 

Clause 84 The method of any one of clauses 81 83 wherein the web page is described at least partly using one or more of Hypertext Markup Language HTML JavaScript Cascading Style Sheets CSS Scalable Vector Graphics SVG or Virtual Reality Modeling Language VRML .

at least one computing device configured to implement one or more services wherein the one or more services are configured to 

determine a page of content to be presented on a user device the page including references to content items to be requested for presentation of the page 

determine a suggested order for requesting the content items during the presentation of the page the suggested order being different than a listed order of the references to the content items in the page 

incorporate into the page priority indicators indicating the suggested order for requesting the content items and

the references to the content items in the page include metadata tags that reference the content items and

the priority indicators include one or more metadata attributes that are included in the metadata tags.

Clause 87 The system of any one of clauses 85 and 86 wherein the metadata tags include Hypertext Markup Language HTML tags.

Clause 88 The system of any one of clauses 85 87 wherein the determining of the suggested order for requesting the content items further comprises 

determining at least one second content item of the content items based at least partly on a time for presenting the at least one second content item being not greater than the delay and

determining the suggested order such that the at least one second content item is requested prior to the at least one first content item.

Clause 89 The system of any one of clauses 85 88 wherein the determining of the at least one second content item is further based at least partly on a determination that loading one or more other content items of the page depends on prior loading of the at least one second content item.

Clause 90 The system of any one of clauses 85 89 wherein the determining of the at least one second content item is based at least partly on a determination that the at least one second content item includes content previously identified as contributing to a completion of at least one transaction through the page.

Clause 91 The system of any one of clauses 85 90 wherein the determining of the delay is based at least partly on data describing at least one previous presentation of the page.

Clause 92 The system of any one of clauses 85 91 wherein the delay is determined based at least in part on determining that the user device is a mobile device.

Clause 93 The system of any one of clauses 85 92 wherein the delay in presenting the at least one first content item is at least partly associated with one or more of 

Clause 94 One or more computer readable media storing instructions which when executed by at least one processor instruct the at least one processor to perform actions comprising 

receiving a page of content to be presented on a user device the page including references to content items to be requested for presentation of the page the references to the content items including at least one priority indicator indicating a suggested order for requesting the content items that is different than a listed order of the references in the page 

determining an order in which to request the content items based at least partly on the suggested order indicated by the at least one priority indicator and

the references to the content items including at least one metadata tag associated with at least one of the content items and

the at least one priority indicator including at least one metadata attribute included in the at least one metadata tag.

Clause 96 The one or more computer readable media of any one of clauses 94 and 95 wherein the at least one metadata tag includes at least one Hypertext Markup Language HTML tag.

Clause 97 The one or more computer readable media of any one of clauses 94 96 wherein the determining of the order in which to request the content items is further based at least partly on determining that one or more of the content items are cached in memory on the user device.

Clause 98 The one or more computer readable media of any one of clauses 94 97 wherein the determining of the order in which to request the content items is further based at least partly on current network conditions of one or more networks that enable communication between the user device and one or more other devices.

the at least one priority indicator indicates at least one priority level within a priority hierarchy that includes multiple priority levels and

the determining of the order in which to request the content items is further based at least partly on the at least one priority level indicated by the at least one priority indicator.

Clause 100 The one or more computer readable media of any one of clauses 94 99 wherein the multiple priority levels include priority levels corresponding to one or more of a user experience characteristic of the content items a page layout characteristic of the content items or a code dependency characteristic of the content items.

Although the present disclosure is written with respect to specific embodiments and implementations various changes and modifications may be suggested to one skilled in the art and it is intended that the present disclosure encompass such changes and modifications that fall within the scope of the appended claims.

