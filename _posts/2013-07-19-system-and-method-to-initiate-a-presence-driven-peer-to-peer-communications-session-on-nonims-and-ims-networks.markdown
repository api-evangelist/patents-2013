---

title: System and method to initiate a presence driven peer to peer communications session on non-IMS and IMS networks
abstract: An architecture and method is provided for call routing using both IMS and non-IMS frameworks. The method includes receiving presence information of a third party from a non-IP Multimedia Subsystem (IMS) network device. The method further includes routing the third party to at least one callee designated device based on configurable preferences provided by the callee and correlated to presence information using an IMS compliant component. The method additionally includes providing a charging record for the routing on an IMS complaint charging platform.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09124469&OS=09124469&RS=09124469
owner: International Business Machines Corporation
number: 09124469
owner_city: Armonk
owner_country: US
publication_date: 20130719
---
The invention generally relates to a method and system of call routing and in particular to an architecture and method of call routing using both IMS and non IMS frameworks.

Faced with an increasingly difficult challenge in growing both average revenue per user ARPU and numbers of subscribers network carriers are trying to develop a host of new products services and business models based on data services. One such service is call routing. While many advances have been made in the Value Added Services VAS domain in general not much has been accomplished in the callee centric control area.

Callee centric services include presence based interactive communication services. In such services the callee can publish in real time their presence information to callers presence watchers subscribing to the service. For example a message can be generated and transmitted to the caller based on the callee s presence information but this is limited in scope. Illustratively existing presence systems provide only limited callee presence information to the caller in a response message. Furthermore the callee is not able to control the content of missed call response messages according to different authorities or priorities granted to the caller by the callee. That is current presence systems do not allow a callee to provide different presence information to different callers.

Within the telecommunications domain presence holds promise for a class of new applications and value added services to drive data ARPU as opposed to voice based ARPU . By definition presence refers to a user s current status on a telecommunications network and also optionally indicates the availability of a specific channel of communication. For example 

A consolidated view of a person s presence called a presentity is depicted by a presence XML document that the presence server stores. Most people commonly associate presence with instant messaging. In terms of instant messaging people have different levels of messages determining their availability. Many times an instant message client may have people listed as available away do not disturb or off line. However instant messaging uses a limited context of presence in general. Under these circumstances presence does not indicate a communication preference it only describes the availability of the individual.

Accordingly there exists a need in the art to overcome the deficiencies and limitations described hereinabove.

In a first aspect of the invention a method comprises receiving presence information of a third party from a non IP Multimedia Subsystem IMS network device. The method further comprises routing the third party to at least one callee designated device based on configurable preferences provided by the callee and correlated to presence information using an IMS compliant component. The method additionally comprises providing a charging record for the routing on an IMS complaint charging platform.

In another aspect of the invention a computer program product comprises a computer usable storage medium having readable program code tangibly embodied in the storage medium. The computer program product is operable to receive presence information from both IMS and non IMS network devices route presence information from the non IMS network devices to IMS compliant presence components route call information received from either of the IMS or non IMS network devices to a callee based on configurable preferences provided by the callee and correlated to the presence information and generate a charge record for the routing on an IMS complaint charging platform.

In another aspect of the invention a system for call routing applications comprises a computer infrastructure. The computer infrastructure is operable to route presence information from both non IMS network devices and IMS network devices to IMS compliant presence components route call information received from the non IMS network devices and IMS network devices to a callee based on configurable preferences provided by the callee and correlated to the presence information on the IMS compliant presence components and send charging information for the routing to an IMS complaint charging platform associated with the IMS compliant presence components.

In another aspect of the invention a system comprises an IMS presence server configured to receive presence information from IMS compliant network devices. The system further comprises a non IMS component configured to receive presence information from non IMS compliant network devices and communicating the presence information from the non IMS compliant network devices to the IMS presence server. The system further comprises an IMS compliant charging platform communicating with the IMS presence server and providing charging records for the presence information received from the IMS presence server for both the IMS compliant network devices and the non IMS compliant network devices.

The invention generally relates to a method and system of call routing and in particular to an architecture and method of call routing using both IP Multimedia Subsystem IMS and non IMS frameworks. More specifically the present invention provides a subscriber configurable context based system and method to initiate a presence driven peer to peer communications session on IMS and non IMS based telecommunications networks. As such the present invention is network agnostic and supports IMS and non IMS network elements including the integration of a single IMS compliant charging platform for both IMS and non IMS networks. Those of skill in the art should understand that IMS is an architectural framework for delivering Internet protocol multimedia to mobile users. To ease the integration with the Internet IMS as far as possible uses IETF i.e. Internet protocols such as Session Initiation Protocol SIP .

The present invention does not leverage the SMSC or MMSC infrastructure to enable participation in an IMS network. Instead the present invention provides a notification model that can drive communications sessions based on status changes while also factoring in location in IMS and non IMS networks. The presence based foundational service model of the present invention can also be used to drive other types of services in both IMS and non IMS contexts. The present invention is also subscriber driven allowing subscribers to use location and presence to determine appropriate means of communicating with one another.

Advantageously the invention thus allows a callee subscribing user to configure routing rules in a customizable manner that will ensure the callee is always reachable via a desired communication channel e.g. regardless that the callee and caller whose presence has been detected are on different IMS or non IMS network elements. The present invention achieves these advantages by using a flexible messaging gateway based framework to deliver presence information over multiple channels including Extensible Messaging and Presence Protocol XMPP .

In implementation the present invention solves many practical issues that otherwise have curtailed the realization of rich presence based services to end subscribers. These issues include for example 

Also while the IMS reference architecture and related specifications provides for the definition of a presence server and defines RPID and PIDF formats for a presence XML document such specification is very focused on being in a communications environment where the default signaling is all based on SIP. In reality of course SIP is rarely used outside the telecommunications network. Additionally while the parlay X specification provides for terminal status information it too has specific limitations namely that the actual definition is very constrained and the specification does not cater to non SOAP based end points which is also very constraining. The present invention though provides a means to overcome these constraints as discussed in more detail below.

As will be appreciated by one skilled in the art the present invention may be embodied as a system method or computer program product. Accordingly the present invention may take the form of an entirely hardware embodiment an entirely software embodiment including firmware resident software micro code etc. or an embodiment combining software and hardware aspects that may all generally be referred to herein as a circuit module or system. Furthermore the present invention may take the form of a computer program product embodied in any tangible medium of expression having computer usable program code embodied in the medium.

Any combination of one or more computer usable or computer readable medium s may be utilized. The computer usable or computer readable medium may be for example but not limited to an electronic magnetic optical electromagnetic infrared or semiconductor system apparatus device or propagation medium. More specific examples a non exhaustive list of the computer readable medium would include the following 

In the context of this document a computer usable or computer readable medium may be any medium that can contain store communicate propagate or transport the program for use by or in connection with the instruction execution system apparatus or device. The computer usable program code may be transmitted using any appropriate transmission media via a network.

Computer program code for carrying out operations of the present invention may be written in any combination of one or more programming languages including an object oriented programming language such as Java Smalltalk C or the like and conventional procedural programming languages such as the C programming language or similar programming languages. The program code may execute entirely on the user s computer partly on the user s computer as a stand alone software package partly on the user s computer and partly on a remote computer or entirely on the remote computer or server. In the latter scenario the remote computer may be connected to the user s computer through any type of network. This may include for example a local area network LAN or a wide area network WAN or the connection may be made to an external computer for example through the Internet using an Internet Service Provider .

The illustrative environment also includes a presence server and a framework adapter both of which can be a module or program control configured to make the computing device operable to perform the services described herein. The framework adapter is preferably a non IMS framework adapter configured to communicate with non IMS components such as an XMPP gateway radius server and home location register all shown generally as component . The presence server and framework adapter can be one or more computing modules on the same or different computing infrastructure and can be implemented by a service provider such as for example a network carrier. By using this system and methodology the network carrier will not have to make any significant infrastructure investments as the preexisting infrastructure is utilized with the present invention.

In implementation the combination of the presence server and framework adapter provides an efficient way to provide the advantages of the present invention. For example the presence server and framework adapter provides the ability to factor IMS based and non IMS based presence given the preponderance of non IMS networks. The framework adapter can also communicate with a charging platform via the presence server . In this way the non IMS networks can correlate notifications to a charge record for integration into an existing charging platform such as one based on diameter using the functionality of the presence server . The charging platform is discussed in more detail below.

More specifically by using the presence server and framework adapter in combination with the other features of the computing infrastructure the illustrative environment is configured to allow a callee subscriber user to select a particular delivery channel to be notified when an individual s presence is detected independent of the channel that is being used by the detected individual or the subscriber triggering the notification. This being the case the present invention is network agnostic which focuses on a notification model that can drive communications sessions based on status changes while also factoring in location in IMS and non IMS networks. This allows the illustrative environment to be a presence based foundational service model that could be used to drive other types of services in both IMS and non IMS contexts.

The illustrative environment is also configured to allow network based triggers to sense status changes as opposed to the user setting these triggers. This is accomplished using for example the functionality of the presence server . For example the illustrative environment is configured to allow a subscriber to specify a notification channel to be notified when a specific subscriber or set of subscribers changes network status and therefore the inferred availability on a particular communications channel. In other words the illustrative environment provides the ability for the subscriber to select a particular delivery channel to be notified independent of the channel that is being changed by the subscriber triggering the notification.

As a non limiting illustrative example in operation the callee can set up different rules preferences to accept different types of communications from different individuals. These rules can be stored in the storage system B. The rules provide the advantage of true presence capable of correlating a subscribing individual s availability with what methods a person may use to contact the subscribing individual. Under these auspices the subscribing individual e.g. callee can set a preference to only be contacted via SMS short message service or e mail for example even though the person whose presence has been detected is on a SIP based device and presence is detected by the framework .

By way of a more specific non limiting illustrative example subscriber X can log into the system and register a preference to be notified by any type of message such as for example an SMS message when individual Y logs onto an instant messaging system IM . The preferences can be stored in the storage system B which communicates with the presence server and the framework via a bus or other communications link.

This same procedure can be used for any number of devices and for any number of individuals. By way of another example subscriber X can log into the system and register to be notified by an IM message when a friend Z turns on a cellular telephone or SIP compliant device. When subscriber X logs into the IM platform the system e.g. framework of detects such an occurrence and sends an IM from a notification bot robot via a XMPP SIP gateway infrastructure. With these examples those of skill in the art should understand that the illustrative environment supports changes to a callee preference. The preferences can be stored directly in the presence server or the storage system B e.g. database as well as in a HLR or HSS shown in .

In embodiments the communications channels supported by the present invention include for example and in no particular order i Voice Sessions SS7 ii Generic Cellular data sessions Radius authenticated packet networks iii Generic IMS based sessions via SIP signaling channels and or iv Instant Messaging Sessions XMPP enabled via a gateway . The channels supported by the present invention to notify the subscriber include for example and in no particular order i Generic SIP based notifications ii SMS via the SMSC infrastructure iii MMS via an existing MMSC based infrastructure iv WAP via a WAP gateway or set of gateways v IM Via an XMPP based IM gateway vi SOAP or REST based Web Service invocation which needs to be provisioned with an end point and or vii Distinct Ring.

In yet another embodiment the system and method provides a charging platform to provide charging models for services rendered. The charging platform may be maintained deployed created and or serviced by the service provider. The charging platform is designed to generate a charging record for services rendered to a subscriber e.g. the callee will be charged for the services rendered based on the charging model implemented by the system and method of the invention. In embodiments the service provider can calculate an amount to be charged based on many different considerations and generate the charging record to be sent to the charging platform . In turn the charging platform can generate an invoice and or deduct a usage charge from an account of the subscriber callee . The charging platform also supports flexible charging models supported via an IMS compliant Customer Care Framework CCF and now can even be implemented using non IMS based networks using the combination of the presence server and framework adapter .

The computing device also includes a processor memory A an I O interface and the bus . The memory A can include local memory employed during actual execution of program code bulk storage and cache memories which provide temporary storage of at least some program code in order to reduce the number of times code must be retrieved from bulk storage during execution. In addition the computing device includes random access memory RAM a read only memory ROM and a CPU. The computing device also includes an I O device . The I O device can be for example any device that enables an individual to interact with the computing device or any device that enables the computing device to communicate with one or more other computing devices using any type of communications link. The external I O device resource may be for example a display of a computing device such as a personal digital assistant PDA .

In general the processor executes computer program code which is stored in the memory A and or storage system B. While executing the computer program code the processor can read and or write data to from memory A storage system B and or I O interface . The program code executes the processes of the invention. The bus provides a communications link between each of the components in the computing device .

The computing device can comprise any general purpose computing article of manufacture capable of executing computer program code installed thereon e.g. a personal computer server etc. . However it is understood that the computing device is only representative of various possible equivalent computing devices that may perform the processes described herein. To this extent in embodiments the functionality provided by the computing device can be implemented by a computing article of manufacture that includes any combination of general and or specific purpose hardware and or computer program code. In each embodiment the program code and hardware can be created using standard programming and engineering techniques respectively.

Similarly the server is only illustrative of various types of computer infrastructures for implementing the invention. For example in embodiments the server comprises two or more computing devices e.g. a server cluster that communicate over any type of communications link such as a network a shared memory or the like to perform the process described herein. Further while performing the processes described herein one or more computing devices on the server can communicate with one or more other computing devices external to the server using any type of communications link. The communications link can comprise any combination of wired and or wireless links any combination of one or more types of networks e.g. the Internet a wide area network a local area network a virtual private network etc. and or utilize any combination of transmission techniques and protocols.

In embodiments the invention provides a business method that performs the steps of the invention on a subscription advertising and or fee basis. That is a service provider such as a Solution Integrator could offer to perform the processes described herein. In this case the service provider can create maintain deploy support etc. the computer infrastructure that performs the process steps of the invention for one or more customers. The customer may be for example the subscribing user callee . In return the service provider can receive payment from the customer s under a subscription and or fee agreement and or the service provider can receive payment.

The different network elements communicate with the access tier and more specifically a transport network such as for example the Internet or a wireless network. In turn the transport network communicates with a messaging gateway framework in the services tier . The messaging gateway framework includes for example an XMPPP Gateway Short Message Service Center SMSC Multimedia Messaging Service MMSC Wireless Application Protocol WAP Gateway Web Services Gateway and a Session Initiation Protocol SIP Gateway.

In the services tier the transport network and preference manager communicate with the presence server via the appropriate communication protocols. Also the presence server communicates with the non IMS adapter framework . The non IMS adapter framework allows the detection of presence information for non IMS compliant devices which can then be handed off to the presence server for further processing such as for example providing notification to the client tier via the preference manager . More specifically the presence server can provide the presence information of a third party via the non IMS adapter framework for non IMS compliant devices such as SIP devices to the preference manager which in turn will look up the stored rules preferences and provide a notification to the subscribing user via a requested channel. In an alternative embodiment the rules can be stored in the HSS or HLR of the client tier .

In embodiments the non IMS adapter framework and the presence server communicate with components in the control tier . For example the non IMS adapter framework communicates with non IMS components e.g. XMPP gateway the radius server and the HLR. The HLR is a central database that contains details of each mobile subscriber that is authorized to use a GSM core network. The HLR stores details of every SIM card issued by the network carrier. The HLR directly receives and processes MAP transactions and messages from elements in the GSM network for example the location update messages received as mobile devices roam.

The presence server on the other hand communicates with the HSS Home Subscriber Server and the charging platform . The HSS or User Profile Server Function UPSF is a master user database that supports the IMS network entities that actually handle calls. In embodiments the HSS contains the subscription related information user profiles performs authentication and authorization of the user and can provide information about the user s physical location. It is similar to the HLR but for IMS networks. In embodiments the HSS can store the subscriber preferences. The HSS can be represented as the storage system B of

As the presence server communicates with both the non IMS adapter framework and the HSS it is possible to obtain presence information regardless of whether presence information is obtained by the presence server or the non IMS adapter framework . Also as the presence server communicates with both the non IMS adapter framework and the charging platform it is possible to generate an invoice and or deduct a usage charge from an account of the subscriber callee using a single IMS compliant charging platform regardless of whether the detected third party is on an IMS or non IMS network.

Additionally the invention can take the form of an entirely hardware embodiment an entirely software embodiment or an embodiment containing both hardware and software elements. Software includes but is not limited to firmware resident software microcode etc. Furthermore the invention can take the form of a computer program product accessible from a computer usable or computer readable medium providing program code for use by or in connection with a computer or any instruction execution system. The software and or computer program product can be implemented in the environment of . For the purposes of this description a computer usable or computer readable medium can be any apparatus that can contain store communicate propagate or transport the program for use by or in connection with the instruction execution system apparatus or device. The medium can be an electronic magnetic optical electromagnetic infrared or semiconductor system or apparatus or device or a propagation medium. Examples of a computer readable medium include a semiconductor or solid state memory magnetic tape a removable computer diskette a random access memory RAM a read only memory ROM a rigid magnetic disk and an optical disk. Current examples of optical disks include compact disk read only memory CD ROM compact disk read write CD R W and DVD.

At step S the subscribing user logs into the preference manager and asks to be notified with an SMS or other type of message message when a predefined entity logs into the data network. This results in a Sh notification being sent to the Diameter based HSS at step S which then notifies the SIP Application Server at step S. At step S the SIP application sends a SIP subscribe request to the non IMS adapter framework e.g. SIP A S Presence XDMS . The non IMS adapter framework is the tie point to the Radius Server on the network which controls data session access in the non IMS network. At step S the non IMS framework sends back a OK to the SIP application.

More specifically at step S the Radius infrastructure sends an ACCT start to the non IMS adapter framework. At step S the non IMS adapter framework forwards the START to the charging platform. Asynchronously the non IMS adapter framework intercepts the Start Record and generates a SIP notify for that user to the SIP A S at step S. At step S the SIP A S returns a OK.

At step S the SIP A S looks up its preferences based on the earlier HSS notification and determines that the messaging Gateway SMSC needs to be requested to send a message to the subscriber. At step S the SMSC is contacted via the SMPP protocol by the SIP A S. At step S the SIP A S provides an acknowledgement. At step S the SMSC delivers the OTA Over the Air SMS to the requesting subscriber s handset. At step S the SIP A S sends an Rf transaction using the Rf Diameter sub protocol. That is at step S the charging platform receives a rfTDR message that the notification process has been completed in order to generate an invoice . The user receives the SMS message or other type of message and acts accordingly.

The terminology used herein is for the purpose of describing particular embodiments only and is not intended to be limiting of the invention. As used herein the singular forms a an and the are intended to include the plural forms as well unless the context clearly indicates otherwise. It will be further understood that the terms comprises and or comprising when used in this specification specify the presence of stated features integers steps operations elements and or components but do not preclude the presence or addition of one or more other features integers steps operations elements components and or groups thereof.

The corresponding structures materials acts and equivalents of all means or step plus function elements in the claims if any are intended to include any structure material or act for performing the function in combination with other claimed elements as specifically claimed. The description of the present invention has been presented for purposes of illustration and description but is not intended to be exhaustive or limited to the invention in the form disclosed. Many modifications and variations will be apparent to those of ordinary skill in the art without departing from the scope and spirit of the invention. The embodiment was chosen and described in order to best explain the principles of the invention and the practical application and to enable others of ordinary skill in the art to understand the invention for various embodiments with various modifications as are suited to the particular use contemplated. While the invention has been described in terms of embodiments those skilled in the art will recognize that the invention can be practiced with modifications and in the spirit and scope of the appended claims.

