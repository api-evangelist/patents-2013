---

title: System and method for transmitting and utilizing attachments
abstract: A method of handling cryptographic information in a communication comprising body elements and attachment elements to a mobile device includes the steps of determining if the communication includes an attachment element comprising cryptographic information and converting the attachment element into a body element upon determining that the communication includes an attachment element comprising cryptographic information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09215238&OS=09215238&RS=09215238
owner: BlackBerry Limited
number: 09215238
owner_city: Waterloo, Ontario
owner_country: CA
publication_date: 20131114
---
The application generally describes a system and method for handling data in an electronic communication and in particular the transmission and automatic utilization of a message attachment in an electronic message addressed to a mobile data communications device mobile device .

Secure Multipurpose Internet Mail Extensions S MIME Pretty Good Privacy PGP and OpenPGP are exemplary standards for secure e mail messages. For a secure e mail message the sender of the e mail message may sign the message encrypt the message or both sign and encrypt the message. When a cryptographic message having a cryptographic attachment is received display of the cryptographic attachment may not be automatic but instead may be contingent on further action by the user. On a desktop system for example the further action may require the association of an external tool for viewing the cryptographic attachment or saving the attachment to disk as a file. However these actions available to a desktop user may not be available to a mobile device user as the mobile device may be capable of performing only limited actions.

Known systems and methods of transferring e mail to a mobile device may also prevent cryptographic attachments from reaching the mobile device. Mobile devices often receive data over a wireless network and these wireless networks often have attachment limiting devices that may strip attachments to prevent large attachments from overflowing the capacity of the wireless network.

A method of handling cryptographic information in a communication comprising body elements and attachment elements to a mobile device includes the steps of determining if the communication includes an attachment element comprising cryptographic information and converting the attachment element into a body element upon determining that the communication includes an attachment element comprising cryptographic information.

A system for handling cryptographic information in a cryptographic attachment in a message addressed to a mobile device the system comprising an inline generator operable to access the cryptographic information in the cryptographic attachment and generate inline cryptographic information from the cryptographic information in the cryptographic attachment and insert the inline cryptographic information into the body part of the message wherein the generation of the inline cryptographic information facilitates transmission of the cryptographic information to the mobile device.

The Internet Engineering Task Force IETF publishes detailed specifications relating to the Internet in general and relating to Internet e mail messages Multipurpose Internet Mail Extensions MIME Secure Multipurpose Internet Mail Extensions S MIME and other cryptographic standards and protocols such as Pretty Good Privacy PGP . These detailed specifications are published as Requests For Comment RFC documents.

RFC 822 and subsequent RFCs thereto specifies a header format for e mail. An e mail message consists of two parts the header part and the body part. The header part forms a collection of structured field value pairs.

If the header part of an e mail message has a field which begins with Content and or has a MIME Version field then the body of the message may be structured according to MIME as specified in RFC 1521 and subsequent RFCs thereto. MIME thus specifies both an extension of e mail message headers and a corresponding structured body.

Furthermore a MIME structured body can itself be structured using MIME i.e. a body part can itself have a header part and a body part. Thus a MIME e mail message is a hierarchical structure rooted at the e mail message wherein some of the e mail message header field value pairs are also MIME header field value pairs. Given the recursive nature of MIME it is customary to refer to a MIME entity in descriptions that are equally applicable to a MIME entity such as a MIME e mail message and to a MIME body part such as the body part of the MIME e mail message. This convention will be used in this description.

A MIME entity may be structured as S MIME as specified in RFC 1847 and subsequent RFCs thereto. S MIME governs cryptographic electronic messaging including authentication message integrity and non repudiation of origin using digital signatures and privacy data security using encryption .

An S MIME signed entity typically has a content type field whose value includes the tokens multipart signed and a body that contains at least two parts a first MIME entity part and a second cryptographic information part. The cryptographic information part is typically used to verify that the MIME entity part has not been altered and or that the sender of the S MIME signed entity is known and or trusted.

An S MIME encrypted entity contains at least one cryptographic information part. The cryptographic information is typically used to decrypt the S MIME encrypted entity or for other security related operations. An S MIME encrypted entity may have a content type field whose value includes the token multipart encrypted and a body that contains at least two parts a first part that contains cryptographic protocol specifying control information for the second part and a second cryptographic information part.

An S MIME entity can be produced by signing and encrypting operations. For example an S MIME entity can be alternatively signed encrypted signed and then encrypted or encrypted and then signed. Thus the use of the term S MIME entity is meant to cover all of these possible entities having at least one cryptographic information part.

The cryptographic information part in an S MIME entity typically has a content type field or a control information part that specifies the specific cryptographic protocol used. For example S MIME messages which use the cryptographic message syntax protocol for the cryptographic information part have a cryptographic information part with content type field having a value which includes one of the tokens application x pkcs7 signature or application x pkcs7 mime as specified in RFC 2311 and subsequent RFCs thereto. These tokens are used for S MIME signed and S MIME encrypted messages respectively.

A multitude of specific cryptographic protocols can be used for cryptographic attachments in general and S MIME in particular. For example in the case of PGP as specified in RFC 2015 and subsequent RFCs thereto a content type of application pgp encrypted and application pgp signature can be used to specify the cryptographic information part of an S MIME PGP encrypted and S MIME PGP signed entity respectively. Furthermore application pgp keys can be used to specify that the cryptographic information part of a PGP message includes PGP public keys. Thus the term cryptographic information is used to cover all manner of information related to cryptographic operations.

The cryptographic information part in an S MIME entity can be a MIME attachment as is typical with known S MIME techniques such as those in use with Microsoft Outlook Microsoft Exchange Microsoft Outlook Express or other similar S MIME e mail techniques. According to RFC 2183 and subsequent RFCs thereto MIME attachments are MIME entities that have a content disposition header field whose value includes the token attachment to indicate that the body part of the attachment is separate from the body part of a containing MIME entity and that the display of the attachment should not be automatic but rather contingent upon some further action of the user.

An e mail sender system may be connected to an ISP Internet Service Provider on which a user of the system has an account or located within a company and connected to a local area network LAN that is connected to the Internet or connected to the Internet through a large ASP application service provider such as America Online AOL . The systems shown in may instead be connected to a wide area network WAN other than the Internet.

The message server may be implemented on a network computer within the firewall of a corporation a computer within an ISP or ASP system or the like. The message server can be for example an e mail server. The mobile device is configured for receiving and possibly sending e mail and is associated with an account on a message server . Perhaps the two most common message servers are Microsoft Exchange and Lotus Domino . These products are often used in conjunction with Internet mail routers that typically use UNIX based Sendmail protocols to route and deliver mail. These intermediate components are not shown in as they do not play a direct role in the cryptographic attachment processing described below. Message servers such as server typically extend beyond just e mail sending and receiving they also include dynamic database storage engines that have predefined database formats for data like calendars to do lists task lists e mail and documentation.

The wireless gateway and infrastructure provide a link between the Internet and wireless network collectively forming an exemplary e mail transfer mechanism. The wireless infrastructure determines the most likely network for locating a given user and tracks the user as they roam between countries or wireless networks. A message is then delivered to the mobile device via wireless transmission typically at a radio frequency RF from a base station in the wireless network to the mobile device . The particular network may be virtually any wireless network over which messages may be exchanged with the mobile device .

As shown in an e mail message having a cryptographic attachment is sent by the e mail sender over the Internet . This message is illustratively an S MIME message having a cryptographic attachment and uses traditional Simple Mail Transfer Protocol SMTP RFC822 headers and MIME body parts to define the format of the mail message and the cryptographic attachment . The message arrives to the message server and is normally stored in a message store. Most known messaging systems support a so called pull message access scheme wherein the mobile device must request that stored messages be forwarded by the message server to the device . Other known systems provide for automatic routing of such messages which are addressed using a specific e mail address associated with the mobile device . In one embodiment a message server account is associated with a host system such as a home computer or office computer which in turn is associated with the user of a mobile device . Messages directed to the message server account are redirected from the message server to the mobile device as they are received. One such exemplary redirector system may be of the type disclosed in U.S. Pat. No. 6 219 694 entitled SYSTEM AND METHOD FOR PUSHING INFORMATION FROM A HOST SYSTEM TO A MOBILE DATA COMMUNICATION DEVICE HAVING A SHARED ELECTRONIC ADDRESS the entire disclosure of which is incorporated herein by reference.

Regardless of the specific e mail transfer mechanism controlling the forwarding of messages to a mobile device the message or possibly a translated or reformatted version thereof due to the stripping effect of an attachment limiting device is sent to the wireless gateway . The wireless infrastructure includes a series of connections to wireless network . These connections could be Integrated Services Digital Network ISDN Frame Relay or T1 connections using the TCP IP protocol used throughout the Internet.

As used herein the term wireless network may cover many different types of wireless networks such as 1 data centric wireless networks 2 voice centric wireless networks and 3 dual mode networks that can support both voice and data communications over the same physical base stations. The newest of these combined dual mode networks include but are not limited to 1 the Code Division Multiple Access CDMA network 2 the Groupe Special Mobile or the Global System for Mobile Communications GSM and the General Packet Radio Service GPRS network both developed by the standards committee of CEPT and 3 the future third generation 3G networks like Enhanced Data rates for Global Evolution EDGE and Universal Mobile Telecommunications Systems UMTS . GPRS is a data overlay on the very popular GSM wireless network operating in virtually every country in Europe. Some older examples of data centric network include the Mobitex Radio Network and the DataTAC Radio Network. Examples of older voice centric data networks include Personal Communication Systems PCS networks like CDMA GSM and TDMA systems that have been available in North America and worldwide for nearly 10 years. In addition to these illustrative wireless networks other wireless networks may also be used.

The system shown in illustrates three messaging cases First the case where a message having a cryptographic attachment is transmitted intact to the mobile device is illustrated. In this case the integrity of the message is not certain as an e mail transfer mechanism in the network that is operable to transfer or redirect e mail to the mobile device may have an attachment limiting device which strips message attachments. The attachment limiting device may not be known to the user of the mobile device and thus the user of the mobile device may not be able to ascertain whether the message originally included an attachment or if an attachment has been stripped.

In the second case a stripped message is transmitted to the mobile device . At the mobile device although message was sent stripped message is received. The case where stripped message is transmitted to mobile device illustrates the integrity issue suggested in the first case and also illustrates the case in which a service provider of the mobile device strips attachments as a matter of course. The second case is further described in detail below with reference to .

Finally in the third case an inline cryptographic message is transmitted to the mobile device regardless of the presence or absence of an attachment limiting device in the system. The case where cryptographic inline message is transferred to mobile device is described in detail with reference to below.

E mail message has at least a header part and a cryptographic attachment . Headers include known e mail fields such as the To From and Subject fields as well as when MIME and S MIME protocols are used other header fields. The attachment limiting device transforms the e mail message into a stripped message which no longer has attachment and has headers that differ at least from headers by no longer referring to attachment . The attachment limiting device may be implemented for example by using Messaging Application Programmer s Interface MAPI to construct the message by requesting all message elements except for attachment from the message server system of . The e mail message may also be a multipart message having other parts than just attachment such as a plain text part. These other parts of message go through attachment limiting device unaltered as they are not attachments and are transferred as parts of the message .

The message may have a cryptographic attachment such as in the case of an S MIME message. The information of the cryptographic attachment can be located within the body part of message that immediately follows a header part having a content disposition header field value pair that includes the token attachment .

The specific type of cryptographic attachment in message depends on the cryptographic protocol used. For example if the cryptographic message syntax used is S MIME then the cryptographic attachment may have a content disposition field having a value which includes one of the pkcs variant protocol tokens application x pkcs7 signature application x pkcs7 mime application pkcs7 signature application pkcs7 mime etc. Furthermore in the absence of a specific protocol the filename or name MIME parameter associated with the attachment can be used to determine the protocol used in the attachment. For example the file name extension .p7m is associated with the S MIME token application PKCS7 mime. 

The inline generator converts e mail message into inline cryptographic e mail message by extracting the cryptographic information from message converting the cryptographic information into an inline form as a cryptographic inline entity and communicating the inline entity to the mobile device . This last step is accomplished for example by substituting message with message at the e mail transfer mechanism. The attachment limiting device will not strip the inline entity since inline entity is not an attachment. Headers are substantially similar to headers except that headers specify that message contains inline entity . This ensures that inline cryptographic e mail message that has in its body the cryptographic inline entity retains the cryptographic information extracted from attachment regardless of the effect of attachment limiting device .

Additionally in another embodiment the cryptographic inline e mail message can still have attachment within its body for example by using the multipart construct of MIME. If e mail message has a multipart body then the inline generator can copy the body of message into the body of message and optionally include attachment and then embed the inline entity in the body of message .

In one embodiment the inline generator may delete the attachment after creating the inline entity and thus only one copy of the cryptographic information is sent to the mobile device regardless of the presence or absence of attachment limiting device .

Many different methods are possible in the inline generator to prevent the stripping of an attachment by an attachment limiting device . In one embodiment headers can be modified to not specify entity as an attachment and ensure that entity is not discernible as an attachment.

In another embodiment the headers specify that entity is an inline entity thereby fully enabling the cryptographic information to be automatically used at the mobile device . This can be accomplished in a MIME system for example by including a content disposition field in headers having a token value of inline .

By including the extracted cryptographic information of attachment the inline entity may be smaller than attachment since an attachment may also have to specify a filename parameter. Thus bandwidth requirements are reduced.

The attachment limiting device if present operates substantially in the same way as was described in reference to above. However because the attachment has been converted to an inline entity the e mail message goes through the attachment limiting device unchanged. Of course if the inline generator is configured to leave other non cryptographic attachments unchanged then the attachment limiting device if present will strip these other attachments that the inline e mail message may still have. The inline generator however may also be configured to convert other non cryptographic attachments to inline entities.

The attachment limiting device may be implemented in the system either by design or due to external requirements. For example the attachment limiting device may be designed to be implemented at the inline generator as described above or at wireless gateway of or at another device in the communication system such as a Proxy Server connected to wireless network . Alternatively the attachment limiting device may be implemented due to an external requirement such as in the case in which the wireless network and or wireless infrastructure may be a private network that strips attachments as a matter of course.

In another embodiment the inline generator may also generate conversion information detailing the conversion of the attachment into the inline entity . The conversion information may then be accessed by an inline extractor located in the mobile device to reconstruct the original message and the attachment . In one embodiment the conversion information comprises the original headers of the original message prior to processing by the inline generator .

Regardless of the presence of an attachment limiting device in the system the inline generator and inline extractor further provide the capability to automatically utilize the inline entity at the mobile device . The inline extractor receives the message and extracts the cryptographic inline information from inline e mail message . Inline extractor automatically extracts the cryptographic inline entity from the message and automatically extracts the inline cryptographic information from the cryptographic inline entity . Because a body part having an inline disposition type is to be displayed or utilized automatically upon receiving the message the mobile device is thus enabled to automatically utilize the cryptographic information .

Non cryptographic utilization of cryptographic information may also be implemented. For example the inline extractor may be used to automatically reconstruct a message sufficiently similar to an original message by fully reversing the process of inline generator to generate a reconstructed attachment from the inline cryptographic information . The inline extractor may reconstruct the message and the attachment by accessing the conversion information detailing the conversion of the attachment into the inline entity . The automatically reconstructed message and automatically reconstructed attachment may however require further action by a user as the information in the attachment is no longer stored in an inline entity.

In another embodiment instead of utilizing conversion information to reconstruct the original message the original message is reconstructed by determining the type of information stored in the inline entity and automatically generating an appropriate attachment file name and converting the inline entity back into attachment . For example in the case of an S MIME communication the file name extension .p7m is associated with the S MIME token application PKCS7 mime. Thus if an inline entity is associated with the S MIME token application PKCS7 mime a file name having the extension .p7m may be automatically generated and the inline entity may be converted back into an attachment having the automatically generated file name.

Mobile device integrates the inline extractor introduced in . A transceiver at the mobile device receives the cryptographic inline e mail message via wireless network and provides the cryptographic inline e mail message to the inline extractor . By being located in the mobile device inline extractor enables cryptographic information to be utilized automatically upon viewing of message via a cryptographic e mail client .

In another embodiment the cryptographic inline e mail message or alternatively a reconstructed e mail message having an attachment may be stored at the mobile device storage . In the case where cryptographic information includes an encrypted and or signed version of message it is preferred not to store the automatically decrypted and or unsigned message in the clear. This ensures that although decrypting and or verification are automatic a message is never stored in the clear.

Since the cryptographic information of cryptographic inline e mail message is made available automatically at the device a cryptographic e mail client can automatically cryptographically. process the message . Examples of such automatic processing include checking for the presence of a digital signature in cryptographic inline information of the message and or applying a private key to decrypt an encrypted session key the session key being part of cryptographic inline information . The session key can in turn be used to decrypt an encrypted version of message the encrypted version of message also being part of the inline cryptographic information . Once signature verification and decryption operations if necessary are completed automatically cryptographically processed clear message can be shown to the user of the mobile device along with cryptographic decryption and or verification status information. Furthermore clear message can be automatically destroyed when no longer selected for viewing.

When sending a message from the mobile device the inline extractor may also perform the function of an inline generator thus providing the ability to send cryptographic inline entities from the mobile device . Thus both the sending of traditional attachments from the mobile device as well as sending inline data from the mobile device may be realized. In another embodiment inline generator may also perform the functions of the inline extractor and is configured to complement operations of inline generator functions carried out at the mobile device to extract the inline data sent from mobile device and provide a traditional attachment to the recipient of the message sent from the mobile device . Thus if the wireless network includes an attachment limiting device an attachment may be sent from the mobile device as an inline entity and then converted to a traditional attachment by the inline generator at the wireless gateway . The dual mode functionality of the inline generator and the inline extractor may be triggered such that attachments communicated to the mobile device are converted to inline entities and attachments communication from the mobile device are converted to inline entities at the mobile device before transmission and thereafter converted to traditional attachments at the wireless gateway . Thus by placing inline generators and inline extractors at various locations in communication networks of a communication system the capability to tunnel attachments over one or more intermediate communication networks in the communication system is provided.

The inline generator can be located in any number of different system components. In alternate embodiments the inline generator can be located in a server that communicates with an e mail transfer mechanism such as the elements connected to message server of in the e mail sender in the same component as the attachment limiting device of in the wireless network in the wireless infrastructure or in the wireless gateway .

Storage optionally has inline extractor configuration table . Each row of the table represents a rule and includes an application A or other device module reference to be signaled upon conversion of an inline entity such as cryptographic inline entity a MIME type T as well as optional criteria C and optional post inline processing operations P. An exemplary method that may be used with these system components is described in further detail below with reference to . The inline extractor is preferably located in the mobile device .

At step an e mail message such as S MIME e mail Message or e mail message is received. The step of receiving may encompass an e mail message being retrieved from storage for instance after being marked as unread or an e mail message being received at a message server such as message server .

At step it is determined whether the e mail message received at step has attachments. This can be accomplished using MAPI or by inspecting the structure of the e mail message as previously described. If the e mail message has attachments for example in the case of cryptographic e mail message then steps to ensue to generate an inline entity from the e mail message followed by step . Conversely if the e mail message does not have attachments for example in the case of e mail message then only step ensues.

At step each attachment in the e mail message is processed through step and depending on the outcome of step either step or step .

At step storage is consulted in order to determine if configuration table stores a rule that matches for the attachment currently being processed. Each rule specifies a conversion condition upon which being met the attachment is converted to an inline entity. In one embodiment a default rule is defined for cryptographic attachments and configuration table and storage need not be consulted. Illustratively a default rule for S MIME is defined by elements M and T of . These elements comprise a rule which can be interpreted as regardless of the recipient M of the e mail message whenever an S MIME type T attachment is found the inline generator software module embeds the attachment in the lines of the body of the resulting e mail message.

Optionally additional operations can occur. For instance criteria C may be used to determine if the attachment meets pre inline conditions to be embedded in the lines of the body. If the condition C is met then pre inline operations P if any may be desired to adapt the information that is derived from the message or attachment that is actually sent as an inline entity. For example in the case of S MIME type T attachments the criteria C can be all indicating that all S MIME attachments should be embedded in the lines of the body.

Furthermore a re ordering pre inline operation P can adapt the cryptographic information in the S MIME attachment so that optional components of the cryptographic attachment appear at the end. Such re ordering and pre inline operations are disclosed in U.S. Provisional Application Ser. No. 60 297 681 filed on Jun. 12 2001 the disclosure of which is incorporated herein by reference.

Operations can also be utilized with other attachment types. For example as illustrated in the first rule in the first row of table indicates that the recipient is email dev the MIME type is jpeg the criteria is size

Another example of a pre inline operation is the re casting of an attachment into an alternate data type or MIME type that is more readily useable at the mobile device . For example by recasting a vcard attachment type into an address book entry type the mobile device need not convert the vcard attachment into an address book entry.

Another example of recasting is providing a subset of attachment data. For example if the original attachment is a digital certificate the message server may be configured to verify the authenticity of the digital certificate. If the authenticity is verified then the resulting inline entity may only comprise the public key of the digital certificate or the status of the digital certificate for example and the remaining digital certificate data need not be transferred.

If a rule or condition is met in step then at step the attachment is converted into an inline entity and embedded into the body of the e mail message.

Conversely if a rule or condition is not met in step then at step the attachment is left intact or optionally stripped to conserve bandwidth over the wireless network and resources at the mobile device .

At step the next attachment if any is processed through steps to . However if all attachments have been processed then step ensues.

At step the processed e mail message is sent to the mobile device . At this step the original attachments can be optionally removed from the e mail message thereby providing the above mentioned bandwidth conservation benefit of the attachment limiting device.

At the end of the process after step there is provided a cryptographic inline e mail message converted from the received cryptographic e mail message . In the case of e mail message being received without attachments at step e mail message continues as if unprocessed and is provided after step . This ensures that if a cryptographic inline message or a regular e mail message is received without attachments at step the message is not altered. Thus the process of may be carried out simultaneously at multiple locations in the system as processed messages are not affected by further execution of steps . These additional locations may include the wireless infrastructure the wireless gateway and other locations.

At step an e mail message such as cryptographic inline message or e mail message is received. The step of receiving can be realized by either receiving a message over the wireless network or by retrieving a message from a data store in the mobile device .

At step it is determined whether the e mail message received at step has a body with inline entities. In one embodiment the determination is made by inspecting the structure of the e mail message. If the e mail message has inline entities for example in the case of cryptographic inline e mail message having cryptographic inline entity of then steps to ensue to convert the e mail message followed by step . Conversely if the e mail message does not have inline entities for example in the case of e mail message or a message with a traditional attachment but without any inline entities then only step ensues.

At step each inline entity of the e mail message is processed through step and depending on the outcome of step either at step or step .

At step storage is consulted in order to determine if configuration table contains a rule that matches for the inline entity of the e mail message currently being processed. Each rule specifies an extraction condition upon which being met the information stored in the inline entity is extracted. In one embodiment a default rule is defined for cryptographic attachments and configuration table and storage need not be consulted. The default rule is illustrated for S MIME by elements A and T of which can be interpreted as whenever an S MIME type T inline entity is found the inline extractor software module extracts the cryptographic information from the inline entity to automatically provide the cryptographic information found therein.

Optionally additional operations can occur. For example criteria C may be used to determine if the inline entity once extracted from the message meets post inline processing conditions and should therefore be post inline processed. Additionally optional post inline processing operations if any are specified. In the case of S MIME compatible MIME type T the criteria C can be for example key CRL and post inline operations P decrypt verify indicating that the presence of an S MIME Private Key of is a pre condition for automatic decryption of the inline entity and that the presence of a certificate revocation list CRL is a pre condition for verification of the integrity of a digital signature certificate and or the message. Thus in the case of S MIME type T decryption and verification decrypt verify P of a digital signature of the S MIME message using the CRL can take place.

An example of how these optional operations can be utilized with cryptographic and non cryptographic attachments is illustrated in . For example assume a mobile device has a display screen of 160 by 160 pixels. The first rule in the first row of table indicates that the application is browser the MIME type is jpeg and the criteria is w or h 160 pixels with the post inline operation of scaling the image. Thus if a jpeg image is the inline information in the inline entity and has a height or width less than 160 pixels no post inline processing is necessary. However if a jpeg image has a height or width greater than 160 pixels then it is scaled i.e. adapted to the display of the mobile device .

Another example of a post inline operation is the adding of inline information into a record system or data store readily useable at the mobile device . For example by receiving an address book entry as an inline entity an address book application on the mobile device can automatically add the entry if it is not already in the address book. By way of another example receiving a compressed file as an inline entity a decompression program on the mobile device can be configured to automatically decompress the compressed file contained in the inline entity.

If a rule or condition is met in step then at step the inline information in the inline body portion is extracted from the body of the e mail message.

At step the next inline entity of the received e mail message if any is processed through steps to . However if all inline entities have been processed then step ensues.

At step reception of the e mail message is signaled to the mobile device after the automatic inline processing.

At the end of the process after step there is provided inline cryptographic information in the case of a cryptographic inline message being received at step . In the case of e mail being received without inline entities at step e mail is unprocessed and is provided after step .

In another embodiment the inline information is automatically utilized at the mobile device upon receiving the message or retrieving the message. In yet another embodiment the mobile device requires a user intervention before the inline information may be used.

While the systems and methods disclosed herein have been described primarily with reference to known communication protocols such as MIME and S MIME the systems and methods may also be used with other communication protocols that differentiate between a body element of a message and an attachment element of a message. If a message comprises body elements and attachment elements then an exemplary method includes the steps of determining if the communication includes a cryptographic attachment element comprising cryptographic information and converting the cryptographic attachment element into a cryptographic body element upon determining that the communication includes a cryptographic attachment element. Thus the systems and methods disclosed herein are not necessarily limited to MIME and S MIME type communication systems.

Furthermore the functionality of the inline generator and inline extractor may be combined in a single inline generator extractor module as shown in . Software modules performing the function of the inline generator extractor module may be located and executed at various locations in a communication network. Thus in a similar manner as described above the dual mode functionality of the inline generator extractor module may be triggered in a manner such that attachments communicated to the mobile device from a transmitting device such as another mobile device a wireless gateway or a message server as shown in are converted to inline entities before being transmitted over the wireless network . Similarly attachments sent from the mobile device to a recipient are converted to inline entities at the mobile device before being transmitted over the wireless network . Once the transmission is received by either the recipient device such as another mobile device or a message server or an intermediate device such as the wireless gateway the inline entities may be converted back into an attachment entity by another inline generator extractor module executed on the recipient device or intermediate device. Thus multiple inline generator extractor modules located in various communication networks in a communication system can provide the capability to tunnel attachments over one or more intermediate communication networks in the communication system.

The inline generator extractor module illustratively comprises software operable to monitor outgoing and incoming communications to the device upon which it is executed and further comprises a data store storing a table of conversion conditions and conversion operations . The substance of an outgoing communication is monitored in a similar manner as described with reference to above. Thus if a conversion condition is met then an outgoing mixed element communication comprising body elements and attachment elements may be converted into a body element communication comprising body elements that include the body elements and converted attachment elements . The converted attachment elements in this example comprise the same attachment element information but have been converted to a body element type. The conversion may be implemented as previously described such as in the case of a MIME or S MIME communication or may be implemented in accordance with some other communication standard that differentiates between message body elements and attachment elements.

Furthermore if a conversion condition is met then an associated conversion operation may be performed on the attachment element in a manner as previously described. Thus the outgoing mixed element communication may be converted into a body element communication comprising body elements that include the body elements and operated attachment elements .

The information in the body elements and the attachment elements may also be sent in two communications. The first communication may comprise body elements which comprise the same information as body elements in the mixed element communication . A second communication may then comprise converted attachment elements . The converted attachment elements comprise the same attachment element information but have been converted to a body element type. Thus the outgoing mixed element communication may be converted into a first body element communication comprising body elements that include the body elements and a second body element communication comprising the converted attachment elements .

The inline generator extractor also comprises a table of extraction conditions and associated extraction operations . The substance of an incoming communication is monitored in a similar manner as described with reference to above. Thus if an extraction condition is met communication data comprising body information and attachment information may be extracted from an incoming body element communication comprising body elements and converted attachment elements . The extraction of the body information and the attachment information may be implemented as previously described such as in the case of a MIME or S MIME communication or may be implemented in accordance with some other communication standard that differentiates between message body elements and attachment elements. Furthermore because the attachment information is extracted from the converted attachments that are of a body element type the attachment information may be automatically utilized by the device receiving the body element communication .

Additionally if an extraction condition is met then an associated extraction operation may be performed on the converted attachment elements in a manner as previously described. Thus communication data comprising body information from the body elements and operated attachment information resulting from an operation on the converted attachment elements may be obtained.

Also the inline generator extractor module may be operable to reconstruct the original message comprising body elements and attachment elements . The reconstruction of the original message may be implemented as previously described with reference to conversion information detailing the conversion of the attachment elements into the converted attachment elements .

In another embodiment instead of utilizing conversion information to reconstruct the original communication the original communication is reconstructed by determining the type of converted attachment elements and automatically generating appropriate attachment file names and converting the converted attachment elements back into attachment elements . For example in the case of an S MIME communication the file name extension .p7m is associated with the S MIME token application PKCS7 mime. Thus if a converted attachment element is associated with the S MIME token application PKCS7 mime a file name having the extension .p7m may be automatically generated and the converted attachment element can be converted back into attachment element having the automatically generated file name. Additionally a similar reconstruction of non cryptographic attachments can also be implemented. For example if the content type associated with a converted MIME body part is image jpeg then the inline generator extractor module can automatically generate a file name having the extension .jpg and the converted attachment element can be converted back into attachment element having the automatically generated file name.

This automatic conversion process may also be configurable by file type e.g. a user of a mobile device may select which converted attachment types are to be automatically reconstructed. For example the user of the mobile device may desire automatic utilization of cryptographic information but may not desire the automatic display of other inline entities. Thus the user may configure the mobile device to automatically convert all inline entities that are not of a cryptographic type into attachments.

Where the device is enabled for two way communications the device will incorporate a communication subsystem also shown as transceiver in including a receiver a transmitter and associated components such as one or more preferably embedded or internal antenna elements and local oscillators LOs and a processing module such as a digital signal processor DSP . The particular design of the communication subsystem will be dependent upon the communication network in which the device is intended to operate. For example a device destined for a North American market may include a communication subsystem designed to operate within the Mobitex mobile communication system or DataTAC mobile communication system whereas a device intended for use in Europe may incorporate a General Packet Radio Service GPRS communication subsystem .

Network access requirements will also vary depending upon the type of network such as Wireless Network of . For example in the Mobitex and DataTAC networks mobile devices such as are registered on the network using a unique personal identification number or PIN associated with each device. In GPRS networks however network access is associated with a subscriber or user of a device . A GPRS device therefore requires a subscriber identity module commonly referred to as a SIM card in order to operate on a GPRS network. Without a SIM card a GPRS device will not be fully functional. Local or non network communication functions if any may be operable but the device will be unable to carry out any functions involving communications over network . When required network registration or activation procedures have been completed a device may send and receive communication signals over the network . Signals received by the antenna through a communication network are input to the receiver which may perform such common receiver functions as signal amplification frequency down conversion filtering channel selection and the like and in the example system shown in analog to digital conversion. Analog to digital conversion of a received signal allows more complex communication functions such as demodulation and decoding to be performed in the DSP . In a similar manner signals to be transmitted are processed including modulation and encoding for example by the DSP and input to the transmitter for digital to analog conversion frequency up conversion filtering amplification and transmission over the communication network via the antenna .

The DSP not only processes communication signals but also provides for receiver and transmitter control. For example the gains applied to communication signals in the receiver and transmitter may be adaptively controlled through automatic gain control algorithms implemented in the DSP .

The device preferably includes a microprocessor such as processor of which controls the overall operation of the device. Communication functions including at least data and voice communications are performed through the communication subsystem . The microprocessor also interacts with further device subsystems such as the display flash memory random access memory RAM auxiliary input output I O subsystems serial port keyboard speaker microphone a short range communications subsystem and any other device subsystems generally designated as .

Some of the subsystems shown in perform communication related functions whereas other subsystems may provide resident or on device functions. Notably some subsystems such as keyboard and display for example may be used for both communication related functions such as entering a text message for transmission over a communication network and device resident functions such as a calculator or task list.

Operating system software used by the microprocessor is preferably stored in a persistent store such as flash memory which may instead be a read only memory ROM or similar storage element. The operating system specific device applications or parts thereof may be temporarily loaded into a volatile store such as RAM . Received communication signals may also be stored to RAM . Flash memory preferably includes data communication module B and when device is enabled for voice communication voice communication module A. Also included in flash memory are other software modules N such as the inline extractor software module of and software portions of cryptographic e mail client of as well as a cryptographic engine software module.

The microprocessor in addition to its operating system functions preferably enables execution of software applications on the device . A predetermined set of applications which control basic device operations including at least data and voice communication applications for example will normally be installed on the device during manufacture. A preferred application that may be loaded onto the device may be a personal information manager PIM application having the ability to organize and manage data items relating to the device user such as but not limited to e mail calendar events voice mails appointments and task items. Naturally one or more memory stores would be available on the device to facilitate storage of PIM data items on the device . Such PIM application would preferably have the ability to send and receive data items via the wireless network . In a preferred embodiment the PIM data items are seamlessly integrated synchronized and updated via the wireless network with the device user s corresponding data items stored or associated with a host computer system.

Further applications may also be loaded onto the device through the network an auxiliary I O subsystem serial port short range communications subsystem or any other suitable subsystem and installed by a user in the RAM or preferably a non volatile store for execution by the microprocessor . Such flexibility in application installation increases the functionality of the device and may provide enhanced on device functions communication related functions or both. For example secure communication applications as described herein may enable electronic commerce functions and other such financial transactions to be performed using the device .

In a data communication mode a received signal such as a text message or web page download will be processed by the communication subsystem and input to the microprocessor which will preferably further process the received signal for output to the display or alternatively to an auxiliary I O device . A user of device may also compose data items such as e mail messages for example using the keyboard which is preferably a complete alphanumeric keyboard or telephone type keypad in conjunction with the display and possibly an auxiliary I O device . Such composed items may then be transmitted over a communication network through the communication subsystem .

For voice communications overall operation of the device is substantially similar except that received signals would preferably be output to a speaker and signals for transmission would be generated by a microphone . Alternative voice or audio I O subsystems such as a voice message recording subsystem may also be implemented on the device . Although voice or audio signal output is preferably accomplished primarily through the speaker the display may also be used to provide an indication of the identity of a calling party the duration of a voice call or other voice call related information for example.

The serial port would normally be implemented in a personal digital assistant PDA type communication device for which synchronization with a user s desktop computer may be desirable but is an optional device component. Such a port would enable a user to set preferences through an external device or software application and would extend the capabilities of the device by providing for information or software downloads to the device other than through a wireless communication network. The alternate download path may for example be used to load an encryption key onto the device through a direct and thus reliable and trusted connection to thereby enable secure device communication.

A short range communications subsystem is a further optional component which may provide for communication between the device and different systems or devices which need not necessarily be similar devices. For example the subsystem may include an infrared device and associated circuits and components or a Bluetooth communication module to provide for communication with similarly enabled systems and devices.

The computer system may for example be a laptop desktop or palmtop computer system configured for connection to the WAN . Such a computer system may connect to the WAN via an ISP or ASP. Alternatively the computer system may be a network connected computer system that like the computer system for example accesses the WAN through a LAN or other network. Many modern mobile devices are enabled for connection to a WAN through various infrastructure and gateway arrangements so that the computer system may also be a mobile device.

The corporate LAN is an illustrative example of a central server based messaging system that has been enabled for wireless communications. The corporate LAN may be referred to as a host system in that it hosts both a data store with mailboxes for messages as well as possibly further data stores for other data items that may be sent to or received from mobile devices and and the wireless connector system the wireless VPN router or possibly other components enabling communications between the corporate LAN and one or more mobile devices and . In more general terms a host system may be one or more computers at with or in association with which a wireless connector system is operating. The corporate LAN is one preferred embodiment of a host system in which the host system is a server computer running within a corporate network environment operating behind and protected by at least one security communications firewall . Other possible central host systems include ISP ASP and other service provider or mail systems. Although the desktop computer system and interface connector may be located outside such host systems wireless communication operations may be similar to those described below.

The corporate LAN implements the wireless connector system as an associated wireless communications enabling component which will normally be a software program a software application or a software component built to work with at least one or more message server. The wireless connector system is used to send user selected information to and to receive information from one or more mobile devices and via one or more wireless networks and . The wireless connector system may be a separate component of a messaging system as shown in or may instead be partially or entirely incorporated into other communication system components. For example the message server may incorporate a software program application or component implementing the wireless connector system portions thereof or some or all of its functionality.

The message server running on a computer behind the firewall acts as the main interface for the corporation to exchange messages including for example electronic mail calendaring data voice mail electronic documents and other PIM data with the WAN which will typically be the Internet. The particular intermediate operations and computers will be dependent upon the specific type of message delivery mechanisms and networks via which messages are exchanged and therefore have not been shown in . The functionality of the message server may extend beyond message sending and receiving providing such features as dynamic database storage for data like calendars to do lists task lists e mail and documentation as described above.

Message servers such as normally maintain a plurality of mailboxes in one or more data stores such as for each user having an account on the server. The data store includes mailboxes for a number of n user accounts. Messages received by the message server that identify a user a user account a mailbox or possibly another address associated with a user account or mailbox as a message recipient will typically be stored in the corresponding mailbox . If a message is addressed to multiple recipients or a distribution list then copies of the same message may be stored to more than one mailbox . Alternatively the message server may store a single copy of such a message in a data store accessible to all of the users having an account on the message server and store a pointer or other identifier in each recipient s mailbox . In typical messaging systems each user may then access his or her mailbox and its contents using a messaging client such as Microsoft Outlook or Lotus Notes which normally operates on a PC such as the desktop computer system connected in the LAN . Although only one desktop computer system is shown in a LAN will typically contain many desktop notebook and laptop computer systems. Each messaging client normally accesses a mailbox through the message server although in some systems a messaging client may enable direct access to the data store and a mailbox stored thereon by the desktop computer system . Messages may also be downloaded from the data store to a local data store on the desktop computer system .

Within the corporate LAN the wireless connector system operates in conjunction with the message server . The wireless connector system may reside on the same computer system as the message server or may instead be implemented on a different computer system. Software implementing the wireless connector system may also be partially or entirely integrated with the message server . The wireless connector system and the message server are preferably designed to cooperate and interact to allow the pushing of information to mobile devices . In such an installation the wireless connector system is preferably configured to send information that is stored in one or more data stores associated with the corporate LAN to one or more mobile devices through the corporate firewall and via the WAN and one of the wireless networks . For example a user that has an account and associated mailbox in the data store may also have a mobile device such as . As described above messages received by the message server that identify a user account or mailbox are stored to a corresponding mailbox by the message server . If a user has a mobile device such as messages received by the message server and stored to the user s mailbox are preferably detected by the wireless connector system and sent to the user s mobile device . This type of functionality represents a push message sending technique. The wireless connector system may instead employ a pull technique in which items stored in a mailbox are sent to a mobile device responsive to a request or access operation made using the mobile device or some combination of both techniques.

The use of a wireless connector thereby enables a messaging system including a message server to be extended so that each user s mobile device has access to stored messages of the message server .

As shown in there are several paths for exchanging information with a mobile device from the corporate LAN . One possible information transfer path is through the physical connection such as a serial port using an interface or connector . This path may be useful for example for bulk information updates often performed at initialization of a mobile device or periodically when a user of a mobile device is working at a computer system in the LAN such as the computer system . For example as described above PIM data is commonly exchanged over such a connection for example a serial port connected to an appropriate interface or connector such as a cradle in or upon which a mobile device may be placed. The physical connection may also be used to transfer other information from a desktop computer system to a mobile device including private security keys private keys such as private encryption or signature keys associated with the desktop computer system or other relatively bulky information such as Certs and CRLs used in some secure messaging schemes such as S MIME and PGP.

Private key exchange using a physical connection and connector or interface allows a user s desktop computer system and mobile device or to share at least one identity for accessing all encrypted and or signed mail. The user s desktop computer system and mobile device or can also thereby share private keys so that either the host system or mobile device or can process secure messages addressed to the user s mailbox or account on the message server . The transfer of Certs and CRLs over such a physical connection may be desirable in that they represent a large amount of the data that is required for S MIME PGP and other public key security methods. A user s own Cert a chain of Cert s used to verify the user s Cert and CRL as well as Certs Cert chains and CRLs for other users may be loaded onto a mobile device from the user s desktop computer system . This loading of other user s Certs and CRLs onto a mobile device allows a mobile device user to select other entities or users with whom they might be exchanging secure messages and to pre load the bulky information onto the mobile device through a physical connection instead of over the air thus saving time and wireless bandwidth when a secure message is received from or to be sent to such other users or when the status of a Cert is to be determined.

In known synchronization type wireless messaging systems a physical path has also been used to transfer messages from mailboxes associated with a message server to mobile devices and .

Another method for data exchange with a mobile device is over the air through the wireless connector system and using wireless networks . As shown in this could involve a Wireless VPN router if available in the network or alternatively a traditional WAN connection to wireless infrastructure that provides an interface to one or more wireless networks . The Wireless VPN router provides for creation of a VPN connection directly through a specific wireless network to a wireless device . Such a Wireless VPN router may be used in conjunction with a static addressing scheme. For example if the wireless network is an IP based wireless network then IPV6 would provide enough IP addresses to dedicate an IP address to every mobile device configured to operate within the network and thus make it possible to push information to a mobile device at any time. A primary advantage of using a wireless VPN router is that it could be an off the shelf VPN component which would not require wireless infrastructure . A VPN connection may use a TCP IP or UDP IP connection to deliver messages directly to and from a mobile device .

If a wireless VPN router is not available then a link to a WAN normally the Internet is a commonly used connection mechanism that may be employed by the wireless connector system . To handle the addressing of the mobile device and any other required interface functions wireless infrastructure is preferably used. The wireless infrastructure may also determine a most likely wireless network for locating a given user and track users as they roam between countries or networks. In wireless networks such as and messages are normally delivered to and from mobile devices via RF transmissions between base stations and the mobile devices .

A plurality of connections to wireless networks and may be provided including for example ISDN Frame Relay or T1 connections using the TCP IP protocol used throughout the Internet. The wireless networks and could represent distinct unique and unrelated networks or they could represent the same network in different countries and may be any of different types of networks including but not limited to data centric wireless networks voice centric wireless networks and dual mode networks that can support both voice and data communications over the same or similar infrastructure such as any of those described above.

In some implementations more than one over the air information exchange mechanism may be provided in the corporate LAN . In the exemplary communication system of for example mobile devices associated with users having mailboxes associated with user accounts on the message server are configured to operate on different wireless networks and . If the wireless network supports IPv6 addressing then the wireless VPN router may be used by the wireless connector system to exchange data with any mobile device operating within the wireless network . The wireless network may be a different type of wireless network however such as the Mobitex network in which case information may instead be exchanged with a mobile device operating within the wireless network by the wireless connector system via a connection to the WAN and the wireless infrastructure .

Operation of the system in will now be described using an example of an e mail message sent from the computer system and addressed to at least one recipient having both an account and mailbox or like data store associated with the message server and a mobile device or . However the e mail message is intended for illustrative purposes only. The exchange of other types of information between the corporate LAN is preferably also enabled by the wireless connector system .

The e mail message sent from the computer system via the WAN may be fully in the clear or signed with a digital signature and or encrypted depending upon the particular messaging scheme used. For example if the computer system is enabled for secure messaging using S MIME then the e mail message may be signed encrypted or both.

E mail messages such as normally use traditional SMTP RFC822 headers and MIME body parts to define the format of the e mail message. These techniques are all well known to one in the art. The e mail message arrives at the message server which determines into which mailboxes the e mail message should be stored. As described above a message such as the e mail message may include a user name a user account a mailbox identifier or other type of identifier that may be mapped to a particular account or associated mailbox by the message server . For an e mail message recipients are typically identified using e mail addresses corresponding to a user account and thus a mailbox .

The wireless connector system sends or mirrors via a wireless network or certain user selected data items or parts of data items from the corporate LAN to the user s mobile device or preferably upon detecting that one or more triggering events has occurred. A triggering event includes but is not limited to one or more of the following screen saver activation at a user s networked computer system disconnection of the user s mobile device or from the interface or receipt of a command sent from a mobile device or to the host system to start sending one or more messages stored at the host system. Thus the wireless connector system may detect triggering events associated with the message server such as receipt of a command or with one or more networked computer systems including the screen saver and disconnection events described above. When wireless access to corporate data for a mobile device or has been activated at the LAN for example when the wireless connector system detects the occurrence of a triggering event for a mobile device user data items selected by the user are preferably sent to the user s mobile device. In the example of the e mail message assuming that a triggering event has been detected the arrival of the message at the message server is detected by the wireless connector system . This may be accomplished for example by monitoring or querying mailboxes associated with the message server or if the message server is a Microsoft Exchange server then the wireless connector system may register for advise syncs provided by the Microsoft Messaging Application Programming Interface MAPI to thereby receive notifications when a new message is stored to a mailbox .

When a data item such as the e mail message is to be sent to a mobile device or the wireless connector system preferably repackages the data item in a manner that is transparent to the mobile device so that information sent to and received by the mobile device appears similar to the information as stored on and accessible at the host system LAN in . One preferred repackaging method includes wrapping received messages to be sent via a wireless network in an electronic envelope that corresponds to the wireless network address of the mobile device to which the message is to be sent. Alternatively other repackaging methods could be used such as special purpose TCP IP wrapping techniques. Such repackaging preferably also results in e mail messages sent from a mobile device or appearing to come from a corresponding host system account or mailbox even though they are composed and sent from a mobile device. A user of a mobile device or may thereby effectively share a single e mail address between a host system account or mailbox and the mobile device.

Repackaging of the e mail message is indicated at and . Repackaging techniques may be similar for any available transfer paths or may be dependent upon the particular transfer path either the wireless infrastructure or the wireless VPN router . For example the e mail message is preferably compressed and encrypted either before or after being repackaged at to thereby effectively provide for secure transfer to the mobile device . Compression reduces the bandwidth required to send the message whereas encryption ensures confidentiality of any messages or other information sent to mobile devices and . In contrast messages transferred via a VPN router might only be compressed and not encrypted since a VPN connection established by the VPN router is inherently secure. Messages are thereby securely sent via either encryption at the wireless connector system which may be considered a non standard VPN tunnel or a VPN like connection for example or the VPN router to mobile devices and . Accessing messages using a mobile device or is thus no less secure than accessing mailboxes at the LAN using the desktop computer system .

When a repackaged message or arrives at a mobile device or via the wireless infrastructure or via the wireless VPN router the mobile device or removes the outer electronic envelope from the repackaged message or and performs any required decompression and decryption operations. Messages sent from a mobile device or and addressed to one or more recipients are preferably similarly repackaged and possibly compressed and encrypted and sent to a host system such as the LAN . The host system may then remove the electronic envelope from the repackaged message decrypt and decompress the message if desired and route the message to the addressed recipients.

Another goal of using an outer envelope is to maintain at least some of the addressing information in the original e mail message . Although the outer envelope used to route information to mobile devices is addressed using a network address of one or more mobile devices the outer envelope preferably encapsulates the entire original e mail message including at least one address field possibly in compressed and or encrypted form. This allows original To From and CC addresses of the e mail message to be displayed when the outer envelope is removed and the message is displayed on a mobile device or . The repackaging also allows reply messages to be delivered to addressed recipients with the From field reflecting an address of the mobile device user s account or mailbox on the host system when the outer envelope of a repackaged outgoing message sent from a mobile device is removed by the wireless connector system . Using the user s account or mailbox address from the mobile device or allows a message sent from a mobile device to appear as though the message originated from the user s mailbox or account at the host system rather than the mobile device.

The wireless connector systems are similar to the wireless connector system described above in that it enables data items such as e mail messages and other items that are stored in mailboxes and possibly data items stored in a local or network data store to be sent from the LAN to one or more mobile devices .

In however the network operator infrastructure provides an interface between the mobile devices and the LAN . As above operation of the system shown in will be described below in the context of an e mail message as an illustrative example of a data item that may be sent to a mobile device .

When an e mail message addressed to one or more recipients having an account on the message server is received by the message server the message or possibly a pointer to a single copy of the message stored in a central mailbox or data store is stored into the mailbox of each such recipient. Once the e mail message or pointer has been stored to a mailbox it may preferably be accessed using a mobile device or . In the example shown in the e mail message has been addressed to the mailboxes associated with both desktop computer systems and and thus both mobile devices and .

Communication network protocols commonly used in wired networks such as the LAN and or the WAN may not be suitable or compatible with wireless network communication protocols used within wireless networks such as . For example communication bandwidth protocol overhead and network latency which are primary concerns in wireless network communications are less significant in wired networks which typically have much higher capacity and speed than wireless networks. Therefore mobile devices and cannot normally access the data store directly. The network operator infrastructure provides a bridge between the wireless network and the LAN .

The network operator infrastructure enables a mobile device to establish a connection to the LAN through the WAN and may for example be operated by an operator of the wireless network or a service provider that provides wireless communication service for mobile devices and . In a pull based system a mobile device may establish a communication session with the network operator infrastructure using a wireless network compatible communication scheme preferably a secure scheme such as Wireless Transport Layer Security WTLS when information should remain confidential and a wireless web browser such as a Wireless Application Protocol WAP browser. A user may then request through manual selection or pre selected defaults in the software residing in the mobile device any or all information or just new information for example stored in a mailbox in the data store at the LAN . The network operator infrastructure then establishes a connection or session with a wireless connector system using Secure Hypertext Transfer Protocol HTTPS for example if no session has already been established. As above a session between the network operator infrastructure and a wireless connector system may be made via a typical WAN connection or through the VPN router if available. When time delays between receiving a request from a mobile device and delivering requested information back to the device are to be minimized the network operator infrastructure and the wireless connector systems may be configured so that a communication connection remains open once established.

In the system of requests originating from mobile device A and B would be sent to the wireless connector systems and respectively. Upon receiving a request for information from the network operator infrastructure a wireless connector system retrieves requested information from a data store. For the e mail message the wireless connector system retrieves the e mail message from the appropriate mailbox typically through a messaging client operating in conjunction with the computer system which may access a mailbox either via the message server or directly. Alternatively a wireless connector system may be configured to access mailboxes itself directly or through the message server . Also other data stores both network data stores similar to the data store and local data stores associated with each computer system may be accessible to a wireless connector system and thus to a mobile device .

If the e mail message is addressed to the message server accounts or mailboxes associated with both computer systems and and devices and then the e mail message may be sent to the network operator infrastructure as shown at and which then sends a copy of the e mail message to each mobile device and as indicated at and . Information may be transferred between the wireless connector systems and the network operator infrastructure via either a connection to the WAN or the VPN router . When the network operator infrastructure communicates with the wireless connector systems and the mobile devices via different protocols translation operations may be performed by the network operator infrastructure . Repackaging techniques may also be used between the wireless connector systems and the network operator infrastructure and between each mobile device and the network operator infrastructure .

Messages or other information to be sent from a mobile device may be processed in a similar manner with such information first being transferred from a mobile device to the network operator infrastructure . The network operator infrastructure may then send the information to a wireless connector system for storage in a mailbox and delivery to any addressed recipients by the message server for example or may alternatively deliver the information to the addressed recipients.

The above description of the system in relates to pull based operations. The wireless connector systems and the network operator infrastructure may instead be configured to push data items to mobile devices and . A combined push pull system is also possible. For example a notification of a new message or a list of data items currently stored in a data store at the LAN could be pushed to a mobile device which may then be used to request messages or data items from the LAN via the network operator infrastructure .

If mobile devices associated with user accounts on the LAN are configured to operate within different wireless networks then each wireless network may have an associated wireless network infrastructure component similar to .

Although separate dedicated wireless connector systems are shown for each computer system in the system of one or more of the wireless connector systems may preferably be configured to operate in conjunction with more than one computer system or to access a data store or mailbox associated with more than one computer system. For example the wireless connector system may be granted access to the mailboxes associated with both the computer system and the computer system . Requests for data items from either mobile device A or B may then be processed by the wireless connector system . This configuration may be useful to enable wireless communications between the LAN and the mobile devices and without requiring a desktop computer system to be running for each mobile device user. A wireless connector system may instead be implemented in conjunction with the message server to enable wireless communications.

The wireless connector system provides for transfer of data items stored at the LAN to one or more mobile devices . These data items preferably include e mail messages stored in mailboxes in the data store as well as possibly other items stored in the data store or another network data store or a local data store of a computer system such as .

As described above an e mail message addressed to one or more recipients having an account on the message server and received by the message server may be stored into the mailbox of each such recipient. In the system of the external data store preferably has a similar structure to and remains synchronized with the data store . PIM information or data stored at data store preferably is independently modifiable to the PIM information or data stored at the host system. In this particular configuration the independently modifiable information at the external data store may maintain synchronization of a plurality of data stores associated with a user i.e. data on a mobile device data on a personal computer at home data at the corporate LAN etc. . This synchronization may be accomplished for example through updates sent to the data store by the wireless connector system at certain time intervals each time an entry in the data store is added or changed at certain times of day or when initiated at the LAN by the message server or a computer system at the data store or possibly by a mobile device through the access gateway . In the case of the e mail message for example an update sent to the data store some time after the e mail message is received may indicate that the message has been stored in a certain mailbox in the store and a copy of the e mail message will be stored to a corresponding storage area in the data store . When the e mail message has been stored in the mailboxes corresponding to the mobile devices and for example one or more copies of the e mail message indicated at and in will be sent to and stored in corresponding storage areas or mailboxes in the data store . As shown updates or copies of stored information in the data store may be sent to the data store via a connection to the WAN or the VPN router . For example the wireless connector system may post updates or stored information to a resource in the data store via an HTTP post request. Alternatively a secure protocol such as HTTPS or Secure Sockets Layer SSL may be used. A single copy of a data item stored in more than one location in a data store at the LAN may instead be sent to the data store . This copy of the data item could then be stored either in more than one corresponding location in the data store or a single copy may be stored in the data store with a pointer or other identifier of the stored data item being stored in each corresponding location in the data store .

The access gateway is effectively an access platform in that it provides mobile devices and with access to the data store . The data store may be configured as a resource accessible on the WAN and the access gateway may be an ISP system or WAP gateway through which mobile devices and may connect to the WAN . A WAP browser or other browser compatible with the wireless networks and may then be used to access the data store which is synchronized with the data store and download stored data items either automatically or responsive to a request from a mobile device . As shown at and copies of the e mail message which was stored in the data store may be sent to the mobile devices and . A data store on each mobile device may thereby be synchronized with a portion such as a mailbox of a data store on a corporate LAN . Changes to a mobile device data store may similarly be reflected in the data stores and .

The embodiments described herein are examples of structures systems or methods having elements corresponding to the elements of the invention recited in the claims. This written description may enable those of ordinary skill in the art to make and use embodiments having alternative elements that likewise correspond to the elements of the invention recited in the claims. The intended scope of the invention thus includes other structures systems or methods that do not differ from the literal language of the claims and further includes other structures systems or methods with insubstantial differences from the literal language of the claims.

