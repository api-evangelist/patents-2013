---

title: Methods and apparatus for transcoding metadata
abstract: Methods and apparatus for transcoding metadata are disclosed. Example methods disclosed herein to meter media content presented by a media device includes accessing first metadata accompanying media to be presented by the media device, the first metadata not being detectable by a metering device collecting audience measurement data associated the media device, transcoding the first metadata into second metadata having a format that is detectable by the metering device and capable of being inserted into at least one of an audio signal or a video signal corresponding to the media to presented by the media device, inserting the second metadata into the at least one of the audio signal or the video signal, and providing the at least one of the audio signal or the video signal with the inserted second metadata to the media device for presentation.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09609034&OS=09609034&RS=09609034
owner: The Nielsen Company (US), LLC
number: 09609034
owner_city: New York
owner_country: US
publication_date: 20131125
---
This patent is a continuation of U.S. patent application Ser. No. 12 890 216 entitled Methods and Apparatus for Transcoding Metadata and filed on Sep. 24 2010 which is a continuation of U.S. patent application Ser. No. 10 540 611 entitled Methods and Apparatus for Transcoding Metadata and filed on Jun. 24 2005 which is a U.S. national stage application of International Patent Application Serial No. PCT US03 14970 entitled Methods and Apparatus for Transcoding Metadata and filed on May 13 2003 which claims priority from U.S. Provisional Application Ser. No. 60 436 714 entitled Transcoding of Metadata and filed on Dec. 27 2002. U.S. patent application Ser. Nos. 10 540 611 and 12 890 216 International Patent Application Serial No. PCT US03 14970 and U.S. Provisional Application Ser. No. 60 436 714 are hereby incorporated by reference in their respective entireties.

This disclosure relates generally to transcoding and more particularly to methods and apparatus for transcoding metadata.

Through the advancement of technology media content is finding its way into homes by various non traditional means. For instance with the advent of broadband data connections media content is now being supplied to homes via the Internet and other digital distribution sources as well as the traditional means of television and radio broadcasts. In addition home networking standards such as HAVi and wired and wireless protocols such as IEEE 1394 IEEE 802.11 ultra wide band UWB cellular and pager networks and Bluetooth now allow a variety of different media consumption devices to communicate via a home network. Thus media content received at a home can be distributed via a home network for display on any of the media consumption devices connected to the home network.

These advancements in home networking and media content delivery mechanisms provide users with enhanced access to media content but also present new challenges for measuring the consumption of media content. More specifically conventional media consumption meters are typically configured to measure media signals consumed in a particular format by a specific type of media consumption device. For example television content consumption is measured using meters adapted to measure signals formatted for television. Likewise computer content consumption is measured using meters adapted to measure signals formatted for a computer. Although this approach works well for media consumption devices that are not networked together it does not allow for media consumption measurement in a home networked environment because of the manner in which media content is transmitted via a home network. Specifically a home network typically comprises a variety of media consumption devices that are networked together and that are each adapted to process media provided in a particular format. To enable communication between the networked devices home networks include one or more transcoders that transcode or convert media content signals transmitted via the home network between the various signal formats required by the networked devices. For example a typical home network may be configured to include a television coupled to a computer with a transcoder disposed between the television and the computer. Media content that is received at the television and then selected for viewing at the computer is converted by the transcoder from a television format to a computer format so that the media content received at the television can be processed for display viewing at the computer.

Unfortunately the format conversion process performed by home network transcoders to enable communication between dissimilar devices also causes the corruption or loss of valuable audience measurement data. More specifically data that enables media consumption measurement is embedded into media content by media content providers. The data is then extracted by media content consumption meters for use in determining the identity of the media content as well as other information about the media content which can then be reported for purposes of measuring consumption of that media content. However home network transcoders are not adapted to convert this embedded data into a format suitable for use by downstream consumption measuring devices and as a result the embedded data is either stripped from the media content or corrupted during the transcoding process. Consequently consumption of the converted media content cannot be accurately measured.

Referring to a home network includes a plurality of media consumption devices each representing one of a variety of devices including for example a TV a radio a personal computer a personal digital assistant PDA a telephone and a digital video disk DVD player a personal video recorder PVR . Each of the media consumption devices are adapted to receive media content from one or more different media sources collectively represented in as a media content cloud . The content provided by the media content cloud may include for example broadcast content streaming or web content from the Internet or content supplied by a local device such as for example a DVD player a video cassette recorder VCR a media server or any other local source. The media consumption devices are in communication with each other such that media content transmitted via the home network may be consumed via the media consumption devices may be shared between multiple media consumption devices or may be stored on a media storage database also coupled to the home network for later retrieval and consumption. The home network may be configured in either a wired or wireless manner. In some embodiments the home network may include a combination of both wired and wireless communication.

To enable audience measurement a set of content consumption metering devices hereinafter meters are also coupled to the home network and are adapted to measure the content consumed by the media consumption devices . Each of the meters may be configured to meter a single one of the media consumption devices or may be configured to meter multiple media consumption devices . Additionally each meter may be adapted to operate independently or each may instead be adapted to operate under the control of a master or central metering unit not shown . The meters may be coupled to the network wirelessly or in a wired fashion. For example if the meter is implemented as a portable meter to be carried by a household member for purposes of measuring the consumption habits of that household member then the meter will likely communicate with the network wirelessly. Such communication may be as limited as receiving codes from a media consumption device or may be as robust as two way communication between the portable meter and other network devices. Audience measurement data collected by each meter is supplied to a measurement collection unit where the data is either analyzed or stored for later transmission to a remote data collection facility not shown for analysis. The measurement collection unit may be disposed within the same residence as the home network or may instead be disposed outside of the residence that houses the home network . As can be seen in the meters may be separate from or integral with the media consumption devices being metered.

Referring still to a set of transcoders are coupled to the home network at various locations and are configured to transcode or convert media content transmitted via the home network between one or more formats thereby causing the media content to be suitable for consumption by one or more of the media consumption devices . In an example configuration the transcoders are adapted to receive media content from one or more of the media consumption devices to transcode the media content and to provide the transcoded media content for consumption to one or more of the media consumption devices according to a method described in greater detail below.

A home network media server coupled to and in communication with the home network media storage database may be adapted to control communication on the home network may be adapted to function as a media content consumption device and may be further adapted to receive content from the media cloud . The home network media server may provide content to the various devices coupled to the home network by streaming the content pushing the content allowing the content to be downloaded or by any other manner. Additionally the home network media server may act as a central repository for all of the media content that is consumed in the home network . Alternatively the media content may be received at any of the media consumption devices and then supplied to the home network for consumption viewing display at any of the other media consumption devices .

As will be appreciated by one having ordinary skill in the art the home network may be configured in any desired manner and may include any number of network devices. Moreover the devices coupled to the home network may communicate and interface in any desired manner including for example using either a wired or wireless communication protocol such as HAVi Wi Fi BlueTooth IEEE 1394 DVI HDMI or any other high speed interface protocol or using an Ethernet protocol.

Referring now to in an example embodiment each meter is equipped with a processor which executes a set of instructions stored in a memory to control the operation of the meter and a home network interface that allows communication between the meter and the other devices coupled to the home network and that may be implemented using for example a software application program interface API . As will be appreciated by one having ordinary skill in the art the home network interface may be implemented using any type of device capable of translating between a communication protocol used by the home network and a communication protocol used by the processor disposed in the meter . In addition each meter includes one or more interfaces for interfacing with other devices and one or more sensors for sensing media content consumption. The interfaces may include for example an interface adapted to communicate with a people meter that senses the presence of one or more network users audience members and or a data collection interface adapted to communicate with the collection measurement unit . The sensors supply sensed information to the processor which processes the information and causes the information to be transmitted to the measurement collection unit via the home network . The measurement collection unit then transmits the data to a remote data collection facility not shown for analysis. In addition the processor is adapted to respond to queries sent by the transcoder via the home network . Alternatively the measurement collection unit need not be coupled to the home network but may instead be adapted to receive media consumption measurement data directly from the meters via one or more data collection interfaces disposed in one or more of the meters .

The sensors associated with each meter are adapted to sense the type of output signals supplied by a corresponding media consumption device and may be implemented using for example a microphone for sensing audio signals a video sensor for sensing video signals and or a digital data sensor for sensing data supplied in a digital bitstream. Due to the plurality of sensor types that may be installed in the meters the meters may be adapted to sense a variety of signals and may be further adapted to recognize and process a variety of codes embedded in such signals. These codes may include video based codes such as closed captioning automated measurement of lineup AMOL interactive television triggers in the vertical blanking interval VBI of a traditional NTSC or PAL television signal imperceptible codes in active analog digital video and codes included in the user data of digital video packets to name a few. In addition these codes may include inaudible audio codes auxiliary data codes digitally compressed audio packets as well as information in digital packets containing program guide information such as PSI PSIP and A 90 data packets. Such codes may be formatted using existing broadcast standards or may instead be formatted according to standards that are currently being developed or that will be developed in the future such as for example the standard recently developed by the BBC and presented to TV Anytime the content identifier standard being developed by ATSC called Versioned ISAN VISAN and the standard known as AD ID that was recently defined by the American Association of Advertising Agencies. Instead of or in addition to sensing signals containing codes associated with media content one or more of the sensors may be adapted to receive signals that indicate usage of a computer software application. For example one or more of the sensors may be adapted to monitor a computer software application that controls access to the database to determine for example how often particular media content is being transferred into or out of the database .

The codes are transmitted as metadata via the media signal. The metadata may include a variety of information associated with the media content such as for example content identification information source identification information SID destination device identification information distribution channel identification information and or data and timestamps identifying the creation and or transmission dates of the media content. Metadata may additionally include signal characteristics such as frequency format signal strength bitrates frame rates and sampling frequency to name a few. The signal format information may be used to transcode the signal from a first format to a second format to enable consumption of the signal at a consumption device that is able to recognize and process the second format.

As will be appreciated by one having ordinary skill in the art the meters may be implemented using any combination of software and hardware adapted to perform core metering functions such as receiving and processing consumption data and supplying the consumption data to a central data collection facility. As will further be appreciated by one having ordinary skill in the art existing media consumption metering technology spans from the very simple to the complex. Yet the present invention is not limited to use with either type of metering technology but instead may be used with a variety of meters having a range of complexity. For example the meters used with the present invention may be capable of communicating via the home network as well as metering media consumption or the meters may instead be standalone devices that are configured to meter a particular type of media consumed via a particular type of media consumption device . In addition the meters may be implemented as simple hardware based devices that collect channel tuning information or as more sophisticated software based devices that perform intelligent data collection and processing functions.

The location of each of the meters within the home network depends on the type of metering to be performed. For example if the meter is adapted to perform metering by sensing a signal output by one of the media consumption devices such as an audio or video signal then the meter is typically positioned near that content consumption device so that it may access the signal to be metered. If instead the meter is adapted to meter a signal supplied by the transcoder then the meter need not be positioned in close physical proximity to the media consumption device but must be either proximate to the transcoder or arranged to remotely receive the signal output by the transcoder . Of course in the latter embodiment the meter detects the flow of signals through the transcoder instead of the consumption of those signals by a media content consumption device . Such an arrangement may be especially useful with a meter adapted to detect the flow of signals through the transcoder and having a software application interface not shown adapted to query the transcoder about the media content being transcoded.

Referring to the transcoder of the present invention is adapted to transcode both media content and metadata transmitted with the media content and may be implemented to include a home network interface an input media demultiplexer a processor a memory an output media codec an encode manager and an audio video watermark codec that is adapted to detect watermarks and to encode new watermarks. The various components included in the transcoder are controlled by the processor which executes a set of software instructions stored in the memory and each transcoder component may be implemented using software firmware hardware of any combination thereof. For example commercially available devices may be used to implement any of the transcoder components provided that the functionality of each device has been modified as needed to operate as described herein. In addition one or more of the components such as the encode manager may be implemented as software routines stored in the memory and executed by the processor .

Referring also to the transcoder may be adapted to perform a method that enables the transcoder to transcode media content and accompanying metadata received from a first media consumption device coupled to the home network such as a television and to supply the transcoded media content and accompanying metadata to a second media consumption device such as a personal computer also coupled to the home network . The method may be performed by the various components of the transcoder as described below operating under the control of the processor which executes a set of software instructions stored in the memory . In an example embodiment the method may begin when the transcoder receives media content at the home network interface block . The home network interface disposed in the transcoder enables communication between the transcoder and the other devices in the home network . As described with respect to the home network interface disposed in the meter the home network interface disposed in the transcoder may be implemented using any type of device capable of translating between the communication protocol used by the home network and the communication protocol used by the processor disposed in the transcoder . Also at the block the home network interface stores the media content in the memory .

After the media content has been stored in the memory the input media demultiplexer demultiplexes the media content to extract the metadata transmitted therewith block . The media content received at the home network interface need not be stored before being demultiplexed by the demultiplexer but may instead be delivered by the home network interface to the demultiplexer as the media content arrives at the transcoder . The demultiplexer may demultiplex the media content as it is received and then cause the demultiplexed content i.e. the media content and the extracted metadata to be stored in the memory . The method may then continue with the encode manager examining the extracted metadata to identify a media format Format A in which the media content was supplied to the transcoder by the television block . For example the metadata may indicate that the media content received at the transcoder is formatted as a television broadcast signal such that Format A is a standard broadcast television signal format such as for example an NTSC signal. In addition the encode manager examines the metadata to identify a metadata format Format A1 in which the metadata extracted from the media content is formatted. In this example embodiment the transcoder is described as being adapted to examine the incoming media content and metadata to determine the identities of Format A and Format A1. The ability of the transcoder to make such a determination is especially useful for transcoders adapted to receive media content and metadata from a variety of media consumption device types. If instead the transcoder is configured within the home network to receive media content and metadata from only a single media consumption device type then the transcoder may be pre programmed with the identities of Format A and Format A1 such that the encode manager need not determine the identities of Format A and Format A1 block .

Next the encode manager determines a media format Format B associated with the second network device to which the transcoded media content shall be delivered for consumption block . By way of example the personal computer may have a Windows operating system and a Windows media player such that the media content must be supplied to the personal computer in a streaming media format suitable for display via the Windows media player. Thus for this example media Format B is a streaming media signal format. The encode manager may be pre programmed with the media format used by the personal computer i.e. Format B such that the encode manager retrieves this format information from the memory . Alternatively the encode manager may be configured to query the personal computer to obtain media Format B. In addition the encode manager also identifies a metadata format Format B1 to which the extracted metadata shall be transcoded before delivery to the personal computer block . Format B1 is the metadata format recognized by the meter configured to measure media consumption at the personal computer. The encode manager may be pre programmed with the identity of the metadata format Format B1 or the encode manager may be adapted to obtain the identity of Format B1 from the meter associated with the personal computer by performing one or more of a set of querying methods described in greater detail below.

Once the encode manager has identified the applicable media formats Formats A and B and the applicable metadata formats Format A1 and B1 the method continues with the encode manager instructing the output media codec to transcode the media content from Format A to Format B and the extracted metadata from Format A1 to Format B1 and providing the output media codec with the parameters needed to perform such transcoding functions block . In addition the encode manager supplies the output media codec with instructions and parameters necessary for combining the transcoded metadata with the transcoded media content to form an output media signal for subsequent delivery to the personal computer. Lastly the transcoded media signal having the transcoded metadata embedded therein is supplied by the transcoder to the personal computer for consumption thereat block .

As will be appreciated by one having ordinary skill in the art methods for performing transcoding functions that convert a signal from a first media format to a second media format are well known in the art. For example the transcoder may be adapted to convert a signal containing media content from a broadcast format to any of a 1 streaming media format 2 JPEG format e.g. deriving a still picture from a movie for use in a digital photo frame 3 MP3 format e.g. playing a soundtrack to a broadcast movie and or 4 a digital video recorder format. Alternatively the transcoder may be adapted to convert a signal from a digital video recorder format to any of a 1 streaming media format 2 MP3 format and or 3 a JPEG format. By way of further example the transcoder may be adapted to convert a signal from a streaming media format to either of a 1 JPEG format and or 2 MP3 format. As will further be appreciated by one having ordinary skill in the art any of these well known transcoding techniques may be adapted to enable transcoding of the metadata from a first metadata format to a second metadata format.

As will further be appreciated by one having ordinary skill in the art the metadata formats may be configured in a variety of different ways and in some instances the metadata formats may be at least partially dependent on the media format of the media content associated with the metadata. For example if the media content associated with the metadata is provided in a broadcast television media format then the metadata format will likely be formatted to include data fields related to broadcast television. Referring now to Format A1 if associated with a digital broadcast television media format such as for example ATSC may include a set of fields for containing a variety of broadcast television signal information such as a minor channel number a major channel number a transport ID a name of a program transmitted in the media content a program number a program description a source ID a date time stamp a transport rate a video bitrate an audio bitrate an audio sampling rate and a video frame rate . In this example the minor channel number and major channel number are each 10 bits long the transport ID is 16 bits long the program name is represented as a sequence of one to seven 16 bit character codes coded in accordance with the Basic Multilingual Plane BMP of Unicode as specified in ISO 10646 1 the program number is 8 bits long the program description is represented as a sequence of one to seven 16 bit character codes coded in accordance with the Basic Multilingual Plane BMP of Unicode as specified in ISO 10646 1 the source ID is 16 bits long and the date time stamp is a 32 bit long number in UTC format.

In contrast metadata associated with media content that is to be supplied in a streaming media format for consumption display at a personal computer will likely be formatted as a data header including data fields for containing information about the media content in a digital data format. Thus for example Format B1 may include fields for containing information such as the program name the program number the program description a source ID a broadcast date time stamp a transcoded date time stamp an author a device ID a home ID a format a video bitrate an audio bitrate an audio sampling rate and a video frame rate . In addition the data fields of Format B1 may be defined to include data in a specific code or a data string having a specific number of bits. For example the fields of Format B1 may be defined such that the program name is ASCII encoded the program number is 8 bits long the program description is ASCII encoded the source ID is identical in format to the source ID of Format A the broadcast date time stamp is the same as in the broadcast metadata the transcoded date time stamp is a 32 bit number reflecting the date and time of transcoding by transcoder the author field is an ASCII representation of the user of the transcoder the device ID is an 8 bit ASCII encoded number identifying the transcoder and the home ID is a 32 bit ASCII encoded number assigned to identify the home network . In addition to identifying Formats A1 and B1 the encode manager may be configured to generate the data contained in one or more of the fields of Format B1 including for example the data associated with the author device ID home ID and format fields.

The metadata format Format B1 may also be affected by the type of meter that will be used to collect the metadata for purposes of measuring consumption of the media content that is associated with the metadata. For example if the meter is configured to detect audio codes then the metadata format Format B1 will be suitable for insertion into an audio signal and recognition by an audio code meter and or if the meter is configured to detect video codes then the metadata format Format B1 will be suitable for insertion into a video signal and recognition by a video code meter. Likewise if the meter is configured to detect digital data then the metadata format Format B1 will be suitable for insertion into a digital data stream and detection by a digital data sensor.

The transcoding capabilities of the transcoder may also vary depending upon the position of the transcoder within the home network . For example if the transcoder is positioned to receive input from multiple media consumption devices and to provide transcoded media content to multiple media consumption devices then the transcoder will likely be adapted to transcode media content between the multiple formats used by the media consumption devices coupled thereto. Alternatively if the transcoder is positioned to receive input from a single media consumption device and to supply transcoded media content to a single media consumption device then the transcoder need only be adapted to transcode between the media formats used by the two media consumption devices configured to supply receive media content to from the transcoder .

Referring now to depending on the capabilities of the meter associated with the second network device e.g. the personal computer and whether one or more conditions are satisfied as is described in greater detail below the method may be expanded to include a submethod identified generally with reference numeral for causing the audio video watermark codec to insert a watermark into the media content in a manner that causes the inserted watermark to be imperceptible to the human senses so that the inserted watermark does not interfere with the consumption of the media content at the personal computer. In such an arrangement the encode manager may use the metadata associated with the media content to identify the media content and then cause the audio video watermark codec to generate a watermark that uniquely represents that media content and to insert the watermark into the transcoded media content block . Next the transcoder supplies information that correlates the identity of the media content with the unique watermark to the meter which may be adapted to transmit this correlation information directly to a remote data collection facility not shown or via the measurement collection unit see block . Alternatively the transcoder may be adapted to supply this correlation information directly to the measurement collection unit via the home network . When the media content having the inserted watermark is consumed at the personal computer and the meter associated with the personal computer extracts the watermark and reports the presence of the watermark to the measurement collection unit or the remote data collection facility the data collection facility may use the correlation information to determine the identity of the consumed media content based on the reporting of the unique watermark.

Referring again to it should be understood that not all of the transcoding functions need to be performed by a single network component but may instead be performed by any of the consumption devices or any other network device or combination of network devices provided that such devices are adapted to perform the transcoding functions described herein. For example the transcoder may be configured to demultiplex an incoming media content signal to separate the metadata contained in the signal from the programming or other media content as described with respect to . Alternatively a media consumption device may be configured to perform this demultiplexing function such that the metadata extracted thereby is transmitted to the transcoder separately from the media content. Likewise any of the media consumption devices may be configured to decode or otherwise process the media content signal before the signal is transmitted to the transcoder . For example any of the media consumption devices may be configured to receive and demodulate downconvert a digitally compressed broadcast signal provided in an ATSC DVB or MPEG format via an RF transmission. Any of the media consumption devices may further be configured to include a demultiplexer that demultipexes the demodulated bitstream to obtain a set of elementary components including an elementary video stream an elementary audio stream and the metadata transmitted in the broadcast. The elementary video and audio streams may then be decoded by an MPEG AC3 audio decoder and an MPEG video decoder respectively both of which may also be disposed in any of the media consumption devices . The decoded video and audio streams may subsequently be transmitted to the transcoder for transcoding in accordance with the blocks of the method shown in described above. After the transcoding has been performed the transcoder may be adapted to yield a streaming media signal that may be delivered to one of the media consumption devices configured to consume display streaming media or may instead be stored in the memory by the server for consumption at a later time. In addition the meter used to meter the media consumption device at which the streaming media is consumed may be configured to receive the transcoded metadata directly from the transcoder or may instead be configured to extract the transcoded metadata embedded in the streaming media signal delivered by the transcoder as it is consumed by the media consumption device .

Referring still to in an embodiment in which the transcoder supplies the transcoded metadata directly to a first meter the transcoder may be disposed in or in communication with a second meter configured to meter consumption at a media consumption device . The second meter may be implemented using for example a set top box that is configured to meter consumption of television programming via for example a television . In this embodiment the set top box collects metadata as the corresponding television programming is consumed at the television . The set top box then supplies the collected metadata to the transcoder which transcodes the metadata from the first format Format B1 to the second format Format B2 suitable for delivery to and reception at the first meter . The transcoder may be integrated with the set top box disposed within the set top box or separate from but in communication with the set top box . The first meter may be implemented using for example a portable meter designed to collect audio codes or designed to collect data transmitted wirelessly using any wireless protocol. Of course if the first meter is designed to receive data wirelessly using a wireless protocol such as Bluetooth then the transcoder will be configured to transcode the metadata to a Bluetooth format and the second meter will be configured to transmit the data in Bluetooth format. The portable meter may be configured to be carried by a household member for purposes of metering that household member s viewing habits. The portable meter may additionally be configured to meter media consumption by that household member that occurs out of the home by detecting audio codes emitted by media consumption devices disposed outside the home and may be configured to detect media consumption within the home by wireless reception of transcoded metadata from the set top box as described above. Alternatively the portable meter may be designed to detect audio codes emitted by the television as well as metadata transcoded and transmitted by the set top box such that the portable meter receives two sets of data representing the same viewing event while disposed in the home. These two data sets may then be compared for consistency to increase confidence in the accuracy of the data. Of course the two data sets must be treated such that the sets are only counted as a single viewing event. In another example embodiment the set top box may configured to supplement the code capturing capabilities of the portable meter by detecting codes that are not detectable by the portable meter by transcoding such codes to a format suitable for detection by the portable meter and by then supplying the transcoded codes to the portable meter . In such an embodiment the portable meter may be designed to detect a first type of code such as an SID emitted by the television but not a second type of code such as a time stamp. The set top meter may be designed to detect either or both of the first and second types of code. For example the set top meter may detect the SID and the time stamp emitted by the television and may transcode the SID and timestamp to a format suitable for reception processing by the portable meter . Thereafter the set top meter may transmit one or both of the transcoded time stamp and SID to the portable meter via for example radio frequency signals infra red signals Wi Fi signals audio signals etc. Of course the set top and portable meters will have to be equipped to communicate using such signals.

The transcoder may be pre programmed with the identity of Format A1 and Format B1 such that the transcoder may automatically convert metadata received at the transcoder from Format A1 to Format B1. In fact such an arrangement may be preferred when the transcoder is adapted to receive media in a single format only and to transmit data in a single format only. Alternatively referring also to as mentioned above the transcoder may be adapted to perform a variety of methods to query one or more networked meters for information about the detection capabilities of the meters so that the format in which the metadata is to be supplied to the meters i.e. Format B1 can be determined. For example one such method may comprise a set of submethods each submethod designed to test for the presence of a different type of sensor. The first such submethod may test for the presence of an audio sensor capable of sensing audio watermarks and may begin when the transcoder queries the meter to determine whether it includes an audio watermark sensor block . If the meter responds to the query in the negative i.e. the meter does not have an audio watermark sensor then the transcoder bypasses the remainder of the submethod and instead proceeds to additional submethods for testing whether the meter includes one or more other types of sensors as described in greater detail below with reference to .

If instead in response to the query performed at the block the meter responds in the positive i.e. the meter does have an audio watermark sensor then the submethod continues with the transcoder determining whether an audio watermark has been detected in the media content supplied to the transcoder for transcoding block . If an audio watermark is not detected in the media content then the transcoder creates a new audio watermark and causes the new audio watermark to be embedded into the media content block . As will be appreciated by one having ordinary skill in the art the audio video watermark codec may be configured to detect the presence of an audio watermark supplied in the media content and to create a new audio watermark for insertion in the content. Moreover the capabilities and functionality of a standard audio video watermark codec are well known in the art are not described further herein. The transcoder may also cause all or a portion of the submethod described with respect to to be performed thereby causing correlation information to be generated and transmitted to the measurement collection unit and or a remote data collection facility where it may be used to correlate the watermark to the program or other content it represents.

If an audio watermark has been detected at the block then the transcoder determines whether the audio watermark if inserted into the signal to be output by the transcoder will survive the compression performed by the output media codec block . Specifically the output media codec is adapted to compress the media content signal having the inserted watermark before the signal is transmitted via the home network . The output media codec compresses the signal by suppressing one or more of the signal frequencies. However watermarks are created by modulating a particular set of signal frequencies in a manner such that the modulated frequencies uniquely represent a particular program or other media content. Thus the compression performed by the output media codec may cause one or more of the frequencies modulated to create the watermark to be suppressed thereby causing the audio watermark to be unrecoverable by the meter . The transcoder may be adapted to perform a variety of methods for determining whether the watermark will survive compression by the output media codec . For example the transcoder may cause the output media codec to insert the watermark into the media content and the resulting signal may be processed by the transcoder in much the same way an input signal would be processed to determine whether the audio watermark is recoverable. In another embodiment the transcoder may be pre programmed with information pertaining to signal compression ratios that the watermark will be able to withstand survive. Specifically before inserting a particular watermark into a media content signal the watermark may be tested to determine a range of suitable signal compression ratios i.e. compression ratios that the watermark will survive. These suitable ratios may then be provided to the manufacturers developers of the transcoder and used to pre program the transcoder so that when watermarks are encountered the transcoder may use the pre programmed information to compare to the ratio used by the output media codec to determine whether the compression ratio used by the output media codec is suitable inserting and for transmitting the watermark in a recoverable distortion free manner. In a still further embodiment information about suitable compression ratios may be transmitted with the signal containing the watermark and extracted from the signal by the transcoder for use in determining whether the watermark will survive the compression ratio used by the output media codec . If the audio watermark will survive then the sub method causes the output media codec to insert the watermark block if it is not already inserted after which the submethod is complete and the method continues at another submethod described below with respect to and .

If at the block the transcoder determines that the compression ratio used by the output media codec is not suitable i.e. will cause the watermark to be unrecoverable then the transcoder may decrease the compression ratio by a desired amount. As will be understood by one having ordinary skill in the art the compression ratio refers to the ratio of the data in the uncompressed signal to the data in the compressed signal. In addition the signal compression ratio is inversely related to the output bit rate i.e. as the compression ratio decreases the output bit rate increases. Thus if the compression ratio is too high and would cause the watermark to be unrecoverable then the transcoder may decrease the compression ratio of the output media codec by increasing the output bit rate of the output media codec by a desired amount such as for example 30 Kb sec block . After increasing the output bit rate the transcoder determines whether the new increased output bit rate exceeds the maximum allowable bit rate supported by the home network block . As will be appreciated by one having ordinary skill in the art if the bit rate is higher than that supported by the home network then the home network may not be able to carry the signal without causing it to be distorted. As a result the transcoder decreases the output bit rate to a value that is within the bandwidth of the home network block and the submethod returns to the block at which a new audio watermark is created and inserted into the media content as described above. As is also described above when the transcoder causes the output media codec to create a new audio watermark the transcoder may also perform all or a portion of the submethod shown in for causing correlation information to be created and transmitted to the meter for reporting to the remote data collection facility not shown .

If the output bit rate does not exceed the maximum rate supported by the home network block then the submethod returns to the block and the blocks subsequent thereto at which the transcoder again tests to determine whether the codec compression ratio is suitable for transmission of the watermark as described above.

Referring also to which includes a continuation of the flow chart of as indicated by the alignment points A after performing the submethod for detecting the presence of an audio watermark sensor a submethod for determining whether the meter has a sensor capable of sensing an video watermark may be performed. The submethod for detecting the presence of a video watermark sensor begins when the transcoder queries the meter to determine whether it includes a video watermark sensor block . If the meter responds to the query in the negative i.e. the meter does not have a video watermark sensor then the transcoder proceeds to additional submethods for testing whether the meter includes one or more other types of sensors as described in greater detail below with reference to . If instead in response to the query performed at the block the meter responds in the positive i.e. the meter does have a video watermark sensor then the submethod continues with the transcoder querying the meter to determine whether a video watermark has been detected in the media content supplied to the transcoder for transcoding block . If a video watermark is not detected in the media content then the submethod may continue at a block at which the transcoder creates a new video watermark and causes the new video watermark to be inserted into the media content. As discussed above the capabilities and functionality of a standard audio video watermark codec are well known in the art and are not described further herein. The transcoder may also cause all or a portion of the submethod described with respect to to be performed thereby causing correlation information to be generated and transmitted to the measurement collection unit and or a remote data collection facility not shown where it may be used to correlate the watermark to the program or other content it represents.

If a video watermark has been detected at the block then the transcoder determines whether the video watermark if inserted into the signal to be output by the transcoder will survive the compression performed by the output media codec block . Specifically the output media codec is adapted to compress the media content signal having the inserted watermark before the signal is transmitted via the home network . The output media codec compresses the signal by suppressing one or more of the signal frequencies. However watermarks are created by modulating a particular set of signal frequencies in a manner such that the modulated frequencies uniquely represent a particular program or other media content. Thus the compression performed by the output media codec may cause one or more of the frequencies modulated to create the watermark to be suppressed thereby causing the video watermark to be unrecoverable by the meter . The transcoder may be adapted to perform a variety of methods for determining whether the watermark will survive compression by the output media codec . For example the transcoder may cause the output media codec to insert the watermark into the media content and the resulting signal may be processed by the transcoder in much the same way that an input signal is processed to determine whether the video watermark is recoverable. In another embodiment the transcoder may be pre programmed with information pertaining to signal compression ratios that the watermark will be able to withstand survive. Specifically before inserting a particular watermark into a media content signal the watermark may be tested to determine a range of suitable signal compression ratios i.e. compression ratios that the watermark will survive. These suitable ratios may then be provided to the manufacturers developers of the transcoder and used to pre program the transcoder so that when watermarks are encountered the transcoder may use the pre programmed information to compare to the compression ratio of the output media codec to determine whether the compression ratio used by the output media codec is suitable for inserting and transmitting the watermark in a recoverable distortion free manner. In a still further embodiment information about suitable compression ratios may be transmitted with the signal containing the watermark and extracted from the signal by the transcoder for use in determining whether the watermark will survive the compression ratio used by the output media codec . If the video watermark will survive compression the submethod causes the output media codec to insert the watermark block into the media content if it is not already inserted after which the submethod is complete and the method continues at another submethod described below with respect to and .

If at the block the transcoder determines that the compression ratio of the output media codec is not suitable i.e. will cause the watermark to be unrecoverable then the transcoder may decrease the compression ratio by a desired amount. As will be understood by one having ordinary skill in the art the compression ratio refers to the ratio of the quantity of data in the uncompressed signal to the quantity of data in the compressed signal. In addition the signal compression ratio is inversely related to the output bit rate i.e. as the compression ratio decreases the output bit rate increases. Thus if the compression ratio is too high and would cause the watermark to be unrecoverable then the transcoder may decrease the compression ratio of the output media codec by increasing the output bit rate of the output media codec by a desired amount such as for example 30 Kb sec block . After increasing the output bit rate the transcoder determines whether the new increased output bit rate exceeds the maximum allowable bit rate supported by the home network block . As will be appreciated by one having ordinary skill in the art if the bit rate is higher than that supported by the home network then the home network may not be able to carry the signal without causing it to be distorted. As a result the transcoder decreases the output bit rate to a value that is within the bandwidth of the home network block and the submethod returns to the block at which a new video watermark is created for insertion into the media content as described above. As is also described above the block at which the transcoder causes the output media codec to create a new video watermark may also include all or a portion of the submethod shown in for causing correlation information to be created and transmitted to the meter for reporting to the remote data collection facility not shown .

If at the block the output bit rate does not exceed the maximum rate supported by the home network then the submethod returns to the block and the blocks subsequent thereto at which the transcoder again tests to determine whether the codec compression ratio is suitable for transmission of the watermark as described above.

In addition to testing for the presence of an audio watermark sensor and a video watermark sensor the transcoder may be adapted to query the meter to determine whether it includes other types of sensors as well such as digital sensors database sensors and or software sensors. Specifically with reference also to which includes a continuation of the flow chart of as indicated by the alignment points B such a submethod may begin with the transcoder querying the meter to determine whether it includes a sensor capable of parsing a digital bitstream to decode metadata embedded in the stream block . If the meter responds that it does include such a digital sensor then the transcoder causes the output media codec to encode the metadata received with the media content into the desired format block and to digitally insert the encoded metadata into the bitstream of the transcoded media content to be output by the transcoder block .

If the meter indicates that it does not include a digital sensor block then the method continues at a submethod at which the transcoder queries the meter to determine whether it includes a database sensor i.e. a sensor that can identify when media content is being read from a media database block . If such a database sensor is present then the submethod continues with the transcoder transcoding the metadata embedding the transcoded metadata in the transcoded media content and then causing the media content to be stored in a media database block .

If at the block a database meter is not detected then the method continues at a submethod for determining whether the meter includes a software sensor adapted to extract metadata from a media consumption device using software APIs associated with the consumption device e.g. DASE MHP API block . If such a software sensor is detected then the transcoder causes the output media codec to format the metadata in a manner suitable for extraction by the software sensor and to embed the metadata into the transcoded media signal that is output by the transcoder block .

If a software sensor is not detected then the transcoder may query the home network for the presence of other meters that are configured to meter the consumption device to which the transcoder supplies transcoded media content block . If another meter is detected then the transcoder may return to the beginning of the method and cause it to be performed again with respect to the newly detected meter . If another meter is not detected then the transcoder may forego repeating the method .

As described the method for querying a meter to determine the sensing capabilities of the meter actually comprises a set of sub methods each adapted to query the meter for a specific type of sensor. Although the sub methods are described as being performed in a specific order the sub methods may actually be performed in any desired order. Likewise the submethods may be performed in parallel instead of serially. In addition the transcoder need not be configured to perform all of the submethods of but may instead be configured to perform any combination of a subset of these sub methods. Moreover the transcoder may be configured to perform any number of additional sub methods as necessary to determine the sensing capabilities of the meter so that the metadata may be formatted accordingly.

The querying methods described above need not be performed at all if the transcoder is pre programmed with information about the sensing capabilities of the meter . In such an embodiment the meters need not be capable of communicating via the home network and need not even be coupled to the home network . Instead the meters need only be capable of metering consumption at a media consumption device .

Depending on whether frequent changes to the configuration of the home network are anticipated the transcoder may be adapted to perform the method every time new media content is received or only a single time e.g. upon installing the transcoder in the home network . Alternatively the transcoder may be adapted to query for sensor types only after the home network has been reconfigured. Of course all or portions of the submethods and for detecting the presence of an audio watermark sensor and a video watermark sensor respectively may need to be performed every time media content is supplied since at least portions of the submethods and operate to test for the presence of an audio watermark or a video watermark supplied with the media content.

The submethods of are described as including blocks at which the transcoder determines whether a particular type of sensor is detected and if such a sensor type is detected then causes the metadata to be transcoded in a manner suitable for detection by that sensor type and then proceeds to perform tests for a different type of sensor. However the submethods may instead be structured such that the transcoder first detects the presence or absence of each type of sensor and then after each sensor type has been detected causes the metadata to transcoded in a manner suitable for the detected sensor types. In addition the metadata may be transcoded into more than one metadata format thereby enabling detection by more than one type of sensor.

As described herein the media content and its corresponding metadata received at the transcoder are stored in the memory device and accessed by the various transcoder components for purposes of transcoding the media content and metadata. Instead the transcoder may include a plurality of memory devices arranged as registers associated with the various components of the transcoder between which the data may be transferred. Alternatively the transcoders may be adapted to process and store the media content and metadata in any desired manner.

The home network although described as being disposed within a home residence may instead be disposed at any type of location and may be configured to enable communication between network devices located at any number of different locations. For example the home network may be installed in a place of business or at any public location. Any network that enables communication between multiple media consumption devices is sufficient to qualify as a home network as that term is used herein.

As will be appreciated by one having ordinary skill in the art if the consumption device is metered using only a single meter and that single meter is limited to signature sensing only then any metadata extracted from the media content need not be transcoded at the trancoder because signature metering involves capturing signal characteristic information i.e. signature information and does not involve the extraction of codes. Thus the querying method of does not illustrate querying for the presence of a signature sensor. Or as is more often the case a consumption device may be metered using multiple meters one of which is capable of sensing signatures. In a system configured in this manner metadata transcoding will likely be required as signature sensing is more often used as a back up sensing mechanism instead of a primary sensing mechanism. Thus the transcoders will not typically be configured to forego metadata transcoding functions upon the detection of a meter having signature sensing capabilities.

The transcoder may additionally be adapted to query the media content consumption device that supplies media content to the transcoder for identification purposes such as for example device type and or model information and the transcoder may then transmit this identifying information to the meter configured to measure consumption at the media consumption device to which the transcoder delivers the transcoded media content.

While the present invention has been described with respect to several embodiments it is to be understood that the invention is not limited to these disclosed embodiments. To the contrary the invention is intended to cover various modifications and equivalent arrangements included within the spirit and scope of the appended claims. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all such modifications and equivalent structures and functions.

