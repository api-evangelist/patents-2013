---

title: Channel width configuration based on network conditions
abstract: A method includes determining an optimized channel width between client devices and access points based on network conditions in a wireless network. In particular, the channel widths may be optimized to reduce airtime usage on access points and eliminate a high density condition while the client devices are steered to access points that provide the greatest channel capacity gains based on signal-to-noise-ratios for each spatial stream in a beamformed transmission.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09467873&OS=09467873&RS=09467873
owner: Aruba Networks, Inc.
number: 09467873
owner_city: Sunnyvale
owner_country: US
publication_date: 20130405
---
This application claims priority under 35 U.S.C. 119 from U.S. Provisional Patent Application No. 61 793 179 entitled Dynamic Access Point Configuration Based on Network Conditions filed on Mar. 15 2013 the entirety of which is incorporated herein by reference. This application is related to co pending U.S. patent application Ser. No. 13 857 314 entitled Dynamic Beamforming Configuration Based on Network Conditions filed on Apr. 5 2013 the entirety of which is incorporated herein by reference.

The present disclosure relates to configuring access points based on network conditions. In particular the present disclosure relates to determining an optimized channel width between client devices and access points based on network conditions in a wireless network.

Over the past decade there has been a substantial increase in the use and deployment of wireless network devices from dual mode smartphones to tablet devices capable of operating in accordance with a particular Institute of Electrical and Electronics Engineers IEEE standard. With wireless becoming the de facto medium for connectivity among users it has become increasingly important for access points to manage connections intelligently with a plurality of client devices to maintain high throughput and to avoid overprovisioning.

Currently several variants of IEEE 802.11 standards support multiple channel widths and optional beamforming capabilities. Network administrators are often forced to painstakingly individually adjust these parameters to increase network performance.

The approaches described in this section are approaches that could be pursued but not necessarily approaches that have been previously conceived or pursued. Therefore unless otherwise indicated it should not be assumed that any of the approaches described in this section qualify as prior art merely by virtue of their inclusion in this section.

In the following description for the purposes of explanation numerous specific details are set forth in order to provide a thorough understanding. One or more embodiments may be practiced without these specific details. Features described in one embodiment may be combined with features described in a different embodiment. In some examples well known structures and devices are described with reference to a block diagram form in order to avoid unnecessarily obscuring the present invention.

Herein certain terminology is used to describe features for embodiments of the disclosure. For example the term digital device generally refers to any hardware device that includes processing circuitry running at least one process adapted to control the flow of traffic into the device. Examples of digital devices include a computer a tablet a laptop a desktop a netbook a server a web server authentication server an authentication authorization accounting AAA server a Domain Name System DNS server a Dynamic Host Configuration Protocol DHCP server an Internet Protocol IP server a Virtual Private Network VPN server a network policy server a mainframe a television a content receiver a set top box a video gaming console a television peripheral a printer a mobile handset a smartphone a personal digital assistant PDA a wireless receiver and or transmitter an access point a base station a communication management device a router a switch and or a controller.

One type of digital device referred to as an access point is a combination of hardware software and or firmware that is configured to control at least 1 channel widths between access points and client devices and 2 beamforming characteristics between access points and client devices.

It is contemplated that a digital device may include hardware logic such as one or more of the following i processing circuitry ii one or more communication interfaces such as a radio e.g. component that handles the wireless data transmission reception and or a physical connector to support wired connectivity and or iii a non transitory computer readable storage medium e.g. a programmable circuit a semiconductor memory such as a volatile memory such as random access memory RAM or non volatile memory such as read only memory power backed RAM flash memory phase change memory or the like a hard disk drive an optical disc drive etc. or any connector for receiving a portable memory device such as a Universal Serial Bus USB flash drive portable hard disk drive or the like.

Herein the terms logic or logic unit are generally defined as hardware and or software. For example as hardware logic may include a processor e.g. a microcontroller a microprocessor a CPU core a programmable gate array an application specific integrated circuit etc. semiconductor memory combinatorial logic or the like. As software logic may be one or more software modules such as executable code in the form of an executable application an application programming interface API a subroutine a function a procedure an object method implementation an applet a servlet a routine source code object code a shared library dynamic load library or one or more instructions. These software modules may be stored in any type of a suitable non transitory storage medium or transitory computer readable transmission medium e.g. electrical optical acoustical or other form of propagated signals such as carrier waves infrared signals or digital signals .

Lastly the terms or and and or as used herein are to be interpreted as inclusive or meaning any one or any combination. Therefore A B or C or A B and or C mean any of the following A B C A and B A and C B and C A B and C. An exception to this definition will occur only when a combination of elements functions steps or acts are in some way inherently mutually exclusive.

In one embodiment client devices are digital devices that include a hardware processor memory hierarchy and input output I O interfaces including a wireless interface such as an IEEE 802.11 wireless interface. The wireless interface may be used to communicate with access points and or controller . Client devices may include one or more antennas for establishing one or more concurrent spatial data streams with an access point . Client devices may be wireless electronic devices capable of receiving video voice and or other data streams. Such wireless electronic devices may include but are not limited to personal computers laptop computers netbook computers wireless music players portable telephone communication devices smart phones tablets digital televisions etc.

Access points may be any devices that can associate with client devices to transmit and receive data over wireless channels . In one embodiment access points may correspond to a network device such as a wired access port a wireless access port a switch a router or any combination thereof. For example access point may be a router or any device that may be configured as a hotspot e.g. a cell phone a tablet a laptop etc. . Access points may be communicatively coupled to other networks such as external network via a transmission medium to send and receive data. The data may include for example video data and or voice data. The transmission medium may be a wired or a wireless connection. Access points communicatively couple client devices to other client devices or other networks e.g. external network by forwarding data to or from client devices .

Data storage of access point may include a fast read write memory for storing programs and data during access point s operations and a hierarchy of persistent memory such as Read Only Memory ROM Erasable Programmable Read Only Memory EPROM and or Flash memory for example for storing instructions and data needed for the startup and or operations of access point . Data storage stores data that is to be transmitted from access point or data that is received by access point . In an embodiment data storage is a distributed set of data storage components.

In an embodiment I O interface corresponds to one or more components used for communicating with other devices e.g. client devices via wired or wireless signals. I O interface may include a wired network interface such as an IEEE 802.3 Ethernet interface and or a wireless interface such as an IEEE 802.11 WLAN interface. I O interface may communicate with client devices over corresponding wireless channels . Wireless channels may be of various widths which may be dynamically changed during operation. For example each wireless channel may be dynamically configured to operate at 20 MHz 40 MHz 80 MHz or 160 MHz. I O interface may include one or more antennas for communicating with client devices controller and other wireless devices in network . For example multiple antennas may be used for forming transmission beams to client devices through adjustment of gain and phase values for corresponding antenna transmissions. The generated beams may avoid objects and create an unobstructed path to client devices to possibly increase transmission capacity.

Hardware processor is coupled to data storage and I O interface . Hardware processor may be any processing device including but not limited to a MIPS ARM class processor a microprocessor a digital signal processor an application specific integrated circuit a microcontroller a state machine or any type of programmable logic array.

In an embodiment device configuration logic includes one or more functional units implemented using firmware hardware software or a combination thereof for configuring parameters associated with access point and client devices . Although device configuration logic is shown as implemented on access point one or more physical or functional components of device configuration logic may be implemented on separate devices. The device configuration logic may be configured to adjust 1 channel widths between access points and client devices and or 2 beamforming characteristics between access points and clients as will be described in further detail below.

Controller may be any device that can manage and configure access points and or client devices operating in network . For example as described in further detail below controller may configure one or more access points to 1 adjust channel widths between an access point and client devices and or 2 steer a client device to an access point that may provide increased capacity through the use of transmission beamforming. In one embodiment controller may correspond to a network device such as a wired access port a wireless access port a switch a router an access point or any combination thereof. For example controller may be an access point as described above in relation to .

Channel widths for wireless channels between access points and client devices in network may be adjusted to alleviate congestion caused by a high density condition. For example in a situation in which network is lightly loaded i.e. only a few client devices connected to corresponding access points network may be operating with maximum supported channel bandwidth. In the case of 802.11 ac capable access points and client devices this may result in the use of 160 MHz wireless channels between access points and client devices . However as network begins to become congested or hints at the future possibility of becoming congested e.g. a sudden increase in the number of client devices in network or an increase in airtime usage across one or more access points channel widths for one or more wireless channel may be reduced scaled down across each access point in network to fairly distribute bandwidth resources amongst client devices for each access point and reduce eliminate congestion.

In one embodiment a metric may be calculated for the determination of the desired channel width DCW for each access point . This DCW i may be the average channel width of the client devices associated with each access point are capable of implementing. In other embodiments the DCW i for each access point may be calculated based on different criteria. For example DCW i may be the largest channel width supported among all of the associated client devices . DCW i may be a matrix of constant values which may be calculated based on a target access point suitable for each client device as determined by one or more algorithms.

Based on the DCW i for each access point a channel width X i for each access point may be determined to alleviate a detected high density condition. Determination of the channel width X i for each access point may be formulated as a convex problem with a heuristic solution. The objective function for the convex problem may be given as 

In Equation 1 K is the base or the lowest spectrum width supported on network in megahertz. For example K may be equal to 20 indicating that the lowest channel width supported on network is 20 MHz. denotes the number of channels when the spectrum in the regulatory domain is broken into units of K megahertz. The term

In other embodiments the objective function described above Equation 1 may be translated into a linear problem by applying different constraints. For example the convex problem may be given as min DCW such that DCW 0 Equation 2

Method begins at operation with the detection of a high density condition on one or more access points in network . In one embodiment a high density condition may be defined as the average airtime on a particular access point being greater than a predefined threshold value e.g. 80 airtime usage and the access point has not already been reduced scaled down to a minimum channel width e.g. 20 MHz for an access point that supports 20 40 80 160 MHz channels widths . Network may be initially set up such that channel widths for each access point are originally set to the maximum configurable channel width e.g. 160 MHz for an access point that supports 20 40 80 160 MHz channels widths however after the detection of a high density condition the channel widths for one or more access points may need to be reduced scaled down as described below to ensure airtime usage does not reach capacity.

Although method is triggered based on the detection of a high density condition in network in other embodiments other triggers may be used. For example method may commence at operation upon the selection of a reset of network by a network administrator or controller .

Upon detection of a network condition where multiple clients are actively connected with multiple access points in the network e.g. a high density condition on one or more access points operation adds the high density access points to the set S. The set Swill be processed as described below to determine a channel width X for each access point within the set S.

At operation the set Sis sorted in increasing order based on the value DCW i X i for each access point in the set S where X i may represent the current channel width of access point the previously set channel width of access point or a default channel width value e.g. 160 MHz . As noted above DCW i is a desired channel width of access point . Sorting the set Sin increasing order based on the value of DCW i X i allows access points that are more significantly overprovisioned i.e. most separated from a desired channel width DCW to be processed and reassigned more appropriate channel widths first. Any sorting algorithm may be used to sort Sby controller including the bubble sort selection sort and quick sort algorithms.

At operation for each access point in set S the maximum channel width X i based on reuse is computed such that 

Neighbors i may indicate the number of one hop access point neighbors relative to access point and X i represents a new channel width that potentially will alleviate the high density condition. In other embodiments in which a more conservative channel width is desired Neighbors i may represent the number of two hop access point neighbors relative to access point . The value for X i should be computed for the channel widths available for a corresponding access point . For example for an access point with available channel widths of 20 40 60 80 160 MHz the value X i should be calculated to correspond to one of these discrete values. If the computation does not arrive at a supported channel width for an access point operation may round down to the appropriate channel width limits. As noted above operation is performed for each access point in set Ssuch that each access point in the set Sis assigned a new channel width X i .

Based on the computations at operation each access point in the set Sconfigures corresponding wireless channels to operate at the new channel widths X i at operation . In one embodiment controller may transmit the new channel widths X i to corresponding access points in the set Ssuch that each access point may adjust the channel width of associated wireless channels . In one embodiment device configuration logic and I O interface in each access point adjusts channel widths of associated wireless channels in response to receipt of new channel widths X i from controller .

At operation airtime across access points in the set Sis examined to determine if airtime usage has dropped for one or more access points . In one embodiment airtime usage across all access points in the set Smay be compared against the threshold value that defines a high density condition e.g. 80 airtime usage . If airtime usage has dropped below this threshold value and the high density condition has been overcome method may move to operation to await the detection of another high density condition on an access point in network . If at operation airtime usage across the access points in the set Sdoes not drop below the threshold value method moves to operation to perform post processing on access points in set S.

Post processing in view of a remaining high density condition begins at operation with the determination of the one hop neighbors for each access point in the set Sand assignment of these one hop neighbor access points to the set S. One hop neighbors are access points that are directly connected to a particular access point through a wireless channel . For example in access point has three one hop neighbors i.e. access points and while access point has two one hop neighbors i.e. access points and .

After creating the set S operation removes access points from the set Sthat are also in S. Removing access points from Sthat are also in Sallows method to determine channel widths X i for just one hop neighbors that have not already had their channel widths adjusted.

At operation a post processing flag is checked to determine if the one hop neighbors in the set Shave already been processed to adjust channel widths. Upon detection that the post processing flag has been previously set indicating that channel widths for these one hop neighbors have already be adjusted method moves to operation . At operation the flag is reset the sets Sand Sare cleared and the method moves to operation to await the detection of another high density condition on an access point in network .

Upon the detection that the post processing flag has not been set method moves to operation . At operation the set Sis set to equal the set Sand the operation moves to operation to begin adjustment of the channel widths of the one hop neighbors which are now stored in S. Additionally operation may set the post processing flag to indicate that one hop neighbors have been considered. This will ensure that the method only considers the one hop neighbors once as described above in relation to operation .

Using network shown in an example using method will now be described. On detection of a high density condition at operation across all access points in network operation begins the heuristic analysis to evaluate how channel widths should be re assigned to each access point . In this example each access point is currently operating at a width of 80 MHz and only two channels are available. Based on client association the desired channel width vector DCW may be equal to 40 40 80 80 for access points respectively. Hence access points and should ideally have 40 MHz channel widths but they are currently overprovisioned while access points and have client devices that are mostly capable of working at 80 MHz.

At operation access points are added to set Sand this set is sorted in increasing order based on the DCW i X i at operation . Since access points and are more significantly overprovisioned access points and will be processed before access points and .

At operation the maximum channel width X i based on reuse is computed such that Equation 3 is satisfied. In this example an administrator may want access points to work with no overlap i.e. 1 and eight 20 MHz channels are available corresponding to the two 80 MHz channels . Based on these constraints and the above equation a new target channel width X i is calculated for each access point . For instance for access point 

As a result of the above inequality X 1 must be set to a channel width less than 160 MHz. Since access point supports 20 40 80 160 MHz channel widths Xis set to 80 MHz to satisfy the above inequality.

Following the computation of new channel widths X i for access points operation configures wireless channels between access points and associated client devices to operate at the above computed channel widths. Based on the applied new channel widths post processing at operations in method may be performed to ensure the high density condition has subsided.

Method may be instigated by a triggering event detected by controller and or an access point . For example method may be triggered by controller detecting a high density condition on one or more access points in network . As noted above in one embodiment a high density condition may be defined as the average airtime on a particular access point being greater than a predefined threshold value e.g. 80 airtime usage and channel widths of the access point have not already been reduced scaled down to a minimum channel width e.g. 20 MHz for an access point that supports 20 40 80 160 MHz channels widths . Although method is triggered based on the detection of a high density condition in network in other embodiments other triggers may be used. For example method may commence upon the selection of a reset of network by a network administrator or controller .

Upon commencement of method operation determines characteristics of a plurality of client devices currently associated with one of a plurality of access points in the network . In one embodiment the characteristics of the plurality of client devices may include the number of client devices associated with an access point or the number of access points in network . In one embodiment the characteristics of the plurality of client devices may include the capabilities of client devices . For example operation may determine the channel widths each client device is capable of supporting whether client devices support beamforming transmissions packet aggregation sizes supported by each client device support for very high throughput VHT or high throughput HT communications or other similar capabilities of client devices . In one embodiment operation determines characteristics of a plurality of client devices currently associated with one of a plurality of access points in the network through the use of probe and association sequences.

Based on the characteristics of the plurality of client devices operation determines channel widths for wireless channels between one or more access points and one or more client devices . For example operation may determine a first channel width for wireless channels between access point and associated client devices and and a second channel width for wireless channels between access point and associated client devices and . As noted above the channel widths are determined based on the characteristics of the plurality of client devices determined at operation . For example the maximum channel width X i for each access point may be computed at operation such that Equation 3 is satisfied.

In one embodiment prior to determining channel widths method may match associate client devices with access points based on shared capabilities. In one embodiment matching of client devices with one or more candidate access points may be performed based on characteristics of client devices determined at operation . For example client devices that support beamforming transmissions may be matched or associated with access points that also support beamforming transmissions. In addition to matching client devices with access points that support beamforming transmissions client devices may be matched associated with access points based on support for very high throughput VHT and or high throughput HT communications. For example client devices that support VHT communications may be associated with one or more candidate access points that also support VHT communications. Similarly client devices that support HT communications may be associated with candidate access points that also support HT communications. This association of client devices and access points that share similar capabilities will improve potential capacity gains by reducing the likelihood of data transfer bottlenecks. In one embodiment this association of client devices with access points is performed at operation following characterization of the plurality of client devices . In one embodiment a similar association of client devices with access points based on capability may be performed in method upon the detection a triggering event high density condition.

Based on the channel widths for wireless channels between one or more access points and one or more client devices determined at operation operation configures corresponding access points to provide network access to one or more associated client device . In one embodiment in which controller determines computes new channel widths controller transmits the determined channel widths to corresponding access points . However in some embodiments access points determine compute channel widths separate from controller . Access points may thereafter adjust channel widths for wireless channels to meet the channel widths determined at operation .

Using methods or controller is able to dynamically adjust channel widths of access points across network based on load and client device capabilities. Accordingly high density conditions may be dynamically and intelligently addressed without the need for administrator intervention.

An embodiment of the invention may be an article of manufacture in which a machine readable medium such as microelectronic memory has stored thereon instructions which program one or more data processing components generically referred to here as a processor to perform the operations described above. In other embodiments some of these operations might be performed by specific hardware components that contain hardwired logic e.g. dedicated digital filter blocks and state machines . Those operations might alternatively be performed by any combination of programmed data processing components and fixed hardwired circuit components. Also although the discussion focuses on uplink medium control with respect to frame aggregation it is contemplated that control of other types of messages are applicable.

Any combination of the above features and functionalities may used in accordance with one or more embodiments. In the foregoing specification embodiments have been described with reference to numerous specific details that may vary from implementation to implementation. The specification and drawings are accordingly to be regarded in an illustrative rather than a restrictive sense. The sole and exclusive indicator of the scope of the invention and what is intended by the applicants to be the scope of the invention is the literal and equivalent scope of the set of claims that issue from this application in the specific form in which such claims issue including any subsequent correction.

