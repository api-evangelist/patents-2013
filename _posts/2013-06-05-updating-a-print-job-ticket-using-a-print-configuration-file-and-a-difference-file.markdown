---

title: Updating a print job ticket using a print configuration file and a difference file
abstract: The present invention aims to temporarily change print configuration information easily. To achieve such an object, an information processing apparatus of the present invention comprises: a monitoring unit configured to monitor that job data composed of print configuration information data and content data, and a difference file for temporarily changing the print configuration information of the print configuration information data to different print configuration information are put in a hot folder; and a correcting unit configured to, in a case where the job data and the difference file are put in the hot folder, correct the print configuration information data included in the job data on the basis of the difference file.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09235787&OS=09235787&RS=09235787
owner: CANON KABUSHIKI KAISHA
number: 09235787
owner_city: Tokyo
owner_country: JP
publication_date: 20130605
---
The present invention relates to an information processing apparatus an information processing method and a storage medium for storing a program to perform the information processing method.

In a photographic processing system or the like when a user performs printing from another system the user can use a hot folder application as a print application capable of without using a specific API Application Programming Interface achieving a print function by inserting image data and print configuration information data or print setting information data in a folder called a hot folder.

The hot folder is the holder in which data insertion is monitored. When image data and print configuration information data are newly stored in the hot folder the hot folder application detects the image data and the print configuration information data both newly stored and performs a print process based on the image data and the print configuration information data both detected. Usually the hot folder is set within a large capacity storage such as a hard disk or the like and the image data and the print configuration information data which are the targets of the print process are stored. Hereinafter the image data is called content data the filed print configuration information data is generally called a job ticket or a print ticket and the job ticket and the content data are collectively called job data.

In general the same job ticket is often used to the same content data. However there are cases where a user wishes to temporarily change the print configuration for certain reasons. For example the user may wish to change a kind of print paper to an inexpensive paper for the purpose of test printing to be performed before real printing and the user may wish to acquire a plurality of prints. In these cases when the user intends to directly change the original job ticket he she has to know the detailed structure of the relevant job ticket. However only the users who know the detailed structure of the job ticket do not necessarily change the print configuration and there is a possibility that an error occurs when the user changes the print configuration. Further when the job ticket is a read only ticket or when a plurality of users share the job ticket it is basically impossible to change the job ticket. For such reasons as above a function which enables to temporarily change the print configuration without changing the original job ticket has been required.

In the related background art there is the technique of changing the print configuration for each image data on the basis of a first print condition file commonly used throughout a job and a second print condition file set for each image data Japanese Patent Application Laid Open No. 2006 227992 .

In the relevant technique although it is possible to set the print configuration for each image data it is impossible to achieve a temporary change of the print configuration information.

The present invention has been completed in consideration of such problems as above and an object thereof is to enable the user to easily change the print configuration information temporarily.

To achieve the above object the present invention is directed to An information processing apparatus which is characterized by comprising a monitoring unit configured to monitor that job data composed of print configuration information data and content data and a difference file for temporarily changing print configuration information of the print configuration information data to different print configuration information are put in a hot folder and a correcting unit configured to in a case where the job data and the difference file are put in the hot folder correct the print configuration information data included in the job data on the basis of the difference file.

Further features of the present invention will become apparent from the following description of exemplary embodiments with reference to the attached drawings.

Hereinafter preferred embodiments of the present invention will be described in detail with reference to the attached drawings.

In order to simplify the description a job ticket to be used in a hot folder application is assumed to be a file of an XML Extensible Markup Language format. is a diagram illustrating an example of a job ticket in the XML format. As illustrated in the job ticket has a hierarchical structure. The most significant element is a Job element. A description region is a description region of the Job element. The Job element is such an element which expresses the whole job and the print configuration which is related to the whole job for example a type of paper to be used for the printing a size of the printing paper and the like is described. The job element has a Doc element as a child element. Description regions and are description regions of Doc elements. A group of pages is defined in the Doc element. The Doc element which means one group within a document can describe the print configuration of page numbers included between StartPage and Endpage by designating a StartPage number and an Endpage number by using a Page element to be described later. In a case that the StartPage and the Endpage are not designated this case means that the Doc element is such a Doc element which defines all the pages of contents data. The print configuration can be also described to the Doc element. In this case the same configuration is applied to all the page numbers defined by the Doc element. The Doc element has a Page element as a child element. Description regions and are description regions of Page elements. The page element means physical pages and the print configuration of page number to be designated by PageNo of the Page element can be described. When the print configuration is applied to the Job element Doc element and the Page element the hierarchies to be applied are respectively called a job level a document level and a page level.

Although the Job element is an essential element for the job ticket the Doc element and the Page element can be omitted in a case that the print configuration is not required for the document level and the page level. However in case of describing the Page element the Doc element which is a parent element of the Page element is always required to be described.

Here a case that job data is changed by a procedure that print configuration information desired to be temporarily applied to the job ticket is described in a difference file and the hot folder application corrects the job ticket to a parameter and a value described in the difference file is considered. The difference file may be either a text file format or an INI Initialization file format. Although it has been described that the job data is constituted by combining the job ticket with contents data it is allowed that the job data is simply constituted by print configuration information data and the contents data. Incidentally the difference file may include the print configuration information used for changing a part of the print configuration information of the job ticket.

In case of applying the description contents of the difference file to the job ticket the print configuration of the job level and page level in the difference file has to be respectively described in the Job element and the Page element of the job ticket. The Job element is an essential element and since only one element exists for one job the print configuration addition of the job level can be performed without problem. However in a case that a description of the Doc element is insufficient as mentioned below the print configuration of page level cannot be added to the job ticket.

 3 Although Doc elements exist plural Doc elements for defining the configuration change target page exist.

Hereinafter it will be described about the constitution that the print configuration for each page is temporarily changed even when the description of the Doc element of the job ticket is insufficient.

The ROM is a read only memory. As for the ROM there are a PROM Programmable ROM to which a user can perform a process that a program is electrically written in the ROM and a mask ROM of which the contents is written in the ROM when the ROM is manufactured however either ROM is available in the present embodiment.

The RAM is such a memory in which data can be freely written and from which data can be freely read out. The RAM has a function of temporarily storing data when performing a process of the present embodiment.

The external storage is a nonvolatile storage. As the external storage for example there are an HD drive a FD drive an MO drive a CD RW drive a DVD RW drive a Blu ray a registered trade mark drive and the like. The hot folder program and data necessary for an operation related to the hot folder program are stored in the external storage .

The network I F processes a communication control used for connecting to a network such as an intranet or the like however various communication interfaces are applied in accordance with environment of a user. The network I F is constituted by an interface of a wireless LAN or an internet of Ethernet a registered trade mark .

The input output device I F which processes data related to input output operations performed from the keyboard the mouse and the printer included in the information processing apparatus is used for an operation of the information processing apparatus and the input output operation of data.

The display I F and the display are display units. This display is realized by using a CRT a liquid crystal display a plasma display a rear projection TV or a front projector and a control circuit thereof.

The system bus is used for performing communication of various data between respective blocks in the information processing apparatus and supplying the power. The system bus consists of an address line a data line a control line a power ground line and the like.

The software configuration module configuration related to a hot folder to be described later or processes related to flow charts can be realized by a procedure that the CPU executes processes on the basis of the hot folder program.

The hot folder UI part has a job management UI part a printer management UI part a hot folder management UI part a job ticket management UI part an event history management UI part and a configuration management UI part . In addition the hot folder UI part has a hot folder UI I F . The job management UI part is a UI display part used for managing a print job. The printer management UI part displays information concerning a printer which is managed in the hot folder. The hot folder management UI part displays hot folder information which is currently managed. The job ticket management UI part displays configuration information which is called a job ticket to be transferred to a printer. The event history management UI part displays histories of various events information such as the print end the no paper and the like to be informed from the printer. The configuration management UI part is a display part of the configuration information of the hot folder program. The hot folder UI I F is an I F part which communicates with the hot folder control part .

The hot folder control part has a hot folder control I F a job management part a printer management part a hot folder management part a job ticket management part an event history management part and a configuration management part . In addition the hot folder control part has a device control I F . The hot folder control I F is connected with the hot folder monitoring I F and the hot folder UI I F . The job management part performs a management of a print job. The printer management part performs a management of a printer which is managed by the hot folder. The hot folder management part performs a management of hot folder information. The job ticket management part performs a management of a job ticket. The event history management part manages histories of various events information such as the print end the no paper and the like to be informed from the printer. The configuration management part performs a management of configuration information of the hot folder program. A job ticket conversion part operates as a sub module of the job management part . The job ticket conversion part acquires job data and a difference file from the job management part and converts the job ticket. The details of a process executed in the job ticket conversion part will be described later. The device control I F is an interface part which communicates with the printer device printer .

In addition the difference file and the job ticket are also created by a user. For example a cjt.ini file is created from a text file which was newly created by the user. Then the job ticket and the difference file are created by describing desired print configuration information in this ini file. Incidentally the difference file is stored in the job folder with the same timing as that of the job data or before the trigger file is put.

In a step S the difference file acquisition part judges whether or not the difference file exists in data to be acquired from the job management part . As a result of judgment in the step S when the difference file does not exist since the difference file acquisition part is not required to change the job ticket a process indicated in is terminated. As a result of judgment in the step S when the difference file exists the difference file acquisition part advances the process to a step S.

In the step S the difference file acquisition part acquires the difference file. Then the difference file analysis part analyzes the description contents of the difference file which was acquired by the difference file acquisition part .

Next in a step S the difference file analysis part judges whether or not the configuration change for the whole job exists from the analyzed result of the difference file. When the configuration change for the whole job does not exist the difference file analysis part advances a process to a step S. When the configuration change for the whole job exists the difference file analysis part advances the process to a step S.

Next in a step S the job ticket correction part describes the print configuration for the whole job acquired from the difference file in a job level of the job ticket.

Next in a step S the difference file analysis part judges whether or not the print configuration of page level exists in the difference file. When the print configuration of page level does not exist the difference file analysis part terminates the process indicated in . When the print configuration of page level exists the difference file analysis part advances the process to a step S.

In the step S the difference file analysis part performs a job ticket complementary process. Hereinafter a page described in the difference file is called a configuration target page . The details of the job ticket complementary process will be described later in .

First in a step S the job ticket acquisition part acquires a job ticket from the job management part .

Next in a step S the job ticket analysis part detects Doc elements of the job ticket and acquires the number of Doc elements a page number defined by each Doc element and information of a Page element defined in the each Doc element.

Next in a step S the job ticket analysis part judges whether or not the Doc element exists in the job ticket from the above mentioned analyzed result of the job ticket. When the Doc element exists the job ticket analysis part advances a process to a step S and when the Doc element does not exist the job ticket analysis part advances the process to a step S.

In the step S the job ticket correction part describes the Doc element which defines all the pages in a low level hierarchy of a Job element of the job ticket.

Next in a step S the job ticket correction part describes the print configuration of a configuration target page in a low level hierarchy of the Doc element. The content of the difference file is described in the print configuration of this configuration target page.

In order to describe the Doc element which defines all the pages the job ticket correction part may just describe the Doc element which does not include a page designation.

On the other hand in the step S the job ticket analysis part judges whether or not the Doc elements of which page ranges to be defined are overlapped exist from the above mentioned analyzed result of the job ticket. For example a case where Doc elements from second page to fifth page and Doc elements from third page to eighth page are included corresponds to an overlapped case. When the Doc elements of which the page ranges to be defined are overlapped exist the job ticket analysis part advances a process to a step S and when the Doc elements of which the page ranges to be defined are overlapped do not exist the job ticket analysis part advances the process to a step S.

In the step S the job ticket analysis part terminates a process indicated in by treating as a job ticket format error.

On the other hand in the step S the job ticket analysis part judges whether or not a Doc element which defines a configuration target page exists from the above mentioned analyzed result of the job ticket. When the Doc element which defines the configuration target page exists the job ticket analysis part advances a process to a step S and when the Doc element which defines the configuration target page does not exist the job ticket analysis part advances the process to a step S.

In the step S the job ticket correction part describes the print configuration of the configuration target page in a low level hierarchy of the Doc element. The contents of the difference file are described in the print configuration of this configuration target page. In a case that parameters of the configuration target page already exist in the job ticket the job ticket correction part replaces only the value of the print configuration with a value of the difference file. On the other hand in the step S the job ticket analysis part terminates the process indicated in by treating as a difference file page designation error. In the steps S and S when error states are judged a fact of these errors is informed to a user by the hot folder application software. An informing method may be any method if a user can recognize a fact of the errors.

A case of adding the print configuration of the page number three by applying the difference file to the job ticket will be described. First the job ticket correction part describes the Doc element in the job ticket . Although a Doc element name can be defined to the Doc element by an id it may be any name if the Doc element is uniquely determined. The job ticket correction part adds the print configuration of page level of the page number three described in the difference file to a low level hierarchy of the Doc element of the job ticket after adding the Doc element. is a diagram illustrating an example of a job ticket after performing the correction. The job ticket after performing the correction is such a job ticket acquired as a result of adding the print configuration of page level of the page number three to the job ticket . Description portions of the above mentioned Doc element and the print configuration of page level are indicated by a region . The job ticket becomes such a job ticket of indicating to print two copies of a third page.

As mentioned above even if the description of a Doc element of a job ticket is an insufficient description the print configuration for each page can add to the job ticket by complementing the Doc element.

It will be described about the second embodiment. In the first embodiment even if the Doc element exists when a configuration target page does not exist within a page range defined by the Doc element a process is terminated by treating as an error. However in the second embodiment when the Doc element which defines the configuration target page does not exist the print configuration of the configuration target page is enabled to be added by adding the Doc element of a job ticket such that all the pages are to be defined before that the difference file is applied to the job ticket. Hereinafter it will be described about an adding method of the Doc element. Here the job ticket illustrated in to be described later is such a job ticket which is in a state of lacking the Doc element. The Doc element which defines pages from the page number five to the page number eight is described in the job ticket illustrated in and the Doc element which defines pages from the page number one to the page number four is omitted. A region illustrated in is a portion of lacking the Doc element. Therefore in order to define all the pages by the Doc elements the Doc element which defines pages from the first page to the fourth page has to be added. A job ticket illustrated in to be described later is such a job ticket which is in a case that the deficient Doc element was added. A region indicates the added Doc element. In addition the job ticket correction part can define the Doc element of pages from StartPage to the last page by omitting EndPage. Therefore in case of desiring to add the Doc element of pages from the start page to the last page the job ticket correction part sets a numerical value after the maximum page here 8 described in the job ticket to the StartPage and adds the Doc element of omitting the EndPage. Or the job ticket correction part omits the EndPage of the Doc element having the maximum page. As described above a method of adding the Doc element such that all the pages lacked in the definition of the job ticket are to be defined is called a deficient Doc element adding method.

Since steps S to S and S are the same as the steps S to S and S indicated in of the first embodiment respectively the description thereof will be omitted.

In a step S when it was judged that a Doc element which defines a configuration target page does not exist in the job ticket the job ticket analysis part advances a process to a step S.

In the step S the job ticket correction part adds the Doc element which defines the configuration target page by the above mentioned deficient Doc element adding method.

Subsequently in a step S the job ticket correction part adds the print configuration of the configuration target page.

As another example it will be described about a case that middle page numbers are missing. is a diagram illustrating an example of a job ticket in which the definition is lacked. A region indicated in is a portion of lacking the Doc element. As to the difference file it will be described by using the difference file illustrated in . is a diagram illustrating an example of a job ticket acquired as a result of applying the difference file to the job ticket . The job ticket correction part adds the Doc element which defines pages from StartPage 3 to EndPage 4 to the job ticket in which the definition is lacked by the above mentioned deficient Doc element adding method. In addition the job ticket correction part adds the print configuration of page level of the page number three to a low level hierarchy of the added Doc element. A region illustrated in is an added portion.

As mentioned above even when the Doc element which defines a configuration target page does not exist the print configuration of page level can be added by adding the Doc element of a page in which the definition is lacked.

It will be described about the third embodiment. In the first embodiment when a designated page number is included in plural Doc elements a process is terminated by treating as a structural error of the job ticket. However in the third embodiment even when the designated page is included in the plural Doc elements the description of a Page element is enabled to be added by reconstituting the Doc element and the below ranks.

Since steps S to S are the same as the steps S to S indicated in of the second embodiment respectively the description thereof will be omitted.

In a step S the job ticket analysis part judges whether or not the Doc elements of which the page ranges to be defined are overlapped exist. When the Doc elements of which the page ranges to be defined are overlapped exist the job ticket analysis part advances a process to a step S and when the Doc elements of which the page ranges to be defined are overlapped do not exist the job ticket analysis part advances the process to a step S.

In the step S the job ticket correction part merges the print configuration of page level of the same page number of the Doc element and the below ranks. More specifically the job ticket correction part once discards the plural existing Doc elements and describes Page elements held by the respective Doc elements in the same level. At this time when Page elements having the same page number exist the job ticket correction part collectively describes parameters held by respective Page elements in one Page element. When the same plural parameters exist the job ticket correction part gives priority to a value of a previously described parameter and deletes the subsequent descriptions.

Next in a step S the job ticket correction part adds a Doc element which defines all the pages to a low level hierarchy of the job element as a new Doc element and describes the Page element which was merged in the step S in a low level hierarchy of the above mentioned Doc element.

Next in a step S the job ticket correction part describes the print configuration of a configuration target page in the Doc element.

When a parameter of the configuration target page already exists in the job ticket the job ticket correction part replaces only the value of the print configuration with a value of the difference file.

As mentioned above even when a designated Page element is included in the plural Doc elements the print configuration of page level designated in the difference file is enabled to be added.

Moreover the present invention can also be realized by performing a process of supplying software programs for realizing the functions of the above embodiments to a system or an apparatus through a network or various storage media and causing a computer such as a CPU or an MPU of the system or the apparatus to read out and execute the supplied programs.

As just described according to the embodiments of the present invention for example even if the description of the Doc element of the job ticket to be inserted in the hot folder is insufficient it is possible to temporarily change the print configuration for each page. In other words it is possible to easily change the print configuration information temporarily.

While the present invention has been described with reference to the exemplary embodiments it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all such modifications and equivalent structures and functions.

According to the present invention it is possible to easily change the print configuration information temporarily.

Embodiments of the present invention can also be realized by a computer of a system or apparatus that reads out and executes computer executable instructions recorded on a storage medium e.g. non transitory computer readable storage medium to perform the functions of one or more of the above described embodiments of the present invention and by a method performed by the computer of the system or apparatus by for example reading out and executing the computer executable instructions from the storage medium to perform the functions of one or more of the above described embodiments. The computer may comprise one or more of a central processing unit CPU micro processing unit MPU or other circuitry and may include a network of separate computers or separate computer processors. The computer executable instructions may be provided to the computer for example from a network or the storage medium. The storage medium may include for example one or more of a hard disk a random access memory RAM a read only memory ROM a storage of distributed computing systems an optical disk such as a compact disc CD digital versatile disc DVD or Blu ray Disc BD a flash memory device a memory card and the like.

This application claims the benefit of Japanese Patent Application No. 2012 133749 filed Jun. 13 2012 which is hereby incorporated by reference herein in its entirety.

