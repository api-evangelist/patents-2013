---

title: Remote geobrowser control for collaborative decision making
abstract: A system for collaborative decision-making and more efficient disaster management, in which multiple geobrowsers can communicate over local networks and/or the Internet to create a real collaborative experience when dealing with geospatial information, distributed using Open Geospatial Consortium (OGC) compliant KML/KMZ formats, WMS (Web Mapping Service), or and geospatial data files. All manipulation functions (dataset loading, layer stacking, layer visibility changes, Point of View (POV) changes, map extent changes, looping and animation settings, geospatial file creation and annotation drawing, and other functions) are replicated across all connected geobrowsers to create a true collaborative geospatial Common Operating Picture (COP). The leadership role can be handed over to other users if desired to build upon all the datasets and annotations sent by previous leads. Additionally the designated lead user can record the current state of the map and reproduce this on demand or automatically on other geobrowsers.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09344486&OS=09344486&RS=09344486
owner: 
number: 09344486
owner_city: 
owner_country: 
publication_date: 20130118
---
The present application derives priority from U.S. provisional application 61 587 916 filed 18 Jan. 2012.

The present invention relates to network based collaboration tools and more particularly to a geobrowser collaboration system which synchronizes and shares information among multiple remote geobrowsers for data visualization and collaborative decision making in emergency and other situations.

Geobrowsers allow the integration of disparate datasets available on the internet by mapping them onto 3D virtual globes 2D maps or other geolocated datasets. Open source geobrowsers such as NASA s World Wind and commercially licensed geobrowsers such as Google Earth and ESRI s ArcGlobe ESRI s Flex Viewers and Google Maps are widely used by the general public as well as by researchers decision and policy makers emergency management and government officials. It is possible to integrate various datasets into these geobrowsers giving users new data visualizations and new analysis capabilities. Such datasets may for example include spatially referenced data such as satellite and aerial imagery digital terrain models vector data such as locations water bodies and buildings and real time coordinate data for location tracking. All may be placed on the 2D map or 3D globe surface and displayed at their proper geographic location. Geobrowsers are expected to have a significant impact on managing knowledge structuring workflow and communications. Google Earth s user base is more than 500 million users and NASA estimates that World Wind attracted 10 million users within the first year of operation.

Geobrowsers have untapped potential in situations where multiple users collaborate working together in a coordinated fashion towards a common goal. Large scale natural disasters such as hurricanes earthquakes forest fires or flash floods require coordinated action to allocate resources and deploy the most appropriate response. Decision makers emergency response personnel and public administrators typically need to be capable of accessing distributing and processing a wide range of map information including earth observation data geographical information and spatially mapped live sensor data such as real time video satellite storm imagery and other useful datasets. The ability to access such resources on a 2D or 3D geobrowser would be extremely valuable for emergency management and disaster mitigation.

The ability for multiple remote users to access such resources and collaborate on the geobrowser has the potential to help save lives limit damage and reduce the costs of dealing with emergencies. Geospatial collaboration should be an essential part of every stage of emergency management from planning through response and recovery to mitigation of future emergencies. Unfortunately geobrowsers cannot collaborate there are no third party collaboration tools suitable for geobrowser collaboration and so the foregoing potential is entirely unmet.

Users themselves have tried a few ad hoc attempts at solutions. For example geospatial data collaboration has been attempted using generic screen sharing presentation software such as Cisco WebEx or Microsoft SharePoint and project collaboration tools such as Basecamp Google Docs and Wiggio. However this ad hoc approach only provides multiple remote users with the ability to view a common screen and exchange communications. Users only see a replica of the lead collaborator s geobrowser and whatever datasets and annotations were on it. This is similar to watching television suppresses participation and fails to engage the collaborators. Participants cannot add to the lead s geobrowser any additional data or information. Additionally when the screen sharing presentation is completed any geospatial data used by the lead collaborator is no longer available for the other participants and they cannot review it or merge it with other datasets on their local systems.

United States Patent Application No. 20070174331 by Wolf et al. shows a collaboration system that maintains spatial reference information for collaborative visualization. A web enabled database of business data points can be displayed simultaneously on multiple collaborators visual screens. As one collaborator updates a point location the others see the change in their visualizations. It appears that this is done simply by associating spatial reference information with the business data points and displaying on a shared map using Microsoft Sharepoint a known platform for document and file collaboration.

There is no geobrowser collaboration system that allows collaboration among users of different geobrowsers let alone controlled sharing in which remote users selectively control edit and manipulate shared content in real time such as geospatial datasets. What is needed is a collaboration system for allowing multiple geobrowsers to communicate over local networks and the Internet to create a real collaborative experience over computer desktops for collaborative decision making that delivers accurate information on emerging situations while collaborating with multiple remotely located partners advisors experts specialists and authorities in various jurisdictions regardless of the geobrowser hardware or operating systems used. The present invention provides a true hands on geo experience for all participants allowing users to manipulate and understand shared datasets on their own geobrowser virtual globe or geolocated map of choice much more efficiently than by any other known method. This results in an enhanced user experience which promotes engagement and translates into increased awareness and understanding of emergency conditions.

It is therefore an object of the present innovation to provide a geobrowser collaboration system that establishes a common operating picture amongst multiple remote users of geobrowsers and a lead user actually controls edits and manipulates the common operating picture for collaborative data visualization and decision making in emergency and other situations.

It is another object to provide a geobrowser collaboration system with a host protocol in which one designated lead user actually controls edits and manipulates the shared content while remote users passively view the shared content and yet the lead control may be exchanged to any user at any time.

It is another object to provide a geobrowser collaboration system in which all the functions performed on the leader s virtual globe or other geolocated map of choice are executed across all the collaboration participants geobrowsers including functions like dataset loading layer stacking layer visibility changes Point of View POV changes for a 3D map or its 2D corollary map extent changes looping and animation settings and geospatial file creation and annotation drawing thereby creating a true geospatial Common Operating Picture COP .

It is another object to provide a lead transfer protocol to facilitate joint changes by multiple leaders for example in joint editing of a forecast by editors who are responsible for different sections zones of the forecast region or field participants who are appending information to a virtual globe or other geolocated mapping system.

It is another object to provide a geobrowser collaboration system in which leader control editing and manipulation of the common operating picture does not jeopardize integrity of the geobrowser session content.

It is another object to provide a geobrowser collaboration system where the designated lead user can record the state of the map loaded data layer stacks layer visibilities Point of View POV for a 3D map or its 2D corollary map extent changes annotations drawings looping and animation settings at any one instance and reproduce this on demand or automatically on other geobrowsers. The state of the map can be used as a bookmark during a collaborative briefing briefmarks broadcast to remote users for them to follow automatically stored as a public link for future use on any geobrowser sent by email transmission or otherwise stored and or transmitted as a permanent archive.

The solution described herein enhances collaborative decision making and facilitates more efficient disaster management from pre to post disaster including rapidly deployable distributed networks to support larger geographic areas of first responders. In one embodiment designed for emergency response coordination the present system provides a platform by which multiple geobrowsers can communicate over local networks and the Internet to create a real collaborative experience over computer desktop geobrowsers when dealing with geospatial information distributed using Open Geospatial Consortium OGC compliant KML KMZ formats and WMS Web Mapping Service as well as other geospatial data formats GeoTiffs Shapefiles GeoJPEGs etc. . It facilitates a collaborative decision environment that delivers accurate information on emerging situations while collaborating with distributed partners advisors specialists and authorities in any location. All the functions like dataset loading layer stacking Point of View POV changes for a 3D map or its 2D corollary map extent changes animation settings and annotations are replicated across all the connected geobrowsers effectively creating a true collaborative geospatial Common Operating Picture COP . Lead collaborator functions can be passed on to any of the other participants in the collaboration at any time allowing them to build upon the collaborative COP which is already on their desktop. Since the collaboration is built upon the virtual globe or other geolocated mapping system on each user s desktop and there are no screen switches or changes to the base map as new datasets or annotations are added the user never loses his situational awareness. The present system is capable of collaboration between multiple different virtual globes or geolocated maps at one time.

Other objects features and advantages of the present invention will become more apparent from the following detailed description of the preferred embodiments and certain modifications thereof.

The present invention is a system for allowing multiple geobrowsers to communicate over local networks and or the Internet to create a real time collaborative experience with 3D virtual globes geospatial data 2D maps and other geo referenced data. One skilled in the art should understand that the present system also facilitates collaboration using any webpage databases presentation and multimedia files and or images and is not limited to geobrowser collaboration per se but has broader applicability. However the system was specifically designed for geobrowser collaboration and for purposes of illustration shall be explained in this context. Collaboration sessions are conducted by a lead collaborator with any number of collaboration participants all using their geobrowser of choice. As each participant connects to a collaboration session all the functions performed on the leader s geobrowser are executed across all the participants geobrowsers. Key functions like dataset loading layer stacking layer visibilities Point of View POV changes for a 3D map or its 2D corollary map extent changes animation settings drawings and annotations are replicated across all the connected geobrowsers effectively creating a true geospatial Common Operating Picture COP and full situational awareness. In addition a novel lead follow protocol is established in which lead collaborator functions can be passed on to any of the other participants in the collaboration at any time allowing them to build upon the collaborative COP. Participants arriving late to a collaborative session will load all the datasets and go through all the commands sequentially without missing any dataset annotation or map view at an accelerated pace allowing them to catch up with the real time collaboration. These functions allow all participants to maintain situational awareness regardless of their arrival time to the collaboration late arrivals will see everything that has been discussed and annotated on the map allowing them to have a complete picture of the presentation they would have missed with other technologies . This functionality is especially useful when users are faced with low bandwidths or network disruptions which are probable during emergency situations. Other technologies do not allow users to maintain this situational awareness during a network disruption or low bandwidth. Additionally this functionality also allows users to review the collaboration sessions by reloading the sessions at a future time or date.

The client stations . . . n may be any computing devices equipped with any native geobrowser application such as for example World Wind 1.4 WW.NET World Wind Java WWJava Google Earth standalone or Web API Google Maps The Integrated Data Viewer IDV from Unidata ESRI ArcGIS Explorer Microsoft Virtual Earth Bing COAST Coastal On line Assessment and Synthesis Tool ESRI Flex Viewer Flash SWF ESRI Flex API or any other native geobrowser. The Host remains under application service provider ASP control via an ASP control console .

When a user seeks to use the system of the present invention from a standalone client station for the first time they may use any suitable browser application such as Google Chrome 10 or Firefox or Internet Explorer to connect to the Host and register. Upon registration the collaboration Host pushes out a self installable RIA Communication Management Module CMM which will run on the client device either installing itself as a plugin to the native geobrowser application or utilizing an application programming interface API specification to communicate and control the native geobrowser.

When a user seeks to use the system of the present invention from a web plug in client station they may use any suitable browser application such as Google Chrome or Firefox or Internet Explorer to connect to the Host and register. Upon registration the collaboration Host shares with the web browser the necessary Flash SWF modules Flex files Java script HTML5 or web plug in code that comprises the CMM which are loaded on demand by the web browser. In this case they can run independently of a standalone application.

Client devices . . . n can be equipped with any combination of standalone or web plug in CMMs . . . n respectively allowing the system to work with any combination of geobrowser web plug in interfaces . . . n and or standalone installed on the PC MAC or Workstation.

One skilled in the art will readily understand that client devices . . . n may be any combination of smartphones tablet computers or other mobile devices in which case the standalone CMMs are Mobile Applications APPs installed on the mobile device.

When a registered user in possession of a client station . . . n seeks to subscribe to a collaboration session they execute both their native geobrowser application to launch its virtual globe or 2D map and their CMM . Generally where CMM is a rich interne application RIA plugin it can be executed from the tools menu within the geobrowser. Where CMM is a standalone Java API executable application it runs independently but in this case CMM may be programmed so that its execution starts the geobrowser as well. In both cases the CMM provides a local collaboration user interface on client stations . . . n and allows the user to quickly establish a secure communication pathway to Host and to share geobrowser control with Host allowing the native geobrowser application to accept commands either locally from the user or indirectly via Host .

The CMM includes Internet and or server based communication protocols through which the CMM communicates with the Host . Host also establishes a lead follow protocol to be described allocating the lead collaborator role to one or more designated client station for example the Leader . For purposes of illustration the present system will be described as designating just one leader at a time but it should be apparent that collaboration with multiple designated Leaders is also possible. Host compiles a command stack of geobrowser control commands from the appointed Leader and stores the command stack locally remotely or on cloud. The CMM for all other Participants clients . . . n periodically monitors pings the Host for new commands entered on the command stack and when it finds one the command is executed by all Participants . . . . Given this configuration all geobrowser controls and commands executed by the Leader client station are executed concurrently and automatically on all Participant client stations . . . milliseconds later and yet the other clients . . . remain free to exercise their own local geobrowser controls with no effect on the collaboration. Importantly the Leader role can be passed to another Participant at any time in accordance with the lead follow protocol. The Host only enters commands from the Leader onto the command stack for retrieval by Participants . Thus rather than broadcasting an image of the lead geobrowser to each client station each collaboration session is built upon the virtual globe on each user s desktop under supplemental control of the Communication Management Module . Consequently there are no screen switches or changes to the base map as new datasets or annotations are added the user never loses his situational awareness. The Leader role is transferable and as the role is transferred new lead collaborators can add their own geospatial datasets without losing the annotations drawings and datasets that have been shared so far by past lead collaborators. All collaboration session commands added by each leader are logged as Session Commands on the Host Server as seen in .

This lead follow protocol is essential for decision makers who are frequently not GIS expert and require visualizing their own digital assets on a map such as firefighter engine positions together with other relevant datasets such as NASA satellite wildfire hotspots creating actionable geospatial information to make better informed and timelier decisions. Additionally at the end of each collaboration session each user has the full set of original datasets shared and annotations created during the collaboration on their personal geobrowser still active on their computer. Users can revisit past collaboration sessions and load the datasets on any computer connected to the internet at any time. Sessions may be stored locally at Host on a remote server or on the cloud.

The CMM plugin or API on the client devices . . . n and Host software form a synchronized collaboration system e.g. a synchronized co browsing system wherein any number of clients running the CMMs literally plug or patch into the synchronization framework.

The CMMs can be implemented as object oriented user control interfaces using an object oriented programming language such as C PHP or any other suitable language. The CMM communication to the Host may be implemented using a conventional http POSTdata method posting data to server side PHP scripts which implementation is synchronous.

The Host software includes an interpreter for receiving posted data from clients authenticating filtering data from the designated lead client and selectively adding data from the lead client to a command stack for retrieval by the other collaborating clients . Thus the Host may run a conventional Hypertext Preprocessor PHP interpreter for receiving posted PHP data commands from clients . PHP is a widely used general purpose scripting language that is especially suited for Web development and can be embedded into HTML. This way any PHP code in a received file is executed by the PHP engine to create dynamic web page content or dynamic images that can be used on client devices in their CMM plugins . One skilled in the art will readily understand that the scripts may alternatively be implemented as Common Gateway Interface CGI scripts or may be implemented using instructions provided in accordance with any of the known C C Java or Python programming languages or any other server side scripts in any suitable scripting languages capable of providing dynamic content from web Host to clients . Similarly any of a variety of data transfer protocols may be used such as FTP HTTP Python and Java.

The Host interpreter authenticates commands sent from the client CMM plugins and determines whether these are lead commands from the designated leader or follow commands from Participants . Only authenticated commands from Leader are added to the Host command stack for retrieval by the Participant clients .

For example when a session is initiated multiple clients . . . n may be connected through an interne link to the central Host . The Host software accepts commands from the current Leader and adds them to a master Session Command files. The master Session command files are a transaction log file that captures all servicing activities on the Host . One skilled in the art should understand that master transaction log is not limited to XML but could be straight text UNICODE or any other suitable format although XML is presently preferred . Thus as seen in the Communication Management Module accepts authenticated commands from the current lead collaborator and adds them to the master session command files Command 1 . Each client s CMM sends a ping every few seconds once a session has been initialized to check for new commands in the Host session command files. Every time a Client finds one or more new commands the Client reads them into its local copy of the session command files and immediately executes them. In effect all collaborating clients receive the Leader s commands in near real time and they are executed by the CMMs locally and individually on their respective native geobrowsers READ COMMAND Commands 2 and 3 . Only one collaborator can act as Session Lead at any given time and that collaborator assumes control of the session Session Lead Status . The Session Lead can pass the lead to any other collaborator at any time with one exception. If a user is logged in as Session Administrator via ASP Control Console they can block transfer of the Lead. A Session Administrator is identified at the beginning of each Session and that Administrator may override a Session Lead at any time to gain control of the Session. If the lead is handed over to a different client station say the central Host appends new commands from the new LEAD and adds them to the Session Commands WRITE COMMAND Commands 4 5 and 6 . All client station plugins receive and execute the commands individually on their local geobrowser READ COMMAND Commands 4 5 and 6 . Sessions are defined and recorded using a sequence of plain text Session Command files. The Session Command files are edited written to by the Session Lead and local copies of the Session Command files are maintained at each client station . . . n for each collaborator over the network connection. The Session Commands serve as a recording of the session and can be saved replayed and or manually edited and the Leader may also copy content from a prior session into an active session. This way an archive of past commands always exists on the Host and this allows users to join sessions that are already in progress without missing any of the commands. Users can also revisit archived sessions and re live them step by step using their geobrowsers.

Similarly when Lead Client loads a dataset by using the CMM interface a command via the network Host is sent to the CMM plugin on client whereupon that geobrowser will load the same dataset.

This way critical datasets for weather analysis situational awareness location based datasets climate observations from satellites model forecasts storm surge forecasts NOAA research models aviation hazards active volcanoes NASA research satellite data and more can be shared with ease between emergency managers government officials decision makers political leaders and even responders on the ground.

The Session Lead capabilities include navigation functions to pan zoom tilt and rotate the geobrowser rendering. The Session Lead can also annotate the rendering with manual drawings text or symbols. Operations on WMS and KML KMZ or any geolocated content can be shared over the network during a Session.

One of the robust features of the present invention is a software feature that allows the designated LEAD participant to record the state of the map which is a comprehensive session content and configuration snapshot at a given point in time. Given the state of the map the LEAD participant can reproduce a session on demand both locally and automatically on other geobrowsers . . . n. The state of the map also serves as a bookmark during a collaborative briefing e.g. a briefmark and briefmarks can be broadcast for remote users to follow automatically or made available for email transmission or stored for future use on any geobrowser . . . n by making a web link available.

In the case of client station the interface will receive the replicate state command sent before by the Leader and read the necessary commands from the command stack on Host to make the necessary changes to to replicate the state of . This application is useful to record briefing bookmarks used to organize a presentation briefmarks or to pre load datasets on all collaborating client stations before a starting a briefing.

Client station will interpret the State Commands directly from the State Commands configuration snapshot saved on the Host from the command stack. This can be done real time during a collaboration by having the client station periodically monitor the configuration snapshot for changes or new configuration snapshots or at a future time on demand.

Client station receives the configuration snapshot created from the command stack either from the server or from the leader via email transmission. The client station can connect to the email server directly or have the information fed by the user.

Client station checks the server periodically for any changes to configuration snapshot created from the command stack and immediately executes a state replication on to replicate when a change of the configuration snapshot or a new configuration snapshot is detected on Host . This can be done real time during a collaboration or at a displaced time.

Again the Leader can be designated to be any participant . . . n. The state of the map can be broadcast directly to other participants and or transmitted via other means such as email or by web link for real time or future use.

Leader initiates a record the state of the map control from his geobrowser which will record a configuration snapshot on the Host server and locally on the user s machine if desired. The recording of configuration snapshot by the Lead can be set to automatically record it periodically if desired or on demand. The configuration snapshot is created by reading the current state of the map on and not from the command stack on Host as in . Either the client station or code on Host can create this configuration snapshot which includes but is not limited to latest POV or map extent layer loads layer stacking current layer visibilities drawings annotations animation state and current time and date displayed. As above the execution of the state replication on client stations and can be performed in different ways 

In the case of client station the interface will receive the replicate state command sent before by the Lead and read the necessary commands from the configuration snapshot on Host to make the necessary changes to to replicate the state of . Client station will interpret the State Commands directly from the State Commands configuration snapshot saved on the Host . This can be done real time during a collaboration by having the client station periodically monitor the configuration snapshot for changes or new configuration snapshots or at a future time on demand.

Client station receives the configuration snapshot either from the Host or from the Leader via email transmission. The client station can connect to the email server directly or have the information fed by the user.

Client station checks the server periodically for any changes to configuration snapshot and immediately executes a state replication on to replicate when a change of the configuration snapshot or a new configuration snapshot is detected on Host . This can be done real time during a collaboration or at a displaced time.

Again the Leader can be designated to be any participant . . . n. The state of the map can be broadcast directly to other participants and or transmitted via other means such as email or by web link for real time or future use.

Each CMM includes a supplemental session manager graphical user interface GUI that controls and manages the collaborative session s and which provides an expandable palette of tools to manipulate the geobrowser.

The Participant Leader Banner displays connection status here offline . However upon joining a session the banner will read Participant when the user is collaborating in the session or Leader if the user is leading the session. Clicking on this button once while connected opens a drop down list of additional commands shown at the top right inset.

The Suspend Session control allows the participant to pause the connection to the web Host at which point the control changes to Engage Session and the session can be resumed by clicking this button again . By selecting the Suspend Session control the user effectively enters an off line mode and disconnects from the Host that is running the collaboration session. Of course any activity that occurs in the collaboration session while in suspended mode will not be collected or displayed in that user s geobrowser. Upon re engaging the user re joins the collaboration session and is automatically caught up as each intervening step that took place during the suspension is loaded.

The Show MGR control launches the Session Manager window described above if the user has chosen to Hide the Panel.

The Show More control further expands the view of this window to provide a more in depth array of collaboration tools. The collaboration tools provided depend on whether the Client is the designated Leader of the collaboration or just a participant as indicated in Banner .

As described below the session manager expands to provide controls to the Leader for manipulating the COP. These controls generally allow the following changes 

The Lead control toggles between Request Lead and Yield Lead with the current status shown in the Participant Leader Banner above. During a collaboration session there are multiple Participants and one Leader. Upon joining everyone is a Participant until one requests to lead the session. Clicking on Request Lead will bring a Waiting Quit message in yellow in the Participant Leader Banner . If this is selected before the request for the lead is complete the request is canceled. After becoming the Leader the button reads Yield Lead in green as shown in . If a Participant hits the Request Lead Button to assume Leadership of the session the current Leader must hit the corresponding Release Lead button to give up the lead and relinquish it to the Participant.

The Leader has exclusive abilities that no other collaborator possesses moving the globe view loading a KML or URL file Drawing and sending text changing the visibility of the Layers loaded in the collaboration and controlling the looping of animations.

Clicking the Draw control initiates the Draw Tool shown in the bottom left inset . The Draw tool displays different buttons atop the geobrowser. Only the Leader can draw. If another Participant wants to draw the Lead function must first be relinquished to him. When the Leader makes a drawing a new drawing file kml annotation or other geolocated file is created with the drawing is loaded onto the command stack at Host and then this file is retrieved by all the participants.

The first button is the Color button which allows the Leader to change the color of the pen used for drawing. They select the color by clicking on the button which opens a drop down palette for selection. The selected color is displayed in the top button.

Selecting Size gives the Leader a choice of three different drawing Pen thicknesses or font size for text small medium and large. If desired a more elaborate fonts selection may be provided to adjust text font and Icon Pen size for each of the three drawing pen sizes.

Clicking Text allows the user to add text with or without an icon on the map. Thus to place text and or icons on the globe the user selects Text under the Draw selection. Defaults may be suggested such as a default icon such as a shaded dot and or default text such as abc. In each case clicking the default selection will open a text icon library and allow other selections. The Clear selection clears all previously created drawings. The Square selection allows the user to click and drag a square or rectangle drawing onto the geobrowser. The Circle selection allows the user to click and drag a circle drawing onto the geobrowser.

Referring back to the lower Draw Tools inset of the default draw mode is Geo Draw as shown selected in the fourth button from left. Geo Draw allows the Leader to draw or place the above described text or icons on the geobrowserthat are geo referenced on the globe or map. Despite subsequent moving of the globe or zooming in and out the drawing maintains its original placement on the map or virtual globe. By clicking on the Geo Draw button other drawing mode options become available displayed in a drop down list with the current selection appearing in the top box.

A second draw mode option is Screen Draw which unlike Geo Draw keeps the drawing or text stationary on the screen. The drawing does not move or change location despite moving the map or virtual globe or zooming in and out during the session. This is useful for titles or key information that the Leader may want to be seen throughout the session.

A third draw mode is Spline. After setting the line color and width the Spline selection allows entry of cardinal points onto the drawing surface. The cardinal points may be identified by text an Icon or logo selected from previous Text command . The user can place the Splines at any altitude and once at least three points are entered they can click a Make Spline selection to draw a cardinal spline e.g. a curve that passes smoothly through the defined cardinal points.

All of the foregoing objects drawn using the Draw Tool are automatically saved as individual geolocated draw files such as for example Keyhole Markup Language KML or other geolocated files. KML is an international standard of the Open Geospatial Consortium and is a known file format used to display geographic data in geobrowsers such as Google Earth. A KML file is processed in much the same way that HTML and XML files are processed by web browsers. Each KML file becomes a layer to be used in the geobrowser.

Referring back to the Show Layers control can be used to selectively view or not view any of the layers or above drawn objects. Clicking on Show Layers control opens a Sidebar window inset top left which lists a tree view index listing all defined layers. Buttons at bottom allow the user to turn off layers change their visibility hide them and refresh the list. There are two different parent directories Places where new user defined layers are listed and Layers for embedded ASP defined layers such as places of interest and other features . Each layer loaded into the CMM by the Leader will be listed in the Show Layers Sidebar. Clicking Refresh bottom reloads the list of layers. The Leader is free to turn layers on and off by clicking in the Show Layers Sidebar to select the layer and then clicking the Change Visibility button at bottom. The Hide All Layers button turns off the visibility of all the layers. As seen in the Participants also have a Show Layers control which opens the Show Layers Sidebar but the bottom buttons are not available to Participants.

Clicking on the Screen Capture button allows the user take a snapshot of the user s desktop with the geobrowser and the current view and layer visibilities. For Participants the captured image appears in a separate window with the options File Share and Help a help function . Clicking on File allows them to Save As a file on the local client hard drive. The default image type is PNG but the file format can also be JPEG GIF or any other image format. If the Leader clicks Screen Capture the captured image is automatically saved in two locations as three separate files at one time and immediately made available for sharing over the Internet. The file is saved locally as well as on Host . Thus if the Leader clicks Share the file may be viewed by other Participants. The Share control is a Leader only function that is disabled for Participants. This function allows other participants who do not have the tool installed to be able to follow the collaboration session using any web browser. The Screen Capture function can be programmed to automatically capture screen images at pre determined intervals.

The Touch Pan Zoom control gives the user control of their global location and view in the geobrowser. By clicking on the Touch Pan Zoom button on the Leader panel a new window will pop open titled Touch Control middle left inset . This panel provides Touch Controls for changing the angle of the view of the geobrowser. Tilting Up or Down changes the view from aerial to above the map or virtual globe in 3D space. Rotating Left or Right moves the map or spins the virtual globe left or right. Users may also Zoom In or Out to a location on the map or virtual globe. Users may click and drag the panel to a different location on the desktop by using the Move button. When finished adjusting the view users click Hide to close the Touch Control window.

The Animate Controls allows control over time animations loaded in the collaboration session. Clicking the Animate Settings button launches the Animate window of from which the user can control the settings for animating and looping.

The Time Step control allows text entry or slider control to define the temporal distance between frames during the animation sequence. This interface allows the user to set the direction is forward is reverse and the magnitude of the time difference between frames in units of the user s choice.

The Animation Frame Rate likewise allows text entry or slider control to define the speed for frame advance during the animation sequence. This interface allows the user to set the magnitude of the frame rate in units of frames per second.

The Time Interval shows Get and or defines Set the temporal separation of the current time interval t2 t1 or span displayed by the geobrowser. During animation the length of this time interval is constant as time t1 and t2 are advanced in increments or decrements of Time Step. This interface allows the user to set the magnitude of the time span in units of the user s choice.

The Animation Dwell middle right defines a wait time at the end of the animation sequence before starting the animation again loop . This interface allows the user to set the magnitude of the wait in an integer Number of Time Steps.

Referring back to the Leader can click the Show Users button which pops open a Session Portal window displaying the user names of the participants currently logged into the session. Clicking on the user name displays a web page with contact information for that participant and other relevant information user location status etc. .

Once a session has been created and entered by the user it can be populated with data in the form of Open Geospatial Consortium OGC compliant KML KMZ files and WMS Web Mapping Service links or any geospatial files compatible with the geobrowsers e.g. Google Earth World Wind Google Maps ESRI ArcExplorer ESRI desktop ESRI Flex Viewers API etc. . There are two ways in which a session Leader can load files through a full web URL or from a file saved locally on the Leader s computer . Four buttons are made available at the bottom of the Leader Participant window as Leader Send Time Send URL Send Local and Create Book Mark .

 Send Time is used to unify the Participants to the same time in the geobrowser time scale bar as the Leader. When multiple products have been loaded into a session with time stamps the collaborators may not be viewing the same frame s in the time series as the others or the Leader. The Leader can prevent correct this problem by clicking Send Time after each time stamped product is loaded in the session.

By clicking on Send URL the Leader will launch a new window titled Load KML URL . A fully customizable browser window with direct links to data resources in addition to a text box is available for entering the web address that links directly to a KML or KMZ file. Using the browser window the Leader navigates to manually enters or pastes the URL for a KML KMZ file. The GOTO URL option will prompt the user to either open the file or save it locally on the hard drive. The Send URL option will send the link to Host as a command for retrieval by all collaborating client CMMs and share it for collaboration. The KML KMZ files and datasets associated are downloaded directly from the Internet link URL by all the collaborators.

By clicking on Send Local button the Leader will launch a new window titled Load KML Local . A folder and file browser and a text box is available for entering the file destination that links directly to a local KML or KMZ file. Since these KML KMZ files are stored on the Leader computer and are shared through the Host each file must be first uploaded to and downloaded from the Host and then loaded to the CMM on client stations . Local KML KMZ files sent in a collaboration can link to external data from the Internet if desired.

At any time a placeholder can be created by clicking Create Book Mark button . This opens a pop up box that allows the Leader to type the name of the Book Mark and save it. The bookmark serves as a pause point during the loading of a session. When others log into and join that session and select Pause Bookmarks each data item will load until it gets to the book mark that the Leader created. It will stop at the book mark until the participant clicks Continue in the pop up window containing the name of the bookmark. Multiple bookmarks can be created in any session by the Leader either ahead of time before a briefing or during collaboration.

As an example a World Wind Plugin was developed for the WW.Net version 1.4 in the C language using Visual Studio 2008. The CMM plugin can be loaded via the World Wind geobrowser Tools menu by clicking the appropriate plugin entry labeled for example Envirocast as shown in .

This opens the session manager graphical user interface GUI shown in for controlling and managing the collaborative session s . As above the session manager GUI provides controls for joining following and leading a collaboration session. To join an existing session on network location evcm2 user enters the session title e.g. test01 and clicks the Join command button.

The interface will advance to the first sequence command 000000 of the master Session command files for example 0 0 POV and World Wind initializes to the default position which is shown in the POV textBox listings as described below. The User then clicks the Advance command button to step through the session sequence commands listed in the lower left hand corner of the interface .

As seen at right there are separate control buttons described above to allow the lead collaborator to obtain and or change the Point Of View POV e.g. the camera view allowing users to move around and zoom in and out of the geobrowser.

The final WW.Net implementation defines POV in using all of the following parameters seq time pov Lon Lat alt tilt head speed where 

head bearing of the globe about focus point in decimal degrees 0.0 speed for movement to pov as defined by Google Earth. 1 sec

There is a checkbox bottom right for Auto timer Load. When checked the auto timer steps through the command stack one by one without manual intervention. This has the same effect as user pressing the Advance button once per second.

If user is not following a session user can get set the POV at any time using the get POV and set POV command buttons.

The user can enter any sequence number and then click Advance to jump to any existing sequence number in the session. Note that the max sequence number is provided on the left side of the interface just under the session name.

For World Wind JAVA WWjava a similar plugin has been developed compiled and run using both the NetBeans Integrated Development Environment IDE and Eclipse IDE. The java CMM plugin runs from Eclipse to create a similar control interface GUI.

Several successful collaborations have been performed both over local networks and over the interne on multiple Microsoft Windows platforms XP Vista and Windows 7 . Multiple collaborative POV changes and dataset sharing were performed between three different geobrowsers 

All collaboration sessions were conducted by a lead collaborator with any number of collaboration participants all using the foregoing geobrowsers of choice. Regardless of geobrowser the cross platform architecture of the present system allows each participant to connect to a collaboration session and all the functions performed on the lead collaborators geobrowser are executed across all the collaboration participants geobrowsers. Dataset loading layer stacking Point of View POV changes animation settings and annotations are replicated across all the connected geobrowsers effectively creating a true geospatial Common Operating Picture COP and full real time situational awareness. Moreover the lead follow protocol by which lead collaborator functions can be passed on to any of the other participants in the collaboration at any time builds upon the collaborative COP.

It should now be apparent that the above described geobrowser collaboration system provides both the platform and protocol for synchronizing and sharing information among multiple remote geobrowsers in a most effective collaborative way which greatly facilitates decision making in emergency and other situations. The lead follow protocol in which all the functions performed on the leader s geobrowser are executed across all the collaboration participants geobrowsers including dataset loading layer stacking Point of View POV changes animation settings and annotations creates a true geospatial Common Operating Picture COP for the most comprehensive situational awareness possible.

