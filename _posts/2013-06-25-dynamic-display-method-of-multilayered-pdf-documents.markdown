---

title: Dynamic display method of multi-layered PDF documents
abstract: A method for dynamic display of at least one layer in a PDF document, comprising the steps of setting at least one criterion for at least one property of a trigger to change a display state of the at least one layer of the PDF document to another display state of the at least one layer of the PDF document, creating a script that can be processed by a PDF document reader and that contains the at least one criterion for the at least one property of the trigger, and embedding the script in the PDF document, wherein when the PDF document is opened by the PDF document reader, the script causes evaluation of the at least one property for the trigger, and if the at least one criterion for the at least one property of the trigger is met, then the script causes a change of the display state of the at least one layer of the PDF document.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09330066&OS=09330066&RS=09330066
owner: KONICA MINOLTA LABORATORY U.S.A., INC.
number: 09330066
owner_city: San Mateo
owner_country: US
publication_date: 20130625
---
This invention relates to a method of displaying digital documents in portable document format PDF and in particular it relates to a method for dynamically displaying multi layered PDF documents.

PDF is a popular format for generating distributing and displaying digital documents. Many PDF documents are generated with one or more embedded optional content group OCG layers. For example a document intended to be read by people reading different languages may have multiple layers where each layer contained text and images in one of many languages. With this multi layered document a user may select a particular one of the many languages to display the document in that particular language without having to download a new version of the document for that language.

It is desirous to provide a method for dynamically displaying PDF documents embedded with multiple layers so that users may choose to display only the contents satisfying certain predetermined criteria.

The technique of embedding PDF documents with multiple layers makes it possible to have many sets of visible and invisible contents embedded in PDF documents to show or hide different contents intended for different purposes.

For example dynamic contents may be embedded in PDF documents based on locations. With the wide use of global positioning system GPS enabled devices nowadays it is much more relevant to serve location based contents especially in PDF documents. PDF documents can have location based dynamic contents embedded in layers to create a better user experience by allowing content creators to target audiences by location and modify the display of location based layers accordingly. One example of location based use of PDF documents may be to change the language of a PDF document based on the location that the PDF document is opened. Another example of location based use may be related to electronic vouchers i.e. electronic coupons presented in PDF documents where the location based layers can show where the voucher can be redeemed preferably at a location near the user.

For another example time centric contents may be embedded in PDF documents to allow the content creator to show hide contents at desired time thresholds. For example in an academic environment One example may be showing answers on a test by displaying an answer layer in a PDF document for only a limited amount of time and upon expiration of the time period hiding the answer layer and instead showing a Void label layer after the time expiration.

For a further example electronic books or publications in PDF may have advertising contents embedded in layers. Having commercial advertisement can help reduce the price of the electronic books or publications. If a user does not want to see advertising contents embedded as dynamic layers in an electronic book or publication the user can choose to pay a higher price so that the advertising layers are hidden from display.

The exemplary embodiments of the present invention are directed to a new and useful method for dynamically displaying PDF documents embedded with multiple layers of various contents. Showing or hiding a particular layer may get triggered by a set of predetermined criteria including location timing access control policy etc. Depending on whether a particular one of the criteria is triggered a corresponding layer of a PDF document may be triggered showing or hiding the contents of that layer of the PDF document.

The features and advantages of the present invention method include increased reach of electronic PDF documents to multiple audiences with contents unique for their location. By storing location specific contents in multiple layers a single PDF document can be customized to be used by users of different demographics. Digital document management for electronic distribution can also be simplified with fewer PDF documents to maintain.

The features and advantages of the present invention method also include added control for content creators who can choose how long to show hide the display of various layers in PDF documents. The time based dynamic display of multi layered PDF documents also allow content creators to timely update the content in the PDF documents. For example displaying a Void layer after a certain date on vouchers or creating a container on an advertisement layer that can have its content updated online after a certain time period.

The features and advantages of the present invention method further include added functionality in printed documents by using dynamic multi layered PDF document. For example a user may choose to print any combination of questions and answers if those have been stored as layers in a PDF document. This can save printing resources such as papers toners and or inks.

Additional features and advantages of the invention will be set forth in the descriptions that follow and in part will be apparent from the description or may be learned by practice of the invention. The objectives and other advantages of the invention will be realized and attained by the structure particularly pointed out in the written description and claims thereof as well as the appended drawings.

To achieve these and or other objects as embodied and broadly described one of the exemplary embodiments of the present invention provides a method for dynamic display of at least one layer in a PDF document comprising the steps of setting at least one criterion for at least one property of a trigger to change a display state of the at least one layer of the PDF document to another display state of the at least one layer of the PDF document creating a script that can be processed by a PDF document reader and that contains the at least one criterion for the at least one property of the trigger and embedding the script in the PDF document wherein when the PDF document is opened by the PDF document reader the script causes evaluation of the at least one property for the trigger and if the at least one criterion for the at least one property of the trigger is met then the script will cause a change of the display state of the at least one layer of the PDF document.

In a further aspect another one of the exemplary embodiments of the present invention provides a computer software program product that causes a data processing apparatus to perform the above described methods. The computer program product includes a computer usable non transitory medium e.g. memory or storage device having a computer readable program code embedded therein for controlling a data processing apparatus the computer readable program code configured to cause the data processing apparatus to execute the above described processes.

It is to be understood that both the foregoing general description and the following detailed description are exemplary and explanatory and are intended to provide further explanation of the invention as claimed.

Embodiments of the present invention provide a method for dynamically displaying multi layered PDF documents.

One exemplary embodiment of the present invention provides a process for creating a multi layered PDF documents with dynamic display settings for each layer based on properties such as location time access policy etc. A stand alone application or a plug in module for an existing PDF document creation application may be used for this process. The application or plug in module will generate a PDF script of the dynamic display settings and embed the PDF script in the multi layered PDF document. The embedded PDF script can be universally read by commonly used standard PDF readers. When the multi layered PDF document is opened by a PDF reader the embedded PDF script is read as well which may or may not modify layers displayed based on the dynamic settings. Based on the script the reader may utilize web service calls for any required calls such as discerning location from an IP address getting the current time from a legitimate source obtaining a document time expiration policy or getting user access policy. With these property information the PDF reader can show or hide a particular layer of the PDF document based on the dynamic settings contained in the PDF script.

Referring to there is shown a schematic block diagram illustrating an exemplary online system set up or arrangement in which various embodiments of the present invention may be implemented. The exemplary online environment includes a user or customer computer or terminal a content creator server operated by an online digital document production distribution storage and or management service provider such as a publisher a bookstore etc. one or more servers operated by third party content or web service providers and one or more rights management servers operated by digital rights management systems RMS or copyrights management centers all connected via one or more computer networks such as the Internet or other communication links.

A user or customer may use the computer or terminal or similar suitable devices such as a laptop computer a tablet computer an e reader or a smart phone etc. to access the computer network and interact with the content creator or publisher the third party content or web service providers and the RMS or copyrights management center managers. A content creator or publisher may use the server to access the network and interact with the users or customers the third party content or web service providers and the RMS or copyrights management center managers. Likewise the third party content or web service providers and RMS or copyrights management center managers may use their respective servers and to access the network and interact with each other and with the content creator and users.

The content creator or publisher generally can provide an integrated online service via server that allows users to search purchase download and or access PDF documents. The third party content or web service providers generally can provide online information via their servers . The RMS or copyrights management centers generally can provide user access authorization or policy information for particular PDF documents.

Computers and servers and may be computers server computers or computer or server systems such as webservers where the computer software program s and or application s implementing the various processes of the exemplary embodiments of the present invention may be installed and executed.

Typically these computers and servers provide a user interface UI or graphic user interface GUI to allow users or operators of the computers and servers to interact with the computer software programs and applications to perform various steps of the process.

In this Application the term server generally refers to any computer server server computer server instance computer or server system data processor controller data processing unit or apparatus or any suitable system apparatus or device and any computer software program or application that are installed or executed on such system apparatus or device that may be used to implement the methods or carry out the processes provided by the embodiments of the present invention.

A user or customer may access the computers and server or by using computer programs or applications on the user or customer s own computer or on server or that the user or customer can access through the user computer or terminal via the Internet .

The physical locations or the commercial relationship among the various components of the online environment shown in are not important. For example the RMS server may be located in an educational institution a copyrights clearing house a professional print shop or any suitable commercial establishment.

As mentioned earlier in one aspect an exemplary embodiment of the present invention is embodied a computer program product that causes a data processing apparatus to perform the exemplary embodiments of the methods of the present invention. The computer program product includes a computer usable non transitory medium e.g. memory or storage device having a computer readable program code embedded therein for controlling a data processing apparatus where the computer readable program code is configured to cause the data processing apparatus to execute the process of exemplary embodiments of the present invention.

Referring to there is shown a schematic block diagram illustrating an exemplary server whereupon various embodiments of the present invention may be implemented. The server typically includes a user input device including for example a keyboard and a mouse. The input device may be connected to the server through a local input output I O port to enable an operator and or user to interact with the server . The local I O is also provided for local connections via direct links to other electronic devices such as a file storage a monitor and or a printer.

The server typically also has a network I O port for connection to a computer network such as the Internet so that the server may remotely communicate with the other computers and servers connected to the computer network.

The server typically has a data processor controller unit such as a central processor unit CPU that controls the functions and operations of the server . The data processor controller unit is connected to various memory devices such as a random access memory RAM device a read only memory ROM device and a storage device such as a hard disc drive or solid state memory. The storage device may be an internal memory device or an external memory device such as a file storage device.

The computer software program codes and instructions for implementing the various embodiments of the present invention may be installed or saved on one or more of these memory devices. For example program codes and instructions may be stored in the ROM device and the storage device and the data processor controller unit may read the program codes and instructions from the ROM device or the storage device and temporarily store them in the RAM device during execution of the software programs. The data processor controller unit executes the computer software programs to perform the functions and carry out the operations to implement the process steps of the various embodiments of the present invention.

The server typically also includes a display device such as a video monitor or display screen which may be connected to the local I O . The input device and the display device together provide a user interface UI which allows a user to interact with the server to perform the steps of the process according to the various embodiments of the present invention.

The input device and the display device may be integrated into one unit such as a touch screen display unit to provide a more easy and convenient UI for user interaction with the server .

It is understood that the server may be any suitable computer or computer system. Preferably for use for example by a content creator the server may be a webserver. However for use by a member of the general public the server may be a desktop computer a laptop computer a notebook computer a netbook computer a tablet computer a hand held portable computer or electronic device a smart phone or any suitable data processing apparatus that has suitable data processing capabilities.

Referring to there is shown a flow chart diagram illustrating an exemplary process for creating multi layered PDF document with dynamic display settings according to one of the embodiments of the present invention. The description herein of the structures functions interfaces and other relevant features such as digital rights policies application programming interface API for PDF reader programs etc. may at times incorporates references or otherwise uses certain information documents and materials from publicly and readily available and accessible open sources including for example on what is OCG and creating and scripting OCG etc. see e.g. http www.planetpdf.com developer article.asp ContentID focus on pdf layers ocg  on creating and manipulating OCG see e.g. http acrobatusers.com tutorials create use layers on Acrobat JavaScript scripting reference see e.g. http www.adobe.com content dam Adobe en devnet acrobat pdfs js api reference.pdf on Adobe page for Acrobat Javascript see e.g. http www.adobe.com devnet acrobat javascript.html on examples of soap request from Javascript for Acrobat for talking with web services see e.g. http forums.adobe.com thread 286061. It is noted that several terms used herein such as Acrobat Javascript and other terms related thereto are trademarks of Adobe Sun Microsystem etc.

As shown in the process begins at Step S where the content creator creates a PDF document with multiple layers where the content creator creates a multi layered PDF document by using a commercially available application such as Adobe Illustrator CS or Adobe InDesign . The multi layered PDF documents are created to support display settings for each layer based on properties of for example location time user access policy etc. Dynamic contents may be incorporated into PDF documents by embedding for example Rich Internet Application RIA containers into a layer. The process of inserting RIA containers into PDFs is supported by for example Adobe s LiveCycle Designer module.

At Step S the content creator will use a new stand alone application or a plug in module to the existing PDF document creation application to provide a UI for setting triggers for dynamic display of the multiple layers of the PDF document in accordance with the embodiments of the present invention. As an example the new plug in for Acrobat Reader may be written by using Adobe s Acrobat Software Developer Kit SDK .

Referring to there is illustrated an exemplary display of the UI preferably shown on a display screen of the content creator server in accordance with the embodiments of the present invention. By using this UI an operator of the content creator server can set or modify the dynamic layer display settings for each layer of a multi layered PDF document based on predetermined properties.

The properties that may trigger dynamic layer display may range vastly. While location time and policy properties are discussed in detail below they are merely examples of many possible predetermined properties that may be utilized in the embodiments of the present invention. In fact the off loading ability of the computers and servers used by a user opens up many different capabilities as long as the user has an Internet connection.

Referring to together at Step S a content layer is selected to set its dynamic display triggers. As seen in a display box showing a list of all content layers created in the PDF document is provided at the upper left part of the UI display. A slider or scroll bar is provided to scroll down the list so that any layer on the list may be selected by highlighting the layer. For example as shown in Layer 4 is selected.

For each layer the associated data objects include for example the layer name its initial state i.e. either to be shown or hidden by default its show triggers and its hide triggers. For example as seen in for Layer 4 its initial state is hidden by default since the small check box of show by default at the upper middle part of the UI display is not checked. However at Step S as shown in the default display setting of a layer may be set or modified. For example an operator of the content creator server may make the initial state of Layer 4 to show by default by checking the small check box of show by default at the upper middle part of the UI display shown in .

The show and hide triggers of each layer may include location trigger time trigger policy trigger etc. The location trigger of a layer contains the criteria to determine if the layer will be shown or hidden at a given location where the PDF document containing the layer is opened. The time trigger of a layer contains the criteria to determine if the layer will be shown or hidden before a given expiration time or due date and or for how long the layer will be shown or hidden when the PDF document containing the layer is opened. The policy trigger of a layer contains the criteria to determine if the layer will be shown or hidden under an access policy for a given user who opens the PDF document containing the layer. If a layer has no show hide trigger then it will be shown or hidden according to its initial show hide state.

For example as seen in for Layer 4 its triggers for showing the layer include location and time triggers. The property for the location trigger is set to United States and the property for the time trigger is Feb. 25 2013 so that if the PDF document is opened at a location within the United States on or before Feb. 25 2013 then Layer 4 will be shown. At Step S shown in the show hide triggers and their properties of the selected layer can be set or modified.

At Step S of the above described steps S through S may be repeated for all layers that are desired or required to be dynamically displayed. It is not necessary to go through all the layers to set their dynamic display triggers and their properties. Rather the content creator only needs to go through the layers for which dynamic display are desired or required.

At Step S of a dynamic display settings script is generated or created after the show hide triggers and their properties of all layers that are desired or required to be dynamically displayed have been set. This script is generated or created by the new stand alone application or plug in module at the content creator server in a scripting language that a commonly available standard PDF reader can run when the PDF document is opened and that can also dynamically control the appearance of layers in the PDF document. For example the new stand alone application or plug in module for Acrobat Reader provided in accordance with the embodiments of the present invention may generate automated codes containing the settings of the triggers and their properties for the dynamic display setting script in JavaScript JS for Acrobat .

The dynamic display setting script will contain data objects for managing the display of the layers. For example it may contain data objects that define or indicate whether location time and or access policy need to be determined when the PDF document is opened. It may also contain web service information which is needed to set up a connection for retrieval of location time and or access policy information. It may further contain data objects for storing location time and or access policy information retrieved from the web services. It may even contain a constant time for comparing all timers needed for showing hiding the layers.

At Step S of the dynamic display setting script is embedded in the PDF document so that it can be processed when the PDF document is opened by a PDF document reader such as Adobe s Acrobat Reader or Acrobat s Acrobat Pro which allows JS to run and correctly display the multiple layers of the PDF document.

Steps S through S are preferably performed at the content creator server. Steps S through S are performed by executing the new stand alone application or plug in module provided in accordance with the embodiments of the present invention as described above.

Referring to there is illustrated an exemplary process for controlling the dynamic display of multi layered PDF documents. When a multi layered PDF document with the embedded dynamic display settings script is opened by a PDF reader the script will be processed and the PDF reader will allow the script to run to perform the steps shown in . Usually a user may open a multi layered PDF document with a PDF reader installed and executed on the user s computer so the steps shown in are typically carried out on the user s computer. Nonetheless these steps are performed as a result of running the embedded script created by the content creator server which script contains the data objects needed for control the dynamic display of the multiple layers in the PDF document.

Referring to at Step S the layers of the PDF document are shown or hidden according to their initial states respectively. For example for Layer 4 shown in its initial state is hidden by default. So initially at Step S Layer 4 of the PDF document will be hidden.

Referring back to at Step the dynamic display settings script is allowed to run to retrieve data from web services. Data is retrieved from web services if it is required for information such as location user access policy etc. Details of Step S will be described later with reference to .

As Step once the required information is retrieved the dynamic display settings script is allowed to run to check and activate triggers of layers for their dynamic display. Each layer will be shown or hidden in accordance to the criteria based on the trigger properties contained in the dynamic display settings script. If the criteria include a time based trigger then a timer is activated for that trigger. Again details of Step S will be described later with reference to .

Steps S through S are preferably executed when the PDF document is opened by a PDF reader. Optionally some or all of the steps may be executed at other times for example when a page of the PDF document comes to view or during other events related to viewing or otherwise using the PDF document.

Referring to there are shown the detailed steps of Step S of as mentioned above where the dynamic display setting script embedded in a PDF document is processed by a PDF reader when the PDF document is opened by the reader. If at Step S it is found that the script contains data objects that indicate that location data needs to be determined then at Step S the script calls upon or sends a request to a web service which will provide location data to back to the script. For example the web service may intercept the IP address or GPS data of the user s computer from which the script calls or sends the request which may be used to determine the general vicinity of the caller or sender. The web service then sends back the location information such as the name of the country or city where the user is located and at Step S the script stores such location information for later use in determining the dynamic display settings.

Likewise if at Step S it is found that the script contains data objects that indicate that user access policy data needs to be determined then at Step S the script calls upon or sends a request to a web service provided by a RMS provider or copyrights center which will provide details on what layers are supposed to be shown hidden based on the policy defined for the user. Any RMS or copyrights center that can host user policies will suffice as long as it can handle authentication authorization based on web service communication protocols such as the Simple Object Access Protocol SOAP . At Step S the script stores such user policy information for later use in determining the dynamic display settings.

Referring to there are shown the detailed steps of Step S of as mentioned above. At Step S a current time is obtained from a web service and stored as a data object of the script. This because that there may be a strict requirement on ensuring that the proper time is maintained or enforced which means that a time server needs to be contacted via a web service call from the script and that call will return an accurate current time.

Continuing on at Step S one of the layers is picked from the layer list which is also a data object of the script. For the layer that is being looked upon at Step S the show trigger criteria or properties of the layer are examined or evaluated.

At Step S it is checked whether any show trigger is set and the layer is hidden in its initial state. If no show trigger is set and the layer is shown in its initial state then the process proceeds to examine or evaluate the hide trigger criteria or properties at Step S. However if there is show trigger set and the layer is hidden in its initial state then at Step S it is checked whether a timer is needed i.e. whether the showing of the layer is time sensitive or time based. If a timer is not needed then at Step S it is checked whether the show trigger criteria or properties are met. But if a timer is indeed needed then at Step S a timer is set with a call back. The call back will be called when the timer is up to show the layer as intended.

If the result of Step S is that the show trigger criteria or properties are met then at Step S the layer is shown. Otherwise the process proceeds to examine or evaluate the hide trigger criteria or properties at Step S. For example if the location criterion or property is set at United States and the script call to a web service returns an indication that the IP address of the user computer from which the script call is made when the PDF document is opened by a reader running on that user computer indicates that the user computer is indeed located in the United State then the location triggered layer will be shown.

At Step S the hide trigger criteria or properties of the layer are examined or evaluated. At Step S it is checked whether any hide trigger is set and the layer is shown in its initial state. If no hide trigger is set and the layer is hidden in its initial state then the process proceeds to process the next layer on the list at Step S. However if there is hide trigger set and the layer is shown in its initial state then at Step S it is checked whether a timer is needed i.e. whether the hiding of the layer is time sensitive or time based. If a timer is not needed then at Step S it is checked whether the hide trigger criteria or properties are met. But if a timer is indeed needed then at Step S a timer is set with a call back. The call back will be called when the timer is up to hide the layer as intended.

If the result of Step S is that the hide trigger criteria or properties are met then at Step S the layer is hidden. Otherwise the process proceeds to process the next layer on the list at Step S. Of course the process will end after all layers on the layer list are processed.

The various embodiments of the present invention method have many advantages. For example dynamically displaying multi layered PDF documents increases the reach of PDF documents to wider demographic audiences with contents customized for the location of opening the PDF documents. By storing location based contents in multiple layers a single PDF document can be tailored for use by users of different geographies. Electronic distribution of PDF document is also simplified with fewer PDF documents to manage.

In addition dynamically displaying multi layered PDF documents adds greater control for content creators to decide how long the display of various layers in PDF documents may be shown or hidden. This time based display control of content layers also means that the content creators may make timely content update. For example a Void layer displayed on a voucher after a certain period of time makes the voucher more time sensitive and a time based container created on an advertisement layer allows its content be updated online periodically.

Moreover dynamically displaying multi layered PDF documents provides more functionality in printed PDF documents. For example when a user prints a document the user can choose to print any combination of questions and answers if they are stored as layers in a PDF document. This results in reduced use of valuable printing resources.

It will be apparent to those skilled in the art that various modification and variations can be made in the method and related apparatus of the present invention without departing from the spirit or scope of the invention. Thus it is intended that the present invention cover modifications and variations that come within the scope of the appended claims and their equivalents.

