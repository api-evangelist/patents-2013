---

title: Devices for providing secure remote access
abstract: A method for providing secure remote access by a controller is described. The method includes sending one or more endpoint requests. The method also includes receiving authentication service endpoint information and connection service endpoint information. The method further includes requesting authentication based on the authentication service endpoint information. Requesting authentication includes requesting license validation. The method also includes sending one or more registration messages based on the connection service endpoint information. The method further includes receiving a session request. The method additionally includes determining controller candidate link information. The method also includes sending the controller candidate link information. The method further includes receiving an automation message based on the controller candidate link information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09391966&OS=09391966&RS=09391966
owner: Control4 Corporation
number: 09391966
owner_city: Salt Lake City
owner_country: US
publication_date: 20130308
---
The present disclosure relates generally to electronic devices. More specifically the present disclosure relates to devices for providing secure remote access.

In recent years the price of electronic devices has decreased dramatically. In addition the types of electronic devices that can be purchased have continued to increase. For example DVD players large screen TVs multi carousel CD and DVD players MP3 players video game consoles and similar consumer electronic items have become more widely available while continuing to drop in price.

The decreasing prices and increasing types of electronic components have packed today s homes and businesses with modern conveniences. Typical homes and businesses now include more electronic devices than ever before. While these electronic devices may provide convenience and entertainment many also require control. Moreover these electronic devices consume electrical power and may consume other resources. The ever increasing cost of resources such as electricity may be a concern.

Some electronic devices communicate with other electronic devices over a network. However some difficulties arise in the context of network communications. For example security and ease of setup and use may be problematic. As illustrated by this discussion devices that improve communication security and ease of setup and use may be beneficial.

A method for providing secure remote access by a controller is described. The method includes sending one or more endpoint requests. The method also includes receiving authentication service endpoint information and connection service endpoint information. The method further includes requesting authentication based on the authentication service endpoint information. Requesting authentication includes requesting license validation. The method also includes sending one or more registration messages based on the connection service endpoint information. The method further includes receiving a session request. The method additionally includes determining controller candidate link information. The method also includes sending the controller candidate link information. The method further includes receiving an automation message based on the controller candidate link information.

Receiving the automation message may include receiving the automation message via at least one of a relay link and a peer to peer link. The controller candidate link information may include an internet protocol IP address and a port.

The method may also include receiving a controller session token. Additionally receiving the session request may be based on the controller session token.

A method for providing secure remote access by an electronic device is also disclosed. The method includes sending one or more endpoint requests. The method also includes receiving authentication service endpoint information and connection service endpoint information. The method further includes requesting authentication based on the authentication service endpoint information. The method also includes sending a session request based on the connection service endpoint information. The method further includes receiving controller candidate link information. The method additionally includes sending an automation message based on the controller candidate link information.

A controller that is configured for providing secure remote access is also disclosed. The controller includes a processor memory in electronic communication with the processor and instructions stored in the memory. The controller sends one or more endpoint requests. The controller receives authentication service endpoint information and connection service endpoint information. The controller requests authentication based on the authentication service endpoint information. Requesting authentication includes requesting license validation. The controller sends one or more registration messages based on the connection service endpoint information. The controller receives a session request. The controller determines controller candidate link information. The controller sends the controller candidate link information. The controller also receives an automation message based on the controller candidate link information.

An electronic device that is configured for providing secure remote access is also disclosed. The electronic device includes a processor memory in electronic communication with the processor and instructions stored in the memory. The electronic device sends one or more endpoint requests. The electronic device receives authentication service endpoint information and connection service endpoint information. The electronic device requests authentication based on the authentication service endpoint information. The electronic device sends a session request based on the connection service endpoint information. The electronic device receives controller candidate link information. The electronic device also sends an automation message based on the controller candidate link information.

Control systems may be used to manage and automate lighting music video security and other control systems in a premises e.g. homes businesses and residences etc. . Secure remote access for control systems may provide an end user the ability to easily access a control system from an electronic device e.g. personal computers and mobile devices from outside the premises while preventing unauthorized access to those same control systems.

There is a need for secure remote access to control systems to serve a large and growing community of end users. The end users may be geographically separated from the one or more controllers that they want to access. In addition a communications mechanism may need to securely negotiate through end user network security e.g. firewalls without end user configuration.

Remote access to control systems has traditionally been accomplished using virtual private network VPN connections port forwarding static internet protocol IP addresses and or dynamic domain name system DDNS . These approaches are problematic. For example these approaches may require providing an installer access to the end user s home to configure the home s router. Additionally the approach involves opening ports on the end user s router which introduces security risks to the home owner.

The systems and methods disclosed herein may be used to provide secure remote access to a controller. When the controller is installed it may be given credentials that may be used for remote access. Upon controller startup a remote access agent on the controller may use a communication network e.g. the Internet to reach a location service which may provide the controller the ability to discover appropriate endpoints for various services. The controller may use the location service information e.g. the endpoint information to contact an authentication service in order to be authenticated on the network. In response to an authentication request the controller may receive a controller session token from the authentication service. The controller session token may be used to register the controller on a connection service.

When a remote user attempts to connect to the controller using an electronic device the electronic device may use a communication infrastructure e.g. cellular phone network Internet etc. to reach the location service which may provide endpoint information for various services. The electronic device may then request authentication and receive a device session token from the authentication service. The electronic device may then connect to the connection service which may notify the controller about an in bound session request.

A remote access agent of the controller may receive the session request and may negotiate a link between the electronic device and the controller. The session may default to a relay service if a peer to peer link cannot be established directly.

Various configurations are now described with reference to the Figures where like reference numbers may indicate functionally similar elements. The systems and methods as generally described and illustrated in the Figures herein could be arranged and designed in a wide variety of different configurations. Thus the following more detailed description of several configurations as represented in the Figures is not intended to limit scope as claimed but is merely representative of the systems and methods.

The controller may include a remote access agent and an automation module . As used herein the term module may denote an element or entity that may be implemented in software hardware e.g. circuitry firmware or any combination thereof. The remote access agent may facilitate secure remote access to the controller as described below. The automation module may perform automation tasks e.g. send and or receive control messages to from controllable electrical equipment . For example the automation module may control one or more automation devices e.g. appliances other electronic devices etc. .

As used herein the term automation may refer to controlling a device by means of a controller for instance . For example in the context of home automation one or more controllers may control one or more automation devices which may perform an automation task. Examples of automation tasks include adjusting lighting operating and monitoring security systems controlling heating and air conditioning scheduling and operating water sprinkling adjusting window coverings controlling entertainment devices and controlling food preparation appliances etc. Examples of the one or more automation devices include lights and or lighting systems thermostats audio systems security cameras web cameras sprinkling systems security systems televisions game consoles computers etc. In some configurations the controller and the automation devices may comprise electronic devices in electronic communication over a network.

In one configuration a controller may issue one or more control messages to the automation device s . Upon receiving the one or more control messages each of the automation devices may perform an automation task. Additionally the control message may provide instructions for one or more automation tasks to be performed by the automation devices at the current time and or at a later time. The automation devices may further include programming functionality which may enable the automation devices to store and execute data and instructions.

Additionally or alternatively the automation device may send one or more messages to the controller . For example the automation device may send a response message to the controller . In some configurations and or instances the response message may provide data and or indicate the status of the automation device . The response message may be issued upon receipt of a control message. Additionally or alternatively the response message may be issued after completion of an automation task. The automation device may also periodically and or independently issue one or more response messages e.g. to inform the controller of the status of the automation device .

The controller the electronic device and or the automation device s may include communication functionality that may enable each to communicate over a network. Examples of the network may include local area networks LANs storage area networks SANs metropolitan area networks MANs wide area networks WANs or combinations thereof e.g. the Internet . In some configurations the controller and the automation devices may not reside at the same physical location within the same network segment or even within the same network. In other configurations the controller and the automation devices may be located at the same physical location e.g. within a home within the same network segment or even within the same network. Thus for example some devices e.g. the controller and the automation device s may reside at the same physical location e.g. within a home business building plot etc. but other devices e.g. the electronic device may not reside in the same physical location.

A variety of different network configurations and or protocols may be used by the controller the electronic device and or the automation device s including Ethernet transmission control protocol Internet protocol TCP IP user datagram protocol IP UDP IP Institute of Electrical and Electronics Engineers IEEE 802.11 IEEE 802.16 session initiation protocol SIP Bluetooth asynchronous transfer mode ATM fiber distributed data interface FDDI token ring wireless networks e.g. wireless telephone data network and or proprietary formulas and so forth including combinations thereof.

The controller may communicate with one or more services. One example of a service may be a web service. A service may for instance comprise software that enables interoperation over a network. For example a service may interact with the controller and or electronic device over a network. One or more services may be implemented on one or more servers that may be in communication with the controller and or electronic device over a network. Furthermore a service may provide one or more functions to the controller and or electronic device . Examples of services may include a location service an authentication service and a connection service . The controller and or electronic device may communicate with a service over a network using one or more communication protocols e.g. TCP IP hypertext transfer protocol HTTP SIP etc. .

The controller may communicate with the location service to obtain endpoint information for one or more services. The location service may store organize and provide a centralized directory for clients e.g. the controller and or the electronic device to look up e.g. receive endpoint information based on the one or more services provided by that endpoint. Endpoint information may include for example IP addresses port numbers host names and or domain names associated with an endpoint protocols and address types which may enable a client to establish a communication link with the endpoint. Additionally the location service may include listings of unauthenticated and authenticated service endpoints which may allow limiting by the location service for example exposure of the services only to authenticated clients. For example the location service may allow a client to lookup service endpoints based on a set of rules in order for the location service to return endpoints that are appropriate for the client to use. For instance these rules may include whether or not the client is authenticated and authorized to use one or more services multitenant specific services the type of client making the endpoint request and or the protocol used to access services e.g. Representational State Transfer REST ful versus Simple Object Access Protocol SOAP etc. .

The location service may be the main entry point for clients to discover available services and receive endpoint information to communicate with those services. For example an unauthenticated client calling e.g. communicating with the location service may only receive authentication service endpoint information initially for instance . Once the client has successfully authenticated a second call to the location service may return a list of available services e.g. the connection service an account service a relay service a Traversal Using Relays around Network Address Translation NAT TURN server etc. with which the client may communicate.

The controller may connect to the location service with an IP address for the location service that may be preconfigured on the controller during installation. Alternatively the controller may be programmed to search the network for an updated location service IP address.

Upon connecting to the location service the controller may send one or more endpoint requests to the location service . The location service may send one or more endpoint responses to the controller . In one configuration the endpoint response may include a single authentication service endpoint connection service endpoint and relay service endpoint. Alternatively the location service may send multiple endpoint responses where each response may include endpoint information for one or more endpoints e.g. an authentication service endpoint a connection service endpoint and or a relay service endpoint . Additionally or alternatively the endpoint response may include endpoint information for multiple endpoints for each service that the controller may select from while attempting to connect to the services. In yet another configuration the endpoint response may include controller candidate link information which may include IP addresses port numbers protocols and address types e.g. host relay server reflexive etc. with which the electronic device may attempt to establish a link with the controller .

The controller may contact an authentication service to be authenticated on the network. The authentication service may comprise a service with which the controller may communicate over the network using a communication protocol. The authentication service may verify that the controller has authorization to register its location with a connection service . For example the controller may include credentials e.g. one or more digital certificates and or one or more application keys that may be verified by the authentication service . In one configuration the credentials that the controller may send to the authentication service in the authentication request may be an X.509 digital certificate and an application key. The X.509 digital certificate may be issued to the controller when the controller is first installed or registered at the end user s home for instance . The controller may send an authentication request to the authentication service designated by the authentication service endpoint received from the location service . The authentication request may include the controller credentials.

Upon receiving the authentication request the authentication service may authenticate the controller . Authentication by the authentication service may include authenticating the controller credentials. For example the authentication service may verify that the digital certificate of the controller is valid not expired and or not revoked. The authentication service may additionally check the controller credentials to verify that the controller may have a valid license.

In some implementations requesting authentication via the authentication request may comprise requesting license validation. In one configuration the controller may send a digital certificate e.g. an X.509 digital certificate and an application key to authentication service in the authentication request . The authentication service may validate that the digital certificate is valid has not expired and is not revoked. If the digital certificate is successfully validated the authentication service may determine if the application e.g. the remote access agent and or the automation module associated with application key requires one or more licenses. If so the authentication service may verify whether the account associated with controller has the required license s whether the license s have not expired or been revoked and or whether the license s have not exceeded their limits. In some configurations the controller may only be authenticated after a successful certificate validation and license check. Authentication by the authentication service may additionally or alternatively include determining whether the controller belongs to a valid account and determining whether the controller is authorized to register on the network.

If the controller is successfully authenticated the authentication service may send the controller a controller session token . The controller session token may be a unique piece of data that may identify the controller in network communication.

The controller may contact a connection service in order to register the location of the controller . The connection service may comprise a service with which the controller may communicate over the network using a communication protocol. The connection service may negotiate a link between the controller and the electronic device .

In one configuration the connection service communicates with clients e.g. the controller and the electronic device using the SIP protocol. SIP is the acronym for Session Initiation Protocol Request For Comments RFC 3261 which is an Internet Engineering Task Force IETF protocol for initiating communication sessions for the client e.g. electronic device to the control system e.g. controller for example . SIP is an application layer control signaling protocol for creating modifying and terminating sessions with one or more participants. Parameters e.g. port numbers protocols etc. for the SIP communication may be defined and negotiated using the Session Description Protocol SDP which may be transported in an SIP packet body. SDP is an acronym for Session Description Protocol RFC 4566 which may be used to describe the format of endpoint messages. For example SDP may describe multimedia sessions for the purposes of session announcement session invitation and other forms of multimedia session initiation. The SIP messages used to create sessions may carry session descriptions that may allow participants to agree on a set of compatible media types. These session descriptions may be formatted using SDP. Both of these protocols SIP and SDP may be used to set up the final link from the electronic device and the controller . The combination of SIP SDP may facilitate the establishment of a secure link for communicating automation messages .

The controller may send a registration message to the connection service . The registration message may include the internal and external IP addresses of the controller and the controller secure token . After receiving the registration message the connection service may register the location of the controller for future session requests that may be sent by the electronic device . Additionally the connection service may verify the controller secure token before registering the controller . In one configuration the controller periodically resends e.g. every three minutes a registration message to the connection service in order to keep the connection to the connection service alive and traceable back to the controller . By registering with the connection service the controller may traverse the network address translations NATs thereby increasing network security by avoiding port forwarding and VPN connections in order to traverse the NATs.

An electronic device may include an automation application . The automation application may include hardware and or software that may enable communication with the controller . For example the electronic device may comprise a smart phone that includes an automation application as an executable program. The automation application may additionally include an application key that may be used to validate an application. For example the application key may be hardcoded in the automation application or may be assigned by a service. For instance a service for identifying applications may be implemented. In some configurations the electronic device may call the authentication service with a user identification ID password and or application key. The application key may be stored in or by the automation application . In some configurations the application key may be given out of band to validate an application e.g. not an instance of an application . An end user may run the automation application which may utilize the hardware of the electronic device e.g. cellular network hardware wireless network hardware etc. to access the network. Another example of the electronic device is a laptop that may access the Internet through a wireless e.g. Wi Fi network connection and on which the automation application may be run.

The electronic device may send one or more endpoint requests to the location service . The location service may send one or more endpoint responses to the electronic device . As described above the endpoint response may include the endpoint information for various services that may facilitate secure remote access to the controller . For example one or more endpoint responses may include endpoint information for one or more authorization service endpoints and or one or more connection service endpoints. Additionally the one or more endpoint responses may include device candidate link information which may include IP addresses port numbers protocols and descriptions of the type of IP address e.g. host relay server reflexive etc. to which the controller may attempt to establish a link with the electronic device .

The electronic device may send an authentication request to the authentication service in order to be authenticated on the network. The electronic device may contact the authentication service designated by the authentication service endpoint received from the location service . The authentication service may verify the identity of the electronic device .

In some implementations the authentication service may assess or validate credentials e.g. username password and or an application key sent from the electronic device . For example authentication service may validate that the username and password are valid. If the username and password are successfully validated the authentication service may determine if the application e.g. the automation module associated with application key requires one or more licenses. If so the authentication service may verify whether the account associated with the end user has the required license s whether the license s have not expired or been revoked and or whether the license s have not exceeded their limits. In some configurations the controller e.g. a user for an application may only be authenticated after a successful certificate validation and license check. The authentication service may also determine whether the electronic device has authorization to access the controller . Once the authentication service has verified the identity of e.g. authenticated the electronic device the authentication service may send a device session token to the electronic device . As described above the device session token may identify a communication session and or the electronic device for network communication.

The electronic device may contact a connection service in order to negotiate a link to the controller . The electronic device may send a session request to the connection service . The session request may identify the controller that the electronic device is attempting to access. The session request may additionally include the device session token and device candidate link information . For example the device candidate link information included with the session request may include multiple IP addresses of the electronic device . For instance these IP addresses may comprise private IP addresses e.g. 192.168.x.x or 10.x.x.x based IP addresses and a public IP address of the network provider.

Upon receiving the session request the connection service may verify e.g. validate that the electronic device is authorized to access the controller . The connection service may send a verification request to the authentication service . The verification request may include information identifying both the controller and the electronic device . For example the verification request may include the controller session token and the device session token . If the authentication service verifies that the electronic device is authorized to access the controller the authentication service may send a verification message back to the connection service . Upon receiving the verification message the connection service may send the session request to the controller . The session request may additionally include the device session token and device candidate link information . The connection service may determine the location of the controller based on the IP address designated by the registration message sent by the controller .

Upon receiving the session request the controller may determine controller candidate link information based on the type of link that may be established with the electronic device . In one configuration the controller may receive controller candidate link information in the endpoint response from the location service . In another configuration the controller may contact the location service after receiving the session request in order to obtain the controller candidate link information . In some configurations the controller candidate link information may include one or more of IP addresses port numbers protocols and address type e.g. host relay server reflexive etc. to which the electronic device may attempt to establish a link with the controller .

In one configuration the controller may include its own information in the controller candidate link information in order to attempt to establish a direct link e.g. peer to peer link or communication with the electronic device . With a direct link the controller and the electronic device may establish a link without an intermediary e.g. relay service linking the controller and the electronic device . For example a peer to peer link may be established based on a set of protocols that determines a best available way to establish a direct connection without the need for a relay. A direct link may be negotiated via the connection service between the controller system and the electronic device . The connection service may allow both the controller and the electronic device to discover and securely relay their externally accessible IP address and ports to each other so that they may attempt to establish the direct link . For example the controller may receive the IP address for the electronic device in the session request . In order to negotiate a direct link the controller may include its own IP addresses e.g. internal and external port numbers protocols and address type e.g. host relay server reflexive etc. in the controller candidate link information

In another configuration the controller may allocate a relay link with one or more relay services and include the connection information of the one or more relay e.g. TURN services in the controller candidate link information . For example the controller may initiate a relay link with one or more relay services as described in more detail below in . The one or more relay services may send to the controller the IP address es port number s protocol s and address types for the one or more relay services. The controller may include the IP address es port number s protocol s and address types for the one or more relay services in the controller candidate link information . Additionally or alternatively the relay services may send to the controller a host name and domain name to which both the controller and the electronic device may connect.

Upon determining the controller candidate link information the controller may send a session response to the connection service . The session response may include the controller candidate link information . Upon receiving the session response the connection service may send the session response to the electronic device .

Upon receiving the session response the electronic device may attempt to establish the link to the controller based on the controller candidate link information and the device candidate link information . In one configuration the electronic device and the controller may attempt to negotiate a direct link . The electronic device may contact the controller based on the controller s connection information e.g. IP addresses and port numbers included in the controller candidate link information . Additionally the controller may contact the electronic device based on the electronic device s connection information e.g. IP addresses and port numbers included in the device candidate link information . In some configurations if the controller and the electronic device may communicate directly with each other the direct link e.g. peer to peer connection is established. Once the direct link may be established the electronic device may access the controller e.g. send an automation message .

In another configuration the controller and the electronic device may attempt to establish a relay link based on the IP address es and port number s of the one or more relay services that may be included in the controller candidate link information . The relay link may be established as described below in .

In yet another configuration the controller and the electronic device may first attempt to establish a direct link using the other s candidate link information e.g. IP address es port s protocol s and or address type . If the controller and the electronic device are unable to establish a direct link and or the direct link is unreliable the controller and the electronic device may negotiate or attempt to establish a relay link based on the connection information for the one or more relay services included in the controller candidate link information or based on the relay candidate allocated on a relay service by the controller for example .

Upon establishing the link between the electronic device and the controller the electronic device may send an automation message to the controller . The automation message may include instructions that may be implemented by the controller . For example the automation message may instruct the controller to initiate one or more automation tasks e.g. change the temperature of the home turn off the lights arm a security system etc. Additionally or alternatively the automation message may request information from the controller e.g. security system status security camera feed current thermostat setting energy consumption lighting system status sprinkling system schedule etc. . It will be appreciated that messages may also be sent from the controller to the electronic device across the link . For example the electronic device may receive messages from the controller in response to the automation message .

In some configurations upon establishing the link between the controller and the electronic device the connections with the other services may be terminated. For example after the controller and the electronic device have established the link the connection service may terminate its connection with the electronic device . Therefore terminating obsolete connections may reduce network congestion and improve the scalability of the system.

The controller may receive authentication service endpoint information and connection service endpoint information. For example the controller may receive one or more endpoint responses that may include authentication service endpoint information and connection service endpoint information. In one configuration the controller may receive the authentication service endpoint information and the connection service endpoint information in a single message sent from the location service . Alternatively the controller may receive the authentication service endpoint information and the connection service endpoint information in separate messages sent from the location service . In yet another configuration the endpoint response may include controller candidate link information which may include IP addresses port numbers protocols and address types e.g. host relay server reflexive etc. to which the electronic device may attempt to establish a link with the controller .

The controller may request authentication based on the authentication service endpoint information. For example the controller may send an authentication request to an authentication service that may be designated by the authentication service endpoint information received from the location service . In one configuration the authentication request may include credentials e.g. one or more digital certificates and or one or more application keys that may be included with the controller . The authentication service may assess the controller credentials and validate the controller . Additionally or alternatively the authentication service may check the controller credentials included in the authentication request to verify that the controller may have a valid license. If the controller credentials are successfully authenticated and or the license is validated the authentication service may send a controller session token to the controller which the controller may distribute in order to establish secure communication sessions on the network.

The controller may send one or more registration messages based on the connection service endpoint information. For example the controller may send a registration message to a connection service designated by the connection service endpoint information received from the location service . The registration message may include the internal and external IP addresses of the controller and the controller secure token . The connection service may authenticate the controller secure token in order to determine if the controller is authorized to register with the connection service . If the controller is authorized to register the connection service may register the location of the controller . In one configuration the controller may send a single registration message . Alternatively the controller may send multiple registration messages . For instance the controller may send a registration message every three minutes in order to maintain its registration with the connection service .

The controller may receive a session request . For example the controller may receive a session request that is forwarded from the connection service with which the controller is registered. The session request may originate from an electronic device . After the connection service verifies that the electronic device is authorized to access the controller the connection service may send the session request to the registered location of the controller . The session request may indicate that the electronic device would like to establish a link with the controller . Furthermore the session request may include the device candidate link information and a device session token .

The controller may determine controller candidate link information . For example the controller may determine controller candidate link information based on the type of link that may be established to the electronic device . For instance if a direct link may be established the controller candidate link information may include the IP addresses e.g. internal and external and port number of the controller . Additionally or alternatively the controller candidate link information may include an IP address and a port number for a relay service. In some configurations determining the controller candidate link information may include receiving connection information from a relay service location service and or a connection service . Additionally or alternatively determining the controller candidate link information may include obtaining and or setting controller candidate link information e.g. IP address and or ports protocols address types etc. of the controller . In some configurations determining the controller candidate link information may include compiling information. For example the controller may receive controller candidate link information included in the endpoint response received from a location service . The controller may then add to the controller candidate link information in response to the session request . For instance the controller may include its own IP address es and port s and one or more relay service IP addresses and ports in the updated controller candidate link information

The controller may send the controller candidate link information . For example the controller may include the controller candidate link information in a session response sent to the connection service in order for the connection service to forward the session response and controller candidate link information to the electronic device .

In one configuration when the electronic device receives the controller candidate link information the controller and the electronic device may establish the link based on the controller candidate link information and the device candidate link information . Upon establishing the link to the controller the electronic device may send an automation message .

The controller may receive an automation message based on the controller candidate link information . For example the controller may receive the automation message directly from the electronic device if the controller and the electronic device establish a direct link based on the IP addresses and port numbers of the controller included in the controller candidate link information . Alternatively the controller may receive the automation message from a relay service if the controller candidate link information designated a relay service link . The automation message may instruct the controller to perform one or more automation tasks. For example the automation message may allow an end user to control the controller of a home automation system from a remote location.

The electronic device may receive authentication service endpoint information and connection service endpoint information. For example the electronic device may receive one or more endpoint responses that may include authentication service endpoint information and connection service endpoint information. The electronic device may receive the authentication service endpoint information and the connection service endpoint information in a single message sent from the location service . Alternatively the electronic device may receive the authentication service endpoint information and the connection service endpoint information in separate messages sent from the location service . In yet another configuration the endpoint response may include device candidate link information which may include IP addresses port numbers protocols and address types e.g. host relay server reflexive etc. to which the controller may attempt to establish a link with the electronic device .

The electronic device may request authentication based on the authentication service endpoint information. For example the electronic device may send an authentication request to an authentication service that may be designated by the authentication service endpoint information received from the location service . In one configuration the authentication request may include credentials that may be included with the electronic device . The authentication service may assess the electronic device credentials and validate the electronic device . In some configurations the authentication service may check the electronic device credentials included in the authentication request in order to verify that the controller may have a valid license. If the electronic device credentials are successfully authenticated and or the license is validated the authentication service may send a device session token to the electronic device which the electronic device may distribute in order to establish secure communication sessions on the network. In some configurations requesting authentication may include requesting license validation.

The electronic device may send a session request based on the connection service endpoint information. For example the electronic device may send a session request to a connection service that may be designated by the connection service endpoint information received from the location service . The session request may indicate that the electronic device would like to establish a link with the controller . Furthermore the session request may include the device candidate link information e.g. the IP addresses port numbers protocols and address type of the electronic device and a device session token . After the connection service verifies that the electronic device is authorized to access the controller the connection service may send the session request to the controller .

The electronic device may receive controller candidate link information . For example the electronic device may receive controller candidate link information from the connection service . In one configuration the controller may determine the controller candidate link information . The controller may determine the controller candidate link information as described above in . The controller candidate link information may include one or more IP addresses port number protocols and address types with which the electronic device may establish the link with the controller . The controller may send the controller candidate link information to the connection service in order for the connection service to send the controller candidate link information to the electronic device .

The controller and the electronic device may establish the link based on the controller candidate link information and the device candidate link information . For example the controller candidate link information may indicate that the electronic device may establish a direct link with the controller . Alternatively the controller candidate link information may indicate that the electronic device may establish a relay service link with the controller .

The electronic device may send an automation message based on the controller candidate link information . For example the electronic device may send the automation message directly to the controller if the controller and the electronic device establish a direct link based on the IP addresses and port numbers of the controller included in the controller candidate link information . Alternatively the electronic device may send the automation message to a relay service if the controller candidate link information designated a relay service link . The relay service may then send the automation message to the controller . The automation message may instruct the controller to perform one or more automation tasks.

The controller communication interface may comprise one or more components used by the controller to communicate with other electronic devices. For example the controller communication interface may include a Universal Serial Bus USB port a High Definition Multimedia Interface HDMI port an infrared IR receiver transmitter and or an IEEE 1394 port an antenna port etc. Additionally or alternatively the controller communication interface may comprise one or more components used by the controller to communicate with other electronic devices over a network. For example the controller communication interface may include an Ethernet port Wi Fi chip USB port wireless modem etc.

The remote access agent may comprise one or more components used by the controller to establish a link with an electronic device for secure remote access to the controller . The remote access agent may include a controller location module a controller authentication module a controller connection service module and a controller link module . The remote access agent may send and or receive messages through the controller communication interface .

The controller location module may comprise one or more components that may be used to obtain endpoint information for various services that may facilitate secure remote access to the controller . For example the controller location module may send an endpoint request to a location service . The location service may include endpoint information for one or more authorization service endpoints connection service endpoints and relay service endpoints. The controller may receive an endpoint response from the location service . The controller location module may store the endpoint information into memory. In yet another configuration the endpoint response may include controller candidate link information which may include IP addresses port numbers protocols and address types e.g. host relay server reflexive etc. to which the electronic device may attempt to establish a link with the controller .

The controller authentication module may comprise one or more components that may be used to authenticate the controller on a network. For example the controller may send an authentication request to an authentication service designated by the authentication service endpoint information included in the endpoint response . The controller may include credentials that may be included in the authentication request . The authentication service may verify the controller by assessing the credentials. If the controller is authorized to register on the network the authentication service may send the controller a controller session token . The controller authentication module may store the controller session token into memory.

The controller connection service module may comprise one or more components that may be used to register the location of the controller and negotiate a link to an electronic device . For example the connection service module may include a registration module and a session initiation module .

The registration module may determine a registration message that the controller may send to a connection service . The registration message may identify the location of the controller which the connection service may then register. The registration message may include the internal and external IP addresses of the controller and the controller session token . The registration module may periodically resend the registration message to the connection service in order to keep the connection to the connection service alive and traceable back to the controller .

The session initiation module may receive notifications that an electronic device may be requesting a communication session with the controller e.g. in order to establish a link for remote access . For example the electronic device may send a session request to the connection service which may send the session request to the controller . The session request may include a device session token and the IP address of the electronic device . Additionally the session request may include device candidate link information . Upon receiving the session request the session initiation module may notify the controller link module that a communication session has been requested.

The controller link module may comprise one or more components that may be used to establish a link with the electronic device . The controller link module may determine controller candidate link information based on the type of link e.g. direct or relay that the controller and the electronic device may attempt to establish. The controller candidate link information may include one or more IP addresses and port numbers that the electronic device may choose to establish the link to the controller . For example if a direct link may be established the controller candidate link information may include the IP address and port number associated with the controller . Additionally or alternatively if a relay service link may be established the controller candidate link information may include the IP address es and port numbers for one or more relay services. The controller may include the controller candidate link information in a session response that may be sent to the connection service and forwarded to the electronic device .

The controller link module may attempt to establish a link based on the controller candidate link information and the device candidate link information . In one configuration the controller link module may attempt to establish a direct link with the electronic device . In another configuration the controller link module may attempt to establish a relay link with the electronic device . In yet another configuration the controller link module may first attempt to establish a direct link with the electronic device and if the direct link may not be established the controller link module may attempt to establish a relay link .

Upon establishing the link with the electronic device the controller may receive an automation message sent by the electronic device . For example the automation message may include automation instructions that may be implemented by the controller . The configuration in depicts an automation message arriving at the controller across the link . It will be appreciated that additional automation messages may be received by the controller . Furthermore the controller may also send messages to the electronic device across the link thus enabling two way communication between the controller and the electronic device .

The automation module may comprise one or more components used by the controller to perform automation functions. The controller may receive the automation message which may be conveyed to the automation module in order to execute an automation task. For example the automation module may determine control messages that may be sent to one or more automation devices . Examples of automation devices include appliances e.g. refrigerators dishwashers washing machines dryers air conditioning units furnaces pool equipment sprinkling system controllers thermostats lighting controllers security systems audio systems entertainment systems telephone systems etc. and other devices. In some configurations all of the automation devices may be included in and or may be attached to a single structure e.g. house building etc. .

The controller may communicate with the one or more automation devices as described above in . For example the controller may communicate with one or more automation devices with one or more wired and or wireless links. For instance the controller may transmit and or receive electromagnetic signals using one or more antennas. Furthermore an automation device may also transmit and or receive electromagnetic signals using one or more antennas. For instance the controller may wirelessly send control messages using an antenna which the automation device may receive using an antenna.

The controller may also communicate with an automation device over a network. Examples of the network include Local Area Networks LANs Wide Area Networks WANs the Internet wireless networks wired networks and or any combination of the foregoing. The controller may send control messages to an automation device using the network. The controller may additionally or alternatively receive response messages from the automation devices using the network.

The device communication interface may comprise one or more components used by the electronic device to communicate with other electronic devices. For example the device communication interface may include a USB port an HDMI port an IR receiver transmitter and or an IEEE 1394 port an antenna port etc. Additionally or alternatively the device communication interface may comprise one or more components used by the electronic device to communicate with other electronic devices over a network. For example the device communication interface may include an Ethernet port Wi Fi transceiver USB port wireless modem etc.

The automation application may comprise one or more components used by the electronic device to establish a link with the controller for secure remote access to the controller . The automation application may include a device location module a device authentication module a device connection service module and a device link module . The automation application may send and or receive messages through the device communication interface . The automation application may comprise software and hardware components. For example the automation application may comprise a program that may be run on the electronic device e.g. an app on a smart phone .

The device location module may comprise one or more components that may be used to obtain endpoint information for various services that may facilitate secure remote access to the controller . For example the device location module may send an endpoint request to a location service . The location service may include endpoint information for one or more authorization service endpoints connection service endpoints and relay service endpoints. The electronic device may receive an endpoint response from the location service . The device location module may store the endpoint information into memory. Additionally the one or more endpoint responses may include device candidate link information which may include IP addresses port numbers protocols and descriptions of the type of IP address e.g. host relay server reflexive etc. to which the controller may attempt to establish a link with the electronic device .

The device authentication module may comprise one or more components that may be used to authenticate the electronic device on a network. For example the electronic device may send an authentication request to an authentication service designated by the authentication service endpoint information included in the endpoint response . The electronic device may include credentials that may be included in the authentication request . The authentication service may verify the electronic device by assessing the credentials. If the electronic device is authorized to access the controller the authentication service may send the electronic device a device session token . The device authentication module may store the device session token into memory.

The device connection service module may comprise one or more components that may be used to negotiate a link to the controller . For example the device connection service module may include a session request module . The session request module may send a session request to the connection service . The session request may include the device session token and the IP address of the electronic device . Additionally the session request may include device candidate link information which may include the IP address and port number of the electronic device . After the connection service verifies that the electronic device has authorization to connect to the controller e.g. checking the device session token via the authentication service the connection service may send the session request to the controller .

The device link module may comprise one or more components that may be used to establish a link with the controller . For example the device link module may receive controller candidate link information that may be sent from the controller and forwarded by the connection service . The controller candidate link information may include one or more IP addresses and port numbers that the electronic device may choose from to establish the link to the controller . If the controller candidate link information includes information for a direct link the device link module may attempt to establish a link directly with the controller based on the controller IP address and port number that may be included in the controller candidate link information . In another configuration if the controller candidate link information includes information for a relay service link the device link module may attempt to establish a link with a relay service based on the relay service IP address and port number that may be included in the controller candidate link information . If a relay service link is indicated by the controller candidate link information the controller candidate link information may include the IP address and port number for one or more relay services. The device link module may then select one relay service through which it may establish the link to the controller . In yet another configuration the device link module may first attempt to establish a direct link with the controller and if the direct link may not be established the device link module may attempt to establish a relay link .

Upon establishing the link with the controller the electronic device may send an automation message to the controller . For example the automation message may include automation instructions that may be implemented by the controller . The configuration in depicts the electronic device sending an automation message across the link . It will be appreciated that additional automation messages may be sent by the electronic device . Furthermore the electronic device may also receive messages from the controller across the link thus enabling two way communication between the controller and the electronic device .

The electronic device may send a session request to the connection service . The session request may indicate that the electronic device requests to establish a communication session with the controller . Additionally the session request may include device candidate link information which may include the IP address and port number of the electronic device . The electronic device may obtain device service endpoint information from a location service . The connection service may verify the authorization of the electronic device through an authentication service . If the electronic device is authorized to connect to the controller then the connection service may send the session request and the device service endpoint information to the controller .

Upon receiving the session request the controller may determine controller candidate link information based on the link that may be established with the electronic device . In one configuration the controller may have received controller candidate link information in an endpoint response received from the location service . In another configuration the controller may contact the location service after receiving the session request in order to obtain the controller candidate link information . In another configuration the controller may include its own information in the controller candidate link information in order to attempt to establish a direct link e.g. peer to peer link with the electronic device .

Additionally or alternatively the controller may allocate a relay link . The controller may send an allocation request to the relay service . The relay service may be a service that may act as an intermediary between the controller and the electronic device . The allocation request may include the IP address and port number of the controller that may be used to connect to the relay service . In response to the allocation request the relay service may allocate resources and determine an IP address es and port number s on the relay service to link the controller and the electronic device . The relay service may send an allocation response to the controller . The allocation response may include the IP address es port number s protocols and address types of the relay service to which the controller and the electronic device may connect. The controller may include the IP address es and port number s of the relay service that were included in the allocation response in the controller candidate link information

The controller may send controller candidate link information that may indicate how the electronic device may establish a link to the controller . For example the controller may send a session response to the connection service . The session response may include the controller candidate link information . The connection service may then send the session response and controller candidate link information to the electronic device .

Upon receiving the controller candidate link information the electronic device may attempt to establish a link to the controller . For example if the controller candidate link information indicates that the controller and the electronic device may establish a link through the relay service then the electronic device may establish a link to the relay service based on the IP address and port number included in the controller candidate link information . Additionally the electronic device may provide a device session token to the relay service in order to verify that the electronic device is authorized to access the controller . The relay service may request a link to the controller based on the controller IP address included in the allocation request . Upon connecting to the controller the relay service may receive a binding from the controller which may bind the link . The binding may be a virtual connection that may be transparent to the home automation module and the automation application . Once the link is established the electronic device may send an automation message across the link to the relay service . The relay service may then send the automation message across the link to the controller .

It will be appreciated that the controller may choose from a plurality of relay services . Therefore the IP addresses and port numbers for the plurality of relay services may be included in the controller candidate link information . In some configurations a plurality of relay services may be linked together in order to form a chain of relay services linked between the controller and the electronic device .

The controller may send an authentication request to an authentication service based on the authentication service endpoint information. After the authentication service authenticates and verifies that the controller may register its location the controller receives a controller session token from the authentication service .

The controller may send a registration message to a connection service based on the connection service endpoint information. The connection service may register the location of the controller . Additionally the connection service may verify the controller session token before registering the controller .

An electronic device may send an endpoint request to the location service . The electronic device may receive an endpoint response from the location service . The endpoint response may include authentication service endpoint information and connection service endpoint information. Additionally the endpoint response may include device candidate link information

The electronic device may send an authentication request to an authentication service based on the authentication service endpoint information. After authenticating and verifying that the electronic device may access the controller the authentication service may send a device session token to the electronic device .

The electronic device may send a session request to the connection service based on the connection service endpoint information. The session request may include the IP address of the electronic device and the device session token . The session request may additionally include the device candidate link information . The connection service may send a device verification request to the authentication service . After authenticating and verifying that the electronic device may access the controller the authentication service may send a device verification message to the connection service . The controller may receive a session request and device candidate link information from the connection service based on the registered controller location.

The controller may determine controller candidate link information based on the session request . The controller candidate link information may include the IP address and port number of the controller in order to attempt to establish a direct link between the controller and the electronic device . Additionally the controller candidate link information may include the IP address es and port number s of one or more relay services if a relay link may be established between the controller and the electronic device .

The controller may send the controller candidate link information to the connection service . For example the controller may include the controller candidate link information in the session response . The controller may then send the session response to connection service . The connection service may then send the session response and the controller candidate link information to the electronic device .

If the controller candidate link information indicates a direct link the electronic device may connect directly to the controller and then send an automation message to the controller . Alternatively if the controller candidate link information indicates a relay service link the electronic device may connect to the relay service and send the automation message to the relay service . The relay service may then connect to the controller and the controller may receive the automation message from the relay service .

The controller may send one or more endpoint requests to a location service and receive one or more endpoint responses from the location service . This may be accomplished as described above in . The controller may receive authorization service endpoint information connection service endpoint information and relay service endpoint information. Additionally the endpoint response may include controller candidate link information

The controller may request network authentication by sending an authentication request to an authentication service based on the authentication service endpoint information. The authentication service may include a licensing module an account module and an authorization module . After receiving the authentication request the authorization module may verify that the controller has authorization to register its location with a connection service . Additionally the licensing module may verify that the controller has a valid license. Also the account module may verify that the controller belongs to a valid and active account. If the controller is authorized to register on the network the authentication service may send the controller a controller session token .

The controller may send a registration message to the connection service . The registration message may include the internal and external IP addresses of the controller and the controller secure token . The connection service may include an SIP server . The controller may send the registration message to the SIP server which may register the location of the controller . The controller may periodically resend e.g. a registration message every three minutes to the connection service in order to keep the connection to the connection service alive and traceable back to the controller .

An electronic device may include an automation application . The electronic device may send an endpoint request to the location service . The location service may send an endpoint response to the electronic device . This may be accomplished as described above in . The endpoint response may include endpoint information for one or more authorization service endpoints and connection service endpoints. Additionally the endpoint response may include device candidate link information

The electronic device may send an authentication request to the authentication service in order to be authenticated on the network. The electronic device may contact the authentication service designated by the authentication service endpoint information received from the location service . After receiving the authentication request the authorization module may verify that the electronic device has authorization to access the controller . Additionally the licensing module may verify that the electronic device has a valid license. Also the account module may verify that the electronic device belongs to a valid and active account. If the electronic device is authorized to access the controller the authentication service may send the electronic device a device session token .

The electronic device may contact the connection service in order to negotiate a link to the controller . For example the electronic device may send a session request to the connection service based on the connection service endpoint information received from the location service . The session request may additionally include the device candidate link information . An HTTP proxy may receive the session request . The HTTP proxy may send the session request to the SIP server . The SIP server may send a verification request to the authentication service . If the authentication service verifies that the electronic device is authorized to access the controller the authentication service may send a verification message back to the SIP server . Upon receiving the verification message the SIP server may send the session request and the device candidate link information to the controller based on the IP address designated by the registration message sent by the controller .

When the controller receives the session request the controller may determine controller candidate link information based on the type of links that may be established with the electronic device . For example the controller and the electronic device may attempt to establish a direct link e.g. peer to peer communication with the electronic device . Additionally or alternatively the controller and the electronic device may attempt to establish a relay link to the electronic device via a relay service to which both the controller and the electronic device may connect.

In the case of a relay service link the controller may contact a relay service as described above in . In one configuration the relay service may include a balancer and a TURN Server . The controller may send an allocation request to the balancer . The balancer may improve network performance and distribute the load associated with the relay service in order to facilitate better service quality. The TURN server may employ the Traversal Using Relays around NAT TURN protocol which may allow for the controller and the electronic device behind a NAT and or firewall to receive incoming data over TCP or UDP connections. The TURN Server may provide IP relay services between the controller and the electronic device . The TURN Server performance may be limited by network bandwidth and processing power e.g. Central Processing Unit CPU processing power . Therefore the balancer may distribute the workload via a software service for example across multiple TURN Servers organized in a service cluster. The balancer may facilitate the use of the TURN protocol and provide additional security to prevent unauthorized usage of the TURN Server service cluster. The TURN server may provide a way for incoming connections requests and or messages to traverse a firewall that does may not allow incoming connections. In one configuration the TURN server may be hosted in a globally accessible cluster so that it can be reached by both the controller and the electronic device . Additionally use of the TURN server may require secured private keys and connection information that may be provided by the authentication service and or the connection service .

In response to the allocation request the relay service may allocate resources and determine an IP address es and port number s to link the controller and the electronic device . The TURN server may send an allocation response to the controller . The allocation response may include the IP address es and port number s of the TURN server to which the controller and the electronic device may connect. The controller may include the IP address es and port number s of the TURN server that were included in the allocation response in the controller candidate link information

After determining controller candidate link information for the link to the electronic device the controller may include the controller candidate link information in a session response that may be sent to the connection service . The controller candidate link information may include one or more IP addresses and port numbers that the electronic device may choose to establish a link to the controller . For example in the configuration depicted in a relay service link may be established. Therefore the controller candidate link information may include the IP address and port number for one or more relay services . The session response may be received by the SIP server which then sends the session response through the HTTP proxy . The HTTP proxy may then send the session response and the controller candidate link information to the electronic device .

The electronic device may select an IP address and port number designated by the controller candidate link information in order to establish the link to the controller . For example the electronic device may select from the IP addresses and port numbers associated with the one or more relay services in order to establish the link to the controller . The electronic device may establish the link through the TURN server based on the IP address and port number included in the controller candidate link information . Additionally the electronic device may provide a device session token to the relay service in order to verify that the electronic device is authorized to access the controller . The relay TURN server may request a link to the controller based on the controller IP address included in the allocation request . After the TURN server connects to the controller the controller may bind the link by sending a binding to the relay service . Once the link is established the electronic device may send an automation message across the link to the TURN server . The TURN server may then send the automation message across the link to the controller .

The controller and or electronic device is are shown with a processor and memory . The processor may control the operation of the controller and or electronic device and may be embodied as a microprocessor a microcontroller a digital signal processor DSP or other device known in the art. The processor typically performs logical and arithmetic operations based on program instructions and or data stored within the memory . The instructions in the memory may be executable to implement the methods described herein. illustrates instructions and or data being loaded onto the processor . The instructions and or data may be the instructions and or data or portions thereof stored in memory .

The controller and or electronic device may also include one or more communication interfaces and or network interfaces for communicating with other electronic devices. The communication interface s and the network interface s may be based on wired communication technology and or wireless communication technology such as ZigBee WiMax WiFi Bluetooth and or cellular protocols such as GSM etc.

The controller and or electronic device may also include one or more input devices and one or more output devices . The input devices and output devices may facilitate user input user output. Other components may also be provided as part of the controller and or electronic device .

Instructions and data may be stored in the memory . The processor may load and execute instructions from the instructions in memory to implement various functions. Executing the instructions may involve the use of the data that is stored in the memory . The instructions and or data may be loaded onto the processor . The instructions are executable to implement the one or more methods shown herein and the data may include one or more of the various pieces of data described herein.

The memory may be any electronic component capable of storing electronic information. The memory may be embodied as random access memory RAM read only memory ROM magnetic disk storage media optical storage media flash memory devices in RAM on board memory included with the processor EPROM memory EEPROM memory an ASIC Application Specific Integrated Circuit registers and so forth including combinations thereof. The various components of the controller and or electronic device may be coupled together by a bus system which may include a power bus a control signal bus and a status signal bus in addition to a data bus. However for the sake of clarity the various buses are illustrated in as the bus system .

In the above description reference numbers have sometimes been used in connection with various terms. Where a term is used in connection with a reference number it may refer to a specific element that is shown in one or more of the Figures. Where a term is used without a reference number it may refer generally to the term without limitation to any particular Figure.

The term determining encompasses a wide variety of actions and therefore determining can include calculating computing processing deriving investigating looking up e.g. looking up in a table a database or another data structure ascertaining and the like. Also determining can include receiving e.g. receiving information accessing e.g. accessing data in a memory and the like. Also determining can include resolving selecting choosing establishing and the like.

The phrase based on does not mean based only on unless expressly specified otherwise. In other words the phrase based on describes both based only on and based at least on. 

The term processor should be interpreted broadly to encompass a general purpose processor a central processing unit CPU a microprocessor a digital signal processor DSP a controller a microcontroller a state machine and so forth. Under some circumstances a processor may refer to an application specific integrated circuit ASIC a programmable logic device PLD a field programmable gate array FPGA etc. The term processor may refer to a combination of processing devices e.g. a combination of a DSP and a microprocessor a plurality of microprocessors one or more microprocessors in conjunction with a DSP core or any other such configuration.

The term memory should be interpreted broadly to encompass any electronic component capable of storing electronic information. The term memory may refer to various types of processor readable media such as random access memory RAM read only memory ROM non volatile random access memory NVRAM programmable read only memory PROM erasable programmable read only memory EPROM electrically erasable PROM EEPROM flash memory magnetic or optical data storage registers etc. Memory is said to be in electronic communication with a processor if the processor can read information from and or write information to the memory. Memory that is integral to a processor is in electronic communication with the processor.

The terms instructions and code should be interpreted broadly to include any type of computer readable or processor readable statement s . For example the terms instructions and code may refer to one or more programs routines sub routines functions procedures etc. Instructions and code may comprise a single computer readable statement or many computer readable statements.

The term computer readable medium refers to any available medium that can be accessed by a computer or processor. By way of example and not limitation a computer readable medium may comprise RAM ROM EEPROM CD ROM or other optical disk storage magnetic disk storage or other magnetic storage devices or any other medium that can be used to carry or store desired program code in the form of instructions or data structures and that can be accessed by a computer. A computer readable medium may be tangible and non transitory. Disk and disc as used herein includes compact disc CD laser disc optical disc digital versatile disc DVD floppy disk and Blu ray disc where disks usually reproduce data magnetically while discs reproduce data optically with lasers.

Software or instructions may also be transmitted over a transmission medium. For example if the software is transmitted from a website server or other remote source using a coaxial cable fiber optic cable twisted pair digital subscriber line DSL or wireless technologies such as infrared radio and microwave then the coaxial cable fiber optic cable twisted pair DSL or wireless technologies such as infrared radio and microwave are included in the definition of transmission medium.

The methods disclosed herein comprise one or more steps or actions for achieving the described method. The method steps and or actions may be interchanged with one another without departing from the scope of the claims. In other words unless a specific order of steps or actions is required for proper operation of the method that is being described the order and or use of specific steps and or actions may be modified without departing from the scope of the claims.

It is to be understood that the claims are not limited to the precise configuration and components illustrated above. Various modifications changes and variations may be made in the arrangement operation and details of the systems methods and apparatus described herein without departing from the scope of the claims.

