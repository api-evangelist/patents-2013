---

title: Network-assisted configuration and programming of gateways in a network environment
abstract: An example method for network-assisted configuration and programming of gateways in a network environment is provided and includes registering a non-Virtual eXtensible Local Area Network (VXLAN) device with a central controller, for example, by generating registration information associating the non-VXLAN device with a virtual local area network (VLAN) in a network environment, receiving a communication request from a VXLAN enabled device to communicate with the non-VXLAN device, mapping, based on the registration information, a VXLAN segment corresponding to the VXLAN enabled device with the VLAN associated with the non-VXLAN device, and configuring a gateway with the mapping through a suitable application programming interface exposed at the gateway.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09559896&OS=09559896&RS=09559896
owner: CISCO TECHNOLOGY, INC.
number: 09559896
owner_city: San Jose
owner_country: US
publication_date: 20130708
---
This disclosure relates in general to the field of communications and more particularly to network assisted configuration and programming of gateways in a network environment.

Data centers are increasingly used by enterprises for collaboration and for storing data and or resources. A typical data center network contains myriad network elements including hosts loadbalancers routers switches etc. The network connecting the network elements provides secure user access to data center services and an infrastructure for deployment interconnection and aggregation of shared resource as required including applications hosts appliances and storage. Improving operational efficiency and optimizing utilization of resources in data centers are some of the challenges facing data center managers. Data center managers want a resilient infrastructure that consistently supports diverse applications and services and protects the applications and services against disruptions. A properly planned and operating data center network provides application and data integrity and optimizes application availability and performance.

An example method for network assisted configuration and programming of gateways in a network environment is provided and includes registering a non Virtual eXtensible Local Area Network VXLAN device with a central controller for example by generating registration information associating the non VXLAN device with a virtual local area network VLAN in a network environment receiving a communication request from a VXLAN enabled device to communicate with the non VXLAN device mapping based on the registration information a VXLAN segment corresponding to the VXLAN enabled device with the VLAN associated with the non VXLAN device and configuring a gateway with the mapping through a suitable application programming interface exposed at the gateway.

Turning to is a simplified block diagram illustrating an embodiment of communication system for facilitating network assisted configuration and programming of gateways in a network environment. Communication system includes a network comprising devices enabled with virtual eXtensible Local Area Network VXLAN that communicate with non VXLAN devices e.g. devices that are not enabled with VXLAN through a gateway . As used herein the term gateway encompasses a network element that can forward traffic between VXLAN and non VXLAN environments. A network element encompasses computers network appliances servers routers switches gateways bridges load balancers firewalls processors modules or any other suitable device component element or object operable to exchange information in a network environment. Moreover the network elements may include any suitable hardware software components modules interfaces or objects that facilitate the operations thereof. This may be inclusive of appropriate algorithms and communication protocols that allow for the effective exchange of data or information. In various embodiments gateway can include software or hardware with numerous interfaces to enable forwarding traffic between VXLAN enabled devices and non VXLAN devices in network . In a general sense the gateway e.g. gateway facilitates the extension of a Layer 2 network over a Layer 3 network.

VXLAN refers to an encapsulation protocol for running an overlay network on existing Layer 3 infrastructure. The term VXLAN as used herein includes the protocol according to Internet Draft titled VXLAN A Framework for Overlaying Virtualized Layer 2 Networks over Layer 3 Networks submitted with the Internet Engineering Task Force IETF and variations updates and revisions thereof and Network Virtualization using Generic Routing Encapsulation NVGRE according to Internet Draft titled NVGRE Network Virtualization using Generic Routing Encapsulation submitted with the IETF and variations updates and revisions thereof. For example non VXLAN devices include devices that are not enabled with either VXLAN or NVGRE VXLAN enabled devices include devices that are enabled with either VXLAN or NVGRE or both.

VXLAN enabled devices can include by way of example and not as a limitation a virtual machine VM . Non VXLAN devices can include by way of examples and not limitations one or more service nodes e.g. physical or virtual servers . VM may interface with a Virtual Ethernet Module VEM . VM may communicate with gateway over one or more network elements in L2 network . L2 indicates Layer 2 of the Open Systems Interconnection OSI model of networking . One or more service nodes may communicate with gateway over one or more network elements in L2 network . In some embodiments L2 network may be disparate and distinct from L2 network in other embodiments L2 network may include or comprise a portion of L2 network . Devices communicating with gateway over L2 network may comprise VXLAN enabled devices devices communicating with gateway over L2 network may comprise non VXLAN enabled devices.

According to various embodiments non VXLAN devices such as service nodes may register in network with a central controller . As used herein the term controller includes a software or hardware device that can manage flow control to enable intelligent networking in network . Central controller can comprise a software defined networking SDN controller in some embodiments. For example controller may be based on SDN protocols such as OpenFlow that can enable appropriate packet forwarding in network . In some embodiments controller may interface between network devices e.g. service nodes and applications e.g. running on VM .

In some embodiments controller may be associated with e.g. have access to an inventory database that can store registration information of non VXLAN devices. By way of examples and not limitations registration information can include the Internet Protocol IP address and VLAN ID of the registering devices e.g. registration information corresponding to service node at IPand VLAN Vmay comprise IP V .

VXLAN enabled devices e.g. VM that want to communicate with non VXLAN devices e.g. service node at IP may inform controller through a discovery process. Controller may determine that VM in VXLAN segment Swants to communicate with service node at IPin VLAN V. A configuration module in controller may communicate with a Representational State Transfer REST Application Programming Interface API exposed on gateway to configure gateway with an Sto Vmapping in the network path. Alternatively controller may inform VM via VEM to use VLAN Vinstead of VXLAN segment Sto send out traffic from VM .

For purposes of illustrating the techniques of communication system it is important to understand the communications that may be traversing the system shown in . The following foundational information may be viewed as a basis from which the present disclosure may be properly explained. Such information is offered earnestly for purposes of explanation only and accordingly should not be construed in any way to limit the broad scope of the present disclosure and its potential applications.

Current network architectures can be rigid complex and costly. Limitations of physical networks tie an increasingly pooled dynamic virtual world back to inflexible dedicated hardware creating artificial barriers to utilize network capacity efficiently. For example while a VM can be provisioned in a matter of minutes enabling the VM with the necessary network and security services still takes a long time because the current network and security operations remain dependent on manual provisioning of VXLANs VLANs and dedicated physical appliances with fragmented management interfaces.

VLANs according to IEEE 802.1Q standard have been the traditional mechanism for providing logical network isolation. The IEEE 802.1Q standard specifies a 12 bit VLAN identifier ID which limits the scalability of cloud networks beyond 4K VLANs. VXLAN can overcome the scalability limitation of VLANs with a MAC in User Datagram Protocol MAC in UDP encapsulation technique and a 24 bit segment identifier in the form of a VXLAN Segment ID. VXLAN creates Layer 2 logical networks encapsulated in standard Layer 3 IP packets. A Segment ID in every frame differentiates the VXLAN logical networks from each other without any VLAN tags allowing large numbers of isolated Layer 2 VXLAN networks to co exist on a common Layer 3 infrastructure.

VXLAN is a method for floating virtual domains on top of a common networking and virtualization infrastructure. VXLAN provides the capability to create isolated multi tenant broadcast domains across data centers and enables creation of elastic logical networks that span physical network boundaries. VXLAN leverages existing Ethernet technology enabling large numbers of virtual domains to be created above the Layer 3 network infrastructure with isolation from each other and the underlying network. VXLAN offers several benefits for example flexibility streamlined network operations and investment protection. Datacenter server and storage utilization and flexibility can be maximized through support of VXLANs that cross switching and pod boundaries. VXLAN runs on standard Layer 3 IP networks eliminating the need to build and manage a large Layer 2 underlying transport layer. VXLAN runs over standard switching hardware with no need for software upgrades or special code versions on the switches.

VXLAN is essentially a tunneling technique and a gateway is required to translate VXLAN segment IDs to VLAN IDs so that non VXLAN devices can communicate with VXLAN enabled devices. The gateway connects VXLAN enabled devices on one interface with non VXLAN devices on another interface. The gateway functionality could be implemented in software or hardware. For incoming frames on the VXLAN connected interface the gateway strips out the VXLAN header and forwards to a physical port based on the destination MAC address of the inner Ethernet frame. Decapsulated frames with the inner VLAN ID are discarded unless configured explicitly to be passed on to the non VXLAN interface. In the reverse direction incoming frames for the non VXLAN interfaces are mapped to a specific VXLAN overlay network based on the VLAN ID in the frame. Unless configured explicitly to be passed on in the encapsulated VXLAN frame the VLAN ID is removed before the frame is encapsulated for VXLAN.

Existing mechanisms for configuring the gateway includes manually mapping the VLAN IDs to specific VXLAN segment IDs. For example manual configuration may be performed in a central management console e.g. Cisco Nexus 1000V Virtual Supervisor Module VSM and then downloaded to the gateway. An example manual configuration of VMware gateway includes opening a graphical user interface GUI for configuration selecting an external interface and configuring its properties selecting internal interfaces connected to VXLAN networks or sub networks and various other steps. As the size of the network increases manual configuration can become cumbersome and prone to errors.

Communication system is configured to address these issues and others in offering a system and method for connection persistence across server farms in a network environment. Embodiments of communication system can register non VXLAN devices e.g. service nodes at IPthrough IP with central controller . The registering may comprise generating registration information associating the non VXLAN devices with a VLAN e.g. IP V . . . IP V in network . In some embodiments the registration information is stored in inventory database . Controller may receive a communication request e.g. discovery information from a VXLAN enabled device e.g. VM to communicate with a particular non VXLAN device e.g. service node at IP . In a specific embodiment the communication request may comprise an Address Resolution Protocol ARP message.

Configuration module in controller may retrieve the registration information from inventory database . Based on the registration information configuration module may map a VXLAN segment e.g. S corresponding to the VXLAN enabled device VM with the VLAN Vassociated with the non VXLAN service node at IP. Controller may configure gateway with the mapping through a suitable API e.g. REST API exposed at gateway .

Embodiments of communication system can decouple VXLAN gateway from underlying hardware and or other network infrastructure and offer the gateway translation services as a generic programmable service node for example available on a SDN platform. A simple and network device independent method may be provided to specify and apply configuration for gateway . An appropriate interface may be provided for example by exposing REST APIs on gateway to facilitate dynamically programming and management by controller . Embodiments of communication system can provide ease of configuration and deployment for gateway and reduce or eliminate manual configuration which may involve human error.

Turning to the infrastructure of communication system the network topology can include any number of servers service nodes virtual machines switches including distributed virtual switches routers and other nodes inter connected to form a large and complex network. A node may be any electronic device client server peer service application or other object capable of sending receiving or forwarding information over communications channels in a network. Elements of may be coupled to one another through one or more interfaces employing any suitable connection wired or wireless which provides a viable pathway for electronic communications.

Additionally any one or more of these elements may be combined or removed from the architecture based on particular configuration needs. Communication system may include a configuration capable of TCP IP communications for the electronic transmission or reception of data packets in a network. Communication system may also operate in conjunction with a User Datagram Protocol Internet Protocol UDP IP or any other suitable protocol where appropriate and based on particular needs. In addition gateways routers switches and any other suitable nodes physical or virtual may be used to facilitate electronic communication between various nodes in the network.

Note that the numerical and letter designations assigned to the elements of do not connote any type of hierarchy the designations are arbitrary and have been used for purposes of teaching only. Such designations should not be construed in any way to limit their capabilities functionalities or applications in the potential environments that may benefit from the features of communication system . It should be understood that communication system shown in is simplified for ease of illustration. Communication system can include any number of servers service nodes virtual machines gateways and other network elements within the broad scope of the embodiments.

The example network environment may be configured over a physical infrastructure that may include one or more networks and further may be configured in any form including but not limited to LANs wireless local area networks WLANs VLANs metropolitan area networks MANs wide area networks WANs virtual private networks VPNs Intranet Extranet any other appropriate architecture or system or any combination thereof that facilitates communications in a network. In some embodiments a communication link may represent any electronic link supporting a LAN environment such as for example cable Ethernet wireless technologies e.g. IEEE 802.11x ATM fiber optics etc. or any suitable combination thereof. In other embodiments communication links may represent a remote connection through any appropriate medium e.g. digital subscriber lines DSL telephone lines T1 lines T3 lines wireless satellite fiber optics cable Ethernet etc. or any combination thereof and or through any additional networks such as a wide area networks e.g. the Internet .

Gateway may be any suitable switch load balancer or other network element appliance that translates and forwards traffic between VXLAN enabled devices and non VXLAN devices. Various load balancing and other networking algorithms may be executed on gateway to translate and forward traffic within the broad scope of the embodiments. In some embodiments configuration module can include an application executing in or with controller . In other embodiments configuration module can include an application executing on another network element in communication with controller and gateway . In some embodiments configuration module may be implemented in a separate stand alone box that can be plugged into or otherwise connected to controller and gateway . In some embodiments configuration module may be implemented in hardware in software or in a combination of hardware and software.

In some embodiments controller can be configured according to SDN architecture. In the SDN architecture the control and data planes are decoupled network intelligence and state are logically centralized in controller and the underlying network infrastructure is abstracted from the applications. An example implementation of controller includes Cisco ONE controller. Controller may be virtualized and centralized in network enabling it to manage and control substantially all flows in network . Proprietary and or open source software may be executed in network to enable controller to perform its operations.

Turning to is a simplified block diagram illustrating example details of an embodiment of communication system . Configuration module may include a registration module a discovery module a map module a processor and a memory element . Discovery information comprising for example an ARP message from a VXLAN enabled device e.g. VM requesting the Media Access Control MAC address of a non VXLAN device e.g. service node at IP may be received by discovery module at configuration module . In specific embodiments discovery information may include the VXLAN segment of the requesting VXLAN enabled device. Discovery module may identify and extract the VXLAN segment information from discovery information .

Registration module may store and retrieve registration information from non VXLAN devices e.g. including service node at IP . In some embodiments registration information may be queried and extracted by registration module from the non VXLAN devices. In other embodiments the non VXLAN devices may send registration information to controller upon boot up. In yet other embodiments registration information may be configured in controller for example for generating port profiles for the non VXLAN enabled devices that are attached to network . Various other mechanisms for generating and or retrieving registration information may be included within the broad scope of the embodiments.

Map module may map the VXLAN segment identified in discovery information with the VLAN in registration information of the destination non VXLAN device and generate a VXLAN to VLAN mapping . Map module may communicate VXLAN to VLAN mapping with REST API to facilitate configuration of gateway .

Turning to is a simplified flow diagram illustrating example operations that may be associated with an embodiment of communication system . At non VXLAN devices e.g. service nodes at IPto IP may register with controller . In some embodiments controller may initiate the registration in other embodiments the non VXLAN devices may initiate the registration. At controller may receive discovery information from a VXLAN enabled device e.g. VM . At controller may identify a VXLAN segment in discovery information .

At controller may retrieve registration information corresponding to the destination non VXLAN device e.g. service node at IP from inventory database . At controller may identify the VLAN in registration information . At controller may map the VXLAN segment identified at with VLAN identified at in VXLAN to VLAN mapping . At controller may configure gateway with VXLAN to VLAN mapping . Alternatively at controller may request VXLAN enabled device VM to communicate in VLAN protocol or other suitable non VXLAN protocol with the non VXLAN device e.g. service node at IP .

Turning to is a simplified flow diagram illustrating example operations that may be associated with an embodiment of communication system . At service node at IPmay register network information comprising IP address and VLAN ID e.g. IP V with inventory database . At VM in VXLAN segment Smay want to talk to e.g. communicate with service node at IP. VM may send out an ARP request to VEM requesting MAC address of service node at IP. At VEM may punt the ARP request to controller for example as MAC address may be unknown e.g. as would be the case for a first time communication between VM and service node at IPin a preconfigured time period .

At controller may query inventory database for registration information associated with service node at IP. At controller may retrieve registration information from inventory database . At using REST API controller may configure gateway with VXLAN to VLAN mapping associating VXLAN segment Sand VLAN V. At gateway may translate and forward traffic between VXLAN segment Sand VLAN V permitting communication between VM and service node at IP.

Note that in this Specification references to various features e.g. elements structures modules components steps operations characteristics etc. included in one embodiment example embodiment an embodiment another embodiment some embodiments various embodiments other embodiments alternative embodiment and the like are intended to mean that any such features are included in one or more embodiments of the present disclosure but may or may not necessarily be combined in the same embodiments. Note also that an application as used herein this Specification can be inclusive of any executable file comprising instructions that can be understood and processed on a computer and may further include library modules loaded during execution object files system files hardware logic software logic or any other executable modules.

In example implementations at least some portions of the activities outlined herein may be implemented in software in for example configuration module . In some embodiments one or more of these features may be implemented in hardware provided external to these elements or consolidated in any appropriate manner to achieve the intended functionality. The various network elements may include software or reciprocating software that can coordinate in order to achieve the operations as outlined herein. In still other embodiments these elements may include any suitable algorithms hardware software components modules interfaces or objects that facilitate the operations thereof.

Furthermore configuration module described and shown herein and or their associated structures may also include suitable interfaces for receiving transmitting and or otherwise communicating data or information in a network environment. Additionally some of the processors and memory elements associated with the various nodes may be removed or otherwise consolidated such that a single processor and a single memory element are responsible for certain activities. In a general sense the arrangements depicted in the FIGURES may be more logical in their representations whereas a physical architecture may include various permutations combinations and or hybrids of these elements. It is imperative to note that countless possible design configurations can be used to achieve the operational objectives outlined here. Accordingly the associated infrastructure has a myriad of substitute arrangements design choices device possibilities hardware configurations software implementations equipment options etc.

In some of example embodiments one or more memory elements e.g. memory element can store data used for the operations described herein. This includes the memory element being able to store instructions e.g. software logic code etc. in non transitory computer readable media such that the instructions are executed to carry out the activities described in this Specification. A processor can execute any type of instructions associated with the data to achieve the operations detailed herein in this Specification. In one example processors e.g. processor could transform an element or an article e.g. data from one state or thing to another state or thing.

In another example the activities outlined herein may be implemented with fixed logic or programmable logic e.g. software computer instructions executed by a processor and the elements identified herein could be some type of a programmable processor programmable digital logic e.g. a field programmable gate array FPGA an erasable programmable read only memory EPROM an electrically erasable programmable read only memory EEPROM an ASIC that includes digital logic software code electronic instructions flash memory optical disks CD ROMs DVD ROMs magnetic or optical cards other types of machine readable mediums suitable for storing electronic instructions or any suitable combination thereof.

These devices may further keep information in any suitable type of non transitory computer readable storage medium e.g. random access memory RAM read only memory ROM field programmable gate array FPGA erasable programmable read only memory EPROM electrically erasable programmable ROM EEPROM etc. software hardware or in any other suitable component device element or object where appropriate and based on particular needs. The information being tracked sent received or stored in communication system could be provided in any database register table cache queue control list or storage structure based on particular needs and implementations all of which could be referenced in any suitable timeframe. Any of the memory items discussed herein should be construed as being encompassed within the broad term memory element. Similarly any of the potential processing elements modules and machines described in this Specification should be construed as being encompassed within the broad term processor. 

It is also important to note that the operations and steps described with reference to the preceding FIGURES illustrate only some of the possible scenarios that may be executed by or within the system. Some of these operations may be deleted or removed where appropriate or these steps may be modified or changed considerably without departing from the scope of the discussed concepts. In addition the timing of these operations may be altered considerably and still achieve the results taught in this disclosure. The preceding operational flows have been offered for purposes of example and discussion. Substantial flexibility is provided by the system in that any suitable arrangements chronologies configurations and timing mechanisms may be provided without departing from the teachings of the discussed concepts.

Although the present disclosure has been described in detail with reference to particular arrangements and configurations these example configurations and arrangements may be changed significantly without departing from the scope of the present disclosure. For example although the present disclosure has been described with reference to particular communication exchanges involving certain network access and protocols communication system may be applicable to other exchanges or routing protocols. Moreover although communication system has been illustrated with reference to particular elements and operations that facilitate the communication process these elements and operations may be replaced by any suitable architecture or process that achieves the intended functionality of communication system .

Numerous other changes substitutions variations alterations and modifications may be ascertained to one skilled in the art and it is intended that the present disclosure encompass all such changes substitutions variations alterations and modifications as falling within the scope of the appended claims. In order to assist the United States Patent and Trademark Office USPTO and additionally any readers of any patent issued on this application in interpreting the claims appended hereto Applicant wishes to note that the Applicant a does not intend any of the appended claims to invoke paragraph six 6 of 35 U.S.C. section 112 as it exists on the date of the filing hereof unless the words means for or step for are specifically used in the particular claims and b does not intend by any statement in the specification to limit this disclosure in any way that is not otherwise reflected in the appended claims.

