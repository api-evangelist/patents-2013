---

title: Integrated system for media playback during startup
abstract: A system and method are provided for playing a media stream while a media system starts up. Media hardware, such as a display controller, may play media. A media driver may initialize the media hardware. A media module may receive the media stream from a media source. The media module and the display driver may start up before startup of the media system completes. The media module may provide the media stream directly or indirectly to the media hardware before and after startup of the media system completes without an interruption in playing of the media stream.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09282294&OS=09282294&RS=09282294
owner: 2236008 Ontario, Inc.
number: 09282294
owner_city: Waterloo, Ontario
owner_country: CA
publication_date: 20130308
---
This application claims priority under 35 U.S.C. 119 e to U.S. Application No. 61 739 120 INTEGRATED SYSTEM FOR MEDIA PLAYBACK DURING STARTUP filed Dec. 19 2012 the entire contents of which are incorporated by reference.

This application relates to displaying or otherwise playing media streams and in particular to displaying or otherwise playing media streams during startup of a media system.

A backup camera is now a common feature in vehicles. Safety standards in some countries have requirements for backup cameras. For example the standards may require displaying video from the backup camera to a driver within a half of a second of putting a vehicle into reverse gear. In another example the standards may require continuously displaying the video from the backup camera to the driver. If a portion of the video is missing or a frame is dropped then the standards may require stopping the display of the video. Stopping display of the video may prevent the driver from relying on video that does not necessarily accurately represent what is behind the vehicle.

An integrated graphics system installed in a vehicle may display a video stream received from a backup camera and display other information such as entertainment and navigation. In order for the integrated graphics system to start up fast enough to display the video stream from the backup camera within a time frame required by a safety standard the integrated graphics system may be started in stages.

In a first stage a camera module may begin to execute while the remainder of the integrated graphics system continues to load. The camera module may facilitate displaying the video stream which is received from the backup camera through a display controller. A display driver may also be started in the first stage. The display driver may initialize the display controller and reserve a hardware display layer in the display controller for the camera module to display the video stream received from the backup camera. The video stream from the backup camera may be displayed through the reserved hardware display layer while any remaining portions of the integrated graphics system continue to load.

In a second stage the remaining components of the integrated graphics system may be loaded and executed. As the graphics system starts the graphics system may attempt to start the display driver. In response to a determination that the display driver has already been started the graphics system may attach to the already operating and initialized display driver. In order to avoid any interruption in the display of the video from the backup camera control of the hardware display layer used for the video stream may not be returned to the graphics system until after the backup camera is stopped or the vehicle is taken out of reverse gear. In some examples the hardware display layer used for the video stream is not returned to the control of the fully started graphics system.

The camera may be any type of camera that generates the video stream . For example the camera may be a digital or analog camera. The camera may positioned anywhere in or on a vehicle. For example the camera may be a backup camera mounted at the rear of the vehicle.

The camera module may be any component that receives the video stream from the camera and directly or indirectly provides the video stream to the display controller . The camera module may include an application that runs in an operating system or any other type of software program. The video stream may include a series of images or frames that are time sequenced.

The graphics system may be the portion of an operating system that handles graphics processing for applications executed on the operating system. The graphics system may implement an applications programming interface API with which an application may provide an image or a video to the media hardware . The graphics system may include graphics components such as a display driver a windowing system a 3D module a composition manager and or any other component that performs computer graphics related functions. The display driver may be any device driver that controls the display controller . The display driver may include software that communicates with the display controller through a bus or communications subsystem. In some examples the display driver may be hardware dependent and operating system specific. The display driver may implement an API application programming interface that components may call in order to communicate with the display controller . The windowing system may be a component of a graphical user interface GUI that implements windowing and or supports an implementation of windowing and provides an abstraction layer in the form of an applications programming interface API for graphics hardware and in some examples user input devices such as a keyboard and a mouse. The composition manager may be a component that combines two or more images to form a single composited image.

The display controller may be any hardware that reads an image and or series of images from memory or otherwise receives the image and or series of images and causes the image and or series of images to be displayed on the display device . Examples of the display controller may include a controller that drives an LCD liquid crystal display panel with a VGA video graphics array format a controller that drives a LCD and or a LED panel at a resolution of 2048 1152 and a controller that drives a HDMI High Definition Multimedia Interface or DVI Digital Visual Interface port HDMI is a registered trademark of HDMI Licensing L.L.C. CORPORATION of Sunnyvale Calif. .

The display controller may include a configuration module two or more hardware display layers such as hardware display layer and hardware display layer . The configuration module may be any component that configures functionality of the display controller . The configuration module may provide an interface through which the display driver or other driver external to the display controller may configure the functionality of the display controller . For example the configuration module may control timings used to enable the display device . In another example the configuration module may control how the hardware display layers are blended together to form a combined image that is displayed on the display device .

During operation of the integrated system the integrated system may startup. A startup may occur when a computing device comprising at least a portion of the system is powered on. For example the startup may occur when a key is turned in an ignition of a vehicle in which the system is installed. A startup of the system may include starting one or more subsystems of an operating system. For example the graphics system may be a subsystem of the operating system.

Even starting just the graphics system may take several seconds or longer. If the vehicle is turned on and is immediately put in reverse gear then the graphics system may not start soon enough to display the video stream from the camera within a time frame required by a safety standard.

However when the system is starting the display driver and the camera module may be started prior to the graphic system or prior to the completion of the startup of the graphic system . The display driver and the camera module may start within the time frame required by the safety standard if started prior to the graphic system or prior to the completion of the startup of the graphic system .

When the display driver starts the display driver may configure the settings of the configuration module so that one of the hardware display layers such as hardware display layer is displayed on the display device . When the camera module starts the camera module may start the camera start the display driver start receiving the video stream from the camera and start providing the video stream to hardware display layer . The camera module may provide the video stream directly to hardware display layer . By providing the video stream directly to hardware display layer the camera module may bypass the display driver . Alternatively or in addition the camera module may provide the video stream indirectly to hardware display layer via the display driver . The display controller may cause the video stream written to hardware display layer to be displayed on the display device . The display driver and the camera module may start and be loaded and ready to execute within the time frame required by the safety standard. Other components such as the graphics system may continue to load while the camera module provides the video stream to the hardware layer and the display controller causes the video stream to be displayed on the display device .

After the components of the graphics system are loaded then the components may be executed. The graphics system may attempt to start the display driver which may indicate to the graphics system that the display driver is already initialized and executing. Instead of directing the display driver to initialize the display controller for a second time the graphics system may begin to utilize the display driver without reinitializing the display controller . The graphics system may not adjust any setting that would interrupt the video stream that is being provided to hardware display layer and displayed in the display device . When the video stream no longer is being displayed because of an event such a transmission of a vehicle switching out of reverse gear then the graphics system may adjust settings that would otherwise interrupt the video stream .

In one example the graphics system may not use hardware display layer or whichever one of the hardware display layers that receives the video stream from the camera module . Instead hardware display layer may be reserved for exclusive use by the camera module for as long as the graphics system remains executing. In an alternative example the graphics system may start using and or controlling hardware display layer after the vehicle has moved out of reverse gear if the graphics system is fully started or started to a point where the graphics system is useable by the camera module . In either example the graphics system may not immediately take control of hardware layer when starting so as not to interrupt the display of the video stream .

A startup system of the computing device that includes at least a portion of the integrated system illustrated in may control the startup of one or more of the components and of the integrated system . For example the startup system may start the camera module and then in turn the camera module may start the display driver and the camera . In an alternative example the startup system may start the display driver the camera and the camera module . The startup system may start the graphics system and other components. The startup system may be a portion of an operating system that controls how applications and or components of the operating system load into memory on boot up. The startup system may include configuration files registry entries scripts and or any other mechanism for controlling how components and or applications start when the operating system starts up. The operating system may in some examples include a microkernel and drivers. The microkernel may startup relatively quickly. The drivers may load separately from the microkernel. The microkernel the display driver and the camera module may load relatively quickly and in any event within the time frame required by the safety standard to start displaying video from a backup camera.

In some examples ownership or control of the display driver may switch from the camera module to the windowing system and or the graphics system after the windowing system and or the graphics system has started. For example the startup system may start the display driver and the camera module and obtain process identifiers PIDs for the display driver and the camera module . The startup system may provide the windowing system and or the graphics system with the PIDs for the display driver and the camera module . The windowing system and or the graphics system may coordinate with the camera module to obtain control of the display driver based on the PIDs for the camera module and the display driver . The coordination may be performed using an inter process communication IPC protocol or some other communication mechanism. Examples of IPC protocols may include anonymous pipes named pipes Common Object Request Broker Architecture CORBA Simple Object Access Protocol SOAP JavaScript Object Notation JSON or any other suitable protocol.

While the video stream is displayed through one of the hardware display layers the graphics system may cause the display controller to blend the video stream in one of the hardware display layers with an image or video in another one of the hardware display layers . For example the display controller may blend the video stream with distance scale lines so that the distance scale lines are superimposed on the video stream when displayed on the display device . The distance scale lines may indicate how far away objects represented in the video stream are from the vehicle. The camera module or some other module that draws the distance scale lines may direct the display controller to blend the distance scale lines onto the video stream via the graphics system . The graphics system may assign one of the hardware display layers such as hardware display layer to the module that draws the distance scale lines.

In the example illustrated in the integrated system may display the video stream while the graphics system starts up. More generally as illustrated in the integrated system may play a media stream while a media system starts up. In some examples the integrated system may have nothing to do with a vehicle or a camera. The integrated system may include the media system media hardware a media source a media module the startup system and an output device .

The media stream may be any type of data stream. The media stream may include the video stream . Alternatively or in addition the media stream may include an audio stream.

The output device may be any device that generates an output that may be sensed by a human. For example the output device may include the display device and or one or more speakers.

The media hardware may be any hardware that controls the output device . The media hardware may include the display controller . Alternatively or in addition the media hardware may include an audio controller such as an audio controller included on a computer motherboard an audio controller included in a sound card or any other type of control unit for the output device .

The media system may be a component of an operating system that implements an applications programming interface API with which an application may provide audio and or video to the media hardware . For example the media system may include the graphics system . Alternatively or in addition the media system may include an audio system that provides audio to the media hardware . The media system may provide an abstraction layer for controlling and communicating with the media hardware .

The media system may include a media driver . The media driver may be any device driver that controls the media hardware . The media driver may include software that communicates with the media hardware through the bus or other communications subsystem. In some examples the media driver may be hardware dependent and operating system specific. The media driver may implement an API application programming interface that components may call in order to communicate with the media hardware . The media driver may control the media hardware when the media driver is started. The media driver may for example include the display driver . Alternatively or in addition the media driver may include an audio driver.

The media module may be any component that provides the media stream to the media driver and or the media hardware while the media system starts up. The media module may also provide the media stream to the media driver and or the media hardware after the media system starts up. In some examples the media module may include the camera module . Alternatively or in addition the media module may include an audio module that provides one or more audio streams to the audio driver included in the media driver and or the audio controller included in the media hardware .

The media stream may be played with the media hardware before the media system starts up. For example the video stream may be displayed by the display controller included in the media hardware . Alternatively or in addition the audio stream may be played by the audio controller included in the media hardware . The media stream may continue to be played with the media hardware after the media system starts up without interrupting the playback of the media stream . Playing the media stream may refer to displaying video and or playing audio. In addition playing the media stream may refer to causing video and or audio to be output by the output device .

In the example illustrated in the camera module receives the video stream from the camera . In the general example illustrated in the media module may receive the media stream from the media source . The media source may be any source that generates the media stream or includes information from which the media stream may be generated. Examples of the media source may include a DVD player a CD player a MPEG player a microphone a camera a web camera a file a storage device or any other source of media.

A computing device may include all or a portion of the integrated system . The computing device may be any device that includes a processor and a memory . Examples of the computing device may include a head unit in a vehicle a mobile device a smart phone a cell phone a tablet computer a laptop computer a desktop computer an embedded device or any other type of device comprising a type of processor.

The computing device may include for example the processor the memory the media hardware the media source and the output device . The memory may include the media module the media system and the startup system .

In one example during operation of the integrated system the computing device may display a splash screen as the computing device starts. The splash screen may include one or more simple images. The computing device may not yet be fully started but the splash screen may indicate that the computing device is booting normally. When the media system and or the graphics system of the computing device fully starts then the splash screen may be replaced. Alternatively the splash screen may be more complex and not necessarily be replaced immediately after the graphics system starts. Without the integrated system decoders to generate a more complex splash screen may not be available until after the graphics system starts. Accordingly the system may include for example a video decoder module in the media module instead of or in addition to the camera module . The integrated system may start displaying a pre recorded video prior to the graphics system of the media system starting but without the graphics system interrupting the playing of the pre recorded video after the graphics system starts up. In particular the startup system may start the media module before the media system starts completely. The video decoder module in the media module may read an encoded version of the pre recorded video from a storage device included in the media source . The video decoder module may derive a decoded video stream from the encoded pre recorded video while the graphics system starts up. The video decoder module may provide the media stream which includes the decoded video stream directly to one of the hardware display layers included in the media hardware bypassing the media driver . Alternatively or in addition the startup system may start the media module and the media driver before the media system finishes starting up. The media module may provide the media stream to the media hardware through the media driver while the media system starts up.

During the startup of the media system the media system may determine whether the media hardware is initialized. For example the media driver may indicate to the media system that the media hardware is initialized. In response to a determination that the media hardware is initialized the media system may skip initializing the media hardware . For example the media system may not direct the media driver to initialize the media hardware in response to a determination that the media hardware is initialized but may direct the media driver to initialize the media hardware in response to a determination that the media hardware is not initialized.

The integrated system may be implemented in many different ways. For example although some components may be shown stored in the memory for example as logic implemented as computer executable instructions or as data structures in memory such logic and or data structures may be stored on distributed across or read from other machine readable storage media. The computer readable storage media may include memories hard disks floppy disks CD ROMs or any other type of memory from which a processor may read data. Alternatively or in addition components that are shown stored in the memory such as the media module the media system the startup system the camera module the display driver the windowing system and the composition manager may be implemented in hardware instead of being stored in the memory.

The integrated system may be implemented with additional different or fewer components than are illustrated in or . For example the integrated system may include the display driver but not the graphics system . In some examples the integrated system may not include the camera and the display device or any other media source or output device. In one example the system may include only the camera module and the graphics system . The integrated system may be included in any computing device such as a mobile computing device a laptop a smart phone a Personal Digital Assistant a desktop computer a tablet computer an appliance or an embedded system such as head unit of a vehicle. The display device may be external to the integrated system or integrated into the computing device .

The integrated system may include the processor and the memory . The memory may be any device for storing and retrieving data or any combination thereof. The memory may include non volatile and or volatile memory such as a random access memory RAM a read only memory ROM an erasable programmable read only memory EPROM or flash memory. Alternatively or in addition the memory may include an optical magnetic hard drive or any other form of data storage device.

The processor may be any device that executes computer executable instructions. The processor may be in communication with the memory . The processor may also be in communication with additional components such as the display controller and the camera . The processor may include a general processor a central processing unit a server device an application specific integrated circuit ASIC a digital signal processor a field programmable gate array FPGA a digital circuit an analog circuit a microcontroller any other type of processor or any combination thereof. The processor may include one or more elements operable to execute computer executable instructions or computer code embodied in the memory to perform the features of the media driver the display driver the media module the camera module the startup system or any other component that may comprise computer executable instructions.

Furthermore each one of the components of the integrated system may include more fewer or different elements than is illustrated in or . For example the graphics system and or the display controller may include more fewer or different components. Moreover the various modules illustrated are but one example of such functionality and any other configurations of modules encompassing similar functionality are possible. As one example the display driver may not be included in the graphics system . Alternatively the graphics system may include a first display driver and the camera module may include a second display driver. As another example the camera module may include an analog to digital converter that converts an analog video stream received from the camera to a digital video stream that is provided to the display controller .

In some examples one or more of the components of the system may be included in a System on a Chip SOC . For example the SOC may include the camera module the graphics system and the display controller . In another example the SOC may include fewer different or additional components. For example the SOC may include a processor such as a general processing unit GPU a central processing unit CPU and or a graphics processor. As another example the SOC may not include the camera module .

The components of the system may be resident on separate hardware such as separate removable circuit boards or share common hardware such as a same memory and processor for implementing instructions from the memory. Programs may be parts of a single program separate programs or distributed across several memories and processors.

The processing capability of the system may be distributed among multiple entities such as among multiple processors and memories optionally including multiple distributed processing systems. Parameters databases and other data structures may be separately stored and managed may be incorporated into a single memory or database may be logically and physically organized in many different ways and may implemented with different types of data structures such as linked lists hash tables or implicit storage mechanisms. Logic such as programs or circuitry may be combined or split among multiple programs distributed across several memories and processors and may be implemented in a library or a shared library such as a dynamic link library DLL . The DLL for example may store code that implements all or part of the camera module .

Operations may continue in an operation in which the media module which provides the media stream to the media driver and or the media hardware may be started . For example the camera module may be started and the camera module may provide the video stream to the display driver and or the display controller .

The media stream may be played with the media hardware before the media system starts up . For example the display controller may play the video stream before the graphics system starts up.

The media stream may continue to be played with the media hardware after the media system starts up . For example the video stream may continue to be played with the display controller after the graphics system starts up.

The operations may end by for example ceasing to play the media stream when an event such as a vehicle switching out of reverse gear occurs. The logic may include additional different or fewer operations than illustrated in . The operations may be performed in an order different than illustrated in .

All of the discussion regardless of the particular implementation described is exemplary in nature rather than limiting. For example although selected aspects features or components of the implementations are depicted as being stored in memories all or part of systems and methods consistent with the innovations may be stored on distributed across or read from other computer readable storage media for example secondary storage devices such as hard disks floppy disks and CD ROMs or other forms of ROM or RAM either currently known or later developed. The computer readable storage media may be non transitory computer readable media which may include CD ROMs volatile or non volatile memory such as ROM and RAM or any other suitable storage device. Moreover the various modules and screen display functionality is but one example of such functionality and any other configurations encompassing similar functionality are possible.

Furthermore although specific components of innovations were described methods systems and articles of manufacture consistent with the innovations may include additional or different components. For example a processor may be implemented as a microprocessor microcontroller application specific integrated circuit ASIC discrete logic or a combination of other type of circuits or logic. Similarly memories may be DRAM SRAM Flash or any other type of memory. Flags data databases tables entities and other data structures may be separately stored and managed may be incorporated into a single memory or database may be distributed or may be logically and physically organized in many different ways. The components may operate independently or be part of a same program. The components may be resident on separate hardware such as separate removable circuit boards or share common hardware such as a same memory and processor for implementing instructions from the memory. Programs may be parts of a single program separate programs or distributed across several memories and processors.

The respective logic software or instructions for implementing the processes methods and or techniques discussed above may be provided on computer readable media or memories or other tangible media such as a cache buffer RAM removable media hard drive other computer readable storage media or any other tangible media or any combination thereof. The tangible media include various types of volatile and nonvolatile storage media. The functions acts or tasks illustrated in the figures or described herein may be executed in response to one or more sets of logic or instructions stored in or on computer readable media. The functions acts or tasks are independent of the particular type of instructions set storage media processor or processing strategy and may be performed by software hardware integrated circuits firmware micro code and the like operating alone or in combination. Likewise processing strategies may include multiprocessing multitasking parallel processing and the like. In one embodiment the instructions are stored on a removable media device for reading by local or remote systems. In other embodiments the logic or instructions are stored in a remote location for transfer through a computer network or over telephone lines. In yet other embodiments the logic or instructions are stored within a given computer central processing unit CPU graphics processing unit GPU or system.

To clarify the use of and to hereby provide notice to the public the phrases at least one of . . . and or at least one of . . . or combinations thereof or . . . and or are defined by the Applicant in the broadest sense superseding any other implied definitions hereinbefore or hereinafter unless expressly asserted by the Applicant to the contrary to mean one or more elements selected from the group comprising A B . . . and N. In other words the phrases mean any combination of one or more of the elements A B . . . or N including any one element alone or the one element in combination with one or more of the other elements which may also include in combination additional elements not listed.

While various embodiments of the innovation have been described it will be apparent to those of ordinary skill in the art that many more embodiments and implementations are possible within the scope of the innovation. Accordingly the innovation is not to be restricted except in light of the attached claims and their equivalents.

