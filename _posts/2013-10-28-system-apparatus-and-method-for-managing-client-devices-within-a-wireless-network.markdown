---

title: System, apparatus and method for managing client devices within a wireless network
abstract: According to one embodiment, a system and computer-readable storage medium for storage of software directed to the management of associations between network devices is described. The computer-readable storage medium comprising instructions which, when executed by at least one hardware processor on a network device, causes performance of operations, comprising: (1) determining a desired operating state for a client device under analysis, the client device being associated with a first network device of a plurality of network devices; (2) detecting if a triggering event has occurred based on a comparison of the desired operating state for the client device under analysis to an actual operating state for the client device under analysis; and (3) in response to detecting that the triggering event has occurred, causing the client device to wirelessly connect to a second network device of the plurality of network devices in lieu of the first network device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09326313&OS=09326313&RS=09326313
owner: ARUBA NETWORKS, INC.
number: 09326313
owner_city: Sunnyvale
owner_country: US
publication_date: 20131028
---
This application is a continuation in part of U.S. patent application Ser. No. 13 195 720 filed on Aug. 1 2011 the entire content of which is incorporated by reference herein.

Embodiments of the disclosure relate to the field of wireless digital networks. More specifically one embodiment of the disclosure relates to the management of associations between network devices notably between at least a client device and an access point.

Wireless local area networks WLANs are becoming ubiquitous. Particularly in locations such as school and businesses there may be a number of wireless access points APs present in an area each providing a Basic Service Set BSS to associated clients known in the standards as stations STAs .

The challenge in managing the WLAN is to manage client association providing the best association between a client STA and an AP providing a Basic Service Set BSS .

There are a bewildering number of mechanisms for assisting with this process. Some infrastructure vendors have client software which enables coordination between APs and clients to negotiate a suitable BSS for association. However most clients particularly older clients lack this software support. In such cases in the IEEE 802.11 infrastructure for example the WLAN has to infer information about the client s view of the network and select the proper candidate BSS to handle the client.

The IEEE 802.11k standard IEEE Std. 802.11k 2008 incorporated herein by reference in its entirety has proposed different mechanisms on both the 802.11 client and the 802.11 infrastructure so that they are able to co operatively establish associations with the best BSSID in the client s vicinity. This is done using the 802.11k Beacon Report Information Element that is sent by the 802.11 client STA to the infrastructure AP in response to a Beacon Request from the AP. The Beacon Report consists of a list of BSS and their properties that the client is able to sense in its vicinity. This provides a standardized mechanism to enable the 802.11 infrastructure to take into account the client s network view to appropriately serve the client via the best available AP BSS.

Since this standard is relatively new and the implementation has been optional there are only a few client devices and drivers that support sending Beacon Reports. In the absence of this information the infrastructure has to infer this based on observations of client traffic.

What is needed is a system apparatus and method adapted to synthesize reported client information and using this information along with discovered anomalous behavior by a particular client to assist with the proper association of this client to a selected radio namely one or more network devices regulating access to a wireless network and or transceiver circuitry implemented within the network device that is better suited for the client and or the wireless network at large.

Embodiments of the invention relate to methods of infrastructure based client management. Access points APs maintain tables with client information obtained from signaling detected by the APs and at some point in time send this client information as client reports to a report process. Operating on a network device such as a controller for a network a dedicated host on the network or one of the networked APs for example the report process aggregates and organizes the client information provided from the client reports on a per client basis. The aggregated and organized client information from the supported APs may be maintained in a table where one or more entries associated with a particular client device referred to as a virtual beacon report may be subsequently provided to the AP that is currently associated with that client device.

The information within the virtual beacon report may be used by the network device or locally by the AP associated with the particular client device to i determine a set of candidate radios e.g. radios implemented within certain APs or the APs themselves that is are best suited for that client device and ii manage wireless association by that client device. The management of the client association may be accomplished by transmission of one or more message s to a group of APs which may include APs that differ from the APs having the candidate radios in order to re steer e.g. influence client association. These message s may be in the form of 1 a blacklist report to the group of APs instructing certain APs avoid responding to a request for wireless association by the client device and or 2 a whitelist report indicating one or more APs that are permitted to respond to such association requests. A selective AP association scheme is described in U.S. patent application Ser. No. 13 653 225 entitled Method and System to Configure Network Devices the contents of which are incorporated by reference.

Herein certain terminology is used to describe features within embodiments of the invention. For example the term network device generally refers to electronic equipment configured to communicate over a network and or process information related to such communications. Different categories of network devices may include but are not limited to 1 a client device being any consumer electronics with wireless network connectivity e.g. tablet laptop desktop netbook bar code scanner television set top box video gaming control a digital camera or a mobile handset with wireless e.g. WiFi WiMAX etc. and or cellular connectivity such as a smartphone personal digital assistant PDA or the like 2 an access point e.g. wired access port wireless access port a cellular phone or other network device configured as either a hot spot router or bridge for another network device etc. 3 a data control device e.g. network switch controller etc. or the like. The network device may be adapted with circuitry to support wireless connectivity with other network devices being part of a wireless network.

An aggregating device is a network device that includes hardware circuitry to receive and process information from multiple network devices for subsequent use in managing wireless associations between client devices and those network devices providing access to a network. Examples of an aggregating device may include a controller an AP dedicated host server or the like.

It is contemplated that a network device includes hardware logic such as one or more of the following i processing circuitry ii one or more communication interfaces such as a radio e.g. component that handles the wireless data transmission and or reception and or a physical connector to support wired connectivity and or iii memory hierarchy in the form of a non transitory computer readable storage medium e.g. a programmable circuit a semiconductor memory such as a volatile memory such as random access memory RAM or non volatile memory such as read only memory power backed RAM flash memory phase change memory or the like a hard disk drive an optical disc drive etc. or any connector for receiving a portable memory device such as a Universal Serial Bus USB flash drive portable hard disk drive or the like.

Herein the term logic is generally defined as hardware and or software. For example as hardware logic may include processing circuitry e.g. a microcontroller any type of processor a programmable gate array an application specific integrated circuit etc. semiconductor memory combinatorial logic or the like. As software logic may be one or more software modules such as executable code in the form of an executable application an application programming interface API a subroutine a function a procedure an object method implementation an applet a servlet a routine a source code an object code a shared library dynamic load library or one or more instructions. These software modules may be stored in any type of a suitable non transitory storage medium described above or transitory computer readable transmission media e.g. electrical optical acoustical or other form of propagated signals such as carrier waves infrared signals digital signals .

The term link is a physical or logical communication path between two or more network devices. Hence a link supports wired wireless and or logical communications. Examples of links supporting wired and or wireless communications may include electrical wiring optical fiber cable bus trace or a wireless channel using infrared radio frequency RF or any other wired wireless signaling mechanism. An example of logical communication includes two software components in communication with each other although they are not physically connected.

The term report generally refers to information transmitted as one or more messages where each message may be in the form of a packet a frame an Asynchronous Transfer Mode ATM cell or any other series of bits having a prescribed format.

Lastly the terms or and and or as used herein are to be interpreted as an inclusive or meaning any one or any combination. Therefore A B or C or A B and or C mean any of the following A B C A and B A and C B and C A B and C. An exception to this definition will occur only when a combination of elements functions steps or acts are in some way inherently mutually exclusive.

As this invention is susceptible to embodiments of many different forms it is intended that the present disclosure is to be considered as an example of the principles of the invention and not intended to limit the invention to the specific embodiments shown and described.

According to one embodiment of the disclosure as shown in one or more access points APs and or communicate with controller which in turn communicates with a network . APs support one or more wireless client devices and or

As is understood in the art APs are purpose built network devices where each AP e.g. AP comprises a processor memory hierarchy and input output interfaces and . The memory hierarchy may comprise fast read write memory for holding processor data and instructions while operating and nonvolatile memory such as electrically erasable programmable read only memory EEPROM and or Flash for storing files and system startup information. Wired interface is typically one or more IEEE 802.3 Ethernet interface used for wired connections to other network devices such as switches or to a controller. Wireless interface is typically one or more IEEE 802.11 wireless interfaces such as a plurality of radio units operating within different wireless frequency bands e.g. 2.4 gigahertz GHz 5 GHz etc. . In one embodiment of the disclosure APs may operate under control of a LINUX operating system with purpose built programs providing host controller and access point functionality.

Controller is a similar purpose built network device containing a similar hierarchy of processor memory and input output interfaces. Also wireless client devices and or are network devices each containing a processor memory wireless interface and other interfaces as needed.

According to the present invention synthesis of virtual beacon reports begins with the gathering of client and or AP information from the WLAN infrastructure . Each AP or maintains a client table which is shared among the radios in the AP. An illustrative embodiment of the client table is shown in . The client table in the AP may be of limited size for example 128 entries with entries aged out as the table fills.

The APs may further contain multiple radios as part of wireless interface for example radios operating in the 2.4 GHz and 5 GHz wireless bands. Upon receiving a PROBE REQUEST and or AUTHENTICATION REQUEST message from a client device e.g. client device an AP e.g. AP measures the signal strength e.g. signal to noise ratio SNR received signal strength indicator RSSI or an equivalent signal strength reading of the received message. If this is a new client device as identified by the client MAC address in the received message an entry is added to the client table . An example of entry includes at least a client Media Access Control MAC address and signal strength measured for the received message. Other information such as a timestamp channel and or band used for communications by AP with client device may also be recorded. If the client MAC address already existed in the table the entry for that client MAC address may be updated with the measured signal strength and or timestamp but prior measured values may be stored elsewhere in the client table or separate therefrom.

Referring back to the AP sends a client report to the report process hosted by the aggregating device e.g. controller . As an example this may occur periodically such as every q seconds q 1 for example. Of course the client report may be transmitted in an aperiodic manner where the transmission may be triggered by one or more events such as an update or addition to the client table or a combination of time and events. As an illustrative example the client report contains at least a list of client MAC addresses and the associated signal strength measurements e.g. SNRs or equivalents such as RSSI and may also include additional information such as timestamp channel and or band . The client report may also contain AP specific information associated with the AP uploading that particular client report . The AP specific information may include but is not limited or restricted to channel noise floors channel loading AP capabilities Basic Service Set Identifier BSSID an indicator whether the AP is associated with the corresponding client device or the like. As shown AP specific information may be stored as part of an appropriate entry in the client table or may be stored separately.

According to the invention a report process is present on the network and is hosted by the aggregating device. As shown for illustrative purposes the aggregating device may be controller . Alternatively if no controller is present in the network the report process may be hosted by one of the APs or may be present on a dedicated host of the wireless network . The location of the report process does not matter so long as it is capable of receiving client reports from APs and sending virtual beacon reports back to those APs.

Upon detecting of a triggering event information within a virtual beacon report VBR for a particular client device under analysis may be used to prompt alteration of a client association where the client association is evaluated by the controller or locally by an AP. It is contemplated that a virtual beacon report that corresponds to a particular client device is provided to the AP currently associated with the particular client device.

The report process maintains a client reports CRs table for aggregating information associated with client reports received from APs . As shown in each table entry in the client reports table corresponds to a virtual beacon report and is adapted to contain data provided by different APs e.g. AP AP etc. where multiple APs and even multiple radios per AP detect signaling from the same client device. This data is received from one or more client report and thus may be as simple as the client MAC address along with signal strength readings or may include timestamp or other additional information such as channel number frequency band or other dedicated AP information such as noise floor AP capabilities BSSID indicator whether the AP is associated with the corresponding client device AP loading or the like.

As client reports are received from APs the report process updates the table entry for that client device and the signal strength e.g. SNR or equivalent from the particular AP with its timestamp. New client entries are created as needed. In this manner the entry in client reports table that is directed to a single client device may contain multiple signal strength measurements e.g. SNR and or RSSI from different APs. It is contemplated that each client report may have an associated timestamp where successive comparison of signal strength measurements or other data is needed for client association management.

The client reports table may also be limited in size such as 4096 entries. The specific implementation of the client reports table will depend on the processor architecture and memory capacity of the device.

According to the invention the client reports table may be used in determining the set of candidate radios accessible by a particular client device upon detecting anomalous behavior by the client device which constitutes a triggering event and indication of a potential need to re associate the client device to another radio. This triggering event may be detected by the aggregating device or detected locally by the associated AP. Thereafter data in a virtual beacon report corresponding to the client device in the client reports table may be evaluated to determine what radio if any is best suited for the client device namely what AP to client association and or AP radio provides improved performance for the client device and or the wireless network. Illustrative client association evaluation schemes are described below.

As an illustrative example for a given client device find the AP BSS which reported the strongest signal strength e.g. SNR and or RSSI from that client device. This signal strength weighting may be optionally time weighted so that only recent signal strength values within a predetermined period are used and values older in time are ignored. Such a selection may result in a single AP BSS being identified or a list of the top m m 1 APs BSS may be identified.

In another example where channel utilization is available to the report process such as through inclusion in the client reports or separate tracking of channel utilization the AP BSS which is least loaded may be selected. Load may be measured in terms of the number of client devices associated with a particular AP and or channel utilization reported. Similarly AP noise floor may be used or included in such a calculation.

In another similar example the AP BSS on a suitable band 2.4 GHz vs. 5 GHz for the client device is selected. This selection may be based on characteristics such as band or channel loading noise floor AP characteristics such as supported bandwidth or the like. If for example a client device has only reported SNRs for one band it can be assumed that this client device is single band only. Often band capability may be inferred by examining the OUI portion of the client MAC address. Similarly an AP which is operating high bandwidth channels would not be a good candidate for a client device which only supports older legacy 802.11b modes.

In another example for client devices which have recorded signal strength readings of candidate radios across different channels and different bands one or more candidate APs BSS may be selected using a combination of the aforementioned criteria.

In another embodiment candidate radios may be selected on the basis of policy. As an example policy may allocate devices to different APs based on device type which may be inferred from the OUI portion of the client MAC address as well as from other client characteristics. Handheld devices such as smart phones and tablets may be directed to one group of APs and laptops to another group of APs. Similarly devices capable of high bandwidth modes may be directed to APs which support those high bandwidth modes while lower bandwidth devices are directed away from those high bandwidth APs. Other policy based decisions may be based on location on time of day or other criteria.

Further according to the invention upon receiving a client update from an AP the report process updates the set of best radios for all client devices which are associated with an AP and sends the virtual beacon report to that AP for the AP to potentially use in client association.

As described above the collection of client information at multiple APs and assimilation of the client information spanning the network by the aggregating device has been described. This section further describes the monitoring of a current actual operating state of one or more client devices by a network device where determination of a desired operating state may be based on information provided by two or more APs. Upon detecting anomalous behavior by a client device normally represented as a triggering event the network device operates alone or in combination with another network device to influence the client device to transition from its current operating state to its desired operating state. This transition may involve changing APs changing radios within the same AP e.g. changing frequency band and or changing RF channels based on broadcast multicast or multiple unicast messages.

According to one implementation this client association evaluation scheme is conducted by an aggregating device being a controller such as a physical or virtual controller a designated AP a dedicated host server or the like. In another implementation the AP associated with the client device under analysis conducts the client association evaluation scheme by monitoring metrics for the client device and providing signaling to manage client association if the AP detects anomalous behavior by the client device. The anomalous behavior may be directed to association decisions by the client device that cause reduced operability by the client device and or wireless network. The AP may receive virtual beacon reports for its associated client devices from the aggregating device via periodic updates in response to the client reports that are out from the AP to the aggregating device.

Referring now to a network device e.g. controller AP etc. determines the desired operating state for a client device under analysis based on client information within a virtual beacon report for that client device block . Uploaded from two or more network devices e.g. APs the client information within the virtual beacon report may include connectivity metrics e.g. signal strength client capabilities AP channel band loads or the like.

The network device analyzes the current operating state to determine if a triggering event has occurred where the triggering event denotes anomalous behavior by the client device blocks and . Examples of triggering events that denote detection of anomalous behavior by the client device are illustrated in . Alternatively the triggering event may be detected by simply comparing the current operating state in relation to the desired operating state and determining a triggering event based on the differences uncovered within certain parameters associated with the actual and desired operating states.

For instance as one illustrative example a triggering event may be detected upon determining based on the information provided by the virtual beacon report whether another radio provides better signal quality than the current radio in association with the client device. This better signal quality may be based on the other radio receiving from the client signaling having a higher measured signal strength than the measured signal strength for signaling from the client device received by the current radio. Alternatively the better signal quality may be based on signal strength for signaling from the current radio exceeding a prescribed amount e.g. percentage decibel level etc. from the measured signal strength for signaling from another radio. As another alternative the better signal quality may be based on another channel and or frequency band providing higher valued capabilities that the current channel and or frequency band used by the client device e.g. value support of higher QoS levels than signal strength .

In another illustrative example a triggering event may be detected upon determining whether optimal capabilities of the client match the functionality offered by the radio e.g. dual band capable client operating on higher frequency band client device operating on a particular channel reserved for higher or lower quality of services etc. . In yet another illustrative example a triggering event may be detected upon determining whether the current frequency band or channel is overloaded e.g. possesses at least a prescribed load factor .

If no triggering event is detected e.g. the current operating state of the client device is substantially equivalent to the desired operating state the network device does not interfere with the current operating state of the client device. However in the event that a triggering event has occurred and the current operating state is not equivalent to the desired operating state e.g. a difference between the desired operating state and the current actual operating state exceeds a threshold value the network device may influence the client device to transition to the desired operating state block .

First this equivalency may have different levels of comparison. One example of the current operating state being equivalent to the desired operating state may occur if the current operating state exactly matches the desired operating state. Another example is where the current operating state is within a certain performance range from the desired operating state where the transition would only provide marginal performance improvement e.g. less than 10 improvement . In other words the difference between the desired operating state and the current operating state does not exceed a threshold value e.g. threshold certain differences 

Second the amount of influence in transitioning to the desired operating state depends on whether the network device is the aggregating device or the AP associated with the client device under analysis. For instance as illustrative examples where the network device is the AP associated with the client device the AP influences the transition by transmitting a Client Steer Request message to the aggregating device e.g. controller where the Client Steer Request message includes a BSSID or other identifier for a destination radio targeted for client association. Based on the information within the Client Steer Request message the aggregating device influences the transition by transmitting a message to a group of APs where the message identifies a set of candidate radios that may be either i suited for such association with a particular client device whitelist or ii not suited for association with the particular client device blacklist .

However where the network device is the aggregating device the network device merely transmits the message to the group of APs without receipt of the Client Steer Request message.

Herein the goal of the client association evaluation scheme is to ensure that the client device is associated to the best link or available candidate radio. There are several triggering events to determine when to consider transitioning a client device to a radio different from the one it is currently associated. Illustrative triggering events are described below where detection of such triggering events is described as being conducted by a network device such as an aggregating device e.g. controller designated AP or other network device operating in a centralized capacity or the AP associated with a particular client device under analysis.

One of the common problems is that mobile client devices tend to remain associated to APs despite having poor connectivity which reduces performance of other associated client devices on that AP as well. The prolonged association despite poor connectivity is sometimes referred to as a sticky association . The following operations may be deployed to determine the presence of a sticky association and transition the client device to a better radio.

As shown in a network device monitors the received signal strength e.g. SNR RSSI etc. for a set of client devices block . Where the network device is an aggregating device the set of client devices includes all client devices that are within an RF neighborhood of the APs communicatively coupled to the aggregating device where the measured signal strength is provided via client reports. Where the network device is the AP associated with the client device the set of client devices merely include those client devices that are associated with the AP.

For a client device under analysis if the client signal strength is greater than or equal to a first threshold e.g. 25 dB SNR the network device identifies that the link is acceptable and no transition is requested block . However if the client signal strength falls below the first threshold the network device determines if the signal strength measurements indicate that the client device is moving away from its associated AP blocks and . The client device may be considered to be moving away from its associated AP when the signal strength level started off greater than the first threshold but now the monitored signal strength has lessened by a prescribed amount e.g. prescribed decibel level for a predetermined number R of measurement events R 2 and the monitored signal strength is below the first threshold. For instance the monitored signal strength has lessened by at least 3 dB for three measurement events e.g. each measurement event separated by at least a predetermined amount of time and the monitored signal strength is less than the first threshold e.g. 25 dB SNR . The measurement events may be consecutive readings prior to the monitored signal strength falling below the first threshold or may be non consecutive readings.

If the monitored signal strength has lessened by the prescribed amount for a predetermined number of measurement events and the monitored signal strength is below the first threshold the network device conducts operations to influence the client device to transition to a better radio and link block . This hysteresis based analysis minimizes unnecessary client transitions due to glitches in signal strength observations.

Alternately in lieu of signal strength criterion the network device may be adapted to monitor client health metrics for each client device as shown in . A client health metric is a metric that measures the quality of the link between the AP and the client device. For instance one example of a client health metric includes a ratio between i the actual time needed to deliver a particular amount of data e.g. byte of data which takes into account data rate and number of retries and ii the ideal time under the best link conditions subject to the capabilities of the client device e.g. maximum data rate supported and no retries .

Upon analyzing the current health metric and determining that this metric falls below a predetermined threshold value the network device looks to transition to the client device to another AP blocks . Hence the client health metric may be provided as part of a client report provided from the APs to the network device. The client health metric may be in lieu of or in addition to the signal strength metric.

Despite whether signal strength or client health metrics are used for the triggering event the network device analyzes information within the virtual beacon report associated with the client device under analysis which includes monitored values associated with particular client device for various APs where some or all of the APs may not be associated with the client device.

If the network device determines that there are one or more radios with a better signal strength at least 10 dB on the same band and its absolute signal level is at least 70 dBm the one or more radios are selected as candidate s for steering. If no radio provides better signal strength or link condition the network device checks other frequency bands for a better signal or link condition. For instance prior to moving from the 2.4 GHz band to the 5 GHz band or from the 5 GHz band to the 2.4 GHz band a determination may be made if client load metrics are being exceeded such as whether the client load metric e.g. 2.4 GHz 5 GHz client ratio exceeds a prescribed ratio. For example the prescribed ratio may be 1 4 as described below.

Conventionally band steering attempted to push all 5 GHz capable client devices to an AP supporting 5 GHz irrespective as to which particular AP would be subsequently associated with the client device. In the following operations outline how to address the issue that client devices may be steered to 5 GHz radios that may have poor link qualities.

First client devices that are communicative over two or more frequency bands are identified block . For instance client devices that are dual band capable may be identified where both a first frequency band radio e.g. 2.4 GHz radio and a second frequency band radio e.g. 5 GHz radio for that client device are listed in their corresponding virtual beacon reports.

Next the network device monitors the signal strength for a particular client device block . If the client signal strength is above a first threshold e.g. 25 dB the network device conducts a scan looking for multi band capable client devices that are currently in communication with a 2.4 GHz radio blocks and . If the signal strength for the 5 GHz radio deployed on the same AP is greater than a second threshold e.g. 70 dBm and is weaker by a certain decibel level e.g. at most 10 dB than signaling measured from the 2.4 GHz radio the network device triggers a transition to the 5 GHz radio on the same AP blocks and . The transition may be triggered by a controller operating as the network device or the associated AP which transmits a Client Steer Request message to the aggregating device.

Referring now to in the above described band steering scenario the measured ratio between the number of client devices operating in a first frequency band and the number of client devices operating in another frequency band s determines whether a client device can transition from the first band to another band. For instance a determination is made to identify Y client devices that can operate on multiple frequency bands block . Herein for example Y is the total number of client devices operating on at least two different radio frequencies e.g. 5 GHz radio and 2.4 GHz radio . Thereafter as set forth in blocks and a determination is made as to the number A of client devices operating on a first type of radio e.g. 2.4 GHz radio and a second number B of client devices operating on a second type of radio e.g. 5 GHz radio . If at least a first prescribed number of client devices A operate on the first type of radio and a second prescribed number of client devices B operate on the second type of radio so that the ratio A B is less than a prescribed threshold value no further client devices are steered to use the second radio type without removing a client device from communicating using that second radio type block . Otherwise the client device may be steered from the first radio type to the second radio type block .

As an illustrative example the total number of client devices operating on two different radio frequencies e.g. 5 GHz radio and 2.4 GHz radio is equal to 17 and the prescribed threshold value A B is set at 1 4. Herein four client devices A 4 operate using the first radio type e.g. 2.4 GHz radio and twelve client devices B 13 operate using the second radio type e.g. 5 GHz radio . The transition ratio is 4 13 which is greater than the prescribed threshold value 1 4 . As a transition of a client device using the first radio type A 43 to a second radio type B 1314 would produce a ratio of 3 14 which is less than the prescribed threshold value 1 4 the aggregating device would not steer the client device to establish a link with a second radio type.

Load balancing of client devices across APs may be performed centrally on the aggregating device to avoid any conflicting load balance triggers coming from APs and erroneous client device moves. Herein client devices associate to their preferred APs and then the aggregating device intervenes only if there is a resulting load asymmetry amongst APs in the given RF neighborhood warrants modification. The corresponding client association evaluation scheme is described below in .

Periodically such as every X minutes e.g. 2 minutes by default the aggregating device performs load balancing checks on all terminating APs block . The load balancing checks are done by computing the client based RF neighborhood hereinafter RF neighborhood to determine which APs should be considered for load balancing client devices. For example the RF neighborhood may be determined from a client device s virtual beacon report where for every associated client device belonging to a radio all other radios spanning both 2.4 GHz and 5 GHz radios that are in those client device s virtual beacon report are considered. This RF neighborhood listing may be slightly different than the listing of monitored APs that are maintained and based on passive scanning.

Using the RF neighborhood for load balancing ensures that client devices are balanced amongst only those APs that have reported detecting the client device and avoids accidental steering of client devices to radios that are operating on channels that the client device does not support e.g. channels in some countries .

One implementation of load balancing described below considers matching the number of client devices per channel in the given RF neighborhood. If a radio has fewer than T client devices default 10 the radio load balancing operations are skipped block . Otherwise partition the APs associated with the RF neighborhood based on which channels they are operating on block .

Thereafter a determination of the load on each channel is conducted by summing up the number of client devices associated to each radio on that channel block . The target desired number of client devices per channel may be determined using averaging e.g. total client devices number of channels that APs span for example.

After the load is computed a determination is conducted as to whether certain radios are overloaded or underloaded blocks and . From overloaded radios as shown in block determine the target client devices that can be moved e.g. client devices with lower frequency signal levels . For each underloaded radio as shown in block a check is conducted against the list of target client devices to transition and determine if the underloaded radio is a good match e.g. at least 25 dB SNR . If yes transition the client device to the new radio and mark all of the radios that have been considered already for balancing block .

Therefore the load adjustment process stops when all radios associated with different wireless frequency bands are considered blocks and . Additionally we can consider balancing number of client devices within a given channel or consider balancing client devices across radio bands.

In one embodiment of the invention the report process produces blacklist reports for each AP. Examining each client device if the currently associated AP is not one of the candidate APs BSS then the report process includes that particular client information e.g. the client MAC address in the blacklist report for that AP. The report process repeats this procedure for all client devices associated to the AP and then sends a client blacklist report to the AP. This client blacklist report may be sent to the AP as example in response to the client update received from the AP.

In this embodiment each AP maintains a blacklist table. This table may be of limited size such as 128 entries and contains at least client MAC addresses and timestamps. Entries may be aged out of the table for example after a predetermined time such as 30 seconds. Whenever the AP receives a blacklist report from the report process the AP adds client devices and timestamps to its blacklist table or updates the timestamp for a client entry of a client MAC address is already present in the table. This blacklist table is used to influence client devices away from the AP BSS that is not appropriate as determined by the report process.

As an example when the AP receives a PROBE REQUEST message from a client device that is on the blacklist and has not aged out the AP does not send a PROBE RESPONSE message.

When an AP receives an AUTHENTICATION REQUEST message from a client device on the blacklist that has not aged out the AP may choose to not respond or it may respond with a response code indicating the AP BSS is loaded or full and cannot accept more connections.

When an AP receives an ASSOCIATION REQUEST message from a client device on the blacklist that has not aged out the AP sends an ASSOCIATION RESPONSE message indicating that the AP BSS is loaded or full and cannot accept more connections.

In addition to the embodiment of producing and propagating client blacklists for non candidate APs the report process may also generate and propagate client whitelists to corresponding client APs. In the case of a whitelist an AP only responds to client devices which are on the whitelist.

It should be understood that the steps and processes of the present invention are performed in a plurality of APs on a wireless network with the report process being hosted on a suitable device on the network such as a controller a dedicated host or an access point. Similarly the client device may be a laptop or desktop computer tablet handheld device or fixed function device capable of performing the methods described herein.

The present invention may be realized in hardware software or a combination of hardware and software. A typical combination of hardware and software may be a network server or access point with software that when being loaded and executed controls aspects of the access point and the report process such that they carry out the methods described herein.

This invention may be embodied in other forms without departing from the spirit or essential attributes thereof. Accordingly reference should be made to the following claims rather than to the foregoing specification as indicating the scope of the invention.

