---

title: Service provider certified device policy management
abstract: Various exemplary embodiments relate to a method performed by a policy server. The method includes: receiving a request for service, the request including an identification of user equipment; determining a user equipment type (TAC); evaluating a policy rule based on the user equipment type, the policy rule including a condition referencing at least one user equipment type; and responding to the request for service based on evaluation of the policy rule.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09445259&OS=09445259&RS=09445259
owner: Alcatel Lucent
number: 09445259
owner_city: Boulogne-Billancourt
owner_country: FR
publication_date: 20130924
---
This application is related to the following co pending application which is hereby incorporated by reference for all purposes as if fully set forth herein application Ser. No. 14 034 878 filed on Sep. 24 2013 RESIDENTIAL GATEWAY BASED POLICY. 

Communications networks in particular mobile networks allow various devices to connect to the network in order to obtain communications services. A subscriber identity module SIM card may be inserted into various devices in order to select the mobile network or move an existing subscriber to a new device. Use of a SIM card allows users to switch mobile networks. For example users may switch a device sold by one network provider to the mobile network of another provider. Users may also attempt to connect imported devices to the mobile network. The flexibility of SIM cards increases the number of devices that may be connected to a mobile network.

A brief summary of various exemplary embodiments is presented. Some simplifications and omissions may be made in the following summary which is intended to highlight and introduce some aspects of the various exemplary embodiments but not to limit the scope of the invention. Detailed descriptions of a preferred exemplary embodiment adequate to allow those of ordinary skill in the art to make and use the inventive concepts will follow in later sections.

Various exemplary embodiments relate to a method performed by a policy server. The method includes receiving a request for service the request including an identification of user equipment determining a user equipment type evaluating a policy rule based on the user equipment type the policy rule including a condition referencing at least one user equipment type and responding to the request for service based on evaluation of the policy rule.

In various embodiments the method further includes determining a marketing name for the user equipment wherein the condition references the at least one user equipment type according to the marketing name. The marketing name may correspond to a plurality of user equipment types.

In various embodiments the user equipment type is a type allocation code TAC extracted from a user equipment info attribute value pair AVP received in the request for service.

In various embodiments the method further includes determining that the request for service is not related to a known subscriber and authorizing default services based on the user equipment type. The default services may include a limit on at least one of an available time period and a data volume.

In various embodiments the method further includes authorizing a default session configured to provide access to a service portal storing the identification of user equipment in association with the default session receiving from the portal a request for identification of user equipment associated with the session sending the stored identification of user equipment to the portal receiving new subscriber information including the identification of user equipment and updating the session based on the new subscriber information. The method may further include determining that the request for service is not related to a known subscriber wherein the default session is based on an unknown subscriber identifier and certified user equipment type. The method may further include storing an IP address for the default session wherein the request for identification of user equipment associated with the session includes the IP address.

Various exemplary embodiments relate to a non transitory machine readable storage medium encoded with instructions executable by the processor of a policy server for performing the above describe method.

Various exemplary embodiments relate to a policy server including an interface configured to receive a service request initiated by a user equipment attaching to a mobile network the service request including a user equipment identification a device mapper configured to determine a marketing name of the device based on the user equipment identification and a rules engine processor configured to evaluate conditions of policy rules and execute actions corresponding to true conditions at least one policy rule including a condition based on the marketing name of the device.

In various embodiments the device mapper includes a non transitory machine readable storage medium storing a plurality of type allocation codes each type allocation code mapped to a marketing name.

In various embodiments the condition of the at least one rule includes a certified device marketing name and the action of the at least one rule instructs the rules engine to allow a session providing service to the user equipment. The policy server may further include a session information storage configured to store information regarding the session including the marketing name of the user equipment and an application programming interface configured to provide an external service portal access to the session information and configured to receive subscriber information from the service portal.

Various exemplary embodiments relate to a method performed by a policy server. The method includes receiving a request for service the request including an identification of user equipment authorizing a default session configured to provide access to a service portal storing the identification of user equipment in association with the default session receiving from the portal a request for identification of user equipment associated with the session sending the stored identification of user equipment to the portal receiving new subscriber information including the identification of user equipment and updating the session based on the new subscriber information.

Various exemplary embodiments relate to a method performed by a service portal. The method includes receiving a request for new subscriber registration from a user equipment determining an IP address of the user equipment requesting from a policy server a user equipment type determining a set of compatible subscriptions based on the user equipment type receiving a selection of a compatible subscription from the user equipment and sending new subscription information based on the selected compatible subscription to the policy server.

It should be apparent that in this manner various exemplary embodiments enable policy decisions based on user equipment device. In particular by analyzing the TAC a policy server may determine the marketing name of a device and provide policy according to the model of the device.

As the number of available devices grows mobile networks may suffer from compatibility issues. For example users may install a SIM card into device that is not compatible with the network. An incompatible device may cause problems for the mobile network such as for example sending repeated requests that consume network resources.

Identifying a model of a network device connecting to a mobile network may allow a network policy server such as a policy and charging rules node PCRN to make policy decisions based on the type of network device. For example a policy server may limit network access to certified devices that are known to be compatible with the mobile network. A policy server may also provide certified devices with default services regardless of the subscriber. In various embodiments a policy server may facilitate subscriber selection of customized service plans based on the type of mobile device.

Referring now to the drawings in which like numerals refer to like components or steps there are disclosed broad aspects of various exemplary embodiments.

User equipment may be a device that communicates with packet data network for providing the end user with a data service. Such data service may include for example voice communication text messaging multimedia streaming and Internet access. More specifically in various exemplary embodiments user equipment is a personal or laptop computer wireless email device cell phone tablet television set top box or any other device capable of communicating with other devices via EPC .

Base station may be a device that enables communication between user equipment and EPC . For example base station may be a base transceiver station such as an evolved nodeB eNodeB as defined by 3GPP standards. Thus base station may be a device that communicates with user equipment via a first medium such as radio waves and communicates with EPC via a second medium such as Ethernet cable. Base station may be in direct communication with EPC or may communicate via a number of intermediate nodes not shown . In various embodiments multiple base stations not shown may be present to provide mobility to user equipment . Note that in various alternative embodiments user equipment may communicate directly with EPC . In such embodiments base station may not be present.

Evolved packet core EPC may be a device or network of devices that provides user equipment with gateway access to packet data network . EPC may further charge a subscriber for use of provided data services and ensure that particular quality of experience QoE standards are met. Thus EPC may be implemented at least in part according to various 3GPP standards. Accordingly EPC may include a serving gateway SGW a packet data network gateway PGW a policy and charging rules node PCRN and a subscription profile repository SPR .

Serving gateway SGW may be a device that provides gateway access to the EPC . SGW may be the first device within the EPC that receives packets sent by user equipment . SGW may forward such packets toward PGW . SGW may perform a number of functions such as for example managing mobility of user equipment between multiple base stations not shown and enforcing particular quality of service QoS characteristics for each flow being served. In various implementations such as those implementing the Proxy Mobile IP standard SGW may include a Bearer Binding and Event Reporting Function BBERF . In various exemplary embodiments EPC may include multiple SGWs not shown and each SGW may communicate with multiple base stations not shown .

Packet data network gateway PGW may be a device that provides gateway access to packet data network . PGW may be the final device within the EPC that receives packets sent by user equipment toward packet data network via SGW . PGW may include a policy and charging enforcement function PCEF that enforces policy and charging control PCC rules for each service data flow SDF . Therefore PGW may be a policy and charging enforcement node PCEN . PGW may include a number of additional features such as for example packet filtering deep packet inspection and subscriber charging support. PGW may also be responsible for requesting resource allocation for unknown application services.

Policy and charging rules node PCRN may be a device or group of devices that receives requests for application services generates PCC rules and provides PCC rules to the PGW and or other PCENs not shown . PCRN may be in communication with AF via an Rx interface. As described in further detail below with respect to AF PCRN may receive an application request in the form of an Authentication and Authorization Request AAR from AF . Upon receipt of AAR not shown PCRN may generate at least one new PCC rule for fulfilling the application request.

PCRN may also be in communication with SGW and PGW via a Gxx and a Gx interface respectively. PCRN may receive an application request in the form of a credit control request CCR not shown from SGW or PGW . As with AAR upon receipt of a CCR PCRN may generate at least one new PCC rule for fulfilling the application request. In various embodiments AAR and the CCR may represent two independent application requests to be processed separately while in other embodiments AAR and the CCR may carry information regarding a single application request and PCRN may create at least one PCC rule based on the combination of AAR and the CCR. In various embodiments PCRN may be capable of handling both single message and paired message application requests.

Upon creating a new PCC rule or upon request by the PGW PCRN may provide a PCC rule to PGW via the Gx interface. In various embodiments such as those implementing the PMIP standard for example PCRN may also generate QoS rules. Upon creating a new QoS rule or upon request by the SGW PCRN may provide a QoS rule to SGW via the Gxx interface.

The PCRN may also communicate with service portal via an application programming interface API which will be described in further detail below.

Subscription profile repository SPR may be a device that stores information related to subscribers to the subscriber network . Thus SPR may include a machine readable storage medium such as read only memory ROM random access memory RAM magnetic disk storage media optical storage media flash memory devices and or similar storage media. SPR may be a component of PCRN or may constitute an independent node within EPC . Data stored by SPR may include an identifier of each subscriber and indications of subscription information for each subscriber such as bandwidth limits charging parameters and subscriber priority.

Packet data network may be any network for providing data communications between user equipment and other devices connected to packet data network such as AF . Packet data network may further provide for example phone and or Internet service to various user devices in communication with packet data network .

Application function AF may be a device that provides a known application service to user equipment . Thus AF may be a server or other device that provides for example a video streaming or voice communication service to user equipment . AF may further be in communication with the PCRN of the EPC via an Rx interface. When AF is to begin providing known application service to user equipment AF may generate an application request message such as an authentication and authorization request AAR according to the Diameter protocol to notify the PCRN that resources should be allocated for the application service. This application request message may include information such as an identification of the subscriber using the application service an IP address of the subscriber an APN for an associated IP CAN session and or an identification of the particular service data flows that must be established in order to provide the requested service. AF may communicate such an application request to the PCRN via the Rx interface.

Service portal may be a device that provides a subscriber with access to information regarding the subscriber s account. For example service portal may be a server provided by a network operator. UE may connect to service portal via packet data network to view or change account information. Service portal may be configured for communication with PCRN or SPR via an API that provides access to various functionality of PCRN . For example service portal may use the API to obtain session information regarding a connected subscriber. As another example service portal may be allowed to update SPR with changes to subscriber information based interaction with a UE .

Gx interface may be an interface comprising hardware and or executable instructions encoded on a machine readable storage medium configured to communicate with a PGW such as PGW . Such communication may be implemented according to the 3GPP TS 29.212. Thus Gx interface may receive requests for PCC rules and transmit PCC rules for installation. Gx interface may further receive UE originated application requests session requests and event notifications in the form of a credit control request CCR .

Gxx interface may be an interface comprising hardware and or executable instructions encoded on a machine readable storage medium configured to communicate with a SGW such as SGW . Such communication may be implemented according to the 3GPP TS 29.212. Thus Gxx interface may receive requests for QoS rules and transmit QoS rules for installation. Gxx interface may further receive UE originated application requests session requests and event notifications in the form of a credit control request CCR .

Rx interface may be an interface comprising hardware and or executable instructions encoded on a machine readable storage medium configured to communicate with an AF such as AF . Such communication may be implemented according to the 3GPP TS 29.214. For example Rx interface may receive a service request AAR from AF .

Device mapper may include hardware or executable instructions encoded on a machine readable storage medium configured to determine a model of user equipment. Device mapper may extract information from a received message such as a CCR. In particular device mapper may extract a User Equipment Info AVP which may include an User Equipment Info Type AVP and an User Equipment Info Value AVP. Device mapper may ensure that the User Equipment Info Type AVP is a known type such as an international mobile station equipment identity IMEI or mobile equipment identifier MEID . Device mapper may interpret the User Equipment Info Value AVP according to the User Equipment Info Type AVP. For example for an IMEI device mapper may extract the first eight digits of the IMEI as a Type Allocation Code TAC . Device mapper may then compare the TAC to a list of known devices. Each known device may be associated with a marketing name for the device. PCRN may include rules based on either the marketing name or the TAC.

Session information storage may be a non transitory machine readable storage medium configured to store session information for sessions managed by PCRN . Session information storage may store any information received in a request in association with session identifiers and PCC rules generated by PCRN . In particular information for an IP CAN session authorized by PCRN may include a session identifier either the User Equipment Info AVP TAC or marketing name of the device and an IP address assigned to the UE for the session.

Rules engine may include hardware or executable instructions encoded on a machine readable storage medium configured to make decisions based on available information and rules. Rules engine may include various rule sets that may be evaluated based on a particular event or context. For example rules engine may evaluate an attachment rule set whenever PCRN receives a message indicating a new device is attaching to the network . An attachment rule set will be further described with respect to .

SPR may be a subscriber profile repository device similar to SPR . SPR may be integrated with PCRN . SPR may be accessed by rule engine to provide subscriber information for use in evaluating rules. SPR may also be accessed via API to provide subscriber information to another network element or receive updated subscriber information.

API may include hardware or executable instructions encoded on a machine readable storage medium configured to communicate with an external device such as a service portal . API may provide authorization features to ensure that the external device is allowed to communicate with PCRN . API may make various features of PCRN available to an external device. For example API may provide access to information stored in session information storage or SPR . API may also allow service portal to update SPR with updated subscriber information.

Name field may indicate a name of the rule. The name of the rule may be selected by the network operator to identify the rule. Name field may also include a unique identifier.

Condition field may include one or more logical statements that may be evaluated by rules engine . Condition field may reference information received in a message or stored at PCRN . For example in various embodiments the marketing name received in a CCR message may be indicated as PCRN.IMEI.TAC Gx Message.User Equipment Info Value.IMEISV.TAC .Marketing Name.

Action field may indicate one or more actions for PCRN to execute if the condition is true. For example action field may indicate how PCRN should respond to a request. Accordingly rules table may be used to make policy decisions to select actions in response to requests.

Rules may be rules configured by a network operator. For example rule may be named Certified Devices and determine whether a device attempting to attach to the network is on a list of certified devices. For example rule may allow access if the device has the marketing name iPad . Rule may include a plurality of marketing names or TACs. A marketing name may be generic to several versions of a device and PCRN may use partial matching. As another example rule may be named Blocked Devices and determine whether a device attempting to attach to the network is on a list of banned devices. If the device is on the banned list PCRN may deny the request to attach to the network. As another example rule may be named Certified Tablet Unknown Subscriber. Rule may determine that the device is a certified tablet device and the subscriber is unknown and provide default services to the device. Default services may be for example a trial period for the device user to try the mobile network. For example default services for a tablet device may include data service. As another example rule may be named Certified Phone Unknown Subscriber. Rule may determine that the device is a certified phone and the subscriber is unknown and provide default voice service to the device.

In step the PCRN may receive a CCR message requesting services for a user equipment . The CCR message may include information regarding the UE including a User Equipment Info AVP a subscriber identifier and an IP address of the UE .

In step PCRN may extract the User Equipment Info AVP from the CCR message. In step PCRN may determine the TAC based on the User Equipment Info AVP. PCRN may extract the eight digits of the TAC from the User Equipment Info Value AVP based on the User Equipment Info Type AVP.

In step PCRN may determine a marketing name for the UE based on the TAC. The marketing name may be a commercial name of the model of the device. The marketing name may apply to one or more models of a device. For example the marketing name iPad may refer to an Apple iPad iPad 2 or iPad mini. PCRN may also use partial matching with marketing names. For example an iPad2 or an iPad mini may both match a rule using the name iPad . PCRN may store any information associated with the UE the CCR message or the subscriber in session information storage . For example PCRN may store the user identification the IP address the User Equipment Info AVP or extracted elements the marketing name or any combination of this information.

In step PCRN may determine whether the UE is a certified device. In various embodiments PCRN may use a rules engine to evaluate attachment rules set to determine whether UE is a certified device. In various embodiments a PCRN may determine whether the TAC or marketing name corresponds to a certified device using to a list filter software module or ASIC. Alternatively PCRN may determine whether the TAC or marketing name is on a list of banned devices. PCRN may operate on the assumption that any device that is not banned is certified. If the UE is not a certified device the method may proceed to step . If the UE is a certified device the method may proceed to step .

In step PCRN may determine that the banned or not certified device should not be provided with service. Accordingly PCRN may send a message such as a CCA message denying the received request. The method may then proceed to step where the method ends.

In step PCRN may determine whether the subscriber associated with UE is a known subscriber. PCRN may query SPR or SPR with a subscriber identifier included in the CCR message to obtain a subscriber profile. If the subscriber identifier is not known to the SPR PCRN may receive an indication that the subscriber identifier is unknown. If the subscriber is unknown the method may proceed to step . If the subscriber is known the method may proceed to step .

In step the PCRN may determine PCC rules for default services for the UE . A service provider may provide default services to a certified device of an unknown subscriber in order to allow the user to experience the network. For example default services may be used to demonstrate data transfer rates or call quality. PCRN may consider the characteristics of the UE when determining PCC rules for default services. For example PCRN may provide data service for a tablet device with QoS settings that match the capabilities of the device. As another example PCRN may provide voice and data service for a smart phone. PCRN may include the PCC rules in a CCA message in response to the CCR message. Accordingly PCRN may send the PCC rules to PGW in order to provide the services. The method may then proceed to step where the method ends.

In step PCRN may generate PCC rules based on the subscriber profile of the known subscriber. PCRN may generate the PCC rules based on a service plan selected by the subscriber. PCRN may allow the services selected by the subscriber. For example PCRN may generate the PCC rules by evaluating a different rule table with conditions based on elements of the subscriber profile. The method may then proceed to step where the method ends.

In step the UE device may initiate attachment to the network . The UE may transmit a signal requesting attachment through base station and SGW . PGW may receive the request and determine that the UE is requesting a new session. In step PGW may generate a CCR message to send to PCRN . The CCR message may include information regarding the UE including a User Equipment Info AVP and a subscriber identifier.

In step PCRN may extract and analyze the User Equipment Info AVP. PCRN may extract the TAC from the User Equipment Info Value AVP and use the device mapper to determine a marketing name for the UE .

In step PCRN may request subscriber information from SPR based on the subscriber identifier included in the CCR message. In step SPR may return available subscriber information. If SPR does not recognize the subscriber identifier SPR may indicate that the subscriber is unknown. For example the subscriber identifier may be associated with a new SIM card that has not been registered to an individual. PCRN may store any information associated with the UE the CCR message or the subscriber in session information storage . For example PCRN may store the user identification the IP address the User Equipment Info AVP or extracted elements the marketing name or any combination of this information.

In step PCRN may evaluate policy rules to determine an action for the CCR message. PCRN may evaluate an attachment rule set that includes rules for evaluating an initial CCR message. PCRN may evaluate the condition portion of each rule using the information in the CCR message the marketing name of the UE and subscriber information from SPR . As discussed above regarding PCRN may determine whether to allow or deny the request based upon whether the UE is a certified device. PCRN may also determine whether to provide an unrecognized subscriber with default services based upon whether the UE is a certified device. In various embodiments PCRN may also determine that the UE is eligible only for redirect service. For example if the subscriber unknown or is known but the account is expired or out of credit PCRN may determine that the UE should be provided with redirect services.

In step PCRN may respond to the CCR message with a CCA message. If PCRN determines that the attachment request should be denied PCRN may send a CCA message with no PCC rules. If PCRN determines that the request should be granted PCRN may generate PCC rules and establish an IP CAN session. If PCRN determines that the attachment request from a known subscriber should be allowed PCRN may generate PCC rules based on subscriber information to include in the CCA message. If PCRN determines that default services should be provided PCRN may include default PCC rules corresponding to the selected default services. If PCRN determines that redirect services should be provided PCRN may provide PCC rules that only allow the UE to access the service portal . PCRN may send the PCC rules to PGW for enforcement.

In step UE may attempt to communicate using network . Based on the redirect PCC rules PGW may redirect UE to service portal . For example PGW may send an HTTP redirect to UE with the address of the service portal . Service portal may then receive a request from UE . The request may be an HTTP request for a webpage.

In step service portal may request information from PCRN using the API . In particular service portal may request session information from PCRN for the UE . Service portal may identify the UE using the IP address of the UE . The IP address may be associated with the IP CAN session established by the PCC rules in step . In step PCRN may determine the requested session information based on session information storage . PCRN may send the information to service portal using the API . The information may include the user equipment info AVP or the marketing name of the UE .

In step service portal may generate customized plans for the subscriber based on information regarding UE . Service portal may offer service plans corresponding to the functionality of UE . For example service portal may offer a data only plan if UE is a tablet device.

In step service portal may send UE information regarding the customized plans. For example UE may send a webpage that displays properties and prices for the customized plans. In step UE may send the user s selection of a plan and payment information to service portal . In various embodiments UE may send subscriber information in order to create a new account for the subscriber. Service portal may verify the received information and charge for the selected plan.

In step service portal may send updated subscription information to SPR . In various embodiments where SPR is integrated with PCRN service portal may use API to send the updated subscription information. In other embodiments SPR may include its own API or use a communications protocol for receiving updated subscription information.

In step PCRN may request the subscriber record from SPR . In step SPR may provide the updated subscription information including the details regarding the selected plan.

In step PCRN may reevaluate the policy rules based on the original CCR or an update CCR and the updated subscription information. PCRN may generate new PCC rules to provide the services included in the selected plan. In step PCRN may send the new PCC rules to PGW for enforcement. UE may then be able to access the services according to the selected plan. The method may then end.

According to the foregoing various exemplary embodiments provide for policy decisions based on user equipment device. In particular by analyzing the TAC a policy server may determine the marketing name of a device and provide policy according to the model of the device.

It should be apparent from the foregoing description that various exemplary embodiments of the invention may be implemented in hardware. Furthermore various exemplary embodiments may be implemented as instructions stored on a machine readable storage medium which may be read and executed by at least one processor to perform the operations described in detail herein. A machine readable storage medium may include any mechanism for storing information in a form readable by a machine such as a personal or laptop computer a server or other computing device. Thus a machine readable storage medium may include read only memory ROM random access memory RAM magnetic disk storage media optical storage media flash memory devices and similar storage media.

It should be appreciated by those skilled in the art that any block diagrams herein represent conceptual views of illustrative circuitry embodying the principals of the invention. Similarly it will be appreciated that any flow charts flow diagrams state transition diagrams pseudo code and the like represent various processes which may be substantially represented in machine readable media and so executed by a computer or processor whether or not such computer or processor is explicitly shown.

Although the various exemplary embodiments have been described in detail with particular reference to certain exemplary aspects thereof it should be understood that the invention is capable of other embodiments and its details are capable of modifications in various obvious respects. As is readily apparent to those skilled in the art variations and modifications can be affected while remaining within the spirit and scope of the invention. Accordingly the foregoing disclosure description and figures are for illustrative purposes only and do not in any way limit the invention which is defined only by the claims.

