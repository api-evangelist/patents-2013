---

title: Voice controlled audio recording or transmission apparatus with keyword filtering
abstract: A method includes obtaining a plurality of audio channels using a plurality of microphone outputs having at least one audio control channel and at least one audio output channel. When a keyword is detected on the audio control channel using voice recognition, adaptive filtering is performed to attenuate the keyword from the audio output channel. An apparatus operative to perform the method includes a plurality of microphones that provide a plurality of audio channels with at least one audio output channel and at least one audio control channel. Voice command recognition logic is operatively coupled to the plurality of microphones to receive the at least one audio control channel. The voice command recognition logic detect keywords on the audio control channel and filter logic with at least one adaptive filter performs adaptive filtering to attenuate the keyword from the at least one audio output channel.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09269350&OS=09269350&RS=09269350
owner: Google Technology Holdings LLC
number: 09269350
owner_city: Mountain View
owner_country: US
publication_date: 20130731
---
The present application claims priority to U.S. Provisional Patent Application No. 61 827 052 filed May 24 2013 entitled VOICE CONTROLLED AUDIO RECORDING SYSTEM WITH ADJUSTABLE BEAMFORMING which is incorporated in its entirety herein and which is assigned to the same assignee as the present application and which is hereby incorporated by reference herein in its entirety.

The present disclosure relates generally to beam forming and more particularly to voice recognition based control systems.

Various types of electronic devices such as mobile devices video or audio recorders smartphones etc. or stationary electronic devices VCRs televisions home control systems appliances etc. may include voice command recognition or more general voice recognition features for voice to text applications or for controlling features or aspects of the device. On example device and application is a video recording system which may include voice command recognition for controlling aspects of video capture. Many such systems that allow audio recording employ touch control mechanisms for control of audio recording. Many audio transmission systems however may not have any mechanism for control related to audio and only pick up audio by way of microphones. With respect to recording recording audio scenes effectively with a portable device often requires a high degree of user control in which case touch control mechanisms can be cumbersome when trying to simultaneously capture a video scene. Further existing portable audio recorders do not provide many real time adjustable recording parameters to the user.

System microphones can be configured such that one of the microphones may provide an audio control channel. For example one directional microphone may be used to capture user commands thereby serving as an audio control channel while one or more additional microphones may be configured to capture audio from the direction of a video scene. In some existing systems the audio emanating from the audio control channel is subtracted from the overall audio signal so as to eliminate or reduce it from the desired audio to be recorded which is emanating from the video scene. Such systems may eliminate or attenuate all audio input to the directional microphone being used to capture user commands.

The various disclosed embodiments enable user control and user definable audio recording attributes through user voice command control. In one embodiment a method of operation includes obtaining a plurality of audio channels using a plurality of microphone outputs. The plurality of audio channels includes at least one audio control channel and at least one audio output channel. When a keyword is detected on the at least one audio control channel using voice recognition adaptive filtering is performed to attenuate the keyword from the at least one audio output channel.

In one embodiment an apparatus that performs the method of operation includes a plurality of microphones that are operative to provide a plurality of audio channels. The audio channels include at least one audio output channel and at least one audio control channel. Voice command recognition logic is operatively coupled to the plurality of microphones to receive the at least one audio control channel. The voice command recognition logic is operative to perform voice recognition on the at least one audio control channel to detect keywords. Filter logic that includes at least one adaptive filter is operatively coupled to the plurality of microphones and to the voice command recognition logic. The filter logic operative to perform adaptive filtering to attenuate the keyword from the at least one audio output channel.

In another embodiment an adjustable audio beamformer defines a virtual microphone for at least one audio recording channel and for at least one audio control channel that is itself controllable by voice command control. The embodiments utilize an array of microphones and may use single microphone outputs or may use beamforming to define virtual microphones where the virtual microphones pick up sound for respective audio channels with one or more audio recording channels and at least one audio control channel. Some embodiments may remove command words or other keywords from the recorded audio but can still utilize desired audio received over the audio control channel.

One disclosed method of operation includes obtaining a plurality of audio channels using a plurality of microphone outputs where the audio channels include at least one audio recording channel and at least one audio control channel. The method of operation performs voice recognition on the audio control channel to detect voice commands for controlling audio channel attributes. Upon detection of a voice command for controlling an audio channel attribute the method includes adjusting a corresponding audio channel attribute. The audio channel attribute adjustment may be accomplished in various ways. For example an audio channel attribute may be adjusted by controlling a beamformer to modify a beamform corresponding to an audio channel. In another example an audio channel attribute may be adjusted by controlling signal conditioning applied to an audio channel. In the various embodiments audio attributes of either an audio recording channel or an audio control channel may be controlled and accordingly adjusted. In one embodiment the method of operation includes beamforming a plurality of microphone outputs to obtain a plurality of virtual microphone audio channels with at least one audio recording channel and at least one audio control channel performing voice recognition on the at least one audio control channel to detect voice commands for controlling audio recording channel attributes of the at least one audio recording channel and adjusting an attribute of the at least one audio recording channel in response to detecting a voice command for controlling audio recording channel attributes. Adjusting an attribute of the at least one audio recording channel may be accomplished by for example controlling an adjustable beamformer by adjusting at least one parameter of the adjustable beamformer.

The detection of voice commands for controlling audio recording channel attributes may include detecting voice commands for controlling audio sensitivity zooming panning in a specified direction focusing on a specified direction blocking a specified direction mixing a narrator s voice blocking a narrator s voice or reducing background noise.

The method of operation may include controlling audio recording channel signal conditioning including but not limited to controlling a signal conditioner by adjusting at least one parameter of the signal conditioner. The method of operation may include controlling the adjustable beamformer in some embodiments by changing filter coefficients of a beamformer filter providing the at least one audio recording channel.

In some embodiments the methods of operation may include operating and controlling filter logic to reduce or eliminate command words from a recording channel. One example method of operation of filter logic includes providing the at least one audio control channel as an adaptive filter input activating the adaptive filter in response to detecting a voice command obtaining a summation block output by subtracting an output of the adaptive filter from the at least one audio recording channel and providing the summation block output as feedback to the adaptive filter and as the at least one audio recording channel to a recorder.

Another example method of operation of filter logic includes providing the at least one audio control channel as an adaptive filter input obtaining a first summation block output by subtracting an output of the adaptive filter from the at least one audio recording channel providing the first summation block output as feedback to the adaptive filter providing the first summation block output to a first multiplier along with a detected voice command providing the at least one audio recording channel as an input to a second multiplier along with the detected voice command obtaining a second summation block output by adding the first multiplier output to the second multiplier output and providing the second summation block output as the at least one audio recording channel to a recorder.

The above methods of operation of filter logic may include delaying the at least one audio control channel and providing the delayed at least one audio control channel as the adaptive filter input and delaying the at least one audio recording channel and providing the delayed at least one audio recording channel to the summation block.

An apparatus is also disclosed that is operative to among other things perform the various disclosed methods of operation. In one example embodiment an apparatus includes a beamformer operatively coupled to a plurality of microphone outputs. The beamformer is operative to provide outputs including a plurality of virtual microphone audio channels with at least one audio recording channel and at least one audio control channel. The apparatus includes voice command recognition logic that is operatively coupled to the beamformer. The voice command recognition logic is operative to to receive the at least one audio control channel and to perform voice recognition to detect voice commands for controlling audio recording channel attributes of the at least one audio recording channel. A beamformer controller is operatively coupled to the beamformer and to the voice command recognition logic. The beamformer controller is operative to adjust at least one parameter of the beamformer in response to detection of a voice command by the voice command recognition logic. Various detected voice commands control audio recording channel attributes.

In some embodiments the beamformer includes a plurality of filters operatively coupled to the plurality of microphone outputs. The beamformer controller is operative to adjust at least one parameter of the beamformer by changing a filter coefficient of at least one filter of the beamformer.

The voice recognition logic may be operative to detect voice commands for controlling audio recording channel attributes including audio sensitivity zooming panning in a specified direction focusing on a specified direction blocking a specified direction mixing a narrator s voice blocking a narrator s voice or reducing background noise.

In some embodiments the apparatus may include a signal conditioner with a noise suppressor. The signal conditioner is operatively coupled to the voice recognition logic and to the beamformer to receive the plurality of virtual microphone audio channels as inputs. The signal conditioner provides a plurality of corresponding outputs corresponding to each virtual microphone audio channel input. A signal conditioner controller is operatively coupled to the voice recognition logic and to the signal conditioner and is operative to adjust an attribute of the at least one audio recording channel in response to detecting a voice command for controlling audio recording channel attributes. Specifically the signal conditioner controller may adjust at least one parameter of the signal conditioner.

The disclosed apparatus also includes filter logic operatively coupled to the beamformer outputs and a recorder operatively coupled to the filter logic to receive the at least one audio recording channel as an output from the filter logic.

In one example embodiment the filter logic may include an adaptive filter having an adaptive filter input operatively coupled to the at least one audio control channel. The filter logic includes summation logic with a first input operatively coupled to the at least one audio recording channel and with a second input operatively coupled to the adaptive filter output. The summation logic output is operatively coupled to the recorder. A first switch is operatively coupled to the adaptive filter and to the voice recognition logic and is operative to activate the adaptive filter in response to a voice command detection signal received from the voice recognition logic. A second switch is operatively coupled to the summation logic output to the at least one audio recording channel and to the recorder. The second switch is further operatively coupled to the voice recognition logic to receive a voice command detection signal. That is the second switch is operative to switch the recorder input from the at least one audio recording channel to the summation logic output in response to a voice command detection signal received from the voice recognition logic.

In another embodiment the filter logic includes an adaptive filter with an adaptive filter input operatively coupled to the at least one audio control channel and summation logic with a first input operatively coupled to the at least one audio recording channel and with a second input operatively coupled to the adaptive filter output. The summation logic output is operatively coupled to an adaptive filter adjustment input in a feedback loop. Mixing logic is also operatively coupled to the summation logic output and to the at least one audio recording channel.

The mixing logic includes a first multiplier operatively coupled to the at least one audio recording channel and to the voice command recognition logic a second multiplier operatively coupled to summation logic output and to the voice command recognition logic and mixer summation logic operatively coupled to outputs of the first multiplier and the second multiplier and to the recorder.

The various embodiments of filter logic also include a first delay operatively coupled to the at least one audio recording channel and to the summation logic and a second delay operatively coupled to the at least one audio control channel and to the adaptive filter input.

Turning now to the drawings is a schematic block diagram of a voice controlled audio recording or transmission apparatus with adjustable beamforming in accordance with an embodiment. It is to be understood that and other schematic block diagrams provided herein are limited to showing only those components useful to describe the features and advantages of the various embodiments and to describe how to make and use the various embodiments to those of ordinary skill. It is therefore to be understood that various other components circuitry and devices etc. may be present in order to implement an apparatus and that those various other components circuitry devices etc. are understood to be present by those of ordinary skill. For example an apparatus may include inputs for receiving power from a power source a power distribution bus communication buses for sending control signals or other information between operatively coupled components etc. Thus it is to be understood that such various other components circuitry or devices are omitted for the purpose of clarity.

The various components circuitry devices etc. described with respect to the figures including but not limited to those described using the term logic may be implemented in various ways such as by software and or firmware executing on one or more programmable processors such as a central processing unit CPU or the like or by ASICs DSPs FPGAs hardwired circuitry logic circuitry or any combinations thereof.

The terminology operatively coupled as used herein refers to coupling that enables operational and or functional communication and relationships between the various components circuitry devices etc. described as being operatively coupled and may include any intervening items i.e. buses connectors other components circuitry devices etc. used to enable such communication such as for example data communication buses or any other intervening items that one of ordinary skill would understand to be present. Also it is to be understood that other intervening items may be present between operatively coupled items even though such other intervening items are not necessary to the functional communication facilitated by the operative coupling. For example a data communication bus may be present in various embodiments and may provide data to several items along a pathway along which two or more items are operatively coupled etc. Such operative coupling is shown generally in the figures described herein.

In a voice controlled audio recording or transmission apparatus in accordance with an embodiment is shown that may be included in a device such as but not limited to a video camera smartphone tablet computer laptop portable audio recorder home appliances or some other electronic device etc. In the apparatus a group of microphones provide microphone outputs that are operatively coupled to an adjustable beamformer . Some of the microphones may be directional microphones and some may be omnidirectional in the various embodiments. Although not shown for purposes of clarity the microphone outputs may be processed through an analog to digital converter ADC and may also be subjected to other pre conditioning prior to the beamformer such as amplification filtering etc. and these components are understood to be present. The beamformer is an adjustable beamformer in that for example in some embodiments various beamforms may be created by changing i.e. adjusting filter coefficients of one or more beamformer filters etc. The created beamforms may correspond to virtual microphones that may utilize physical microphone outputs from one or more physical microphones etc. The virtual microphones thus may provide various virtual microphone audio channels such as one or more audio recording channels and one or more audio control channels. The beamformer filters and etc. are therefore adjustable filters. However in some embodiments the beamformer filters may also be adaptive filters such that the beamform may be an adaptive beamformer. Although the example of shows the group of microphones as including three microphones and any number of microphones may be used in the embodiments. In accordance with the embodiments the beamformer receives audio signals from the microphone outputs and may perform beamforming to create various virtual audio channels that include at least one audio record channel and at least one audio control channel. The beamformer can also be bypassed such that each audio channel corresponds to a single one of the microphone outputs . Therefore in one example in which the beamformer is not used record channel may correspond to microphone record channel may correspond to microphone and control channel may correspond to microphone . In another example where the beamformer is used the beamformer may beamform the microphone outputs from two or more microphones in various combinations to provide various virtual audio channels including record channels and and control channel as outputs. Therefore the audio channels may be audio channels that correspond to single microphone outputs or may be virtual audio channels formed by beamforming the microphone outputs from two or more microphones. Combinations of both virtual audio channels and single microphone outputs may also be output by the beamformer in some embodiments. In other words the beamformer may pass through some of the microphone outputs without any beamforming applied. In one example record channel and record channel may be virtual audio channels created by beamforming and control channel may correspond to the physical microphone output from only a single microphone such as microphone .

The beamformer creates the virtual audio channels by applying appropriate filtering algorithms and changing filter coefficients of one or more of the adjustable filters or etc. accordingly to generate beamforms that correspond to the virtual audio channels. In one example sound received by microphones and may be combined and appropriately filtered to create a single virtual microphone that receives sound from a given direction. As mentioned above the group of microphones may include several microphones i.e. a microphone array such that one or more virtual microphones may be created using one or more of the physical microphone outputs and applying beamforming techniques. That is the created virtual microphones may be directed via corresponding beamforms in order to focus in any given direction such as to focus on specific voices sounds etc. Therefore one example application of the apparatus is for a video recorder where the apparatus may be used to create one or more virtual microphones to pick up sound coming from the direction of the video scene while another virtual microphone may pick up sound in a direction where the operator i.e. the controlling user or a narrator etc. is located. One example beamform pattern is shown in which is described in detail herein further below.

The example beamformer includes various filters such as filter which provides the record channel filter which provides the record channel and filter which provides the control channel . As shown in the beamformer may have any number of filters and is not limited to the filters and . Likewise the number of virtual record channels is not limited to record channels and . Other control channels in addition to control channel may also be present in the various embodiments. The filters and are adjustable filters and in some embodiments may be adaptive filters. Further in some embodiments the filters may be finite impulse response FIR infinite impulse response IIR filters or some other type of adaptive filter. Additionally in some embodiments outputs from one or more filters may be combined or summed to create a virtual audio channel. That is in accordance with the embodiments any appropriate filter configuration may be implemented within the beamformer .

Thus the example apparatus includes an adjustable beamformer that provides two record channels and or more to a recorder or voice transmission circuitry that is operatively coupled to the beamformer . The recorder may be an audio recorder that creates storable audio files that may be stored in a memory or remotely. The voice transmission circuitry may be a wire line or wireless transceiver that transmits voice over any suitable network such as but not limited to a telephone system or wireless wide area network local area network etc. The voice transmission circuitry may include additional signal processing transceivers and or applications used for voice transmission such as a VoIP application in some embodiments. In some embodiments both a recorder and voice transmission circuitry may be present in the apparatus however some embodiments may include only one or the other. The beamformer is also operatively coupled to voice command recognition logic to provide control channel . The voice command recognition logic is in turn operatively coupled to system control to provide a control signal . The control signal is based on or derived by command words or command phrases detected or recognized on the control channel by the voice command recognition logic . These command words may also be keywords that are not necessarily command words but that are desirable to remove from recording or transmission. The system control may be a video system control in some embodiments but may be any type of voice controllable system control such as but not limited to software application control tablet computer control laptop control home appliance control mobile communication device control such as for a smartphone voice recorder control or some other type of control etc. A beamformer controller is operatively coupled to the voice command recognition logic and receives its output as control signal . The beamformer controller is also operatively coupled to the beamformer to provide control signal and to system memory via memory interface . The beamformer controller is operative to respond to command words or command phrases recognized by the voice command recognition logic that are related to control of audio attributes of the record channels and . An audio attribute relates to some quality or character of an audio signal that can be adjusted by application of certain audio signal conditioning signal processing. Such attributes include both directional properties such as stereo separation and directivity and non directional properties such as frequency response. For example the apparatus operator may command the beamformer to change the direction of the beamform using commands such as focus left focus right focus forward or focus ahead etc. In response to these or similar voice commands the beamformer controller will accordingly adjust one or more of the filters or to fulfill the command. In some embodiments the beamformer controller may access system memory to obtain predetermined filter coefficient settings related to beamforms corresponding to given commands. For example a set of predetermined filter coefficients may be stored in system memory for beamforms focused in various directions left right up down straight ahead etc. that may be accessed by the beamformer controller in response to corresponding commands. That is the beamformer controller receives the voice commands via control signal and in response adjusts the beamformer accordingly which may be accomplished by providing appropriate filter coefficients to one or more of the filters and in order to change the beamform or beamforms generated.

In an apparatus in accordance with another embodiment includes the beamformer which is operatively coupled to command word filtering logic and to the voice command recognition logic . The voice command recognition logic is operatively coupled to the command word filtering logic and to system control which as discussed above may be any type of voice controllable system control. The voice command recognition logic is further operatively coupled to the beamformer controller and provides the control signal in response to detecting voice commands related to control of audio attributes. The beamformer controller is operatively coupled to the beamformer and provides the control signal to adjust one or more attributes that adjust the beamformer . For example the control signal may control attributes of the filters or etc. to change the configuration of virtual microphones or redirect the virtual microphone beams i.e. the beamforms etc. or to adjust some other audio attribute.

Although not shown in or for purposes of clarity the apparatus and apparatus respectively may also include various signal conditioning and other signal processing such as noise suppression gain equalization automatic gain control etc. which may be operatively coupled to the beamformer at either the beamformer inputs or outputs. Such signal conditioning may be distributed and some may be applied prior to beamformer and some after beamformer . Signal conditioning or signal processing functions such as but not limited to signal amplification analog to digital conversion digital audio sampling etc. are also applied to the physical microphone outputs prior to the beamformer but are not shown in or for purposes of clarity as such items are understood to be present.

In the example apparatus the record channel and record channel are input to the command word filtering logic which includes a group of filter logic blocks such as filter logic A and filter logic B. Each virtual record channel that is output by beamformer will have a corresponding filter logic block in the command word filtering logic . In apparatus the command word filtering logic is operatively coupled to the recorder or voice transmission circuitry . For example filter logic A provides an audio output channel as recorder input to the recorder or voice transmission circuitry and filter logic B provides another audio output channel as input to the recorder or voice transmission circuitry . Filter logic A and filter logic B filter voice command words or voice command phrases from their corresponding record channels in response to voice command words or voice command phrases detected by the voice command recognition logic . Although the beamformer applies beamforming to provide clean record channels some residual command word audio may still be present in the recording. Also in some instances beamforms may overlap such as when the operator moves into the recording area such that the control channel beamform overlaps with one or more recording channel beamforms. In such instances command word audio will be picked up by the recording channels. Thus the command word filtering logic may eliminate residual command word audio that remains subsequent to beamforming or may eliminate command words from the recording channel when the operator is physically located within an audio recording scene.

The control channel is input to the voice command recognition logic which provides the control signal to system control . As discussed above the system control may be any suitable system control such as but not limited to a video recorder system control etc. The voice command recognition logic is also operatively coupled to the command word filtering logic to provide a control signal to filter logic A and filter logic B.

The beamformer controller receives control signal from the voice command recognition logic when the voice command recognition logic detects or recognizes voice command words or phrases. In response to detection of voice command words related to adjustment of audio attributes according to the control signal the beamformer controller sends the beamformer control signal to the beamformer and may control various parameters of one or more of the filters and . By controlling the filters and the beamformer may beamform the sound received by each of the microphones and to create virtual microphones and corresponding virtual audio channels. That is sound received by various physical microphones may be combined in various ways to form virtual microphones that may be reconfigured by voice command in accordance with the various embodiments. For example virtual microphones may be controlled by user voice commands to focus on a given direction amplify a specific voice or sound pan across a scene or etc. The voice command recognition logic is operative to detect voice commands for controlling audio recording channel attributes such as but not limited to audio sensitivity zooming widening stereo image equalization automatic gain control compression panning in a specified direction focusing on a specified direction blocking a specified direction mixing a narrator s voice blocking a narrator s voice or reducing background noise etc.

The virtual control channel may be created using beamforming where the virtual microphone is configured to pick up sound from a certain position with respect to the apparatus or apparatus depending on the embodiment. More particularly an audio virtual control channel may be created that is directed towards the operator of a device that includes the apparatus. Command word utterances are detected on the virtual control channel by the voice command recognition logic and acted upon appropriately while command word utterances occurring on the virtual record channels are ignored. That is in one example if a subject being recorded by a virtual microphone on a corresponding virtual record channel uttered a word that is also a command word that command word will be ignored since it did not occur on the virtual control channel. In accordance with the embodiments the operator of apparatus or apparatus may command the system to redirect the virtual control channel as the operator moves about the scenery. For example when a recording device that has the apparatus or is left stationary such as when a video recorder is fixed on a tripod etc. the operator is free to move about the scene. The operator may use voice commands such as control channel front right to redirect the control channel to the front of the video camera and to the right side with respect to a point of reference. The point of reference may be defined with respect to the apparatus or apparatus or with respect to a device that includes that apparatus. For example where the device is a video recorder the point of reference may be defined with respect to a video scene or with respect to the rear of the video recorder etc. The operator may therefore be located within the scene and continue to use voice commands to make adjustments to other audio attributes. Likewise if the apparatus or apparatus is incorporated into a stationary device such as a home environment control system the operator may inform the apparatus of her location. For example the operator may sit on the left or right side of the living room or alternatively north south east west or some other references and may command the home environment control system to focus the control channel to the location where the operator is sitting.

As mentioned above an example of beamforms that form virtual microphones and corresponding virtual audio channels and how they may be configured to receive audio from various directions is provided in . In an apparatus in accordance with an embodiment may be included in a portable device such as but not limited to a video recorder. The apparatus includes an audio recording system that includes at least a beamformer and a beamformer controller in accordance with an embodiment. A group of microphones or microphone array is operatively coupled to the audio recording system and provides microphone outputs with one output for each physical microphone M through M. Additional microphones may also be present in the microphone array in some embodiments. The example portable device includes a camera and a video recording system . In the present example a recording zone virtual microphone beamform may be defined with respect to the position of the camera and an operator located behind the portable device i.e. behind the camera which in is oriented toward the bottom of the figure. Thus the beamform may be considered to be directed toward the left of a video scene captured by camera from the perspective of the portable device operator. The beamform which defines one recording channel virtual microphone may be formed using physical microphones M and M as shown by the surrounding ellipse which represents beamform . That is a single virtual microphone represented by example beamform is created by beamforming the output signals from physical microphone M and physical microphone M. Similarly an example control zone virtual microphone is formed by beamform which is directed toward the back of the portable device and thus behind the camera and toward the operator. The example beamform is created by beamforming the audio signals from physical microphone M and physical microphone M. Another beamform may be considered to be directed toward the right of a video scene captured by camera and is created by beamforming the audio signals from physical microphones M M and M as shown. Therefore it is to be understood that any combination of microphones from the group of microphones may be used to form beamforms and corresponding various virtual audio channels. In accordance with the embodiments the operator may use voice commands to change the configuration of virtual microphones or to utter commands that result in changes to the virtual microphone configuration. For example the operator may cause the control zone to move to the front of portable device or to direct to the left or right etc. The example beamforms and are shown as ellipses for purposes of illustration only and for clarity however it is to be understood that the actual beamforms are not actually elliptical. Those skilled in the art will appreciate that the beamforms and may have any of various beamform patterns such as cardioid dipole hypercardioid supercardioid etc. Alternately higher order directional beamform patterns may be used.

Turning to the schematic block diagram of an apparatus includes a voice controlled audio recording system with adjustable beamforming and also includes a signal conditioner controller in accordance with another embodiment. As discussed above with respect to and a signal conditioner may be located prior to the beamformer or subsequent to the beamformer as shown in . However in some embodiments the signal conditioner may be distributed and may have some signal conditioner processes prior to the beamformer and some signal conditioner processes subsequent to the beamformer . Also as discussed with respect to the example apparatus shown in and the example apparatus shown in the example apparatus shown in also includes signal amplification analog to digital conversion digital audio sampling etc. that is applied to the physical microphone outputs prior to the beamformer and which are not shown in for purposes of clarity as such components are understood to be present by those of ordinary skill.

The embodiment illustrated by the example apparatus shown in includes the signal conditioner which is operatively coupled to the beamformer to the command word filtering logic and to the voice command recognition logic . As mentioned above it is to be understood however that the signal conditioner could also be located prior to the beamformer and therefore may be operatively coupled to the microphone outputs and may provide the conditioned microphone outputs to the beam former in some embodiments. In the example embodiment of record channel record channel and control channel are input to the signal conditioner . The signal conditioner is operatively coupled to the voice command recognition logic to provide a conditioned control channel as an input to the voice command recognition logic . A signal conditioner controller is operatively coupled to the signal conditioner and to the voice command recognition logic . The signal conditioner includes components such as but not limited to equalization automatic gain control AGC and a noise suppressor . Any of these signal conditioning components may be applied to the record channels as needed or as required and in any order or sequence. A separate signal conditioner is operatively coupled to the beamformer to receive the control channel and provides the conditioned control channel to the voice command recognition logic . That is the voice command recognition logic may have different noise suppression requirements than those required for audio recording. For example non linear signal conditioning may be applied by the signal conditioner while linear signal conditioning may be applied by the signal conditioner . It is to be understood that in some embodiments the signal conditioner and signal conditioner may be integrated together however the signal conditioning applied to the audio control channel will still be different than the signal conditioning applied to audio recording channels. Furthermore unlike signal conditioning for the record channels the signal conditioning applied to the audio control channel may not be subject to user control. However directionality audio attributes of the control channel are subject to user control by way of beamformer controller and the beamformer .

The signal conditioner controller receives control signal from the voice command recognition logic when the voice command recognition logic detects voice command words or phrases. In response to detection of voice command words related to adjustment of audio attributes according to the control signal the signal conditioner controller sends the signal conditioner control signal to the signal conditioner and may control any of various audio attributes related to various audio enhancement functions. The signal conditioner may include various audio enhancement functions such as but not limited to equalization automatic gain control AGC noise suppressor reverb various sound effects etc. These audio enhancement functions may be applied as needed on a per channel basis and in any suitable order and combination.

The signal conditioner provides a conditioned output corresponding to each signal conditioner input. That is it is to be understood that the signal conditioning applied to record channel and record channel may be different based on the specific requirements for each record channel. In other words because the audio environments encountered for sound received by the virtual microphone beamform corresponding to the record channel may be different likewise the signal conditioning required to correct for the audio environment must be different. For example noise may be present on one channel that is not present on the other. Each conditioned output is provided to a filter logic block of the command word filtering logic . For example signal conditioner provides conditioned record channel to filter logic A and provides conditioned record channel to filter logic B. The conditioned control channel from signal conditioner is input to the voice command recognition logic . It is to be understood that in some embodiments signal conditioning of the record channels may be performed after recording that is post recording. For example turning briefly to record channel and record channel may be recorded by recorder or voice transmission circuitry without any signal conditioning. The signal conditioning which may include automatic gain control de reverberation noise suppression equalization etc. may be applied to a recorded file at some later time. Also in some embodiments command word filtering may also be applied to a recorded file post recording by using time stamps incorporated into the recorder data i.e. into the recorded file or a recorded control file . In some embodiments the control channel may also be recorded either along with the recorded file or in a recorded control file for use in post recording processing of a recorded file. For example command words may indicate points in a recorded file where certain post recording signal conditioning should be applied. In one example the operator may use commands such as but not limited to suppress wind noise suppress left side audio suppress right side audio amplify right amplify left etc. or may also specify values such as suppress by N dB where N is an integer representing a dB value etc. The operator may also specify a time value so that by using time stamps in the recorded file signal conditioning may be applied for some number of seconds before or after initiation of a given command word.

Thus in the beamformer controller is operative to adjust directivity oriented audio attributes by controlling the adjustable beamformer . Examples of adjusting directivity oriented audio attributes include but are not limited to audio sensitivity zooming panning in a desired direction blocking a specific direction mixing a narrator s voice blocking a narrator s voice widening a stereo image improving signal to noise ratio etc. The signal conditioning controller is operative to adjust non direction oriented audio attributes by controlling the signal conditioner . Examples of adjusting non direction oriented audio attributes include but are not limited to equalization gains automatic gain control compression reverb noise gating noise suppression other audio effects etc.

Example methods of operation of the apparatus and the apparatus are illustrated by the flowcharts of and . Beginning with the method of operation of in operation block the beamformer performs beam forming on a plurality of microphone outputs such as the microphone outputs to obtain a plurality of virtual microphone audio channels with at least one audio recording channel and at least one audio control channel. A shown in the examples of and the beamformer provides audio record channel audio record channel and control channel by performing beamforming on the microphone outputs .

In operation block the voice command recognition logic performs voice recognition on at least one audio control channel such as audio control channel to detect voice commands for controlling audio recording channel attributes of at least one audio recording channel. In other words the voice command recognition logic will detect any voice commands i.e. voice command words or phrases detected on the audio control channel in or on the conditioned control channel in the embodiment. If a command word or command phrase is detected then the voice command recognition logic will send control signal to the beamformer controller . In embodiments such as shown in which include the signal conditioner controller the voice command recognition logic will also send the control signal to the signal conditioner controller .

The beamformer controller and the signal conditioner controller will respond to detected command words or command phrases that are related to control of audio attributes for their respective control functions. The system control receives control signal from the voice command recognition logic and will respond to those voice commands that are not related to audio recording but that are related to performing its own system control functions such as for example video system control. This may be implemented in the various embodiments in various ways such as but not limited to using digital codes or addressing mapped to specific command words or command phrases. That is a set of binary digits may be sent by the voice command recognition logic in response to particular command words or command phrases where the binary digits are a code representing the specific command word or command phrase. Therefore the system control signal conditioner controller and beamformer controller may in some embodiments all concurrently receive the binary digits. However only the intended recipient will decode the binary digits to interpret the command and take subsequent action while the other recipients will ignore the command. Additionally the beamformer controller and signal conditioner controller may be configured to receive and respond to specific digital codes or addresses send as the corresponding beamformer control signal and signal conditioner control signal .

As shown in operation block an attribute of at least one audio recording channel such as audio record channel or audio record channel will be adjusted in response to detecting the voice command for controlling audio record channel attributes. That is the signal conditioner controller will send an appropriate signal conditioner control signal to adjust an attribute of the signal conditioner or the beamformer controller will send an appropriate beamformer control signal to adjust parameters of the beamformer . In one example the beamformer controller may change one or more filter coefficients of one of the filters or .

Turning to the flowchart of in operation block the voice commands detected by the voice command recognition logic may include voice commands for controlling audio recording channel attributes such as but not limited to audio sensitivity zooming panning in a specified direction focusing on a specified direction blocking a specified direction mixing the narrator s voice blocking a narrator s voice or reducing background noise. In operation block the beamformer controller sends a beamformer control signal to the beamformer to adjust at least one parameter of the beamformer in response to the detected voice commands. The method of operation then ends as shown in .

In accordance with the embodiments filter logic A and filter logic B may be implemented in different ways. One example filter logic embodiment is provided in and another example filter logic embodiment is provided in . The example filter logic shown in and may be used in the command word filtering logic shown in either of the embodiments of or . Beginning with the embodiment illustrated in filter logic includes an adaptive filter which may be an adaptive finite impulse response FIR adaptive infinite impulse response IIR filter frequency domain or some other appropriate type of adaptive filter. The adaptive filter is operatively coupled to a control channel such as control channel in or the conditioned control channel when used in the embodiment of . The control channel is operatively coupled to a delay which provides a delayed control channel as the input to the adaptive filter . The length of the delay is not less than the longest command word or command phrase that can be recognized by the voice command recognition logic . Put another way the length of the delay is at least as long as the longest command word or command phrase used by the voice command recognition logic . The delay is added in order to make sure that the correct portion of the signal that contains the command word or command phrase is being processed.

The adaptive filter is further operatively coupled to summation logic and provides an adaptive filter output as a subtraction input to the summation logic . The summation logic is also operatively coupled to the record channel through a delay to receive a delayed record channel as an addition input. That is the summation logic subtracts the adaptive filter output from the delayed record channel to obtain summation logic output . The summation logic output is operatively coupled to an adjustment input of the adaptive filter in a feedback configuration. A switch is operatively coupled to the summation logic such that the summation logic output is operatively coupled to one terminal of the switch. A second terminal of switch is operatively coupled to the delayed record channel and the common terminal of switch is operatively coupled to the recorder or voice transmission circuitry to provide input . That is the switch is configured as a single pole double throw SPDT changeover switch in that switch is operative to switch the recorder input between the delayed record channel and the summation logic output .

The switch is also operatively coupled to the voice command recognition logic to receive a control signal . The control signal controls switch to switch the recorder input to the summation logic output in response to detection of an audio attribute command word or command phrase detected by the voice command recognition logic . In other words the control signal provides an indication that an audio attribute command word or command phrase was detected by the voice command recognition logic .

Another switch is operatively coupled to an adaptive filter enable input and is configured as a single pole single throw SPST on off switch. The switch is also operatively coupled to the voice command recognition logic to receive the control signal . The control signal will operate the switch such that when the switch is in the closed position i.e. on the adaptive filter enable input is activated and the adaptive filter begins operation. The voice command recognition may contain a dictionary of keywords that may or may not also be command words and that are used to trigger the control signal and activate the adaptive filter . In some embodiments the keyword dictionary may be stored in system memory and is accessible by the voice command recognition logic using a memory interface not shown As shown by the dotted line switch and switch operate concurrently such that when the switch connects the recorder input to the summation logic output switch is switched on to provide the adaptive filter enable signal and activate the adaptive filter .

In some embodiments the switches and may be implemented as a single logic circuit with a single control signal connection from the voice command recognition logic . In other embodiments one or both of switch and switch may be implemented by tri state logic i.e. a tri state buffer as an SPST switch etc. as understood by those of ordinary skill. Thus in operation of the command word filtering logic the filter logic is deactivated until the voice command recognition logic detects a command word or command phrase and sends the control signal to switch and switch to connect the recorder input to the summation logic output and to enable the adaptive filter by providing the adaptive filter enable signal respectively. Therefore the filter logic attenuates or eliminates any command word or command phrase from the delayed record channel and thus from the recorded audio in response to detection of command words or command phrases that are detected by the voice command recognition logic on the virtual audio control channel such as control channel or conditioned control channel .

The delay and delay may be implemented in any appropriate manner such as but not limited to using a circular buffer or some other delay implementation. The delay is implemented to accommodate the longest expected command word or command phrase for the voice command recognition control system. Put another way the length of the delay may be at least as long as the longest command word or command phrase used by the voice command recognition logic .

The summation logic is also operatively coupled to a record channel such as record channel or conditioned record channel through a delay to receive a delayed record channel as an addition input. Thus the summation logic of filter logic subtracts the adaptive filter output from the delayed record channel to obtain summation logic output . The summation logic output is also operatively coupled to an adjustment input of the adaptive filter in a feedback configuration for filter logic .

Filter logic also includes mixer logic which provides an automatic fade control that fades between a filtered and unfiltered version of an audio channel. In addition to providing feedback to the adaptive filter adjustment input the summation logic output is also input to the mixer logic . Mixer logic includes a first multiplier that is operatively coupled to the delay to receive the delayed record channel which is in other words an unfiltered version of the record channel. A fade control is operatively coupled to the voice command recognition logic to receive the voice command recognition signal which is used by the fade control to weight filtered and un filtered versions of the record channel. A second multiplier is operatively coupled to the summation logic and receives the summation logic output as multiplier input . In other words the summation logic output is a filtered version of the record channel. The first multiplier and the second multiplier are both operatively coupled to the fade control to receive a weighting input k and 1 k respectively to weight the respective unfiltered and filtered versions of the record channel. Specifically the first multiplier provides a first multiplier output to mixer summation logic and the second multiplier provides a second multiplier output to the mixer summation logic . The mixer summation logic adds the two multiplier outputs and provides the input to the recorder or voice transmission circuitry . In other words in filter logic the adaptive filter constantly operates on the delayed record channel and provides an output to the mixing logic to subtract or attenuate detected command words or command phrases from the recorder input . In operation the mixer logic functions as a fader that fades between the filtered i.e summation logic output and un filtered i.e. delayed record channel recording channel signals. The adaptive filter is trained to filter the delayed control channel which is subtracted from the delayed record channel by the summation logic to obtain the summation logic output . The mixer logic operation is controlled by the voice command recognition logic signal which is used to weight the filtered and un filtered record channel multiplier inputs. That is the delayed record channel is multiplied by k by the first multiplier and the summation logic output is multiplied by 1 k by the second multiplier to control the fading operation.

An example method of operation of the filter logic is illustrated by the flowchart of . The method of operation begins and in operation block the filter logic is provided with the at least one audio control channel as an adaptive filter input. For example the audio control channel in the embodiment of or the conditioned control channel in the embodiment of may be operatively coupled to the adaptive filter input. In operation block the adaptive filter is activated in response to detecting the voice command such as a command word or command phrase by the voice command recognition logic . As described above the control signal closes switch to send an adaptive filter enable signal and activate adaptive filter . In operation block a submit summation logic output is obtained by subtracting the adaptive filter output from the audio recording channel. More specifically as shown in the summation logic subtracts the adaptive filter output from the delayed record channel to produce the summation logic output . In operation block the summation logic output is provided as feedback to the adaptive filter adjustment input and is also provided as the recorder input to recorder or voice transmission circuitry switch is operated to connect to summation logic output . The method of operation than ends as shown.

A method of operation corresponding to the filter logic of the embodiment of is illustrated by the flowchart of . In operation block at least one audio control channel is provided as an adaptive filter input. For example as shown in the delayed control channel is provided to adaptive filter . In operation block a summation block output is obtained by subtracting the adaptive filter output from the delayed record channel . In operation block the summation logic output is provided as feedback to the adaptive filter adjustment input. In operation block the summation block output is provided to the first multiplier along with the detected voice command. For example the summation logic output is provided to the mixer logic and is specifically provided as multiplier input to second multiplier . In operation block the at least one audio recording channel is provided as an input to a second mixture along with the detected voice command. As shown in the delayed record channel is input to the first multiplier along with the voice command recognition signal . In operation block a mixer summation output is obtained by adding the first multiplier output to the second multiplier output. As shown in multiplier output and multiplier output are provided to the mixer summation logic . In operation block and as shown in the mixer summation logic output is provided as recorder input to the recorder or voice transmission circuitry . The method of operation then ends as shown in .

The flowchart of provides another method of operation related to the filter logic illustrated in . The method of operation begins and in operation block the voice command recognition logic monitors a virtual control channel for voice commands. If command word is detected by the voice command recognition logic in decision block then the adaptive filter is activated in operation block . If no command words are detected in decision block then in operation block the unfiltered record channel is provided to the recorder and the method of operation ends. For example switch connects the recorder input to the delayed record channel as shown in . If command words are detected then the adaptive filter is activated as shown in operation block and the output is provided to the recorder. That is the adaptive filter output is subtracted from the record channel and the subtraction result i.e. summation logic output is then provided as feedback to the adaptive filter and as an input to the recorder or voice transmission circuitry and the method of operation ends. In other embodiments the filter operation in block could be accomplished by for example correlation and may be done after recording i.e. post recording .

Therefore among other advantages of the various embodiments regardless of the direction of the control channel beam the voice controlled audio recording system in accordance with the embodiments will suppress noise from other directions and will have a signal to noise ratio suitable to drive the voice command recognition logic . The virtual microphone used for the control channel among other things reduces extraneous sound to enhance the control channel signal to noise ratio. Upon voice command identification for commands to control audio attributes the beamformer and other audio processing such as signal conditioner which may include noise suppression gain etc. will be adjusted accordingly to provide the desired audio recording attributes. Another advantage of the various embodiments is that the control channel and voice command recognition logic are used to eliminate the control channel sound i.e. voice commands from the recording channel. Another advantage of the various embodiments is that upon recognizing a voice command by the voice command recognition logic an adaptive filter trained on the control channel is used to subtract the remaining command word segment from the appropriately delayed recording channel.

One example embodiment of a beamformer controller is illustrated by the partial schematic block diagram provided in . The example beamformer controller shown in may be used in either of the embodiments described with respect to or . The example beamformer controller includes a memory table and an operatively coupled selector . The memory table may store preconfigured beam patterns for predetermined virtual microphone configurations. The preconfigured beam patterns may be stored by storing filter coefficients or other filter parameters that may be used by the beamformer to create the desired audio beam patterns such as the example beam pattern for the virtual microphone example provided in . The selector maps voice command words to appropriate memory locations to obtain the desired result based on a current configuration in operation using the beamformer . For example assuming a virtual microphone configuration similar to the example shown in the operator may speak the command words focus left. The selector will receive the code as control signal which may be a string of binary digits or may be an application programming interface API command and will recognize the code or API command as related to the command focus left. The selector will send the selection input which may be implemented as a pointer to the correct location of the memory table to identify the stored filter coefficients or other stored beamformer parameters that will cause the beamformer to focus the existing virtual microphone beams on subjects to the left of the recording apparatus. The memory table output is then provided to the beamformer as the beamformer control signal .

The memory table may be stored in an internal memory of the beamformer controller or in system memory . In either embodiment the internal memory or system memory is a non volatile non transitory memory. In embodiments where the system memory is used to store the memory table the beamformer controller is operatively coupled to the system memory to send data to and receive data from the system memory . The selector provides the selection input to system memory over a memory interface and also receives the memory table output . The beamformer controller forwards the memory table output to the beamformer as beamformer control signal .

The signal conditioning controller may be implemented in a manner similar to the example beamformer controller of . provides one example embodiment of the signal conditioning controller . The example signal conditioning controller includes a memory table and an operatively coupled selector . The memory table may store various audio parameters for predetermined audio attributes. The stored audio parameters may include noise suppression algorithms that may be selected for a noise suppression component of signal conditioner or some other audio related algorithms to create the desired audio attributes.

The selector maps voice command words to appropriate memory locations to obtain the desired result based on a current configuration in operation by the signal conditioner . For example the operator may speak the command words suppress noise minus six dB i.e. suppress noise 6 dB to invoke an appropriate noise suppression algorithm. The selector will receive the code as control signal which may be a string of binary digits or may be an application programming interface API command and will recognize the code or API command as related to the command suppress noise minus six dB. The selector will send the selection input which may be implemented as a pointer to the correct location of the memory table to identify the stored parameters that will cause the signal conditioner to invoke the appropriate noise suppression algorithm. The memory table output is then provided to the signal conditioner as the signal conditioner control signal .

The memory table may be stored in an internal memory of the signal conditioning controller or in system memory similar to memory table . In embodiments where the system memory is used to store the memory table the signal conditioning controller is operatively coupled to the system memory to send data to and receive data from the system memory . The selector provides the selection input to system memory over a bi directional memory interface and also receives the memory table output . The signal conditioning controller forwards the memory table output to the signal conditioner as the signal conditioner control signal .

It is to be understood that the various control signals described above with respect to various components such as but not limited to the voice command recognition logic the beamformer controller the signal conditioner controller etc. may be implemented in various ways such as using APIs between the various components. Additionally the memory table operations shown in and may be implemented using pointers and a single memory table stored in system memory etc. Furthermore control signal and control signal may be implemented such that the beamformer and the signal conditioner obtain control information such as but not limited to audio attribute parameters filter coefficients etc. from system memory and that such implementations are contemplated embodiments and in accordance with the embodiments and examples described herein.

The flowchart of provides another method of operation related to the embodiments described with respect to or . In operation block the group of microphones may be used to form at least one audio recording channel and at least one audio control channel. This may be accomplished by using single microphone outputs as an audio channel or by beamforming two or more of the microphone outputs to form audio channels such as a virtual audio recording channel and a virtual audio control channel or by combinations or both virtual and non virtual audio channels . For non virtual audio channels the beamformer passes the appropriate microphone output through as a record channel or as a control channel without any beamforming applied. In operation block the voice command recognition logic performs voice recognition on the audio control channel to detect voice commands for controlling audio control channel and audio recording channel attributes. In the various embodiments the audio channel attributes may be related to directivity of the audio channel or to non directivity related attributes such as those attributes related to signal conditioning applied to the audio channel. In other words in the case of directivity control the voice commands may control beamform patterns applied to virtual audio channels or may switch directional microphones to point to the front or rear of the apparatus etc. Such directivity control may be applied to audio recording channels or to audio control channels. In the case of signal conditioning control signal conditioning may be controlled for audio recording channels in various ways as was described in detail above with respect to the various embodiments. Thus in operation block an audio channel attribute is adjusted for an appropriate audio channel in response to detection of a voice command on the audio control channel for controlling an audio channel attribute of the respective corresponding audio channel.

One skilled in the art will recognize based on and in light of the disclosure and the various example embodiments described herein that various applications may benefit from the disclosed embodiments. In one example application an audio transmission system may censor out keywords where the keywords are profanity or other information that should not be transmitted such as sensitive information phone numbers social security numbers verbal passwords or other information . All such applications are contemplated herein and are within the scope of the described embodiments and various examples.

While various embodiments have been illustrated and described it is to be understood that the invention is not so limited. Numerous modifications changes variations substitutions and equivalents will occur to those skilled in the art without departing from the scope of the present invention as defined by the appended claims.

