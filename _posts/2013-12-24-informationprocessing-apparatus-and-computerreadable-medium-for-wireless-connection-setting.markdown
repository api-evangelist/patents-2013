---

title: Information-processing apparatus and computer-readable medium for wireless connection setting
abstract: A non-transitory computer readable medium having computer readable instruction which configures a processor to function as: a first communication unit configured to execute a communication using a first type interface with a communication target device; a second communication unit configured to obtain, by using the first communication unit, identifying information used to execute a communication with the communication target device through a second type interface when a first network in which the communication target device is included is different from a second network set as a communication destination for a communication through the second type interface; a third communication unit configured to execute a communication with the communication target device through the second type interface when the first type network is same as the second type network; and a fourth communication unit configured to execute a restoring process where the communication destination is restored to the second network.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09094782&OS=09094782&RS=09094782
owner: Brother Kogyo Kabushiki Kaisha
number: 09094782
owner_city: Nagoya-shi, Aichi-ken
owner_country: JP
publication_date: 20131224
---
This application claims priority under 35 U.S.C. 119 from Japanese Patent Application No. 2012 282644 filed on Dec. 26 2012. The entire subject matter of the application is incorporated herein by reference.

Aspects of the present invention relate to an information processing apparatus a method for controlling the information processing apparatus and a computer readable medium for information processing for executing communication with a device.

Various types of technologies for wireless communication between two communication devices have been proposed. For example two communication devices execute a short distance wireless communication for wireless settings in accordance with a wireless communication mode based on NFC Near Field communication . The wireless settings are used for executing a wireless communication based on a communication mode e.g. IEEE802.11a or 802.11b different from NFC. As a result the two devices become able to execute the wireless communication in accordance with the wireless settings.

However there is a case where default wireless settings which have been set in advance on a communication device are changed to new wireless settings due to execution of the short distance wireless communication. In such a case if a user plans to execute a wireless communication in accordance with the default wireless settings after completion of execution of a wireless communication in accordance with the new wireless settings the user needs to make wireless settings again.

Aspects of the present invention are advantageous in that they provide an information processing apparatus a method for controlling the information processing apparatus and a computer readable medium for information processing capable of solving the above described problem.

According to an aspect of the invention there is provided a non transitory computer readable medium having computer readable instruction stored thereon which when executed by a processor of an information processing apparatus comprising a first type interface configured to execute a wireless communication with a device in a first communication mode and a second type interface configured to execute a wireless communication with a network or a device in a second communication mode configures the processor to function as a first communication unit configured to execute a communication using the first type interface with a communication target device with which the information processing apparatus communicates a second communication unit configured to obtain by using the first communication unit identifying information used to execute a communication with the communication target device through the second type interface and to execute a communication with the communication target device through the second type interface based on the obtained identifying information when a first network in which the communication target device is included is different from a second network set as a communication destination for a communication through the second type interface of the information processing apparatus a third communication unit configured to execute a communication with the communication target device by executing a communication with the second network through the second type interface when the first type network is same as the second type network and a fourth communication unit configured to execute a restoring process where the communication destination for a communication through the second type interface is restored to the second network after completion of the communication based on the identifying information by the second communication unit.

According to another aspect of the invention there is provided an information processing apparatus configured as described above.

According to another aspect of the invention a method for configuring an information processing apparatus to have the above described functional units.

Hereafter an embodiment according to the invention will be described with reference to the accompanying drawings.

As shown in a network includes an information processing apparatus MFPs and a first access point and a second access point . The term MFP means a multifunction peripheral having a plurality of functions including a print function a scanning function and a copying function.

An NFC communication I F of the information processing apparatus is configured to communicate with an NFC communication I F of the MFP via a wireless communication of an NFC Near Field Communication type. In this embodiment the wireless communication of the NFC type is based on ISO IEC21481 or 18092 for example.

A wireless LAN I F of the information processing apparatus is able to perform an infrastructure mode communication with a wireless LAN I F of the MFP via wireless communications and based on a wireless LAN. Furthermore the wireless LAN I F is able to perform an infrastructure mode communication with the MFP via a wireless communication based on a wireless LAN. The wireless LAN I F is also able to directly communicate with the wireless LAN I F via a wireless communication based on WiFi Direct hereafter abbreviated as WFD . The information processing apparatus is able to configure a WFD network by establishing a connection with the MFP in accordance with WFD. In WFD a wireless communication is executed for example based on a standard IEEE The Institute of Electrical and Electronics Engineers Inc. 802.11 or a standard 802.11a 11 11g 11n and etc. complying with IEEE 802.11.

A network N is configured by the first access point and the MFP . A network N is configured by the second access point and the MFP . Each of the first access point N and the second access point N has an SSID Service Set Identifier . SSID is a name for indentifying each of the first access point and the second access point . The information processing apparatus is able to transmit a print request or a scan request to the MFPs and via communication using the wireless LAN I F by executing a print and scan application .

The information processing apparatus is a portable device such as a mobile phone or a portable terminal. The information processing apparatus includes a display unit a touch panel an input I F the wireless LAN I F the NFC communication I F a CPU Central Processing Unit a ROM Read Only Memory a RAM Random Access Memory and a storage unit . These components are connected with each other via for example an input output port .

The display unit receives an image signal outputted by the CPU and displays an image based on the received image signal. As the display unit an LCD or an organic EL panel can be used. The touch panel is formed of a transparent member and is disposed to cover a surface of the display unit . The touch panel detects a position touched for example by a user s finger and outputs information on the detected position to the CPU . The input I F is for example an operation button.

The NFC communication I F is an interface to execute the wireless communication based on NFC. Information for communication setting such as an IP address and an SSID is not required to establish the wireless communication based on NFC. The wireless LAN I F is an interface for executing the wireless communications and based on wireless LAN. The distance within which the wireless communications and based on wireless LAN can be performed is larger than the distance within which the wireless communication based NFC can be performed. In addition the communication rate of the wireless communications and based on wireless LAN is higher than the communication rate of the wireless communication based NFC.

The CPU executes a program stored in the storage unit . The RAM stores temporarily information required for processing for the CPU . The storage unit is configured as a combination of a flash memory an HDD hard disk drive and a buffer provided in the CPU . The storage unit is able to store data such as image data and document data. The storage unit stores a program . The program includes a print and scan application hereafter referred to as an application and an operating system hereafter referred to as an OS . The CPU executes a process according to the program . In the following frequently the CPU executing a program e.g. the application or the OS will be simply referred to by a name of the program. For example there is a case where the wording the application program means the CPU executing the application .

The application is an application for controlling the CPU to execute processes such as a process for transmitting a print command from the information processing apparatus to the MFP . The OS is a program providing basic functions and is used commonly by applications such as the application . The OS includes a program for controlling the wireless LAN I F and the NFC communication I F to execute wireless communication. The OS also provides an API Application Programming Interface for enabling a program to obtain information which various hardware components have acquired or enabling a program to give instructions to various hardware components.

The storage unit stores a table TB. The table TB stores particular device identification information for identifying a particular device and particular network identification information for identifying a particular network. The particular device is a set device selected from a plurality of devices as a communication destination for the information processing apparatus . The particular network is a set network as a communication destination for the communication using the wireless LAN I F of the information processing apparatus . A network in which the particular device is included may be set as the particular network.

In an example of the table TB shown in a model number and an IP address are used as the particular device identification information. Further an SSID is used as the particular network identification information. The model number is information for identifying the type of each device. The IP address is a known bit string which is assigned to each device and is used for communication. The SSID is an identifier for identifying an access point constituting the particular network.

In the following explanation is given regarding the case where the model numbers of the MFPs and are Ink MFP and Ink MFP respectively the ID addresses of the MFPs and are 192.168.100.101 and 192.168.100.102 respectively the SSID of the first access point constituting the network N is SSID and the SSID of the second access point constituting the network N is SSID . As shown in the table TB stores Ink MFP as the model number 192.168.100.102 as the IP address and SSID as the SSID . That is illustrates the case where the MFP is selected as the particular device and the network N is selected as the particular network.

Hereafter the configuration of the MFP is explained. The MFP includes a CPU a storage unit the wireless LAN I F the NFC communication I F a button input unit a panel a printer and a scanner as basic components. These components are able to communicate with each other via an input output port .

The CPU executes a program stored in the storage unit . The storage unit is configured as a combination of a RAM a ROM a flash memory an HDD hard disk drive and a buffer provided in the CPU . The storage unit stores the program which includes various programs such as an OS .

The NFC communication I F is an interface for executing the wireless communication based on NFC. The wireless LAN I F is an interface for executing the wireless communications and based on wireless LAN. The button input unit is a key for executing the various functions of the MFP . The button input unit may be a touch panel provided integrally with the panel . The panel displays various types of function information of the MFP . The printer executes a printing operation using image data stored in the storage unit . The scanner executes a reading operation. Since the MFP has the same configuration as that of the MFP the detailed configuration of the MFP is omitted for the sake of simplicity.

Hereafter a process in which the CPU controls the various units in accordance with the application is explained with reference to . In the following explanation is given for the case where the network N is set as the particular network the information processing apparatus is connected to the network N being the particular network and a user holds the information processing apparatus up over the MFP i.e. the MFP is selected as a communication target device .

When the application is invoked a flowchart shown in is started. In S the application judges whether the touch panel has received an operation for selecting print target data. When the print target data has not been received S NO the process returns to S. When the print target data has been received S YES the process proceeds to S. In S the application displays a print preview on the display unit . Furthermore the application displays a device of a communication partner and a network of a communication partner on the display unit . In the example of the embodiment a print preview image P is displayed on the display unit as shown in . As illustrated in a region R in the model number of the particular device i.e. MFP is displayed as information representing the device of the communication partner and an SSID i.e. SSID of the second access point included in the particular network i.e. the network N is displayed as information representing the network of the communication partner.

In S the application judges whether report information informing start of NFC communication has been received from the OS . The NFC communication is started when the NFC communication I F provided in the information processing apparatus moves into an area within a predetermined distance from an NFC communication I F provided in a target device of NFC communication. The predetermined distance may be for example approximately 10 cm. When the report information has not been received S NO the process returns to S. When the report information has been received S YES the process proceeds to S. In the example of the embodiment the explanation is given for the case where the user holds the information processing apparatus up over the MFP . The application receives from the OS the report information representing the fact that the wireless communication based on NFC with the MFP is started.

In S the application obtains from the OS the SSID of the network currently connected with the information processing apparatus . In the example according to the embodiment the information processing apparatus is connected with the network N being the particular network. Therefore the SSID i.e. SSID of the second access point included in the network N is obtained.

In S the application transmits the obtained SSID to the communication target device using the wireless communication based on NFC. In the example according to the embodiment the SSID of the second access point is transmitted to the MFP being the communication target device. In S the application receives the of communication target device identification information from the communication target device through the wireless communication based on NFC. The communication target device identification information is for example a model number of a communication target device an IP address of a communication target device an SSID of a network in which a communication target device is included and a password of the SSID. The application may receive from the communication target device coincidence judgment information which is described later. In the example according to the embodiment the application receives the model number Ink MFP and the IP address 192.168.100.101 of the MFP being the communication target device the SSID SSID of the network N and etc.

In S the application judges whether the network in which the communication target device is included coincides with the particular network i.e. the network with which the information processing apparatus is being connected . The judgment may be made for example based on the coincidence judgment information received from the communication target device in S. The coincidence judgment information indicates whether the network in which the communication target device is included coincides with the particular network. The coincidence judgment information is generated by the communication target device. For example the communication target device may generate the coincidence judgment information indicating that the both networks coincide with each other when the SSID of the particular network this SSID is transmitted to the communication target device in S coincides with the SSID of the network this SSID is stored for example in a storage unit of the communication target device to which the communication target device belongs.

When the both networks coincide with each other S YES it can be judged that the information processing apparatus is able to communicate with the communication target device via the particular network. Therefore since in this case there is no necessity to establish a new communication path the process proceeds to S. On the other hand when the both networks do not coincide with each other S NO the process proceeds to S.

In S the application receives a designated SSID from the communication target device via the wireless communication based on NFC. The designated SSID is an SSID designated by the communication target device. The designated SSID is used for executing the communication with the communication target device using the wireless LAN I F .

In S the application judges whether the designated SSID received from the communication target device is a onetime SSID. The one time SSID is an SSID having a character string which is provided as a different character string at each issuance. The SSID is also an SSID for executing wireless communication based on WFD. As an example of a method for judging whether the designated SSID is a onetime SSID a method of judging whether a predetermined character string indicating a onetime SSID is contained in the character string of the designated SSID can be cited. As an example of the predetermined character string a character string onetime can be cited.

When the designated SSID is not a onetime SSID S NO it can be judged that the communication target has designated the wireless LAN communication of the infrastructure mode via an access point. Therefore in this case the process proceeds to S where the wireless LAN communication in the infrastructure mode is executed based on the received designated SSID.

On the other hand when the designated SSID is a onetime SSID in S S YES it can be judged that the communication target device has designated a wireless communication based on WFD and the process proceeds to S. In S the application judges whether the particular network has been set. This judgment may be made by confirming whether the SSID is stored in the table TB. When the particular network has not been set S NO the process proceeds to S. When the particular network has been set S YES the process proceeds to S. In S the application stores temporarily the SSID of the particular network in the RAM . In the explanation of the embodiment the SSID i.e. SSID of the network N is stored in the RAM temporarily.

In S the application judges whether the particular device is different from the communication target device. This judgment may be made by checking whether particular device identification information coincides with the communication target device identification information received in S. When the particular device coincides with the communication target device S NO the process proceeds to S. When the particular device does not coincide with the communication target device S YES the process proceeds to S. In S the application temporarily stores the particular device identification information in the RAM .

In S the application executes communication with the communication target device based on the WFD wireless communication. Specifically the application executes the WFD wireless communication with the communication target device by providing the onetime SSID received in S with the OS . In the example of the embodiment the wireless communication based on WFD is executed with the MFP being the communication target device.

In S the application changes display of the network of the communication partner. In the example of the embodiment representation shown in a region R in is displayed in the region R in place of the representation being currently displayed in the region R in . As a result display of the network of the communication partner is changed to the model number of the communication target device i.e. MFP .

In S the application judges whether the particular device is different from the communication target device. Since the judging manner in S is the same as that in S described above explanation of S is omitted. When the particular device coincides with the communication target device S NO the process proceeds to S. When the particular device is different from the communication target device S YES the process proceeds to S. In S the application changes the representation of the device of the communication partner. In the example of the embodiment representation shown in the region R in is displayed in the region R in place of the representation being currently displayed in the region R in . As a result the representation of the device of the communication partner is changed to the model number of the communication target device i.e. the MFP . Thus it is possible to display the information indicating the communication target device on the display unit during the communication with the communication target device using the wireless LAN I F.

In S the application transmits the print data to the communication target device by using the wireless LAN I F . Since the communication using the wireless LAN I F is faster than the communication using the NFC communication I F the print data can be transmitted in a shorter period of time. In S the application judges whether transmission of the print data has completed. When the transmission of the print data has not completed S NO the process returns to S. When the transmission of the print data has completed S YES the process proceeds to S.

In S the application judges whether a onetime SSID changing process has been executed in the state where the particular network is set. The onetime SSID changing process is a process where a SSID used for executing the communication using the wireless LAN I F is changed from the SSID of the particular network to the onetime SSID. This judgment may be made by checking whether the SSID of the particular network is temporarily stored in the RAM i.e. whether the process of S has been executed . When the onetime SSID changing process has been executed in the state where the particular network is set S YES the process proceeds to S.

In S the application executes a restoring process. The restoring process is a process where the communication destination of the wireless communication using the wireless LAN I F is restored from the network in which the communication target device is included to the particular network. Specifically the application restores the communication destination of the wireless communication using the wireless LAN I F to the particular network by providing the SSID of the particular network stored temporarily in the RAM with the OS . In the example of the embodiment the wireless communication executed through the wireless LAN I F is restored from the wireless communication to the wireless communication . As a result the communication destination of the wireless LAN I F is restored from the network i.e. the network communication with the MFP without intervention of the first access point in which the communication target device i.e. the MFP is included to the particular network i.e. the network N .

In S the application executes a process for restoring display of the communication destination network to the original representation. In the example of the embodiment the SSID i.e. SSID of the second access point included in the particular network i.e. the network N is displayed as the information indicating the communication destination network as shown in the region R in .

In S the application judges whether a communication device changing process has been executed. The communication device changing process is a process for changing a device of a communication target from the particular device to the communication target device. This judgment may be made by checking whether the particular device identification information is temporarily stored in the RAM i.e. whether the process of the S has been executed . When the communication device changing process has been executed S YES the process proceeds to S. In S the application executes a process for restoring representation of the device of the communication partner to the original representation. In the example of the embodiment the model number of the particular device i.e. the MFP is displayed as the information indicating the device of the communication partner as shown in the region R in .

On the other hand when the communication device changing process has not been executed S NO the process proceeds to S. In S the application displays information indicating that no device is selected as a communication partner in the display unit . Then the flowchart terminates.

On the other hand when it is judged in S that the onetime SSID changing process has not been executed in the state where the particular network is set S NO the process proceeds to S. In S the application judges whether the onetime SSID changing process has been executed. This judgment may be made by checking whether the designated SSID received from the communication target is a onetime SSID i.e. the judgment result in S .

When the onetime SSID changing process has been executed S YES the process proceeds to S where the wireless communication based on WFD is disconnected. When the onetime SSID changing process has not been executed S NO it is judged that the designated SSID received from the communication target is an SSID for wireless communication in the infrastructure mode and the process proceeds to S. In S the application stores the designated SSID in the table TB as the SSID of the particular network. Then the flowchart terminates.

Advantageous effects of the above described application will now be explained. When the particular network e.g. the network N set as a communication destination for communication using the wireless LAN I F is different from the network e.g. the MFP in which the communication target device is included S NO the application is able to receive the designated SSID from the communication target device via the wireless communication based on NFC S . Then the application is able to execute communication e.g. the wireless communication with the communication target device e.g. the MFP using the wireless LAN I F based on the obtained designated SSID. After the communication with the communication target device is finished S YES the communication destination for the communication using the wireless LAN I F can be automatically restored from the network e.g. the MFP in which the communication target device is included to the particular network e.g. the network N S . Therefore it is unnecessary for the user to make settings regarding a communication destination for communication using the wireless LAN I F even when the communication with the particular network e.g. the network N using the wireless LAN I F is started after the communication with the communication target device using the wireless LAN I F is finished. As a result usability can be enhanced.

When the designated SSID is a onetime SSID S YES a communication path e.g. the wireless communication established with the communication target device e.g. the MFP using the wireless LAN I F based on the designated SSID has a high possibility of becoming unavailable after completion of the communication. Since the application automatically restores the communication destination for communication using the wireless LAN I F to the particular network e.g. the network N S after the communication with the communication target device is finished S YES it becomes possible to avoid occurrence of a situation where the user continues using a communication having a high possibility of becoming unavailable later.

The application is able to judge whether the network in which the communication target device is included coincides with the particular network based on the coincidence judgment information received from the communication target device S . Therefore it is possible to cause the communication target device to make judgment on whether the network in which the communication target device is included coincides with the particular network. As a result it becomes possible to decrease the processing load on the information processing apparatus .

The application is able to change representation of a network of a communication partner or representation of a device of a communication partner S S in response to connection with a network which is different from the particular network S . Furthermore the application is able to restore the representation of the network of the communication partner or the representation of the device of the communication partner to original representation S S in response to restoring of the communication destination to the particular network S . Therefore it is possible to indicate a communication target of the information processing apparatus in real time. As a result usability can be enhanced.

When the particular network is not set S NO and the designated SSID received from the communication target device is not a onetime SSID S NO the designated SSID can be stored in the table TB as the SSID of the particular network S . Therefore it becomes possible to automatically set the particular network when the particular network is not set. As a result it becomes possible to save the user selecting the particular device and making settings.

The application is able to detect completion of the communication using the wireless LAN I F by detecting completion of the communication for image data S YES . Therefore it is possible to eliminate the need for communicating with the communication target device for the information for making a judgment on the completion of the communication using the wireless LAN I.F . As a result it becomes possible to suppress traffic of the communication.

The application executes the wireless communication based on WFD using the wireless LAN I F with the communication target device by providing the onetime SSID received from the communication target device with the OS S . Furthermore the application restores the communication destination of the wireless communication using the wireless LAN I F to the particular network S by providing the SSID temporarily stored in the RAM with the OS . Therefore it becomes possible to cause the OS to execute the process for executing the communication. As a result it becomes possible to suppress the process amount executed by the application or to suppress the size of the application .

Although the present invention has been described in considerable detail with reference to certain preferred embodiments thereof the scope of the invention is not limited to the above described embodiments. Various variations and modifications of the above described embodiments are also included in the scope of the invention. Such variations are explained below.

The judgment on whether the network in which the communication target device is included coincides with the particular network is not limited to the above described example. In a part of a flowchart where the coincidence judgment is executed by the application is shown. When the report information is received from the OS S YES the process proceeds to S. In S the application receives from the communication target device the SSID identifying the network in which the communication target device is included. In the example of the embodiment the SSID of the network N i.e. SSID in which the MFP being the communication target device is included is received. In S the application judges whether the network in which the communication target device is included coincides with the particular network. This judgment may be made by checking whether the SSID of the particular network read out from the table TB coincides with the SSID obtained in S of the network to which the communication target deice belongs. When the network in which the communication target device is included coincides with the particular network S YES the process proceeds to S. When the network in which the communication target device is included does not coincide with the particular network S NO the process proceeds to S. In S the application receives the designated SSID from the communication target device via the wireless communication based on NFC. As a result it becomes possible to cause the application to make the judgment.

The judgment on whether the communication with the communication target device is finished is not limited to the example where whether the transmission of the print data is finished is monitored in S. For example completion of the communication may be detected in response to receipt of communication completion report information indicating completion of the communication with the communication target device from the communication target device through the communication using the wireless LAN I F . As a result completion of the communication with the communication target device using the wireless LAN I F can be detected securely.

The timing at which the application receives the SSID of the network with which the information processing apparatus is being connected is not limited to the timing of S. For example the SSID may be received at the timing at which the print preview is presented or at the timing at which the application is started.

The process of S or S may be omitted. In this case the designated SSID is constantly treated as a onetime SSID. Therefore as communication with the communication target device the wireless communication based on WFD is used constantly.

In the above described embodiment explanations are made for the case where the user holds the information processing apparatus up and selects as the communication target device the device which has executed the NFC communication to cause the communication target device to execute the print process. When the print process is executed using the NFC communication the information enabling the user to recognize the communication using the NFC communication may be displayed on the display unit . For example a character string indicating that the printing is being executed by the device over which the information processing apparatus is held up.

The values of the IP address and the character strings of the SSID in the above described embodiment are used by way of example and various values and character strings may be used as the IP address and the SSID.

The communication between the first access point and the MFP and the communication between the second access point and the MFP may be either of wireless communication or wire communication.

The representation on the display unit shown in is merely an example. Various types of images may be displayed on the display unit .

Various types of data may be used as the model number as long as such data uniquely define a device. For example data not including numbers or data formed only of symbols may be used as the model number. Alternatively a name e.g. a device name uniquely defining a device may be used as the model number.

The information identifying a device is not limited to the IP address and a URL or a MAC address may be used as the information identifying a device.

The information processing apparatus may be configured such that an external memory such as a memory card can be connected thereto. In this case various types of data may be stored in the external memory in place of the storage unit .

Each program may be formed as one program module or may be formed of a plurality of program modules. Each component or program module may be replaced with another one within the scope of the invention. The invention may be implemented on a computer e.g. the CPU executing an image processing program e.g. the application a computer executing a process e.g. an operating system or another application other than the image processing program a hardware unit operating in accordance with a program or a combination of a computer and a hardware component. The invention may also be implemented on a computer executing processes of a plurality of programs in conjunction with each other or a hardware component operating in accordance with instructions from such a computer.

It is noted that various connections are set forth between elements in the foregoing description. It is noted that these connections in general and unless specified otherwise may be direct or indirect and that this specification is not intended to be limiting in this respect. Aspects of the invention may be implemented in computer software as programs storable on computer readable media including but not limited to RAMs ROMs flash memory EEPROMs CD media DVD media temporary storage hard disk drives floppy drives permanent storage and the like.

