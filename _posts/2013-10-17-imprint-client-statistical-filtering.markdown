---

title: Imprint client statistical filtering
abstract: A method, system API and computer product for adapting reverse data channel (RDC) utilization by selectively restricting the reporting of statistics data from client devices using a client-side filter adapted in response to configuration data from a file or other source file.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09432732&OS=09432732&RS=09432732
owner: TVWorks, LLC
number: 09432732
owner_city: Philadelphia
owner_country: US
publication_date: 20131017
---
This application is a continuation application of and claims priority to U.S. application Ser. No. 13 047 075 filed Mar. 14 2011 which claim priority to Ser. No. 12 252 432 filed Oct. 16 2008 now U.S. Pat. No. 7 921 207 having the same title which is a continuation of U.S. application Ser. No. 10 834 753 filed Apr. 29 2004 now U.S. Pat. No. 7 440 999 all prior applications are incorporated herein by reference in their entireties.

The present invention relates to data processing systems and more particularly the management of statistical data pertaining to a client device.

In information distribution systems such as cable television systems and the like a very large number of client devices such as set top boxes STBs are supported by one or more servers or head ends. Video information audio information and or other data is propagated from the server s to the clients via a high bandwidth forward application transport channel FATC within a distribution network. Control data may also be propagated via a forward data channel FDC within the distribution network. Control and other data may be propagated from the client to the server via a relatively low bandwidth reverse data channel RDC .

It is desirable to capture client usage demographic and other statistics for various purposes such as improving the user experience providing increased content relevant to the user community providing marketing and sales information billing purposes and the like. Unfortunately due to the number of clients and limited bandwidth of the RDC in a typical information distribution system it is not practical to capture all statistics from all clients and propagate that information back to the server.

The invention comprises a method system API and computer product for adapting reverse data channel RDC utilization by selectively restricting the reporting of statistics data from client devices using a client side filter adapted in response to a configuration file. Also disclosed are related techniques for organizing and configuring the collection of a wide assortment of different statistics from a set of client devices running comparable software in an environment where communication with those clients is severely limited e.g. reverse data channel bandwidth and or memory constraints .

Specifically and as will be discussed in more detail below individual applications or middleware running on client devices propagate respective sub sets of statistical information available from the client device. The sub set of the statistical information propagated to the service is defined by a filter associated with the application. The filter criteria is discussed as being defined by a configuration file which may be a default file resident on the client or a file transmitted to the client from the server. Different clients may be provided with different filter criteria.

To facilitate understanding identical reference numerals have been used where possible to designate identical elements that are common to the figures.

The subject invention will be described within the context of a client device namely a set top box STB operating within a digital cable television network. However it will be appreciated by those skilled in the art and informed by the teachings of the present invention that the invention may be practiced within any information distribution system such as a satellite television distribution system and the like. Generally speaking while the invention is suitable for use in many types of information distribution systems the invention finds its greatest applicability within the context of a system having a constrained bandwidth reverse data channel. Moreover the invention has applicability within the context of individual client devices and groups of client devices.

In one embodiment distribution network comprises a hybrid fiber coax network or satellite television network. In one embodiment of the invention the client devices comprise set top boxes such as the model DCT2000 manufactured by Motorola Corporation of Schaumburg Ill.

The server includes data input processing storage data serving and other equipment suitable for use within the context of a server as described herein. Specifically and as will be discussed in more detail below individual applications or middleware running on client devices propagate respective sub sets of statistical information available from the client device. The sub set of the statistical information propagated to the server is defined by a filter associated with the application. The filter criteria is discussed as being defined by a configuration file which may be a default file resident on the client or a file transmitted to the client from the server. It should be noted that the use of a configuration file for defining the filter is just one possible method for configuring statistics filters. In alternate embodiments the server determines the correct filter for a specific set top box interactively. For example in such an embodiment a server maintains a data base of mappings from a set top box or associated household to available statistical filters. The statistical filters may be associated with individual households neighborhoods or regions. In either case the identity of the set top box household is known to the server and the server responsively provides the appropriate statistical filters to the set top box. Thus the use of a configuration file is one technique for providing configuration parameters.

In the case of the configuration file being transmitted from the server the. server includes mechanisms to allow server side personnel or other entities to generate and transmit the configuration file. One such entity may comprise the cable television distributor or MSO. Another such entity may comprise the owner of a particular application such as a game application VOD application EPG application and the like. Each of the application owners operates to control its respective application and preferably increase the value of its respective application to the user community.

The statistical information returned by the deployed applications enables the application provider to improve the value of the application to the user community. To avoid over utilization of the RDC the filtering techniques discussed herein are employed to reduce the amount of data statistical and other data provided by the deployed applications back to the server. In one embodiment the configuration files are defined by the specific application owners. In another embodiment the MSO further defines a priority between various applications which priority may depend upon the revenue generating potential of the application the importance of a particular statistical item e.g. a VOD purchase command and the like or other data.

Thus given a plurality of applications deployed across a large community of client devices in one embodiment of the invention each of the applications has associated with it a priority level. Those applications having a higher priority level will be able to preferentially transmit their respective statistical data back to the server.

Tuner receives e.g. a radio frequency RF signal comprising for example a plurality of quadrature amplitude modulated QAM information signals from a downstream forward channel. Tuner in response to a control signal TUNE tunes a particular one of the QAM information signals to produce an intermediate frequency IF information signal. Demodulator receives and demodulates the IF information signal to produce an information stream illustratively an MPEG transport stream. The MPEG transport stream is coupled to a transport stream demultiplexer . The transport stream demultiplexer in response to a control signal TD produced by controller demultiplexes i.e. extracts audio video and or other information streams which are then coupled to the audio video processing module . The AV processing module processes the audio video information streams to produce audio and video signals suitable for use by presentation device .

Controller comprises a microprocessor an input output module a memory an infrared IR receiver and support circuitry . The processor cooperates with conventional support circuitry such as power supplies clock circuits cache memory and the like as well as circuits that assist in executing the software routines that are stored in memory . The input output circuitry forms an interface between the controller and the tuner transport demultiplexer back channel modulator and remote control device . Controller optionally propagates command and or control information to the server by modulating the command and or control information using the modulator and propagating the modulated information to the head end via the reverse data channel RDC supported by the distribution network . Such information may comprise for example application related statistics processed according to the various embodiments of the invention as described herein.

The user input device comprises a joy stick a keypad and or other user input or remote control functionality. The functionality of user input device may also be performed via controls positioned on the client device directly. User manipulations of the joy stick keys and the like or the remote control device are transmitted to the controller via the infrared link . The controller is responsive to such user manipulations and executes appropriate user interaction routines. As noted below user manipulations and the like are captured at a statistical level and optionally stored for further processing.

The memory of controller supports a filter storage FS a filter adaptation routine FAR a statistics data base SD other data D application programs AP virtual machine VM and an operating system OS. Within the context of the present invention each of a plurality of application programs AP may have associated with it a desired set of statistics to be captured. The application programs AP comprise illustratively Java applets interpreted by a Java virtual machine VM. The virtual machine VM may comprise a standard Java VM or a modified VM such as the Liberate TV Navigator manufactured by Liberate Technologies of San Mateo Calif. The virtual machine VM and operating system OS support a variety of applications and functions such as an interactive program guide IPG a video on demand VOD module a game module or other applications. The statistics data base SD may comprise illustratively a buffer that accumulates statistic records that pass through the respective filter s . The contents of the buffer are then sent via for example the RDC to the server when the buffer is full or at a threshold utilization level such as 80 at predetermined or periodic times e.g. every 12 or 24 hours at predetermined durations since a last buffer transmit on demand from the server on some other schedule or a combination of these times levels.

In general the controller operates to capture or log various user statistics which statistics are stored in a statistics data base SD. Such statistics include keys pressed by a user channels viewed by a user time of viewing content of viewed channels duration of key press demographic information and the like. Each statistic has a key associated with it that is used for reporting purposes. These statistic keys are also used to filter statistics to limit the upstream bandwidth usage.

An exemplary set of statistics is provided below. These statistics are useful for third party application developers distribution system owners e.g. MSOs or satellite TV providers and the like.

TVLC Changed channel includes duration tuned to previous channel and previous channel number. Only logged if on that channel for n seconds where n is defined by the application logging the statistic. Normally logged only by Liberate s menu service or NavShell .

APLN Loads an application into memory and starts it. Includes name of application and a timestamp. Normally logged only by Liberate s menu service.

APDN Unloads an application from memory. Includes the name of the application and a timestamp. Normally logged only by Liberate s menu service.

NAVS User navigated to a particular screen within an application. Includes an identifier for the screen the name of the application and a timestamp.

VOD User requested information about video on demand offerings. Normally logged by either a VOD module or the IPG if the two are integrated.

UNON User powered on the client device. Includes a timestamp. Normally logged by Liberate s middleware.

UNOFF User powered off the client device. Includes a timestamp. Normally logged by Liberate s middleware.

ULIN ULOF If we supported multiple user profiles for a. single client device we could use these stats to indicate a specific user logging in or out of our interactive service.

UWWW For access to internet or walled garden content this stat is logged to indicate the URL of a page requested by a user.

BGDN An indication of interactive content available for the currently tuned program is sometimes presented with a graphical bug being drawn to the screen. This statistic record is logged when that bug is drawn to the screen. It includes the target for the interactive content when selected and the currently tuned channel and timestamp. It would be logged by the application responsible for displaying the bug lPG menu service third party ETV application etc. 

BGSL See BGDN. This is the user selecting the bug to launch the associated content. Logged by the same application that logs BGDN this would include the timestamp

NVBT The user selected a navigable button within an application. The record would include an identifier for the application and button and a timestamp.

TKCV The user viewed a category of stories available in a ticker or crawl application. The stat would be logged by the ticker application and would include an identifier for the category.

TVST The user viewed a particular story in a ticker or crawl application. The stat would be logged by the ticker application and would include an identifier for the story.

META A third party may log all their statistics with a key that identifies their company. For example this key could be used by MetaTV .

STAT The statistic log itself. These records are always logged only by the middleware and include information indicating what the current statistic filter list is. It is logged with a timestamp and is logged each time the data in filter storage FS changes.

The statistics filtering criteria for each application are stored in the filter storage FS. The stored filters for the applications are adapted according to the filter adaptation routine FAR. In operation the client operates to log capture or otherwise retrieve statistical information while the applications APs desiring to report such statistical information are able to use only that portion of the statistical information meeting their respective filtering criteria. In this manner those applications reporting statistical information back to the server are constrained in the amount of reverse data channel RDC bandwidth they are allowed to use. In one embodiment of the invention the client retrieves statistical information pertaining to a large number of parameters but stores only the statistical information meeting the filtering criteria of the stored filters for the applications. In an alternate embodiment the client operates to capture only the statistical information meeting the statistics filtering criteria. For example a middleware provided application programming interface API logs statistics which are then either discarded or passed between applications depending upon whether the statistical filtering criteria associated with the application is met. If the filtering criteria are met the statistics are passed to the statistics data base e.g. buffer for subsequent transmission to the server via the RDC.

Thus given a finite amount of bandwidth for the reverse data channels within the system of the amount of RDC bandwidths consumed by the various clients is controlled by controlling the amount of statistical information propagated back to the server from the various applications.

The control mechanism according to various embodiments of the invention comprises a filtering criteria applied to each application in each client as well as more generalized filter that may be applied on a client to client basis. The filtering criteria may be dynamically adjusted by the server to enable more or less statistical information to be sent by particular clients client groups i.e. neighborhoods and the like. In this manner the server MSO or other controlling entity operates to control the RDC bandwidth consumed by the clients by adapting the filtering criteria used by the client applications to send statistical data back.

In one embodiment of the invention the statistical data sent back is prioritized such that critical statistical data is preferentially propagated back to the server. Such preferential treatment is given for example to billing related statistical data e.g. purchases of content view on view off data where viewing is a metered and billed event and the like to specific applications e.g. VOD games or to specific client groups e.g. a target demographic user group or location .

The invention contemplates reporting filtered statistics from the collecting entity e.g. the application programming interface API or middleware environment to the applications themselves for subsequent reporting or propagation to e.g. a server or application owner or directly to a server. Memory operating as a buffer is used to effect the reporting of statistics. Space allocations within the buffer memory are allocated in a first in first out FIFO manner or via a priority allocation technique.

In one embodiment of the invention duplicate statistical data is redacted from the buffer memory prior to transmitting the buffer memory contents to a server via the reverse data channel or other back channel. That is where multiple applications request the same statistical information statistical information that may be shared or is common to the multiple applications is aggregated for the benefit of multiple applications.

In another embodiment the reported statistical data is further processed to provide derivative statistical data e.g. total time viewing related programming content or other contextual information pertaining to user selections and the like . The derivative statistical data may be provided along with or in place of the relevant initial statistical data. Such further processing of the statistical data may be performed on a client device or on a server.

If the configuration file is valid then at step the filter list associated with the application is selected. At step the client begins logging statistics associated with user interactions and the like. Those statistics corresponding to the filter criteria are propagated from the application to the server via the reverse data channel.

The method of depicts the establishment of filter criteria for a particular application based upon configuration files either resident at the client i.e. a default configuration file or transmitted to the client from a server. The configuration files may also be included within an applet that is transmitted to the client wherein the applet may further include an actual application to be executed by the client. In one embodiment of the invention applications having a priority level above a threshold level are able to request a change to the current filter list. Such applications may comprise for example MSO control applications VOD billing applications and the like. That is each of at least one application running on the STB has associated with it a respective priority level. Those applications having a priority level above a threshold level are enabled to request changes to their respective filter parameters. The parameter change requests may be propagated to the server via the RDC for a server decision or may be decided by the STB.

Thus in general one embodiment of the invention operates by enabling software and applications to collect data with the finest level of granularity and to pass all statistics collected through a configuration driven filter so that only a small number of the statistics actually get sent to the statistics collection server.

Within the context of for example a digital cable television distribution system it is desirable to extract statistical information pertaining to the user or client community. The client or user community may comprise some or all of the client devices e.g. STBs within a single information distribution system or group of information distribution systems. However given the bandwidth constrained nature of the RDC within the system s it has been determined by the inventors that a sampling of statistical data associated with less than all of the user community is at times appropriate. Thus the invention has applicability within the context of statistics appropriate to an individual set top box as well as statistics appropriate to a neighborhood or system s .

To determine sampled behaviors of the client or user community a method for identifying which clients within the client base will provide statistics and which statistics will be provided is employed within one embodiment of the invention. Thus in general configuration of a statistics filter is driven by a list of the different types of statistics that a given set top box should collect where each statistic type is represented by an abbreviated name or identification. The abbreviated names or identifications are discussed above. In various embodiments priority reporting of statistics may also be employed to further conserve RDC bandwidth.

In one embodiment of the invention each client or set top box within an information distribution system is given a respective filter configuration. In another embodiment of the invention the clients within the information distribution system are divided into groups where each member of a particular group is given a common statistics filter criteria. Client or set top box group membership is determined according to any of geographic region head end node household information random selection and the like.

In one embodiment of the invention an application programming interface API denoted as logStatisic is provided such that an application invoking this function initiates the logging of a particular statistic upon application launch. In this embodiment when an application determines that conditions for a statistical event have been met the application calls the logStatistic function with a key value and any extra data associated with the statistic. The logStatistic API implementation then checks if the key value passed into it passes the current filter before storing it in the SD for later transmission to the server. During application execution if a call is made with a key value that is included within the filter list then the logged statistic associated with that key value is valid and added to an output buffer associated with the application. This occurs for each of the statistics deemed to be valid with respect to the application according to the filter list associated with the application. The contents of the output buffer are periodically transmitted to the server via the reverse data channel. Where the application calls with key value that is not within the filter list it is presumed to be invalid and even though that statistic may be logged by the client device the statistic is not included within the output buffer associated with the calling application and therefore is not propagated by that application to the server. Thus applications may be invoked in which the application requests every available statistic from the client device. In this case the filter is used to define which sub set of the logged statistics will be available to the application for subsequent reporting to the server.

The method of is entered at step when a filter list selection is performed. That is at step the criteria associated with a statistics filter is determined such that the propagation of filter configuration parameters to a portion of the client base will cause those clients receiving the filter configuration parameters e.g. via configuration files to operate in accordance with the selected filter list.

At step a random number N is generated illustratively in the range of 0 to 99. At step a variable I is set equal to 1 the variable I may also be set equal to numbers other than 1 .

At step a determination is made as to whether the number I is greater than the number of filter lists. If I is greater than the number of filter lists then at step the filter list is deemed to be empty i.e. no records pass the filter and the method is exited at step . If I is not greater than the number of filter lists then at step a determination is made as to whether N is less than a variable X where X is equal to the percentage chance for the Ith filter list. If the query at step is answered affirmatively then the filter list is set to the Ith configured list and the method exits at step . Otherwise at step I is incremented by illustratively 1 while N is reduced by X. After step the method returns to step .

Thus in one embodiment of the invention each of a plurality of client devices within the user community selects one of a plurality of available filter configuration lists such that a sampling of statistical information associated with the user community may be logged and reported to the server for further processing.

Several examples using the embodiments discussed above with respect to will now be described using the following assumptions 

 1 Each record to be filtered as a 4 character signature this could be any length or an integer or some other value known by both the applications logging the records and the server operator entering the filter lists in the configuration file 

 2 The configuration file entries are all of the standard Java properties format KEY VALUE or KEY VALUE or KEY VALUE are all valid 

 3 The filter.lists.num key is required it can be a value from 0 to 100 and indicates how many different filter lists there are to choose from henceforth this will be referred to as N 

 4 For all values i in the inclusive range 1 to N there will be the keys filter.lists.i.value and filter.lists.i.percent 

 5 Each value for filter.lists.i.percent must be 0 and the sum of all filter. lists.i.percent values must be 

 6 The value for filter.lists.i.value is of the form SIG SIG2 SIG3 . . . SIGx. Where each SIGx is a character signature to be accepted by the filter list 

 7 The special signature value can be used to mean all signatures. If it is present in the list the other signatures in the value are excluded by the filter rather than included and

It should be noted that the range for integral percentages is limiting and not required and that the filter lists selection could be abstracted to more than just statistics logging e.g. load balancing reporting times and the like may also be provided 

The subject invention contemplates the applying of common filter criteria to each member of a group of clients within the client community. In various embodiments of the invention the client community comprises a plurality of client or user groups. The groups optionally overlap such that client devices are members of multiple groups. Such overlap may be driven by for example client devices associated with the geographic affinity with one group and a demographic affinity with another group.

Group membership and or selection of client devices for specific filter criteria is performed according to at least one of the following filter list selection criteria 

 2 Time of day week e.g. log on filtered list of statistics in prime time another in late night and another during weekends 

 5 Service tiers e.g. log one set of statistics for users with all services another set for users with basic services etc. 

 6 Set top box class e.g. low end STBs use one filter list personal video recorder PVR STBs use another filter list and the like 

 9 Software requests e.g. an application or applet requests a change to its current selected filter list and

The method of is entered at step where the need for statistical data is determined. As discussed above the statistical data to be gathered may be used to effect application billing system management and other functions. Referring to box the statistical data gathered may comprise selected programming key presses applications invoked billing triggering events and other types of statistics such as those previously discussed. Referring to box the need for statistical data is balanced by the ability of the system to provide such data. This limitation on ability is primarily attributable to bandwidth constraints e.g. RDC bandwidth or memory constrains e.g. client or server device memory buffering and the like .

At step the group or groups of clients appropriate to satisfy the statistics data need are selected. Referring to box such group s may be populated with members according to client location demographic profile random selection e.g. per STB service tier STB class e.g. thin or thick client device and or other criteria.

At step the appropriate configuration files are generated for the client s devices and or client group s . At step the configuration files are transmitted to the appropriate client s devices and or client group s via for example an in band e.g. FATC or out of band e.g. forward data channel communications link. As previously discussed the configuration files are utilized by the clients to filter criteria which in turn defines the types and or quantities of statistical information reported by the application s resident on the client device.

At step the bandwidth and or memory resource utilization is monitored. At step in response to bandwidth and or memory resource utilization above a threshold level the statistics data to be collected and or the client group s or individual clients supplying such data are adapted in a manner tending to reduce utilization of at least one of the resources. The method then returns to step where new configuration files are generated in response to the adapters of step . The method continues to cycle through steps as necessary.

While not specifically shown the system manager or server device invoking the method of is causing the reporting of various statistics from individual clients or client group s . These statistics are utilized by at least one of the MSO or system operator application owner content provider EPG provider and the like to enhance or market sell their respective service.

Thus within the system management context the server or management function may select a portion of the clients within the client community for statistics reporting. For example a first portion e.g. 5 of the clients is associated with a first filter a second portion e.g. 10 is associated with a second filter and the like. The filter information may be based on random selection geographic information demographic information or other information. The server or management function data base is used to store household filter mappings such that service providers or other applications may access the reported data. It will be also noted that filter configuration parameters may be sent to all clients within a client community via a broadcast channel where only those clients associated with a particular ID a particular geographic location or neighborhood or some other identification actually accept and process the received filter parameters. Alternatively point cast or narrow cast channels may be used to specifically target filter parameters to the clients intended to utilize the filter parameters. Thus using client addressing and or channel selection specific filter parameters may be pushed out to those client devices having associated with them demographic information that is compatible with a particular server or advertiser goal.

The invention may be implemented as a computer program product wherein computer instructions when processed by a computer adapt the operation of the computer such that the methods and or techniques of the present invention are invoked or otherwise provided. Instructions for invoking the inventive methods may be stored in fixed or removable media transmitted via a data stream in a broadcast media or other signal bearing medium and or stored within a working memory within a computing device operating according to the instructions.

In one embodiment of the invention a single filter configuration parameter file contains the configuration information for all client devices receiving the file such that the selection of those client devices within the group of client devices receiving the configuration file determine which subset of client devices reports the associated statistics. Alternatively filter configuration parameters are customized to individual clients client groups and the like to enable the concurrent filtering of multiple filter parameters within the client device community.

While the foregoing is directed to the preferred embodiment of the present invention other and further embodiments of the invention may be 15 devised without departing from the basic scope thereof and the scope thereof is determined by the claims that follow.

