---

title: Methods and apparatus for device capabilities discovery and utilization within a content distribution network
abstract: Methods and apparatus for determining and selecting digital coding and/or decoding technology, delivery bitrates, and resolution parameters for programming and data delivery over, e.g., a content-based network. In one embodiment, the network comprises an HFC cable or satellite network that includes a server process interfacing with a plurality of customer premises equipment (CPE), and/or associated client devices, each having different display resolution, bitrate, and/or decoding capabilities profiles. The server determines the one or more capabilities possessed by the CPE or client device, and evaluates one or more program or content choices for possible delivery to that CPE or device based on its profile. The selection process may also take into consideration network and/or CPE operational considerations, such as conservation of downstream bandwidth, CPE uprating capability, client device power consumption, and the like.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09438946&OS=09438946&RS=09438946
owner: Time Warner Cable Enterprises LLC
number: 09438946
owner_city: New York
owner_country: US
publication_date: 20130603
---
This application is a divisional of and claims priority to co owned U.S. patent application Ser. No. 11 904 408 of the same title filed Sep. 26 2007 issuing as U.S. Pat. No. 8 458 753 on Jun. 4 2013 and which is a continuation in part CIP of U.S. patent application Ser. No. 11 363 577 entitled METHODS AND APPARATUS FOR SELECTING DIGITAL CODING DECODING TECHNOLOGY FOR PROGRAMMING AND DATA DELIVERY filed Feb. 27 2006 now issued as U.S. Pat. No. 7 916 755 on Mar. 20 2011 each of which is incorporated herein by reference in its entirety. This application is related to co pending U.S. patent application Ser. No. 11 726 095 entitled METHOD AND APPARATUS FOR CONTENT DELIVERY AND REPLACEMENT IN A NETWORK. filed Mar. 20 2007 and incorporated by reference herein in its entirety. This application is also related to U.S. patent application Ser. No. 11 363 578 entitled METHODS AND APPARATUS FOR SELECTING DIGITAL ACCESS TECHNOLOGY FOR PROGRAMMING AND DATA DELIVERY and U.S. patent application Ser. No. 11 364 147 entitled METHODS AND APPARATUS FOR SELECTING DIGITAL INTERFACE TECHNOLOGY FOR PROGRAMMING AND DATA DELIVERY both filed Feb. 27 2006 and both incorporated herein by reference in their entirety.

A portion of the disclosure of this patent document contains material that is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure as it appears in the Patent and Trademark Office patent files or records but otherwise reserves all copyright rights whatsoever.

The present invention relates generally to the field of information distribution across a network. More particularly the present invention is related in one exemplary aspect to the distribution of information across a content based and data network having a set of electronic devices with at least some heterogeneous capabilities.

Digital TV DTV is a technology which utilizes digitized and compressed data formats e.g. MPEG for content transmission as compared to earlier analog uncompressed approaches e.g. NTSC . The DTV content may be distributed across any number of different types of bearer media or networks with sufficient bandwidth including HFC satellite wireless or terrestrial.

DTV broadcasts are generally more efficient and more flexible than analog methods. For example the bandwidth required to transmit video programming using DTV is less than the bandwidth required using analog methods assuming similar quality of video and audio . Thus more video programming can generally be transmitted with a given bandwidth when DTV methods are employed.

DTV standards such as the OpenCable Application Platform OCAP middleware specification e.g. Version 1.0 and Version 2.0 require that applications be downloaded to host devices from the bearer or broadcast network in real time. The OCAP specification is a middleware software layer specification intended to enable the developers of interactive television services and applications to design such products so that they will run successfully on any cable television system in North America independent of set top or television receiver hardware or operating system software choices.

The aforementioned OpenCable standard also sets forth a Host Core Functional Requirements specification which defines optional circuitry for digital video recorders DVRs and digital video interfaces DVIs see e.g. the OpenCable Host Device Core Functional Requirements OC SP HOST CFR I13 030707 specification now OC SP HOST CFR I14 030905 dated Sep. 5 2003 .

DVR technology provides selective recording playback and manipulation e.g. storage processing editing etc. of digital format content. For example the services offered by the Assignee hereof in conjunction with exemplary Scientific Atlanta Explorer 8000 Digital Video Recorder set top box equipment and associated high capacity mass storage device are representative of this technology.

Personal video recording PVR functionality is essentially a subset of DVR technology wherein individual users e.g. family members within the same household can selectively record digital content particular to their choosing while not inhibiting other individuals from doing the same. This provides significant flexibility and enhances the user experience since each individual can tailor their viewing as desired.

DVI technology allows inter alia for the seamless integration of digital TV and digital based devices with analog devices such as analog televisions. Accordingly if the user possesses an analog monitor the DVI selectively converts the otherwise digital signal to the analog domain. Accordingly the user and manufacturer need not selectively tailor their equipment to a particular domain.

This equipment may be leased from the content network operator or alternatively purchased retail from a third party manufacturer. Clearly it is desired to have programming and software applications distributed by the network operator or third party content provider be compatible with the hardware software environments of these CPE thereby avoiding situations where a downloaded content or application does not function properly which can greatly add to user frustration.

Providing on demand OD services such as video on demand or VOD is also well known in the prior art. In a typical configuration the VOD service makes available to its users a selection of multiple video programs that they can choose from and watch over a network connection with minimum setup delay. At a high level a VOD system consists of one or more VOD servers that store the relevant content one or more network connections that are used for program selection and program delivery and customer premises equipment CPE to receive decode and present the video on a display unit. In a cable network the content is typically distributed over a Hybrid Fiber Coaxial HFC network.

Depending on the type of content made available and rate structure for viewing a particular VOD service could be called subscription video on demand SVOD that gives customers on demand access to the content for a flat monthly fee free video on demand FVOD that gives customers free on demand access to some content movies on demand where VOD content consists of movies only and so forth. Many of these services although referred to by names different than VOD still share many of the same basic attributes including storage network and decoder technologies.

Just as different varieties of VOD service offerings have evolved over time several different network architectures have also evolved for deploying these services. These architectures range from fully centralized e.g. VOD servers at a central location to fully distributed e.g. multiple copies of content distributed on VOD servers very close to customer premises as well as various other network architectures there between. Since most cable television networks today consist of optical fiber towards the core of the network which are connected to coaxial cable networks towards the edge VOD transmission network architectures also consist of a mixture of optical fiber and coaxial cable portions.

The CPE for VOD often consists of a digital cable set top box DSTB that provides the functions of receiving cable signals by tuning to the appropriate RF channel processing the received signal and outputting VOD signals for viewing on a display unit. Such a digital set top box also typically hosts a VOD application that enables user interaction for navigation and selection of VOD menu.

While the architectural details of how video is transported in the core HFC network can be different for each VOD deployment each generally will have a transition point where the video signals are modulated upconverted to the appropriate RF channel and sent over the coaxial segment s of the network. Depending on the topology of the individual cable plant this could be performed at a node hub or a headend. The coaxial cable portion of the network is variously referred to as the access network or edge network or last mile network. 

In U.S. cable systems for example downstream RF channels used for transmission of television programs are 6 MHz wide and occupy a 6 MHz spectral slot between 54 MHz and 860 MHz. Deployments of VOD services have to share this spectrum with already established analog and digital cable television services. For this reason the exact RF channel used for VOD service may differ from plant to plant. However within a given cable plant all homes that are electrically connected to the same cable feed running through a neighborhood will receive the same downstream signal. For the purpose of managing VOD services these homes are grouped into logical groups typically called Service Groups. Homes belonging to the same Service Group receive their VOD service on the same set of RF channels.

A broad variety of electronic devices have recently been developed to utilize and leverage emerging information delivery capabilities. Increasingly these devices are being equipped with DVI and DVR PVR technology. The devices often have very different capabilities and may include e.g. digital set top boxes DSTBs personal computers PCs personal digital assistants PDAs hand held computers smartphones personal media devices PMDs etc.

These devices can be operatively coupled to and placed in communication with other devices whether of the same or different configuration or other network entities such as a central information source or server via various channels. The different capabilities of these electronic devices may result from different purposes designs different user configuration being mobile versus fixed in nature cost features etc. and may include differing encryption support capabilities conditional access profiles memory and or processing capability video or audio codecs network interfaces and so forth. Many of these features including notably the conditional access CA codec and network interface capabilities are critical to the proper selection delivery and playing of content at the end user device.

The traditional method of digital compression is the well known MPEG 2 format. More advanced codecs include H.264 also known as MPEG 4 and VC 1. H.264 is a high compression digital video codec standard written by the ITU T Video Coding Experts Group VCEG together with the ISO IEC Moving Picture Experts Group MPEG as the product of a collective partnership effort known as the Joint Video Team JVT . The ITU T H 264 standard and the ISO IEC MPEG 4 Part 10 standard formally ISO IEC 14496 10 are highly similar and the technology is also known as AVC for Advanced Video Coding. DTV methods of program distribution are also generally more flexible than analog methods. For example the type of compression may be modified or updated. The compression can be improved when new techniques become available or they may be customized or optimized for certain applications and attributes such as picture quality data integrity or transmission delay.

Conditional access CA technologies may also be incorporated into the digital encoding of various types of data including audio and video programming. Conditional access can generally be defined as the control of when and how a user may view and use the associated programming or information. Different types of conditional access may be desirable in a network delivery system in order to e.g. accommodate improvements in the technology as well as different conditional access attributes such as security and category of programming or user access level.

A traditional method of conditional access is known as Powerkey . Newer methods of conditional access include Powerkey Book 2 Powerkey Book 3 NDS ANSI SCTE 52 2003 DVS 042 and DigiCipher. These can be implemented using for example the so called CableCard plug in security module access technology. See e.g. the CableCard Host interface specification which defines the interface between a digital cable receiver or STB Host device and the CableCard device provided by the MSO cable operator.

More recently emerging technologies have focused on downloadable conditional access system DCAS which is intended to be implemented in next generation two way cable ready digital TV sets set top boxes and or other TV related devices. This download approach would enable cable operators to download conditional access software directly to TV sets set top boxes and other digital entertainment devices in the subscribers premises and would be especially suited to interactive services such as VOD PVR etc. This would also obviate the physical CableCard form factor.

End user devices may also include a variety of interfaces. For example a set top box might have an RF tuner in order to receive QAM signals over the cable. A cable modem similarly receives DOCSIS QAM signals over the cable but on different channels and hence requires a separate tuning mechanism. Other types of potential interfaces include Ethernet LAN WAN etc. and even wireless technologies such as satellite millimeter wave WiFi IEEE 802.11 WiMax IEEE 802.16 and PAN IEEE 802.15 .

As client devices with different codec compression conditional access and or network interface capabilities are added to a network the distribution of programming and other information over the network becomes more complex. For example a video server system within a cable or satellite content network must take into account the compression and conditional access technology available at the receiving system before delivering that programming.

The capabilities of the receiving system must also be taken into account when providing directories of available programming. It is important that only compatible programming is displayed in a programming directory so that users don t attempt to watch programs that are only available in formats that are incompatible with their equipment. This can lead to significant user frustration and loss of satisfaction.

Within the network content may also be delivered to many devices outside of traditional STBs as well as being delivered to the STBs directly. Each such device may support different encryption and decode abilities.

In some cases the preferred delivery method may also have to be determined before delivery of the programming. That is the programming might be delivered by normal in band RF channels or by packet based networks such as the Internet e.g. via a cable modem .

Without the ability to determine the capabilities and network environment of each of the client devices on the network many of the benefits that arise from the use of DTV including advanced compression techniques enhanced conditional access capabilities and flexibility in choice of delivery channel or mode will not be fully realized.

A variety of different technologies generally relating to conditional access codec operation and network interface capabilities are evidenced in the prior art. For example U.S. Pat. No. 6 105 134 to Pinder et al. issued on Aug. 15 2000 and entitled Verification of the source of program information in a conditional access system discloses a cable television system which provides conditional access to services. The cable television system includes a headend from which service instances or programs are broadcast and a plurality of set top units for receiving the instances and selectively decrypting the instances for display to system subscribers. The service instances are encrypted using public and or private keys provided by service providers or central authorization agents. Keys used by the set tops for selective decryption may also be public or private in nature and such keys may be reassigned at different times to provide a cable television system in which piracy concerns are minimized.

U.S. Pat. No. 6 175 856 to Riddle issued Jan. 16 2001 and entitled Method and apparatus for dynamic selection of compression processing during teleconference call initiation describes a digital processing system and method which controls selection of a compressor in a communication system. In one embodiment the method comprises receiving at the digital processing system information from a communication port which information identifies decompression processing capabilities at a remote processor and selecting in response to the information a particular compression process for use in compressing data for transmission to the remote processor.

U.S. Pat. No. 6 216 152 to Wong et al. issued Apr. 10 2001 and entitled Method and apparatus for providing plug in media decoders discloses a method and apparatus for providing plug in media decoders. Embodiments provide a plug in decoder architecture that allows software decoders to be transparently downloaded along with media data. User applications are able to support new media types as long as the corresponding plug in decoder is available with the media data. Persistent storage requirements are decreased because the downloaded decoder is transient existing in application memory for the duration of execution of the user application. The architecture also supports use of plug in decoders already installed in the user computer. One embodiment is implemented with object based class files executed in a virtual machine to form a media application. A media data type is determined from incoming media data and used to generate a class name for a corresponding codec coder decoder object. A class path vector is searched including the source location of the incoming media data to determine the location of the codec class file for the given class name. When the desired codec class file is located the virtual machine s class loader loads the class file for integration into the media application. If the codec class file is located across the network at the source location of the media data the class loader downloads the codec class file from the network. Once the class file is loaded into the virtual machine an instance of the codec class is created within the media application to decode decompress the media data as appropriate for the media data type.

U.S. Pat. No. 6 256 393 to Safadi et al. issued on Jul. 3 2001 and entitled Authorization and access control of software object residing in set top terminals discloses a method for providing authentication authorization and access control of software object residing in digital set top terminals creates a fingerprint signature for each software object associates each fingerprint with a service tier encodes each association and creates an association table containing the information and downloads the association table to the digital set top terminal. In addition the method utilizes an entitlement management message sent to each set top terminal indicating what software objects the set top terminal may utilize and provides a system routine at the digital set top terminal that is invoked whenever software object is about to be utilized. The entitlement management message contains the access rights given to a particular set top terminal which must match the software object s access requirements for the software object to be utilized. The entitlement management message may also contain set top terminal resource control access rights that a given software object may utilize. When the software object requires the utilization of a set top resource a second conditional access routine may be invoked to determine the authorization rights for using the resource. Measures to protect such means are also described. As such the method provides multiple system cable operators MSG s with additional capabilities to maintain secure control of features and applications running on their networks and within the associated set top terminals.

U.S. Pat. No. 6 745 245 to Carpenter issued on Jun. 1 2004 and entitled Managing access to set top box objects using television conditional access system discloses methods for using a conditional access system to modify access control information maintained at a set top box or another client system. The access control information regulates the availability of information or entertainment services at the client or controls the ability of scripts executed at the client to access objects defined at the client. The conditional access system can be a conventional conditional access such as those used by cable television providers that has been adapted to modify the access control information. The access control information includes multiple entries each being referenced by a token identifier. The conditional access system transmits a command and an accompanying token to the client to instruct the client how to modify the access control information. The entry that is to be modified is identified by comparing the token with the token identifiers. By modifying access control information in this manner the entity that operates the conditional access system is capable of regulating the availability of resources or services at the client. For example a selected level of a tiered information service can be made available to the client.

U.S. Pat. No. 6 799 196 to Smith issued Sep. 28 2004 and entitled On demand data streaming parceling describes a method where a client device or information appliance such as a personal digital assistant is capable of receiving multimedia data streams from a server. However due to processing and display capabilities the client device may not be able to present the complete data stream or a user may elect to configure the client device not to process data that will unduly reduce the client device s performance. Accordingly the invention provides a method and apparatus for allowing a server to determine the native or user selected capabilities of a client device such that the server can filter and parse the data into meaningfully presentable data and non meaningfully presentable data and then transmit only the meaningfully presentable data to the client device for processing and display. In an alternative embodiment the server sends the complete data stream to the client device and the client device filters and parses the data and then processes only the meaningfully presentable data for display on the client device.

U.S. Pat. No. 6 985 934 to Armstrong. et al. issued Jan. 10 2006 and entitled Method and system for providing rich media content over a computer network describes a method and system for providing rich media content over a computer network. In accordance with the invention a server on a physical or wireless computer network polls the software hardware or appliance of an end user on the network for the availability of software and or hardware necessary for the display of rich media content. This polling is transparent to the end user and requires no action on the part of the end user. Based on the client s response the server sends an appropriately formatted version of the rich media file. The user is not necessarily aware that this transfer is taking place as it is taking place in the background while the user is performing other tasks or viewing content other than that which is being transferred. Once the rich media has been transferred in its entirety and stored or cached in the local memory of the client the rich media content is displayed automatically in a designated display area. The user may then be able to manipulate the rich media content without affecting the other content or tasks that were being displayed prior to the display of the rich media content.

United States Patent Publication No. 20020032754 to Logston et al. published Mar. 14 2002 entitled Method and apparatus for profiling in a distributed application environment and incorporated herein by reference in its entirety discloses a method and apparatus for deriving and characterizing the resource capabilities of client devices in a distributed application DA network environment. In a first aspect of the invention a method and associated architecture for obtaining client device configuration and resource information are disclosed which incorporate a distributed profiling entity having a server portion and client portion the client portion being used to facilitate query of the client device and transfer of device resource and configuration information back to the server portion. This information is later used by the profiling entity to alter and update the distribution of entity components between the server and client device. The client device configuration may also be altered if required. In a second aspect of the invention a method of scaling the aforementioned distributed profiling entity during both initial download and after initiation is disclosed.

United States Patent Publication No. 20020196939 to Unger et al. published on Dec. 26 2002 and entitled Decoding and decryption of partially encrypted information discloses an encryption arrangement for multiple encryption of television programs. A system according to embodiments of the present invention multiple encrypts only a portion of the data required for full presentation of a television program to permit coexistence of multiple conditional access encryption systems associated with multiple manufacturer s set top boxes within a single system. By only encrypting a portion of the program less bandwidth is consumed than the alternative of multiple encryption of all program data thus permitting a larger number of programs to be carried over the same bandwidth while permitting coexistence of multiple conditional access systems in a single cable television system.

United States Patent Publication No. 20030021412 to Candelore et al. published on Jan. 30 2003 and entitled Partial encryption and PID mapping discloses an encryption arrangement for multiple encryption of television programs. A system according to embodiments of the present invention multiple encrypts only a portion of the data required for full presentation of a television program to permit coexistence of multiple conditional access encryption systems associated with multiple manufacturer s set top boxes within a single system. PID mapping techniques are used to distinguish between multiple encryptions. By only encrypting a portion of the program less bandwidth is consumed than the alternative of multiple encryption of all program data thus permitting a larger number of programs to be carried over the same bandwidth while permitting coexistence of multiple conditional access systems in a single cable television system.

United States Patent Publication No. 20040123313 to Kao et al. published on Jun. 24 2004 and entitled Method for updating key in DCATV conditional access system discloses an invention which properly updates a key in various situations in order to secure liability of a service in a conditional access system for a digital cable television service. A method for updating a key in a conditional access system of a digital cable television service includes the step of receiving a request of changing service from a point of deployment POD module of subscriber having bidirectional or simplex receiver changing a service at the head end and sending an entitlement management message EMM having a changed key from the head end to the point of deployment POD module.

More and more U.S. and international households are beginning to purchase High Definition HD televisions HDTV . To keep up with the trend multiple systems operators MSOs have begun offering a greater variety of HD television programs to cable customers thereby allowing for greater subscriber utilization of the HD capability of their televisions and ostensibly greater subscriber satisfaction.

Entertainment quality transmission of HD signals requires about four times as much bandwidth as SD transmission. Although revenues from HD service may not be four times the revenue from SD service the ability to offer HD service is often critical to cable operators strategy to being a leader in digital television service offerings and maintaining a high level of subscriber satisfaction and low turnover .

In addition to HD signals various forms or formats of content encoding are also becoming more prevalent within both content delivery networks and associated IP networks and user devices associated therewith. For example certain types of lossy encoding may be sufficient in certain applications as may certain bitrates which are reduced from nominal or higher quality bitrates for that codec such as for portable devices which are unable to handle very high bitrate encodings or which may have reduced resolution display capabilities that cannot make use of HD or other high quality encodings . Different devices may simply utilize different formats as well such as for example the use of AVCHD encoders particularly designed to reduce storage requirements for handheld video devices.

Moreover so called up conversion systems are becoming more prevalent such as where a given device is adapted to enhance a given bitrate or resolution of encoding e.g. an SD program stream to a higher resolution or quality e.g. to provide near HD quality based on an SD encoding.

Bitrates for various types of content may also be affected by the multiplexing and or stuffing schemes employed. For example in many existing systems variable bitrate VBR digitally encoded program streams are converted to constant bitrate CBR program streams to facilitate multiplexing of those program streams to form higher rate streams more suitable for conveyance on a service provider s transmission facilities. A variable bitrate VBR stream may be converted to a CBR stream by reducing its bitrate when it exceeds a target CBR or adding null bits to it stuffing when its bitrate falls below the target CBR this is referred to as clamping the stream. This clamping is performed by or after encoding but before multiplexing the program stream with other program streams.

Additionally as new services and capabilities such as HD VOD Mobile Video Applications broadcast switched architecture BSA delivery converged premises capabilities and the like become more pervasive and are used to an increasing degree within content based networks new interfaces adapted for use with more and different types of end user devices and applications are required. Specifically extant cable or satellite network infrastructure and protocols such as the well known Session Setup Protocol or SSP simply do not have the capability to discover and support the broad variety of content encodings and formats including video resolution capabilities used by these end user devices when the network is providing such services. For example in a cable network content may be delivered to many different types of devices and users including the subscriber s set top box STB itself as well as devices associated with but outside of the realm of the STB. Each of these devices may support very different video resolution capabilities for rendering of video content.

Moreover newer devices such as converged premises devices CPDs personal media devices PMDs laptops handhelds and mobile telephones often support multiple different encoding decoding formats or resolutions and if the MSO network infrastructure is not aware of this capability it cannot make use of it such as for optimizing the playback of the content on that target device or optimizing the operation of the network itself e.g. reducing downstream bandwidth consumption increasing reliability or user satisfaction etc. .

So called Mobile definition or MD devices are also becoming more prevalent and hence a greater consideration for content providers. Generally the term mobile definition refers to a class of screen resolutions and or bitrates that are adapted for use on mobile devices which are typically much less capable in terms of display resolution and communications bandwidth than fixed devices such as STBs or PCs. One common metric used to quantify MD display capabilities is pixel resolution such as e.g. CIF Common Interchange Format which corresponds to a pixel resolution of 352 pixels by 288 pixels. Similarly QCIF Quarter CIF comprises a pixel resolution of 176 pixels by 144 pixels and SQCIF Sub Quarter CIF comprises a resolution of 128 pixels by 96 pixels.

Additionally the foregoing end user devices are often coupled to the network in an ad hoc fashion such as via a local area wireless link e.g. WiFi or Bluetooth serial bus interface e.g. USB or IEEE Std. 1394 FireWire or other data interface that is transient in nature. The communication with the end user device over these ad hoc communication channels must be taken into account as well.

Hence there is a broad spectrum of consumer premises equipment CPE that conceivably would be serviced by content based networks ranging from small portable devices with relatively low bitrate interfaces lower bitrate codecs and lower resolution displays to high end residential or premises devices adapted to receive and utilize HD or other similar high resolution or high bitrate encodings. Some subscribers in the typical cable network for example might have only an SD receiver and television. Others may have an SD receiver with up conversion apparatus e.g. the receiver a DVR or DVD player and an associated HDTV monitor . Yet others may have an SD and HD receiver and associated HDTV. Yet others may have a converged premises device CPD that acts as a gateway or hub for one or more end user domain devices such as WiFi enabled laptops MoCA enabled PCs PMDs such as the now ubiquitous Apple iPod and iPhone devices etc. 

Unfortunately no mechanism for allowing such devices to report their video resolution or bitrate capabilities to the network e.g. an application server or SRM at the headend or alternatively for the network to discover these capabilities currently exists in such networks. In effect the prior art network delivers video or audio content encoded or formatted based on other considerations e.g. selection by a subscriber of an HD or SD channel and gives no consideration to what the ultimate use of the content may be e.g. delivery to a connected PMD with a low resolution display and perhaps limited processing storage and or power capabilities. This lack of profiling capability will become increasingly limiting in the near future as more and more devices with heterogeneous capabilities are linked to MSO or satellite networks since an increasing number of issues relating to lack of compatibility or communication transparency will exist thereby increasing user frustration.

Based on the foregoing there is a salient need for improved methods and apparatus able to readily identify the different capabilities of two or more heterogeneous client devices on a network during the delivery of digital programming and other information and make dynamic and effective use of this information. This includes inter alia addressing the lack of facility in prior art client or consumer premises devices for dynamically determining available i conditional access system support ii codec support iii display resolution and bitrate capabilities and iv supported network interfaces.

As previously noted new client or consumer premises devices may utilize any number of different conditional access types codecs display resolutions bitrates and or network interfaces and hence some mechanism is needed for conveying a device s capabilities to an appropriate network entity wherein decisions can be made in real time as to how to encrypt content before it is delivered to the device how to compress encode it what resolution to select and over which channels to deliver it. Additionally user or subscriber expectations must be managed so that electronic program guides EPGs or other such listings of available programs contain only those programs or content elements that are compatible with that user s client device.

Such improved methods and apparatus would also ideally be implemented using substantially existing infrastructure thereby obviating significant modifications or expense in implementing such capability.

Such improved methods and apparatus would further ideally allow for commonalities or other aspects of client device configuration or operation to be identified within the network or segments thereof so that these commonalities or aspects could be leveraged to provide a benefit such as in terms of optimizing network operation by reducing bandwidth requirements or loading.

Moreover these methods and apparatus could be self healing from the standpoint that any errors or deficiencies in terms of capabilities within a given network client device could be readily identified and rapidly corrected if desired thereby avoiding user frustration at being unable to receive and view certain content.

With respect to video resolution there is a further need for improved methods and apparatus for use in a content based network that would provide the network with the ability to discover the various resolution capabilities of heterogeneous target end user devices such as STBs PMDs laptops handhelds mobile phones etc. and optimize the delivery of content to these devices whether for the benefit of the end user the network operator or both .

Such improved methods and apparatus would also be able to perform this discovery across a broad variety of protocols and device types and so as to support ad hoc networking or connections within the end user domain.

The foregoing needs are satisfied by the present invention which discloses inter alia methods and apparatus for selecting appropriate technology for programming and data delivery over a network.

In a first aspect of the invention a system for distributing video programming on demand is disclosed. In one embodiment the system comprises a plurality of video signal processing devices each the device having a plurality of video display resolution capabilities and configured to generate a capabilities profile relating at least in part to the video resolution capabilities and receive video programming signals a video on demand server configured to receive the capabilities profile from individual ones of the devices and identify on demand video programming that is compatible with individual ones of the capabilities profiles and a network connecting the video signal processing devices to the video on demand server and capable of transmitting the capabilities profiles and information relating to the identified compatible on demand video programming between the video signal processing devices and the video on demand server.

In one variant the identification of on demand programming by video on demand server comprises substantially in response to receiving at least one of the capabilities profiles processing at least a portion of the on demand programming according so as to make the processed at least portion compatible with at least one of the video resolution capabilities.

In another variant at least some of the video signal processing devices determine the set of capabilities by polling at least one hardware or software module.

In yet another variant at least some of the video processing devices further comprise a digital processor and software running thereon the software comprising a operating system and an application component the application component being adapted to request a video resolution capabilities profile from the device and the operating system configured to poll at least one hardware or software module.

In still a further variant the network comprises a hybrid fiber coaxial HFC cable television network and at least a portion of the plurality of devices has heterogeneous video resolution capabilities.

In a second aspect of the invention a method of operating client equipment in communication with a content based network is disclosed. In one embodiment the equipment comprises a plurality of supported video display options and at least one application and the method comprises running the at least one application providing at least one hardware or software interface capable of interface with the video display options discovering the display options and reporting the discovered options to a process. The network comprises for example a multi channel distribution network of the hybrid fiber coax HFC type and the client equipment comprises a digital set top box.

In one variant the act discovering comprises the act of polling a component or software registry of the client equipment to identify the options and the act of reporting to a process comprises transmitting a session setup protocol message to a session resource manager SRM process located remote from the client equipment on the content based network. The video display options may be e.g. selected from a group consisting of i HD ii SD and ii near HD.

In another variant discovering the video display options comprises making a call made using a predefined application programming interface API . 12. The method of Claim wherein the client equipment is selected from the group consisting of i a set top box and ii a personal media device PMD coupled directly or indirectly through an interface to a cable network.

In still a further variant the act of discovering comprises reading a capabilities registry of the client equipment.

In another variant the client equipment is in data communication with the network via a set top box and the act of reporting comprises transmitting the discovered video display options over the network via the set top box.

In yet a further variant the act of reporting to a process comprises transmitting a message to a software process configured to control at least in part the switching of program streams within a broadcast switched architecture network.

In a third aspect of the invention a method for operating a video processing device for use in a content based network is disclosed. In one embodiment the method comprises polling a set of components of the video processing device for video display capabilities receiving one or more video display capabilities in response to the polling and generating information describing the video display capabilities supported.

In one variant the video processing device comprises one of a set top box or personal media device and the method further comprises transmitting a session based protocol message to a session resource manager SRM located on the content based network remote from the set top box or personal media device.

In another variant the session based protocol comprises a descriptor parameter describing a particular resource descriptor a descriptor length parameter and a data field.

In yet another variant the method further comprises receiving a list of programs available for video on demand viewing the list selected based at least in part on the act of generating information displaying the list of programs to a user receiving a selection from the user transmitting the selection receiving video programming accessing the video programming based at least in part on one of the supported video display capabilities and displaying the video programming.

In a farther variant the method farther comprises transmitting a message to a software process configured to control at least in part the delivery of program streams to a node within a broadcast switched architecture BSA network.

In a fourth aspect of the invention apparatus for receiving digital information from a network the digital information being encoded is disclosed. In one embodiment the apparatus comprises a microprocessor for running software modules and further comprises a plurality of video display components each having a substantially distinct video display resolution capability an application for obtaining a video display resolution profile and an operating system for polling the plurality of data decoding components in order to generate information for the video display resolution profile.

In one variant the plurality of video display components comprises a plurality of software based video display functions and an associated video display support registry.

In another variant the application is further configured to generate and transmit a video display resolution capability message using a session based protocol.

In yet a further variant the apparatus further comprises a radio frequency RF interface for at least receiving modulated digital RF signals.

In other variants the apparatus is in data communication with a set top box adapted for use in cable television network and or a DOCSIS cable modem adapted for use in cable television network.

In a fifth aspect of the invention improved network server apparatus is disclosed. In one embodiment the apparatus comprises a processor a storage device in data communication with the processor and a computer program configured to run on the processor the program being adapted to receive video display resolution profile information from at least one network client device determine at least one content element compatible with the profile information and generate information for transmission to the at least one client device relating to the at least one content element.

In one variant the network comprises a content based cable network and the server comprises a server process associated with a video on demand function of the network.

In another variant the computer program is further adapted to identify when two or more of the at least one client devices have the same video display resolution information and invoke a bandwidth conserving content delivery mechanism to at least the two or more devices.

In a sixth aspect of the invention a method of configuring programming deliverable over a network that is available for on demand viewing by a user is disclosed. In one embodiment the method comprises receiving from the user information relating to at least one video display resolution according to which the programming is to be encoded and processing the programming consistent with the video display resolution.

In one variant the method further comprises transmitting the programming to the user over the network while the processing is still in progress.

In another variant the method further comprises transmitting the programming to the user over the network before the processing is performed and then performing the processing using the user s consumer premises equipment CPE .

In a seventh aspect of the invention a method of doing business over a cable television network is disclosed. In one embodiment the method comprises receiving first information relating to the video display resolution capabilities of a plurality of CPE operatively communicating with the network receiving second information relating to the respective subscription level of subscribers associated with the plurality of CPE and selecting based at least in part on the first and second information one of a plurality of variants of a content element for delivery to each of the plurality of CPE.

In an eighth aspect of the invention a method of operating a network is disclosed. In one embodiment the network comprises a switched content delivery network having a node and a switching mechanism controlling delivery of programs to the node and the method comprises providing a plurality of programs to the switching mechanism obtaining first information relating to the video display resolution capabilities of particular client devices serviced by the node obtaining second information relating to program requests from the plurality of client devices and based at least in part on the first and second information selectively switching at least one of the programs for delivery to the node using at least the switching mechanism.

In one variant the switched content delivery network comprises a broadcast switched architecture BSA and the act of obtaining first information comprises obtaining information relating to the video display resolution capabilities available to individual ones of the client devices.

In a further aspect of the disclosure a method for operating a video processing client device for use in a content delivery network is disclosed. In one embodiment the method includes i polling a set of components of the video processing device for video display capabilities and conditional access capabilities thereof via at least one application on the video processing device ii receiving one or more video display capabilities and conditional access capabilities in response to the act of polling iii providing information describing the video display capabilities and the conditional access capabilities supported to a session resource manager SRM of the content distribution network via a session based protocol comprising a descriptor parameter describing a particular resource descriptor a descriptor length parameter and a data field iv receiving a list of a plurality of available content for viewing the plurality of available content being provided to the video processing device based at least in part on the video display capabilities supported and v receiving a multicast comprising at least one of the plurality of available content selected by a user from among the list in a first format and having a first conditional access scheme.

In one variant the format which is selected by the network entity and based at least in part on a determination thereby that the video processing device shares at least one video display capability with a plurality of devices also receiving the multicast the shared at least one video display capability associated to the first format. In yet another variant the multicast further includes a key data stream comprising decryption data configured to enable individual ones of the plurality of devices having different conditional access capabilities than the conditional access capabilities of the video processing device to access the content.

In a further aspect of the disclosure a method of operating a network is disclosed. In one embodiment the network is a switched content delivery network having at least one node and a switching mechanism controlling delivery of programs to the at least one node. In another embodiment the method includes i receiving a plurality of programs at the switching mechanism ii obtaining first information relating to video display resolution capabilities and conditional access capabilities of particular ones of a plurality of client devices serviced by the node at the switching mechanism iii masking at least one of the plurality of programs based at least in part on the first information iv obtaining second information relating to program requests from the particular ones of the plurality of client devices at the switching mechanism the information indicating a request for a particular program from more than one of the particular ones of the plurality of client devices and v based at least in part on the first and second information the switching mechanism selectively switching at least one of the unmasked plurality of programs for delivery to the node. In one variant the more than one of the particular ones of the client devices have at least one common video display resolution capability and no common conditional access capabilities.

In one implementation the selective switching includes delivering i a multimedia stream comprising the at least one of the unmasked plurality of programs to the more than one of the plurality of client devices in a format which is compatible with the common video display resolution capability and in a first conditional access format compatible with one of the more than one of the particular ones of the client devices and ii at least data enabling decryption of the multimedia stream by the more than one of the particular ones of the client devices which are not compatible with the first conditional access format.

In yet a further aspect of the disclosure a method for operating a video processing device for use in a content distribution network is disclosed. In one embodiment the method includes i polling a set of components of the video processing device for video access and rendering capabilities thereof via at least one application on the video processing device ii generating information relating to the video access and rendering capabilities based at least in part on a response to the act of polling and providing at least a portion of the generated information to a network entity iii comparing the at least the portion of information provided to the network entity with one or more attributes of a plurality of available content for viewing iv marking one or more of the plurality of available content of the list the marking configured to indicate one at least one compatibility between the one or more of the plurality of available content and the video processing device v receiving a list of the plurality of available content for viewing the plurality of available content being selectively provided to the video processing device based at least in part on the comparison the list comprising the marked one or more of the plurality of available content vi receiving a user selection from the list vii forwarding information to the network entity regarding the user selection and viii receiving a multicast comprising at least one of the plurality of available content having a first format and having a first access scheme.

In one variant the video processing device shares at least one video access and rendering capability with a plurality of other devices also receiving the multicast and the shared at least one video access and rendering capability is associated with the first format. In another variant the multicast further comprises key data comprising data configured to enable individual ones of the plurality of other devices not having the first access scheme to access the content.

These and other aspects of the invention shall become apparent when considered in light of the disclosure provided below.

As used herein the term application refers generally to a unit of executable software that implements theme based functionality The themes of applications vary broadly across any number of disciplines and functions such as e commerce transactions brokerage transactions mortgage interest calculation home entertainment calculator etc. and one application may have more than one theme. The unit of executable software generally runs in a predetermined environment for example the unit could comprise a downloadable Java Xlet that runs within the JavaTV environment.

As used herein the terms client device and end user device include but are not limited to personal computers PCs and minicomputers whether desktop laptop or otherwise set top boxes such as the Motorola DCT2XXX 5XXX and Scientific Atlanta Explorer 2XXX 3XXX 4XXX 8XXX series digital devices personal digital assistants PDAs such as the RIM Blackberry Palm family of devices handheld computers personal communicators SIP phones J2ME equipped devices cellular telephones and smartphones personal music or media devices or literally any other device capable of interchanging data with a network.

As used herein the term codec refers to an video audio or other data coding and or decoding algorithm process or apparatus including without limitation those of the MPEG e.g. MPEG 1 MPEG 2 MPEG 4 etc. Real RealVideo Helix etc. AC 3 audio DiVX XViD ViDX Windows Media Video e.g. WMV 7 8 or 9 ATI Video codec AVC H.264 Flash Video FLV H.263 or VC 1 SMPTE standard 421M families.

As used herein the term computer program is meant to include any sequence or human or machine cognizable steps which perform a function. Such program may be rendered in virtually any programming language or environment including for example C C Fortran COBOL PASCAL assembly language markup languages e.g. HTML SGML XML VoXML and the like as well as object oriented environments such as the Common Object Request Broker Architecture CORBA Java including J2ME Java Beans etc. and the like.

As used herein the term conditional access refers to any access control scheme whether implemented in hardware software or firmware or combinations thereof including without limitation members of the Powerkey family Powerkey Book 2 Powerkey Book 3 etc. NDS including VideoGuard mVideoGuard etc. ANSI SCTE Standard 52 2003 DVS 042 incorporated herein by reference in its entirety and Motorola General Instrument DigiCipher family DigiCipher H etc. . These can be implemented using for example the so called CableCard plug in security module access technology a downloadable CA system DCAS or otherwise.

Similarly the terms Consumer Premises Equipment CPE and host device refer to any type of electronic equipment located within a consumer s or user s premises and connected to a network. The term host device refers generally to a terminal device that has access to digital television content via a satellite cable or terrestrial network. The host device functionality may be integrated into a digital television DTV set. The term consumer premises equipment CPE includes such electronic equipment such as set top boxes televisions Digital Video Recorders DVR gateway storage devices Furnace personal media devices PMDs and ITV Personal Computers.

As used herein the term DOCSIS refers to any of the existing or planned variants of the Data Over Cable Services Interface Specification including for example DOCSIS versions 1.0 1.1 2.0 and 3.0. DOCSIS version 1.0 is a standard and protocol for internet access using a digital cable network. DOCSIS 1.1 is interoperable with DOCSIS 1.0 and has data rate and latency guarantees VoIP as well as improved security compared to DOCSIS 1.0. DOCSIS 2.0 is interoperable with 1.0 and 1.1 yet provides a wider upstream band 6.4 MHz as well as new modulation formats including TDMA and CDMA. It also provides symmetric services 30 Mbps upstream .

As used herein the term DTV Network Provider refers to a cable satellite or terrestrial network provider having infrastructure required to deliver services including programming e.g. digital TV and data over those mediums.

As used herein the term DVI digital video interface refers generally to any type of interface e.g. hardware and or software adapted to provide interface and or conversion between different formats or domains including without limitation interfaces compliant with the Digital Display Working Group DDWG DVI specification e.g. DVI A DVI D and DVI I .

As used herein the term DVR digital video recorder refers generally to any type or recording mechanism and or software environment whereby content sent over a network can be recorded and selectively recalled. Such DVR may be dedicated in nature or part of a non dedicated or multi function system.

As used herein the term head end refers generally to a networked system controlled by an operator e.g. an MSO or multimedia specific operator that distributes programming to MSO clientele using client devices. Such programming may include literally any information source receiver including inter alia free to air TV channels pay TV channels interactive TV and the Internet. DSTBs may literally take on any configuration and can be retail devices meaning that consumers may or may not obtain their DSTBs from the MSO exclusively. Accordingly it is anticipated that MSO networks may have client devices from multiple vendors and these client devices will have widely varying hardware capabilities. Multiple regional head ends may be in the same or different cities.

As used herein the term middleware refers to software that generally runs primarily at an intermediate layer in a software or protocol stack. For example middleware may run on top of an operating system and platform hardware and below applications.

As used herein the terms network and bearer network refer generally to any type of telecommunications or data network including without limitation hybrid fiber coax HFC networks satellite networks telco networks and data networks including MANS WANs LANs WLANs interacts and intranets . Such networks or portions thereof may utilize any one or more different topologies e.g. ring bus star loop etc. transmission media e.g. wired RF cable RF wireless millimeter wave optical etc. and or communications or networking protocols e.g. SONET DOCSIS IEEE Std. 802.3 ATM X.25 Frame Relay 3GPP 3GPP2 WAP SIP DSM CC RTSP UDP FTP RTP RTCP TCP IP H.323 etc. .

As used herein the term network interface refers to any signal or data interface with a component or network including without limitation those of the Firewire e.g. FW400 FW800 etc. USB e.g. USB2 Ethernet e.g. 10 100 10 100 1000 Gigabit Ethernet 10 Gig E etc. MoCA Serial ATA e.g. SATA e SATA SATAII Ultra ATA DMA Coaxsys e.g. TVnet radio frequency tuner e.g. in band or OOB cable modem etc. WiFi 802.11a b g n WiMAX 802.16 PAN 802.15 or IrDA families.

As used herein the term network agent refers to any network entity whether software firmware and or hardware based adapted to perform one or more specific purposes. For example a network agent may comprise a computer program running in server belonging to a network operator which is in communication with one or more processes on a CPE or other device.

As used herein the term process refers without limitation to executable software e.g. that runs within its own CPU environment. A server process is an executable software process that serves various resources and information to other processes clients that request them.

The term processor is meant to include any integrated circuit or other electronic device or collection of devices capable of performing an operation on at least one instruction including without limitation reduced instruction set core RISC processors CISC microprocessors microcontroller units MCUs CISC based central processing units CPUs and digital signal processors DSPs . The hardware of such devices may be integrated onto a single substrate e.g. silicon die or distributed among two or more substrates. Furthermore various functional aspects of the processor may be implemented solely as software or firmware associated with the processor.

As used herein the term trickle download refers to without limitation any delivery or download mode which is at a rate appreciably less than the maximum capability of the extant network over which the downloaded content is being delivered. For example one type of trickle download might comprise a slow substantially constant rate download in the background using small amounts of excess primary bandwidth capability. Trickle downloads may programmatic e.g. predetermined to continue in one session until complete such as based on a bandwidth reservation or may also be opportunistic e.g. conducted in two or more segments as excess capacity becomes available.

As used herein the term video is meant to generally include without limitation audio and or video and other associated multimedia information that comprise content such as for example an on demand program. Exemplary types of services and models for providing such video include without limitation Video On Demand VOD IPTV Video To Go and network personal video recorder NPVR .

The present invention provides inter alia improved apparatus and methods for the management and control of electronic devices connected to a network. In one embodiment the network comprises an HFC cable or satellite network and the electronic devices comprise set top boxes PMDs laptops mobile telephones or other types of equipment containing one or more hardware and software functions or modules. The hardware and software functions modules of the different devices on the network contain various capabilities and options relating to video encoding decoding bitrate and or display resolution. These capabilities are utilized as a basis for determining which encoding format bitrate and or resolution to utilize for delivery of content to each particular client device.

The techniques of the present invention can advantageously be used for devices including e.g. set top boxes PCs mobile devices and phones personal video encoders PVEs such as the Slingbox and PMDs and for delivery paradigms or services including for example VoD broadcast switched delivery e.g. BSA IPTV so called video to go nPVR or nDVR as well as for slung content.

In one embodiment the network is capable of video on demand VOD delivery and includes a VOD server and associated session resource manager SRM that acts to select and deliver the desired content to each subscriber in a device specific fashion based on sessions established between the server and client.

In another embodiment the client device or CPE is used to provide at least a portion of analysis of its own capabilities as well as selection of suitable content compatible with those capabilities.

In yet another embodiment the network comprises a broadcast switched architecture BSA and the client device information is used as a basis for hub node switching decisions.

In another aspect of the invention end user devices are configured to report or allow discovery of their video resolution capabilities to a network entity e.g. application server the latter comprising a software process that evaluates the information received from the device and decides what video resolution bitrate etc. will be delivered to the requesting device.

The improved methods and apparatus of the invention are readily implemented using substantially existing infrastructure thereby obviating significant modifications or expense in implementing such capability.

These apparatus and methods are also optionally configured to identify commonalities or other aspects of client device configuration or operation so that these commonalities or aspects can be leveraged to provide inter alia optimization of network operation by reducing bandwidth requirements or loading.

The disclosed methods and apparatus are also substantially self healing from the standpoint that any errors or deficiencies in terms of capabilities within a given network client device can be readily identified and rapidly corrected if desired such as where codecs or applications are downloaded directly to a client device in order to provide it with additional functionality.

An operational and business rules engine useful in implementing various network policies is also disclosed.

Improved network server and CPE apparatus capable of implementing the aforementioned methodologies are also described as well as mechanisms to implement operational and or business rules during system operation.

Exemplary embodiments of the apparatus and methods of the present invention are now described in detail.

While these exemplary embodiments are described in the context of the aforementioned hybrid fiber coax HFC cable system architecture having an multi systems operator MSO digital networking capability and plurality of client devices CPE the general principles and advantages of the invention may be extended to other types of networks and architectures whether broadband narrowband wired or wireless or otherwise the following therefore being merely exemplary in nature. For example these techniques can readily be employed in the context of a broadband satellite network or even a mobile communications system such as that described in co owned U.S. patent application Ser. No. 11 258 229 filed Oct. 24 2005 and entitled Method and Apparatus For On Demand Content Transmission and Control Over Networks which is incorporated herein by reference in its entirety.

It will also be appreciated that while described generally in the context of a network providing service to a customer i.e. home end user domain the present invention may be readily adapted to other types of environments including e.g. commercial enterprise and government military applications.

The application origination point comprises any medium that allows an application such as a data download application or VOD based application to be transferred to a distribution server . This can include for example an application vendor website CD ROM external network interface mass storage device e.g. RAID system etc. Such transference may be automatic initiated upon the occurrence of one or more specified events such as the receipt of a request packet or ACK performed manually or accomplished in any number of other modes readily recognized by those of ordinary skill.

The content source may comprise any indigenous i.e. MSO or third party provider of content whether direct or indirect. This content may comprise an MPEG e.g. MPEG 2 MPEG 4 etc. stream or otherwise. The content may also pass through one or more intermediary nodes or conditioning process before transmission over the network as is well understood in the art.

The application distribution server comprises a computer system where such applications can enter the network system. Distribution servers are well known in the networking arts and accordingly not described further herein.

The VOD server a computer system where on demand content as well as the data discussed in greater detail below can be received from one or more data sources and enter the network system. These sources may generate the content data locally or alternatively act as a gateway or intermediary from a distant source. In one embodiment the VOD server includes the Session Resource Manager SRM functionality and asks the Digital Network Control System DNCS for resources. The DNCS responds with negative or positive response to the request and the VOD server implements the appropriate resource allocation logic. For example when a new VOD session request is made the SRM receives that request allocates bandwidth on a downstream QAM channel and sends the information back to the CPE that made the request so that it can tune to the right RF channel and the VOD program therein. Since the SRM controls mapping of incoming VOD session requests to QAM channels within the Service Group it is an appropriate place for a Cable Operator to enforce RF channel usage and other policies including CA. In general SRM should maximize availability of bandwidth to VOD sessions by efficiently recycling bandwidth from expired sessions and by ensuring some level of redundancy in case of equipment failure e.g. a QAM modulator fails .

It will be appreciated that while several exemplary embodiment of the invention are described in the content of an SRM closely associated with a VOD server i the SRM may be located outside of or at a location separate from the VOD server such as e.g. on a LAN or WAN in data communication with the VOD server or its proxy and ii one or more entities other than an SRM may be used to provide the described functionality. See e.g. the discussion of the broadcast switched architecture BSA embodiments described subsequently herein.

The CPE includes any equipment in the customers premises or other locations whether local or remote to the distribution server that can be accessed by a distribution server . Such CPEs comprise processors and associated computer memory and optionally mass storage adapted to store and run the downloaded or resident application as well as receive and store the streamed in band content and data. In the present context at least a portion of the CPE application necessary to facilitate conditional access can itself be downloaded to the CPE wherein the latter executes the downloaded application s components in order to enable the CPE to receive appropriate types of data although it will be recognized that the application s may also be resident on the CPE before download received from another source such as a third party Internet site CD ROM etc. .

Referring now to one exemplary embodiment of a head end architecture useful with the present invention is described. As shown in the head end architecture comprises typical head end components and services including billing module subscriber management system SMS and CPE configuration management module cable modem termination system CMTS and OOB system as well as LAN s placing the various components in data communication with one another. It will be appreciated that while a bar or bus LAN topology is illustrated any number of other arrangements as previously referenced e.g. ring star etc. may be used consistent with the invention. It will also be appreciated that the head end configuration depicted in is high level conceptual architecture and that each MSO may have multiple head ends deployed using custom architectures.

The architecture of further includes a multiplexer encrypter modulator MEM coupled to the HFC network adapted to condition content for transmission over the network. The distribution servers are coupled to the LAN which provides access to the MEM and network via one or more file servers . The VOD servers are coupled to the LAN as well although other architectures may be employed such as for example where the VOD servers are associated with a core switching device such as an 802.3z Gigabit Ethernet device . As previously described information is carried across multiple channels. Thus the headend must be adapted to acquire the information for the carried channels from various sources. Typically the channels being delivered from the headend to the CPE downstream are multiplexed together in the headend and sent to neighborhood hubs via a variety of interposed network components.

Content e.g. audio video data files etc. is provided in each downstream in band channel associated with the relevant service group. To communicate with the headend or intermediary node e.g. hub server the CPE may use the out of band OOB or DOCSIS channels and associated protocols. The OCAP 1.0 2.0 3.0 and subsequent specification provides for exemplary networking protocols both downstream and upstream although the invention is in no way limited to these approaches.

The transmission channels from the head end to the CPE may be 6 MHz bands populating a forward passband e.g. 350 750 MHz band of a coaxial cable which is allocated for downstream communication from headend to a set top terminal. The use of other channel bandwidths and frequencies is also consistent with the present invention.

It should be noted at this point that the term transmission channel is to be distinguished with a program channel. A transmission channel signifies a designated frequency band through which a transport stream containing broadcast programs is transmitted. On the other hand a program channel signifies the source of the program material selected by a user to view. For example a user may select program channel 2 to view program material provided by CBS program channel 14 to view program material provided by ESPN program channel 32 to view program material provided by MTV and so forth.

Upstream data from a set top or other device to the headend may be communicated via a reverse passband e.g. 5 40 MHz band of a coaxial cable. The reverse passband comprises reverse data channels RDCs having a 1 MHz bandwidth in this instance through which quaternary phase shift keying QPSK signals containing upstream data are transmitted. It should be noted that the 1 MHz bandwidth allocated for an RDC here is for illustrative purposes only.

It will also be recognized that the multiple servers OD or otherwise can be used and disposed at two or more different locations if desired such as being part of different server farms . These multiple servers can be used to feed one service group or alternatively different service groups. In a simple architecture a single server is used to feed one or more service groups. In another variant multiple servers located at the same location are used to feed one or more service groups. In yet another variant multiple servers disposed at different location are used to feed one or more service groups. One exemplary multi server architecture particularly useful with the present invention is described in co owned United States Patent Application Publication No. 20020059619 to Lebar published May 16 2002 entitled Hybrid central distributed VOD system with tiered content structure and issued as U.S. Pat. No. 7 690 020 on Mar. 30 2010 which is incorporated herein by reference in its entirety.

In the exemplary embodiment of the content delivery network of the invention a hybrid central distributed and tiered video on demand VOD service network with tiered content structure is disclosed. In particular the exemplary system uses media servers located in both the head end and hub stations. Set top boxes generally would be supplied VOD services from the high demand content media and optionally data as discussed below servers located in the hub station nearest to the user. The central media server located in the head end would be used as an installed backup to the hub media servers as the primary source for lower demand VOD services and as the source of the real time centrally encoded programs with PVR personal video recorder capabilities. By distributing the servers to the hub stations the size of the fiber transport network associated with delivering VOD services from the central head end media server is reduced. Hence each user has access to several server ports located on at least two servers. Multiple paths and channels are available for content and data distribution to each user assuring high system reliability and enhanced asset availability. Substantial cost benefits are derived from the reduced need for a large content distribution network and the reduced storage capacity requirements for hub servers.

High speed data download capability can also be provided via the aforementioned VOD infrastructure a description of an exemplary high speed data system and methods for use over a video on demand system can be found in co owned U.S. patent application Ser. No. 11 013 665 filed Dec. 15 2004 entitled Method and Apparatus for High Bandwidth Data Transmission in a Content Based Networks and issued as U.S. Pat. No. 8 522 293 on Aug. 27 2013 which is incorporated herein by reference in its entirety.

The CMTS generates network data that is transmitted by way of MEM on the out of band channels. Typically the network data comprises interact protocol IP packets that provide inter alia user access to internetworking e.g. the Internet .

The VOD server or its proxy contains a programming library and associated database. The database includes among other things a list of the programming and the types of encoding and conditional access technologies that are to be used with each program.

The exemplary process begins at step wherein a description or list of capabilities profile relating to one or more CPE is accessed. This list may be generated and transmitted using a session setup protocol SSP message generated by the CPE this protocol is described in greater detail subsequently herein although it will be recognized that any number of different protocols can be used consistent with the invention such as for example the Session Initiation Protocol SIP those specified in Part 6 of MPEG 2 Digital Storage Media Command And Control referred to as DSM CC defined under the ISO IEC 13818 6 International Standard IGMPv.3 a Trivial File Transfer Protocol TFTP Real Time Protocol RTP RTCP the Real Time Streaming Protocol RTSP or the Lightweight Stream Control Protocol LSCP . Alternatively the description or list may be retained in another location e.g. proxy network agent head end database or third party server and provided from this location via a messaging interface and protocol or other such mechanism e.g. direct database access by a VOD server process .

The capabilities described or listed can include e.g. the conditional access capabilities of the CPE the video compression decoding capabilities processing and memory capability thickness of the CPE s hardware middleware architecture hardware or API registry information etc. Additionally the network connections and network interfaces accessible to the CPE can be reported if desired.

The foregoing information can also be provided on a specific request basis such as where a request is transmitted to the CPE or generated internally to determine if a specific capability API etc. and only that capability API etc. is present in and accessible to the CPE . This approach obviates having to generate highly detailed and potentially lengthy capabilities profile on a routine or frequent basis e.g. every time the CPE is polled especially when the required capability etc. is already identified and readily ascertained.

Where used upstream transmission of the CPE capabilities profile s can be conducted on any number of different bases including without limitation i at a prescribed periodicity ii upon occurrence of an event e.g. at CPE or VOD server start up or a change in capabilities of the CPE such as application upgrade installation iii upon particular request from an upstream entity iv based on upstream e.g. OOB bandwidth availability etc.

Upon gaining access to the capabilities profile of the CPE the processing entity e.g. SRM associated with the VOD server will compare that profile to a list table or similar structure containing information on available content elements e.g. programs including the conditional access mechanisms available for those programs. Similarly other parameters associated with that program can be evaluated such as e.g. appropriate video codecs etc. The processing entity will then create a list of programs that are available for viewing by the CPE for which the profile was derived and at step the processing entity will transmit the list of programming to the CPE .

At step the CPE will present the list of programs available for use e.g. VOD selection by a subscriber. This presentation is typically accomplished via a visual display such as via the user s monitor or television although another presentation system e.g. GUI or menu structure on a PC audible cues etc. may also be used. One exemplary apparatus and method for transmitting and displaying program listing information is described in co owned U.S. patent application Ser. No. 10 390 963 filed Mar. 18 2003 entitled TECHNIQUE FOR PROVIDING PROGRAM GUIDE DATA THROUGH A COMMUNICATIONS NETWORK DELIVERING PROGRAMMING CONTENT and issued as U.S. Pat. No. 7 757 251 on Jul. 13 2010 which is incorporated in its entirety herein by reference although it will be appreciated by those of ordinary skill that other techniques may be used alone or in combination with the foregoing.

At step the user selects a particular program for viewing such as via an existing VOD client application e.g. on screen navigator or similar application resident on the CPE . This selection is forwarded to VOD server such as via upstream message or signaling interfaces of the type well known in the art and the server causes delivery of the program to the user via e.g. session and stream instantiation. In one embodiment the program comprises the only variant of the program available for delivery i.e. server has a single variant and determines via the foregoing method whether or not a given CPE is capable of utilizing the program e.g. has the necessary CA capability codec etc. . CPE not having adequate facility for access or decoding of the program are not given the option to select it.

In an alternate variant the server or other content source has a plurality of different variants of a given program available for delivery and the processing entity evaluates the capabilities of the relevant CPE against those of the different variants of a given program or other content element and then generates one or more matches where possible. These matching program variants can each be delivered to the CPE being profiled depending on other factors which may exist such as availability or demand for one variant over another downstream bandwidth requirements differences in the actual content of the program e.g. one variant adapted for West Coast viewers versus other geographic regions of the country and so forth.

In another variant the SRM or other processing entity identifies those attributes or features of the required capabilities profile for a given program variant that are not present in the capabilities profile of the CPE being evaluated and causes a message or signal to be generated. This message or signal may simply comprise an error message or log file or may also comprise a request for service to the CPE such as for downloading an application codec CA component encryption data or key API or other component needed by the CPE to make use of the content. This process can be controlled by a permission access scheme of its own such as where the provision of these missing components is controlled by the user s prior authorization payment subscription level or other parameter s . These components can be downloaded e.g. via in band or OOB downstream channel or even via a separate channel such as via DOCSIS channel and cable modem. They can be selected for example from a codec CA key API carousel or other similar mechanism. This process can be made substantially transparent as well such that it occurs immediately preceding VOD session instantiation or concurrent with or preceding other events such as CPE startup .

In the illustrated embodiment of the processing entity e.g. VOD SRM selects the format in which to deliver programming based on the capabilities of the CPE at step .

Additionally in another embodiment of the invention the VOD server will determine the network over which to deliver the programming to the CPE step . This decision could depend upon several factors such as the bandwidth available on each of the possible delivery networks the possibility of multicasting and re using an ongoing transmission in a network and so forth. For example in one embodiment loading or available bandwidth is generated by the network and sent to the VOD server SRM periodically such as via an inter process message. Alternatively the number of dropped packets on each network could be monitored and used as a determinant. Network load can also be evaluated by looking at the delay incurred when data is transmitted over the network.

As is well known multicasting is an effective method of reducing bandwidth requirements for IP or similar packet based transmissions. For example where two IPTV capable client devices are in operation on the network and have consistent or identical capability profiles a given program requested by both devices can be multicast to these devices as opposed to two unicasts the former requiring less downstream bandwidth than the latter.

Myriad different algorithms for determining the best or optimal network channel s to transmit content over under varying operational conditions will be readily recognized by those of ordinary skill provided the present disclosure.

In some instances the network selected for delivery will be the normal in band RF downstream link to the CPE . In other instances the VOD server might select a lower bandwidth VC 1 or H.264 over DOCSIS channel or B channel. In still other instances the program could be provided via a standard internetworking connection e.g. via the Internet as delivered via another channel outside of the cable network such as a satellite WiMAX or WiFi interface assuming suitable bandwidth .

The VOD server can also use a list of network connections or interfaces provided by the CPE to determine what methods for delivery are available in the first place. Alternatively this information can be drawn from a database or other such repository maintained at the head end or another location within the network which is based on initial registration information as well as periodic updates provided by the CPE or another entity tasked with gathering such information.

Upon selection of the network to use for delivery a message it transmitted to the CPE informing it of the selected delivery interface channel s . The programming is then delivered at step via the selected interface.

In should be noted that in some embodiments of the invention other programming or data may be received and processed by the CPE simultaneously with performance of the method described in . For example the CPE may receive a first program for viewing in real time a second program for storage and later viewing as well as high speed data downloads via the aforementioned VOD based download capability described elsewhere herein all while receiving the video on demand programming as described above.

In an alternative embodiment of the invention the CPE is configured to maintain the capabilities profile internally and act as the processing entity . In this embodiment the application server or other upstream entity will transmit a listing of programs and variants thereof available for viewing this list may be a complete listing or a subset thereof along with the conditional access and video compression options available for those programs variants . The CPE receives this list of programs and compares it with its own capabilities profile in order to provide a CPE specific list of programs available for viewing by the subscriber. This list of CPE specific programs will be displayed to the user. The CPE specific capabilities profile can also be extended to connected devices e.g. other devices which are part of a local network or otherwise in communication with the host CPE e.g. DSTB . For example a wireless interface between the CPE DSTB and a personal electronic device such as a PDA can be used as the basis for transmitting capabilities profile information about the PDA to the CPE the latter which then utilizes this information to form a super set of capabilities for itself and any connected devices. This is also true for the prior embodiments described wherein the processing entity is upstream of the CPE such as at the VOD server SRM.

In the aforementioned superset approach a mechanism for restricting access to particular programs or variants thereof can also be employed in order to avoid situations where a non capable platform attempts to select and access the content. For example if only the wireless PDA previously described has a particular conditional access capability whereas its host DSTB does not then the client application running on the CPE is configured to remove this program variant from the listing displayed to the subscriber or alternatively mark this entry as PDA only or the like.

Under the foregoing embodiment wherein the CPE acts as the processing entity the processing required by VOD server is reduced as it is not required to compare the programming lists with the capabilities profile providing by the CPE. Rather the comparison function is distributed across the individual CPE. However the amount of data that is transmitted downstream to the CPE in this approach could be greater as the complete lists of available programming and associated formats will be larger than the customized lists generated under the previously discussed centralized approach although upstream communication of the CPE profiles is also required.

In an exemplary distributed processing approach the CPE will discover is own capabilities by polling or by reading a set of capabilities from a registry or other such information storage or registration mechanism. The VOD server or its proxy will transmit a list of programs and the associated formats available for those programs to the CPE. Transmission and delivery of this listing may also follow any number of different paradigms such as those previously described with respect to upstream transmission e.g. periodically upon occurrence of a particular event upon request etc. . The CPE will then determine the set of programs available that are compatible with its capabilities or those of communicating client devices as previously described and then will display the authorized or accessible programs which may also be on a per device basis such as for connected client devices .

In another aspect of the invention the CPE and or associated client device profile information can be stored at the server or other network repository e.g. database such that real time polling of the CPE is substantially obviated. In one variant the CPE is configured to poll itself i.e. hardware software modules or access its internal registry only upon certain events such as at initial installation and boot up. This initial profile is then sent to the head end server or other repository for storage so that the configuration profile for that CPE can be subsequently accessed based on e.g. a user device ID such as the TUNER ID variable or MAC address or other such indexing mechanism. Thereafter a configuration change record is optionally maintained within the CPE and when a change to the CPE s hardware or software configuration or registry occurs only the change information is sent up to the server repository. This approach obviates polling and sending an entire capabilities profile description each time the information is required by the server SRM. It also obviates any downstream profile requests since the onus is placed on the CPE to update its own profile and records either directly or via a proxy . Furthermore the server SRM or other processing entity using the CPE profile data need not have communication with the CPE in order to obtain the information hence during periods of maintenance failure high downstream loading etc. the processing entity can perform the profile and program analysis tasks independently of any contact with the CPE .

In another aspect of the invention the processing entity e.g. VOD server process SRM can be configured to analyze the profile data for two or more CPE in order to identify commonalities or other features of interest. This comparison or identification of features can be used for other useful purposes such as identifying instances where multicasting of content or data may be possible. In certain instances multicasting can advantageously be used to save network bandwidth. This scheme becomes even more useful when conditional access or other e.g. network interface or codec encryption capability reported by a video receiver matches the conditional access capability of another device that is also receiving or desires to receive the same program. Even when different conditional access systems are used by these two devices the encrypted multimedia stream can be shared only the key data stream needs to be different.

However since program selections by a user are not made until after the list of accessible or available programs or content is generated and transmitted to each user the instigation of actual multicast operation is not performed until two or more CPE or associated client devices with matching CA or other capabilities select the same program or content for viewing. At this point the VOD server SRM or other processing entity can cause those actions necessary within the network in order to take advantage of the aforementioned commonalities.

The aforementioned commonalities could also be utilized in conjunction with the methods and apparatus set forth is co owned U.S. patent application Ser. No. 11 048 348 entitled Method and Apparatus for Network Bandwidth Conservation filed Feb. 1 2005 issued as U.S. Pat. No. 7 567 565 on Jul. 8 2009 and is incorporated by reference herein in its entirety. Specifically the aforementioned disclosure describes inter alia methods and apparatus for conserving bandwidth by taking advantage of the fact that most programming for most of the typical broadcast day and available channels will be in an SD or other lower bandwidth format. For example a given movie may be broadcast on user or program Channel X in its analog or digital SD form with an SD simulcast on program Channel Y during parts of the day and an HD simulcast on program Channel Y during other parts of the day e.g. prime time . However until the prime time or other designated HD broadcast slot is reached the HD simulcast on Channel Y will simply comprise the same SD content available on Channel X. Thus by mapping the user s Channel Y to the QAM channel for Channel X the network operator conserves multicast bandwidth associated with the SD content for a significant fraction often the majority of the programming day. Similarly the aforementioned information relating to CPE capabilities commonality can be used to create intelligent program channel to QAM mappings such that the CPE can be controlled on a per device basis based on their indigenous capability profile. As a simple example if two SD simulcasts have a heterogeneous parameter codec conditional access type etc. and two CPE want to view the program content of the simulcast the processing entity responsible for program mapping allocations can evaluate the capabilities profile of the two CPE and decide which is better mapped to which QAM and hence which variant of the heterogeneous simulcast is selected .

Various other types of functionalities may also be included within the CPE or associated client device relating to the downloaded content. For example in one embodiment digital copyright data is included within the downloaded data content such as well known digital watermarking data of the type authorized under the United States Digital Millenium. Copyright Act DMCA . For example Digimare SysCoP EIKONAmark and other similar commercially available watermarking approaches can be used. Media rights management systems such as the Microsoft Windows Media Digital Rights Manager DRM may be used as well. Various types of steganographic approaches may also be employed consistent with the invention in order to enforce copyright and provide the copyright owner with accountability and or trace ability of the downloaded and copyrighted material. These features can also act as the basis for a capabilities analysis such as where if a given CPE or client device has no DRM capability it will not be authorized to receive rights protected content or alternatively will only be authorized to receive content that has certain types of additional rights protection data associated therewith e.g. watermarking steganographic data etc. .

As described previously the various functions including CPE profile analysis profile evaluation versus available programming etc. can also be distributed across these processes as well as others such as another process disposed on a third party server . Hence the illustrated software architecture provides significant flexibility in terms of deployment especially over existing infrastructure since little modification to such infrastructure is required in order to support these functions.

In another embodiment of the invention the relevant head end process e.g. SRM proxy application server etc. delivers a generic list of programming and associated requirements to the CPE such as via a periodic delivery mechanism or alternatively upon a request issued by the CPE . When the CPE requests a given program the SRM or other process determines the program configuration to deliver to the hub and hence ultimately the requesting CPE based on one or more network operational parameters such as e.g. current utilization of QAM resources for that hub. For example where the SRM detects a high current QAM loading it may select a program variant that has a lower bandwidth codec associated therewith and or select a network interface for delivery of the content that optimizes network resources. This selection process is ideally but not necessarily mapped to the requesting CPE s profile data i.e. the SRM selects a program variant encoded using a codec corresponding to a codec already installed on the CPE . Alternatively the SRM can select a program variant encoded using a non indigenous codec and cause a download or installation of this codec in real time in order to satisfy the CPE request. Similar logic applies to selected network interfaces and CA.

It will also be appreciated that so called business rules of the type described subsequently herein may act as a basis for such selections and operational modifications. For example a subscriber s subscription level or the like can be used as a determinant of the type of codec used network interface selected etc. A premium service subscriber for example might receive programming using the highest bandwidth codec and hence ostensibly the highest picture and audio quality on a routine basis and only after such premium subscribers have been serviced will the codec interface etc. selections be made for other subscribers.

The aforementioned operational and business rules can also be combined such as wherein the premium subscriber logic described above is combined with QAM loading data for a given hub and hence business rules are only enforced to the extent that they do not violate or conflict with certain operational floors ceilings or other parameters. The converse may also be enforced i.e. where the operational rules are enforced but only to the degree that they do not violate or conflict with business limitations or rules. Myriad combinations of the foregoing are also possible consistent with the present invention.

The present invention also contemplates on demand configuration of the various content elements or programs prior to or during delivery to the CPE . For example one alternate embodiment of the invention allows the SRM or other process agent within the head end or other upstream entity of the network to receive the profile data associated with a given CPE or set of CPEs and configure a generic version of the content for delivery thereto. Such configuration may comprise e.g. encoding the content before delivery or even during streaming with the appropriate codec for the one or more profiled CPE. This approach substantially obviates many of the different variations within the content library since one substantially generic variant is used as a basis for producing all or at least portions of the requested coding formats. Transcoding e.g. conversion from one encoded format to another at the head end or other such entity may also be employed.

The present invention further contemplates the case where subscriber or user supplied or selected capabilities are used as part of the evaluation process. For example one variant of the invention described herein includes the capability for the client application running on the CPE or other software to present the user with a plurality of choices as to the configuration of their CPE.

In one variant the user is shown a listing of options or programs utilizing different options from which they may pick even if the capabilities associated with these options are not currently indigenous to their CPE . For example a user might be presented with a screen display that shows the same program encoded according to three different codec formats. Upon selection of one of these options indigenous to the CPE the content is delivered to the CPE. Upon selection of a non indigenous option the server or other network agent then downloads the necessary component e.g. codec to the CPE via e.g. an in band or OOB channel and installs the codec thereon.

In another variant the user can specify a source of a new component e.g. codec such as a website URL wherein the server or agent can fetch the codec if not already in possession thereof. The server agent then can encode a generic variant previously described using the selected codec thereby making a somewhat customized version for that subscriber. This allows the user to create a coded version of the program for inter alia subsequent or contemporaneous recording such as by way of the apparatus and methods described in co owned U.S. patent application Ser. No. 11 080 693 filed Mar. 14 2005 entitled METHOD AND APPARATUS FOR NETWORK CONTENT DOWNLOAD AND RECORDING and issued as U.S. Pat. No. 8 028 322 on Sep. 27 2011 which is incorporated herein by reference in its entirety. This may be useful for example in cases where the user desires to obtain a copy of the content in a specific encoded format that may not be supported by the network library previously described. The server agent hence acts as an encoding facility for encoding content in formats designated by the user. This feature can also form the basis for a business model such as where only premium users are offered this ability or it is provided on a pay per use or similar basis.

Referring now to another embodiment of the methodology of the present invention is described. Specifically the method of is used for determining and utilizing video resolution capabilities of the CPE which may include a set top box STB and or any connected devices. As used in the present context the term connected refers without limitation to any devices which are in direct or indirect data communication with the CPE whether in direct physical contact or not.

In a first step the method comprises obtaining information regarding codec bitrate and or video resolution capabilities from the CPE of interest. This can be accomplished generally along the lines of the method of previously discussed herein or using other techniques. For example in one variant a network process e.g. SRM is configured to generate or cause to be generated a polling message or query and transmit this to the relevant CPE . The CPE or its proxy then provides the requested profile information and transmits it back to the SRM or its designated proxy e.g. a format resource manager FRM sub process or module .

In another variant the SRM or FRM accesses a local database having pre stored information relating to the CPE client device capabilities. For example the subscriber account associated with the CPE of interest may have information relating to the CPE and other devices within the end user domain e.g. subscriber s premises such as may be provided by the subscriber at account or service establishment e.g. via a survey network profile wizard running on the CPE etc. or passively over time as the CPE of that subscriber interfaces with the network. A converged premises device CPD acting as a gateway or centralized interface within the user domain for example may be configured to obtain information from any connected devices e.g. a PMD plugged into a port of the CPD or a WiFi enabled laptop or handheld that registers with the CPD acting as an 802.11 AP and store this information locally or transmit it upstream to a network process. The various end user devices may have an indigenous ability to communicate with the CPE CPD for this purpose such as via software etc. installed by the manufacturer or according to a requisite interface standard or protocol used by the device or alternatively the subscriber may load an application onto each device to permit it to communicate with the CPE CPD or even the network SRM or FRM directly . In one variant the CPE CPD is configured to automatically download this application onto the connected device when the two interface for the first time thereby obviating user intervention. For instance a small client application might be loaded onto the client device which allows for the determination of hardware and or software on the client device such as via a hardware or software registry or other such mechanism.

Next per step the SRM or FRM evaluates the data obtained regarding the CPE and establishes a profile for the CPE in terms of the capabilities of interest. In one embodiment the capabilities of interest comprise the video codec support and display resolution of the CPE or its client .

Per step the generated profile is then used as an input to the SRM FRM process used select an appropriate content element for delivery to the CPE . For example one approach previously described herein is to select a content element that matches or complies with the CPE profile e.g. matches its decoding and display resolution capabilities. However this selection process by the SRM FRM may also take other factors into account including without limitation i the service level or privileges of the subscriber CPE ii prevailing or anticipated network operational conditions iii the existence of other requests from subscribers having similar CPE and for similar content.

In one embodiment network bandwidth may be considered and optimized by the SRM FRM in selecting an appropriate format. For instance where a given CPE has the ability to decode two formats of differing resolution e.g. SD and HD the amount of available excess bandwidth at that time or during the projected delivery window for the content may cause the SRM FRM to choose the SD over the HD version or vice versa. See e.g. co owned U.S. patent application Ser. No. 11 881 034 entitled METHODS AND APPARATUS FOR FORMAT SELECTION FOR NETWORK OPTIMIZATION filed Jul. 24 2007 and issued as U.S. Pat. No. 7 770 200 on Aug. 3 2010 incorporated herein by reference in its entirety for exemplary methods and apparatus for optimizing network operations including bandwidth allocation that may be used consistent with the present invention. The foregoing disclosure describes inter alia methods and apparatus for optimizing network bandwidth utilization by delivering to users only the minimum number of programs required by service provider policies so as to minimize bandwidth consumption while also maximizing subscriber satisfaction and service level e.g. video and or audio quality . This is especially useful when programming consumption and programming bandwidth changes drastically. For example so called primetime viewing typically comprises the maximum number of individual programs being delivered as well as the maximum diversity of programs the primetime demand for programming typically differs dramatically from the demand during early morning viewing and also from that of other relatively high consumption periods.

In one exemplary embodiment a forced delivery approach is employed wherein a copy of a program of a certain type is selected and delivered via one or more program channels. For example a given program may be available in both a standard definition SD format and high definition HD format. Furthermore different versions such as MPEG2 and MPEG4 audio video control of SD and or HD formats of programs may be available. If it is known that a group of user CPE in the service area are HD capable then the service may force the CPE of those users to tune to any available HD versions of programs to reduce the instances of duplicate programming by satisfying SD programming requests using HD programming. Conversely in times of constrained bandwidth the SD version of a program may be delivered when an HD program is requested. If the user s CPE has up conversion capability the user may still advantageously experience HD quality video even though the CPE input has been switched to SD.

As other alternatives a technique known as re binding or alternatively a payload substitution may be used in place of a forced re tuning.

In other embodiments up rating or down rating of one or more program streams i.e. changing the bitrate up or down can be used to temporarily or even indefinitely accommodate periods of increased or reduced network capacity respectively. For example in one embodiment transcoding or transrating of content may be conducted in order to resolve an incongruity between the codec format used by the source e.g. content or application server and that used by the CPE or client device. For instance the source may be operating in a TCP IP environment whereas the CPE client is purely MPEG2 e.g. downstream QAM tuner capable. Similarly one codec or environment may operate at a given bitrate which is not compatible e.g. too low or no QoS or real time streaming capability with a required bitrate resolution or format e.g. HD SD or sub resolutions thereof such as for example where the SD level includes levels SD SD . . . SDn and the HD level similarly includes HD HD . . . HDn with each of these sub levels having different data rates and or other characteristics see e.g. co owned U.S. patent application Ser. No. 10 881 979 filed Jun. 29 2004 entitled METHOD AND APPARATUS FOR NETWORK BANDWIDTH ALLOCATION issued as U.S. Pat. No. 8 843 978 on Sep. 23 2014 and incorporated herein by reference in its entirety of the CPE or client thereby requiring bitrate normalization or processing transrating . See e.g. U.S. patent application Ser. No. 11 726 095 entitled METHOD AND APPARATUS FOR CONTENT DELIVERY AND REPLACEMENT IN A NETWORK previously incorporated herein for exemplary transrating apparatus and methods.

This trans rating may even be accomplished dynamically and according to any number of different implementation schemes. Moreover the network can intelligently select content encoding or resolution formats to switch to when bitrate or other changes are needed. These rate and or format changes can also be inserted dynamically if desired i.e. during subscriber viewing of the content.

It will also be recognized that other conditions or constraints within the CPE or a connected client device may be considered by the SRM FRM in selecting a format bitrate or resolution. For example battery powered PMDs have a finite battery capacity and hence power consumption is often of great concern. It may be that the PMD has multiple codec bitrate or display resolution options yet each may not be equivalent from a power consumption standpoint. One encoding may consume significantly more processing overhead than another for instance thereby depleting the PMD s battery faster. Alternatively when power is not an issue the user may want the highest resolution display the device can support.

Similarly the communications bandwidth available to the device e.g. to a PMD from its parent CPD CPE may be constrained thereby militating in favor of the lower bandwidth encoding e.g. H.264 versus MPEG 2 .

Per step if no existing content element matches the SRM FRM selection the selected format resolution can be spontaneously generated such as by re encoding transrating or altering the resolution of another existing version of that content.

Per step the selected version whether pre existing or generated on the fly is then delivered to the requesting CPE according to the appropriate delivery paradigm. Note that the re encoding transrating altering of step may be performed before during or after delivery by the relevant network entity. For example in one variant the aforementioned processing is completed and then the re formatted content delivered to the CPE .

In another variant the re formatting process is commenced and the processed content streamed while the remaining content is being processed i.e. according to a just in time process. This approach can be implemented for example using a FIFO or comparable buffer structure with sufficient depth to account for variations or latencies in the encoding transrating and delivery process.

In yet another variant the unprocessed content element is delivered to the CPE such as via normal in band or DOCSIS delivery high speed burst download trickle download etc. where the CPE itself conducts any required re encoding transrating resolution adjustment etc. For example in one variant the CPE comprises a CPD having a hard disk drive HDD and software enabling the CPD to re encode or transrate received content and then store it on the HDD or stream it to a connected device .

It will also be appreciated that the present invention can be employed to adjust or alter the bitrates associated with certain classes or types of service. For example a nominal bitrate for SD service might comprise 3.75 Mbps and 17.0 Mbps for HD yet these rates can be varied within certain limits based on the display resolution capability of the target device or to achieve other objectives or obey other restrictions. For instance a target device might have 1080i resolution 25 Mbps yet its associated communication channel may have only 20 Mbps capability. Hence the requested service could be transrated or otherwise restricted to less than 20 Mbps e.g. 720p resolution capability corresponding to 19.7 Mbps etc. . This approach is especially useful for delivering content to MD and other mobile applications which often have very limited communication bandwidth due to e.g. cellular or wireless links. Specifically service albeit perhaps not optimized for the particular target can be provided in cases where prior art one size fits all approaches would otherwise preclude it Conversely bitrate can be adjusted upward where excess bandwidth is available to accommodate enhanced display resolution capabilities of the target platform.

A common approach for bit rate reduction in the compressed domain is requantization e.g. increasing the quantization step size of the Discrete Cosine Transform DCT coefficients in each video block. Open loop or closed loop solutions may be used as may so called simple requantization techniques which apply the standard complexity model and rate control of TM5 MPEG 2 Test Model 5 to set a new quantization step size for each macro block MB . As another option Lagrangian optimization may be used for finding the optimal quantization step for each MB to meet a desired bit rate with a minimum of distortion. A transrated bit stream provides generally produces a higher peak signal to noise ratio PSNR than a decoder encoder approach i.e. re encoding of the decoded video to the reduced bitrate . Myriad other approaches may be used consistent with the present invention for adjusting bitrate as will be readily appreciated by those of ordinary skill.

The CPE of is also provided with an OCAP 1.0 compliant application and Java based middleware which inter alia manages the operation of the device and applications running thereon. It will be recognized by those of ordinary skill that myriad different device and software architectures may be used consistent with the tuning and channel request functions of the present invention the device of being merely exemplary. For example different middlewares e.g. MHP ARIB or ACAP may be used in place of the OCAP middleware of the illustrated embodiment.

The exemplary CPE further comprises a conventional Watch TV application electronic program guide EPG or the like which services those program or user channels available over the network. The Watch TV application residing in memory provides such functions as channel navigation control channel selection in response to a channel change event etc. In another embodiment the Watch TV application further comprises all necessary functionality need to support both the channel request and CPE capability profiling features previously described herein.

In the exemplary embodiment conditional access functions of the CPE include the ability to receive and process conditional access information such as encryption key streams. The conditional access information is typically associated with the primary content e.g. video programming and may be transmitted within the same data structure e.g. file or data stream.

Processing of the conditional access information can also include determining the license rights e.g. digital rights management or DRM allocated therein as they relate to the programming information. The license rights may specify for example with regard to the associated programming the duration of use total number of uses total number of simultaneous uses list of system s on which use may occur or other similar types of information. Use typically comprises viewing or listening to the programming but any type of use including copying or recording or even transmitting to another platform or environment is consistent with the present invention.

Once the licensing rights have been determined the relevant functional module e.g. CA module within the CPE can then report the licensing rights available to the video display system. This report can for example take the form of a complete summary of the licenses available or just a positive or negative indication if the program can be viewed at this time. In some embodiments of the invention the conditional access module may also perform some processing on the programming information including any type of pre processing descrambling or decryption necessary for view or further processing by other systems such as connected PMDs .

The RF front end including tuning apparatus e.g. one or more tuners adapted to tune to prescribed QAMs delivered over the network . A wideband tuner arrangement such as that described in co owned and co pending U.S. patent application Ser. No. 11 013 671 entitled Method and Apparatus for Wideband Distribution of Content filed Dec. 15 2004 and incorporated herein by reference in its entirety may also be utilized such as where the content associated with one or more program streams is distributed across two or more QAMs.

It will be appreciated that while multiple instances of each type of module e.g. CA codec etc. are shown in the use of single instance of a module is consistent with the use of the present invention. In one embodiment of the invention the various components that make up CPE are semiconductor integrated circuits the use of which is well known in the art.

During operation the RF front end receives RF signals transmitted from the head end. These RF signals include normal in band RF downstream used for video programming distribution as well as out of band RF transmissions normally for cable modem services and high definition television services. The RF front end isolates the various RF channels and provides the appropriate signals to the cable modem and programming modem .

The cable modem signals are typically QAM modulated RF signals processed in accordance with the DOCSIS standard. The programming signals are both analog modulated RF signals and digitally modulated RE signals that typically carry video and audio information.

The RF front end also generates RF signals for transmission to the head end via HFC in response to digital signals from the cable modem or programming modem . These signals are used to communicate with the various systems that make up the head end as well as any other systems on the network or associated networks. They also provide one upstream communication capability for the cable modem .

In another embodiment of the invention a personal video encoder PVE or comparable device is used as the basis for the CPE or associated client device. For example the Slingbox device manufactured by Sling Media of San Mateo Calif. is one such exemplary device which is capable of enabling a user to watch TV programming from various locations via an Internet connected PC or similar device. The device is generally connected between the subscriber s cable satellite video drop and DSTB and has a TV tuner inside. The user tunes to a given channel and the device encodes the video streamed over the cable satellite in Windows Media or similar format. The encoded content is streamed to a client application on a Windows XP based or similar PC via an IP network such as the Internet and hence the user can view the data locally i.e. at the same premises or remotely so long as they have access to the IP distribution network. Hence the present invention advantageously extends the capability of such PVE devices by providing the capability to profile these devices or others in data communication therewith to determine their CA codec network interface etc. capabilities much as would be performed for a CPE or associated client device. In one embodiment the PVE is outfitted with the necessary polling profiling software and can profile itself and any devices that it is in data communication with e.g. the subscriber s distant laptop computer or remote PC . In another embodiment the PVE merely acts as pass through or router entity with the profiling functions being disposed entirely on the PC or laptop computer used as the subscriber s viewing device at their actual location.

It will be appreciated that the PVE may also be updated itself via the network or other mechanism in terms of capabilities. For example the PVE can receive new codecs or CA key data from the network so that it can modify its own configuration. These upgrades can also be passed through to the subscriber viewing device.

It will also be recognized that the present invention may be used in conjunction with the error logging and reporting methods and apparatus described in co owned U.S. patent application Ser. No. 10 722 206 entitled Methods and Apparatus for Event Logging in an Information Network filed Nov. 24 2003 and issued as U.S. Pat. No. 7 266 726 on Sep. 4 2007 which is incorporated herein by reference in its entirety. For example the aforementioned disclosure describes methods and apparatus including APIs for logging errors that occur on client devices or CPE . In the present context these errors which might relate to an error resulting from improper use of a codec failure to properly authenticate or implement conditional access failed encryption key s etc. can then be transmitted upstream to a responsible entity e.g. VOD or conditional access server .

The present invention may also be utilized consistent with the hardware registry apparatus and methods described in co owned U.S. patent application Ser. No. 10 723 959 entitled Methods and Apparatus for Hardware Registration in a Network Device filed Nov. 24 2003 issued as U.S. Pat. No. 8 302 211 on Oct. 30 2012 and is incorporated herein by reference in its entirety. This disclosure provides apparatus and methods for control of hardware within a networked electronic device e.g. CPE through use of a hardware registry. The registry contains records that correspond to an optional set of hardware functionality e.g. personal video recorder . Each record or set of records may contains fields that i identify the type of circuitry and peripherals ii uniquely identifies circuitry and peripherals of the same type iii specify parameters that are specific to the circuitry and peripherals types and or iv contain a reference to an application programming interface that can be used to access and manipulate the circuitry and peripherals. In the exemplary configuration the electronic device comprises an OCAP compliant consumer premises device e.g. embedded set top box etc. adapted to provide control over Host CORE optional circuitry for a digital video recorder DVR and digital video interface DVI . A DVR DVI application can therefore be downloaded to retail or leased set top boxes and other consumer electronics equipment which provides control of any available DVR DVI circuitry found therein or functions associated therewith. This not only permits after the fact control of optional hardware features in a retail third party electronics device by the MSO or other system operator but also allows for control and reconfiguration of leased devices after distribution to the end user s .

It will further be appreciated that the client application or other software process such as a WatchTV application or the middleware OS running on the CPE can be configured to select network interface technology for delivery of content as contrasted with an upstream entity such as the SRM making this determination . For example where the CPE comprises a plurality of RF tuners Ethernet interface and or cable modem etc. the client application can i determine these capabilities as previously described e.g. via access to a registry or polling and then ii apply one or more criteria in selecting the appropriate interface. These criteria may be indigenous e.g. information derived solely from the CPE itself or connected devices or alternatively be based wholly or in part on information obtained from an external entity e.g. SRM BSA switch proxy server on the Internet etc. . As an example of the latter the SRM might forward a list of available in band QAM frequencies channels or CM QAMs to the CPE these channels QAMs being ranked or in some way prioritized based on e.g. current QAM contention or loading. In the BSA environment described subsequently herein with respect to the information form the BSA switch or other supervisory entity might comprise a QAM or channel list prioritized in order to optimize minimize bandwidth consumption.

Alternatively the client application of the CPE can select the best most optimal network interface to use based on its own internal considerations or parameters which include the availability of certain interface types their bandwidth capability current loading etc.

Various inter relationships and hierarchies can also be utilized in implementation of the foregoing logic such as where the network e.g. SRM supplied priorities are imposed upon the CPE and the CPE attempts to utilize these in order of decreasing priority consistent with its own network interface capabilities. For example the SRM might broadcast a priority list to multiple CPE e.g. CM RF tuner first in band RF tuners second etc. . For CPE with an associated CM tuner stage the first priority interface is selected while those CPE without a CM tuner will select the second propriety interface and so forth.

In response to this request the CPE polls the functional modules at step . The polling can be performed on modules with only a certain type of capability such as conditional access or video decoding capability or network access. Or in alternative embodiments of the invention the polling can be performed across multiple capabilities in order to gain a more global profile of the device.

After the results of the polling have been received the capabilities profile of the CPE is transmitted to the processing entity e.g. VOD server SRM at step . The VOD server will normally generate a list of available programming that is compatible with the capabilities of the CPE. This is typically done by comparing the capabilities of the CPE versus those required by the available programming e.g. comparing the video encoding of the program with the video decoding capability of the CPE. If they match in terms of the minimum critical attributes necessary to deliver and play the programming for the subscriber the associated program is added to the available content list. Similarly the conditional access control associated with the program is also compared with the conditional access capabilities of the CPE. If they match then the associated program is added to the available list. Other parameters or capabilities of the CPE can readily be evaluated in this way also.

At step the CPE receives a list of programming available for viewing is transmitted to the relevant CPE over the network. At step the list of programming available for viewing is processed by the CPE and presented to the user such as via a connected display device or monitor. In the case of a DSTB this display device might comprise a television set. For a PC handheld or laptop this might be the computer monitor.

At step a programming selection is received from the user. Such selection can be made via input mechanism including physical switches or buttons on the CPE or via a remote using wireless technology such as infrared light or radio frequency the use of which is well known in the art. Selections may also be made using an onscreen menu structure and computer mouse or joystick and also from a proxy device e.g. a remote device in communication with the server that allows it to select programming or data for delivery to the CPE such as a mobile telephone see e.g. U.S. patent application Ser. No. 11 258 229 filed Oct. 24 2005 and entitled Method and Apparatus For On Demand Content Transmission and Control Over Networks previously incorporated herein .

Upon receiving the programming selection from the user or its proxy that selection is forwarded to the VOD server at step . At step the on demand or other programming selected by the subscriber is received and displayed. This typically takes the form of displaying the programming on a video monitor of some sort although the present invention is not so limited. The program may also be stored for later viewing or recorded onto a desired media. See e.g. the techniques described in co owned U.S. patent application Ser. No. 11 080 693 entitled Method and Apparatus for Network Content Download and Recording filed Mar. 14 2005 issued as U.S. Pat. No. 8 028 322 on Sep. 27 2011 and incorporated herein by reference in its entirety. It may also be routed to a connected device e.g. a client device in data communication with the CPE that has its own decoder and CA functionality.

The program information will typically contain the conditional access information e.g. key stream and video compression information that will allow the CPE or other device to select the correct processing to view the programming when needed although this information can feasibly also be provided via another communications channel or from another source.

In some embodiments the CPE may receive a message indicating the network or physical channel on which to receive the selected programming. For example the CPE may be instructed to receive the programming through the cable modem interface versus normal in band downstream channels. Similarly the CPE may comprise two or more tuners which allow the receipt of multiple in band channels. The CPE can also be instructed to receive the programming through another type network connection e.g. WiFi LAN etc. using one of the network interface modules. Hence the CPE may receive one or more programs for viewing or storage simultaneously with the receipt of the video on demand programming issued by the VOD server .

In one variant of the invention the CPE is provided with a special application program interface API such as a Java based API or other software interface that is used to allow applications or other network processes to poll the device for its decode bitrate resolution or other capabilities. This also optionally includes a pass through or indigenous profiling capability i.e. where the SRM FRM or other network process can request polling or capabilities determination for a client device connected to the CPE such as where a PMD is plugged into a port of a CPD as previously described herein.

Since host or client devices such as STBs PCs PMDs etc. and associated display devices may have built in hardware decode support for more than traditional MPEG 2 video such as e.g. VC 1 Real Helix AVC H.264 Flash Video FLV H.263 etc. one embodiment of the invention uses a call to the device operating system or middleware from an application running on the CPE see e.g. the client process of above to elicit information e.g. a list relating to video display resolutions or bitrates supported. The operating system or middleware of the CPE or client device being queried then polls or accesses the host hardware and or software for registered video resolution support. One or more supported resolutions are reported back to the application client process via the operating system middleware. The application now having the available video resolution or bitrate support information for the device creates a Session Setup Protocol SSP or Real Time Stream Protocol RTSP message that is passed back upstream to the SRM FRM. At that point the SRM FRM evaluates the information so as to select an appropriate resolution type format bitrate etc. as previously described herein with respect to

As noted above client device profile information in the exemplary embodiment is delivered to the requesting network entity e.g. SRM FRM via existing Session Setup Protocol SSP or Real Time Stream Protocol RTSP mechanisms which are modified to include extensions to support this new attribute type. The host device s operating system or middleware is also modified to handle the attributes capabilities request issued by the querying application or entity. By using modified or extended versions of existing protocols such as SSP or RTSP much of the foregoing functionality can be advantageously implemented with little more than a software change or upgrade on the CPE thereby obviating many expensive infrastructure hardware upgrades. However it will be recognized that dedicated or special purpose protocols and infrastructure may be used to implement the various aspects of the invention if so desired.

The modules can be software firmware or hardware modules but will often be embodied as hardware in typical DSTB environments. These modules provide additional functionality or capabilities to the CPE . In some instances the modules provide conditional access capabilities as described above. In other instances modules provide video decoding functionality. In still other instances the modules provide network interface functionality. Yet other uses for these functional modules will be readily apparent to those of ordinary skill.

During operation of one embodiment of the CPE the application generates and transmits a capabilities request message to the O S . The message may be generated spontaneously by the application itself such as upon expiration of a countdown timer or the like or in response to an inquiry received by way of the HFC or from another system within the CPE such as a back end communications interface such as USB IEEE 1394 WiFi etc. . In one embodiment of the invention this process will involve a call made using a predefined application programming interface API . For example to determine the conditional access capabilities of the CPE or other device a get ca call may be used. To determine the video decoder capabilities a get decoder call could be used. To determine the network interfaces available a get network call could be used.

In response to the capabilities request message the O S polls or otherwise accesses the modules . For example if the capabilities request message is for conditional access support the O S polls each module for a description or other information relating to its conditional access support capabilities. Each module responds by indicating the conditional access technologies supported back to the O S .

The O S then forwards a list or other description profile of the conditional access technologies supported based on the reports received from the modules to the application . The application then stores the profile for later retrieval and access. The application may also forward the profile information using an appropriate message interface e.g. Session Setup Protocol SSP message for example to the VOD server process SRM via the HFC network if a capabilities request message is received. In other embodiments of the invention the application will forward the profile periodically or automatically such as during power up or whenever a VOD programming list is requested or according to any number of other possible algorithms of the type previously described herein.

In an exemplary embodiment of the invention many of the steps performed in the methods described above can be implemented as signal exchanges generally fitting with the SSP protocol described in the Assignee s Pegasus Interactive Network specification Session Setup Protocol Version 2.3 published May 29 2003 which is incorporated herein by reference in its entirety. The information signal exchange between a network server and a video receipt and decoding device e.g. CPE can occur using messages described as above formatted to follow the Pegasus SSP Resource Descriptor structure defined in the foregoing specification. In one embodiment the signal exchanges for gathering capabilities information can occur by conveying conditional access system information video decoder information and network interface information using a descriptor format from the Session Setup Protocol document and shown in Appendix I hereto.

It will also be recognized that the methods described herein can employ validation of conditional access. For example it may be desirable in certain applications to use the results of the get  call obtained from the CA modules in order to verify with the corresponding conditional access system that the responding device belongs to the set of devices authenticated to operate within the network. This device authentication inter alia frustrates surreptitious attempts at gaining conditional access by non authenticated devices spoofing or the like.

Referring now to a first embodiment of the improved network server device with digital capability selection functionality according to the present invention is described. It will be appreciated that while described in the context of a substantially centralized VOD server SRM FRM as shown in the device may be adapted for use at other locations within the network. Furthermore as previously noted the VOD server process and SRM may comprise a distributed functionality wherein two or more portions of a distributed application DA in communication with one another are utilized.

As shown in the exemplary server device generally comprises an OpenCable compliant network server module including a digital processor s RAM mass storage device and a plurality of interfaces for connection with other network apparatus such as distribution infrastructure of the VOD network LANs the local service node hardware IP routers and other packet network devices network management and provisioning systems local PCs etc. Other components which may be utilized within the server device depending on where the device is employed and how it is physically implemented include RF tuner stages modulators demodulators encryption decryption amplifiers board level electronic components as well as media processors and other specialized SoC or ASIC devices. Support for various processing layers and protocols e.g. lightweight stream control protocol or LSCP 802.3 DOCSIS MAC OOB channels DHCP SNMP UDP SNMP H.323 RTP RTCP VoIP SIP etc. may also be provided as required.

A VOD application is also disposed to run on the server module to provide a functional interface for VOD session requests received from network CPE or other interposed entities. These additional components and functionalities are well known to those of ordinary skill in the cable and embedded system fields and accordingly not described further herein.

The server device of may take any number of physical forms comprising for example one of a plurality of discrete modules or cards within a larger network head end or edge device of the type well known in the art including the MEM itself. The server may also comprise firmware either alone or in combination with other hardware software components such as those previously described e.g. disposed in the aforementioned edge device . Alternatively the server module may be a stand alone device disposed at the head end or other location such as an application server and may even include its own RF front end e.g. modulators encryptors etc. or optical interface so as to interface directly with various portions of the HFC network . Numerous other configurations may be used. The server device may also be integrated with other types of components such as satellite transceivers encoders decoders etc. and form factors if desired.

It can also be appreciated that the methods of the present invention may be practiced using any configuration or combination of hardware firmware or software and may be disposed within one or any number of different physical or logical entities. For example the CPE capabilities profile and program analysis functionality described above may take the form of one or more computer programs running on a single device disposed within the network e.g. the VOD server module such as at a head end node or hub. Alternatively such computer programs may have one or more components distributed across various hardware environments at the same or different locations such as where various of the functions are distributed across the VOD servers application servers and Business Management System BMS .

As yet another example portions of the functionality may be rendered as a dedicated or application specific IC having code running thereon. Myriad different configurations for practicing the invention will be recognized by those of ordinary skill in the network arts provided the present disclosure.

Specifically as shown in the network of comprises a fiber coax arrangement wherein the output of the MEM of is transferred to the optical domain such as via an optical transceiver at the head end or further downstream . The optical domain signals are then distributed to a fiber node which further distributes the signals over a distribution network to a plurality of local servicing nodes . This provides an effective 1 N expansion of the network at the local service end.

Co owned U.S. patent application Ser. No. 09 956 688 filed Sep. 20 2001 entitled Technique For Effectively Providing Program Material In A Cable Television System issued as U.S. Pat. No. 8 713 623 on Apr. 29 2014 and incorporated herein by reference in its entirety describes one exemplary switched architecture useful with the present invention although it will be recognized by those of ordinary skill that other approaches and architectures may be substituted.

BSA programming may comprise without limitation simulcasts interactive pay per view IPPV live sporting and other events and other selected offerings. A set top box STB or two way Digital Cable Ready e.g. CableCard television is typically required for viewing.

In order for the BSA function to be transparent to the subscriber channel change latencies must be kept to a minimum e.g. 250 ms or less as compared to average linear digital broadcast services . Like the video on demand VOD systems previously described BSA programs are streamed to a service group contrast switch only when being viewed. Unlike VOD many viewers can view the same stream. Typically only real time linear programs are included in BSA broadcasts. Since there is no storage involved the VCR controls e.g. trick mode functions common to VOD are not available. In this regard BSA is much simpler that VOD. Commercials or other programming segments cannot be skipped and program bit rates are treated as in more conventional systems.

In the context of the aforementioned BSA network there are several metrics or indices which are useful in evaluating the performance of the network. Specifically the expression peak streams represents the maximum number of different program streams that are instantaneously based on specified data intervals needed as a worst case. Using software CPE tuner addresses can be purposely or randomly assigned to service groups and peak stream requirements can be analyzed for each group size. It has been noted by the Assignee hereof that generally speaking as service group size is decreased peak stream needs also decrease. When viewed over a sufficiently short time scale e.g. two hour periods it is possible to compare the moment to moment variability in peak stream use.

It has also been noted that the smaller service groups display roughly the same variability as the larger service groups. When considered as a percentage of maximum stream use as service group size decreases variability increases and will impose a limit the amount of concentration that can be safely implemented within the system. Concentration in BSA is defined as a ratio of the total bandwidth of the programs offered to the BSA bandwidth provided to the service group. While this is conveniently expressed as a ratio of stream counts in practice streams will be of various bit rates concentration is therefore best thought of as the ratio of the bitrates. Concentration generally at a given grade of service or blocking frequency trends upwards with decreasing service group size.

Another useful metric of the value of BSA is yield. Yield is a function of concentration and the total number of programs included. Yield is important to consider when comparing the value of various bandwidth reclamation techniques.

As verified by actual trials conducted by the Assignee hereof BSA provides significant concentration which results in the ability to vacate significant portions of the previously occupied bandwidth free bandwidth yield .

Also of interest is the metric of redundant viewership . Redundant viewers are those which view otherwise unique programs. Generally speaking the highest number of redundant viewers occurs at prime time or just post prime time. This is also the time of greatest total viewership and the time of highest peak stream needs. In the exemplary configuration a design point of 70 streams would provide a non blocking grade of service. However significant surplus bandwidth still exists below the 70 stream level. Unfortunately the greatest surpluses occur at times when other services e.g. VOD also have their lowest demands. Edge QAM resource sharing with VOD is therefore not expected to provide significant interleaving bandwidth gains. However the BSA system can be advantageously operated to allow this surplus bandwidth to be utilized in other ways such as for transport of data video voice or even future applications which would require additional bandwidth.

Gain is a useful parameter for comparison of BSA with statistical multiplexing technology. In BSA percent gain is defined as Concentration 1 100 Eqn. 1 In this context content that occupies the freed up spectrum is assumed to operate with the same level of efficiency as the content being processed i.e. switched under the BSA architecture or alternatively statistically multiplexed .

A primary advantage of the BSA paradigm is bandwidth conservation preservation. Bandwidth for unviewed programs is not consumed and can be re allocated. Similarly new programs can be added without adding bandwidth. Advantageously programs with narrow appeal can be added in a BSA system with little if any bandwidth impact. More popular programs will impact the BSA bandwidth but to a lesser extent than was traditionally the case. Multiple bit rates can also be made available for use or sale to programmers or advertisers.

BSA bandwidth efficiencies are at least in part a result of over subscription. Specifically the selection of programming is greater than the bandwidth allocated to the service group. This can result in blocking the case where a viewer is denied access to a requested program. However the aforementioned trials conducted by the Assignee hereof demonstrate that when properly configured blocking events are sufficiently rare so as to be less common than a network outage thereby providing a sufficient level of service.

Additionally a BSA system must typically gather and keep logs or other records of programmer specific viewership data in order to function. These logs or records are maintained to allow for well considered recapture of non viewed program streams i.e. reclamation of bandwidth . The server manages bandwidth by removing streams based on this activity data. In typical practice unviewed streams will be marked but not actually removed until the bandwidth is needed either because of a client request or based on external resource demands such as VOD overflow.

In one exemplary embodiment the network switch logs all channel change events and is aware of the tuning locations of all tuners not just those that happen to be viewing BSA programs. This provides highly accurate and complete viewership data based on actual channel changes as contrasted with extrapolations or other estimation techniques.

It is often an important factor to maintain subscriber privacy for both legal and commercial reasons. Accordingly subscriber identities may be protected by hashing or encryption of the tuner address prior to logging and storage. The stored address and associated events are therefore not traceable to the user account. The resulting obscured tuner address is repeatable so the necessary tuning location and user activity tracking may be performed while still maintaining complete anonymity.

In the exemplary embodiment of the present invention the edge switch generally located in the distribution hub as shown in is flooded with all available programs. This improves transport efficiency because a simple unidirectional drop and continue protocol is performed at each hub location on a given optical transport ring . The concept of flooding also simplifies the transport network in that no control system is needed rather a simple deliver everything paradigm is used. This approach also advantageously makes this portion of the signal chain more robust since more complex control systems generally lend themselves to a higher operational failure rate.

Because ordinary broadcast programming is supplied using BSA the transport network needs to have a high degree of availability. In the exemplary embodiment BSA program transport is supplied through a redundant spatially diverse counter rotating Ethernet ring topology although other topologies may be utilized with success.

In one embodiment of the invention the different codecs network interfaces and or CA modules within different CPE may be used as a basis for BSA switching decisions and or operation. Specifically the switch hub operation can consider CPE capability information as well as other parameters as part of the switching logic. For example information relating to whether anyone is capable of watching a given program stream on a hub or other node may be used as an input to the switching algorithm. As a simple illustration the aforementioned polling of the CPE associated with a node or hub may return CPE profiles that indicate that none of the CPE on that hub have MPEG 4 decoders. Hence delivery of any MPEG 4 encoded content to that hub would be a waste of bandwidth since no one on that hub will ever select that MPEG 4 encoded program stream. This information can be used by the switch or similar entity e.g. supervisory process or rules engine that controls the switch to avoid switching MPEG 4 encoded program streams to that hub thereby conserving bandwidth.

The foregoing approach can also be extended to CPE that are active at a given point in time i.e. while MPEG 4 capable CPE may be associated with a given hub if they are not active or powered up then there will again be no need for MPEG 4 encoded program delivery until such CPE is actually switched on or activated thereby enabling the subscriber to actually select that MPEG 4 program . Similarly the subscriber s affirmative act of selecting an MPEG 4 encoded program may be used as the a basis of switching such as where the MPEG 4 encoded variant of a program stream is only delivered to the hub upon actual selection by one or more subscribers having MPEG 4 encoders on that hub.

The foregoing approaches are also readily employed with respect to CA and network interface configurations of the CPE whether alone or in combination with one another. For example templates or masks can be used wherein switching decisions are made based on compliance by one or more CPE within the hub service group with a pre stored or ad hoc masking function such as where a given program stream will be switched to the relevant hub when both a given codec and CA profile are present.

In another embodiment the BSA switching process can be made CPE centric such that switching decisions or portions of the switching logic can be performed at the CPE. For example a given CPE might be provided with a complete list of available programming and using an installed client application such as that previously described herein mask out certain portions of the available content or programming list based on CPE indigenous capabilities. The unmasked or alternatively masked portions of the list can then be provided to the switch or other supervisory process such as via upstream signaling or message to be used in the switching algorithm. The switch or supervisory process can for example use this information to identify those programs for which no codec CA and or interface support is provided within the CPE of that hub and hence which can be deleted from the program lineup for that hub.

Other features useful with such broadcast switched networks may also be used consistent with the features and functions of the present invention. For example the efficient network multicasting apparatus and techniques described in co owned U.S. patent application Ser. No. 11 325 107 filed Jan. 3 2006 entitled Methods and Apparatus For Efficient IP Multicasting in a Content Based Network issued as U.S. Pat. No. 7 693 171 on Apr. 6 2010 and incorporated herein by reference in its entirety may be used to provide inter alia both efficient delivery of multicast content and efficient network operation switching based on subscriber STB configuration or other such parameters. For example where an IP multicast is destined for two CPE within the same service group one of the CPE can be tuned to the appropriate CM QAM thereby freeing QAM resources. This logic is overlaid onto the decision of whether to even deliver the multicast to that service group e.g. wherein none of the CPE in that group have an appropriate decoder or CM interface necessary to receive and decode the multicast content .

Similarly the apparatus and methods for selective delivery of targeted content to individual ones or subsets of CPE within a switched network described in co owned and co pending U.S. patent application Ser. No. 11 186 452 filed Jul. 20 2005 and entitled Method and Apparatus for Boundary Based Network Operation incorporated herein by reference in its entirety may be used to provide inter alia both targeted delivery of content and efficient network operation switching based on subscriber STB configuration or other such parameters. For example decisions of whether to switch a given program to a node may be based on both targeting criteria e.g. whether a given CPE is even within a target group of subscribers and the CPE capabilities profile for CPE within that node.

Similarly the anticipatory network allocation and control apparatus and techniques described in co owned U.S. patent application Ser. No. 11 243 720 filed Oct. 4 2005 entitled Self Monitoring and Optimizing Network Apparatus and Methods issued as U.S. Pat. No. 8 582 584 on Nov. 12 2013 and incorporated herein by reference in its entirety may be used to provide inter alia efficient network operation switching based on both anticipated network and STB operational parameters as well as subscriber STB configuration and requirements.

Moreover the vacated bandwidth stuffing and extraction apparatus and techniques described in co owned U.S. patent application Ser. No. 11 291 328 filed Nov. 30 2005 entitled Apparatus and Methods for Utilizing Variable Rate Program Streams in a Network issued as U.S. Pat. No. 7 889 765 on Feb. 15 2011 and incorporated herein by reference in its entirety may be used to provide inter alia loading of non time sensitive secondary content onto QAMs as well as efficient network operation switching based on subscriber CPE configuration and requirements. For example the CPE configuration might be used by the stuffing algorithms and control process to determine which types of secondary content can be inserted and subsequently extracted into one or more program streams having vacated bandwidth. Similarly switching decisions can be predicated at least in part based on the need to insert secondary content such as where the number of QAMs loaded for a service group is altered in order to make the creation of vacated bandwidth possible or more likely.

In another aspect of the invention the aforementioned processing entity e.g. rendered as one or more computer programs disposed on the VOD server SRM CPE or other location includes a so called rules engine. This engine comprises in an exemplary embodiment a series of software routines adapted to control the operation of the capability profile analysis and selection and even component distribution algorithms previously described. These rules may comprise a separate entity or process and may also be fully integrated within the processing entity itself and controlled via e.g. a GUI on a PC connected to the server . In effect the rules engine comprises a supervisory entity which monitors and selectively controls via the processing entity the CPE profiling analysis and program selection and distribution processes at a higher level so as to implement desired operational or business rules. The rules engine can be considered an overlay of sorts to the profiling and analysis algorithms.

For example the processing entity may invoke certain operational protocols or decision processes based on profiles or requests received from the CPE conditions existing within the network demographic data geographic data etc. However these processes may not always be compatible with higher level business or operational goals such as maximizing profit or system reliability. Hence when imposed the business operational rules can be used to dynamically or manually control the operation of the processing entity and even the associated client process on the CPE . The rules may be e.g. operational or business oriented in nature and may also be applied selectively in terms of time of day duration specific local areas or even at the individual user level e.g. via specific identification of the CPE or client device via TUNER ID MAC address or the like .

For example one rule implemented by the rules engine may comprise only providing certain types or formats of programming to certain subscribers or classes of subscribers. Subscriber CPE may possess an MPEG 4 decoder for example but programs rendered in MPEG 4 encoding would not be made available to such subscribers unless they met certain criteria e.g. premium subscription etc. . Similarly if the subscriber did not possess a required codec CA keys or network interface the download of this missing component could be controlled to only subscribers meeting certain criteria.

Another rule might impose a moratorium or restrictions on upstream profile messages e.g. SSP from the CPE during conditions of very heavy loading e.g. until a certain minimum threshold of available bandwidth is present thereby avoiding contention for bandwidth resources with premium services. Similarly the profile and program processing could be dynamically shifted to the CPE under such circumstances so as distribute the processing load and hence upstream messaging bandwidth consumed to the CPE as previously discussed herein.

Yet another rule might impose restrictions on establishing or allocating new physical channels QAMs to the subscriber channel requests based on CPE profile data e.g. the presence of a certain required codec CA etc. . As previously discussed bandwidth QAM resource allocation and other relevant network considerations may be used as a basis of implementing or modifying user program requests in a broadcast switched network. For example where a subscriber has both high bandwidth and low bandwidth codecs available on their CPE and they request the high bandwidth variant of a given program QAM resource allocation within the network can be evaluated and the user s selection modified to implement the lower bandwidth program in cases where QAM loading to that hub is high. This process can also be made dynamic if desired such as where QAM loading and similar parameters can be continuously or periodically re evaluated and the operation of the network including which program stream is delivered to a subscriber altered accordingly. For example when sufficient bandwidth is again present the subscriber of the previous example may be switched over to a program stream associated with the higher bandwidth codec.

In another aspect of the invention business methods based on the foregoing profiling analysis and selection functions are disclosed. In one such method a vendor of a particular codec may want to advertise to subscribers the enhancements afforded by use of their codec i.e. the content they are missing because they do not have the vendor s codec installed on their CPE or client device . The MSO may also enter into a relationship with the codec etc. vendor to provide the codec either via the MSO network or an alternate channel e.g. Internet download .

Furthermore proprietary icons or symbols may be used on the available program listing e.g. EPG to indicate certain capabilities or compatibility for certain content. Hence the subscriber can instantly know that a given program is encoded with a given codec for example somewhat akin to the well known use of proprietary microprocessor logos on the outside and packaging of PCs to indicate that a certain type of microprocessor is used. This association provides tangible benefits to the content provider and MSO as well as the codec provider .

Many other approaches and combinations of various operational and business paradigms are envisaged consistent with the invention as will be recognized by those of ordinary skill when provided this disclosure.

Thus methods and apparatus for selecting digital technology for programming and data delivery has been described. Many other permutations of the foregoing system components and communication methods may also be used consistent with the present invention as will be recognized by those of ordinary skill in the field.

It will be recognized that while certain aspects of the invention are described in terms of a specific sequence of steps of a method these descriptions are only illustrative of the broader methods of the invention and may be modified as required by the particular application. Certain steps may be rendered unnecessary or optional under certain circumstances. Additionally certain steps or functionality may be added to the disclosed embodiments or the order of performance of two or more steps permuted. All such variations are considered to be encompassed within the invention disclosed and claimed herein.

While the above detailed description has shown described and pointed out novel features of the invention as applied to various embodiments it will be understood that various omissions substitutions and changes in the form and details of the device or process illustrated may be made by those skilled in the art without departing from the invention. The foregoing description is of the best mode presently contemplated of carrying out the invention. This description is in no way meant to be limiting but rather should be taken as illustrative of the general principles of the invention. The scope of the invention should be determined with reference to the claims.

