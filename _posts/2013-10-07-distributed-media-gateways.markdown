---

title: Distributed media gateways
abstract: A method performed in a call manager, the method comprising receiving a registration message from a media gateway in a plurality of media gateways, wherein the registration message indicates the media processing resources available at the media gateway and the amount of media processing resources in use, sending a message to each of the other media gateways in the plurality of media gateways, wherein each of the messages indicates an amount of available media processing resources in the media gateway, and sending at least one message to the media gateway, wherein the at least one message indicates an amount of available media processing resources in each of the other media gateways in the plurality of media gateways.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09154528&OS=09154528&RS=09154528
owner: Futurewei Technologies, Inc.
number: 09154528
owner_city: Plano
owner_country: US
publication_date: 20131007
---
Video conferencing may require a substantial amount of data to be streamed or otherwise communicated across communications networks. Media gateways may be employed in such networks to transcode media streams between different telecommunication systems. A conventional system may utilize centralized media gateway architecture in which traffic across a network may be concentrated through one gateway. For example a multi point control unit MCU may be used to bridge video conferencing connections wherein conference streams may be distributed to multiple endpoints over an internet protocol IP network. An MCU may also apply media processing techniques such as digital signal processing to perform compression decompression and encoding decoding of video or audio streams.

However the centralized approach of existing gateways may be limited in that a video conference may only use media processing resources local to an MCU. Media processing resources may not be shared across networks with a central gateway and there may be no local resources available for remote endpoints. In order to send traffic from an endpoint in a conference an MCU may also be required to directly send a copy of the data to all of the other endpoints over an IP network. Furthermore this may increase traffic in a bandwidth limited environment such as a wide area network WAN wherein multiple computer networking architectures transmit data over broad ranges of distances. Therefore there is a need to enhance video conferencing architecture in order to accommodate a greater number of users in a bandwidth restricted network while maintaining quality of service.

In one embodiment the disclosure includes a method performed in a call manager the method comprising receiving a registration message from a media gateway in a plurality of media gateways wherein the registration message indicates the media processing resources available at the media gateway and the amount of media processing resources in use sending a message to each of the other media gateways in the plurality of media gateways wherein each of the messages indicates an amount of available media processing resources in the media gateway and sending at least one message to the media gateway wherein the at least one message indicates an amount of available media processing resources in each of the other media gateways in the plurality of media gateways.

In another embodiment the disclosure includes a method performed in a call manager the method comprising sending a message to a plurality of media gateways wherein the message comprises a request to transmit a ping message from the corresponding media gateway to an endpoint receiving a second message from each of the plurality of media gateways wherein each of the second messages comprises a distance between the corresponding media gateway and the endpoint and wherein the distance between two nodes is measured as the number of hops between the two nodes and sorting the plurality of gateways according to the distance between the corresponding media gateway and the endpoint to generate a list of media gateways for the endpoint.

In yet another embodiment the disclosure includes a media gateway comprising a transceiver configured to receive at least one message from a call manager wherein the at least one message requests that the media gateway establish a communications link with a second media gateway wherein the second media gateway is responsible for an endpoint wherein the request indicates a codec characteristic for use on the communications link and establish the communications link and a media processor comprising the codec characteristic coupled to the transceiver and configured to communicate over the communications link using the transceiver.

These and other features will be more clearly understood from the following detailed description taken in conjunction with the accompanying drawings and claims.

It should be understood at the outset that although an illustrative implementation of one or more embodiments are provided below the disclosed systems and or methods may be implemented using any number of techniques whether currently known or in existence. The disclosure should in no way be limited to the illustrative implementations drawings and techniques illustrated below including the exemplary designs and implementations illustrated and described herein but may be modified within the scope of the appended claims along with their full scope of equivalents.

Disclosed herein are systems apparatuses methods and computer program products related to distributed media gateway architectures. Distributed media gateway architectures improve upon conventional centralized gateway architectures to support efficient communication e.g. video conferencing over bandwidth restricted networks. In a distributed architecture there may be a plurality of media gateways each of which may be responsible for different communication endpoints. In such an architecture traffic from endpoints may be aggregated in a local media gateway and multicast to other media gateways for relay to associated endpoints instead of multicasting directly to all other endpoints. In this manner traffic in the interconnection network may be reduced and media processing resources e.g. digital signal processing resources devoted to transcoding may be distributed over multiple gateways so that a greater number of endpoints may be serviced than in an architecture with a centralized media gateway.

The endpoints may be video conferencing systems wherein users may initiate or receive an audio and or video stream in a conference call. Multiple endpoints may be connected to one of the switches as illustrated by the connection of endpoints to switch . Switches may be used in packet switching to transmit traffic between one of the media gateways to different endpoints . Thus each of the switches may be coupled to one of the media gateways . For example switch may be connected to media gateway and so forth.

Media gateways may conduct transcoding and media processing of the audio and video streams in a conference wherein the connected endpoint devices may employ different formats and coding. Each of the media gateways may be employed in terms of distance and availability to specific endpoints . That is the media gateway that is of closest distance to an endpoint may be selected for use if the gateway is available. Distance between two nodes may be measured as the number of hops between the two nodes. If the closest resource is unavailable then the endpoint may use a remote resource in the network. For example endpoint may employ gateway while endpoint may employ gateway if these resources are available. However if gateway is unavailable then endpoints and may both select gateway for use. A media gateway may not necessarily have to be connected locally to each endpoint in a network. For example as shown in endpoint is not connected locally to a gateway. In this case one of the media gateways may be selected for endpoint . Thus distributed resources in a network may be shared in order to accommodate all the parties that desire to participate in a conference.

In an embodiment the endpoints and switches associated with each of the media gateways may be referred to as a branch of a network. For example there may be three branches shown in for illustrative purposes however any number of branches may be used in an architecture. Multiple media gateways may be further grouped e.g. in groups of ten in different branch offices to share media processing resources. Each of the branch offices may have a specific number of endpoints joining the same conference. A small office may not have its own media gateway wherein endpoints at an office may need to utilize an available gateway.

A call manager such as call manager may be employed in order to select an appropriate media gateway for an endpoint . The call manager may comprise information e.g. regarding media processing resources and endpoint distances in order to match a media gateway to an endpoint using the information. When an endpoint is initially registered the call manager may create a sorted gateway list for the endpoint based on distances between the endpoint and gateway resources. When a call comes in the call manager may then allocate the nearest available resource to the endpoint in order to conduct transcoding and media processing of the incoming and outgoing streams.

The functionality of a distributed media gateway architecture such as the architecture may not depend on the presence of network wide features such as multimedia networks. A multimedia network may comprise sending and receiving audio and video streams for specific applications and may optimize traffic among gateways in order to reduce traffic from the perspective of the endpoints . If an IP network has enabled multimedia support this feature may help distributed gateways further improve performance. For example multimedia networks may provide significant bandwidth and metrics for finding local gateways efficiently. They may also reserve bandwidth and provide information about available bandwidths in order to effectively support multicast and reduce traffic further among gateways . However multimedia support may not be essential and the underlying issues with centralized media gateways may still exist with or without multimedia networks.

Suppose that a network uses a single media gateway instead of multiple media gateways as show in . Such a network may be referred to as a conventional network or system. A data stream from an endpoint may be received by the media gateway and then multicast to all the remaining endpoints. If there are N endpoints where N is an integer greater than one a data stream or traffic from a first endpoint would be multicast to the remaining N 1 endpoints resulting in N 1 streams in the network.

In contrast in a distributed media gateway architecture traffic from one or more endpoints may be communicated to a first gateway and the traffic from the first gateway may be forwarded to other gateways before being distributed by those gateways to other endpoints. A local gateway for an endpoint is the gateway assigned to that endpoint through which communication with other endpoints remote to the endpoint takes place. For example referring to media gateway is a local gateway for endpoints whereas media gateway is a remote gateway . In a distributed media gateway architecture a data stream from an endpoint may not be directly multicast to remote endpoints by a local gateway. For example referring to traffic from local endpoints may first be aggregated at a local gateway and then sent to a remote gateway such as gateway . The remote gateway may then send a copy of the data to its local endpoints . Aggregating traffic may reduce traffic in a network as compared with the use of a single centralized media gateway and the use of multiple gateways may allow sharing of distributed media processing resources. Sharing resources may enable the same conference to use DSPs across multiple gateways. Additionally media processing resources may be selected for use based on proximity to the endpoints of interest. By using local resources there may be less delay and jitter as well as an increase in bandwidth for a conference.

There may be various functions implemented by a media gateway in a distributed media gateway architecture such as the architecture . First referring to as an illustrative example the media processing resources may be shared among media gateways wherein the media gateways and the call manager may work together to facilitate coordination of media processing resources. In order to share resources the call manager may support registration of a plurality of media gateways . When a gateway e.g. is initially booted registration messages may be sent to the call manager so that the call manager may record the status of the DSP resource for that particular gateway . The registration messages may be based on existing protocols such as Session Initiation Protocol SIP and may comprise information about the capacity and usage of the media processing resource for media gateway . The call manager may send messages to the other registered gateways and regarding the availability of the media processing resource of the gateway that has recently joined. The call manager may then send messages to the recently added gateway regarding the availability of media processing resources of the other registered gateways and . Essentially each newly registered gateway may have knowledge of the media processing resources of the other registered gateways . The gateway may know how to address the call manager when it boots up which may be part of the configuration.

In order to have enough media processing resources accessible to support the total number of users in a conference profiles may be created to specify the availability and capacity of resources. There may be two types of profile configurations static and dynamic. In a static media processing profile configuration resources may be allocated statically depending on availability and current status. In this configuration type a user may create a profile on a gateway such as gateways and statically specify the amount of local and remote media processing resources allocated based on the expected size of the conference. The gateway may send messages to inform the call manager of the resources status update while the call manager may send messages to inform the other gateways of the resources status update. The media processing allocation regarding the profile among gateways may not be changed in a static configuration. In a dynamic media processing profile configuration resources may be allocated in spite of the availability of local or remote gateways . In this configuration type a user may create a profile on a gateway regarding media processing resource allocations during a conference. The gateway such as gateway may send messages to inform the call manager of the resources status update and the call manager may send messages to inform the other gateways of the resources status update. When users begin to join a conference the media processing resources may be allocated dynamically based on the expected size of the conference. The dynamic configuration may enable a user to make a decision on which gateway s DSPs to use during a conference as opposed to the static configuration wherein changes may not be made during a conference even if gateways are congested.

Once a media processing profile has been configured local resources for allocation may be found and employed in collaboration with the endpoints . Resources may be selected according to distance between an endpoint and a gateway which may be measured in terms of number of hops. The gateways may be grouped together at specific branches to allow sharing of media processing resources. When an endpoint is registered to a call manager the call manager may send a message to each of the plurality of gateways requesting the gateways to ping one or more endpoints or use traceroute to one or more endpoints . After receiving the ping message each of the gateways may determine the distance between itself and the endpoint s of interest. The gateways may then each send messages containing the distance information to the call manager . By using suitable options with ping and traceroute the number of hops that a packet traverses from source to destination can be obtained. In implementation this information can be obtained by creating an application programming interface or getting from existing network services.

From this information the call manager may sort the gateways in terms of distance from the endpoints and resource availability. Resource availability may be measured by metrics such as the number of sessions the number of users or the number of voice or video transcodings that a gateway can support or a number of DSP instructions per unit time e.g. number of millions of instructions per second MIPS available at the gateway. These metrics may help quantify media processing capability as well as availability. Once the list of gateways has been sorted by the call manager the first gateway in the sorted list may be the local resource for the registered endpoint of interest. If one of the endpoints is a mobile device it may be re registered upon moving to a new location. Thus the call manager may repeat the aforementioned steps of determining and sorting distances and resource availability in order to update the mobile endpoint s local resource accordingly.

Once the local resource is determined the endpoint may employ a gateway by sending a request to the call manager . The call manager may find the closest gateway by looking at the sorted gateway list specific to the endpoint. The call manager may then update the status of the resource to show that the resource is being utilized by the endpoint. Messages may be sent to all of the gateways in the group regarding this usage update. Subsequently real time Transport Protocol RTP sessions may be set up between the endpoint and the selected gateway for video conferencing in real time.

In an embodiment suppose there are two media gateways e.g. and communicating in a conference with each other wherein there may be connected endpoints and behind each gateway and respectively. When a new endpoint from another office or branch joins the conference a corresponding new gateway may be selected as a local resource based on the number of hops the availability of resources or some combination of the two. The call manager may then send messages to ask the gateways already involved in the conference to take the following actions. An IP trunk e.g. a 2 way RTP session between the newly added gateway and each gateway already in use may be created. Additionally a codec characteristic and a media processor with the codec characteristic e.g. a codec or encoder decoder may be communicatively coupled on each side of the IP trunk connecting each pair of gateways and . The codec characteristic may be any transrating or transcoding parameters such as input and output video resolution and frame rate input and output audio bit rate or input and output coding type. In other words a media processor may receive an input media stream and produce an output media stream by transrating or transcoding the input media stream to produce an output media stream. Transrating is understood by a person of ordinary skill in the art to refer to the conversion of one type of encoding to another and transrating is understood by a person of ordinary skill in the art to refer to the conversion of one bit rate to another without necessarily changing the encoding format. There may be media streams produced by each of the endpoints and processed and transmitted by the media gateway . Likewise there may be media streams intended for each of the endpoints and received by media gateway from another media gateway. A media processor at gateway may be configured to communicate with gateway via a transmitter and the same media processor or another media processor may be configured to communicate with gateway via a transmitter . The media processor may be specified by users based on predefined rules or determined by Medianet features if bandwidth is available.

During a video conference there may be a significant amount of media traffic between endpoints and gateways . Traffic from local endpoints may be aggregated at a local gateway. Referring to as an example there may be a plurality of endpoints connected to multiple media gateways in a network and one of the endpoints such as endpoint may need to send a packet to other endpoints at remote sites during a conference. The packet may first be sent to the local gateway . At the local site the packet may be decoded and encoded by a media processor used at the IP trunk between the local gateway and the other remote gateways . The packet may then be sent to each remote gateway through the IP trunk. Each remote gateway may then conduct replication and distribution of the packet to its local endpoints wherein a copy of the packet may be forwarded to each endpoint of interest after decoding encoding as required. As a result a copy of the packet may be sent to each involved gateway rather than forwarding the copies to each involved endpoint over the IP network in order to reduce the amount of traffic.

Next the call manager may receive a call request from an endpoint in block . In block the call manager may then send a message to the plurality of media gateways wherein the message comprises a request to transmit a ping message from each corresponding media gateway to the endpoint. At block the call manager may receive a second message from each of the plurality of media gateways. The message may comprise distances between the corresponding media gateway and the endpoint wherein the distances may be measured as the number of hops. In block the call manager may then sort the plurality of gateways according to the distance between the corresponding media gateway and the endpoint in order to generate a list of media gateways for the endpoint. The call manager may next select a media gateway from the list of media gateways for use by the endpoint in block based on the distance from the selected media gateway to the endpoint. In block the call manager may send a status message to the remaining media gateways in the plurality of media gateways indicating that the selected media gateway is associated with the endpoint. Block may alternatively be performed after block in which case the decision as to which media gateway should be used locally by the endpoint is made prior to receiving the call request.

The secondary storage is typically comprised of one or more disk drives or tape drives and is used for non volatile storage of data and as an over flow data storage device if the RAM is not large enough to hold all working data. The secondary storage may be used to store programs that are loaded into the RAM when such programs are selected for execution. The ROM is used to store instructions and perhaps data that are read during program execution. The ROM is a non volatile memory device that typically has a small memory capacity relative to the larger memory capacity of the secondary storage . The RAM is used to store volatile data and perhaps to store instructions. Access to both the ROM and the RAM is typically faster than to the secondary storage .

The transmitter receiver also referred to as a transceiver may serve as an output and or input device of the call manager . For example if the transmitter receiver is acting as a transmitter it may transmit data out of the call manager . If the transmitter receiver is acting as a receiver it may receive data into the call manager . Further the transmitter receiver may include one or more optical transmitters one or more optical receivers one or more electrical transmitters and or one or more electrical receivers. The transmitter receiver may take the form of modems modem banks Ethernet cards universal serial bus USB interface cards serial interfaces token ring cards fiber distributed data interface FDDI cards and or other well known network devices. The transmitter receiver may enable the processor to communicate with a media gateway directly or via an Internet or one or more intranets. The I O devices may be optional or may be detachable from the rest of the call manager . The I O devices may include a video monitor liquid crystal display LCD touch screen display or other type of display. The I O devices may also include one or more keyboards mice or track balls or other well known input devices.

It is understood that by programming and or loading executable instructions onto the media gateway and or the call manager at least one of the processor the processor the memory the secondary storage the RAM and the ROM are changed transforming the media gateway and or the call manager in part into a particular machine or apparatus having the functionality taught by the present disclosure. For the media gateway the executable instructions may be stored on the memory and loaded into the processor for execution. For the call manager the executable instructions may be stored on the secondary storage the ROM and or the RAM and loaded into the processor for execution. It is fundamental to the electrical engineering and software engineering arts that functionality that can be implemented by loading executable software into a computer can be converted to a hardware implementation by well known design rules. Decisions between implementing a concept in software versus hardware typically hinge on considerations of stability of the design and numbers of units to be produced rather than any issues involved in translating from the software domain to the hardware domain. Generally a design that is still subject to frequent change may be preferred to be implemented in software because re spinning a hardware implementation is more expensive than re spinning a software design. Generally a design that is stable that will be produced in large volume may be preferred to be implemented in hardware for example in an ASIC because for large production runs the hardware implementation may be less expensive than the software implementation. Often a design may be developed and tested in a software form and later transformed by well known design rules to an equivalent hardware implementation in an application specific integrated circuit that hardwires the instructions of the software. In the same manner as a machine controlled by a new ASIC is a particular machine or apparatus likewise a computer that has been programmed and or loaded with executable instructions may be viewed as a particular machine or apparatus.

At least one embodiment is disclosed and variations combinations and or modifications of the embodiment s and or features of the embodiment s made by a person having ordinary skill in the art are within the scope of the disclosure. Alternative embodiments that result from combining integrating and or omitting features of the embodiment s are also within the scope of the disclosure. Where numerical ranges or limitations are expressly stated such express ranges or limitations may be understood to include iterative ranges or limitations of like magnitude falling within the expressly stated ranges or limitations e.g. from about 1 to about 10 includes 2 3 4 etc. greater than 0.10 includes 0.11 0.12 0.13 etc. . For example whenever a numerical range with a lower limit R and an upper limit R is disclosed any number falling within the range is specifically disclosed. In particular the following numbers within the range are specifically disclosed R R k R R wherein k is a variable ranging from 1 percent to 100 percent with a 1 percent increment i.e. k is 1 percent 2 percent 3 percent 4 percent 5 percent . . . 50 percent 51 percent 52 percent . . . 95 percent 96 percent 97 percent 98 percent 99 percent or 100 percent. Moreover any numerical range defined by two R numbers as defined in the above is also specifically disclosed. The use of the term about means 10 of the subsequent number unless otherwise stated. Use of the term optionally with respect to any element of a claim means that the element is required or alternatively the element is not required both alternatives being within the scope of the claim. Use of broader terms such as comprises includes and having may be understood to provide support for narrower terms such as consisting of consisting essentially of and comprised substantially of. Accordingly the scope of protection is not limited by the description set out above but is defined by the claims that follow that scope including all equivalents of the subject matter of the claims. Each and every claim is incorporated as further disclosure into the specification and the claims are embodiment s of the present disclosure. The discussion of a reference in the disclosure is not an admission that it is prior art especially any reference that has a publication date after the priority date of this application. The disclosure of all patents patent applications and publications cited in the disclosure are hereby incorporated by reference to the extent that they provide exemplary procedural or other details supplementary to the disclosure.

While several embodiments have been provided in the present disclosure it may be understood that the disclosed systems and methods might be embodied in many other specific forms without departing from the spirit or scope of the present disclosure. The present examples are to be considered as illustrative and not restrictive and the intention is not to be limited to the details given herein. For example the various elements or components may be combined or integrated in another system or certain features may be omitted or not implemented.

In addition techniques systems subsystems and methods described and illustrated in the various embodiments as discrete or separate may be combined or integrated with other systems modules techniques or methods without departing from the scope of the present disclosure. Other items shown or discussed as coupled or directly coupled or communicating with each other may be indirectly coupled or communicating through some interface device or intermediate component whether electrically mechanically or otherwise. Other examples of changes substitutions and alterations are ascertainable by one skilled in the art and may be made without departing from the spirit and scope disclosed herein.

