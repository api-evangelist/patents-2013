---

title: System and method for location based exchanges of data facilitating distributed locational applications
abstract: Provided is a distributed system and method for enabling new and useful location dependent features and functionality to mobile data processing systems. Mobile data processing systems interact with each other as peers in communications and interoperability. A mobile data processing system may dynamically take on roles, depending on the environment and capabilities available at a particular time. Reference whereabouts data is appropriately shared between mobile data processing systems to carry out automatic location techniques ensuring mobile data processing systems are kept up to date with their own whereabouts and whereabouts of others, regardless of the freely moving travels of any of the mobile data processing systems involved, and the location technologies that may or may not be available when needed. A confidence is associated to whereabouts data shared for facilitating selection of the best candidate data used in determining new whereabouts information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08761804&OS=08761804&RS=08761804
owner: 
number: 08761804
owner_city: 
owner_country: 
publication_date: 20130923
---
This application is a continuation of application Ser. No. 12 077 041 filed Mar. 14 2008 and entitled System and Method for Location Based Exchanges of Data Facilitating Distributed Locational Applications . This application contains an identical specification to Ser. No. 12 077 041 except for the abstract claims and minor modifications resulting from a Preliminary Amendment filed Nov. 17 2008 and a Preliminary Amendment B filed Feb. 10 2009.

The present disclosure relates generally to location based services for mobile data processing systems and more particularly to location based exchanges of data between distributed mobile data processing systems for locational applications. A common connected service is not required for location based functionality and features. Location based exchanges of data between distributed mobile data processing systems enable location based features and functionality in a peer to peer manner.

The internet has exploded with new service offerings. Websites yahoo.com google.com ebay.com amazon.com and iTunes.com have demonstrated well the ability to provide valuable services to a large dispersed geographic audience through the internet ebay yahoo google amazon and iTunes Apple are trademarks of the respective companies . Thousands of different types of web services are available for many kinds of functionality. Advantages of having a service as the intermediary point between clients users and systems and their associated services includes centralized processing centralized maintaining of data for example to have an all knowing database for scope of services provided having a supervisory point of control providing an administrator with access to data maintained by users of the web service and other advantages associated with centralized control. The advantages are analogous to those provided by the traditional mainframe computer to its clients wherein the mainframe owns all resources data processing and centralized control for all users and systems clients that access its services. However as computers declined in price and adequate processing power was brought to more distributed systems such as Open Systems i.e. Windows UNIX Linux and Mac environments the mainframe was no longer necessary for many of the daily computing tasks. In fact adequate processing power is incorporated in highly mobile devices various handheld mobile data processing systems and other mobile data processing systems. Technology continues to drive improved processing power and data storage capabilities in less physical space of a device. Just as Open Systems took much of the load of computing off of mainframe computers so to can mobile data processing systems offload tasks usually performed by connected web services. As mobile data processing systems are more capable there is no need for a service to middleman interactions possible between them.

While a centralized service has its advantages there are also disadvantages. A service becomes a clearinghouse for all web service transactions. Regardless of the number of threads of processing spread out over hardware and processor platforms the web service itself can become a bottleneck causing poor performance for timely response and can cause a large amount of data that must be kept for all connected users and or systems. Even large web services mentioned above suffer from performance and maintenance overhead. A web service response will likely never be fast enough. Additionally archives must be kept to ensure recovery in the event of a disaster because the service houses all data for its operations. Archives also require storage processing power planning and maintenance. A significantly large and costly data center is necessary to accommodate millions of users and or systems to connect to the service. There is a tremendous amount of overhead in providing such a service. Data center processing power data capacity data transmission bandwidth and speed infrastructure entities and various performance considerations are quite costly. Costs include real estate required utility bills for electricity and cooling system maintenance personnel to operate a successful business with service s etc. A method is needed to prevent large data center costs while eliminating performance issues for features sought. It is inevitable that as users are hungry for more features and functionality on their mobile data processing systems processing will be moved closer to the device for optimal performance and infrastructure cost savings.

Service delivered location dependent content was disclosed in U.S. Pat. Nos. 6 456 234 6 731 238 7 187 997 Johnson . Anonymous location based services was disclosed in U.S. PTO Publication 2006 0022048 Johnson . The Johnson patents and published application operate as most web services do in that the clients connecting to the service benefit from the service by having some connectivity to the service. U.S. Publication 2006 0022048 Johnson could cause large numbers of users to inundate the service with device heartbeats and data to maintain depending on the configurations made. While this may be of little concern to a company that has successfully deployed substantially large web service resources it may be of great concern to other more frugal companies. A method is needed for enabling location dependent features and functionality without the burden of requiring a service.

Users are skeptical about their privacy as internet services proliferate. A service by its very nature typically holds information for a user maintained in a centralized service database. The user s preferences credential information permissions customizations billing information surfing habits and other conceivable user configurations and activity monitoring can be housed by the service at the service. Company insiders as well as outside attackers may get access. Most people are concerned with preventing personal information of any type being kept in a centralized database which may potentially become compromised from a security standpoint. Location based services are of even more concern in particular when the locations of the user are to be known to a centralized service. A method and system is needed for making users comfortable with knowing that their personal information is at less risk of being compromised.

A reasonable requirement is to push intelligence out to the mobile data processing systems themselves for example in knowing their own locations and perhaps the locations of other nearby mobile data processing systems. Mobile data processing systems can intelligently handle many of their own application requirements without depending on some remote service. Just as two people in a business organization should not need a manager to speak to each other no two mobile data processing systems should require a service middleman for useful location dependent features and functionality. The knowing of its own location should not be the end of social interaction implementation local to the mobile data processing systems but rather the starting place for a large number of useful distributed local applications that do not require a service.

Different users use different types of Mobile data processing Systems MSs which are also called mobile devices laptops tablet computers Personal Computers PCs Personal Digital Assistants PDAs cell phones automobile dashboard mounted data processing systems shopping cart mounted data processing systems mobile vehicle or apparatus mounted data processing systems Personal Navigational Devices PNDs iPhones iPhone is a trademark of Apple Inc. various handheld mobile data processing systems etc. MSs move freely in the environment and are unpredictably moveable i.e. can be moved anywhere anytime . Many of these Mobile data processing Systems MSs do not have capability of being automatically located or are not using a service for being automatically located. Conventional methods use directly relative stationary references such as satellites antennas etc. to locate MSs. Stationary references are expensive to deploy and risk obsolescence as new technologies are introduced to the marketplace. Stationary references have finite scope of support for locating MSs.

While the United States E911 mandate for cellular devices documents requirements for automatic location of a Mobile data processing System MS such as a cell phone the mandate does not necessarily promote real time location and tracking of the MSs nor does it define architecture for exploiting Location Based Services LBS . We are in an era where Location Based Services LBS and location dependent features and functionality are among the most promising technologies in the world. Automatic locating of every Mobile data processing System MS is an evolutionary trend. A method is needed to shorten the length of time for automatically locating every MS. Such a goal can be costly using prior art technologies such as GPS Global Positioning System radio wave triangulation coming within range to a known located sensor or the like. Complex system infrastructure or added hardware costs to the MSs themselves make such ventures costly and time constrained by schedules and costs involved in engineering construction and deployment.

A method is needed for enabling users to get location dependent features and functionality through having their mobile locations known regardless of whether or not their MS is equipped for being located. Also new and modern location dependent features and functionality can be provided to a MS unencumbered by a connected service.

LBS Location Based Services is a term which has gained in popularity over the years as MSs incorporate various location capability. The word Services in that terminology plays a major role in location based features and functionality involving interaction between two or more users. This disclosure introduces a new terminology system and method referred to as Location Based eXchanges LBX . LBX is an acronym used interchangeably contextually throughout this disclosure for the singular term Location Based Exchange and for the plural term Location Based Exchanges much the same way LBS is used interchangeably contextually for the single term Location Based Service and for the plural term Location Based Services . LBX describes leveraging the distributed nature of connectivity between MSs in lieu of leveraging a common centralized service nature of connectivity between MSs. The line can become blurred between LBS and LBX since the same or similar features and functionality are provided and in some cases strengths from both may be used. The underlying architectural shift differentiates LBX from LBS for depending less on centralized services and more on distributed interactions between MSs. LBX provide server free and server less location dependent features and functionality.

Disclosed are many different aspects to LBX starting with the foundation requirement for each participating MS to know at some point in time their own whereabouts. LBX is enabled when an MS knows its own whereabouts. It is therefore a goal to first make as many MSs know their own whereabouts as possible. When two or more MSs know their own whereabouts LBX enables distributed locational applications whereby a server is not required to middleman social interactions between the MSs. The MSs interact as peers. LBX disclosed include purely peer to peer interactions peer to peer interactions for routing services peer to peer interactions for delivering distributed services and peer to peer interactions for location dependent features and functionality. One embodiment of an LBX enabled MS is referred to as an IbxPhone .

It is an advantage herein to have no centralized service governing location based features and functionality among MSs. Avoiding a centralized service prevents performance issues infrastructure costs and solves many of the issues described above. No centralized service also prevents a user s information from being kept in one accessible place. LBS contain centralized data that is personal in nature to its users. This is a security concern. Having information for all users in one place increases the likelihood that a disaster to the data will affect more than a single user. LBX spreads data out across participating systems so that a disaster affecting one user does not affect any other user.

It is an advantage herein for enabling useful distributed applications without the necessity of having a service and without the necessity of users and or systems registering with a service. MSs interact as peers in preferred embodiments rather than as clients to a common service e.g. internet connected web service .

It is an advantage herein for locating as many MSs as possible in a wireless network and without additional deployment costs on the MSs or the network. Conventional locating capability includes GPS Global Positioning System using stationary orbiting satellites improved forms of GPS for example AGPS Adjusted GPS and DGPS Differential GPS using stationary located ground stations wireless communications to stationary located cell tower base stations TDOA Time Difference of Arrival or AOA Angle of Arrival triangulation using stationary located antennas presence detection in vicinity of a stationary located antenna presence detection at a wired connectivity stationary network location or other conventional locating systems and methods. Mobile data processing systems referred to as Indirectly Located Mobile data processing systems ILMs are automatically located using automatically detected locations of Directly Located Mobile data processing systems DLMs and or automatically detected locations of other ILMs. ILMs are provided with the ability to participate in the same LBS or LBX as a DLM Directly Located Mobile data processing system . DLMs are located using conventional locating capability mentioned above. DLMs provide reference locations for automatically locating ILMs regardless of where any one is currently located. DLMs and ILMs can be highly mobile for example when in use by a user. There are a variety of novel methods for automatically locating ILMs for example triangulating an ILM Indirectly Located Mobile data processing system location using a plurality of DLMs detecting the ILM being within the vicinity of at least one DLM triangulating an ILM location using a plurality of other ILMs detecting the ILM being within the vicinity of at least one other ILM triangulating an ILM location using a mixed set of DLM s and ILM s determining the ILM location from heterogeneously located DLMs and or ILMs and other novel methods.

MSs are automatically located without using direct conventional means for being automatically located. The conventional locating capability i.e. conventional locating methods described above is also referred to as direct methods. Conventional methods are direct methods but not all direct methods are conventional. There are new direct techniques disclosed below. Provided herein is an architecture as well as systems and methods for immediately bringing automatic location detection to every MS in the world regardless of whether that MS is equipped for being directly located. MSs without capability of being directly located are located by leveraging the automatically detected locations of MSs that are directly located. This is referred to as being indirectly located. An MS which is directly located is hereinafter referred to as a Directly Located Mobile data processing system DLM . For a plural acronym MSs which are directly located are hereinafter referred to as Directly Located Mobile data processing systems DLMs . MSs without capability of being directly located are located using the automatically detected locations of MSs that have already been located. An MS which is indirectly located is hereinafter referred to as an Indirectly Located Mobile data processing system ILM . For a plural acronym MSs which are indirectly located are hereinafter referred to as Indirectly Located Mobile data processing systems ILMs . A DLM can be located in the following ways 

In one example the mobile locations of several MSs are automatically detected using their local GPS chips. Each is referred to as a DLM. The mobile location of a non locatable MS is triangulated using radio waves between it and three 3 of the GPS equipped DLMs. The MS becomes an ILM upon having its location determined relative the DLMs. ILMs are automatically located using DLMs or other already located ILMs. An ILM can be located in the following ways 

Locating functionality may leverage GPS functionality including but not limited to GPS AGPS Adjusted GPS DGPS Differential GPS or any improved GPS embodiment to achieve higher accuracy using known locations for example ground based reference locations. The NexTel GPS enabled iSeries cell phones provide excellent examples for use as DLMs Nextel is a trademark of Sprint Nextel . Locating functionality may incorporate triangulated locating of the MS for example using a class of Radio Frequency RF wave spectrum cellular WiFi bluetooth etc and may use measurements from different wave spectrums for a single location determination depends on communications interface s available . A MS may have its whereabouts determined using a plurality of wave spectrum classes available to it cellular WiFi bluetooth etc . Locating functionality may include in range proximity detection for detecting the presence of the MS. Wave forms for triangulated locating also include microwaves infrared wave spectrum relative infrared sensors visible light wave spectrum relative light visible light wave sensors ultraviolet wave spectrum relative ultraviolet wave sensors X ray wave spectrum relative X ray wave sensors gamma ray wave spectrum relative gamma ray wave sensors and longwave spectrum below AM relative longwave sensors. While there are certainly more common methods for automatically locating a MS e.g. radio wave triangulation GPS in range proximity detection those skilled in the art recognize there are methods for different wave spectrums being detected measured and used for carrying information between data processing systems.

Kubler et al U.S. PTO publications 2004 0264442 2004 0246940 2004 0228330 2004 0151151 disclosed methods for detecting presence of mobile entities as they come within range of a sensor. In Kubler et al accuracy of the location of the detected MS is not well known so an estimated area of the whereabouts of the MS is enough to accomplish intended functionality for example in warehouse installations. A confidence value of this disclosure associated with Kubler et al tends to be low i.e. not confident with lower values for long range sensors and higher values for short range sensors.

GPS and the abundance of methods for improving GPS accuracy has led to many successful systems for located MSs with high accuracy. Triangulation provides high accuracies for locating MSs. A confidence value of this disclosure associated with GPS and triangulating location methods tends to be high i.e. confident . It is preferred that DLMs use the highest possible accuracy method available so that relative ILMs are well located. Not all DLMs need to use the same location methods. An ILM can be located relative DLMs or other ILMs that each has different locating methodologies utilized.

Another advantage herein is to generically locate MSs using varieties and combinations of different technologies. MSs can be automatically located using direct conventional methods for accuracy to base on the locating of other MSs. MSs can be automatically located using indirect methods. Further it is an advantage to indirectly locate a MS relative heterogeneously located MSs. For example one DLM may be automatically located using GPS. Another DLM may be automatically located using cell tower triangulation. A third DLM may be automatically located using within range proximity. An ILM can be automatically located at a single location or different locations over time relative these three differently located DLMs. The automatically detected location of the ILM may be determined using a form of triangulation relative the three DLMs just discussed even though each DLM had a different direct location method used. In a preferred embodiment industry standard IEEE 802.11 Wi Fi is used to locate triangulate an ILM relative a plurality of DLMs e.g. TDOA in one embodiment . This standard is prolific among more compute trended MSs. Any of the family of 802.11 wave forms such as 802.11a 802.11b 802.11g or any other similar class of wave spectrum can be used and the same spectrum need not be used between a single ILM and multiple DLMs. 802.x used herein generally refers to the many 802.whatever variations.

Another advantage herein is to make use of existing marketplace communications hardware communications software interfaces and communications methods and location methods where possible to accomplish locating an MS relative one or more other MSs. While 802.x is widespread for Wi Fi communications other RF wave forms can be used e.g. cell phone to cell tower communications . In fact any wave spectrum for carrying data applies herein.

Still another advantage is for support of heterogeneous locatable devices. Different people like different types of devices as described above. Complete automation of locating functionality can be provided to a device through local automatic location detection means or by automatic location detection means remote to the device. Also an ILM can be located relative a laptop a cell phone and a PDA i.e. different device types .

Yet another advantage is to prevent the unnecessary storing of large amounts of positioning data for a network of MSs. Keeping positioning data for knowing the whereabouts of all devices can be expensive in terms of storage infrastructure performance backup and disaster recovery. A preferred embodiment simply uses a distributed approach to determining locations of MSs without the overhead of an all knowing database maintained somewhere. Positions of MSs can be determined on the fly without storing information in a master database. However there are embodiments for storing a master database or a subset thereof to configurable storage destinations when it makes sense. A subset can be stored at a MS.

Another advantage includes making use of existing location equipped MSs to expand the network of locatable devices by locating non equipped MSs relative the location of equipped MSs. MSs themselves help increase dimensions of the locatable network of MSs. The locatable network of MSs is referred to as an LN Expanse i.e. Location Network Expanse . An LN Expanse dynamically grows and shrinks based on where MSs are located at a particular time. For example as users travel with their personal MSs the personal MSs themselves define the LN Expanse since the personal MSs are used to locate other MSs. An ILM simply needs location awareness relative located MSs DLMs and or ILMs .

Yet another advantage is a MS interchangeably taking on the role of a DLM or ILM as it travels. MSs are chameleons in this regard in response to location technologies that happen to be available. A MS may be equipped for DLM capability but may be in a location at some time where the capability is inoperable. In these situations the DLM takes on the role of an ILM. When the MS again enters a location where it can be a DLM it automatically takes on the role of the DLM. This is very important in particular for emergency situations. A hiker has a serious accident in the mountains which prevents GPS equipped DLM capability from working. Fortunately the MS automatically takes on the role of an ILM and is located within the vicinity of neighboring nearby MSs. This allows the hiker to communicate his location operate useful locational application functions and features at his MS and enable emergency help that can find him.

It is a further advantage that MS locations be triangulated using any wave forms e.g. RF microwaves infrared visible light ultraviolet X ray gamma ray . X ray and gamma ray applications are special in that such waves are harmful to humans in short periods of times and such applications should be well warranted to use such wave forms. In some medical embodiments micro machines may be deployed within a human body. Such micro machines can be equipped as MSs. Wave spectrums available at the time of deployment can be used by the MSs for determining exact positions when traveling through a body.

It is another advantage to use TDOA Time Difference Of Arrival AOA Angle Of Arrival and Missing Part Triangulation MPT when locating a MS. TDOA uses time information to determine locations for example for distances of sides of a triangle. AOA uses angles of arrival to antennas to geometrically assess where a MS is located by intersecting lines drawn from the antennas with detected angles. MPT is disclosed herein as using combinations of AOA and TDOA to determine a location. Exclusively using all AOA or exclusively using all TDOA is not necessary. MPT can be a direct method for locating MSs.

Yet another advantage is to locate MSs using Assisted Direct Location Technology ADLT . ADLT is disclosed herein as using direct conventional location capability together with indirect location capability to confidently determine the location of a MS.

Still another advantage is to permit manual specification for identifying the location of a MS a DLM . The manual location can then in turn be used to facilitate locating other MSs. A user interface may be used for specification of a DLM location. The user interface can be local or remote to the DLM. Various manual specification methods are disclosed. Manual specification is preferably used with less mobile MSs or existing MSs such as those that use dodgeball.com trademark of Google . The confidence value depends on how the location is specified whether or not it was validated and how it changes when the MS moves after being manually set. Manual specification should have limited scope in an LN expanse unless inaccuracies can be avoided.

Another advantage herein is locating a MS using any of the methodologies above any combinations of the methodologies above and any combinations of direct and or indirect location methods described.

Another advantage is providing synergy between different locating technologies for smooth operations as an MS travels. There are large numbers of methods and combinations of those methods for keeping an MS informed of its whereabouts. Keeping an MS informed of its whereabouts in a timely manner is critical in ensuring LBX operate optimally and for ensuring nearby MSs without certain locating technologies can in turn be located.

It is another advantage for locating an MS with multiple location technologies during its travels and in using the best of breed data from multiple location technologies to infer a MS location confidently. Confidence values are associated with reference location information to ensure an MS using the location information can assess accuracy. A DLM is usually an affirmifier . An affirmifier is an MS with its whereabouts information having high confidence of accuracy and can serve as a reference for other MSs. An ILM can also be an affirmifier provided there is high confidence that the ILM location is known. An MS e.g. ILM may be a pacifier . A pacifier is an MS having location information for its whereabouts with a low confidence for accuracy. While it can serve as a reference to other ILMs it can only do so by contributing a low confidence of accuracy.

It is an advantage to synergistically make use of the large number of locating technologies available to prevent one particular type of technology to dominate others while using the best features of each to assess accurate mobile locations of MSs.

A further advantage is to leverage a data processing system with capability of being located for co locating another data processing system without any capability of being located. For example a driver owns an older model automobile has a useful second data processing system in the automobile without means for being automatically located. The driver also own a cell phone called a first data processing system which does have means for being automatically located. The location of the first data processing system can be shared with the second data processing system for locating the second data processing system. Further still the second data processing system without means for being automatically located is located relative a first set plurality of data processing systems which are not at the same location as the second data processing system. So data processing systems are automatically located relative at least one other data processing which can be automatically located.

Another advantage is a LBX enabled MS includes a service informant component for keeping a supervisory service informed. This prevents an MS from operating in total isolation and prevents an MS from operating in isolation with those MSs that are within its vicinity e.g. within maximum range at some point in time but to also participate when the same MSs are great distances from each other. There are LBX which would fit well into an LBS model but a preferred embodiment chooses to use the LBX model. For example multiple MS users are seeking to carpool to and from a common destination. The service informant component can perform timely updates to a supervisory service for route comparisons between MSs even though periods of information are maintained only at the MSs. For example users find out that they go to the same church with similar schedules or coworkers find out they live nearby and have identical work schedules. The service informant component can keep a service informed of MS whereabouts to facilitate novel LBX applications.

It is a further advantage in leveraging the vast amount of MS WiFi deployment underway in the United States. More widespread WiFi availability enhances the ability for well performing peer to peer types of features and functionality disclosed.

It is a further advantage to prevent unnecessary established connections from interfering with successfully triangulating a MS position. As the MS roams and encounters various wave spectrum signals that is all that is required for determining the MS location. Broadcast signaling contains the necessary location information for automatically locating the MS.

Yet another advantage is to leverage Network Time Protocol NTP for eliminating bidirectional communications in determining Time of Arrival TOA and TDOA Time Difference Of Arrival measurements TDOA as used in the disclosure generally refers to both TOA and TDOA . NTP enables a single unidirectional transmission of data to carry all that is necessary in determining TDOA provided the sending data processing system and the receiving data processing system are NTP synchronized to an adequate granulation of time.

A further advantage herein is to leverage existing usual communications data transmissions for carrying new data that is ignored by existing MS processing but observed by new MS processing for carrying out processing maximizing location functions and features across a large geography. Alternatively new data can be transmitted between systems for the same functionality.

Further features and advantages of the disclosure as well as the structure and operation of various embodiments of the disclosure are described in detail below with reference to the accompanying drawings. In the drawings like reference numbers generally indicate identical functionally similar and or structurally similar elements. The drawing in which an element first appears is indicated by the leftmost digit s in the corresponding reference number except that reference numbers 1 through 99 may be found on the first 4 drawings of . None of the drawings discussions or materials herein is to be interpreted as limiting to a particular embodiment. The broadest interpretation is intended. Other embodiments accomplishing same functionality are within the spirit and scope of this disclosure. It should be understood that information is presented by example and many embodiments exist without departing from the spirit and scope of this disclosure.

With reference now to detail of the drawings the present disclosure is described. Obvious error handling is omitted from the flowcharts in order to focus on the key aspects of the present disclosure. Obvious error handling includes database I O errors field validation errors errors as the result of database table data constraints or unique keys data access errors communications interface errors or packet collision hardware failures checksum validations bit error detections corrections and any other error handling as well is known to those skilled in the relevant art in context of this disclosure. A semicolon may be used in flowchart blocks to represent and separate multiple blocks of processing within a single physical block. This allows simpler flowcharts with less blocks in the drawings by placing multiple blocks of processing description in a single physical block of the flowchart. Flowchart processing is intended to be interpreted in the broadest sense by example and not for limiting methods of accomplishing the same functionality. Preferably field validation in the flowcharts checks for SQL injection attacks communications protocol sniff and hack attacks preventing of spoofing MS addresses syntactical appropriateness and semantics errors where appropriate. Disclosed user interface processing and or screenshots are also preferred embodiment examples that can be implemented in other ways without departing from the spirit and scope of this disclosure. Alternative user interfaces since this disclosure is not to be limiting will use similar mechanisms but may use different mechanisms without departing from the spirit and scope of this disclosure.

Locational terms such as whereabouts location position area destination perimeter radius geofence situational location or any other related two or three dimensional locational term used herein to described position s and or locations and or whereabouts is to be interpreted in the broadest sense. Location field may include an area e.g. on earth a point e.g. on earth or a three dimensional bounds in space. In another example a radius may define a sphere in space rather than a circle in a plane. In some embodiments a planet field forms part of the location e.g. Earth Mars etc as part of field for which other location information e.g. latitude and longitude on Mars also part of field is relative. In some embodiments elevations or altitudes from known locatable point s distances from origin s in the universe etc. can denote where exactly is a point of three dimensional space or three dimensional sphere area or solid is located. That same point can provide a mathematical reference to other points of the solid area region in space. Descriptions for angles pitches rotations etc from some reference point s may be further provided. Three dimensional areas regions include a conical shape cubical shape spherical shape pyramidal shape irregular shapes or any other shape either manipulated with a three dimensional graphic interface or with mathematical model descriptions. Areas regions in space can be occupied by a MS passed through e.g. by a traveler by a MS or referenced through configuration by a MS. In a three dimensional embodiment nearby nearness is determined in terms of three dimensional information for example a spherical radius around one MS intersecting a spherical radius around another MS. In a two dimensional embodiment nearby nearness is determined in terms of two dimensional information for example a circular radius around one MS intersecting a circular radius around another MS. Points can be specified as a point in a x y z plane a point in polar coordinates or the like perhaps the center of a planet e.g. Earth or the Sun some origin in the Universe or any other origin for distinctly locating three dimensional location s positions or whereabouts in space. Elevation e.g. for earth or some other planet etc may be useful to the three dimensional point of origin and or for the three dimensional region in space. A region in space may also be specified with connecting x y z coordinates together to bound the three dimensional region in space. There are many methods for representing a location field without departing from the spirit and scope of this disclosure. MSs for example as carried by users can travel by airplane through three dimensional areas regions in space or travel under the sea through three dimensional regions in space.

Various embodiments of communications between MSs or an MS and service s will share channels e.g. frequencies to communicate depending on when in effect. Sharing a channel will involve carrying recognizable and processable signature to distinguish transmissions for carrying data. Other embodiments of communications between MSs or an MS and service s will use distinct channels to communicate depending on when in effect. The number of channels that can be concurrently listened on and or concurrently transmitted on by a data processing system will affect which embodiments are preferred. The number of usable channels will also affect which embodiments are preferred. This disclosure avoids unnecessary detail in different communication channel embodiments so as to not obfuscate novel material. Independent of various channel embodiments within the scope and spirit of the present disclosure MSs communicate with other MSs in a peer to peer manner in some aspects like automated walkie talkies.

Novel features disclosed herein need not be provided as all or none. Certain features may be isolated in some MS embodiments or may appear as any subset of features and functionality in other embodiments.

LBX character preferably includes at least Peer Interaction Processing PIP code Peer Interaction Processing PIP data self management processing code self management processing data WDR queue send queue receive queue service informant code and LBX history . Peer interaction processing PIP code comprises executable code in software firmware or hardware form for carrying out LBX processing logic of the present disclosure when interacting with another MS. Peer interaction processing PIP data comprises data maintained in any sort of memory of MS for example hardware memory flash memory hard disk memory a removable memory device or any other memory means accessible to MS . PIP data contains intelligence data for driving LBX processing logic of the present disclosure when interacting with other MSs. Self management processing code comprises executable code in software firmware or hardware form for carrying out the local user interface LBX processing logic of the present disclosure. Self management processing data contains intelligence data for driving processing logic of the present disclosure as disclosed for locally maintained LBX features. WDR queue contains Whereabouts Data Records WDRs and is a First In First Out FIFO queue when considering housekeeping for pruning the queue to a reasonable trailing history of inserted entries i.e. remove stale entries . WDR queue is preferably designed with the ability of queue entry retrieval processing similar to Standard Query Language SQL querying wherein one or more entries can be retrieved by querying with a conditional match on any data field s of WDR and returning lists of entries in order by an ascending or descending key on one or any ascending descending ordered list of key fields.

All disclosed queues e.g. and See are implemented with an appropriate thread safe means of queue entry peeking makes copy of sought queue entry without removing discarding retrieval insertion and queue entry field sorted search processing. Queues are understood to have an associated implicit semaphore to ensure appropriate synchronous access to queue data in a multi threaded environment to prevent data corruption and misuse. Such queue interfaces are well known in popular operating systems. In MS operating system environments which do not have an implicit semaphore protected queue scheme queue accesses in the present disclosure flowcharts are to be understood to have a previous request to a queue assigned semaphore lock prior to queue access and a following release of the semaphore lock after queue access. Operating systems without semaphore control may use methods to achieve similar thread safe synchronization functionality. Queue functionality may be accomplished with lists arrays databases e.g. SQL and other methodologies without departing from the spirit and scope of queue descriptions herein.

Queue alternate embodiments may maintain a plurality of WDR queues which segregate WDRs by field s values to facilitate timely processing. WDR queue may be at least two 2 separate queues one for maintaining the MS whereabouts and one for maintaining whereabouts of other MSs. WDR queue may be a single instance WDR in some embodiments which always contains the most current MS whereabouts for use by MS applications may use a sister queue for maintaining WDRs from remote MSs . At least one entry is to be maintained to WDR queue at all times for MS whereabouts.

Send queue Transmit Tx queue is used to send communications data for example as intended for a peer MS within the vicinity e.g. nearby as indicated by maximum range of the MS . Receive queue Receive Rx queue is used to receive communications data for example from peer MSs within the vicinity e.g. nearby as indicated by maximum range of the MS . Queues and may also each comprise a plurality of queues for segregating data thereon to facilitate performance in interfacing to the queues in particular when different queue entry types and or sizes are placed on the queue. A queue interface for sending receiving data to from the MS is optimal in a multi threaded implementation to isolate communications transport layers to processing behind the send receive queue interfaces but alternate embodiments may send receive data directly from a processing thread disclosed herein. Queues and or may be embodied as a purely data form or SQL database maintained at MS in persistent storage memory or any other storage means. In some embodiments queues and are not necessary since other character will already have accessible resources for carrying out some LBX character processing.

Queue embodiments may contain fixed length records varying length records pointers to fixed length records or pointers to varying length records. If pointers are used it is assumed that pointers may be dynamically allocated for record storage on insertions and freed upon record use after discards or retrievals.

As well known to those skilled in the art when a thread sends on a queue in anticipation of a corresponding response there is correlation data in the data sent which is sought in a response received by a thread at queue so the sent data is correlated with the received data. In a preferred embodiment correlation is built using a round robin generated sequence number placed in data for sending along with a unique MS identifier MS ID . If data is not already encrypted in communications the correlation can be encrypted. While the unique MS identifier MS ID may help the MS identify which e.g. wireless data is destined for it correlation helps identify which data at the MS caused the response. Upon receipt of data from a responder at queue correlation processing uses the returned correlation e.g. field to correlate the sent and received data. In preferred embodiments the sequence number is incremented each time prior to use to ensure a unique number otherwise it may be difficult to know which data received is a response to which data was sent in particular when many data packets are sent within seconds. When the sequence number reaches a maximum value e.g. 2 32 1 then it is round robinned to 0 and is incremented from there all over again. This assures proper correlation of data between the MS and responders over time. There are other correlation schemes e.g. signatures random number generation checksum counting bit patterns date time stamp derivatives to accomplish correlation functionality. If send and receive queues of Other Character are used then correlation can be used in a similar manner to correlate a response with a request i.e. a send with a receipt .

There may be good reason to conceal the MS ID when transmitting it wirelessly. In this embodiment the MS ID is a dependable and recognizable derivative e.g. a pseudo MS ID that can be detected in communications traffic by the MS having the pseudo MS ID while concealing the true MS ID. This would conceal the true MS ID from would be hackers sniffing wireless protocol. The derivative can always be reliably the same for simplicity of being recognized by the MS while being difficult to associate to a particular MS. Further still a more protected MS ID from would be hackers that take time to deduce how an MS ID is scrambled can itself be a dynamically changing correlation anticipated in forthcoming communications traffic thereby concealing the real MS ID e.g. phone number or serial number in particular when anticipating traffic in a response yet still useful for directing responses back to the originating MS with the pseudo MS ID e.g. correlation . A MS would know which correlation is anticipated in a response by saving it to local storage for use until it becomes used i.e. correlated in a matching response or becomes stale. In another embodiment a correlation response queue like CR queue can be deployed to correlate responses with requests that contain different correlations for pseudo MS IDs. In all embodiments the MS ID or pseudo MS ID of the present disclosure should enable targeting communications traffic to the MS.

Service informant code comprises executable code in software firmware or hardware form for carrying out of informing a supervisory service. The present disclosure does not require a connected web service but there are features for keeping a service informed with activities of MS LBX. Service informant code can communicate as requested any data or any other data processed at MS .

LBX history contains historical data useful in maintaining at MS and possibly useful for informing a supervisory service through service informant code . LBX History preferably has an associated thread of processing for keeping it pruned to the satisfaction of a user of MS e.g. prefers to keep last 15 days of specified history data and 30 days of another specified history data etc . With a suitable user interface to MS a user may browse manage alter delete or add to LBX History as is relevant to processing described herein. Service informant code may be used to cause sending of an outbound email SMS message outbound data packet or any other outbound communication in accordance with LBX of the MS.

PIP data preferably includes at least permissions charters statistics and a service directory . Permissions are configured to grant permissions to other MS users for interacting the way the user of MS desires for them to interact. Therefore permissions contain permissions granted from the MS user to other MS users. In another embodiment permissions additionally or alternatively contain permissions granted from other MS users to the MS user. Permissions are maintained completely local to the MS . Charters provide LBX behavior conditional expressions for how MSs should interact with MS . Charters are configured by the MS user for other MS users. In another embodiment charters additionally or alternatively are configured by other MS users for the MS user. Some charters expressions depend on permissions . Statistics are maintained at MS for reflecting peer MS to peer MS interactions of interest that occurred at MS . In another embodiment statistics additionally or alternatively reflect peer MS to peer MS interactions that occurred at other MSs preferably depending on permissions . Service informant code may or may not inform a service of statistics maintained. Service directory includes routing entries for how MS will find a sought service or how another MS can find a sought service through MS .

In some embodiments any code e.g. can access manage use alter or discard any data e.g. of any other component in MS . Other embodiments may choose to keep processing of LBX character and other character disjoint from each other. Rectangular component boundaries are logical component representations and do not have to delineate who has access to what. MS also MSs references discussed herein in context for the new and useful features and functionality disclosed is understood to be an MS MSs .

Regardless of the embodiment an MS can communicate with any of its peers in the vicinity using methods described below. Regardless of the embodiment a communication path between any two MSs is understood to be potentially bidirectional but certainly at least unidirectional. The bidirectional path may use one communications method for one direction and a completely different communications method for the other but ultimately each can communicate to each other. When considering that a path comprises two unidirectional communications paths there are N N 1 unidirectional paths for N MSs in a network . For example 10 MSs results in 90 i.e. 10 9 one way paths of communications between all 10 MSs for enabling them to talk to each other. Sharing of the same signaling channels is preferred to minimize the number of MS threads listening on distinct channels. Flowcharts are understood to process at incredibly high processing speeds in particular for timely communications processing.

The data processing system may also include a display device interface for driving a connected display device not shown . The data processing system may further include one or more input peripheral interface s to input devices such as a keyboard keypad Personal Digital Assistant PDA writing implements touch interfaces mouse voice interface or the like. User input user input user events and user actions used interchangeably to the data processing system are inputs accepted by the input peripheral interface s . The data processing system may still further include one or more output peripheral interface s to output devices such as a printer facsimile device or the like. Output peripherals may also be available via an appropriate interface.

Data processing system will include a communications interface s for communicating to another data processing system via analog signal waves digital signal waves infrared proximity copper wire optical fiber or other wave spectrums described herein. A MS may have multiple communications interfaces e.g. cellular connectivity 802.x etc . Other data processing system may be an MS. Other data processing system may be a service. Other data processing system is a service data processing system when MS communicates to other data processing system by way of service informant code . In any case the MS and other data processing system are said to be interoperating when communicating.

Data processing system programs also called control logic may be completely inherent in the processor s being a customized semiconductor or may be stored in main memory for execution by processor s as the result of a read only memory ROM load not shown or may be loaded from a secondary storage device into main memory for execution by processor s . Such programs when executed enable the data processing system to perform features of the present disclosure as discussed herein. Accordingly such data processing system programs represent controllers of the data processing system.

In some embodiments the disclosure is directed to a control logic program product comprising at least one processor having control logic software firmware hardware microcode stored therein. The control logic when executed by processor s causes the processor s to provide functions of the disclosure as described herein. In another embodiment this disclosure is implemented primarily in hardware for example using a prefabricated component state machine or multiple state machines in a semiconductor element such as a processor .

Those skilled in the art will appreciate various modifications to the data processing system without departing from the spirit and scope of this disclosure. A data processing system and more particularly a MS preferably has capability for many threads of simultaneous processing which provide control logic and or processing. These threads can be embodied as time sliced threads of processing on a single hardware processor multiple processors multi core processors Digital Signal Processors DSPs or the like or combinations thereof. Such multi threaded processing can concurrently serve large numbers of concurrent MS tasks. Concurrent processing may be provided with distinct hardware processing and or as appropriate software driven time sliced thread processing. Those skilled in the art recognize that having multiple threads of execution on an MS is accomplished in many different ways without departing from the spirit and scope of this disclosure. This disclosure strives to deploy software to existing MS hardware configurations but the disclosed software can be deployed as burned in microcode to new hardware of MSs.

Data processing aspects of drawings flowcharts are preferably multi threaded so that many MSs and applicable data processing systems are interfaced with in a timely and optimal manner. Data processing system may also include its own clock mechanism not shown if not an interface to an atomic clock or other clock mechanism to ensure an appropriately accurate measurement of time in order to appropriately carry out processing described below. In some embodiments Network Time Protocol NTP is used to keep a consistent universal time for MSs and other data processing systems in communications with MSs. This is most advantageous to prevent unnecessary round tripping of data between data processing systems to determine timing e.g. Time Difference of Arrival TDOA measurements. A NTP synchronized date time stamp maintained in communications is compared by a receiving data processing system for comparing with its own NTP date time stamp to measure TOA time of arrival i.e. time taken to arrive . Of course in the absence of NTP used by the sender and receiver TOA is also calculated in a bidirectional transmission using correlation. In this disclosure TOA measurements from one location technology are used for triangulating with TOA measurements from another location technology not just for determining how close . Therefore TDOA terminology is generally used herein to refer to the most basic TOA measurement of a wave spectrum signal being the difference between when it was sent and when it was received. TDOA is also used to describe using the difference of such measurements to locate triangulate . NTP use among participating systems has the advantage of a single unidirectional broadcast data packet containing all a receiving system requires to measure TDOA by knowing when the data was sent date time stamp in packet and when the data was received signal detected and processed by receiving system . A NTP clock source e.g. atomic clock used in a network is to be reasonably granular to carry out measurements and ensures participating MSs are updated timely according to anticipated time drifts of their own clocks. There are many well known methods for accomplishing NTP some which require dedicated thread s for NTP processing and some which use certain data transmitted to and from a source to keep time in synch.

Those skilled in the art recognize that NTP accuracy depends on participating MS clocks and processing timing as well as time server source s . Radio wave connected NTP time server s is typically accurate to as granular as 1 millisecond. Global Positioning System GPS time servers provide accuracy as granular as 50 microseconds. GPS timing receivers provide accuracy to around 100 nanoseconds but this may be reduced by timing latencies in time server operating systems. With advancements in hardware microcode and software obvious improvements are being made to NTP. In NTP use embodiments of this disclosure an appropriate synchronization of time is used for functional interoperability between MSs and other data processing systems using NTP. NTP is not required in this disclosure but it is an advantage when in use.

In another embodiment of the present disclosure GPS satellites such as satellite satellite and satellite provide information as is well known in the art to GPS devices on earth for triangulation locating of the GPS device. In this embodiment a MS has integrated GPS functionality so that the MS monitors its positions. The MS is preferably known by a unique identifier for example a phone number caller id device identifier or like appropriate unique handle.

In yet another embodiment of the present disclosure a physically connected device for example telephone computer PDA telephone and fax machine may be newly physically connected to a network. Each is a MS although the mobility is limited. Physical connections include copper wire optical fiber USB or any other physical connection by any communications protocol thereon. Devices are preferably known by a unique identifier for example a phone number caller id device identifier physical or logical network address or like appropriate unique handle. The MS is detected for being newly located when physically connected. A service can be communicated to upon detecting connectivity. The service may execute at an Automatic Response Unit ARU a telephony switch for example telephony switch a web server for example connected through a gateway or a like data processing system that communicates with the MS in any of a variety of ways as well known to those skilled the art. MS detection may be a result of the MS initiating a communication with the service directly or indirectly. Thus a user may connect his laptop to a hotel network initiate a communication with the service and the service determines that the user is in a different location than the previous communication. A local area network LAN may contain a variety of connected devices each an MS that later becomes connected to a local area network at a different location such as a PDA a server computer a printer an internet protocol telephone a computer or the like. Hard copy presentation could be made to printer and fax .

Current technology enables devices to communicate with each other and other systems through a variety of heterogeneous system and communication methods. Current technology allows executable processing to run on diverse devices and systems. Current technology allows communications between the devices and or systems over a plethora of methodologies at close or long distance. Many technologies also exist for automatic locating of devices. It is well known how to have an interoperating communications system that comprises a plurality of individual systems communicating with each other with one or more protocols. As is further known in the art of developing software executable processing of the present disclosure may be developed to run on a particular target data processing system in a particular manner or customized at install time to execute on a particular data processing system in a particular manner.

Once DLM is within the building a strategically placed antenna with a desired detection range within the building is used to detect the DLM coming into its proximity. Wall breakout is used to see the antenna through the building . The known antenna location is used to automatically detect the location of the DLM . In fact any DLM that travels within the coverage area served by antenna is identified as the location of antenna . The confidence of a location of a DLM is low when the antenna coverage area of antenna is large. In contrast the confidence of a location of a DLM is higher when the antenna coverage area of antenna is smaller. Travels of DLM can be limited by objects pathways or other limiting circumstances of traffic to provide a higher confidence of location of DLM when located by antenna or when located by any locating antenna described herein which detects MSs coming within range of its location. Location confidence is improved with a TDOA measurement as described above. Antenna can process all locating by itself with connected data processing system not shown as well known to those skilled in the art or with interoperability to other services as connected to antenna for example with connectivity described in . Antenna can be used to communicate the location of DLM to a service to the DLM to other MSs within its coverage area any combination thereof or to any connected data processing system or MS of . Other in range detection antennas of a embodiment may be strategically placed to facilitate warehouse operations such as in Kubler et al.

In another embodiment blocks through are not required. A service connected antenna or cell tower periodically broadcasts its whereabouts WDR info e.g. and MSs in the vicinity use that directly at block . The MS can choose to use only the confidence and location provided or may determine a TDOA measurement for determining how close it is. If the date time stamp field indicates NTP is in use by the service and the MS is also using NTP then a TDOA measurement can be determined using the one unidirectional broadcast via the antenna by using the date time stamp field received with when the WDR information was received by the MS subtract time difference and use known wave spectrum for distance . If either the service or MS is not NTP enabled then a bidirectional correlated data flow between the service and MS is used to assess a TDOA measurement in terms of time of the MS. One embodiment provides the TDOA measurement from the service to the MS. Another embodiment calculates the TDOA measurement at the MS.

Network Time protocol NTP can ensure MSs have the same atomic clock time as the data processing systems driving antennas or cell towers they will encounter. Then date time stamps can be used in a single direction unidirectional broadcast packet to determine how long it took to arrive to from the MS. In an NTP embodiment the MS FIG. A and or the antenna sends a date time stamp in the pulse beacon or protocol. Upon receipt the antenna or cell tower service data processing system communicates how long the packet took from an MS to the antenna or cell tower by comparing the date time stamp in the packet and a date time stamp of when it was received. The service may also set the confidence value before sending WDR information to the MS. Similarly an MS can compare a date time stamp in the unidirectional broadcast packet sent from a locating service with when received by the MS. So NTP facilitates TDOA measurements in a single broadcast communication between systems through incorporation to usual communications data with a date time stamp in Communications Key CK or alternatively in new data . Similarly NTP facilitates TDOA measurement in a single broadcast communication between systems through incorporation to usual communications data with a date time stamp in Communications Key CK or alternatively in new data .

The following template is used in this disclosure to highlight field settings. See descriptions. Fields are set to the following upon exit from block 

MS ID field is preferably set with Unique MS identifier of the MS invoking block . This field is used to uniquely distinguish this MS WDRs on queue from other originated WDRs.

DATE TIME STAMP field is preferably set with Date time stamp for WDR completion at block to the finest granulation of time achievable by the MS. The NTP use indicator is set appropriately.

LOCATION field is preferably set with Location of stationary antenna or cell tower as communicated by the service to the MS.

CONFIDENCE field is preferably set with The same value e.g. 76 for any range within the antenna or cell tower or may be adjusted using the TDOA measurement e.g. amount of time detected by the MS for the response at block . The longer time it takes between the MS sending a signal detected at block and the response with data back received by the MS block the less confidence there is for being located because the MS must be a larger distance from the antenna or cell tower. The less time it takes between the MS sending a signal detected at block and the response with data back the more confidence there is for being located because the MS must be a closer distance to the antenna or cell tower. Confidence values are standardized for all location technologies. In some embodiments of processing a confidence value can be set for 1 through 100 1 being lowest confidence and 100 being highest confidence wherein a unit of measurement between the MS and antenna or cell tower is used directly for the confidence value. For example 20 meters is used as the unit of measurement. For each unit of 20 meters distance determined by the TDOA measurement assign a value of 1 up to a worst case of 100 i.e. 2000 meters . Round the 20 meter unit of distance such that 0 meters to 

A service connected to the antenna or cell tower preferably uses historical information and artificial intelligence interrogation of MS travels to determine fields and . Block continues to block where parameters are prepared for passing to processing invoked at block . Parameters are set for WDRREF a reference or pointer to the WDR DELETEQ location queue discard processing and SUPER supervisory notification processing. Thereafter block invokes processing and processing terminates at block . processing will insert to queue so this MS knows at least its own whereabouts whenever possible. A single data instance embodiment of WDR queue will cause to update the single record of WDR information for being current upon exit from block this is true for all flowchart blocks invoking processing .

With reference now to depicted is a flowchart for describing a preferred embodiment of a procedure for inserting a Whereabouts Data Record WDR to MS WDR queue . Appropriate semaphores are used for variables which can be accessed simultaneously by another thread other than the caller. With reference now to procedure processing starts at block and continues to block where parameters passed from the invoking block of processing for example block are determined. The variable WDRREF is set by the caller to a reference or pointer to the WDR so subsequent blocks of can access the WDR. The variable DELETEQ is set by the caller so that block knows how to discard obsolete location queue entries. The DELETEQ variable can be a multi field record or reference thereof for how to prune. The variable SUPER is set by the caller so that block knows under what condition s and which data to contact a supervisory service. The SUPER variable can be a multi field record or reference thereof for instruction.

Block continues to block where the DLMV see and later discussions for DLMV DLM role s List Variable or ILMV see and later discussions for ILMV ILM role s List Variable is checked for an enabled role matching the WDR for insertion e.g. DLM location technology field technology and originator indicator when MS ID this MS ILM DLM or ILM indicator when MS ID not this MS . If no corresponding DLMV ILMV role is enabled for the WDR to insert then processing continues to block the WDR is not inserted to queue . If the ILMV DLMV role for the WDR is enabled then processing continues to block where the confidence of the WDR is validated prior to insertion. An alternate embodiment to will not have block i.e. block continues directly to block since appropriate DLM and or ILM processing may be terminated anyway when DLM ILM role s are disabled see FIG. A B .

If block determines the data to be inserted is not of acceptable confidence e.g. field 70 then processing continues to block for checking the intent of the WDR insertion.

If block determines the WDR for insert is a WDR describing whereabouts for this MS i.e. MS ID matching MS of processing DLM or ILM FIG. A B then processing continues to block . If block determines the WDR for insert is from a remote ILM or DLM i.e. MS ID does not match MS of processing then processing continues to block . Block peeks the WDR queue for the most recent highest confidence entry for this MS whereabouts by searching queue for the MS ID field matching the MS ID of processing and a confidence field greater than or equal to the confidence floor value and a most recent date time stamp field . Thereafter if block determines one was found then processing continues to block otherwise processing continues to block where a Last Whereabouts date Time stamp LWT variable is set to field of the WDR for insert e.g. first MS whereabouts WDR and processing continues to block .

If block determines the WDR for insertion has significantly moved i.e. using a movement tolerance configuration e.g. 3 meters with fields of the WDR for insert and the WDR peeked at block then block sets the LWT Last Whereabouts date Time stamp variable with appropriate semaphore to field of the WDR for insert and processing continues to block otherwise processing continues directly to block thereby keeping the LWT as its last setting . The LWT is to hold the most recent date time stamp of when the MS significantly moved as defined by a movement tolerance. The movement tolerance can be system defined or configured or user configured in by an option for configuration detected at block and then using the Configure Value procedure of like confidence floor value configuration .

Block accesses the DLMV and updates it with a new DLM role if there is not one present for it. This ensures a correct list of DLMV roles are available for configuration by . Preferably by default an unanticipated DLMV role is enabled helps inform the user of its availability . Likewise in another embodiment ILMV roles can be similarly updated in particular if a more granulated list embodiment is maintained to the ILMV or if unanticipated results help to identify another configurable role. By default block should allow unanticipated roles to continue with WDR insertion processing and then block can add the role enable it and a user can decide what to do with it in configuration FIG. A B .

Thereafter the WDR is inserted to the WDR queue at block block discards any obsolete records from the queue as directed by the caller invoker and processing continues to block . The WDR queue preferably contains a list of historically MS maintained Whereabouts Data Records WDRs as the MS travels. When the MS needs its own location for example from an application access or to help locate an ILM the queue is accessed for returning the WDR with the highest confidence value field in the most recent time field for the MS field . Block preferably discards by using fields and relative to other WDRs. The queue should not be allowed to get too large. This will affect memory or storage utilization at the MS as well as timeliness in accessing a sought queue entry. Block also preferably discards WDRs from queue by moving selected WDRs to LBX History .

As described above queue interfaces assume an implicit semaphore for properly accessing queue . There may be ILMs requesting to be located or local applications of the MS may request to access the MS whereabouts. Executable thread s at the MS can accesses the queue in a thread safe manner for responding to those requests. The MS may also have multiple threads of processing for managing whereabouts information from DLMs ILMs or stationary location services. The more concurrently executable threads available to the MS the better the MS is able to locate itself and respond to others e.g. MSs . There can be many location systems and methods used to keeping a MS informed of its own whereabouts during travel. While the preferred embodiment is to maximize thread availability the obvious minimum requirement is to have at least 1 executable thread available to the MS. As described above in operating system environments without proper queue interfaces queue access blocks are first preceded by an explicit request for a semaphore lock to access queue waits until obtained and then followed by a block for releasing the semaphore lock to another thread for use. Also in the present disclosure it is assumed in blocks which access data accessible to more than 1 concurrent thread e.g. shared memory access to DLMV or ILMV at block that an appropriate semaphore created at block protect synchronous access.

If block determines information e.g. whereabouts should be communicated by service informant code to a supervisory service for example a service then block communicates specified data to the service and processing terminates at block by returning to the invoker caller . If block determines a supervisory service is not to be informed then processing terminates with an appropriate return to the caller at block . Service informant code at block can send information as data that is reliably acknowledged on receipt or as a datagram which most likely but unreliably is received.

Depending on the SUPER variable block may opt to communicate every time a WDR is placed to the queue or when a reasonable amount of time has passed since last communicating to the supervisory service or when a WDR confidence reaches a certain sought value or when any WDR field or fields contain certain sought information or when a reasonably large number of entries exist in WDR queue or for any processing condition encountered by blocks through or for any processing condition encountered by caller processing up to the invocation of processing. Different embodiments will send a single WDR at block a plurality of WDRs or any other data. Various SUPER parameter s embodiments for caller parameters can indicate what when where and how to send certain data. Block may send an email an SMS message or use other means for conveying data. Service informant code may send LBX history statistics and or any other data data queue data data or resources . Service informant code may update data in history statistics or any other data data queue data data and or resources possibly using conditions of this data to determine what is updated. Blocks and may be omitted in some embodiments.

If a single WDR is sent at block as passed to processing then the WDR parameter determined at block is accessed. If a plurality of WDRs is sent at block then block appropriately interfaces in a thread safe manner to queue and sends the WDRs.

Some preferred embodiments do not incorporate blocks through . i.e. block continues to block if confidence ok . Blocks through are for the purpose of implementing maintaining a date time stamp of last MS significant movement using a movement tolerance . Architecture uses as does DLM processing. must perform well for the preferred multithreaded architecture . Block performs a peek and block can be quite timely depending on embodiments used for location field . A movement tolerance incorporated at the MS is not necessary but may be nice to have. Therefore blocks through are optional blocks of processing.

With reference now to depicted is a flowchart for describing a preferred embodiment of an MS whereabouts update event of an antenna in range detected MS for example a DLM when MS location awareness is monitored by the MS. describes relevant processing for MSs to maintain their own whereabouts. Processing begins at block when the MS receives a signal from an antenna or cell tower deserving a response and continues to block where the antenna or cell tower signal is authenticated by the MS as being a legitimate signal for processing. The signal can be received for processing by blocks through as the result of a continuous or pulsed broadcast or beaconing by the antenna or cell tower or as part of usual communication protocol in progress with at least one MS usual data with embedded Communications Key or as a response via antenna to a previous MS signal . The signal is preferably authenticated by a data parsed signature deserving further processing. Block continues to block where the MS sends an outbound request for soliciting an immediate response from the antenna or cell tower service. The request by the MS is appropriately correlated e.g. as described above for a response which additionally facilitates embodiments using TDOA measurements time of communications between the MS and antenna or cell tower to determine how close is the MS in range. Block waits for a response or waits until a reasonable timeout whichever occurs first. There are also multithreaded embodiments to breaking up where block does not wait but rather terminates processing and depends on another thread to correlate the response and then continue processing blocks through like architecture .

Thereafter if block determines the request timed out then processing terminates at block . If block determines the response was received then processing continues to block . Block completes a WDR with appropriate response data received along with data set by the MS. See descriptions. Fields are set to the following upon exit from block 

LOCATION TECHNOLOGY field is preferably set with Client Antenna Range for an antenna detecting the MS and is set to Client Cell Range for a cell tower detecting the MS. The originator indicator is set to DLM.

The longer time it takes between sending a request and getting a response at block the less confidence there is for being located because the MS must be a larger distance from the antenna or cell tower. The less time it takes the more confidence there is for being located because the MS must be a closer distance to the antenna or cell tower. Confidence values are analogously determined as described for . NTP embodiments also apply here. NTP can be used so no bidirectional communications is required for TDOA measurement. In this embodiment the antenna or cell tower sets a NTP date time stamp in the pulse beacon or protocol. Upon receipt the MS instantly knows how long the packet took to be received by comparing the NTP date time stamp in the packet and a MS NTP date time stamp of when it was received i.e. no request response pair required . If location information is also present with the NTP date time stamp in data received at block then block can continue directly to block .

An alternate MS embodiment determines its own direction heading and or speed for WDR completion based on historical records maintained to the WDR queue and or LBX history .

Block continues to block for preparing parameters for WDRREF a reference or pointer to the WDR DELETEQ location queue discard processing and SUPER supervisory notification processing. Thereafter block invokes the procedure processing to insert the WDR to queue . After processing of block processing terminates at block .

In alternative coming within range same as in range in range within range embodiments a unique MS identifier or MS group identifier for authenticating an MS for locating the MS is not necessary. An antenna emitting signals will broadcast in CK of data not only its own location information e.g. location field but also an NTP indicated date time stamp field which the receiving MS also having NTP for time synchronization uses to perform a TDOA measurement upon receipt. This will enable a MS to determine at least how close e.g. radius range radius range radius range or radius range it is located to the location of the antenna by listening for and receiving the broadcast e.g. of . Similarly in another embodiment an NTP synchronized MS emits signals and an NTP synchronized data processing system associated with a receiving antenna can make a TDOA measurement upon signal receipt. In other embodiments more than a single unidirectional signal may be used while still preventing the requirement to recognize the MS to locate it. For example an antenna emitting signals e.g. hotspot WiFi 802.x will contain enough information for a MS to respond with correlation for being located and visa versa. In any case there can be multi directional exchanged signals for determining a TDOA measurement.

TDOA is calculated from the time it takes for a communication to occur from the MS back to the MS via the base tower or alternatively from a base tower back to that base tower via the MS. NTP may also be used for time calculations in a unidirectional broadcast from a base tower to the MS or from the MS to a base tower as described above . AOA is performed through calculations of the angle by which a signal from the MS encounters the antenna. Triangle geometry is then used to calculate a location. The AOA antenna is typically of a phased array type.

See Missing Part Triangulation MPT section below with discussions for for details on heterogeneously locating the MS using both TDOA and AOA i.e. Missing Part Triangulation MPT . Just as high school taught geometry for solving missing parts of a triangle so to does MPT triangulate an MS location. Think of the length of a side of a triangle as a TDOA measurement i.e. length of time translatable to a distance. Think of the AOA of a signal to an antenna as one of the angles of a triangle vertice. Solving with MPT analogously uses geometric and trigonometric formulas to solve the triangulation albeit at fast processing speeds.

Thereafter if the MS is determined to be legitimate and deserving of processing similar to above then block continues to block . If block determines the MS is not participating with the service in which case block did little to process it then processing continues back to block to continue working on behalf of legitimate participating MSs. The controller at block may communicate with other controllers when base stations in other cellular clusters are picking up a signal for example when the MS roams. In any case at block the controller s determines the strongest signal base stations needed for locating the MS at block . The strongest signals that can accomplish whereabouts information of the MS are used. Thereafter block accesses base station location information for base stations determined at block . The base station provides stationary references used to relatively determine the location of the MS. Then block uses the TDOA or AOA or MPT i.e. heterogeneously both AOA and TDOA information together with known base station locations to calculate the MS location.

Thereafter block accesses historical MS location information and block performs housekeeping by pruning location history data for the MS by time number of entries or other criteria. Block then determines a heading direction of the MS based on previous location information. Block may perform Artificial Intelligence AI to determine where the MS may be going by consulting many or all of the location history data. Thereafter block completes a service side WDR block appends the WDR information to location history data and notifies a supervisory service if there is one outside of the service processing of . Processing continues to block where the service communicates the WDR to the located MS.

Thereafter the MS completes its own WDR at block for adding to WDR queue to know its own whereabouts whenever possible and block prepares parameters for invoking WDR insertion processing at block . Parameters are set for WDRREF a reference or pointer to the MS WDR DELETEQ location queue discard processing and SUPER supervisory notification processing e.g. no supervisory notification processing because it was already handled at block or by being in context of the service processing . At block the MS invokes processing already described. After block processing continues back to block . Of course block continues directly to block at the service s since there is no need to wait for MS s processing in blocks through . processing is continuous for every MS in the wireless network 7 days a week 24 hours a day.

LOCATION field is preferably set with The triangulated location of the MS as communicated by the service.

CONFIDENCE field is preferably set with Confidence of triangulation determined by the service which is passed to the MS at block . The confidence value may be set with the same value e.g. 85 regardless of how the MS was triangulated. In other embodiments field will be determined completely or adjusting the value of 85 by the service for TDOA measurements used AOA measurements signal strengths wave spectrum involved and or the abundance of particular MS signals available for processing by blocks through . Higher confidences are assigned for smaller TDOA measurements shorter distances strong signal strengths and numerous additional data points beyond what is necessary to locate the MS. Lower confidences are assigned for larger TDOA measurements weak signal strengths and minimal data points necessary to locate the MS. A reasonable confidence can be assigned using this information as guidelines where 1 is the lowest confidence and 100 is the highest confidence. LOCATION TECHNOLOGY field is preferably set with Server Cell TDOA Server Cell AOA Server Cell MPT Server Antenna TDOA Server Antenna AOA or Server Antenna MPT depending on how the MS was located and what flavor of service was used. The originator indicator is set to DLM. LOCATION REFERENCE INFO field is preferably set with null not set for indicating that all triangulation data was factored into determining confidence and none is relevant for a single TDOA or AOA measurement in subsequent processing i.e. service did all the work . COMMUNICATIONS REFERENCE INFO field is preferably set with Same as was described for block above. SPEED field is preferably set with Service WDR information at block wherein the service used historical information and artificial intelligence interrogation of MS travels to determine if available. HEADING field is preferably set with Service WDR information at block wherein the service used historical information and artificial intelligence interrogation of MS travels to determine if available. ELEVATION field is preferably set with Elevation altitude if available. APPLICATION FIELDS field is preferably set with Same as was described for block above. CORRELATION FIELD is preferably set with Not Applicable i.e. not maintained to queue . SENT DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue . RECEIVED DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue .

Thereafter block accesses historical MS location information e.g. WDR queue and or LBX history to prevent redundant information kept at the MS and block performs housekeeping by pruning the LBX history for the MS by time number of entries or other criteria. Block then determines a heading direction of the MS based on previous location information unless already known from block for AOA determination . Block may perform Artificial Intelligence AI to determine where the MS may be going by consulting queue and or history . Thereafter block completes a WDR and block prepares parameters for processing WDRREF a reference or pointer to the MS WDR DELETEQ location queue discard processing and SUPER supervisory notification processing. Block continues to block for invoking processing already described above. After block processing continues back to block . processing is continuous for the MS as long as the MS is enabled. In various multithreaded embodiments many threads at the MS work together for high speed processing at blocks through for concurrently communicating to many stationary references.

CONFIDENCE field is preferably set with The confidence of triangulation as determined by the MS. Confidence may be set with the same value e.g. 80 since MS may be moving during triangulation regardless of how the MS was triangulated. In other embodiments field will be determined completely or adjusting the value of 80 by the MS for TDOA measurements used AOA measurements signal strengths wave spectrum involved and or the abundance of particular service signals available for processing. Higher confidences are assigned for smaller TDOA measurements shorter distances strong signal strengths and numerous additional data points beyond what is necessary to locate the MS. Lower confidences are assigned for larger TDOA measurements weak signal strengths and minimal data points necessary to locate the MS. A reasonable confidence can be assigned using this information as guidelines where 1 is the lowest confidence and 100 is the highest confidence. LOCATION TECHNOLOGY field is preferably set with Client Cell TDOA Client Cell AOA Client Cell MPT Client Antenna TDOA Client Antenna AOA or Client Antenna MPT depending on how the MS located itself. The originator indicator is set to DLM. LOCATION REFERENCE INFO field is preferably set with Data associated with selected best stationary reference s used by the MS the selection location whereabouts TDOA measurement to it and wave spectrum and or particular communications interface used if reasonable. The TDOA measurement may be converted to a distance using wave spectrum information. Also preferably set herein is data associated with a selected best stationary reference used by the MS may be same or different than for TDOA measurement the selection location AOA measurement to it and heading yaw pitch and roll values or accelerometer readings if reasonable. Values that may be populated here should have already been factored into the confidence value. There may be one or more stationary reference whereabouts with useful measurements maintained here for processing of block . COMMUNICATIONS REFERENCE INFO field is preferably set with Parameters referencing MS internals if desired. SPEED field is preferably set with Speed determined by the MS using historical information queue and or history and artificial intelligence interrogation of MS travels to determine if reasonable. HEADING field is preferably set with Heading determined by the MS using historical information queue and or history and artificial intelligence interrogation of MS travels to determine if reasonable. ELEVATION field is preferably set with Elevation altitude if available. APPLICATION FIELDS field is preferably set with Same as was described for block above. CORRELATION FIELD is preferably set with Not Applicable i.e. not maintained to queue . SENT DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue . RECEIVED DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue .

In alternative triangulation embodiments a unique MS identifier or MS group identifier for authenticating an MS for locating the MS is not necessary. An antenna emitting signals will broadcast CK of data not only its own location information but also an NTP date time stamp which the receiving MS also having NTP for time synchronization uses to perform TDOA measurements upon receipt. This will enable a MS to determine how close e.g. radius range radius range radius range or radius range it is located to the location of the antenna by listening for and receiving the broadcast e.g. of . Similarly in another embodiment an NTP synchronized MS emits signals and an NTP synchronized data processing system associated with a receiving antenna can determine a TDOA measurement upon signal receipt. In other embodiments more than a single unidirectional signal may be used while still preventing the requirement to recognize the MS to locate it. For example an antenna emitting signals will contain enough information for a MS to respond with correlation for being located. Alternatively an MS emitting signals will contain enough information for a service to respond with correlation for being located. In any case there can be multi directional exchanged signals for determining TDOA. Similarly a service side data processing system can interact with a MS for AOA information without requiring a known identifier of the MS use request response correlation .

CONFIDENCE field is preferably set with Confidence of GPS variety usually high which may be set with the same value e.g. 95 for DGPS 93 for AGPS and 90 for GPS . In other embodiments field will be determined completely or amending the defaulted value by the MS for timing measurements signal strengths and or the abundance of particular signals available for processing similarly to as described above. An MS may not be aware of the variety of GPS in which case straight GPS is assumed. LOCATION TECHNOLOGY field is preferably set with GPS A GPS or D GPS depending on if known flavor of GPS. The originator indicator is set to DLM. LOCATION REFERENCE INFO field is preferably set with null not set for indicating that data was factored into determining confidence and none is relevant for a single TDOA or AOA measurement in subsequent processing. COMMUNICATIONS REFERENCE INFO field is preferably set with Parameters referencing MS internals if desired. SPEED field is preferably set with Speed determined by the MS using a suitable GPS interface or historical information queue and or history and artificial intelligence interrogation of MS travels to determine if reasonable. HEADING field is preferably set with Heading determined by the MS using a suitable GPS interface or historical information queue and or history and artificial intelligence interrogation of MS travels to determine if reasonable. ELEVATION field is preferably set with Elevation altitude if available. APPLICATION FIELDS field is preferably set with Same as was described for block above. CORRELATION FIELD is preferably set with Not Applicable i.e. not maintained to queue . SENT DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue . RECEIVED DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue .

Thereafter block accesses historical MS location information performs housekeeping by pruning location history data for the MS by time number of entries or other criteria and determines a heading direction of the MS based on previous location information. Block may perform Artificial Intelligence AI to determine where the MS may be going by consulting many or all of the location history data. Thereafter block completes a service side WDR block appends the WDR information to location history data and notifies a supervisory service if there is one outside of the service processing of . Processing continues to block where the service communicates the WDR to the located MS.

Thereafter the MS completes the WDR at block for adding to WDR queue . Thereafter block prepares parameters passed to processing for WDRREF a reference or pointer to the MS WDR DELETEQ location queue discard processing and SUPER supervisory notification processing e.g. no supervisory notification processing because it was already handled at block or by being in context of the service processing . Block continues to block where the MS invokes processing already described above. After block processing continues back to block . Of course block continues directly to block at the service s since there is no need to wait for MS s processing in blocks through . processing is continuous for every MS in the wireless network 7 days a week 24 hours a day.

LOCATION field is preferably set with The triangulated location of the MS as communicated by the service.

CONFIDENCE field is preferably set with Confidence of triangulation determined by the service which is passed to the MS at block . The confidence value may be set with the same value e.g. 95 normally high for triangulation using densely positioned antennas regardless of how the MS was triangulated. In other embodiments field will be determined completely or adjusting the value of 95 by the service for TDOA measurements used AOA measurements signal strengths wave spectrum involved and or the abundance of particular MS signals available for processing. Higher confidences are assigned for smaller TDOA measurements shorter distances strong signal strengths and numerous additional data points beyond what is necessary to locate the MS. Lower confidences are assigned for larger TDOA measurements weak signal strengths and minimal data points necessary to locate the MS. A reasonable confidence can be assigned using this information as guidelines where 1 is the lowest confidence and 100 is the highest confidence. LOCATION TECHNOLOGY field is preferably set with Server Antenna TDOA Server Antenna AOA or Server Antenna MPT depending on how the MS was located and what flavor of service was used. The originator indicator is set to DLM. LOCATION REFERENCE INFO field is preferably set with null not set for indicating that all triangulation data was factored into determining confidence and none is relevant for a single TDOA or AOA measurement in subsequent processing i.e. service did all the work . COMMUNICATIONS REFERENCE INFO field is preferably set with Same as was described for block above. SPEED field is preferably set with Service WDR information at block wherein the service used historical information and artificial intelligence interrogation of MS travels to determine if available. HEADING field is preferably set with Service WDR information at block wherein the service used historical information and artificial intelligence interrogation of MS travels to determine if available. ELEVATION field is preferably set with Elevation altitude if available. APPLICATION FIELDS field is preferably set with Same as was described for block above. CORRELATION FIELD is preferably set with Not Applicable i.e. not maintained to queue . SENT DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue . RECEIVED DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue .

Relevant processing begins at block and continues to block where an MS device is physically logically connected to a network. Thereafter the MS accesses a service at block . Then at block the service accesses historical MS location history along with the connectivity address and block performs housekeeping by pruning the location history data maintained for the MS by time number of entries or other criteria. Block may perform Artificial Intelligence AI to determine where the MS may be going e.g. using heading based on previous locations by consulting much or all of the location history data. Thereafter service processing at block completes a service side WDR then the service appends WDR information to location history data at block and may notify a supervisory service if there is one outside of the service processing of . Processing continues to block where the service communicates WDR information to the newly physically logically connected MS. There are many embodiments for determining a newly connected MS location using a physical or logical address for example consulting a database which maps locations to network addresses e.g. location to logical ip address location to physical wall jack port etc . Then at block the MS completes its own WDR using some information from block parameters are prepared at block block invokes processing already described above and processing terminates at block . Parameters are set at block for WDRREF a reference or pointer to the MS WDR DELETEQ location queue discard processing and SUPER supervisory notification processing e.g. no supervisory notification processing because it was already handled at block or by being in context of the service processing . Of course block continues directly to block at the service s since there is no need to wait for MS processing in blocks through . processing is available at any appropriate time in accordance with the underlying service.

CONFIDENCE field is preferably set with Confidence determined by the service according to how the MS was connected or may be set with the same value e.g. 100 for physical connect 77 for logical connect e.g. short range wireless regardless of how the MS was located. In other embodiments field will be determined by the service for anticipated physical conduit range wireless logical connect range etc. The resulting confidence value can be adjusted based on other parameters analogously to as described above. LOCATION TECHNOLOGY field is preferably set with Service Physical Connect or Service Logical Connect depending on how the MS connected. The originator indicator is set to DLM. LOCATION REFERENCE INFO field is preferably set with null not set but if a TDOA measurement can be made e.g. short range logical connect and using methodologies described above then a TDOA measurement a communications signal strength if available and wave spectrum and or particular communications interface used if available. The TDOA measurement may be converted to a distance using wave spectrum information. Possible values populated here should have already been factored into the confidence value. COMMUNICATIONS REFERENCE INFO field is preferably set with Same as was described for block above. SPEED field is preferably set with null not set but can be set with speed required to arrive to the current location from a previously known location assuming same time scale is used. HEADING field is preferably set with null not set but can be set to heading determined when arriving to the current location from a previously known location. ELEVATION field is preferably set with Elevation altitude e.g. of physical connection or place of logical connection detection if available. APPLICATION FIELDS field is preferably set with Same as was described for block above. CORRELATION FIELD is preferably set with Not Applicable i.e. not maintained to queue . SENT DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue . RECEIVED DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue .

CONFIDENCE field is preferably set with Confidence determined by the service according to how the MS was connected or may be set with the same value e.g. 100 for physical connect 77 for logical connect e.g. short range wireless regardless of how the MS was located. In other embodiments field will be determined by the service for anticipated physical conduit range wireless logical connect range etc. The resulting confidence value can be adjusted based on other parameters analogously to as described above. LOCATION TECHNOLOGY field is preferably set with Client Physical Connect or Client Logical Connect depending on how the MS connected. The originator indicator is set to DLM. LOCATION REFERENCE INFO field is preferably set with null not set but if a TDOA measurement can be made e.g. short range logical connect and using methodologies described above then a TDOA measurement a communications signal strength if available and wave spectrum and or particular communications interface used if available. The TDOA measurement may be converted to a distance using wave spectrum information. Possible values populated here should have already been factored into the confidence value. COMMUNICATIONS REFERENCE INFO field is preferably set with Same as was described for block above. SPEED field is preferably set with null not set but can be set with speed required to arrive to the current location from a previously known location using assuming same time scale is used. HEADING field is preferably set with null not set but can be set to heading determined when arriving to the current location from a previously known location. ELEVATION field is preferably set with Elevation altitude e.g. of physical connection or place of logical connection detection if available. APPLICATION FIELDS field is preferably set with Same as was described for block above. CORRELATION FIELD is preferably set with Not Applicable i.e. not maintained to queue . SENT DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue . RECEIVED DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue .

With reference now to image capture device is positioned for monitoring MSs that come into the field of view of device . MSs are preferably distinguishable by appearance e.g. color shape markings labels tags etc or as attached e.g. recognized mount to host or carried e.g. recognized by its recognized user . Such techniques are well known to those skilled in the art. Device is as described above with connectivity to locating service and antenna or cell tower . illustrates that device uses known measurements within its field of view for determining how large and where located are objects that come into the field of view . For example a well placed and recognizable vertical line and horizontal line which are preferably perpendicular to each other have known lengths and positions. The objects which come into the field of view are measured based on the known lengths and positions of the lines and which may be landscape markings e.g. parking lot lines for additional purpose. Field of view may contain many lines and or objects of known dimensions strategically placed or recognized within the field of view to facilitate image processing by service . Building may serve as a reference point having known dimension and position in measuring objects such as a person or DLM . A moving object such as a shopping cart can have known dimensions but not a specific position to facilitate service in locating an MS coming into the field of view . Those skilled in the art recognize that known dimensions and or locations of anticipated objects in field of view have measurements facilitating discovering positions and measurements of new objects that may travel into the field of view . Using techniques with techniques provides additional locating accuracy. A distance may be estimated based on the anticipated sizes of references in the field of view relative size of the recognized MS.

With reference now to image capture device is positioned for monitoring MSs that come into the field of view of device . Device is as described above with connectivity to locating service and antenna or cell tower . MSs are preferably distinguishable by appearance e.g. color shape markings labels tags etc or as attached e.g. recognized mount to host or carried e.g. recognized by its user or as identified by and or methodologies. illustrates that device uses known locations within its field of view for determining how large and where located are objects that come into the field of view . For example building tree and traffic sign have its locations known in field of view by service . Solving locations of objects that move into the field of view is accomplished with graphical triangulation measurements between known object reference locations e.g. building tree and sign and the object to be located. Timely snapshots by device provide an ongoing locating of an MS for example DLM . Line segment distances a b c can be measured using references such as those of . Whereabouts are determined by providing known coordinates to anticipated objects such as building tree and sign . Similarly graphical AOA measurements i.e. graphical angle measurements and graphical MPT measurements can be used in relation to anticipated locations of objects within the field of view . There may be many anticipated known object locations within field of view to further facilitate locating an MS. Being nearby an object may also be enough to locate the MS by using the object s location for the location of the MS. Using techniques with and or techniques provides additional locating accuracy.

The system and methodologies illustrated by are preferably used in optimal combination by locating service to provide a best location of an MS. In some embodiments MS whereabouts is determined as the location of a device by simply being recognized by the device . In other embodiments multiple devices can be strategically placed within a geographic area for being used in combination to a common locating service for providing a most accurate whereabouts of an MS. Multiple field of views from difference angles of different devices enable more precise locating within three dimensional space including precise elevations.

There may be a plurality of MSs in the field of view so communications at block targets each MS recognized. A MS should not rely on the service to have done its job correctly. At a MS block checks the MS ID communicated for validation. If block determines the MS ID is incorrect then processing continues back to block for the particular MS . If block determines the MS ID is correct then processing continues to block where the particular MS completes its WDR received from service . Thereafter MS s prepare parameters at block invoke local processing already described above at block and processing continues for service back to block . Of course block continues directly to block at the service s since there is no need to wait for MS s processing in blocks through . Parameters set at block are WDRREF a reference or pointer to the MS WDR DELETEQ location queue discard processing and SUPER supervisory notification e.g. no supervisory notification processing because it was already handled at block or by being in context of the service processing . No snapshots from device are to be missed at block .

MS ID field is preferably set with Unique MS identifier of the MS after validating at the MS that the service has correctly identified it. This field is used to uniquely distinguish this MS WDRs on queue from other originated WDRs. The service may determine a MS ID from a database lookup using above appearance criteria. Field may also be determined using the transmission methods as described for for example by way of antenna . For example when the MS comes within range of antenna processing commences. Another embodiment prevents recognizing more than one MS within the field of view at any time e.g. a single file entryway in which case the service can solicit a who are you transmission to identify the MS and then send back its whereabouts in which case the MS sets its own MS ID here . DATE TIME STAMP field is preferably set with Same as was described for block above. LOCATION field is preferably set with The location determined for the MS by the service. CONFIDENCE field is preferably set with same value e.g. 76 regardless of how the MS location was determined. In other embodiments field will be determined by the number of distance measurements and or the abundance of particular objects used in the field of view . The resulting confidence value can be adjusted based on other graphical parameters involved analogously to as described above. LOCATION TECHNOLOGY field is preferably set with Server Graphic Patterns Server Graphic Distances Server Graphic Triangulate or a combination field value depending on how the MS was located and what flavor of service was used. The originator indicator is set to DLM. LOCATION REFERENCE INFO field is preferably set with null not set for indicating that all whereabouts determination data was factored into the confidence and none is relevant for a single TDOA or AOA measurement in subsequent processing i.e. service did all the work . COMMUNICATIONS REFERENCE INFO field is preferably set with Same as was described for block above. SPEED field is preferably set with null not set but can be set with speed required to arrive to the current location from a previously known time at a location e.g. using previous snapshots processed assuming the same time scale is used. HEADING field is preferably set with null not set but can be set to heading determined when arriving to the current location from a previously known location e.g. using previous snapshots processed . ELEVATION field is preferably set with Elevation altitude if available if available. APPLICATION FIELDS field is preferably set with Same as was described for block above. CORRELATION FIELD is preferably set with Not Applicable i.e. not maintained to queue . SENT DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue . RECEIVED DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue .

In an alternative embodiment MS may be equipped e.g. as part of resources with its own device and field of view for graphically identifying recognizable environmental objects or places to determine its own whereabouts. In this embodiment the MS would have access to anticipated objects locations and dimensions much the same way described for either locally maintained or verifiable with a connected service. Upon a successful recognition of an object place or other graphically perceptible image which can be mapped to a location the MS would complete a WDR similarly to above. The MS may recognize addresses buildings landmarks of other pictorial data. Thus the MS may graphically determine its own location. The MS would then complete a WDR for processing exactly as described for with the exceptions of fields that follow 

LOCATION TECHNOLOGY field is preferably set with Client Graphic Patterns Client Graphic Distances Client Graphic Triangulate or a combination field value depending on how the MS located itself. The originator indicator is set to DLM.

It has been shown that light can be used to triangulate position or location information e.g. U.S. Pat. No. 6 549 288 Migdal et al and U.S. Pat. No. 6 549 289 Ellis . Optical sensors through detect a light source of or illumination of an MS for example DLM . Data is superimposed on the light wave spectrum with specified frequency wavelength and or periodicity or data occurs in patterned breaks in light transmission. Data may contain a unique identifier of the MS so service s attached to sensors through can communicate uniquely to an MS. Mirrors positioned at optical sensors through may be used to determine an AOA of light at the sensor or alternatively TDOA of recognizable light spectrum is used to position an MS. The flowcharts occur analogously for light signals received by sensors through which are connected to service processing of . The only difference is wave spectrum used.

Heterogeneously speaking illustrates having strategically placed sensors through for detecting a wave spectrum and using TDOA AOA or MPT. Those skilled in the art appreciate that a wave is analogously dealt with by regardless of the wave type albeit with different sensor types through and different sensor interface to service s of . Wave signal spectrums for triangulation by analogous processing to include microwaves infrared visible light ultraviolet light X rays gamma rays longwaves magnetic spectrum or any other invisible visible audible or inaudible wave spectrum. Sensors through are appropriately matched according to the requirements. Alternatively a MS may be sensing wave spectrums emitted by transmitters through .

Those skilled in the relevant arts appreciate that the point in all this discussion is all the wave forms provide methods for triangulating whereabouts information of an MS. Different types of wave forms that are available for an MS can be used solely or in conjunction with each other to determine MS whereabouts. MSs may be informed of their location using the identical wave spectrum used for whereabouts determination or may use any other spectrum available for communicating WDR information back to the MS. Alternatively the MS itself can determine WDR information relative applicable sensors transmitters. In any case a WDR is completed analogously to .

Referring now back to block processing continues to block where a supervisory service may be updated with the MS whereabouts if applicable and block communicates the WDR information to the MS. Any available communication method can be used for communicating the WDR information to the MS as described above. Thereafter the MS completes the WDR at block block prepares parameters and block invokes processing already described above. Processing terminates thereafter at block . Parameters set at block are WDRREF a reference or pointer to the MS WDR DELETEQ location queue discard processing and SUPER supervisory notification e.g. no supervisory notification processing because it was already handled at block or by being in context of the service processing . processing is available at any appropriate time for the MS. In an alternate embodiment the MS senses its environment to determine whereabouts.

CONFIDENCE field is preferably set with Should be high confidence e.g. 98 for indisputable contact sensing and is typically set with the same value.

LOCATION TECHNOLOGY field is preferably set with Contact or a specific type of Contact. The originator indicator is set to DLM.

SPEED field is preferably set with null not set but can be set with speed required to arrive to the current location from a previously known time at a location assuming the same time scale is used.

HEADING field is preferably set with null not set but can be set to heading determined when arriving to the current location from a previously known location.

With reference back to block the user interfaces with the MS user interface to manually specify WDR information. The user can specify 

The user can specify a relevant confidence value for the manually entered location however processing at block preferably automatically defaults a confidence value for the data entered. For example a complete address validated at block will have a high confidence. A partial address such as city and state or a zip code will have a low confidence value. The confidence value will reflect how large an area is candidate for where the MS is actually located. To prevent completely relying on the user at block for accurate WDR information validation embodiments may be deployed. Some examples 

After WDR information is specified at block the MS completes the WDR at block block prepares parameters for processing and at block the MS invokes processing already described above before returning back to block . Parameters set at block are WDRREF a reference or pointer to the MS WDR DELETEQ location queue discard processing and SUPER supervisory notification processing. Various embodiments permit override of the confidence floor value by the user or by processing. Block may convert the user specified information into a standardized more usable form in an LN expanse e.g. convert to latitude and longitude if possible truncated precision for more area coverage . WDR fields see are set analogously in light of the many variations already described above.

With reference back to block if it is determined that the MS is equipped with capability e.g. in range or in readiness to locate itself then processing continues to block where the MS locates itself using MS driven capability described by C B B and A or MS driven alternative embodiments to B B A D A and B or any other MS capability for determining its own whereabouts with or without help from other data processing systems or services. Interfacing to locating capability preferably involves a timeout in case there is no or slow response therefore block continues to block where it determined whether or not block timed out prior to determining a location. If block determines a timeout was encountered then block provides the user with an error to the user interface and processing continues back to block . Block preferably requires use acknowledgement prior to continuing to block .

If block determines there was no timeout i.e. whereabouts successfully determined then block interfaces to the locating interface to get WDR information block completes a WDR and blocks and do as described above. If block determines the MS cannot locate itself and needs help then block emits at least one broadcast request to any listening service which can provide the MS its location. Appropriate correlation is used for an anticipated response. Example services listening are service driven capability described by B B A D A and B or service side alternative embodiments of C B B and A or any other service capability for determining MS whereabouts with or without help from the MS or other data processing systems or services. Block then continues to block .

If block determines a timeout was encountered from the service broadcast request then block provides the user with an error to the user interface and processing continues back to block . If block determines there was no timeout i.e. whereabouts successfully determined then block receives WDR information from the locating interface of the responding service block completes a WDR and blocks and do as already described above.

See descriptions. Depending how the MS was located via processing started at block to block a WDR is completed analogous to as described in Figs. above. If the user manually specified whereabouts at block fields are set to the following upon exit from block 

LOCATION field is preferably set with Location entered by the user or converted from entry by the user preferably validated.

CONFIDENCE field is preferably set with User specified confidence value or a system assigned value per a validated manual specification. Confidence should reflect confidence of location precision e.g. validated full address high city and zip code low etc . Manually specified confidences are preferably lower than other location technologies since users may abuse or set incorrectly unless validated. Specifying lower confidence values than technologies above for completely manual WDR specifications i.e. no validation ensures that manual specifications are only used by the MS in absence of other technologies. LOCATION TECHNOLOGY field is preferably set with Manual or Manual Validated . Types of validations may further be elaborated. The originator indicator is set to DLM. LOCATION REFERENCE INFO field is preferably set with null not set . COMMUNICATIONS REFERENCE INFO field is preferably set with null not set . SPEED field is preferably set with null not set . HEADING field is preferably set with null not set . ELEVATION field is preferably set with null not set . APPLICATION FIELDS field is preferably set with Same as was described for block above or as decided by the user. CORRELATION FIELD is preferably set with Not Applicable i.e. not maintained to queue . SENT DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue . RECEIVED DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue .

The table has DLM location methods for rows and a single column for the MS e.g. DLM . Each location technology can be driven by the client i.e. the MS or a service i.e. the location server s as denoted by a row qualifier C for client or S for service. An MS may be located by many technologies. The table illustrated shows that the MS with unique identifier 0A12 43 EF 985B 012F is able to be heterogeneously located specifically with local MS GPS capability service side cell tower in range detection service side cell tower TDOA service side cell tower MPT combination of TDOA and AOA service side antenna in range detection service side antenna AOA service side antenna TDOA service side antenna MPT service side contact sensory and general service side MPT. The unique identifier in this example is a universal product identifier like Host Bus Adapter HBA World Wide Name WWN identifiers are generated but could be in other form as described above e.g. phone 214 403 4071 . An MS can have any subset of technologies used to locate it or all of the technologies used to locate it at some time during its travels. An MS is heterogeneously located when two or more location technologies are used to locate the MS during MS travels and or when two or more location technologies with incomplete results are used in conjunction with each other to locate the MS during MS travels such as MPT. MPT is a heterogeneous location technology because it uses at least two different methods to accomplish a single location determination. Using combinations of different location technologies can be used for example a TDOA measurement from an in range antenna with a TDOA measurement relative a cell tower e.g. as accomplished in MS processing of using completely different services that have no knowledge of each other. Another combination is to use a synergy of whereabouts data from one technology with whereabouts data from another technology. For example in range detection is used in combination with graphical identification to provide better whereabouts of a MS. In another example a GPS equipped MS travels to an area where GPS does not work well e.g. downtown amidst large and tall buildings . The DLM becomes an ILM and is triangulated relative other MSs. So an MS is heterogeneously located using two or more technologies to determine a single whereabouts or different whereabouts of the MS during travel.

In some embodiments of processing Missing Part Triangulation MPT is used to heterogeneously locate an MS. For a service side embodiment example block begins service processing when TDOA information itself cannot be used to confidently locate the MS or AOA information itself cannot be used to confidently locate the MS however using angles and distances from each in conjunction with each other enables solving whereabouts confidently. See Missing Part Triangulation MPT section below with discussions for for MPT processing of blocks and . Data discovered at block and processed by block depends on the embodiment what stationary reference point locations are known at the time of blocks and processing and which parts are missing for triangulating the MS. Having three 3 sides all TDOA with known stationary vertices location s solves the triangle for locating the MS. Three 3 angles all AOA with known stationary vertices location s solves the triangle for locating the MS. Those skilled in the art appreciate that solving triangulation can make complementary use of different distances time used to determine length in TDOA and angles from AOA for deducing a MS location confidently e.g. MPT . Those skilled in the art recognize that having stationary reference locations facilitates requiring less triangular information for deducing a MS location confidently.

While MPT has been discussed by example flowchart B is not to be interpreted in a limiting sense. Any location technologies for example as shown in can be used in conjunction with each other when not all information required is available in a single location technology to confidently deduce an MS location. Data available from the different location technologies available will be examined on its own merits and optionally used in conjunction to deduce a confident location. For example a TDOA difference between when signal sent and when received measurement from coming within range technology can be used to distinguish how close or how far is an MS in the vicinity. That measurement may be used to more confidently locate the MS using other TDOA measurements from other unrelated coming within range whereabouts information.

With the many DLM examples above it should be clear now to the reader how to set the WDR for DLM invoked processing. There can be other location technologies that will set WDR fields analogously. Locating methodologies of can be used in any combination for example for more timely or accurate locating. Furthermore a MS automatically takes on a role of a DLM or ILM depending on what capability is available at the time regardless of whether or not the MS is equipped for being directly located. As a DLM roams to unsupported areas it can remain a DLM using different DLM technologies and it can become an ILM to depend on other MSs ILMs or DLMs in the vicinity to locate it.

With reference now to ILM has been located relative a plurality of DLMs namely DLM DLM and DLM . ILM is located analogously to ILM as described for except there are different DLMs involved with doing the locating of ILM because of a different location of ILM . illustrate that MSs can be located using other MSs rather than fixed stationary references described for . ILM and ILM are indirectly located using DLMs .

With reference now to ILM is automatically located using the reference locations of ILM ILM and ILM . ILM ILM and ILM can be mobile while providing reference locations for automatically determining the location of ILM . ILM is located analogously to ILM as described for except there are different ILMs involved with doing the locating of ILM because of a different location of ILM . Note that as ILMs are located in the LN expanse the LN expanse expands with additionally located MSs.

With reference now to ILM is automatically located using the reference locations of ILM ILM and ILM . ILM ILM and ILM can be mobile while providing reference locations for automatically determining the location of ILM . ILM is located analogously to ILM as described for except there are different ILMs involved with doing the locating of ILM because of a different location of ILM . illustrate that an MS can be located using all ILMs rather than all DLMs a mixed set of DLMs and ILMs or fixed stationary references . ILMs and are indirectly located using ILMs. Note that in the illustrations the LN expanse has expanded down and to the right from DLMs directly located up and to the left. It should also be noted that locating any MS can be done with at least one other MS. Three are not required as illustrated. It is preferable that triangulation references used surround an MS.

With reference now to an analysis of an LN Expanse will contain at least one DLM region containing a plurality of DLMs and at least one DLM indirectly located region containing at least one ILM that has been located with all DLMs. Depending on the range or scope of an LN Expanse there may be a mixed region containing at least one ILM that has been indirectly located by both an ILM and DLM and there may be an exclusive ILM region containing at least one ILM that has been indirectly located by all ILMs. The further in distance the LN Expanse has expanded from DLM region with a substantial number of MSs the more likely there will an exclusive ILM region . NTP may be available for use in some regions or some subset of a region yet not available for use in others. NTP is preferably used where available to minimize communications between MSs and an MS and service s . An MS has the ability to make use of NTP when available.

With reference now to all MSs depicted know their own locations. The upper left hand portion of the illustration consists of region . As the reader glances more toward the rightmost bottom portion of the illustration there can be regions and regions in the middle of the illustration. At the very rightmost bottom portion of the illustration remaining ILMs fall in region . An ILM is indirectly located relative all DLMs DLMs and ILMs or all ILMs. An Affirmifier in a LN expanse confidently knows its own location and can serve as a reference MS for other MSs. An affirmifier is said to affirmify when in the act of serving as a reference point to other MSs. A Pacifier can contribute to locating other systems but with a low confidence of its own whereabouts. The LN Expanse is a network of located locatable MSs and is preferably expanded by a substantial number of affirmifiers.

Some fields are multi part fields i.e. have sub fields . Whereabouts Data Records WDRs may be fixed length records varying length records or a combination with field s in one form or the other. Some WDR embodiments will use anticipated fixed length record positions for subfields that can contain useful data or a null value e.g. 1 . Other WDR embodiments may use varying length fields depending on the number of sub fields to be populated. Other WDR embodiments will use varying length fields and or sub fields which have tags indicating their presence. Other WDR embodiments will define additional fields to prevent putting more than one accessible data item in one field. In any case processing will have means for knowing whether a value is present or not and for which field or sub field it is present. Absence in data may be indicated with a null indicator 1 or indicated with its lack of being there e.g. varying length record embodiments .

When a WDR is referenced in this disclosure it is referenced in a general sense so that the contextually reasonable subset of the WDR of is used. For example when communicating WDRs sending receiving data or between data processing systems a reasonable subset of WDR is communicated in preferred embodiments as described with flowcharts. When a WDR is maintained to queue preferably most if not all fields are set for a complete record regardless if useful data is found in a particular field e.g. some fields may be null e.g. 1 . Most importantly Whereabouts Data Records WDRs are maintained to queue for maintaining whereabouts of the MS which owns queue . LBX is most effective the more timely and continuous a MS has valid whereabouts locally maintained. WDRs are designed for maintaining whereabouts information independent of any location technology applied. Over time a MS may encounter a plurality of location technologies used to locate it. WDRs maintained to a first MS queue have the following purpose 

A MS may go in and out of DLM or ILM roles as it is mobile. Direct location methods are not always available to the MS as it roams therefore the MS preferably does all of 1 through 5 above. When the WDR contains a MS ID field matching the MS which owns queue that WDR contains the location location field with a specified confidence field at a particular time date time stamp field for that MS. Preferably the MS ID field date time stamp field and confidence field is all that is required for searching from the queue the best possible and most timely MS whereabouts at the time of searching queue . Other embodiments may consult any other fields to facilitate the best possible MS location at the time of searching and or processing queue . The WDR queue also maintains affirmifier WDRs and acceptable confidence pacifier WDRs block which are used to calculate a WDR having matching MS field so the MS knows its whereabouts via indirect location methods. Affirmifier and pacifier WDRs have MS ID field values which do not match the MS owning queue . This distinguishes WDRs of queue for A accessing is the current MS location from B the WDRs from other MSs. All WDR fields of affirmifier and pacifier originated WDRs are of importance for determining a best location of the MS which owns queue and in providing LBX functionality.

MS ID field is a unique handle to an MS as previously described. Depending on the installation MS ID field may be a phone physical or logical address name machine identifier serial number encrypted identifier concealable derivative of a MS identifier correlation pseudo MS ID or some other unique handle to the MS. An MS must be able to distinguish its own unique handle from other MS handles in field . For indirect location functionality disclosed herein affirmifier and pacifier WDRs do not need to have a correct originating MS ID field . The MS ID may be null or anything to distinguish WDRs for MS locations. However to accomplish other LBX features and functionality MS Identifiers MS IDs of nearby MSs or unique correlations thereof maintained in queue are to be known for processing by an MS. MS ID field may contain a group identifier of MSs in some embodiments for distinguishing between types of MSs e.g. to be treated the same or targeted with communications as a group as long as the MS containing queue can distinguish its own originated WDRs . A defaulted value may also be set for a do not care setting e.g. null .

Date Time stamp field contains a date time stamp of when the WDR record was completed by an MS for its own whereabouts prior to WDR queue insertion. It is in terms of the date time scale of the MS inserting the local WDR NTP derived or not . Date Time stamp field may also contain a date time stamp of when the WDR record was determined for the whereabouts of an affirmifier or pacifier originating record to help an MS determine its own whereabouts but it should still be in terms of the date time scale of the MS inserting the local WDR NTP derived or not to prevent time conversions when needed and to promote consistent queue searches sorts etc. The date time stamp field should use the best possible granulation of time and may be in synch with other MSs and data processing systems according to NTP. A time zone day light savings time and NTP indicator is preferably maintained as part of field . The NTP indicator e.g. bit is for whether or not the date time stamp is NTP derived e.g. the NTP use setting is checked for setting this bit when completing the WDR for queue insertion . In some embodiments date time stamp field is measured in the same granulation of time units to an atomic clock available to MSs of an LN Expanse . When NTP is used in a LN Expanse identical time server sources are not a requirement provided NTP derived date time stamps have similar accuracy and dependability.

Location field depends on the installation of the present disclosure but can include a latitude and longitude cellular network cell identifier geocentric coordinates geodetic coordinates three dimensional space coordinates area described by GPS coordinates overlay grid region identifier or coordinates GPS descriptors altitude elevation e.g. in lieu of using field MAPSCO reference physical or logical network address including a wildcard e.g. ip addresses 145.32. . particular address polar coordinates or any other two three dimensional location methods means used in identifying the MS location. Data of field is preferably a consistent measure e.g. all latitude and longitude for all location technologies that populate WDR queue . Some embodiments will permit using different measures to location field e.g. latitude and longitude for one address for another polar coordinates for another etc which will be translated to a consistent measure at appropriate processing times.

Confidence field contains a value for the confidence that location field accurately describes the location of the MS when the WDR is originated by the MS for its own whereabouts. Confidence field contains a value for the confidence that location field accurately describes the location of an affirmifier or pacifier that originated the WDR. A confidence value can be set according to known timeliness of processing communications and known mobile variables e.g. MS speed heading yaw pitch roll etc at the time of transmission. Confidence values should be standardized for all location technologies used to determine which location information is of a higher lower confidence when using multiple location technologies as determined by fields and for enabling determination of which data is of a higher priority to use in determining whereabouts. Confidence value ranges depend on the implementation. In a preferred embodiment confidence values range from 1 to 100 as discussed previously for denoting a percentage of confidence. 100 confidence indicates the location field is guaranteed to describe the MS location. 0 confidence indicates the location field is guaranteed to not describe the MS location. Therefore the lowest conceivable value of a queue for field should be 1. Preferably there is a lowest acceptable confidence floor value configured by system administrator or user as used at points of queue entry insertion see block to prevent frivolous data to queue . In most cases WDRs contain a confidence field up to 100. In confidence value preferred embodiments pacifiers know their location with a confidence of less than 75 and affirmifiers know their location with a confidence value 75 or greater. The confidence field is skewed to lower values as the LN expanse is expanded further from region . Confidence values are typically lower when ILMs are used to locate a first set of ILMs i.e. first tier and are then lower when the first set of ILMs are used to locate a second set of ILMs second tier and then lower again when the second set of ILMs are used to locate a third set of ILMs third tier and so on. Often examination of a confidence value in a WDR can indicate whether the MS is a DLM or an ILM far away from DLMs or an MS which has been located using accurate high confidence or inaccurate low confidence locating techniques.

Location Technology field contains the location technology used to determine the location of location field . An MS can be located by many technologies. Location Technology field can contain a value from a row of or any other location technology used to locate a MS. WDRs inserted to queue for MS whereabouts set field to the technology used to locate the MS. WDRs inserted to queue for facilitating a MS in determining whereabouts set field to the technology used to locate the affirmifier or pacifier. Field also contains an originator indicator e.g. bit for whether the originator of the WDR was a DLM or ILM. When received from a service that has not provided confidence this field may be used by a DLM to determine confidence field

Location Reference Info field preferably contains one or more fields useful to locate a MS in processing subsequent of having been inserted to queue . In other embodiments it contains data that contributed to confidence determination. Location Reference Info field may contain information TDOA measurement and or AOA measurement see inserted field for E and C useful to locate a MS in the future when the WDR originated from the MS for its own whereabouts. Field will contain selected triangulation measurements wave spectrum used and or particular communications interfaces signal strength s TDOA information AOA information or any other data useful for location determination. Field can also contain reference whereabouts information to use relative a TDOA or AOA otherwise WDR location field assumed as reference . In one embodiment field contains the number of DLMs and ILMs which contributed to calculating the MS location to break a tie between using WDRs with the same confidence values. In another embodiment a tier of ILMs used to locate the MS is maintained so there is an accounting for the number of ILMs in the LN expanse between the currently located MS and a DLM. In other embodiments MS heading yaw pitch and roll or accelerometer values are maintained therein for example for antenna AOA positioning. When wave spectrum frequencies or other wave characteristics have changed in a transmission used for calculating a TDOA measurement appropriate information may be carried along for example to properly convert a time into a distance. Field should be used to facilitate correct measurements and uses if needed conversions have not already taken place.

Communications reference information field is a multipart record describing the communications session channel and bind criteria between the MS and MSs or service s that helped determine its location. In some embodiments field contains unique MS identifiers protocol used logon access parameters and useful statistics of the MSs which contributed to data of the location field . An MS may use field for WDRs originated from affirmifiers and pacifiers for subsequent LBX processing.

Speed field contains a value for the MS speed when the WDR is originated by the MS for its own whereabouts. Speed field may contain a value for speed of an affirmifier or pacifier when the WDR was originated elsewhere. Speed is maintained in any suitable units.

Heading field contains a value for the MS heading when the WDR is originated by the MS for its own whereabouts. Heading field may contain a value for heading of an affirmifier or pacifier when the WDR was originated elsewhere. Heading values are preferably maintained in degrees up to 360 from due North but is maintained in any suitable directional form.

Elevation field contains a value for the MS elevation or altitude when the WDR is originated by the MS for its own whereabouts. Elevation field may contain a value for elevation altitude of an affirmifier or pacifier when the WDR was originated elsewhere. Elevation or altitude is maintained in any suitable units.

Application fields contains one or more fields for describing application s at the time of completing or originating the WDR . Application fields may include field s for 

Correlation field is optionally present in a WDR when the WDR is in a transmission between systems e.g. wireless communications such as in data or . Field provides means for correlating a response to an earlier request or to correlate a response to an earlier broadcast. Correlation field contains a unique handle. In a LN expanse which globally uses NTP there is no need for correlation in data or . Correlation field may be present in WDRs of queues or . Alternatively a MS ID is used for correlation.

Sent date time stamp field is optionally present in a WDR when the WDR is in transmission between systems e.g. wireless communications such as in data or . Field contains when the WDR was transmitted. A time zone day light savings time and NTP indicator is preferably maintained as part of field . Field is preferably not present in WDRs of queue but can be if TDOA measurement calculation is delayed to a later time . In some embodiments there is no need for field . Whereabouts determined for MSs of an LN Expanse may be reasonably timely facilitating simplicity of setting outbound field to the transmission date time stamp at the sending data processing system rather than when the WDR was originally completed for whereabouts e.g. when substantially the same time anyway . Sent date time field may be present in WDRs of queues or .

Received date time stamp field is preferably present in a WDR when inserted to queue by receiving thread s upon received data or . Field contains when the WDR was received by the MS. A time zone day light savings time and NTP indicator is preferably maintained as part of field . Field is preferably not present in WDRs of queue but can be if TDOA measurement calculation is delayed to a later time . In some embodiments there is no need for field . For example thread s may be listening directly on applicable channel s and can determine when the data is received. In another embodiment thread s process fast enough to determine the date time stamp of when data or is received since minimal time has elapsed between receiving the signal and determining when received. In fact known processing duration between when received and when determined to be received can be used to correctly alter a received date time stamp. Received date time stamp field is preferably added to records placed to queue by receiving thread s feeding queue .

Any fields of WDR which contain an unpredictable number of subordinate fields of data preferably use a tagged data scheme for example an X.409 encoding for a Token Length and Value called a TLV encoding . Therefore a WDR or field therein can be a variable sized record. For example Location Reference info field may contain TTA 8 0.1456 where the Token TTA for Time Till Arrival TDOA measurement between when sent and when received Length 8 for 8 bytes to follow and Value 0.1456 in time units contained within the 8 bytes also SS 4 50 where Token Signal Strength 4 4 for 4 bytes to follow and Value 50 dBu for the signal strength measurement. This allows on the fly parsing of unpredictable but interpretable multipart fields. The TLV encoding also enables on the fly configuration for parsing new subordinate fields to any WDR field in a generic implementation for example in providing parse rules to a Lex and Yacc implementation or providing parse rules to a generic top down recursive TLV encoding parser and processor.

Any field of WDR may be converted a prior to insertion to queue or b after access to queue or c by queue interface processing for standardized processing. Any field of WDR may be converted when sending receiving broadcasting or related processing to ensure a standard format. Other embodiments will store and access values of WDR field s which are already in a standardized format. WDR fields can be in any order and a different order when comparing what is in data transmitted versus data maintained to queue .

An alternate embodiment to WDRs maintained to queue preserves transport fields and or for example for use on queue . This would enable thread s to perform TDOA measurements that are otherwise calculated in advance and kept in field . However queue size should be minimized and the preferred embodiment uses transport fields when appropriate to avoid carrying them along to other processing.

With reference now to a triangulation of MS at location is explained using location whereabouts of MS location whereabouts of MS and location whereabouts of MS. Signal transmission distance from MSlocations are represented by the radiuses with rthe TDOA measurement time difference between when sent and when received between MSand MS with rthe TDOA measurement time difference between when sent and when received between MSand MS with rthe TDOA measurement time difference between when sent and when received between MSand MS . In this example the known locations of MSwhich are used to determine the location of MS allow triangulating the MS whereabouts using the TDOA measurements. In fact less triangular data in the illustration can be necessary for determining a highly confident whereabouts of MS

With reference now to a triangulation of MS at location is explained using location whereabouts of MS location whereabouts of MS and location whereabouts of MS. In some embodiments AOA measurements taken at a positioned antenna of MS at location are used relative the whereabouts whereabouts whereabouts AOA AOA and AOA wherein AOA measurements are detected for incoming signals during known values for MS heading with MS yaw pitch and roll or accelerometer readings . AOA triangulation is well known in the art. Line segment represents the direction of signal arrival to the antenna at whereabouts from MSat whereabouts . Line segment represents the direction of signal arrival to the antenna at whereabouts from MSat whereabouts . Line segment represents the direction of signal arrival to the antenna at whereabouts from MSat whereabouts . In this example the known locations of MSwhich are used to determine the location of MS allow triangulating the MS whereabouts using the AOA measurements. In fact less triangular data in the illustration can be necessary for determining a highly confident whereabouts of MS . Alternative embodiments will use AOA measurements of outbound signals from the MS at whereabouts detected at antennas of whereabouts and or and or .

TDOA measurements are distances e.g. time difference between when sent and when received and AOA measurements are angles. Each of the four conditions are recognized e.g. block above and data is passed for each of the four conditions for processing e.g. block above . For AAS 1 and ASA 2 processing e.g. block finds the third angle by subtracting the sum of the two known angles from 180 degrees i.e. using mathematical law that triangles interior angles add up to 180 degrees and uses the mathematical law of Sines i.e. a sin A b sin B c sin C twice to find the second and third sides after plugging in the knowns and solving for the unknowns. For SAS 3 processing e.g. block uses the mathematical law of Cosines i.e. a b c 2bc cos A to find the third side and uses the mathematical law of Sines sin A a sin B b sin C c derived from law of Sines above to find the second angle. For SSA 4 processing e.g. block uses the mathematical law of Sines i.e. sin A a sin B b sin C c twice to get the second angle and mathematical law of Sines a sin A b sin B c sin C to get the third side. Those skilled in the art recognize other useful trigonometric functions and formulas and similar uses of the same trigonometric functions for MPT depending on what data is known. The data discovered and processed depends on an embodiment what reference locations are available and which parts are missing for MPT. MPT uses different distances time used to determine length in TDOA and or angles from AOA or TDOA technologies for deducing a MS location confidently e.g. MPT . Those skilled in the art recognize that having known reference locations facilitates requiring less triangular information for deducing a MS location confidently. MPT embodiments may exist for any aforementioned wave spectrums.

If block determines NTP is enabled as defaulted or last set by a user i.e. persistent variable then block initializes NTP appropriately and processing continues to block . If block determines NTP was not enabled then processing continues to block . Block embodiments are well known in the art of NTP implementations also see block . Block may cause the starting of thread s associated with NTP. In some embodiments NTP use is assumed in the MS. In other embodiments appropriate NTP use is not available to the MS. Depending on the NTP embodiment thread s may pull time synchronization information or may listen for and receive pushed time information. Resources or other MS local resource provides interface to an MS clock for referencing maintaining and generating date time stamps at the MS. After block processing the MS clock is synchronized to NTP. Because of initialization of the MS in block may rely on a connected service to initially get the startup synchronized NTP date time. MS NTP processing will ensure the NTP enabled disabled variable is dynamically set as is appropriate using semaphore access because an MS may not have continuous clock source access during travel when needed for resynchronization. If the MS does not have access to a clock source when needed the NTP use variable is disabled. When the MS has or again gets access to a needed clock source then the NTP use variable is enabled.

Thereafter block creates shared memory to maintain data shared between processes threads block initializes persistent data to shared memory block initializes any non persistent data to shared memory e.g. some statistics block creates system queues and block creates semaphore s used to ensure synchronous access by concurrent threads to data in shared memory before continuing to block . Shared memory data accesses appropriately utilize semaphore lock windows semaphore s created at block for proper access. In one embodiment block creates a single semaphore for all shared memory accesses but this can deteriorate performance of threads accessing unrelated data. In the preferred embodiment there is a semaphore for each reasonable set of data of shared memory so all threads are fully executing whenever possible. Persistent data is that data which maintains values during no power for example as stored to persistent storage . This may include data including permissions charters statistics service directory data LBX history data resources and or other data. Persistent data preferably includes at least the DLMV see DLM role s list Variable below ILMV see ILM role s list Variable below process variables 19xx Max values 19xx and see discussions below for the last configured maximum number of threads to run in the respective process process variables 19xx PID values 19xx and see discussions below for multi purpose of a holding an Operating System Process Identifier i.e. O S PID for a process started and b whether or not the respective process was last enabled i.e. PID 0 or disabled i.e. PID

All queues disclosed herein are understood to have their own internally maintained semaphore for queue accesses so that queue insertion peeking accessing etc uses the internally maintained semaphore to ensure two or more concurrently executing threads do not corrupt or misuse data to any queue. This is consistent with most operating system queue interfaces wherein a thread stays blocked preempted after requesting a queue entry until a queue entry appears in the queue. Also no threads will collide with another thread when inserting peeking or otherwise accessing the same queue. Therefore queues are implicitly semaphore protected. Other embodiments may use an explicit semaphore protected window around queue data accessing in which case those semaphore s are created at block .

Thereafter block checks for any ILM roles currently enabled for the MS for example as determined from persistent storage of an ILM role s list Variable ILMV preferably preconfigured for the MS at first use or configured as last configured by a user of the MS . ILM roles are maintained to the ILM role s list Variable ILMV . The ILMV contains one or more entries for an ILM capability role each entry with a flag indicating whether it is enabled or disabled marked enabled unmarked disabled . If block determines there is at least one ILM role enabled i.e. as marked by associated flag then block artificially sets the corresponding 19xx PID variables to a value greater than 0 for indicating the process es are enabled and are to be started by subsequent initialization processing. The 19xx PID will be replaced with the correct Process Identifier PID upon exit from block after the process is started. Preferably every MS can have ILM capability. However a user may want to configure ensure a DLM has no ILM capability enabled e.g. or having no list present . In some embodiments by default every MS has an unmarked list of ILM capability maintained to the ILMV for 1 USE DLM REFERENCES and 2 USE ILM REFERENCES. USE DLM REFERENCES when enabled marked in the ILMV indicates to allow the MS of processing to determine its whereabouts relative remote DLMs. USE ILM REFERENCES when enabled marked in the ILMV indicates to allow the MS of processing to determine its whereabouts relative remote ILMs. Having both list items marked indicates to allow determining MS whereabouts relative mixed DLMs and ILMs. An alternative embodiment may include a USE MIXED REFERENCES option for controlling the MS of processing to determine its whereabouts relative mixed DLMs and or ILMs. Alternative embodiments will enforce any subset of these options without exposing user configurations for example on a MS without any means for being directly located.

For any of the ILMV roles of USE DLM REFERENCES USE ILM REFERENCES or both all processes and are preferably started i.e. PID PID PID PID PID and PID are artificially set at block to cause subsequent process startup at block . Characteristics of an anticipated LN expanse e.g. anticipated location technologies of participating MSs MS capabilities etc will start a reasonable subset of those processes with at least process started. Block continues to block . If block determines there are no ILMV role s enabled then block processing continues to block .

Block initializes an enumerated process name array for convenient processing reference of associated process specific variables described in and continues to block where the first member of the set is accessed for subsequent processing. The enumerated set of process names has a prescribed start order for MS architecture . Thereafter if block determines the process identifier i.e. 19xx PID such that 19xx is in a loop iteration of blocks through is greater than 0 e.g. this first iteration of PID 0 implies it is to be started here also implies process is enabled as used in A and B then block spawns starts the process e.g. of to start execution of subordinate worker thread s e.g. process thread s and saves the real PID Process Identifier to the PID variable e.g. PID returned by the operating system process spawn interface. Block passes as a parameter to the process of which process name to start e.g. and continues to block . If block determines the current process PID variable e.g. PID is not greater than 0 i.e. not to be started also implies is disabled as used in A and B then processing continues to block . Block checks to see if all process names of the enumerated set pattern of 19xx have been processed iterated by blocks through . If block determines that not all process names in the set have been processed iterated then processing continues back to block for handling the next process name in the set. If block determines that all process names of the enumerated set were processed then block checks the DLMV DLM role s list Variable . Blocks through iterate every process name of to make sure that each is started in accordance with non zero 19xx PID variable values at initialization.

Block checks for any DLM roles currently enabled for the MS for example as determined from persistent storage of a DLM role s list Variable DLMV preferably preconfigured for the MS at first use if the MS contains DLM capability . DLM capability roles whether on board at the MS or determined during MS travels see block is maintained to the DLM role s list Variable DLMV . The DLMV contains one or more entries for a DLM capability role each role entry with a flag indicating whether it is enabled or disabled marked enabled unmarked disabled . If block determines there is at least one DLM role enabled i.e. as marked by associated flag then block initializes enabled role s appropriately and processing continues to block . Block may cause the starting of thread s associated with enabled DLM role s for DLM processing above e.g. . Block may invoke API s enable flag s or initialize as is appropriate for DLM processing described above. Such initializations are well known in the art of prior art DLM capabilities described above. If block determines there are no DLM roles to initialize at the MS then processing continues to block . Any of the technologies are eligible in the DLMV as determined to be present at the MS and or as determined by historical contents of the WDR queue e.g. location technology field with MS ID field for this MS and or determined by LBX history . Application Programming Interfaces APIs may also be used to determine MS DLM capability role s for entry s to the DLMV.

Block completes LBX character initialization and initialization processing terminates thereafter at block . Depending on what threads were started as part of block Block may startup the preferred number of listen receive threads for feeding queue and the preferred number of send threads for sending data inserted to queue in particular when transmitting new data and receiving new data or . The number of threads started should be optimal for parallel processing across applicable channel s . Upon encounter of block the MS is appropriately operational and a user at the MS of processing will have the ability to use the MS and applicable user interfaces thereof.

With reference now to depicted is a flowchart for describing a preferred embodiment of a process for starting a specified number of threads in a specified thread pool. is in itself an O S process has a process identifier PID after being started will contain at least two threads of processing after being started and is generic in being able to take on the identity of any process name passed to it e.g. 19xx with a parameter e.g. from block . represents the parent thread of a 19xx process. The FIG. A process is generic for executing any of processes 19xx i.e. and with the prescribed number of worker threads using the 19xx Max configuration i.e. Max Max Max Max Max and Max . will stay running until it first all of its worker thread s is terminated. consists of an O S Process 19xx with at least a parent thread main thread and one worker thread or number of worker threads for processing as determined by 19xx Max . The parent thread has purpose to stay running while all worker threads are running and to own intelligence for starting worker threads and terminating the process when all worker threads are terminated. The worker threads are started subordinate to the process at block using an O S start thread interface.

A 19xx i.e. and process starts at block and continues to block where the parameter passed for which process name to start i.e. take on identity of is determined e.g. . Thereafter block creates a RAM semaphore i.e. operating system term for a well performing Random Access Memory RAM semaphore with scope only within the process i.e. to all threads of the process . The local semaphore name preferably uses the process name prefix e.g. Sem and is used to synchronize threads within the process. RAM semaphores perform significantly better than global system semaphores. Alternate embodiments will have process semaphore s created at block in advance. Thereafter block initializes a thread counter e.g. Ct to 0 for counting the number of worker threads actually started within the 19xx process e.g. block initializes a loop variable J to 0 and block starts a worker thread the first one upon first encounter of block for a process in this process e.g. process starts worker thread . . . process starts worker thread FIG. A see architecture description below .

Thereafter block increments the loop variable by 1 and block checks if all prescribed worker threads have been started. Block accesses the 19xx Max e.g. Max variable from shared memory using a semaphore for determining the maximum number of threads to start in the process worker thread pool. If block determines all worker threads have been started then processing continues to block . If block determines that not all worker threads have been started for the process of then processing continues back to block for starting the next worker thread. Blocks through ensure the 19xx Max e.g. Max number of worker threads are started within the process of .

Block waits until all worker threads of blocks through have been started as indicated by the worker threads themselves. Block waits until the process 19xx Ct variable has been updated to the prescribed 19xx Max value by the started worker threads thereby indicating they are all up and running. When all worker threads are started e.g. Ct Max thereafter block waits perhaps a very long time until the worker thread count e.g. Ct has been reduced back down to 0 for indicating that all worker threads have been terminated for example when the user gracefully powers off the MS. Block continues to block when all worker threads have been terminated. Block sets the shared memory variable for the 19xx process e.g. PID to 0 using a semaphore for indicating that the 19xx e.g. process is disabled and no longer running. Thereafter the 19xx process terminates at block . Waiting at blocks and are accomplished in a variety of well known methods 

Starting threads of processing in has been presented from a software perspective but there are hardware firmware thread embodiments which may be started appropriately to accomplish the same functionality. If the MS operating system does not have an interface for returning the PID at block then can have a block e.g. used to determine its own PID for setting the 19xx PID variable.

In another embodiment data contains a Communications Key CK because data is new transmitted data in accordance with the present disclosure. Data purpose is for carrying CK information for being detected parsed and processed when received by another MS or other data processing system in the vicinity of the MS e.g. DLM as determined by the maximum range of transmission .

With reference now to a MS for example an ILM sends broadcasts data such as a data in a manner well known to those skilled in the art. Data and CK are as described above for . Data or CK can be detected parsed and processed when received by another MS or other data processing system in the vicinity of the MS e.g. ILM as determined by the maximum range of transmission . Transmission from the MS radiate out from it in all directions in a manner consistent with the wave spectrum used and as described above for .

With reference now to a service or set of services sends broadcasts data such as a data packet in a manner well known to those skilled in the art for example to service other character processing. When a Communications Key CK is embedded within data data is considered usual communications data e.g. protocol voice or any other data over conventional forward channel reverse channel voice data channel data transmission channel or any other prior art use channel which has been altered to contain CK . Data contains a CK which can be detected parsed and processed when received by an MS or other data processing system in the vicinity of the service s as determined by the maximum range of transmission . CK permits piggy backing on current transmissions to accomplish new functionality as disclosed herein. Transmissions radiate out in all directions in a manner consistent with the wave spectrum used and data carried thereon may or may not be encrypted e.g. encrypted WDR information . The radius represents a first range of signal reception from the service e.g. antenna thereof perhaps by a MS not shown . The radius represents a second range of signal reception from the service e.g. antenna thereof perhaps by a MS not shown . The radius represents a third range of signal reception from the service e.g. antenna thereof perhaps by a MS not shown . The radius represents a last and maximum range of signal reception from the service e.g. antenna thereof perhaps by a MS not shown . The time of transmission from service to radius is less than times of transmission from service to radiuses or . The time of transmission from service to radius is less than times of transmission from service to radiuses or . The time of transmission from service to radius is less than time of transmission from service to radius . In another embodiment data contains a Communications Key CK because data is new transmitted data in accordance with the present disclosure. Data purpose is for carrying CK information for being detected parsed and processed when received by another MS or data processing system in the vicinity of the service s as determined by the maximum range of transmission.

In some embodiments data and are prior art wireless data transmission packets with the exception of embedding a detectable CK and or CK respectively. Usual data communications of MSs are altered to additionally contain the CK so data processing systems in the vicinity can detect parse and process the CK. Appropriate send and or broadcast channel processing is used. In other embodiments data and are new broadcast wireless data transmission packets for containing CK and CK respectively. A MS may use send queue for sending broadcasting packets to data processing systems in the vicinity and may use the receive queue for receiving packets from other data processing systems in the vicinity. Contents of CKs Communications Keys depend on which LBX features are in use and the functionality intended.

In the case of piggybacking on usual communications receive queue insertion processing simply listens for the usual data and when detecting CK presence inserts CK information appropriately to queue for subsequent processing. Also in the case of piggybacking on usual communications send queue retrieval processing simply retrieves CK information from the queue and embeds it in an outgoing data at first opportunity. In the case of new data communications receive queue insertion processing simply listens for the new data containing CK information and inserts CK information appropriately to queue for subsequent processing. Also in the case of new data communications send queue retrieval processing simply retrieves CK information from the queue and transmits CK information as new data.

If block determines the user selected to maintain the WDR queue then the user maintains WDRs at block and processing continues back to block . Block processing is described by . Blocks and are understood to be delimited by appropriate semaphore control to avoid multi threaded access problems. If block determines the user did not select to maintain the WDR queue then processing continues to block . If block determines the user selected to configure the confidence floor value then block prepares parameters for invoking a Configure Value procedure parameters for reference address of value to configure and validity criteria of value to configure and the Configure Value procedure of is invoked at block with the two 2 parameters. Thereafter processing continues back to block . Blocks and are understood to be delimited by appropriate semaphore control when modifying the confidence floor value since other threads can access the floor value.

The confidence floor value is the minimum acceptable confidence value of any field for example as checked by block . No WDR with a field less than the confidence floor value should be used to describe MS whereabouts. In an alternative embodiment the confidence floor value is enforced as the same value across an LN expanse with no user control to modify it. One embodiment of does not permit user control over a minimum acceptable confidence floor value. Various embodiments will default the floor value. Block enforces an appropriate value in accordance with the confidence value range implemented e.g. value from 1 to 100 . Since the confidence of whereabouts is likely dependent on applications in use at the MS the preferred embodiment is to permit user configuration of the acceptable whereabouts confidence for the MS. A new confidence floor value can be put to use at next thread s startup or can be used instantly with the modification made depending on the embodiment. The confidence floor value can be used to filter out WDRs prior to inserting to queue filter out WDRs when retrieving from queue filter out WDR information when listening on channel s prior to inserting to queue and or used in accessing queue for any reason depending on embodiments . While confidence is validated on both inserts and queries retrievals peeks one or the other validation is fine preferably on inserts . It is preferred that executable code incorporate checks where applicable since the confidence floor value can be changed after queue is in use. Also various present disclosure embodiments may maintain all confidences to queue or a particular set of acceptable confidences.

If block determines the user did not select to configure the confidence floor value then processing continues to block . If block determines the user selected to configure the Whereabouts Timeliness Variable WTV then block prepares parameters for invoking the Configure Value procedure parameters for reference address of value to configure and validity criteria of value to configure and the Configure Value procedure of is invoked at block with the two 2 parameters. Thereafter processing continues back to block . Blocks and are understood to be delimited by appropriate semaphore control when modifying the WTV since other threads can access the WTV.

A critical configuration for MS whereabouts processing is whereabouts timeliness. Whereabouts timeliness is how often how timely an MS should have accurate whereabouts. Whereabouts timeliness is dependent on how often the MS is updated with whereabouts information what technologies are available or are in the vicinity how capable the MS is of maintaining whereabouts processing speed s transmission speed s known MS or LN expanse design constraints and perhaps other factors. In some embodiments whereabouts timeliness is as soon as possible. That is MS whereabouts is updated whenever possible as often as possible. In fact the present disclosure provides an excellent system and methodology to accomplish that by leveraging location technologies whenever and wherever possible. However there should be balance when considering less capable processing of a MS to prevent hogging CPU cycles from other applications at the MS. In other embodiments a hard coded or preconfigured time interval is used for keeping an MS informed of its whereabouts in a timely manner. For example the MS should know its own whereabouts at least every second or at least every 5 seconds or at least every minute etc. Whereabouts timeliness is critical depending on the applications in use at the MS. For example if MS whereabouts is updated once at the MS every 5 minutes during high speeds of travel when using navigation the user has a high risk of missing a turn during travel in downtown cities where timely decisions for turns are required. On the other hand if MS whereabouts is updated every 5 seconds and an application only requires an update accuracy to once per minute then the MS may be excessively processing.

In some embodiments there is a Whereabouts Timeliness Variable WTV configured at the MS blocks . Whether it is user configured system configured or preset in a system the WTV is used to 

If block determines the user did not select to configure the WTV then processing continues to block . If block determines the user selected to configure the maximum number of threads in a 19xx process see 19xx Max variable in discussions then block interfaces with the user until a valid 19xx max variable is selected and processing continues to block . If block determines the 19xx process is already running i.e. 19xx PID 0 implies it is enabled then an error is provided to the user at block and processing continues back to block . Preferably block does not continue back to block until the user acknowledges the error e.g. with a user action . If block determines the user selected 19xx process process process process process process or process is not already running i.e. 19xx PID 0 implies it is disabled then block prepares parameters for invoking the Configure Value procedure parameters for reference address of 19xx Max value to configure and validity criteria of value to configure and the Configure Value procedure of is invoked at block with the two 2 parameters. Thereafter processing continues back to block . Blocks and are understood to be delimited by appropriate semaphore control when modifying the 19xx Max value since other threads can access it. The 19xx Max value should not be modified while the 19xx process is running because the number of threads to terminate may be changed prior to terminating. An alternate embodiment of modifying a process number of threads will dynamically modify the number of threads in anticipation of required processing.

If block determines the user did not select to configure a process thread maximum 19xx Max then block checks to see if the user selected to toggle disable or enable a particular process i.e. a 19xx process of . If block determines the user did select to toggle enabling disabling a particular process then block interfaces with the user until a valid 19xx process name is selected and processing continues to block . If block determines the 19xx process is already running i.e. 19xx PID 0 implies it is enabled then block prepares parameters just as does block . Thereafter block invokes processing just as does block . Processing then continues back to block . If block determines the 19xx process is not running i.e. 19xx PID 0 implies it is disabled then block invokes processing just as does block . Processing then continues back to block . Block does not continue back to block until the process is completely terminated. Blocks and are understood to be delimited by appropriate semaphore control.

Preferred embodiments of blocks and use convenient names of processes being started or terminated rather than convenient brief process names such as or used in flowcharts. In some embodiments the long readable name is used such as whereabouts broadcast process whereabouts collection process whereabouts supervisor process timing determination process WDR request process and whereabouts determination process . For example the user may know that the whereabouts supervisor process enabled disabled indicates whether or not to have whereabouts timeliness monitored in real time. Enabling the whereabouts supervisor process enables monitoring for the WTV in real time and disabling the whereabouts supervisor process disables monitoring the WTV in real time.

In another embodiment of blocks and a completely new name or description may be provided to any of the processes to facilitate user interface usability. For example a new name Peer Location Source Variable PLSV can be associated to the whereabouts broadcast process and or . PLSV may be easier to remember. If the PLSV was toggled to disabled the whereabouts broadcast process and or terminates. If the PLSV was toggled to enabled the whereabouts broadcast process and or is started. It may be easier to remember that the PLSV enables disables whether or not to allow this MS to be a location source for other MSs in an LN expanse.

In other embodiments a useful name e.g. PLSV represents starting and terminating any subset of 19xx processes a plurality e.g. and for simplicity. In yet other embodiments FIGS. A B can be used to start or terminate worker thread s in any process for example to throttle up more worker threads in a process or to throttle down for less worker threads in a process perhaps modifying thread instances to accommodate the number of channels for communications or for the desired performance. There are many embodiments for fine tuning the architecture for optimal peer to peer interaction. In yet other embodiments toggling may not be used. There may be individual options available at block for setting any data of this disclosure. Similarly the 19xx Max variables may be modified via individual user friendly names and or as a group of 19xx Max variables.

Referring back to block if it is determined the user did not select to toggle for enabling disabling process es then processing continues to block . If block determines the user selected to exit FIGS. A B configuration processing then block terminates the user interface appropriately and processing terminates at block . If block determines the user did not select to exit the user interface then processing continues to block of by way of off page connector .

With reference now to depicted is a continued portion flowchart of for describing a preferred embodiment of MS LBX configuration processing. If block determines the user selected to configure the Source Periodicity Time Period SPTP value then block prepares parameters for invoking the Configure Value procedure parameters for reference address of value to configure and validity criteria of value to configure and the Configure Value procedure of is invoked at block with the two 2 parameters. Thereafter processing continues back to block by way of off page connector . Blocks and are understood to be delimited by appropriate semaphore control when modifying the SPTP value since other threads can access it. The SPTP configures the time period between broadcasts by thread s for example 5 seconds. Some embodiments do not permit configuration of the SPTP.

If block determines the user did not select to configure the SPTP value then processing continues to block . If block determines the user selected to configure service propagation then the user configures service propagation at block and processing continues back to block by way of off page connector . If block determines the user did not select to configure service propagation then processing continues to block .

If block determines the user selected to configure permissions then the user configures permissions at block and processing continues back to block by way of off page connector . If block determines the user did not select to configure permissions then processing continues to block . If block determines the user selected to configure charters then the user configures charters at block and processing continues back to block by way of off page connector . If block determines the user did not select to configure charters then processing continues to block . If block determines the user selected to configure statistics then the user configures statistics at block and processing continues back to block by way of off page connector . If block determines the user did not select to configure statistics then processing continues to block . If block determines the user selected to configure service informant code then the user configures code at block and processing continues back to block by way of off page connector . If block determines the user did not select to configure code then processing continues to block . If block determines the user selected to maintain LBX history then the user maintains LBX history at block and processing continues back to block by way of off page connector . If block determines the user did not select to maintain LBX history then processing continues to block .

Block handles other user interface actions leaving block and processing continues back to block by way of off page connector .

Details of blocks and perhaps more detail to block are described with other flowcharts. Appropriate semaphores are requested at the beginning of block processing and released at the end of block processing for thread safe access to applicable data at risk of being accessed by another thread of processing at the same time of configuration. In some embodiments a user administrator with secure privileges to the MS has ability to perform any subset of configurations of processing while a general user may not. Any subset of configuration may appear in alternative embodiments with or without authenticated administrator access to perform configuration.

Block determines if there were any changes to the DLMV from processing by comparing the DLMV after block with the DLMV saved at block . If there were changes via processing such as a role which was enabled prior to block which is now disabled or such as a role which was disabled prior to block which is now enabled then block continues to block which handles the DLMV changes appropriately. Block continues to block which terminates processing. If block determines there were no changes via block then processing terminates at block .

Block enables newly enabled role s as does block described for . Block disables newly disabled role s as does block described for .

Block determines if there were any changes to the ILMV from processing by comparing the ILMV after block with the ILMV saved at block . If there were changes via processing such as a role which was enabled prior to block which is now disabled or such as a role which was disabled prior to block which is now enabled then block continues to block which handles the ILMV changes appropriately. Block continues to block which terminates processing. If block determines there were no changes via block then processing terminates at block .

Block enables newly enabled role s as does blocks through described for . Block disables newly disabled role s as does blocks through described for .

If block determines the user did not respond for disabling NTP then block checks for a toggle to being enabled. If block determines the user wanted to enable NTP use then block accesses known NTP server address es e.g. ip addresses preconfigured to the MS or set with another user interface at the MS and pings each one if necessary at block with a timeout. As soon as one NTP server is determined to be reachable block continues to block . If no NTP server was reachable then the timeout will have expired for each one tried at block for continuing to block . Block determines if at least one NTP server was reachable at block . If block determines no NTP server was reachable then an error is presented to the user at block and processing continues back to block . Preferably the error presented at block requires the user to acknowledge the error before block continues to block . If block determines that at least one NTP server was reachable then block initializes NTP use appropriately block sets the NTP use setting to enabled and saves and processing continues back to block . Block enables NTP as does block .

Referring back to block if it is determined the user did not want to enable NTP use then processing continues to block where it is checked if the user wanted to exit processing. If block determines the user did not select to exit processing then processing continues to block where other user interface actions leaving block are appropriately handled and then processing continues back to block . If block determines the user did select to exit processing then processing terminates at block .

There are many embodiments for maintaining WDRs of queue . In some embodiments i.e. block processing is only provided for debug of an MS. In a single instance WDR embodiment block presents the one and only WDR which is used to keep current MS whereabouts whenever possible. Other embodiments incorporate any subset of processing.

Block continues to block where the current value passed is presented to the user e.g. confidence floor value and then to block for awaiting user action. When a user action is detected at block block checks if the user selected to modify the value in which case block interfaces with the user for a validated value using the validity criteria parameter before continuing back to block . Validity criteria may take the form of a value range value type set of allowable values or any other criteria for what makes the value a valid one.

If block determines the user did not select to modify the value then block checks if the user wanted to exit processing. If block determines the user did not select to exit processing then processing continues to block where other user interface actions leaving block are appropriately handled and then processing continues back to block . If block determines the user did select to exit processing then processing appropriately returns to the caller at block .

A 19xx process is a slave to queue process when its worker thread s are driven by feeding from a queue of architecture . A slave to queue process stays blocked O S terminology blocked preempted on a queue entry retrieval interface until the sought queue item is inserted to the queue. The queue entry retrieval interface becomes cleared O S terminology cleared clear to run when the sought queue entry is retrieved from the queue by a thread. These terms blocked and cleared are analogous to a semaphore causing a thread to be blocked and a thread to be cleared as is well known in the art. Queues have semaphore control to ensure no more than one thread becomes clear at a time for a single queue entry retrieved as done in an O S . One thread sees a particular queue entry but many threads can feed off the same queue to do the same work concurrently. Slave to queue type of processes are and . A slave to queue process is properly terminated by inserting a special termination queue entry for each worker thread to terminate itself after queue entry retrieval.

A 19xx process is a slave to timer process when its worker thread s are driven by a timer for peeking a queue of architecture . A timer provides the period of time for a worker thread to sleep during a looped iteration of checking a queue for a sought entry without removing the entry from the queue . Slave to timer threads periodically peek a queue and based on what is found will process appropriately. A queue peek does not alter the peeked queue. The queue peek interface is semaphore protected for preventing peeking at an un opportune time e.g. while thread inserting or retrieving from queue . Queue interfaces ensure one thread is acting on a queue with a queue interface at any particular time. Slave to timer type of processes are and . A slave to timer process is properly terminated by inserting a special termination queue entry for each worker thread to terminate itself by queue entry peek.

Block knows the type of 19xx process for preparing the process type parameter for invocation of at block . The type of process has slightly different termination requirements because of the worker thread s processing type. Alternate embodiments of slave to timer processes will make them slave to queue processes by simply feeding off Thread Request TR queue for driving a worker thread when to execute and when to terminate . New timer s would insert timely queue entries to queue and processes and would retrieve from the queue record . The queue entries would become available to queue when it is time for a particular worker thread to execute. Worker threads of processes and could retrieve and stay blocked on queue until an entry was inserted by a timer for enabling a worker thread field set to or . TR queue is useful for starting any threads of architecture in a slave to queue manner. This may is be a cleaner architecture for all thread pools to operate the same way slave to queue . Nevertheless the two thread pool methods are implemented.

Receive Rx queue is for receiving CK or CK data e.g. WDR or WDR requests for example from wireless transmissions. Queue will receive at least WDR information destined for threads and WDR requests records destined for threads . At least one thread not shown is responsible for listening on appropriate channel s and immediately depositing appropriate records to queue so that they can be processed by architecture . Preferably there is a plurality pool of threads for feeding queue based on channel s being listened on and data or anticipated for being received. Alternative embodiments of thread s may themselves directly be listening on appropriate channels and immediately processing packets identified in lieu of a queue . Alternative embodiments of thread s may themselves directly be listening on appropriate channels and immediately processing packets identified in lieu of a queue . Queue is preferred to isolate channel s e.g. frequency s and transmission reception processing in well known modular e.g. Radio Frequency RF componentry while providing a high performance queue interface to other asynchronous threads of architecture e.g. thread s of process . Wave spectrums via particular communications interface are appropriately processed for feeding queue . As soon as a record is received by an MS it is assumed ready for processing at queue . All queue accesses are assumed to have appropriate semaphore control to ensure synchronous access by any thread at any particular time to prevent data corruption and misuse. Queue entries inserted to queue may have arrived on different channel s and in such embodiments a channel qualifier may further direct queue entries from queue to a particular thread or e.g. thread s dedicated to channel s . In other embodiments receive processing feeds queue independent of any particular channel s monitored or received on the preferred embodiment described . Regardless of how data is received and then immediately placed on queue a received date time stamp e.g. fields or is added to the applicable record for communicating the received date time stamp to a thread e.g. thread s or of when the data was received. Therefore the queue insert interface tells the waiting thread s when the data was actually received. This ensures a most accurate received date time stamp as close to receive processing as possible e.g. enabling most accurate TDOA measurements . An alternate embodiment could determine applicable received date time stamps in thread s or thread s . Other data placed into received WDRs are wave spectrum and or particular communications interface of the channel received on and heading yaw pitch roll or accelerometer readings with AOA measurements signal strength and other field eligible data of the receiving MS. Depending on alternative embodiments queue may be viewed metaphorically for providing convenient grounds of explanation.

Send Tx queue is for sending communicating CK data for example for wireless transmissions. At least one thread not shown is responsible for immediately transmitting e.g. wirelessly anything deposited to queue . Preferably there is a plurality pool of threads for feeding off of queue based on channel s being transmitted on and data anticipated for being sent. Alternative embodiments of thread s of processes and may themselves directly transmit send broadcast on appropriate channels anything deposited to queue in lieu of a queue . Queue is preferred to isolate channel s e.g. frequency s and transmission processing in well known modular e.g. RF componentry while providing a high performance queue interface to other asynchronous threads of architecture e.g. thread s . Wave spectrums and or particular communications interface are appropriately processed for sending from queue . All queue accesses are assumed to have appropriate semaphore control to ensure synchronous access by any thread at any particular time to prevent data corruption and misuse. As soon as a record is inserted to queue it is assumed sent immediately. Preferably fields sent depend on fields set. Queue entries inserted to queue may contain specification for which channel s to send on in some embodiments. In other embodiments send processing feeding from queue has intelligence for which channel s to send on the preferred embodiment described . Depending on alternative embodiments queue may be viewed metaphorically for providing convenient grounds of explanation.

When interfacing to queue the term broadcast refers to sending outgoing data in a manner for reaching as many MSs as possible e.g. use all participating communications interfaces whereas the term send refers to targeting a particular MS or group of MSs.

WDR queue preferably contains at least one WDR at any point in time for at least describing whereabouts of the MS of architecture . Queue accesses are assumed to have appropriate semaphore control to ensure synchronous access by any thread at any particular time to prevent data corruption and misuse. A single instance of data embodiment of queue may require an explicit semaphore control for access. In a WDR plurality maintained to queue appropriate queue interfaces are again provided to ensure synchronous thread access e.g. implicit semaphore control . Regardless there is still a need for a queue to maintain a plurality of WDRs from remote MSs. The preferred embodiment of all queue interfaces uses queue interface maintained semaphore s invisible to code making use of queue e.g. API interfaces. Depending on alternative embodiments queue may be viewed metaphorically for providing convenient grounds of explanation.

Thread Request TR queue is for requesting processing by either a timing determination worker thread of process i.e. thread or whereabouts determination worker thread of process i.e. thread . When requesting processing by a thread TR queue has requests retrieved via processing after insertion processing from a thread to initiate TDOA measurement. When requesting processing by a thread TR queue has requests retrieved via processing after insertion processing or from a thread or so that thread performs whereabouts determination of the MS of architecture . Requests of queue comprise records . Preferably there is a plurality pool of threads for feeding queue i.e. feeding from queue and for feeding a plurality each of threads and from queue . All queue accesses are assumed to have appropriate semaphore control to ensure synchronous access by any thread at any particular time to prevent data corruption and misuse. Depending on alternative embodiments queue may be viewed metaphorically for providing convenient grounds of explanation.

With reference now to depicted is an illustration for describing a preferred embodiment of a thread request queue record as maintained to Thread Request TR queue . TR queue is not required when a LN expanse globally uses NTP as found in thread 19xx processing described for architecture however it may be required at a MS which does not have NTP or a MS which interacts with another data processing system e.g. MS that does not have NTP. Therefore TR queue record i.e. queue entry may or may not be required. This is the reason does not depict queue . When NTP is in use globally in LN expanse TDOA measurements can be made using a single unidirectional data or packet containing a sent date time stamp of when the data was sent . Upon receipt that sent date time stamp received is compared with the date time of receipt to determine the difference. The difference is a TDOA measurement. Knowing transmission speeds with a TDOA measurement allows calculating a distance. In this NTP scenario no thread s are required.

Threads and or DLM processing may always insert the MS whereabouts without requirement for thread s by incorporating thread logic into thread or by directly starting without queue a thread from a thread . Therefore threads may not be required. If threads are not required queue may not be required by incorporating thread logic into thread or by directly starting without queue a thread from a thread . Therefore queue may not be required and threads may not be required.

Records i.e. queue entries contain a request type field and data field . Request type field simply routes the queue entry to destined thread s e.g. thread s or thread s . A thread remains blocked on queue until a record is inserted which has a field containing the value . A thread remains blocked on queue until a record is inserted which has a field containing the value . Data field is set to zero 0 when type field contains i.e. not relevant . Data field contains an MS ID field value and possibly a targeted communications interface or wave spectrum if one to one when type field contains . Field will contain information for appropriately targeting the MS ID with data e.g. communications interface to use if MS has multiple of them . An MS with only one communications interface can store only a MS ID in field

Records are used to cause appropriate processing by 19xx threads e.g. or as invoked when needed e.g. by thread s . Process is a slave to queue type of process and there are no queue entries which will not get timely processed by a thread . No interim pruning is necessary to queue .

With reference now back to Correlation Response CR queue is for receiving correlation data for correlating requests transmitted in data with responses received in data or . Records are inserted to queue via processing from thread s so that thread s after processing correlate data or with requests sent by thread s e.g. over interface for the purpose of calculating a TDOA measurement. Additionally records are inserted to queue via processing from thread s so that thread s after processing correlate data or with requests sent by thread s e.g. over interface for the purpose of calculating a TDOA measurement. Preferably there is a plurality pool of threads for feeding queue and for feeding from queue feeding from queue with thread s . All queue accesses are assumed to have appropriate semaphore control to ensure synchronous access by any thread at any particular time to prevent data corruption and misuse. Depending on alternative embodiments queue may be viewed metaphorically for providing convenient grounds of explanation.

With reference now to depicted is an illustration for describing a preferred embodiment of a correlation response queue record as maintained to Correlation Response CR queue . CR queue is not required when a LN expanse globally uses NTP as found in thread 19xx processing described for architecture however it may be required at a MS which does not have NTP or a MS which interacts with another data processing system e.g. MS that does not have NTP. Therefore CR record i.e. queue entry may or may not be required. This is the reason does not depict queue . The purpose of CR queue is to enable calculation of TDOA measurements using correlation data to match a request with a response. When NTP is used globally in the LN expanse no such correlations between a request and response is required as described above. In the NTP scenario thread s can deduce TDOA measurements directly from responses see and there is no requirement for threads .

TDOA measurements are best taken using date time stamps as close to the processing points of sending and receiving as possible otherwise critical regions of code may be required for enabling process time adjustments to the measurements when processing is further out from said points. This is the reason MS receive processing provides received date time stamps with data inserted to queue field or . In a preferred embodiment send queue processing inserts to queue so the date time stamp field for when sent is as close to just prior to having been sent as possible. However there is still the requirement for processing time spent inserting to queue prior to sending anyway. Anticipated processing speeds of architecture allow reasonably moving sent date time stamp setting just a little further out from actually is sending to keep modular send processing isolated. A preferred embodiment as presented assumes the send queue interface minimizes processing instructions from when data is placed onto queue and when it is actually sent so that the sending thread s 19xx and insert to queue with a reasonably accurate sent date stamp field . This ensures a most accurate sent date time stamp e.g. enabling most accurate TDOA measurements . An alternate embodiment makes appropriate adjustments for more accurate time to consider processing instructions up to the point of sending after queue insertion.

Records i.e. queue entries contain a date time stamp field and a correlation data field . Date time stamp field contains a date time stamp of when a request data was sent as set by the thread inserting the queue entry . Correlation data field contains unique correlation data e.g. MS id with suffix of unique number used to provide correlation for matching sent requests data with received responses data or regardless of the particular communications interface s used e.g. different wave spectrums supported by MS . Upon a correlation match a TDOA measurement is calculated using the time difference between field and a date time stamp of when the response was received e.g. field . A thread accesses queue for a record using correlation field to match when data or contains correlation data for matching. A thread then uses the field to calculate a TDOA measurement. Process is not a slave to queue but is to queue . A thread peeks queue for a matching entry when appropriate. Queue may contain obsolete queue entries until pruning is performed. Some WDR requests may be broadcasts therefore records may be used for correlating a plurality of responses. In another record embodiment an additional field is provided for specification of which communication interface s and or channel s to listen on for a response.

With reference now back to any reasonable subset of architecture processing may be incorporated in a MS. For example in one minimal subset embodiment a DLM which has excellent direct locating means only needs a single instance WDR queue and a single thread for broadcasting whereabouts data to facilitate whereabouts determination by other MSs. In a near superset embodiment process processing may be incorporated completely into process thereby eliminating processing by having threads feed from queue for WDR requests as well as WDR information. In another subset embodiment process may only send requests to queue for responses or may only start a thread for determining whereabouts of the MS. There are many viable subset embodiments depending on the MS being a DLM or ILM capabilities of the MS LN expanse deployment design choices etc. A reference to accompanies thread 19xx flowcharts and A . The user preferably an administrator type e.g. for IbxPhone debug selectively configures whether or not to start or terminate a process thread pool and perhaps the number of threads to start in the pool see . Starting a process and threads and terminating processes and threads is shown in flowcharts A and B. There are other embodiments for properly starting and terminating threads without departing from the spirit and scope of this disclosure.

In an alternative embodiment having multiple transmission channels visible to process there can be a worker thread per channel to handle broadcasting on multiple channels. If thread s block do not transmit directly over the channel themselves this embodiment would provide means for communicating the channel for broadcast to send processing when interfacing to queue e.g. incorporate a channel qualifier field with WDR inserted to queue . This embodiment could allow specification of at least one 1 worker thread per channel however multiple worker threads configurable for process as appropriated for the number of channels configurable for broadcast.

Processing begins at block continues to block where the process worker thread count Ct is accessed and incremented by 1 using appropriate semaphore access e.g. Sem and continues to block for peeking WDR queue for a special termination request entry. Block may also check the Ct value and signal the process parent thread that all worker threads are running when Ct reaches Max. Thereafter if block determines that a worker thread termination request was not found in queue processing continues to block . Block peeks the WDR queue using interface for the most recent highest confidence entry for this MS whereabouts by searching queue for the MS ID field matching the MS ID of processing and a confidence field greater than or equal to the confidence floor value and a most recent NTP enabled date time stamp field within a prescribed trailing period of time e.g. preferably less than or equal to 2 seconds . For example block peeks the queue i.e. makes a copy for use if an entry found for subsequent processing but does not remove the entry from queue for a WDR of this MS i.e. MS of processing which has the greatest confidence over 75 and has been most recently inserted to queue with an NTP date time stamp in the last 2 seconds. Date time stamps for MS whereabouts which are not NTP derived have little use in the overall palette of process 19xx choices of architecture because receiving data processing systems e.g. MSs will have no means of determining an accurate TDOA measurement in the unidirectional transmission from an NTP disabled MS. A receiving data processing system will still require a bidirectional correlated exchange with the MS of processing to determine an accurate TDOA measurement in its own time scale which is accomplished with thread s pulling WDR information anyway . An alternate embodiment to block will not use the NTP indicator as a search criteria so that receiving data processing systems can receive to a thread and then continue for appropriate correlation processing or can at least maintain whereabouts to queue to know who is nearby.

Thread is of less value to the LN expanse when it broadcasts outdated invalid whereabouts of the MS to facilitate locating other MSs. In an alternate embodiment a movement tolerance e.g. user configured or system set e.g. 3 meters is incorporated at the MS or at service s used to locate the MS for knowing when the MS has significantly moved e.g. more than 3 meters and how long it has been e.g. 45 seconds since last significantly moving. In this embodiment the MS is aware of the period of time since last significantly moving and the search time criteria is set using the amount of time since the MS significantly moved whichever is greater . This way a large number of perhaps more confident candidates WDRs are searched in the time period when the MS has not significantly moved. Optional blocks through may have been incorporated to for movement tolerance processing just described in which case the LWT is compared to the current date time of block processing to adjust block search time criteria for the correct trailing period. In any case a WDR is sought at block which will help other MSs in the LN expanse locate themselves and to let other MSs know who is nearby.

Thereafter if block determines a useful WDR was found then block prepares the WDR for send processing block broadcasts the WDR information using send interface by inserting to queue so that send processing broadcasts data e.g. on all available communications interface s for example as far as radius and processing continues to block . The broadcast is for reception by data processing systems e.g. MSs in the vicinity. At least fields and are broadcast. See descriptions. Fields are set to the following upon exit from block 

MS ID field is preferably set with Field from queue or transformed if not already into a pseudo MS ID possibly for future correlation if desired. This field may also be set to null not set because it is not required when the NTP indicator of field is enabled and the broadcast is sent with an NTP enabled field DATE TIME STAMP field is preferably set with Field from queue . LOCATION field is preferably set with Field from queue . CONFIDENCE field is preferably set with Field from queue . LOCATION TECHNOLOGY field is preferably set with Field from queue . LOCATION REFERENCE INFO field is preferably set with null not set . Null indicates to send processing feeding from queue to use all available comm. interfaces i.e. Broadcast . Specifying a comm. interface targets the specified interface i.e. send . COMMUNICATIONS REFERENCE INFO field is preferably set with null not set . If MS ID or pseudo MS ID is sent this is all that is required to target this MS. SPEED field is preferably set with Field from queue . HEADING field is preferably set with Field from queue . ELEVATION field is preferably set with Field from queue . APPLICATION FIELDS field is preferably set with Field from queue . An alternate embodiment will add alter or discard data with or without date time stamps here at the time of block processing. CORRELATION FIELD is preferably set with null not set . SENT DATE TIME STAMP field is preferably set with Sent date time stamp as close in processing the broadcast of block as possible. RECEIVED DATE TIME STAMP field is preferably set with Not Applicable i.e. N A for sending .

Block causes thread to sleep according to the SPTP setting e.g. a few seconds . When the sleep time has elapsed processing continues back to block for another loop iteration of blocks through . Referring back to block if a useful WDR was not found e.g. candidates too old then processing continues to block . Referring back to block if a worker thread termination request entry was found at queue then block decrements the worker thread count by 1 using appropriate semaphore access e.g. Sem and thread processing terminates at block . Block may also check the Ct value and signal the process parent thread that all worker threads are terminated when Ct equals zero 0 .

Block causes broadcasting data containing CK wherein CK contains WDR information prepared as described above for block . Alternative embodiments of block may not search a specified confidence value and broadcast the best entry available anyway so that listeners in the vicinity will decide what to do with it. A semaphore protected data access instead of a queue peek may be used in embodiments where there is always one WDR current entry maintained for the MS.

In the embodiment wherein usual MS communications data of the MS is altered to contain CK for listening MSs in the vicinity send processing feeding from queue caused by block processing will place WDR information as CK embedded in usual data at the next opportune time of sending usual data . If an opportune time is not timely send processing should discard the send request of block to avoid broadcasting outdated whereabouts information unless using a movement tolerance and time since last significant movement . As the MS conducts its normal communications transmitted data contains new data CK to be ignored by receiving MS other character processing but to be found by listening MSs within the vicinity which anticipate presence of CK . Otherwise when LN Expanse deployments have not introduced CK to usual data communicated on a receivable signal by MSs in the vicinity sends repeated timely pulsed broadcasts of new data per SPTP for MSs in the vicinity of the first MS to receive. In any case appropriate implementation should ensure field is as accurate as possible for when data is actually sent.

An alternate embodiment to architecture for elimination of process incorporates a trigger implementation for broadcasting MS whereabouts at the best possible time i.e. when the MS whereabouts is inserted to queue . As soon as a new preferably NTP enabled WDR candidate becomes available it can be broadcast at a new block of . e.g. new block continued to from block and then continuing to block . Fields are set as described above for . Preferably the new block starts an asynchronous thread consisting of blocks and so that processing performance is not impacted. In a further embodiment block can be further enhanced using the SPTP value to make sure that too many broadcasts are not made. The SPTP Source Periodicity Time Period could be observed for getting as close as possible to broadcasting whereabouts in accordance with SPTP e.g. worst case there are not enough broadcasts .

In an alternative embodiment having multiple receiving transmission channels visible to process e.g. thread s receiving directly there can be a worker thread per channel to handle receiving on multiple channels simultaneously. If thread s do not receive directly from the channel the preferred embodiment of FIG. would not need to convey channel information to thread s waiting on queue anyway. Embodiments could allow specification configuration of many thread s per channel.

Processing begins at block continues to block where the process worker thread count Ct is accessed and incremented by 1 using appropriate semaphore access e.g. Sem and continues to block for interim housekeeping of pruning the WDR queue by invoking a Prune Queues procedure of . Block may also check the Ct value and signal the process parent thread that all worker threads are running when Ct reaches Max. Block may not be required since block can cause queue pruning block .

Thereafter block retrieves from queue a WDR using interface perhaps a special termination request entry or a WDR received in data CK or data CK and only continues to block when a WDR has been retrieved. Block stays blocked on retrieving from queue until any WDR is retrieved. If block determines that a special WDR indicating to terminate was not found in queue processing continues to block . Block adjusts date time stamp field if necessary depending on NTP use in the LN expanse and adjusts the confidence field accordingly. In a preferred embodiment fields and for the WDR in process is set as follows for certain conditions 

If at block the WDR confidence field is not greater than the confidence floor value then processing continues back to block . If block determines that the WDR field is satisfactory then block initializes a TDOA FINAL variable to False and block checks if the WDR from block contains correlation field .

If block determines the WDR does not contain correlation then block accesses the ILMV block determines the source ILM or DLM of the WDR using the originator indicator of field and block checks suitability for collection of the WDR. While processes 19xx running are generally reflective of the ILMV roles configured it is possible that the more descriptive nature of ILMV role s not be one to one in relationship to 19xx processes in particular depending on the subset of architecture in use. Block is redundant anyway because of block . If block determines the ILMV role is disabled for collecting this WDR then processing continues back to block . If block determines the ILMV role is enabled for collecting this WDR then processing continues to block .

If block determines both the first sending and second receiving MS are NTP enabled i.e. Fields and are NTP indicated OR if TDOA FINAL is set to True as arrived to via block then block completes the WDR for queue insertion block prepares parameters for processing and block invokes processing interface . Parameters set at block are WDRREF a reference or pointer to the WDR completed at block DELETEQ location queue discard processing and SUPER supervisory notification processing. Block calculates a TDOA measurement whenever possible and inserts to field . See descriptions. Fields are set to the following upon exit from block 

CONFIDENCE field is preferably set with Confidence at equal to or less than field received from queue see preferred embodiment for block .

LOCATION REFERENCE INFO field is preferably set with All available measurements from receive processing e.g. AOA heading yaw pitch roll signal strength wave spectrum particular communications interface etc and TDOA measurement s as determined in blocks and . COMMUNICATIONS REFERENCE INFO field is preferably set with Field from queue . SPEED field is preferably set with Field from queue . HEADING field is preferably set with Field from queue . ELEVATION field is preferably set with Field from queue . APPLICATION FIELDS field is preferably set with Field from queue . An alternate embodiment will add alter or discard data with or without date time stamps here at the time of block processing. CORRELATION FIELD is preferably set with Not Applicable i.e. not maintained to queue . Was used by processing. SENT DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue . Was used by processing. RECEIVED DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue . Was used by processing.

Block continues to block where a record is built i.e. field and field is set to null e.g. 1 and then block inserts the record to TR queue using interface so that a thread will perform processing. Blocks and may be replaced with an alternative embodiment for starting a thread . Block continues back to block .

Referring now back to block if it is determined that a TDOA measurement cannot be made i.e. field or not NTP indicated OR if TDOA FINAL is set to False then block checks if the WDR contains a MS ID or pseudo MS ID . If block determines there is none then processing continues back to block because there is no way to distinguish one MS from another with respect to the WDR retrieved at block for directing bidirectional correlation. An alternate embodiment will use a provided correlation field received at block instead of a field for knowing how to target the originating MS for TDOA measurement processing initiated by a thread . If block determines there is a usable MS ID or correlation field then block builds a record field field the MS ID or pseudo MS ID or correlation and particular communications interface from field if available of the WDR of block and block inserts the record to queue interface for starting a thread . Block continues back to block . An alternate embodiment causes block to continue directly to block no block for a No condition from block . Regardless of whether the originating MS ID can be targeted a correlation in lieu of an MS ID may be used when the MS responds with a broadcast. The WDR request made by thread can be a broadcast rather than a targeted request. Thread s can handle sending targeted WDR requests to a known MS ID and broadcast WDR requests.

Referring back to block if it is determined the WDR does contain correlation field block peeks the CR queue using interface for a record containing a match i.e. field matched to field . Thereafter if block determines no correlation was found on queue e.g. response took too long and entry was pruned then processing continues to block already described. If block determines the correlation entry was found i.e. thread received a response from an earlier request e.g. from a thread or then block uses date time stamp field from block with field e.g. from block to calculate a TDOA measurement in time scale of the MS of processing and sets field appropriately in the WDR. Note that correlation field is valid across all available MS communications interfaces e.g. all supported active wave spectrums . The TDOA measurement considers duration of time between the earlier sent date time of record and the later time of received date time field . The TDOA measurement may further be altered at block processing time to a distance knowing the velocity of the wave spectrum used as received to queue . Block continues to block where the TDOA FINAL variable is set to True then to block for processing already described.

Referring back to block if a WDR for a worker thread termination request was found at queue then block decrements the worker thread count by 1 using appropriate semaphore access e.g. Sem and thread processing terminates at block . Block may also check the Ct value and signal the process parent thread that all worker threads are terminated when Ct equals zero 0 .

In the embodiment wherein usual MS communications data of the MS is altered to contain CK or for listening MSs in the vicinity receive processing feeding queue will place WDR information to queue as CK or is detected for being present in usual communication data or . As normal communications are conducted transmitted data or contains new data CK or to be ignored by receiving MS other character processing but to be found by listening MSs within the vicinity which anticipate presence of CK or . Otherwise when LN Expanse deployments have not introduced CK or to usual data or communicated on a receivable signal by MSs in the vicinity receives new data or sent. In any case field should be as accurate as possible for when data or was actually received. Critical regions of code and or anticipated execution timing may be used to affect a best setting of field

So is responsible for maintaining whereabouts of others to queue with data useful for triangulating itself.

In an alternative embodiment having multiple transmission channels visible to process there can be a worker thread per channel to handle broadcasting on multiple channels. If thread s block do not transmit directly over the channel this embodiment would provide means for communicating the channel for broadcast to send processing when interfacing to queue e.g. incorporate a channel qualifier field with WDR request inserted to queue . This embodiment could allow specification of one 1 thread per channel however multiple worker threads configurable for process as determined by the number of channels configurable for broadcast.

Processing begins at block continues to block where the process worker thread count Ct is accessed and incremented by 1 using appropriate semaphore access e.g. Sem and continues to block for interim housekeeping of pruning the CR queue by invoking a Prune Queues procedure of .

Block may also check the Ct value and signal the process parent thread that all worker threads are running when Ct reaches Max. Block continues to block for peeking WDR queue using interface for a special termination request entry. Thereafter if block determines that a worker thread termination request was not found in queue processing continues to block . Block peeks the WDR queue using interface for the most recent highest confidence entry for this MS whereabouts by searching queue for the MS ID field matching the MS ID of processing and a confidence field greater than or equal to the confidence floor value and a most recent date time stamp field within a prescribed trailing period of time of block search processing using a function of the WTV i.e. f WTV short hand for function of WTV for the period. For example block peeks the queue i.e. makes a copy for use if an entry found for subsequent processing but does not remove the entry from queue for a WDR of the first MS which has the greatest confidence over 75 and has been most recently inserted to queue in the last 3 seconds. Since the MS whereabouts accuracy may be dependent on timeliness of the WTV it is recommended that the f WTV be some value less than or equal to WTV but preferably not greater than the WTV. Thread is of less value to the MS when not making sure in a timely manner the MS is maintaining timely whereabouts for itself. In an alternate embodiment a movement tolerance e.g. user configured or system set e.g. 3 meters is incorporated at the MS or at service s used to locate the MS for knowing when the MS has significantly moved e.g. more than 3 meters and how long it has been e.g. 45 seconds since last significantly moving. In this embodiment the MS is aware of the period of time since last significantly moving and the f WTV is set using the amount of time since the MS significantly moved i.e. f WTV as described above or the amount of time since significantly moving whichever is greater . This way a large number of perhaps more confident candidates WDRs are searched in the time period when the MS has not significantly moved. Optional blocks through may have been incorporated to for movement tolerance processing just described in which case the LWT is compared to the current date time to adjust the WTV for the correct trailing period. In any case a WDR is sought at block which will verify whether or not MS whereabouts are current.

Thereafter if block determines a satisfactory WDR was found then processing continues to block . Block causes thread to sleep according to a f WTV preferably a value less than or equal to the WTV e.g. 95 of WTV . When the sleep time has elapsed processing continues back to block for another loop iteration of blocks through .

If block determines a current WDR was not found then block builds a WDR request e.g. containing record with field for the MS of processing MS ID or pseudo MS ID so receiving MSs in the LN expanse know who to respond to and field with appropriate correlation for response block builds a record using correlation generated for the request at block block inserts the record to queue using interface and block broadcasts the WDR request record for responses. Absence of field indicates to send processing feeding from queue to broadcast on all available comm. interfaces .

With reference now to depicted is an illustration for describing a preferred embodiment of a WDR request record as communicated to queue or . When a LN expanse globally uses NTP as found in thread 19xx processing described for architecture a WDR request record may or may not be required. TDOA calculations can be made using a single unidirectional data or packet containing a sent date time stamp of when the data was sent as described above.

Records contain a MS ID field and correlation field . MS ID field contains an MS ID e.g. a value of field . An alternate embodiment will contain a pseudo MS ID for correlation perhaps made by a derivative of the MS ID with a unique suffix portion so that receiving MSs can directly address the MS sending the request without actually knowing the MS ID i.e. they know the pseudo MS ID which enables the MS to recognize originated transmissions . Correlation data field contains unique correlation data e.g. MS id with suffix of unique number used to provide correlation for matching sent requests data with received WDR responses data or . Upon a correlation match a TDOA measurement is calculated using the time difference between field and a date time stamp of when the response was received e.g. field . Received date time stamp field is added by receive processing feeding queue when an MS received the request from another MS. Comm interface field is added by receive processing inserting to queue for how to respond and target the originator. Many MSs do not have choices of communications interfaces so field may not be required. If available it is used otherwise a response can be a broadcast. Field may contain a wave spectrum identifier for uniquely identifying how to respond e.g. one to one with communications interface or any other value for indicating how to send given how the request was received.

With reference back to block builds a request that receiving MSs will know is for soliciting a response with WDR information. Block generates correlation for field to be returned in responses to the WDR request broadcast at block . Block also sets field to when the request was sent. Preferably field is set as close to the broadcast as possible. In an alternative embodiment broadcast processing feeding from queue makes the record and inserts it to queue with a most accurate time of when the request was actually sent. Fields are to be as accurate as possible. Block broadcasts the WDR request data using send interface by inserting to queue so that send processing broadcasts data for example as far as radius . Broadcasting preferably uses all available communications interface s e.g. all available wave spectrums . Therefore the comm interface field is not set which implies to send processing to do a broadcast .

Block continues to block where a record is built i.e. field and field is set to null e.g. 1 and then block inserts the record to TR queue using interface so that a thread will perform processing. Blocks and may be replaced with an alternative embodiment for starting a thread . Block continues back to block .

Referring back to block if a worker thread termination request entry was found at queue then block decrements the worker thread count by 1 using appropriate semaphore access e.g. Sem and thread processing terminates is at block . Block may also check the Ct value and signal the process parent thread that all worker threads are terminated when Ct equals zero 0 .

In the embodiment wherein usual MS communications data of the MS is altered to contain CK for listening MSs in the vicinity send processing feeding from queue caused by block processing will place the request as CK embedded in usual data at the next opportune time of sending usual data . This may require the alternative embodiment of adding the entry to queue being part of send processing. As the MS conducts its normal communications transmitted data contains new data CK to be ignored by receiving MS other character processing but to be found by listening MSs within the vicinity which anticipate presence of CK . Otherwise when LN Expanse deployments have not introduced CK to usual data communicated on a receivable signal by MSs in the vicinity sends new WDR request data .

Processing begins at block continues to block where the process worker thread count Ct is accessed and incremented by 1 using appropriate semaphore access e.g. Sem and continues to block for interim housekeeping of pruning the CR queue by invoking a Prune Queues procedure of . Block may also check the Ct value and signal the process parent thread that all worker threads are running when Ct reaches Max.

Thereafter block retrieves from queue a record using interface perhaps a special termination request entry or a record received from thread s and only continues to block when a record containing field set to has been retrieved. Block stays blocked on retrieving from queue until a record with field is retrieved. If block determines a special entry indicating to terminate was not found in queue processing continues to block .

If at block the record does not contain a MS ID or pseudo MS ID in field processing continues to block for building a WDR request record to be broadcast and then to block . Broadcasting preferably uses all available communications interface s e.g. all available wave spectrums . If block determines the field is a valid MS ID not null block builds a WDR request targeted for the MS ID and processing continues to block . A targeted request is built for targeting the MS ID and communications interface if available from field . Send processing is told which communications interface to use if available e.g. MS has multiple otherwise send processing will target each available interface. In the unlikely case a MS ID is present in field without the communications interface applicable then all communications interfaces are used with the targeted MS ID. In MS embodiments with multiple communications interfaces then is to contain the applicable communication interface for sending. Block generates appropriate correlation for a field e.g. to be compared with a response WDR at block block sets field to the current MS date time stamp block inserts the record to queue using interface and block sends broadcasts using interface a WDR request record . Thereafter processing continues back to block for another loop iteration. An alternative embodiment will only target a WDR request to a known MS ID. For example block would continue back to block if no MS ID is found null otherwise it will continue to block i.e. no use for block .

Block sets field to correlation to be returned in responses to the WDR request sent broadcast at block . Block sets field to when the request is sent. Preferably field is set as close as possible to when a send occurred. In an alternative embodiment send processing feeding from queue makes the record and inserts it to queue with a most accurate time of when the request was actually sent. Fields are to be as accurate as possible. Block sends broadcasts the WDR request data using send interface by inserting to queue a record the targeted MS ID or pseudo MS ID OR null if arrived to from block field correlation generated at block so that send processing sends is data for example as far as radius . A null MS ID may be responded to by all MSs in the vicinity. A non null MS ID is to be responded to by a particular MS. Presence of field indicates to send processing feeding from queue to target the MS ID over the specified comm. interface e.g. when MS has a plurality of comm. interfaces e.g. cellular Wifi Bluetooth etc i.e. MS supports multiple classes of wave spectrum .

Referring back to block if a worker thread termination request was found at queue then block decrements the worker thread count by 1 using appropriate semaphore access e.g. Sem and thread processing terminates at block . Block may also check the Ct value and signal the process parent thread that all worker threads are terminated when Ct equals zero 0 .

In the embodiment wherein usual MS communications data of the MS is altered to contain CK for listening MSs in the vicinity send processing feeding from queue caused by block processing will place the WDR request as CK embedded in usual data at the next opportune time of sending usual data . As the MS conducts its normal communications transmitted data contains new data CK to be ignored by receiving MS other character processing but to be found by listening MSs within the vicinity which anticipate presence of CK . This may require the alternative embodiment of adding the entry to queue being part of send processing. Otherwise when LN Expanse deployments have not introduced CK to usual data communicated on a receivable signal by MSs in the vicinity sends broadcasts new WDR request data .

An alternate embodiment to block can wait for a response with a reasonable timeout thereby eliminating the need for blocks through which is used to correlate the subsequent response to thread with the request sent at block . However this will cause a potentially unpredictable number of simultaneously executing thread s when many MSs are in the vicinity.

Thread s are useful when one or both parties to WDR transmission sending and receiving MS do not have NTP enabled. TDOA measurements are taken to triangulate the MS relative other MSs in real time.

In an alternative embodiment having multiple receiving transmission channels visible to process there can be a worker thread per channel to handle receiving on multiple channels simultaneously. If thread s do not receive directly from the channel the preferred embodiment of would not need to convey channel information to thread s waiting on queue anyway. Embodiments could allow specification configuration of many thread s per channel.

Processing begins at block continues to block where the process worker thread count Ct is accessed and incremented by 1 using appropriate semaphore access e.g. Sem and continues to block for retrieving from queue a record using interface perhaps a special termination request entry and only continues to block when a record is retrieved. Block stays blocked on retrieving from queue until any record is retrieved. If block determines a special entry indicating to terminate was not found in queue processing continues to block . There are various embodiments for thread s and thread s to feed off a queue for different record types for example separate queues A and B or a thread target field with either record found at queue e.g. like field . In another embodiment thread s are modified with logic of thread s to handle all records described for a queue since thread s are listening for queue data anyway.

Block peeks the WDR queue using interface for the most recent highest confidence entry for this MS whereabouts by searching queue for the MS ID field matching the MS ID of processing and a confidence field greater than or equal to the confidence floor value and a most recent date time stamp field within a prescribed trailing period of time of block search processing e.g. 2 seconds . For example block peeks the queue i.e. makes a copy for use if an entry found for subsequent processing but does not remove the entry from queue for a WDR of the MS of processing which has the greatest confidence over 75 and has been most recently inserted to queue in the last 2 seconds. It is recommended that the trailing period of time used by block be never greater than a few seconds. Thread is of less value to the LN expanse when it responds with outdated invalid whereabouts of the MS to facilitate locating other MSs. In an alternate embodiment a movement tolerance e.g. user configured or system set e.g. 3 meters is incorporated at the MS or at service s used to locate the MS for knowing when the MS has significantly moved e.g. more than 3 meters and how long it has been e.g. 45 seconds since last significantly moving. In this embodiment the MS is aware of the period of time since last significantly moving and the trailing period of time used by block is set using the amount of time since the MS significantly moved or the amount of time since significantly moving whichever is greater. This way a large number of perhaps more confident candidate WDRs are searched in the time period when the MS has not significantly moved. Optional blocks through may have been incorporated to for movement tolerance processing just described in which case the LWT is compared to the current date time to adjust the trailing period of time used by block for the correct trailing period. In any case a WDR is sought at block to satisfy a request helping another MS in the LN expanse locate itself.

Thereafter if block determines a useful WDR was not found then processing continues back to block for another loop iteration of processing an inbound WDR request. If block determines a useful WDR was found then block prepares the WDR for send processing with correlation field set from correlation field retrieved at block and block sends broadcasts per field the WDR information using send interface by inserting to queue so that send processing transmits data for example as far as radius and processing continues back to block . At least fields and are sent broadcast. See descriptions. Fields are set to the following upon exit from block 

LOCATION REFERENCE INFO field is preferably set with null not set for Broadcast by send processing otherwise set to field for Send by send processing.

APPLICATION FIELDS field is preferably set with Field from queue . An alternate embodiment will add alter or discard data with or without date time stamps here at the time of block processing.

SENT DATE TIME STAMP field is preferably set with Sent date time stamp as close in processing the send broadcast of block as possible.

Embodiments may rely completely on the correlation field with no need for field . Referring back to block if a worker thread termination request was found at queue then block decrements the worker thread count by 1 using appropriate semaphore access e.g. Sem and thread processing terminates at block . Block may also check the Ct value and signal the process parent thread that all worker threads are terminated when Ct equals zero 0 .

Block causes sending broadcasting data containing CK depending on the type of MS wherein CK contains WDR information prepared as described above for block . Alternative embodiments of block may not search a specified confidence value and broadcast the best entry available anyway so that listeners in the vicinity will decide what to do with it. A semaphore protected data access instead of a queue peek may be used in embodiments where there is always one WDR current entry maintained for the MS.

In the embodiment wherein usual MS communications data of the MS is altered to contain CK for listening MSs in the vicinity send processing feeding from queue caused by block processing will place WDR information as CK embedded in usual data at the next opportune time of sending usual data . If an opportune time is not timely send processing should discard the send request of block to avoid broadcasting outdated whereabouts information unless using a movement tolerance and time since last significant movement . As the MS conducts its normal communications transmitted data contains new data CK to be ignored by receiving MS other character processing but to be found by listening MSs within the vicinity which anticipate presence of CK . Otherwise when LN Expanse deployments have not introduced CK to usual data communicated on a receivable signal by MSs in the vicinity sends broadcasts new WDR response data . In any case field should be as accurate as possible for when data is actually sent. Critical regions of code i.e. prevent thread preemption and or anticipated execution timing may be used to affect a best setting of field

In an alternate embodiment records contain a sent date time stamp field of when the request was sent by a remote MS and the received date time stamp field is processed at the MS in processing. This would enable block to calculate a TDOA measurement for returning in field of the WDR sent broadcast at block .

Processing begins at block continues to block where the process worker thread count Ct is accessed and incremented by 1 using appropriate semaphore access e.g. Sem and continues to block for interim housekeeping of pruning the WDR queue by invoking a Prune Queues procedure of . Block may also check the Ct value and signal the process parent thread that all worker threads are running when Ct reaches Max. Block may not be necessary since pruning may be accomplished at block when invoking block .

Thereafter block retrieves from queue a record using interface perhaps a special termination request entry or a record received from thread s and only continues to block when a record containing field set to has been retrieved. Block stays blocked on retrieving from queue until a record with field is retrieved. If block determines a special entry indicating to terminate was not found in queue processing continues to block .

Block peeks the WDR queue using interface for the most recent highest confidence entry for this MS whereabouts by searching queue for the MS ID field matching the MS ID of processing and a confidence field greater than or equal to the confidence floor value and a most recent date time stamp field within a prescribed trailing period of time of block search processing using a f WTV for the period. For example block peeks the queue i.e. makes a copy for use if an entry found for subsequent processing but does not remove the entry from queue for a WDR of the MS of processing which has the greatest confidence over 75 and has been most recently inserted to queue in the last 2 seconds. Since MS whereabouts accuracy may be dependent on timeliness of the WTV it is recommended that the f WTV be some value less than or equal to WTV. In an alternate embodiment a movement tolerance e.g. user configured or system set e.g. 3 meters is incorporated at the MS or at service s used to locate the MS for knowing when the MS has significantly moved e.g. more than 3 meters and how long it has been e.g. 45 seconds since last significantly moving. In this embodiment the MS is aware of the period of time since last significantly moving and the f WTV is set using the amount of time since the MS significantly moved i.e. f WTV as described above or the amount of time since significantly moving whichever is greater . This way a large number of perhaps more confident candidate WDRs are searched in the time period when the MS has not significantly moved. Optional blocks through may have been incorporated to for movement tolerance processing just described in which case the LWT is compared to the current date time to adjust the WTV for the correct trailing period.

Thereafter if block determines a timely whereabouts for this MS already exists to queue current WDR found then processing continues back to block for another loop iteration of processing. If determines a satisfactory WDR does not already exist in queue then block determines a new highest confidence WDR for this MS processing using queue .

Thereafter if block determines a WDR was not created BESTWDR variable null for the MS of processing by block then processing continues back to block . If block determines a WDR was created BESTWDR WDR created by for the MS of processing by block then processing continues to block for preparing parameters and processing is invoked with the new WDR at block for interface before continuing back to block . Parameters set at block are WDRREF a reference or pointer to the WDR completed at block DELETEQ location queue discard processing and SUPER supervisory notification processing.

Referring back to block if a worker thread termination request was found at queue then block decrements the worker thread count by 1 using appropriate semaphore access e.g. Sem and thread processing terminates at block . Block may also check the Ct value and signal the process parent thread that all worker threads are terminated when Ct equals zero 0 .

Alternate embodiments to will have a pool of thread s per location technology WDR field for specific WDR field s selective processing. processing is shown to be generic with handling all WDRs at block .

Thereafter block peeks the WDR queue using interface for most recent WDRs by searching queue for confidence field greater than or equal to the confidence floor value and a most recent date time stamp field within a prescribed trailing period of time of block search processing using a f WTV for the period. For example block peeks the queue i.e. makes a copy of all WDRs to a result list for use if any found for subsequent processing but does not remove the entry s from queue for all WDRs which have confidence over 75 and has been most recently inserted to queue in the last 2 seconds. It is recommended that the f WTV used here be some value less than or equal to the WTV want to be ahead of curve so may use a percentage e.g. 90 but preferably not greater than a couple few seconds depends on MS MS applications MS environment whereabouts determination related variables etc .

In an alternative embodiment thread s coordinate with each other to know successes failures or progress of their sister threads for automatically adjusting the trailing f WTV period of time appropriately. See Alternative IPC Embodiments below.

Thread is of less value to the MS when whereabouts are calculated using stale WDRs or when not enough useful WDRs are considered. In an alternate embodiment a movement tolerance e.g. user configured or system set e.g. 3 meters is incorporated at the MS or at service s used to locate the MS for knowing when the MS has significantly moved e.g. more than 3 meters and how long it has been e.g. 45 seconds since last significantly moving. In this embodiment the MS is aware of the period of time since last significantly moving and the f WTV is set using the amount of time since the MS significantly moved i.e. f WTV as described above or the amount of time since significantly moving whichever is greater . This way a large number of perhaps more confident candidates WDRs are searched in the time period when the MS has not significantly moved. Optional blocks through may have been incorporated to for movement tolerance processing just described in which case the LWT is compared to the current date time to adjust the WTV for the correct trailing period. In any case all useful WDRs are sought at block and placed into a list upon exit from block .

Thereafter block sets THIS MS list and REMOTE MS list sort keys to be used at blocks and . Blocks through will prioritize WDRs found at block depending on the sort keys made at block . A number of variables may be used to determine the best sort keys such as the time period used to peek at block and or the number of entries in the WDR list returned by block and or other variables. When the time period of search is small e.g. less than a couple seconds lists THIS MS and REMOTE MS should be prioritized primarily by confidence fields since any WDRs are valuable for determining whereabouts. This is the preferred embodiment.

When the time period is great careful measure must be taken to ensure stale WDRs are not used e.g. few seconds and not considering movement tolerance . Depending on decision embodiments there will be preferred priority order sort keys created at exit from block for example key1 key2 key3 implies that key1 is a primary key key2 is a second order key and key3 is a third order key. A key such as field 1100b field 1100d field 1100f signal strength would sort WDRs first by using date time stamp fields then by confidence value fields sorted within matching date time stamp WDRs then by signal strength field sub field values sorted within matching WDR confidences no signal strength present lowest priority . Another sort key may be field 1100d field 1100b for sorting WDRs first by using confidence values then by date time stamps sorted within matching WDR confidences . The same or different sort keys can be used for lists THIS MS and REMOTE MS. Any WDR data fields or subfields can be sorted with a key and sort keys can be of N order dimension such that key1 key2 . . . keyN . Whatever sort keys are used block will have to consider confidence versus being stale relative to the WTV. In the preferred embodiment the REMOTE MS and THIS MS lists are set with the same sort keys of field 1100d field 1100b i.e. peek time period used at block is less than 2 seconds so that confidence is primary.

Thereafter block gets the first if any WDR in the list returned at block also processes next WDR in list when encountered again in loop of blocks through and block checks to see if all WDRs have already been processed. If block finds that all WDRs have not been processed then block checks the WDR origination. If block determines the WDR is one that originated from a remote MS i.e. MS ID does not match the MS of processing then block inserts the WDR into the REMOTE MS list using the desired sort key confidence primary time secondary from block and processing continues to block for another loop iteration. If block determines the WDR is one that originated from this MS MS ID field matches the MS of processing e.g. this MS being a DLM at the time of WDR creation this MS ID field or this MS being an ILM at the time of WDR creation previous processing of FIG. A then processing continues to block to determine how to process the WDR which was inserted by this MS for its own whereabouts.

Block accesses field for data found there e.g. may have inserted useful TDOA measurements even though DLM processing occurred or may have inserted useful TDOA and or AOA measurements with reference station s whereabouts or receive processing may have inserted AOA and related measurements . Thereafter if block determines presence of TDOA and or AOA data block checks if reference whereabouts e.g. selected stationary reference location s is also stored in field . If block determines whereabouts information is also stored to field then block makes new WDR s from the whereabouts information containing at least the WDR Core and field containing the AOA and or TDOA information as though it were from a remote DLM or ILM. Block also performs the expected result of inserting the WDR of loop processing into the THIS MS list using the desired sort key from block . Processing then continues to block where the newly made WDR s is inserted into the REMOTE MS list using the desired sort key confidence primary time secondary from block . Block continues back to block .

Referring back to block if it is determined that whereabouts information was not present with the AOA and or TDOA information of field then processing continues to block for inserting into the REMOTE MS list appropriately with sort key from block the currently looped WDR from block . In range location technology associates the MS with the antenna or cell tower location so that field already contains the antenna or cell tower whereabouts and the TDOA information was stored to determine how close the MS was to the antenna or cell tower at the time. The WDR will be more useful in the REMOTE MS list then if added to the THIS MS list see loop of blocks through . Referring back to block if it is determined that no AOA and or TDOA information was in field then processing continues to block for inserting the WDR into the THIS MS list appropriately with sort key confidence primary time secondary from block .

Block handles WDRs that originated from the MS of this MS such as described in or results from previous processing. Block maintains remote DLMs and or ILMs their whereabouts to the REMOTE MS list in hope WDRs contain useful field information for determining the whereabouts of the MS of processing. Block handles WDRs that originated from the MS of processing this MS but also processes fields from stationary references used e.g. by this MS which can be helpful as though the WDR was originated by a remote ILM or DLM. Thus block causes inserting to both lists THIS MS and REMOTE MS when the WDR contains useful information for both. Blocks and cause the iterative loop of blocks through to perform ADLT using DLMs and or ILMs. Alternate embodiments of blocks through may use peek methodologies to sort from queue for the REMOTE MS and THIS MS lists.

Referring back to block if it is determined that all WDRs in the list from block have been processed then block initializes a DISTANCE list and ANGLE list each to null block sets a loop iteration pointer to the first entry of the prioritized REMOTE MS list e.g. first entry higher priority than last entry in accordance with sort key used and block starts the loop for working with ordered WDRs of the REMOTE MS list. Exit from block to block occurs when the REMOTE MS and THIS MS lists are in the desired priority order for subsequent processing. Block gets the next or first REMOTE MS list entry for processing before continuing to block . If block determines all WDRs have not yet been processed from the REMOTE MS list then processing continues to block .

Blocks and direct collection of all useful ILM triangulation measurements for TDOA AOA and or MPT triangulation of this MS relative known whereabouts e.g. other MSs . It is interesting to note that TDOA and AOA measurements field may have been made from different communications interfaces e.g. different wave spectrums depending on interfaces the MS has available i.e. all can participate . For example a MS with blue tooth WiFi and cellular phone connectivity different class wave spectrums supported can be triangulated using the best available information i.e. heterogeneous location technique . Examination of fields in can show wave spectrums and or particular communications interfaces inserted by receive processing for what the MS supports. If block determines an AOA measurement is present field sub field then block appends the WDR to the ANGLE list and processing continues to block . If block determines an AOA measurement is not present then processing continues to block . If block determines a TDOA measurement is present field sub field then block appends the WDR to the DISTANCE list and processing continues to block . Block uses WDRs for providing at least an in range whereabouts of this MS by inserting to the THIS MS list in sorted confidence priority order e.g. highest confidence first in list lowest confidence at end of list . Block continues to block . Block may cause duplicate WDR s inserted to the THIS MS list but this will have no negative effect on selected outcome.

Block compares the ANGLE and DISTANCE lists constructed thus far from loop processing blocks through with minimum triangulation requirements e.g. see Missing Part Triangulation MPT above . Three 3 sides three 3 angles and a side and other known triangular solution guides will also be compared. Thereafter if block determines there is still not enough data to triangulate whereabouts of this MS then processing continues back to block for the next REMOTE MS list entry otherwise block maximizes diversity of WDRs to use for triangulating. Thereafter block uses the diversified DISTANCE and ANGLE lists to perform triangulation of this MS block inserts the newly determined WDR into the THIS MS list in sort key order and continues back to block . Block will use heterogeneous MPT TDOA and or AOA triangulation on ANGLE and DISTANCE lists for determining whereabouts.

Block preferably keeps track of or checks THIS MS for what it has thus far determined whereabouts for in this thread processing to prevent inserting the same WDR to THIS MS using the same REMOTE MS data. Repeated iterations of blocks through will see the same data from previous iterations and will use the best of breed data in conjunction with each other at each iteration in current thread context . While inserting duplicates to THIS MS at block does not cause failure it may be avoided for performance reasons. Duplicate insertions are preferably avoided at block for performance reasons as well but they are again not harmful. Block preferably keeps track of previous diversity order in this thread processing to promote using new ANGLE and DISTANCE data in whereabouts determination at block since each iteration is a superset of a previous iteration in current thread context . Block promotes using WDRs from different MSs different MS IDs and from MSs located at significantly different whereabouts e.g. to maximize surrounded ness preferably around the MS of processing. Block preferably uses sorted diversity pointer lists so as to not affect actual ANGLE and DISTANCE list order. The sorted pointer lists provide pointers to entries in the ANGLE and DISTANCE lists for a unique sorted order governing optimal processing at block to maximize unique MSs and surrounded ness without affecting the lists themselves like a SQL database index . Different embodiments of blocks through should minimize inserting duplicate WDRs for performance reasons to THIS MS which were determined using identical REMOTE MS list data. Block causes using ADLT at blocks through which uses the best of breed whereabouts either as originated by this MS maintained in THIS MS list up to the thread processing point of block or as originated by remote MSs DLMs and or ILMs processed by blocks through the start of block .

Referring back to block if it is determined that all WDRs in the REMOTE MS list have been processed then block sets the BESTWDR reference to the head of THIS MS i.e. BESTWDR references first WDR in THIS MS list which is so far the best candidate WDR highest confidence for this MS whereabouts or null if the list is empty . It is possible that there are other WDRs with matching confidence adjacent to the highest confidence entry in the THIS MS list. Block continues to block for comparing matching confidence WDRs and if there are matches then breaking a tie between WDRs with matching confidence by consulting any other WDR field s e.g. field signal strength or location technology field etc . If there is still a tie between a plurality of WDRs then block may average whereabouts to the BESTWDR WDR using the matching WDRs. Thereafter processing continues to block where the BESTWDR is completed and processing terminates at block . Block also frees resources if any allocated by processing e.g. lists . Blocks through result in setting BESTWDR to the highest priority WDR i.e. the best possible whereabouts determined . It is possible that processing causes a duplicate WDR inserted to queue at block for this MS whereabouts determination but that is no issue except for impacting performance to queue . An alternate embodiment to queue may define a unique index for erring out when inserting a duplicate to prevent frivolous duplicate entries or block will incorporate processing to eliminate the chance of inserting a WDR of less use than what is already contained at queue . Therefore block may include processing for ensuring a duplicate will not be inserted e.g. null the BESTWDR reference prior to returning to at block .

Averaging whereabouts at block occurs only when there are WDRs at the head of the list with a matching highest confidence value and still tie in other WDR fields consulted yet whereabouts information is different. In this case all matching highest confidence whereabouts are averaged to the BESTWDR to come up with whereabouts in light of all matching WDRs. Block performs ADLT when finalizing a single whereabouts WDR using any of the whereabouts found in THIS MS which may contain at this point DLM whereabouts originated by this MS and or whereabouts originated by remote DLMs and or ILMs . Block must be cognizant of sort keys used at blocks and in case confidence is not the primary key time may be primary .

If no WDRs were found at block or no THIS MS list WDRs were found at blocks and and no REMOTE MS list entries were found at block or no THIS MS list WDRs were found at blocks and and no REMOTE MS list entries were found useful at blocks and or then block may be setting BESTWDR to a null reference i.e. none in list in which case block does nothing. Hopefully at least one good WDR is determined for MS whereabouts and a new WDR is inserted for this MS to queue otherwise a null BESTWDR reference will be returned checked at block . See descriptions. If BESTWDR is not null then fields are set to the following upon exit from block 

LOCATION TECHNOLOGY field is preferably set with ILM TDOA Triangulation ILM AOA Triangulation ILM MPT Triangulation or ILM in range as determined by the WDRs inserted to MS LIST at blocks and . The originator indicator is set to ILM. LOCATION REFERENCE INFO field is preferably set with null not set but may be set with contributing data for analysis of queue provided it is marked for being overlooked by future processing of blocks and e.g. for debug purpose . COMMUNICATIONS REFERENCE INFO field is preferably set with null not set . SPEED field is preferably set with Block may compare prioritized entries and their order of time field in THIS MS list for properly setting this field if possible. HEADING field is preferably set with null not set . Block may compare prioritized entries and their order of time field in THIS MS list for properly setting this field if possible. ELEVATION field is preferably set with Field of BESTWDR may be averaged if WDR tie s if available. APPLICATION FIELDS field is preferably set with Field s from BESTWDR or tie s thereof from THIS MS. An alternate embodiment will add alter or discard data with or without date time stamps here at the time of block processing. CORRELATION FIELD is preferably set with Not Applicable i.e. not maintained to queue . SENT DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue . RECEIVED DATE TIME STAMP field is preferably set with Not Applicable i.e. not maintained to queue .

Block determines whereabouts using preferred guidelines such as whereabouts determined never results in a confidence value exceeding any confidence value used to determine whereabouts. Some embodiments will use the mean average of confidence values used some will use the highest and some the lowest of the WDRs used. Preferred embodiments tend to properly skew confidence values to lower values as the LN Expanse grows away from region . Blocks through may consult any of the WDR fields e.g. field sub fields yaw pitch roll speed heading etc to deduce the most useful WDR inputs for determining an optimal WDR for this MS whereabouts.

Thread s are started for every WDR collected from remote MSs. Therefore it is possible that identical new WDRs are inserted to queue using the same WDR information at blocks of simultaneously executing threads but this will not cause a problem since at least one will be found when needed and duplicates will be pruned together when appropriate. Alternative embodiments provide IPC Interprocess Communications Processing coordination between threads for higher performance processing for example 

The current design for queue does not require to prune it. Alternative embodiments may add additional queues for similar processing. Alternate embodiments may use like processing to prune queues or any other queue under certain system circumstances. Parameters received at block may also include how to prune the queue for example when using different constraints for what indicates entry s for discard.

Blocks through handle termination of all processes threads associated with the ILMV roles so there is no explicit ILMV check required. Block initializes an enumerated process name array for convenient processing reference of associated process specific variables described in and continues to block where the first member of the set is accessed for subsequent processing. The enumerated set of process names has a prescribed termination order for MS architecture . Thereafter if block determines the process identifier i.e. 19xx PID such that 19xx is in a loop iteration of blocks through is greater than 0 e.g. this first iteration of PID 0 implies it is to be terminated here also implies process is enabled as used in A and B then block prepares parameters for invocation and block invokes calls the procedure of to terminate the process of this current loop iteration 19xx . Block prepares the second parameter in accordance with the type of 19xx process. If the process 19xx is one that is slave to a queue for dictating its processing i.e. blocked on queue until queue entry present then the second parameter process type is set to 0 directing processing to insert a special termination queue entry to be seen by worker thread s for terminating . If the process 19xx is one that is slave to a timer for dictating its processing i.e. sleeps until it is time to process then the second parameter process type is set to the associated 19xx PID value directing to use in killing terminating the PID in case the worker thread s are currently sleeping . Block passes the process name and process type as parameters to processing. Upon return from block continues to block . If block determines that the 19xx process is not enabled then processing continues to block . Upon return from processing the process is terminated and the associated 19xx PID variable already set to 0 see blocks and .

Block checks to see if all process names of the enumerated set 19xx have been processed iterated by blocks through . If block determines that not all process names in the set have been processed iterated then processing continues back to block for handling the next process name in the set. If block determines that all process names of the enumerated set were processed then block continues to block .

Block destroys semaphore s created at block . Thereafter block destroys queue s created at block may have to remove all entries first in some embodiments block saves persistent variables to persistent storage for example to persistent storage block destroys shared memory created at block and block checks the NTP use variable saved prior to destroying shared memory at block .

If block determines NTP is enabled then block terminates NTP appropriately also see block and processing continues to block . If block determines NTP was not enabled then processing continues to block . Block embodiments are well known in the art of NTP implementations. Block may cause terminating of thread s associated with NTP use.

Block completes LBX character termination then block completes other character termination processing and processing terminates thereafter at block . Depending on what threads were started at block block may terminate the listen receive threads for feeding queue and the send threads for sending data inserted to queue . Depending on what threads were started at block block may terminate the listen receive threads for feeding queue and the send threads for sending data inserted to queue i.e. other character threads altered to cause embedded CK processing . Upon encounter of block the MS is appropriately terminated for reasons at set forth above for invoking .

With reference now to depicted is a flowchart for describing a preferred embodiment of a procedure for terminating a process started by . When invoked by a caller the procedure starts at block and continues to block where parameters passed are determined. There are two parameters the process name to terminate and the type of process to terminate. The type of process is set to 0 for a process which has worker threads which are a slave to a queue. The type of process is set to a valid O S PID when the process worker threads are slave to a timer.

Thereafter if block determines the process type is 0 then block initializes a loop variable J to 0 and block inserts a special termination request queue entry to the appropriate queue for the process worker thread to terminate. See discussions for the queue inserted for which 19xx process name.

Thereafter block increments the loop variable by 1 and block checks if all process prescribed worker threads have been terminated. Block accesses the 19xx Max e.g. Max variable from shared memory using a semaphore for determining the maximum number of threads to terminate in the process worker thread pool. If block determines all worker threads have been terminated processing continues to block for waiting until the 19xx PID variable is set to disabled e.g. set to 0 by block and then to block which causes return to the caller. Block uses a preferred choice of waiting described for blocks and . The 19xx process e.g. will have its 19xx PID e.g. PID variable set at 0 block when the process terminates. In some embodiments the waiting methodology used at block may use the 19xx PID variable or may be signaled by the last terminating worker thread or by block .

If block determines that not all worker threads have been terminated yet then processing continues back to block to insert another special termination request queue entry to the appropriate queue for the next process worker thread to terminate. Blocks through insert the proper number of termination queue entries to the same queue so that all of the 19xx process worker threads terminate.

Referring back to block if it is determined the process type is not 0 i.e. is a valid O S PID then block inserts a special WDR queue entry enabling a queue peek for worker thread termination. The reader will notice that the process termination order of block ensures processes which were slaves to the WDR queue have already been terminated. This allows processes which are slaves to a timer to see the special termination queue entry inserted at block since no threads which are slaves to queue will remove it from queue . Thereafter block waits until the 19xx process name parameter worker threads have been terminated using a preferred choice of waiting described for blocks and . The 19xx process e.g. will have its 19xx PID e.g. PID variable set at 0 block when the process terminates. In some embodiments the waiting methodology used at block may use the 19xx PID variable or may be signaled by the last terminating worker thread or by block . Block also preferably waits for a reasonable timeout period in anticipation of known sleep time of the 19xx process being terminated for cases where anticipated sleep times are excessive and the user should not have to wait for lengthy termination processing. If the timeout occurs before the process is indicated to be terminated then block will continue to block . Block also continues to block when the process has successfully terminated.

If block determines the 19xx process did terminate the caller is returned to at block i.e. 19xx PID already set to disabled 0 . If block determines the 19xx process termination timed out then block forces an appropriate O S kill to the PID thereby forcing process termination and block sets the 19xx PID variable for disabled i.e. process 19xx was terminated . Thereafter block causes return to the caller.

There are many embodiments for setting certain queue entry field s identifying a special queue termination entry inserted at blocks and . Some suggestions In the case of terminating thread s queue insertion of a WDR preferably sets the MS ID field with a value that will never appear in any other case except a termination request e.g. 100 . In the case of terminating thread s and queue insertion of a WDR preferably sets the MS ID field with a value that will never appear in any other case except a termination request e.g. 100 . In the case of terminating thread s queue insertion of a WDR request preferably sets the MS ID field with a value that will never appear in any other case except a termination request e.g. 100 . In the case of terminating thread s queue insertion of a thread request queue record preferably sets field with a value that will never appear in any other case except a termination request e.g. 100 . Of course any available field s can be used to indicate termination to particular thread s .

Terminating threads of processing in has been presented from a software perspective but there are hardware firmware thread embodiments which may be terminated appropriately to accomplish the same functionality. If the MS operating system does not have an interface for killing the PID at block then blocks through can be eliminated for relying on a invocation timeout incorporated for block to appropriately rob power from remaining thread s of processing.

An ILM has many methods and systems for knowing its own location. LBX depends on MSs maintaining their own whereabouts. No service is required to maintain the whereabouts of MSs in order to accomplish novel functionality.

As mentioned above architecture provides a set of processes which can be started or terminated for desired functionality. Thus architecture provides a palette from which to choose desired deployment methods for an LN expanse.

In some embodiments all whereabouts information can be pushed to expand the LN expanse. In such embodiments the palette of processes to choose from includes at least process process and process . Additionally process would be required in anticipation of LN expanse participating data processing systems having NTP disabled or unavailable. Additionally process could be used for ensuring whereabouts are timely e.g. specifically using all blocks except through . Depending on DLM capability of MSs in the LN expanse a further subset of processes and may apply. Thread s beacon whereabouts information regardless of the MS being an affirmifier or pacifier.

In some embodiments all whereabouts information can be pulled to expand the LN expanse. In such embodiments the palette of processes to choose from includes at least process e.g. specifically using all blocks except and process process and process . Additionally process would be required in anticipation of LN expanse participating data processing systems having NTP disabled or unavailable. Depending on DLM capability of MSs in the LN expanse a further subset of processes and may apply.

There are many embodiments derived from architecture . Essential components are disclosed for deployment varieties. In communications protocols which acknowledge a transmission processes may not be required even in absence of NTP use. A sending MS appends a sent date time stamp e.g. field on its time scale to outbound data and an acknowledging MS or service responds with the sent date time stamp so that when the sending MS receives it receives data or the sending MS now a receiving MS calculates a TDOA measurement by comparing when the acknowledgement was received and when it was originally sent. Appropriate correlation outside of process deployment enables the sending MS to know which response went with which data was originally sent. A MS can make use of 19xx processes as is appropriate for functionality desired.

In push embodiments disclosed above useful summary observations are made. Service s associated with antennas periodically broadcast beacon their reference whereabouts e.g. WDR information for being received by MSs in the vicinity. When such services are NTP enabled the broadcasts include a sent date time stamp e.g. field . Upon receipt by a NTP enabled MS in the vicinity the MS uses the date time stamp of MS receipt e.g. with the date time stamp of when sent e.g. field to calculate a TDOA measurement. Known wave spectrum velocity can translate to a distance. Upon receipt of a plurality of these types of broadcasts from different reference antennas the MS can triangulate itself for determining its whereabouts relative known whereabouts of the reference antennas. Similarly reference antennas are replaced by other NTP enabled MSs which similarly broadcast their whereabouts. A MS can be triangulated relative a mixture of reference antennas and other NTP enabled MSs or all

NTP enabled MSs. Stationary antenna triangulation is accomplished the same way as triangulating from other MSs. NTP use allows determining MS whereabouts using triangulation achievable in a single unidirectional broadcast of data or . Furthermore reference antennas service s need not communicate new data and MSs need not communicate new data . Usual communications data are altered with a CK as described above. Usual communications data are altered with a CK as described above. This enables a MS with not only knowing there are nearby hotspots but also where all parties are located including the MS . Beaconing hotspots or other broadcasters do not need to know who you are the MS ID and you do not need to know who they are in order to be located. Various bidirectional correlation embodiments can always be used for TDOA measurements.

In pull embodiments disclosed above data processing systems wanting to determine their own whereabouts requestors broadcast their requests e.g. record . Service s or MSs responders in the vicinity respond. When responders are NTP enabled the responses include a sent date time stamp e.g. field that by itself can be used to calculate a TDOA measurement if the requestor is NTP enabled. Upon receipt by a requestor with no NTP the requestor uses the date time stamp of a correlated receipt e.g. with the date time stamp of when sent e.g. fields or to calculate a time duration TDOA for whereabouts determination as described above. New data or usual communications data applies as described above.

If NTP is available to a data processing system it should be used whenever communicating date time information e.g. NTP bit of field or so that by chance a receiving data processing is also NTP enabled a TDOA measurement can immediately be taken. In cases where either the sending first data processing system or receiving second data processing system is not NTP enabled then the calculating data processing system wanting a TDOA measurement will need to calculate a sent and received time in consistent time scale terms. This includes a correlated bidirectional communications data flow to properly determine duration in time terms of the calculating data processing system. In a send initiated embodiment a first sending data processing system incorporates a sent date time stamp e.g. fields or and determines when a correlated response is received to calculate the TDOA measurement both times in terms of the first sending data processing system . In another embodiment a second receiving data processing system receives a sent date time stamp e.g. field and then becomes a first sending data processing as described in the send initiated embodiment. Whatever embodiment is used it is beneficial in the LN expanse to minimize communications traffic.

The NTP bit in date time stamps enables optimal elegance in the LN expanse for taking advantage of NTP when available and using correlated transmissions when it is not. A NTP enabled MS is somewhat of a chameleon in using unidirectional data or received to determine whereabouts relative NTP enabled MS s and or service s and then using bidirectional data or relative MS s and or service s without NTP. A MS is also a chameleon when considering it may go in and out of a DLM or ILM identity role depending on what whereabouts technology is available at the time.

The MS ID or pseudo MS ID in transmissions is useful for a receiving data processing system to target a response by addressing the response back to the MS ID. Targeted transmissions target a specific MS ID or group of MS IDs while broadcasting is suited for reaching as many MS IDs as possible. Alternatively just a correlation is enough to target a data source.

In some embodiments where a MS is located relative another MS this is applicable to something as simple as locating one data processing system using the location of another data processing system. For example the whereabouts of a cell phone first data processing system is used to locate an in range automotive installed second data processing system for providing new locational applications to the second data processing system or visa versa . In fact the second data processing may be designed for using the nearby first data processing system for determining its whereabouts. Thus as an MS roams in the know of its own whereabouts the MS whereabouts is shared with nearby data processing systems for new functionality made available to those nearby data processing systems when they know their own whereabouts by associating to the MS whereabouts . Data processing systems incapable of being located are now capable of being located for example locating a data processing equipped shopping cart with the location of an MS or plurality of MSs.

Architecture presents a preferred embodiment for IPC Interprocess Communications Processing but there are other embodiments for starting terminating threads signaling between processes semaphore controls and carrying out present disclosure processing without departing from the spirit and scope of the disclosure. In some embodiments threads are automatically throttled up or down e.g. Max per unique requirements of the MS as determined by how often threads loop back to find an entry already waiting in a queue. If thread s spend less time blocked on queue they can be automatically throttled up. If thread s spend more time blocked on queue they can be automatically throttled down. Timers can be associated with queue retrieval to keep track of time a thread is blocked.

LBX history preferably maintains history information of key points in processing where history information may prove useful at a future time. Some of the useful points of interest may include 

Location applications can use the WDR queue for retrieving the most recent highest confidence entry or can access the single instance WDR maintained or most recent WDR of block discussed above . Optimally applications are provided with an API that hides what actually occurs in ongoing product builds and for ensuring appropriate semaphore access to multi threaded accessed data.

Correlation processing does not have to cause a WDR returned. There are embodiments for minimal exchanges of correlated sent date time stamps and or received date time stamps so that exchanges are very efficient using small data exchanges. Correlation of this disclosure was provided to show at least one solution with keeping in mind that there are many embodiments to accomplish relating time scales between data processing systems.

Architecture provides not only the foundation for keeping an MS abreast of its whereabouts but also the foundation upon which to build LBX nearby functionality. Whereabouts of MSs in the vicinity are maintained to queue . Permissions and charters can be used for governing which MSs to maintain to queue how to maintain them and what processing should be performed. For example MS user Joe wants to alert MS user Sandy when he is in her vicinity or user Sandy wants to be alerted when Joe is in her vicinity. Joe configures permissions enabling Sandy to be alerted with him being nearby or Sandy configured permissions for being alerted. Sandy accepts the configuration Joe made or Joe accepts the configuration Sandy made. Sandy s queue processing will ensure Joe s WDRs are processed uniquely for desired functionality.

To maintain modularity in interfaces to queues and parameters may be passed rather than having the modular send receive processing access fields of application records. When WDRs are sent the WDR will be targeted e.g. field perhaps also with field indicating which communications interface to send on e.g. MS has plurality of comm. interfaces . When WDRs are broadcast e.g. null MS ID the WDR is preferably outbound on all available comm. interfaces unless field indicates to target a comm. interface. Analogously when WDR requests are sent the request will be targeted e.g. field perhaps also with field indicating which communications interface to send on e.g. MS has plurality of comm. interfaces . When WDR requests are broadcast e.g. null MS ID the WDR is preferably outbound on all available comm. interfaces unless field indicates to target a comm. interface.

Fields and are also of interest to the transport layer. Any subset or all of transport related fields may be passed as parameters to send processing or received as parameters from receiving processing to ensure send and receive processing is adaptable using pluggable transmission reception technologies.

An alternate embodiment to the BESTWDR WDR returned by processing may be set with useful data for reuse toward a future processing thread whereabouts determination. Field see pg. 168 can be set with useful data for that WDR to be in turn used at a subsequent whereabouts determination of . This is referred to as Recursive Whereabouts Determination RWD wherein ILMs determine WDRs for their whereabouts and use them again for calculating future whereabouts by populating useful TDOA AOA MPT and or whereabouts information to field .

An alternate embodiment may store remote MS movement tolerances if they use one to WDR field so the receiving MS can determine how stale are other WDRs in queue from the same MS for example when gathering all useful WDRs to start with in determining whereabouts of processing e.g. block . Having movement tolerances in effect may prove useful for maximizing useful WDRs used in determining a whereabouts processing .

While various embodiments of the present disclosure have been described above it should be understood that they have been presented by way of example only and not limitation. Thus the breadth and scope of the present disclosure should not be limited by any of the above described exemplary embodiments but should be defined only in accordance with the following claims and their equivalents.

