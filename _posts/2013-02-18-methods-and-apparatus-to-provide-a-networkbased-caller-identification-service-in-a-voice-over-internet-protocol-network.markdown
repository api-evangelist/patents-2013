---

title: Methods and apparatus to provide a network-based caller identification service in a voice over internet protocol network
abstract: Methods and apparatus to provide a network-based caller identification (CID) service in a voice over Internet protocol (VoIP) network are disclosed. An example method comprises receiving a session initiation protocol (SIP) communication session initiation request message comprising an early-media indicator, disabling a ringtone generator, sending a SIP ringing message containing a session descriptor in response to the early-media indicator, receiving a ringtone based on the session descriptor, and presenting the ringtone to alert a user of a requested communication session.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09065905&OS=09065905&RS=09065905
owner: AT&T Intellectual Property I, L.P.
number: 09065905
owner_city: Atlanta
owner_country: US
publication_date: 20130218
---
This patent arises from a continuation of U.S. application Ser. No. 12 043 762 filed on Mar. 6 2008 now U.S. Pat. No. 8 379 824 entitled Methods and Apparatus to Provide Network Based Caller Identification Service in a Voice Over Internet Protocol Network which is hereby incorporated herein by reference in its entirety.

This disclosure relates generally to voice over Internet protocol VoIP networks and more particularly to methods and apparatus to provide a network based caller identification CID service in a VoIP network.

A talking caller identification service is one in which a called party hears an audible ringtone and or session invitation arrival notification that sounds like for example call from John Doe wherein John Doe is the name of the calling party and or the person associated with the calling number and or device. In some instances a called device translates text based caller identification information into an audible ringtone using a text to speech synthesizer and or utilizes a provided link e.g. a uniform resource locator to download and or otherwise obtain an audible ringtone from a server. The called device then presents the audible ringtone to a user of the called device.

Methods and apparatus to provide a network based caller identification CID service in a voice over Internet protocol VoIP network are disclosed. A disclosed example method includes receiving a session initiation protocol SIP communication session initiation request message comprising an early media indicator disabling a ringtone generator sending a SIP ringing message containing a session descriptor in response to the early media indicator receiving a ringtone based on the session descriptor and presenting the ringtone to alert a user of a requested communication session.

A disclosed example apparatus includes a session initiation protocol SIP interface to receive a communication session initiation request message comprising an early media indicator and to send a SIP response message comprising a session descriptor in response to the early media indicator an early media handler to receive a ringtone based on the session descriptor and a user interface to present the ringtone to alert a user of a requested communication session.

A disclosed example method to provide a network based caller identification service includes receiving a communication session initiation request message from a calling party modifying the communication session initiation request to add an early media indicator sending the modified communication session initiation request to a called party and when the called party responds with a session descriptor for a real time protocol communication session directing a messaging server to provide caller identification data associated with the calling party to the called party via the real time protocol communication session.

Another disclosed example apparatus includes an interface to receive a communication session initiation request message from a calling party and a caller identification module. In the disclosed example the caller identification module is to modify the received communication session initiation request to add an early media indicator send the modified communication session initiation request to a called party and when the called party responds with a session descriptor for a real time protocol communication session direct a messaging server to provide caller identification data associated with the calling party to the called party via the real time protocol communication session.

Yet another disclosed example method includes receiving a request message to provide a caller identification to a called party querying a messaging service subscriber database to determine whether a calling party associated with the request is a subscriber of a messaging service obtaining caller identification data from the messaging service subscriber database when the calling party is a subscriber of the messaging service and providing the caller identification data over a network to the called device.

A disclosed example messaging server includes a protocol interface to receive a request message to provide a caller identification to a called party a caller identification server to query a subscriber database to determine whether a calling party associated with the request is a subscriber of a messaging service provided by the messaging server and a media server to obtain caller identification data from the subscriber database when the calling party a the subscriber of the messaging server and to forward the caller identification data to the called device.

In the interest of brevity and clarity throughout the following disclosure references will be made to the example Internet protocol IP Multimedia subsystem IMS based voice over IP VoIP communication system the example IP networks and the example access networks and the example feature servers and the example messaging server and or the example IMS devices and of . Moreover the following disclosure will utilize SIP messages and or message exchanges. However it should be understood that the methods and apparatus described herein to provide a network based caller identification CID service are applicable to other VoIP communication systems and or networks e.g. networks based on soft switches VoIP devices IMS devices feature servers messaging servers access networks IP networks IMS networks and or IMS communication systems and or other types of protocols messages and or message exchanges. Further while the example methods and apparatus disclosed herein are described with reference to audible e.g. tone s tune s and or talking ringtones it should be understood that the disclosed methods and apparatus be may used to provide any number and or type s of ringtones such as but not limited to video ringtones audio and video ringtones and or picture based ringtones.

To support network based CID services either or both of the example IMS devices of includes a CID handler . As described more fully below in connections with and or when the example CID handler of receives a network based ringtone notification e.g. a SIP INVITE message containing an early media indicator it responds by sending a SIP 180 RINGING message containing a session descriptor for a ringtone delivery communication session e.g. a real time protocol RTP communication session by which an audible ringtone can be streamed to the CID handler . An example early media indicator comprises a SIP ALERT INFO header having a value of EARLY MEDIA. An example session descriptor is constructed in accordance with the session description protocol SDP defined in Internet Engineering Task Force IETF Request For Comment RFC 2327. The example CID handler receives the audible ringtone via the example RTP communication session and presents the received audible ringtone as it is received to a user of the IMS device . The audible ringtone is presented instead of or in addition to to any other ringtone s and or communication session notification s provided and or presented at the called device . For example a called device may present text based CID information in addition to or instead of a network provided audible ringtone may present the network provided audible ringtone followed by or mixed with a second ringtone configured locally at the called device etc. When the user answers the incoming communication session the CID handler terminates the RTP communication session and the IMS device establishes the original communication session requested by the calling IMS device . An example manner of implementing the example CID handler of is described below in connection with .

To access IMS communication services throughout and or within a site location building geographic area and or geographic region the example IMS communication system of includes any number and or type s of access networks two of which are designated in with reference numbers and . In general the example access networks and provide and or facilitate a communicative coupling of the IMS devices and to and or with an IMS network which provides and or enables IMS communication services e.g. telephone services Internet services data services messaging services instant messaging services electronic mail email services chat services video services audio services gaming services voicemail facsimile services etc. to the IMS device and . However in some examples one or more of the IMS devices and may access the IMS network without use of an access network . The example access networks and can be implemented using any number and or type s of past present and or future standards specifications communication devices networks technologies and or systems such as public switched telephone network PSTN systems public land mobile network PLMN systems e.g. cellular wireless distribution systems wired or cable distribution systems coaxial cable distribution systems Ultra High Frequency UHF Very High Frequency VHF radio frequency systems satellite or other extra terrestrial systems cellular distribution systems power line broadcast systems fiber optic networks and or any combinations and or hybrids of these devices systems and or networks.

While in the illustrated example of each of the example IMS devices and are depicted as having an associated access network such depictions are merely illustrative. For example the example IMS devices and may utilize the same access network an IMS device and may be configured and or capable to utilize more than one access network at the same and or different times an IMS device and may be configured to access the IMS network directly or via the IP network without an intervening access network etc.

To provide communication services the example IMS based VoIP communication system of includes one or more IMS networks one of which is designated in at reference numeral . As described more fully below the example IMS network of implements and or provides in addition to other things audible ringtones via a network based CID service. In general for an initiated communication session a feature server directs a messaging server to use and or provide an audible greeting previously recorded by a calling party e.g. during initialization setup configuration and or modification of a voicemail account as an audible ringtone for calls initiated by the calling party. If the calling party is not a subscriber of the messaging server the messaging server can carry out text to speech synthesis to create an audible ringtone from text based CID information. The messaging server provides and or transmits the audible ringtone to a called device as early media e.g. as data streamed and or transmitted to the called device prior to the initially requested communication session being established between the called device and the calling device . The called device presents the audible ringtone to alert a user of the called device of a requested communication session from the calling party associated with the audible ringtone.

While in the illustrated example of the messaging server may perform a text to speech synthesis to create an audible ringtone from text based CID information any or all of the example IMS devices and and or the example feature servers and could additionally or alternatively implement provide and or include a text to speech synthesizer to create audible ringtones.

Example devices and methods that may be used to define specify and or customize communication notifications e.g. ringtones in a communication network are described in U.S. patent application Ser. No. 12 023 713 which is entitled Device and Methods for Customization of Communication Notification in a Converged Network and was filed on Jan. 31 2008. U.S. patent application Ser. No. 12 023 713 is hereby incorporated by reference in its entirety.

In contrast to the example communication system of in traditional IMS networks network based CID services require that a called IMS device be capable of retrieving a file via for example hyper text transfer protocol HTTP . Such an ability introduces a substantial amount of intelligence and or complexity into an IMS device and or requires that a user of the IMS device be subscribed to a data voice service rather than a voice only service. Moreover accessing such files may introduce a significant and or noticeable delay in notifying a user of an incoming call unless the IMS device is capable of rendering audio from a file while the file is being downloaded. However such capabilities may not be available in some IMS devices as they require a multi threaded operating system to be executed on the IMS device. For at least these reasons traditional IMS networks place excessive and or undesirable processing and or resource s loads on IMS devices to provide network based CID services. As described more fully below the methods and apparatus to provide network based CID services in IMS networks described herein provide a more flexible capable and or powerful user experience while requiring and or consuming considerably less IMS device resources.

In the example IMS communication system of the example IMS devices and are communicatively coupled to the example IMS network via one or more of the example access networks and or and or any number and or type s of private and or public IP based communication networks such as for example the Internet two of which are illustrated in with reference numerals and . While in the illustrated example of each of the example IMS devices and are depicted as having an associated IP network such depictions are merely illustrative. For example the example IMS devices and may utilize the same public IP network an IMS device and may be configured and or capable to utilize more than one IP network at the same and or different times etc. In general the example IP networks and of provide and or facilitate a communicative coupling of the IMS devices and to and or with the IMS network .

In some examples the IMS devices and may be communicatively coupled to the access networks and via one or more additional IP based networks and or devices not shown such as a local area network LAN a gateway and or a router located within a place of business a school and or a residence. The example IMS devices and of are communicatively coupled to the example access networks and the example IP networks and and or more generally the example IMS network via any number and or type s of past current and or future communication network s communication system s communication device s transmission path s protocol s technique s specification s and or standard s . For instance the example IMS devices and may be coupled to the example access networks and the example IP networks and and or the example IMS network via any type s of voice band modem s digital subscriber line DSL modem s cable modem s Ethernet transceiver s optical transceiver s IP virtual private network VPN connection s Institute of Electrical and Electronics Engineers IEEE 802.11x a.k.a. WiFi transceiver s IEEE 802.16 a.k.a. WiMax wireless local area network WLAN access point s general packet radio services GPRS networks in 3G wireless networks etc. Moreover any or all of the example IMS network the example access networks and and or the example IP networks and of may extend geographically to include one or more locations near to and or encompassing one or more of the IMS devices and . For example the access network may include a wireless access point not shown by which for example a WiFi IP phone connects to the IP network and the IMS network .

In the example IMS communication system of the example access networks and the example IP networks and and the IMS network need not be owned implemented and or operated by a single service provider. For example the IMS devices and may access IMS services provided by an IMS network owned operated and or implemented by a first service provider via access networks and which are owned operated and or implemented by one or more additional service providers. However any or all of the access networks and the IMS network and or the IP networks and may be operated by the same service provider.

In the illustrated example IMS communication system of each IMS device e.g. the example IMS devices and that is registered to the example IMS network is associated with and or assigned to a serving call session control function S CSCF server two of which are designated in with reference numerals and . The example S CSCF servers and of are responsible for handling incoming and or outgoing IMS communication sessions e.g. telephone calls and or data and or video sessions associated with its registered IMS devices and .

While two S CSCF servers and are illustrated in the IMS network may include any number and or type s of S CSCF servers and each such S CSCF server may support any number and or type s of IMS devices and . The example S CSCF servers and of perform session control maintain session states and or enable communications with call feature servers e.g. the example application servers of for its associated and or registered IMS devices and . For instance when the calling IMS device A initiates for example an outgoing telephone call to the example IMS device B a communication session initiation message e.g. a SIP INVITE message is routed by the IMS network from the IMS device A to the S CSCF server A associated with that particular IMS device A .

In response to the communication session initiation message the example S CSCF server A sends an ENUM query request message to a tElephone NUMber mapping ENUM server to obtain an identifier e.g. a SIP uniform resource identifier URI for the IMS device B . The identifier obtained from the example ENUM server is used by the S CSCF server A to establish the requested communication session.

To provide an access entry point for an IMS device and into the IMS network the example IMS network of includes any number and or type s of proxy call session control function P CSCF servers two of which are designated in with reference numerals and . The example P CSCF servers and of among other things route SIP messages between IMS devices and and their associated S CSCF servers and .

To locate and or identify the S CSCF server and associated with an IMS device and the example IMS network of includes any number and or type s of interrogating call session control function I CSCF servers one of which is designated in with reference number . The example I CSCF server of serves as a contact point within the example IMS network for connections destined for an IMS device and of the IMS communication system and or for an IMS device and currently located within the serving area of the IMS communication system e.g. a roaming subscriber . For example for a destination identified by the example ENUM server the example I CSCF identifies to which S CSCF server the final destination IMS device and is registered. IMS protocol messages e.g. SIP messages directed to the destination IMS device and are then routed to the S CSCF server and identified by the I CSCF .

To manage subscriber information and or to enable subscribers and or servers to locate other servers subscribers and or destinations the example IMS network of includes any number and or type s of home subscriber server s HSSs one of which is designated in with reference numeral . The example HSS of maintains a device profile and or one or more preferences for each subscriber and or IMS device and of the IMS network . The example I CSCF server of uses information contained in the HSS to for example determine and or locate the S CSCF server and associated with a particular subscriber and or IMS device and . As described below the example feature servers and of use information contained in the HSS to for example determine whether a called IMS device supports network based CID services as described herein.

To provide one or more additional call features such as for example network based CID services the example IMS network of includes any number and or type s of application servers two of which are designated in with reference numerals and . The example application servers and of also referred to herein as feature servers provide and or implement additional service features to subscribers e.g. network based CID services call barring calling name delivery and or blocking call blocking call forward call busy transfer call screening call forking call trace voicemail announcement servers call trees etc. . Example application servers and include but are not limited to voice over Internet protocol VoIP feature servers. The application servers and may be used to provide and or implement call features and or services for calling and or called parties. In addition to any other feature server functions any or all of the example feature servers and of may perform and or implement one or more functions that enable network based CID services as described in more detail below in connection with and or . For example when a user of an IMS device initiates a communication session e.g. by dialing a telephone number the IMS device sends a SIP INVITE message. The SIP INVITE message gets routed as described above to its associated S CSCF . The S CSCF forwards the SIP INVITE message to its associated feature server . The feature server determines whether the called IMS device supports network based CID services by for example consulting and or querying the HSS . If the called device supports network based CID services the feature server modifies the SIP INVITE message to include an early media indicator and sends the modified SIP INVITE message to the called IMS device . When the called device responds with a SIP 180 RINGING message containing a session descriptor for a RTP communication session by which an audible ringtone may be received the feature server directs and facilitates the establishment of the RTP communication session between the example messaging server and the IMS device . The messaging server streams the audible ringtone to the IMS device via the established RTP communication session. An example early media indicator comprises a SIP ALERT INFO header having a value of EARLY MEDIA. An example session descriptor is constructed in accordance with SDP defined in IETF RFC 2327. An example manner of implementing any or all of the example feature servers and of is described below in connection with .

To collect record store retrieve and or access messages left by and or for subscribers of the IMS network the IMS network includes one or more messaging servers one of which is designated in with reference numeral . In addition to any other messaging service functions the example messaging server of provides audible ringtones to called IMS devices as described in more detail below in connection with and or . The example messaging server preferably accesses provides and or uses audible greetings stored by subscribers of the messaging server as audible ringtones. Such audidble greetings are recorded by a user and or subscriber of the messaging server while the user is initializing configuring setting up and or modifying their messaging account e.g. a voicemail account . For example the messaging server may record an audible greeting as the user speaks their name. Because recorded audible greetings are spoken by the actual user the use of recorded greetings as audible ringtones are substantially preferred to audible ringtones generated via text to speech synthesis. However the example messaging server can additionally or alternatively use text to speech synthesis to create and or generate audible ringtones from text based CID information for calling parties that are not subscribers of the messaging server . An example manner of implementing the example messaging server of is described below in connection with .

As illustrated in the example S CSCF servers and the example P CSCF servers and the example I CSCF server the example HSS the example feature servers and and or the example messaging server communicate and or are communicatively coupled via any number type s and or combination s of communication paths communication networks busses and or communication devices .

While an example IMS communication system example IMS devices and and an example IMS network have been illustrated in the devices networks systems servers and or processors illustrated in may be combined divided re arranged eliminated and or implemented in any way. For example the example S CSCF servers and the example ENUM server the example P CSCF servers and the example I CSCF server the example HSS the example feature servers and and or the example messaging servers illustrated in are logical entities of the example IMS network . They may therefore be implemented separately and or in any combination using for example machine accessible instructions executed by one or more computing devices and or computing platforms e.g. the example processing platform of . Further the example IMS devices and the example CID handlers the example S CSCF servers and the example ENUM server the example P CSCF servers and the example I CSCF server the example HSS the example feature servers and the example messaging servers and or more generally the example IMS network may be implemented by hardware software firmware and or any combination of hardware software and or firmware. Further still the example IMS communication system the example IMS devices and and or the example IMS network may include additional devices servers systems networks gateways portals and or processors in addition to or instead of those illustrated in and or may include more than one of any or all of the illustrated devices servers networks systems gateways portals and or processors. For example an IMS network may include any number and or type s of media gateways media gateway control function BGCF servers breakout gateway control function BGCF severs access border elements peered border elements proxy servers and or session border controllers.

The example exchanges and or the example machine accessible instructions of may be carried out by one or more processor s controller s and or any other suitable processing device s . For example the example exchanges and or the example machine accessible instructions of may be embodied in coded instructions stored on a tangible medium such as a flash memory a read only memory ROM and or random access memory RAM associated with a processor e.g. the example processor discussed below in connection with . Alternatively some or all of the example exchanges and or the example machine accessible instructions of may be implemented using any combination s of application specific integrated circuit s ASIC s programmable logic device s PLD s field programmable logic device s FPLD s discrete logic hardware firmware software etc. Also some or all of the example exchanges and or the example machine accessible instructions of may be implemented manually or as any combination s of any of the foregoing techniques for example as any combination of firmware software discrete logic and or hardware. When any of the appended claims are read to cover a purely software implementation at least one of the example IMS devices and the example CID handlers the example feature servers and the example messaging servers and or more generally the example IMS network are hereby expressly defined to include a tangible medium such as a memory a DVD a CD etc. Many other methods of implementing the example IMS devices and the example CID handlers the example feature servers and the example messaging servers and or more generally the example IMS network of and or may be employed. For example the order of execution of the blocks of the example flowcharts and or the example exchanges of may be changed and or some of the blocks and or exchanges described may be changed eliminated sub divided and or combined. Additionally any or all of the example exchanges and or the example machine accessible instructions of may be carried out sequentially and or carried out in parallel by for example separate processing threads processors devices discrete logic circuits etc.

The example protocol message exchanges of begin with the example calling IMS device sending a communication session initiation message e.g. a SIP INVITE message which specifies a called IMS device and a session descriptor for the requested communication session. The feature server determines whether the called IMS device supports network based CID services as described herein block . If the called IMS device does not support a network based ringtone block the feature server forwards the SIP INVITE message to the called device . Handling of the remainder of the requested communication session then proceeds as in a normal fashion e.g. in a manner consist with any past present and or future IMS network call processing .

If the called IMS device supports a network based ringtone block the feature server modifies the SIP INVITE message by adding an early media indicator such as an ALERT INFO header having a value of EARLY MEDIA and sends the modified SIP INVITE message to the called device as designated at reference numeral .

In response to the modified SIP INVITE message and if the called device is not already engaged in a call e.g. busy the called IMS device disables a local ringtone generator block and sends a SIP 180 RINGING message to the feature server . The SIP 180 RINGING message contains a session descriptor for a RTP communication session via which a streaming audible ringtone can be provided to the called device . An example session descriptor is constructed in accordance with SDP as defined in IETF RFC 2327.

In response to the SIP 180 RINGING message the feature server directs via a SIP INVITE message the messaging server to provide an audible ringtone to the called device . The example SIP INVITE message contains the session descriptor provided by the called device in the SIP 180 RINGING message a feature identifier indicating that an audible ringtone associated with the calling device is to be provided to the called device and a calling party identifier A that identifies the calling device . An example calling party identifier A is text based CID information such as a telephone number and or a SIP URI associated with the calling device . The feature server also sends a SIP 180 RINGING message to the calling device to indicate that the called device is ringing. In response to the SIP 180 RINGING message the calling device provides a ringing indicator e.g. a ringback tone to a calling party.

The messaging server responds to the SIP INVITE message with a SIP 200 OK message which is acknowledged by the feature server in a SIP ACK message . The messaging server establishes a RTP communication session with the called device and provides an audible ringtone e.g. a recording of the name of the calling party to the called device via the RTP communication session . The called devices presents e.g. plays the received ringtone and then waits for a user to answer the requested communication session.

When the user answers the communication session request the called device sends a SIP 200 OK message to the feature server . The feature server notifies the messaging server that the communication session has been answered by sending a SIP BYE message to the messaging server . The messaging server responds with a SIP 200 OK message .

The feature server also forwards the SIP 200 OK message to the calling device which the calling device acknowledges via a SIP ACK message . The feature server forwards the SIP ACK message to the called device . The calling device and the called device then proceed to establish an RTP communication session for the initially requested communication session.

To perform queries of a HSS e.g. the example HSS of the example feature server of includes an HSS interface . The example HSS interface of implements and or provides one or more application programming interfaces APIs via which queries of the HSS may be performed. For example the HSS interface may be used to determine whether a called device supports network based CID services.

To provide network based CID services the example feature server of includes a CID module . As described more fully above in connection with when a user of an IMS device initiates a communication session e.g. by dialing a telephone number the IMS device sends a SIP INVITE message. The SIP INVITE message gets routed to a CID module of an associated feature server . The example CID module of determines whether the called IMS device supports network based CID services by for example consulting and or querying the HSS via the example HSS interface . If the called device supports network based CID services the CID module modifies the SIP INVITE message to include an early media indicator and sends the modified SIP INVITE message to the called IMS device . When the called device responds with a SIP 180 RINGING message containing a session descriptor for a RTP communication session by which an audible ringtone may be received the CID module directs and facilitates the establishment of the RTP communication session between the example messaging server and the IMS device .

While an example manner of implementing any or all of the example feature servers and of has been illustrated in one or more of the interfaces data structures elements processes and or devices illustrated in may be combined divided re arranged omitted eliminated and or implemented in any other way. Further the example SIP interface the example HSS interface the example CID module and or more generally the example feature server of may be implemented by hardware software firmware and or any combination of hardware software and or firmware. Thus for example any or the example SIP interface the example HSS interface the example CID module and or more generally the example feature server may be implemented by one or more circuit s programmable processor s ASIC s PLD s and or FPLD s etc. When any of the appended claims are read to cover a purely software implementation at least one of the example SIP interface the example HSS interface the example CID module and or more generally the example feature server are hereby expressly defined to include a tangible medium such as a memory a DVD a CD etc. Further still a feature server may include interfaces data structures elements processes and or devices instead of or in addition to those illustrated in and or may include more than one of any or all of the illustrated interfaces data structures elements processes and or devices.

To provide timer services the example CID handler of includes any type of timer . The example timer of provides an API via which the timer can be started and provides a notification when a timeout timer expires.

To implement network based CID services the example CID handler of includes the example early media handler . When the example early media handler of receives a network based ringtone notification e.g. a SIP INVITE message containing an early media indicator it responds by sending a SIP 180 RINGING message containing a session descriptor for a real time protocol RTP communication session by which an audible ringtone can be streamed to the early media handler . The example network based ringtone notification and the SIP 180 RINGING messages are received and transmitted respectfully via any type of SIP interface . The example early media handler of receives the streaming audible ringtone via the RTP communication session and directs the example ringtone controller to present the received audible ringtone as it is received via the user interface .

When a user answers the incoming communication session e.g. by pressing a key and or button of the user interface the example early media handler of terminates the RTP communication session and the IMS device associated with the CID handler establishes the original communication session requested by the calling IMS device .

While an example manner of implementing any or all of the example CID handlers of has been illustrated in one or more of the interfaces data structures elements processes and or devices illustrated in may be combined divided re arranged omitted eliminated and or implemented in any other way. Further the example ringtone controller the example early media handler the example ringtone generator the example user interface the example timer the example SIP interface and or more generally the example CID handler of may be implemented by hardware software firmware and or any combination of hardware software and or firmware. Thus for example any or the example ringtone controller the example early media handler the example ringtone generator the example user interface the example timer the example SIP interface and or more generally the example CID handler may be implemented by one or more circuit s programmable processor s ASIC s PLD s and or FPLD s etc. When any of the appended claims are read to cover a purely software implementation at least one of the example ringtone controller the example early media handler the example ringtone generator the example user interface the example timer the example SIP interface and or more generally the example CID handler are hereby expressly defined to include a tangible medium such as a memory a DVD a CD etc. Further still a CID handler may include interfaces data structures elements processes and or devices instead of or in addition to those illustrated in and or may include more than one of any or all of the illustrated interfaces data structures elements processes and or devices.

To allow the example messaging server of to provide media streams the messaging server includes one or more media servers one of which is designated in with reference numeral . Using any suitable protocol s frame s packet s and or format s the example media server of transmits streams and or otherwise provides media streams e.g. audible ringtones to other portions of an IMS network e.g. a called IMS device and or transmits media streams to other portions of the IMS network.

To manage subscribers the example messaging server of includes a subscriber database . Using any number and or type s of data structures the example subscriber database stores one or more messaging service parameters for a plurality of subscribers. Example parameters include one or more audible greetings recorded by a messaging service subscriber. The example subscriber database may be stored in any number and or type s or memory ies and or memory device s .

To provide network based CID services the example messaging server of includes a CID server . When instructed by a feature server e.g. any or all of the example feature servers and of to provide a network based audible ringtone the example CID server queries the example subscriber database for an audible greeting that may be used as an audible ringtone. If a suitable audible greeting is not available e.g. if the calling party does not subscribe to a messaging service provided by the messaging server the CID server directs a text to speech module to generate an audible ringtone based on text based CID information received from the feature server. The CID server establishes a RTP communication session via which the CID server provides the audible ringtone to the called party.

To perform text to speech conversions the example messaging server of includes the example text to speech module . Using any number and or type s of algorithms logic and or methods the example text to speech module generates audible data based on text based information e.g. text based CID information .

While an example manner of implementing the example messaging server of has been illustrated in one or more of the interfaces data structures elements processes and or devices illustrated in may be combined divided re arranged omitted eliminated and or implemented in any other way. Further the example SIP interface the example media server the example subscriber database the example CID server the example text to speech module and or more generally the example messaging server of may be implemented by hardware software firmware and or any combination of hardware software and or firmware. Thus for example any or the example SIP interface the example media server the example subscriber database the example CID server the example text to speech module and or more generally the example messaging server may be implemented by one or more circuit s programmable processor s ASIC s PLD s and or FPLD s etc. When any of the appended claims are read to cover a purely software implementation at least one of the example SIP interface the example media server the example subscriber database the example CID server the example text to speech module and or more generally the example messaging server are hereby expressly defined to include a tangible medium such as a memory a DVD a CD etc. Further still a messaging server may include interfaces data structures elements processes and or devices instead of or in addition to those illustrated in and or may include more than one of any or all of the illustrated interfaces data structures elements processes and or devices.

The example machine accessible instructions of and or may be carried out by a processor a controller and or any other suitable processing device. For example the example machine accessible instructions of and or may be embodied in coded instructions stored on a tangible medium such as a flash memory a ROM and or RAM associated with a processor e.g. the example processor discussed below in connection with . Alternatively some or all of the example machine accessible instructions of and or may be implemented using any combination s of ASIC s PLD s FPLD s discrete logic hardware firmware etc. Also some or all of the example machine accessible instructions of and or may be implemented manually or as any combination of any of the foregoing techniques for example any combination of firmware software discrete logic and or hardware. When any of the appended claims are read to cover a purely software implementation at least one of the example feature servers and the example feature servers and or the example messaging servers are hereby expressly defined to include a tangible medium such as a memory a DVD a CD etc. Further many other methods of implementing the example operations of and or may be employed. For example the order of execution of the blocks may be changed and or one or more of the blocks described may be changed eliminated sub divided or combined. Additionally any or all of the example machine accessible instructions of and or may be carried out sequentially and or carried out in parallel by for example separate processing threads processors devices discrete logic circuits etc.

The example machine accessible instructions of begin when any of the example feature servers and of receives a session initiation request message such as the example SIP INVITE message of from the example calling device . The example CID module of determines whether the called party support a network based CID service by for example accessing the example HSS interface block . If the called party does not support a network based CID service block the CID module forwards the SIP INVITE message to the called party block . The feature server handles the remainder of the communication session as in a manner consistent with any past present and or future IMS network call processing block . Control then exits from the example machine accessible instructions of .

Returning to block if the called device supports a network based CID service block the CID module modifies the SIP INVITE message by adding an early media indicator such as an ALERT INFO heading containing a value of EARLY MEDIA block and sends the modified SIP INVITE message to the example called IMS device block .

When a SIP 180 RINGING message is received from the called IMS device block the CID handler sends a SIP INVITE message e.g. the example SIP INVITE message of to the example messaging server of block and waits to receive a SIP 200 OK message from the messaging server block .

When a SIP 200 OK message is received from the messaging server block the CID handler sends a SIP ACK message to the messaging server block . The CID handler then waits to receive a SIP 200 OK message from the called device block . The SIP 200 OK message will be received from the called device when a user of the called device answers the requested communication session.

Upon receipt of the SIP 200 OK message block the CID handler sends a SIP 200 BYE message to the messaging server to terminate the providing of the audible ringtone to the called device block and forwards the SIP 200 OK message to the calling device block . The feature server handles the remainder of the communication session in a manner consistent with any past present and or future IMS network call processing block . Control then exits from the example machine accessible instructions of .

The example machine accessible instructions of begin when a called IMS device e.g. any or all of the example IMS devices and of receives a session initiation request message e.g. the example SIP INVITE message of . The example early media handler of determines whether the SIP INVITE message contains an early media indicator block . If the SIP INVITE message contains an early media indicator block the example ringtone controller disables a local ringtone generator block . The IMS device starts a timeout timer block .

The early media handler sends a SIP 180 RINGING message containing a session descriptor for a RTP communication session via which an audible ringtone may be received block and checks whether the RTP communication session has been established block .

If the RTP communication session has not been established block and the timeout timer has not expired block control returns to block to check whether the RTP communication session has been established. If the RTP communication session has not yet been established block and the timeout timer has expired block the ringtone controller enables the local ringtone generator and directs the ringtone generator to begin generating a local ringtone block . If the RTP communication session has been established block the ringtone controller directs the local ringtone generator to present the received audible ringtone block .

When the request communication session is answered block the early media handler sends a SIP 200 OK message block . The called IMS device handles the remainder of the communication session in a manner consistent with any past present and or future IMS network call processing block . Control then exits from the example machine accessible instructions of .

Returning to block if the received SIP INVITE message does not contain an early media indicator block the ringtone controller enables the local ringtone generator and directs the ringtone generator to begin generating a local ringtone block . Control then proceeds to block to wait for the communication session request to be answered by a user block .

The example machine accessible instructions of begin when the example messaging server of receives a SIP INVITE message e.g. the example message of from any of the example feature servers and . The example CID server of determines whether received message corresponds to a network based ringtone service request block . If the message corresponds to a network based ringtone service request block the example CID server determines whether the calling party subscribes to a messaging service provided by the messaging server by for example querying the example subscriber database block . If the calling party is a subscriber block the CID server obtains an audible greeting recorded by the calling party from the subscriber database block . If the calling party is not a subscriber block the example text to speech module of the messaging server generates an audible ringtone by converting text based CID data into audible data block .

The CID server sends a SIP 200 OK message to the feature server block . The example media server of establishes a RTP communication session with the called device based on a session descriptor received in the SIP INVITE message block . The media server provides the obtained or generated audible ringtone to the called device with the RTP communication session block .

When a SIP BYE message is received block the media server terminates the RTP communication server block and the CID server of the messaging server sends a SIP 200 OK message to the feature server block . Control then exits from the example machine accessible instructions of .

Returning to block if the received message does not correspond to a network based ringtone service request block the example messaging server handles message and or communication session in a manner consistent with any past present and or future IMS network call processing block . Control then exits from the example machine accessible instructions of .

The processor platform of the example of includes at least one general purpose programmable processor . The processor executes coded instructions and or present in main memory of the processor e.g. within a RAM and or a ROM . The processor may be any type of processing unit such as a processor core a processor and or a microcontroller. The processor may execute among other things the example protocol message exchanges and or the example machine accessible instructions of and or to implement the example methods and apparatus described herein.

The processor is in communication with the main memory including a ROM and or the RAM via a bus . The RAM may be implemented by DRAM SDRAM and or any other type of RAM device and ROM may be implemented by flash memory and or any other desired type of memory device. Access to the memory and the memory may be controlled by a memory controller not shown . One or both of the example memories and may be used to implement either or both of the example subscriber database of .

The processor platform also includes an interface circuit . The interface circuit may be implemented by any type of interface standard such as an external memory interface serial port general purpose input output etc. One or more input devices and one or more output devices are connected to the interface circuit . The input devices and or output devices may be used to for example implement the example SIP interface the example HSS interface the example ringtone generator the example user interface the example timer the example SIP interface the example SIP interface and or the example media server described herein.

Of course the order size and proportions of the memory illustrated in the example systems may vary. Additionally although this patent discloses example systems including among other components software or firmware executed on hardware it will be noted that such systems are merely illustrative and should not be considered as limiting. For example it is contemplated that any or all of these hardware and software components could be embodied exclusively in hardware exclusively in software exclusively in firmware or in some combination of hardware firmware and or software. Accordingly the above described examples are not the only way to implement such systems.

At least some of the above described example methods and or apparatus are implemented by one or more software and or firmware programs running on a computer processor. However dedicated hardware implementations including but not limited to an ASIC programmable logic arrays and other hardware devices can likewise be constructed to implement some or all of the example methods and or apparatus described herein either in whole or in part. Furthermore alternative software implementations including but not limited to distributed processing or component object distributed processing parallel processing or virtual machine processing can also be constructed to implement the example methods and or apparatus described herein.

It should also be noted that the example software and or firmware implementations described herein are optionally stored on a tangible storage medium such as a magnetic medium e.g. a disk or tape a magneto optical or optical medium such as a disk or a solid state medium such as a memory card or other package that houses one or more read only non volatile memories random access memories or other re writable volatile memories or a signal containing computer instructions. A digital file attachment to e mail or other self contained information archive or set of archives is considered a distribution medium equivalent to a tangible storage medium. Accordingly the example software and or firmware described herein can be stored on a tangible storage medium or distribution medium such as those described above or equivalents and successor media.

To the extent the above specification describes example components and functions with reference to particular devices standards and or protocols it is understood that the teachings of the invention are not limited to such devices standards and or protocols. Such systems are periodically superseded by faster or more efficient systems having the same general purpose. Accordingly replacement devices standards and or protocols having the same general functions are equivalents which are intended to be included within the scope of the accompanying claims.

Although certain example methods apparatus and articles of manufacture have been described herein the scope of coverage of this patent is not limited thereto. On the contrary this patent covers all methods apparatus and articles of manufacture fairly falling within the scope of the appended claims either literally or under the doctrine of equivalents.

