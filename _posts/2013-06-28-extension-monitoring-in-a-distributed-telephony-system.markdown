---

title: Extension monitoring in a distributed telephony system
abstract: A telephony system is presented that enables one user to monitor another user's extension and perform functions on calls destined for the other user's extension. The system includes a server with a telephony management software (TMS) unit, a telephony application programming interface (TAPI) unit, and an application unit. The application unit includes a control module, association module, presentation module, park module, monitoring device interface module, and storage interface module. A server sends information to a monitoring device regarding the status of a monitored extension and calls offering on that extension. A server also enables a user to navigate through multiple calls offering and park a selected call.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08948359&OS=08948359&RS=08948359
owner: ShoreTel, Inc.
number: 08948359
owner_city: Sunnyvale
owner_country: US
publication_date: 20130628
---
This application is a continuation of prior U.S. application Ser. No. 10 932 614 filed Sep. 1 2004 now U.S. Pat. No. 8 503 640 issued Aug. 6 2013 which is herein incorporated in its entirety by reference.

Applicants hereby notify the USPTO that the claims of the present application are different from those of the parent application U.S. patent application Ser. No. 10 932 614 and any other related applications. Therefore Applicants rescind any disclaimer of claim scope made in the parent application or any other predecessor application in relation to the present application. The Examiner is therefore advised that any such disclaimer and the cited reference that it was made to avoid may need to be revisited at this time. Furthermore the Examiner is also reminded that any disclaimer made in the present application should not be read into or against the parent application or any other related application.

This invention relates generally to distributed telephony and more particularly to features associated with monitoring extensions in a distributed telephony system.

The ability for one person to monitor another person s extension is useful in a variety of situations. For example an administrative assistant can monitor an executive s extension including whether the extension has a call offering or is in use. As another example a customer service agent can monitor another agent s extension when the second agent is away from her desk. It is also useful if the monitoring party e.g. the assistant or agent can perform functions on a call destined for a monitored extension. These functions can include for example answering the call transferring the call placing the call on hold and sending the call to voicemail.

While extension monitoring exists in traditional keyed telephone systems it is difficult to implement in enterprise telephony systems. Enterprises often have several offices or call centers that are located in a plurality of disparate locations. To interconnect all of these sites enterprise telephony systems have been developed. Enterprise telephony systems which comprise a distributed set of voice switches and servers offer enterprise applications enabled by the integration of computer systems with telephony services. The software that supports the computer integrated functionality is generally implemented as a client server environment in which the participants or clients distributed telephony users communicate with a server. Computer integrated features rely not only on a server s application platform but also on the availability of the network that connects the switches servers and application services.

What is needed is a system and method that enables a user to monitor an extension using an enterprise telephony system.

Computer integrated functionality is implemented using a server in a distributed telephony environment. The server includes a telephony management software TMS unit a telephony application programming interface TAPI unit and an application unit which are communicatively coupled. The server is coupled to one or more endpoints such as analog phones IP based phones and software phones. The server is also coupled to one or more software applications that control these endpoints. These software applications can be for example desktop software applications employed by end users to perform specific tasks or server side applications that enable higher levels of functionality.

In one embodiment an application unit enables a monitoring device to monitor an extension and perform functions on calls offering on the extension. An application unit can include several interconnected modules such as a control module an association module a presentation module a park module a monitoring device interface module and a storage interface module.

One user s extension the monitored extension is associated with a second user s monitoring device such as an IP phone. A server detects call activity on the first user s monitored extension and sends information to the second user s IP phone. In one embodiment the server detects a call offering on the monitored extension and instructs the IP phone to display the calling party s name and phone number.

If there are multiple calls offering on the first user s monitored extension the second user can navigate through them by for example activating a scroll key. The key activation causes information to be sent from the second user s IP phone to the server. In response the server instructs the IP phone to display different information e.g. information associated with a different call offering .

The second user can also perform functions on a call destined for the first user s monitored extension. For example the second user can pickup answer the call which redirects the call from the first user s extension to the second user s extension. In one embodiment the second user uses her IP phone to navigate to a particular call offering on the second user s monitored extension. The second user then activates an answer key on her IP phone. The key activation causes information to be sent from the second user s IP phone to the server. In response the server instructs the switch that manages the first user s monitored extension to redirect the call to the second user s extension. Additional functions that the second user can perform on a call destined for the first user s monitored extension include sending the call to voicemail.

Further features of the invention its nature and various advantages will be more apparent from the accompanying drawings and the following detailed description.

The present invention is now described more fully with reference to the accompanying figures in which several embodiments of the invention are shown. The present invention can be embodied in many different forms and should not be construed as limited to the embodiments set forth herein. Rather these embodiments are provided so that this disclosure will be thorough and complete and will fully convey the invention to those skilled in the art.

One skilled in the art will recognize that methods apparatus systems data structures and computer readable media implement the features functionalities or modes of usage described herein. For instance an apparatus embodiment can perform the corresponding steps or acts of a method embodiment.

A monitoring device enables a user to monitor an extension other than her own by presenting the user with status information regarding that extension. In one embodiment a monitoring device also enables a user to perform functions on calls directed to that extension such as transferring calls placing calls on hold and sending calls to voicemail. A monitoring device can monitor only one extension or a plurality of extensions. In addition one extension can be monitored by one or more monitoring devices. A monitoring device can be for example an endpoint or a software application. A monitoring device can be configured for example regarding which extensions it should monitor by using the device itself or by using a software application that runs on a general purpose computer such as a server.

In general extension monitoring is implemented as follows An extension the monitored extension is associated with a monitoring device. A server detects call activity on the monitored extension and sends information regarding this activity to the monitoring device. For example the server detects a call offering on the monitored extension. The server determines the caller ID of the calling party and sends this information to the monitoring device.

In one embodiment the monitoring device can interact with a call on the monitored extension. In this embodiment the server receives information from the monitoring device for example due to the user having pressed a key that causes the server to perform certain actions. These actions can include for example instructing a switch to transfer the call hold the call or send the call to voicemail. A switch can also be instructed to park the call i.e. hold the call at the monitored extension .

The first site A includes a server a switch A three endpoints analog phone A P phone and software phone a device running a call manager software application and a storage device . The switch A represents a Voice over Internet Protocol VoIP device to which a number of endpoints can be coupled such as analog phones IP phones and software phones softphones . In the illustrated embodiment the switch A is coupled to the network . The switch A is also coupled to the public switched telephone network PSTN via an analog or digital trunk line e.g. a T1 or E1 interface . In the illustrated configuration the switch A provides an interface for calls originating from or terminating on the PSTN .

An endpoint enables a user to carry on a phone call. Although in the illustrated embodiment the first site A has three endpoints one analog phone A one IP phone and one softphone in other embodiments the first site A has different numbers and types of endpoints. An endpoint is coupled to a switch a server or both.

An endpoint has a user interface to send data to and receive data from a user. The analog phone A has for example a Telephone User Interface TUI that sends data through a speaker and receives data through a microphone and a keypad. The IP phone has for example both a TUI and a graphical user interface that sends data through a display device associated with the IP phone . In one embodiment the IP phone s graphical user interface also receives data from a touchscreen display device associated with the IP phone . The softphone has for example a software application that runs on a computer and sends data through a display device and a speaker and receives data through a microphone a keyboard and a pointing device.

A device running a call manager software application such as a computer controls one or more endpoints with which it is associated. Call manager offers a user an interface through which he can perform call related functions.

Although in the illustrated embodiment the first site A has only one call manager in other embodiments the first site A has a different number of call managers . Also more than one call manager can control the same endpoint. The association between a call manager and an endpoint that it controls is accessed through the server .

The server is configured to implement features or functions of the present invention. The server is coupled to the network and can also be coupled to one or more endpoints such as IP phone and softphone . The server will be further discussed below with reference to .

The storage device contains extension monitoring information including associations between monitored extensions and monitoring devices and information regarding the presentation status of a monitoring device. In the illustrated embodiment the storage device is directly coupled to the server . In an alternate embodiment the storage device is coupled to the server via the network .

One skilled in the art will appreciate that additional networking devices not shown can be added to the first site A for example if needed to support additional endpoints servers or other systems. For example the first site A can include a second switch and an edge router to couple the first site A to the network and to provide local area connectivity for the first and second switches A B. One skilled in the art will also recognize that numerous configurations of switches and communications links are contemplated. For example PSTN links can be coupled to multiple switches at several points within the topology and softswitches can also be used.

The second site B similarly includes an endpoint analog phone B and a switch B. The configuration of the second site B demonstrates that a server is not required for each site. Switch B of the second site B can be managed by server that is illustrated in the first site A. A call can involve more than one switch. For example a call that originates from the PSTN and terminates on an endpoint that is communicatively coupled to switch B of the second site B involves two switches switch A of the first site A and switch B of the second site B. In addition each switch may be managed by a different server .

In one embodiment of the present invention the network is a partially public or a wholly public network such as the Internet. The network can also be a private network or include one or more distinct or logical private networks e.g. virtual private networks or wide area networks . Additionally the communication links to and from the network can be wireline or wireless i.e. terrestrial or satellite based transceivers . In one embodiment of the present invention the network is an IP based wide or metropolitan area network.

Server also includes a memory . The memory includes program instructions or functional units that implement features of the present invention. Specifically the memory includes a telephony management software TMS unit and a telephony application programming interface TAPI unit .

In one embodiment the memory also includes one or more application units that interact with the TMS unit and the TAPI unit to enable a specific computer integrated function. An application unit uses the TAPI unit to exchange data with the TMS unit . The TMS unit is able to communicate with and manage one or more switches. For example with reference to the TMS unit included in the server can manage the switches A B. Through the TAPI unit the TMS unit presents an application with a computer telephony integration CTI view of these switches A B. This allows the application to manage the switches A B. Such switches A B can operate without an associated TMS unit if CTI features are not being used.

In the illustrated embodiment the server includes one application unit extension monitoring EM unit . In general the EM unit enables a monitoring device to monitor an extension and perform functions on calls offering on the extension. The functionality of the EM unit will be further described below with reference to .

In one embodiment EM unit is implemented as a service that interacts with TMS unit . Communication or data exchange between TMS unit and EM unit is further described with reference to . Although EM unit is illustrated as executing on the server EM unit may be distributed among computing devices as is known to one of skill in the art. For example the functionality enabled by EM unit can be implemented in a client server fashion by having the client user s local system such as a general purpose computer or endpoint perform some functions and having the server EM unit perform others. As another example some or all of the functionality enabled by EM unit can be implemented by having a switch perform some or all functions.

The modules include program instructions that can be executed on for example processor to implement the features or functions of the present invention. The modules are typically stored in a memory such as memory . For server the program instructions can be distributed on a computer readable medium or storage device . The computer readable storage device can be available via a public network a private network or the Internet. Program instructions can be in any appropriate form such as source code object code or scripting code.

EM control module centrally controls the operation and process flow of EM unit transmitting instructions and data to as well as receiving data from each module . Details of its operation will be discussed below with reference to .

Association module determines whether a given extension is being monitored by one or more monitoring devices. If the extension is being monitored association module determines the identities of the one or more monitoring devices. In order to do this association module queries storage interface module .

Presentation module assembles a signal to send to a monitoring device that causes the monitoring device to display certain information. In one embodiment this information includes the status of a monitored extension such as whether the extension has a call offering or is in use and information regarding a call on the extension such as the calling party s name and phone number . In another embodiment this information can be localized e.g. using Unicode characters and a Unicode enabled monitoring device .

In order to assemble the signal presentation module queries TMS unit by using TAPI unit . This gives presentation module access to the switch that manages calls destined for the monitored extension. From this switch presentation module can determine the status of the extension and information regarding calls on the extension.

Park module assembles a signal to send to the switch A that causes the switch A to park a call i.e. hold a call at the monitored extension rather than at the extension that was used to answer the call .

Monitoring device interface module sends data to and receives data from monitoring devices such as endpoints and devices running call manager software that controls these endpoints. Monitoring device interface module communicates with call manager directly while it communicates with and endpoint either directly or via a switch depending on the type of the endpoint. For example monitoring device interface module communicates with IP phone directly but communicates with analog phone A through switch A.

Data sent to a monitoring device is assembled by presentation module and causes the monitoring device to display certain information. Data received from a monitoring device comprises information such as for example which extension to associate with the monitoring device instructions for navigating through call information and instructions to transfer or hold a call. In one embodiment a signal indicates which monitoring device generated it.

Storage interface module accesses information stored in storage device . As described above storage device contains extension monitoring information including associations between monitored extensions and monitoring devices and information regarding the presentation status of a monitoring device.

Details of modules will be further explained with reference to . illustrates a block diagram of a portion of a distributed telephony system architecture according to one embodiment of the present invention. The illustrated embodiment of architecture includes one site . Site includes a server an IP phone a switch a storage device and an endpoint . Endpoint can be any type of endpoint such as an analog phone an IP phone or a softphone . Endpoint is coupled to server switch or both depending on its type. IP phone is coupled to both server and switch . Server is also coupled to switch and storage device . Server IP phone switch storage device and endpoint are similar to how they were described above with reference to . While IP phone is used by way of example an analog phone could be used in place of IP phone .

In one embodiment IP phone includes call appearance keys feature keys soft keys and a display . is a perspective view of an IP phone showing various features according to one embodiment of the invention. In the illustrated embodiment IP phone is a ShorePhone IP 560 Business Telephone manufactured and sold by ShoreTel Inc. of Sunnyvale Calif. In the illustrated embodiment there are six call appearance keys A which are tri color light emitting diodes LEDs . There are also eight feature keys A and four soft keys A. In the illustrated embodiment display A has a width of twenty four characters and a height of seven lines. Display A has a grayscale resolution of 160 by 80 pixels and is also backlit.

In one embodiment when IP phone is set up to monitor no extensions its display includes one or more portions dedicated to display various pieces of information including the user s name and extension number the user s phone number the time and date and the functions currently associated with the soft keys . is a plan view partially in section of a portion of the IP phone in showing a display keys and no monitored extensions according to one embodiment of the present invention. In the illustrated embodiment the display A includes one or more portions dedicated to display the user s name and extension number A the user s phone number A the time and date A and the functions A currently associated with the soft keys A.

In one embodiment when IP phone is configured to monitor one or more extensions its display includes one or more portions dedicated to display various pieces of information including the numbers of the monitored extensions and the status of the monitored extensions and the monitoring extension vis vis the monitored extensions . In one embodiment the status of a monitored extension can be for example idle idle and in do not disturb DND mode has an unheard message has an unheard message and is in DND mode has an active conference call with a party other than the monitoring extension has a held call has a held or parked call with a party other than the monitoring extension has a connected call has an offering call and has both a connected call and an offering call. In one embodiment the status of a monitoring extension vis vis a monitored extension can be for example has a call that was picked up or unparked from the monitored extension has a conference call that was picked up or unparked from the monitored extension and has a conference call with a third party that was picked up or unparked from the monitored extension and the third party has the conference call on hold.

In one embodiment IP phone includes keys for example call appearance keys feature keys or soft keys associated with the monitored extensions. In one embodiment when there is one call offering on a monitored extension activating the key associated with that extension picks up answers the call offering on that extension. In another embodiment when there are multiple calls offering on a monitored extension activating the associated key picks up the oldest call offering on that extension i.e. the call offering that began earliest in time . In yet another embodiment when there are no calls offering on a monitored extension activating the associated key dials the monitored extension.

In one embodiment a key associated with a monitored extension indicates the status of the monitored extension and or the status of the monitoring extension vis vis that monitored extension. In one embodiment the status of a monitored extension can be for example idle idle and in do not disturb DND mode has an unheard message has an unheard message and is in DND mode has an active conference call with a party other than the monitoring extension has a held call has a held or parked call with a party other than the monitoring extension has a connected call has an offering call and has both a connected call and an offering call. In one embodiment the status of a monitoring extension vis vis a monitored extension can be for example has a call that was picked up or unparked from the monitored extension has a conference call with a third party that was picked up or unparked from the monitored extension and the third party has the conference call on hold and has a conference call that was picked up or unparked from the monitored extension.

In this embodiment call appearance keys A are associated with the monitored extensions. In the illustrated embodiment a call appearance key A contains an LED and the color and behavior of the LED indicates the status of the monitored extension associated with the key A. In one embodiment the status of a monitored extension can be for example idle amber steady idle and in do not disturb DND mode amber steady has an unheard message unlit has an unheard message and is in DND mode amber steady has an active conference call with a party other than the monitoring extension red steady has a held or parked call with a party other than the monitoring extension green blinking has an offering call amber blinking and has both a connected call and an offering call red blinking In one embodiment the status of a monitoring extension vis vis a monitored extension can be for example has a call that was picked up or unparked from the monitored extension green steady has a conference call with a third party that was picked up or unparked from the monitored extension and the third party has the conference call on hold green steady and has a conference call that was picked up or unparked from the monitored extension green steady .

In one embodiment when IP phone receives an offering call its display includes one or more portions dedicated to display various pieces of information including the destination party s extension number and name and the calling party s extension number and name . Information displayed at one time can be regarding only one offering call or regarding multiple offering calls.

In one embodiment although information displayed at one time is regarding only one offering call display also includes one or more portions dedicated to indicate whether there are multiple calls offering. In one embodiment the presence of a symbol indicates that there are multiple calls offering.

In one embodiment when there are multiple offering calls they are listed in the order that they were received where a call listed first occurred earlier in time than a call listed last. In one embodiment the multiple call symbol is directional such as an arrow or a caret or v . The symbol s presence absence indicates whether there is is not respectively a call that occurred earlier up arrow or caret or later down arrow or caret than the one being viewed.

Before the method of begins switch in site receives a call. This call is destined for an extension for example the extension associated with endpoint . Switch communicates to server that a call has been received and method begins.

EM control module uses TAPI unit to determine the call s destination extension. EM control module then uses association module to determine whether the destination extension is associated with a monitoring device such as IP phone . If the extension is not associated with a monitoring device the call is processed normally and method ends. If the extension is associated with one or more monitoring devices EM control module uses association module to determine the identities of the monitoring devices and continues processing the call.

EM control module uses presentation module to create signals to send to the monitoring devices. These signals can be identical or they can differ based on the type of the destination monitoring device and its capabilities.

EM control module uses storage interface module to store these signals in storage device . Since these signals specify the information presented by a monitoring device storing these signals enables later determination of what information is then being presented by the monitoring device.

EM control module uses monitoring device interface module to send these signals to the monitoring devices. These signals cause the monitoring devices to present to the user information regarding the call to the monitored extension. Examples of information presentations were discussed above with reference to B A and B.

EM control module instructs monitoring device interface module to wait for a signal from a monitoring device. If a navigation signal is received then method proceeds to step which is illustrated in . When a user navigates between offering calls e.g. by activating a scroll key a navigation signal is sent from the user s monitoring device to server . illustrates a flowchart of a method performed by a server for enabling a user to navigate between several call offerings according to one embodiment of the present invention.

EM control module uses TAPI unit to determine information regarding calls offering on monitored extensions. In one embodiment this information includes the destination party s name and extension number and the calling party s name and extension number. EM control module determines the current status of the monitoring device regarding what information is being presented. In order to do this EM control module queries storage interface module .

EM control module uses presentation module to create a signal to send to the monitoring device. In one embodiment this signal is based on information regarding calls offering on monitored extensions the current status of the monitoring device and the action signal that was received.

EM control module uses storage interface module to store these signals in storage device . EM control module uses monitoring device interface module to send these signals to the monitoring device. In one embodiment these signals cause the monitoring device to present to the user information regarding a different call to the monitored extension.

If an action signal is received then method proceeds to step which is illustrated in . When a user performs a function on a call e.g. by activating a function key an action signal is sent from the user s monitoring device to server . illustrates a flowchart of a method performed by a server for enabling a user to park a call on a monitored extension according to one embodiment of the present invention.

EM control module uses TAPI unit to determine whether the received action signal would normally place a currently connected call on hold either directly or as a side effect of another action . If the action signal would not normally place a currently connected call on hold the call is processed normally e.g. by executing the requested action and method ends. If the action signal would normally place a currently connected call on hold EM control module uses TAPI unit to determine whether the currently connected call was redirected from a monitored extension. If the call was not redirected from a monitored extension the call is processed normally e.g. by executing the requested action and method ends.

If the call was redirected from a monitored extension EM control module sends a signal to the switch that manages calls on the monitoring user s extension. This signal causes the switch to park the call to the monitored extension. Parking a call means placing a call on hold on another extension. A parked call can be answered by either the monitored extension or the monitoring device. If the monitoring device answers the call the call is transferred back to the monitoring user s extension.

Having described embodiments of a server with extension monitoring capability for a distributed telephony systems which are intended to be illustrative and not limiting it is noted that modifications and variations can be made by persons skilled in the art in light of the above teachings. It is therefore to be understood that changes may be made in the particular embodiments of the invention disclosed that are within the scope and spirit of the invention as defined by the appended claims and equivalents.

