---

title: Managing application data in distributed control systems
abstract: A device may correspond to a physical access controller in a distributed physical access control system. The device in a distributed system may include logic configured to detect a request from an application to access an application dataset, wherein the application dataset corresponds to a distributed dataset and determine whether the application dataset exists in the distributed system. The logic may be further configured to generate the application dataset in the distributed system, in response to determining that the application dataset does not exist in the distributed system, and send, to other devices in the distributed system, a request to join a dataset group that includes devices associated with the application dataset, in response to determining that the application dataset exists in the distributed system.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09619668&OS=09619668&RS=09619668
owner: AXIS AB
number: 09619668
owner_city: Lund
owner_country: SE
publication_date: 20130916
---
This disclosure generally relates to access control systems and more specifically to managing application data in access control systems.

A distributed system may include components that communicate and coordinate their actions to achieve a set of tasks. For example computers in a distributed system may communicate over a network in order to coordinate to solve an algorithm. In order to successfully coordinate simultaneous operations on independent computers such as data and resource management or synchronization of processing steps a distributed algorithm may need to be implemented. Various distributed algorithms have been developed to coordinate components of a distributed system.

According to one aspect a method performed by a device in a distributed system may include detecting by the device a request from an application to access an application dataset wherein the application dataset corresponds to a distributed dataset determining by the device whether the application dataset exists in the distributed system creating by the device the application dataset in the distributed system in response to determining that the application dataset does not exist in the distributed system and sending by the device and to other devices in the distributed system a request to join a dataset group that includes devices associated with the application dataset in response to determining that the application dataset exists in the distributed system.

Additionally determining whether the application dataset exists in the distributed system may include accessing a list of identifiers of distributed datasets in the distributed system and determining whether the list of identifiers of distributed datasets includes an identifier for the requested application dataset.

Additionally the method may include adding information from the application to the created application dataset in response to creating the application dataset.

Additionally the method may include receiving from another device in the distributed system an indication that the device has been added to the dataset group receiving from the other device in the distributed system the application dataset and storing the received application dataset on the device.

Additionally the received application dataset may include a list of devices that are members of the dataset group and the method may further include sending a proposal to the devices that are members of the dataset group to add application data to the application dataset obtaining consensus to add the application data to the application dataset in response to sending the proposal adding the application data to the application dataset in response to obtaining the consensus.

Additionally the method may include receiving from another device in the distributed system a request to join a dataset group of devices associated with the created application dataset obtaining consensus to add the other device to the dataset group of devices associated with the created application dataset and adding the other device to the dataset group of devices associated with the created application dataset in response to obtaining the consensus to add the other device to the dataset group of devices associated with the created application dataset.

Additionally obtaining consensus to add the other device to the dataset group of devices associated with the created application dataset may include sending a proposal to add the other device to the dataset group of devices associated with the created application dataset to the devices associated with the created application dataset and obtaining a quorum of votes to add the other device to the dataset group of devices associated with the created application dataset.

Additionally adding the other device to the dataset group of devices associated with the created application dataset may include sending the application dataset to the other device and adjusting a quorum number required to obtain consensus in connection with the dataset group of devices associated with the created application dataset.

Additionally the method may include receiving from the other device in the distributed system a request to change application data in the created application dataset obtaining consensus to change the application data in the created application dataset and changing the application data in the created application dataset in response to obtaining the consensus to change the application data in the created application dataset.

Additionally the method may include receiving from the other device in the distributed system a request to be removed from the dataset group of devices associated with the created application dataset obtaining consensus to remove the other device from the dataset group of devices associated with the created application dataset and removing the other device from the dataset group of devices associated with the created application dataset in response to obtaining the consensus to remove the other device from the dataset group of devices associated with the created application dataset.

Additionally the distributed system may include a distributed physical access control system and wherein the device and the other devices correspond to physical access control units.

According to another aspect a device in a distributed system may include logic configured to detect a request from an application to access an application dataset wherein the application dataset corresponds to a distributed dataset determine whether the application dataset exists in the distributed system create the application dataset in the distributed system in response to determining that the application dataset does not exist in the distributed system and send to other devices in the distributed system a request to join a dataset group that includes devices associated with the application dataset in response to determining that the application dataset exists in the distributed system.

Additionally when the logic is determining whether the application dataset exists in the distributed system the logic may further be configured to access a list of identifiers of distributed datasets in the distributed system and determine whether the list of distributed datasets includes an identifier for the requested application dataset.

Additionally the logic may be further configured to add information from the application to the created application dataset in response to creating the application dataset.

Additionally the logic may be further configured to receive from another device in the distributed system an indication that the device has been added to the dataset group receive from the other device in the distributed system the application dataset and store the received application dataset on the device.

Additionally the received application dataset may include a list of devices that are members of the dataset group and the logic may be further configured to send a proposal to the devices that are members of the dataset group to add application data to the application dataset obtain consensus to add the application data to the application dataset in response to sending the proposal and add the application data to the application dataset in response to obtaining the consensus.

Additionally the logic may be further configured to receive from another device in the distributed system a request to join a dataset group of devices associated with the created application dataset obtain consensus to add the other device to the dataset group of devices associated with the created application dataset and add the other device to the dataset group of devices associated with the created application dataset in response to obtaining the consensus to add the other device to the dataset group of devices associated with the created application dataset.

Additionally the logic may be further configured to receive from the other device in the distributed system a request to be removed from the dataset group of devices associated with the created application dataset obtain consensus to remove the other device from the dataset group of devices associated with the created application dataset and remove the other device from the dataset group of devices associated with the created application dataset in response to obtaining the consensus to remove the other device from the dataset group of devices associated with the created application dataset.

Additionally the distributed system may include a distributed physical access control system and the device and the other devices may correspond to physical access control units.

According to yet another aspect a distributed system may include a plurality of physical access control devices wherein a particular one of the plurality of physical access control devices is configured to detect a request from an application to access an application dataset wherein the application dataset corresponds to a distributed dataset determine whether the application dataset exists in the distributed system create the application dataset in the distributed system in response to determining that the application dataset does not exist in the distributed system and send to other ones of the plurality of physical access control devices a request to join a dataset group that includes devices associated with the application dataset in response to determining that the application dataset exists in the distributed system.

The following detailed description refers to the accompanying drawings. The same reference numbers in different drawings identify the same or similar elements.

A distributed control system may include a distributed physical access control system. A physical access control system may include one or more access control units with each access control unit controlling physical access to an area of a facility. For example an access control unit may obtain credentials from a user and may unlock a door lock if the user s credentials are verified. In other implementations a distributed control system may include a distributed building management system a distributed monitoring system a distributed security system and or another type of a distributed control system.

A distributed control system may perform distributed computing operations using a distributed algorithm. For example a distributed control system may manage a distributed data base. A distributed algorithm may be consensus based. A consensus algorithm is used to achieve consensus among the nodes in a distributed system before an operation is performed. For example in one embodiment to update a distributed dataset the nodes in the distributed system need to reach a consensus to perform the update. A consensus corresponds to nodes e.g. all a quorum etc. agreeing to a proposed operation e.g. a change to a distributed database . A consensus may be reached if a quorum is obtained for a proposed operation. A quorum may be reached if a majority of the nodes votes for the proposed operation. Requiring a majority of nodes to vote for a change ensures that for example if two conflicting proposed changes are being considered at least one node receives both of the proposed changes and selects and votes for the proposed change that was received first. In other implementations the node may use a different criteria other than which proposed change was received first in selecting and voting for one of the proposed changes.

A distributed dataset may be used by a subset of nodes in a distributed system. For example an application may use an application distributed dataset and the application may be installed on a subset of nodes in the distributed system. A subset of nodes that use a particular application dataset will be referred to herein as a dataset group. Implementations described herein may relate to managing distributed datasets associated with a particular application. A device in a distributed system may detect a request from an application to access an application dataset corresponding to a distributed dataset associated with the application and may determine whether the application dataset exists in the distributed system. If the application dataset does not exist the application dataset may be created. If the application dataset does exist a request to join a dataset group which includes devices associated with the application dataset may be sent to the other devices in the distributed system.

Another device in the distributed system may receive the request from the requesting device to be added to the dataset group and may generate a proposal to add the requesting device to the dataset group. Other devices in the dataset group may vote for the proposal and if a consensus is reached the requesting device may be added to the dataset group. The requesting device may then receive the application dataset associated with the dataset group and or may propose to add application data and or made other changes to the application dataset associated with the dataset group.

Distributed control system DCS may include a distributed computing system that includes system units A to N referred to collectively as system units and individually as system unit . System unit may be implemented as an embedded system. In some implementations system unit may include a physical access control device. For example system unit may include an access controller that controls access to a secured area such as a room or a group of rooms. System unit may receive credentials e.g. access card credentials via a reader device and to determine whether the credentials are authentic and are associated with authority to access the secure area. If so the access controller may issue a command to open a lock on a door or perform other operations associated with granting access to the secure area. In other implementations system unit may include a different type of security device such as a monitoring device a device that controls the operation of a machine etc. In other implementations system unit may include another type of embedded system.

DCS may include one or more distributed datasets. A distributed dataset includes a dataset associated with multiple devices. In one embodiment the multiple devices communicate and coordinate with each other to make changes to the dataset. In some implementations the distributed dataset is maintained by each device that is associated with the distributed data set and if a change is agreed upon by the devices the change is applied to the distributed dataset by each of the devices. In other implementations not all the devices associated with the distributed dataset store the actual distributed dataset.

In some embodiments consensus is reached in order for a change to be made in the distributed dataset e.g. a consensus based distributed database . In other embodiments a change may be made to the distributed dataset without consensus. A distributed dataset may be associated with all system units or may be associated with a subset of system units . A system unit may propose a change to a consensus based distributed dataset. If the change is accepted by a quorum of system units associated with the distributed dataset a consensus may be reached and the change may be propagated to the distributed dataset in each associated system unit . Thus a consensus with respect to a change in the distributed dataset may be reached if a quorum of the associated system units votes for the change. A quorum may correspond to the smallest majority of the associated system units . Thus if a distributed dataset is associated with N system units a quorum may be reached if N 2 1 associated system units votes for the change if N is an even number or if N 1 2 1 associated system units votes for the change if N is an odd number. Requiring a smallest majority to reach a quorum may ensure that when considering two conflicting proposals at least one system unit receives both proposals and selects one of the proposals for consensus. In some implementations system unit selects the first received proposal. In other implementations a proposal may be selected using another criterion.

In some implementations all system units associated with a distributed dataset may store the distributed dataset. For example a distributed dataset may include access rules and the access rules may be available to any system unit associated with the distributed dataset. Thus as a result of the one or more distributed datasets in one embodiment DCS may correspond to a decentralized system with no central controlling device such as a server device. In other embodiments DCS may include both a decentralized system and a central controlling device such as a server device . In one embodiment changes to a distributed dataset may be configured at any system unit and propagated to other system units associated with the distributed dataset. Furthermore DCS may exhibit robustness with respect to device failure as a single point of failure may be avoided. For example if a particular system unit fails the other system units may continue to operate without loss of data or with the minimization of loss of data . Moreover DCS may be changed dynamically. For example applications may be added at any time and new datasets may be stored in system units as needed. In other implementations not all system units associated with a distributed dataset store the distributed dataset.

DCS may also include datasets that are not distributed. As an example a first system unit may include a local dataset that is not included in any other system unit . As another example a first system unit may include a local dataset that is replicated to a second system unit in a non distributed manner such as by mirroring. As yet another example a first system unit may include a first version of a local dataset and a second system unit may include a second version of the local dataset wherein the first system unit maintains the first version of the local dataset and the second system unit maintains the second version of the local dataset. In yet another example a first system unit may derive a first local dataset from a distributed dataset and a second system unit may derive a second local dataset from the distributed dataset wherein the first local dataset is different from the second local dataset.

Network may enable system units to communicate with each other and or may enable administration device to communicate with particular system units . Network may include one or more circuit switched networks and or packet switched networks. For example network may include a local area network LAN a wide area network WAN a metropolitan area network MAN a Public Switched Telephone Network PSTN an ad hoc network an intranet the Internet a fiber optic based network a wireless network and or a combination of these or other types of networks.

Administration device may enable an administrator to connect to a particular system unit in order to configure DCS change a configuration of DCS receive information from DCS and or otherwise administer DCS . Administration device may include any device configured for communicating with a system unit . For example administration device may include a portable communication device e.g. a mobile phone a smart phone a phablet device a global positioning system GPS device and or another type of wireless device a personal computer or workstation a server device a laptop tablet or another type of portable computer and or any type of device with communication capability.

Although shows exemplary components of environment in other implementations environment may include fewer components different components differently arranged components or additional components than depicted in . Additionally or alternatively any one device in environment or any group of devices may perform functions described as performed by one or more other devices in environment . For example in some implementations system units may include an input and or output device e.g. keyboard keypad and display touchscreen etc. and administration device may not be needed.

Bus may include a path that permits communication among the components of controller . Processor may include any type of single core processor multi core processor microprocessor latch based processor and or processing logic or families of processors microprocessors and or processing logics that interprets and executes instructions. In other embodiments processor may include an application specific integrated circuit ASIC a field programmable gate array FPGA and or another type of integrated circuit or processing logic.

Memory may include any type of dynamic storage device that may store information and or instructions for execution by processor and or any type of non volatile storage device that may store information for use by processor . For example memory may include a random access memory RAM or another type of dynamic storage device a read only memory ROM device or another type of static storage device a content addressable memory CAM a magnetic and or optical recording memory device and its corresponding drive e.g. a hard disk drive optical drive etc. and or a removable form of memory such as a flash memory.

Network interface may include a transceiver e.g. a transmitter and or a receiver that enables controller to communicate e.g. transmit and or receive data with other devices and or systems via wired communication links e.g. conductive wire twisted pair cable coaxial cable transmission line fiber optic cable and or waveguide etc. wireless communication links e.g. radiofrequency RF infrared and or visual optics etc. or a combination of wireless and wired communication links. Network interface may include a transmitter that converts baseband signals to RF signals and or a receiver that converts RF signals to baseband signals. Network interface may be coupled to an antenna for transmitting and receiving RF signals.

Network interface may include a logical component that includes input and or output ports input and or output systems and or other input and output components that facilitate the transmission of data to other devices. For example network interface may include a network interface card e.g. Ethernet card for wired communications and or a wireless network interface e.g. a WiFi card for wireless communications. Network interface may also include a universal serial bus USB port for communications over a cable a Bluetooth wireless interface a radiofrequency identification RFID interface a near field communications NFC wireless interface and or any other type of interface that converts data from one form to another form.

Peripheral interface may be configured to communicate with one or more peripheral devices . For example peripheral interface may include one or more logical components that include input and or output ports input and or output systems and or other input and output components that facilitate the transmission of data to peripheral devices . As an example peripheral interface may communicate with peripheral devices using a Serial Peripheral Interface Bus protocol such as a Wiegand protocol an RS 485 protocol and or another type of protocol. As another example peripheral interface may use a different type of protocol. In one embodiment network interface may also act as a peripheral interface for coupling peripherals to controller .

Housing may enclose the components of controller and may protect the components of controller from the environment. In one embodiment housing may include one or more of peripheral devices . In another embodiment housing may include administration device . Housing may define the boundaries of one system unit and or controller from other system units and or controllers in a system with multiple system units and or multiple controllers .

As described below controller may perform certain operations relating to managing application datasets and or dataset groups in a distributed system. Controller may perform these operations as a result of hardwired circuitry of an ASIC. Controller may also or alternatively perform these operations in response to processor executing software instructions contained in a computer readable medium such as memory . A computer readable medium may include a non transitory memory device. A memory device may be implemented within a single physical memory device or spread across multiple physical memory devices. The software instructions may be read into memory from another computer readable medium or from another device. The software instructions contained in memory may cause processor to perform processes described herein. Thus implementations described herein are not limited to any specific combination of hardware circuitry and software.

Peripheral devices may include one or more devices that provide information to controller that are controlled by controller and or that otherwise communicate with controller . For example peripheral devices may include a reader device a lock device a sensor and or an actuator . While a single reader device a single lock device a single sensor and a single actuator are shown in for illustrative purposes in practice peripheral devices may include multiple reader devices multiple lock devices multiple sensors and or multiple actuators . In some implementations peripheral devices may not include one or more of the devices shown in . Additionally or alternatively peripheral devices may include any other type of security device not shown in .

Reader device may include a device that reads credentials from a user and provides the credentials to controller . For example reader device may include a keypad configured to receive an alphanumeric personal identification number PIN from a user a card reader to configure a card that stores a card code on a magnetic strip or another type of storage device such as a RFID tag a fingerprint reader configured to read a user s fingerprint an iris reader configured to read a user s iris a microphone and a voice signature identifier configured to record a user s voice signature a near field communication NFC reader and or another type of reader device. Reader device may include any type security device that can provide credentials and may include one or more sensor devices such any sensor device described below with reference to sensor . For example reader device may include a camera used for facial recognition and or a microphone used for voice recognition.

Lock device may include a lock controlled by controller . Lock device may lock a door e.g. prevent it from opening or closing a window an HVAC vent and or another type of access opening to a secure area. For example lock device may include an electromagnetic lock a mechanical lock with a motor controlled by controller an electromechanical lock and or another type of lock. Furthermore lock device may lock unlock operation of a machine transport vehicle elevator and or an electrical device.

Sensor may include a sensor device. As examples sensor may include a door sensor to sense whether a door is open or closed a visible light monitoring camera an infrared IR light monitoring camera a heat signature monitoring camera and or another type of monitoring device an alarm sensor such as a motion sensor a heat sensor a pressure sensor and or another type of alarm sensor an audio recording device e.g. microphone a tamper sensor such as a position sensor located inside system unit and or a request to exit button located within a secured area associated with system unit and or another type of sensor device.

Actuator may include an actuator device. As an example actuator may control an illumination device. As other examples actuator may include a burglar alarm activator a speaker to play messages or generate alarm signals a display device a motor to move sensor e.g. control the field of view of a camera or other monitoring device a motor for opening closing a door window HVAC vent and or another opening associated with a secure area a motor to secure lock device in a locked or unlocked position a fire extinguishing device and or another type of actuator device.

Although shows exemplary components of system unit in other implementations system unit may include fewer components different components additional components or differently arranged components than depicted in . Additionally or alternatively any component of system unit or any group of components may perform the task or tasks described as performed by one or more other components of system unit . For example in some implementations peripheral interface may correspond to a network interface. As another example in some implementations peripheral devices may be connected to controller via network interface rather than via peripheral interface .

Further although DCS may include a physical access distributed control system other implementations may control systems other than physical access systems. On the other hand DCS may include any type of physical access control systems e.g. in an operational environment such as a control system for opening and or closing a door or controlling physical access to a building or facility. DCS may also include a system to control a fan e.g. start or stop to initiate an alarm in a building management system e.g. failed authentication successful authentication etc. or to control a robot arm in an industrial automation system.

API layer includes an API configured to communicate e.g. with administration device . As an example when an administrator uses administrator device to log into system unit API layer may communicate with administrator device to authenticate the administrator. As another example API layer may communicate with administrator device to change a configuration of system unit . API layer may receive data from administrator device and provide the data to distribution layer and or to storage layer . API layer may also communicate with administrator device to install an application in application layer . API layer may be configured to handle different administrator types. For example API layer may include an API to handle a Web Services administrator a Linux administrator an Open Network Video Interface Forum ONVIF administrator and or another type of API.

Application layer includes one or more applications installed on system unit . shows exemplary applications. As shown in application layer may include an access control logic application a door control application a reader control application an event handling application a schedule handling application and or an application .

Access control logic application may determine whether to grant access based on received credentials and based on stored access rules. Door control application may control one or more doors and or associated lock devices . For example door control application may determine whether a door is open or closed and or locked or unlocked and may operate one or more device to open or close the door and or to lock or unlock the door. Reader control application may control one or more reader devices and may obtain and process credentials received from the one or more reader devices . Event handling application may maintain a log of events recorded or generated by system unit and or recorded by another system unit . Event handling application may ensure that locally recorded or generated events are distributed to other system units in DCS in order to maintain a distributed system event log in all or at least some system units . Thus logged events may be retrieved from any system unit that is associated with the system event log. Schedule handling application may manage one or more schedules associated with system unit . For example access rules for particular groups of users may change based on particular times of day.

Application may correspond to a particular application installed in application layer of system unit which uses a distributed dataset. For example application may correspond to an application associated with a particular sensor such as a camera controlling application a application associated with a particular actuator such as a door motor application an application that performs information processing such as a people counting application an API application such as application that provides a platform for third party application to control a peripheral device an application configured to communicate with a remote device across a network and or another type of application.

Other applications not shown in may be included in application layer . As an example an alarm application may generate a report and or an alarm and send the report and or alarm to administrator device and or to another designated device and or one or more other system units . As another example a task specific control application may process events associated with system unit such as door opening events sensor events actuator events and or other types of events.

Distribution layer may manage one or more distributed datasets associated with system unit . For example distribution layer may maintain secure connections with other system units over network . e.g. a Transport Layer Security TLS connection . Furthermore distribution layer may use a protocol e.g. a PAXOS protocol to establish a consensus with respect to a change in a particular consensus based distributed dataset. As an example distribution layer may send a proposal for a change to other system units associated with the distributed dataset and may receive a quorum for the change from the other system units . As another example distribution layer may vote for a proposal received from another system unit . As yet another example distribution layer may receive an indication that a consensus has been reached for a change without having voted for the change. When an indication of consensus for a change is received distribution layer may apply the change to the distributed dataset in storage layer . Distribution layer may receive a request from application to access an application dataset may check a system dataset to determine whether the application dataset exists. If the application dataset exists distribution layer may request to join a dataset group of devices associated with the application dataset by sending a request to other system units in DCS . If the application dataset does not exist distribution layer may create the application dataset on behalf of application .

Storage layer may store one or more datasets associated with system unit . A dataset stored in storage layer may correspond to a local dataset or may correspond to a distributed dataset. A local dataset may store information associated with and or only associated with the particular system unit that stores the local dataset. A distributed dataset may store information associated with other system units associated with the distributed dataset.

Exemplary information that may be included in storage layer is shown in . As shown in storage layer may include configuration data credentials data access rules data a system dataset and an application dataset . Configuration data may store configuration data associated with a particular system unit such as hardware configuration of controller peripheral devices connected to controller application installed in application layer and or other types of configuration information. Credentials data may store credentials associated with system unit . Access rules may store access rules associated with system unit .

System dataset may correspond to a distributed dataset that is associated with system units e.g. all system units in DCS . Thus system dataset may be stored in each system unit in DCS . Exemplary information that may be stored in system dataset is described below with reference to .

Application dataset may correspond to a distributed dataset associated with a particular application such as application . Exemplary information that may be stored in application dataset is described below with reference to .

Although show exemplary functional components of system unit in other implementations system unit may include fewer functional components different functional components differently arranged functional components or additional functional components than depicted in . For example while a single application and a single application dataset are shown in for illustrative purposes in practice application layer may include multiple applications and storage layer may include multiple application datasets . Additionally any one of the components or any group of components of system unit may perform functions described as performed by one or more other functional components of system unit .

Distributed dataset ID fields may store information identifying distributed datasets that exist in DCS . Distributed datasets field may include one or more distributed dataset entries. Each distributed dataset ID field may include one or more IDs associated with a particular distributed dataset in DCS . The one or more IDs may include a name of a dataset group a ID name and or description of an application associated with the distributed dataset metadata describing content of the dataset and or any other information that may be used to identify a particular distributed dataset. The distributed dataset IDs may be used by distribution layer to identify a particular application dataset when application requests access to an application dataset.

Although show exemplary components that may be stored in system dataset in other implementations system dataset may include fewer components different components differently arranged components or additional components than depicted in .

System unit fields may store information identifying system units in the dataset group associated with application dataset . Quorum field may store information identifying the number of votes required from system units in the dataset group when voting for a proposed change to application dataset in order to reach consensus. Application data field may store application data associated with application dataset .

Although show exemplary components that may be stored in application dataset in other implementations application dataset may include fewer functional components different functional components differently arranged functional components or additional functional components than depicted in .

The process of may include joining a dataset group or accessing an application dataset block . For example an administrator may use administration device to log into a particular system unit and may install application on the particular system unit . Application may be configured to store data to a distributed dataset and or to retrieve data from a distributed dataset. Thus after application is installed application may send a request to distribution layer to access a distributed dataset associated with application . A determination may be made as to whether an application dataset ID exists in a system dataset block . As explained previously system dataset includes distributed dataset ID field which store IDs of the distributed datasets included in DCS . Distribution layer may access distributed dataset IDs fields to determine whether a ID for application is listed in distributed dataset IDs field .

If it is determined that an application dataset ID does not exists in the system dataset block NO an application dataset entry may be created and distributed in the system dataset block . Since system dataset is a distributed dataset within DCS in order to make changes to system dataset system unit obtains consensus to make a change in distributed dataset ID fields of system dataset . Controller of system unit may send a proposal for the change to other system units in DCS and when a quorum with respect to system dataset of votes is received from the other system units the application dataset entry may be added to distributed dataset ID fields of system dataset .

The application dataset may be created block and application data may be added to the application dataset block . For example distribution layer may create application dataset in storage layer may receive application data from application and may add the received application data to application dataset . Furthermore distribution layer may set the quorum requirement for the dataset group associated with application dataset to since the particular system unit that created the application dataset entry in distributed dataset IDs fields of system dataset is the first system unit associated with the application dataset and no other system units belong to the dataset group associated with the application dataset. Thus to add application data to application dataset votes from other system units do not need to be obtained.

Returning to block if it is determined that an application dataset ID does exists in the system dataset block YES a request may be sent to other system units in DCS to request to be added to the dataset group associated with the application dataset block . Since distributed dataset IDs fields may not include information listing which system units are associated with particular distributed datasets controller may need to send the request to be added to the dataset group to the other system units e.g. all other system units in DCS .

An indication may be received from another system unit that the requesting system unit has been added to the distributed dataset block . For example one or more of the other system units in DCS which are in the dataset group associated with the application dataset may process the request and add the requesting system unit to the dataset group. A process of adding a system unit to an existing dataset group is described below with reference to . Once the requesting system unit is added to the dataset group the particular system unit that added the requesting system unit may send an indication to the requesting system unit .

In response to receiving the indication of being added to the dataset group the application dataset may be received from the other system unit block and the received application dataset may be added to the storage layer block . For example distribution layer may receive the application dataset from the other system unit and may store the received application dataset in storage layer . The application dataset may include a list of system units which are associated with the dataset group and the quorum requirement for performing operations on the application dataset.

The process of may include detecting a request to change application data in an application dataset block . As an example application may generate application data such as receiving data from a particular peripheral device recording an instruction sent to a particular peripheral device recording the result of a calculation and or another type application data generated by application . As another example application may select to modify update delete and or otherwise change existing application data in application dataset . Application may provide the application data change to distribution layer .

Other system units in the dataset group associated with the application dataset may be identified block and a proposal may be sent to the other identified system units to change the application data in the application dataset block . For example distribution layer may access application dataset may determine system units identified in system unit fields and may send a proposal for the application data change to the system units identified in system unit fields .

Consensus may be obtained for changing the application data in the application dataset block and the proposed change may be applied in the application dataset block in response to the obtained consensus. System unit may receive a quorum of votes to accept the proposed change. For example if ten 10 system units are associated with the dataset group the requesting system unit may need to receive votes from six 6 of the associated system units in order to change the application data in application dataset . Once six 6 votes are received consensus has been reached for the proposed change and the proposed change may take place. Distribution layer may perform the adding changing updating deleting and or otherwise changing of the application data in application dataset in storage layer in response to obtaining consensus for the proposed change.

The process of may include receiving a request from another system unit to be added to a dataset group associated with an application dataset block . For example controller of system unit may receive a request from a requesting system unit to be added to a dataset group associated with a particular application dataset. System unit may receive the request and may determine that the request is relevant if system unit is associated with the dataset group. For example system unit may determine whether application dataset associated with application identified in the request exists in storage layer .

Other system units in the dataset group may be identified block and a proposal may be sent to the other identified system units to add the requesting system unit to the dataset group block . For example distribution layer may access application dataset may determine system units identified in system unit fields and may send a proposal to add the requesting system unit to the system units identified in system unit fields of application dataset .

Consensus may be obtained for adding the requesting system unit to the dataset group block and the requesting system unit may be added to the dataset group block in response to the obtained consensus. Furthermore the quorum requirement for the dataset group may be adjusted block . System unit may receive a quorum of votes to accept the proposed change to add the requesting system unit . For example if 10 system units are in the dataset group the proposing system unit may need to receive votes from six 6 of the associated system units in order to add the requesting system unit to the dataset group. Once six 6 votes are received consensus has been reached for the proposed addition and the requesting system unit may be added to the dataset group associated with application dataset . For example distribution layer may generate a system unit field for the requesting system unit in application dataset . Furthermore distribution layer may adjust the quorum requirement in quorum field of application dataset . For example if ten 10 system units were associated with the dataset group and now eleven 11 system units are associated with the dataset group the quorum requirement of six 6 may not change. However if another system unit is added to the dataset group to a total of twelve 12 system units the quorum requirement may change from six 6 to seven 7 .

In some implementations a removal process may be performed if a particular system unit requests to be removed from a dataset group associated with an application dataset. For example application may be uninstalled from a particular system unit . As part of the uninstallation process application may request that the particular system unit be removed from application dataset . Thus the particular system unit may send a proposal to the other system units in the dataset group associated with application dataset to be removed. If a consensus is obtained for the proposal the particular system unit may be removed from the dataset group and application dataset may be deleted from storage layer .

In some implementations installation of application may be automated. Thus rather than an administrator using administration device to install application on each system unit one at a time application may be installed on one system unit and a set of installation instructions may be installed on system unit . The installation instructions may be included as part of application or as a separate program application and or script file. The installation instructions may include one or more criteria for installing application and instructions to install application may be sent to other system units in DCS if a particular system unit meets one or more criteria. Thus if the one or more criteria are met by a particular system unit the particular system unit may install application . After application is installed by the particular system unit the particular system unit may perform the process of to be added to the dataset group associated with application dataset associated with application . The one or more criteria for installing application on the particular system unit may include a hardware configuration associated with the particular system unit a particular type of peripheral device connected to the particular system unit a location type associated with the particular system unit an event type logged by the particular system unit a particular application installed on the particular system unit and or other types of criteria.

Wall encloses a secure area such as a room in a building. Door provides access for a user to secure area . In this embodiment controller is installed inside secure area . In other embodiments controller may be installed outside secure area . Reader device is installed outside secure area and lock device is installed inside secure area to wall and door . Sensor in this example is a monitoring device mounted outside secure area . Actuator includes a motor used to control the field of view of the monitoring device in this example.

When a user enters credentials into reader device e.g. by entering a PIN scanning an access card scanning an iris etc. controller may use the credentials to authenticate the identity of the user and may perform a lookup in an access rules table to determine whether to grant access to the user based on the identity of the user and the access rules. If controller determines that access should be granted controller activates lock device to unlock door thus granting access to the user to secure area .

Although shows exemplary components of physical layout in other implementations physical layout may include fewer components different components additional components or differently arranged components than depicted in . Additionally or alternatively any one component or group of components in physical layout may perform a task or tasks described as performed by one or more other components of physical layout .

In this example system units A to F do not include a central controlling device e.g. a server and may include one or more distributed datasets. For example system units A through F may maintain a distributed credentials table a distributed access rules table and or a distributed events log. Assume an administrator uses administration device to log into system unit A to add a user and to add credentials associated with a user. Those added credentials may be distributed to the other system units that control doors to rooms to which the user has access. If system unit B fails for example data collected by system unit B may continue to be available as a result of a distributed events log included in the other system units.

Although shows exemplary components of physical layout in other implementations physical layout may include fewer components different components additional components or differently arranged components than depicted in . For example in another embodiment a central controlling device e.g. a server may be used in conjunction with one or more distributed datasets. Additionally or alternatively one or more components of physical layout may perform one or more tasks described as performed by one or more other components of physical layout .

Since system unit A is the only system unit in the dataset group associated with counting application dataset any proposed changes to counting application dataset automatically receive consensus. Thus system unit A has consensus to accept the request and add system unit C to the dataset group associated with counting application dataset . System unit A may add system unit C to the dataset group associated with counting application dataset A signal and may send an indication to system unit C that system unit C has been added to counting dataset group signal . In response system unit C may receive counting application dataset signal and system unit C may store the received counting application dataset in storage layer .

At a later time counting application C may generate application data. For example a person may have left room C through the door associated with system unit C and a sensor device associated with system unit C may detect the leaving person. Counting application C may propose to add the generated application data in application dataset C via distribution layer C signal . Since the only other system unit in the dataset group associated with counting application dataset is system unit A the proposal to add data is sent to system unit A signal . System unit A may vote for the change and system unit C may thus obtain consensus by reaching the required quorum of 2 by having automatically have voted for its own proposed change . As a result the proposed change may thus be applied in both system unit A and system unit C. signal .

Since both system unit A and system unit C have received the request both system unit A and C will propose to add system unit D to the dataset group associated with counting application dataset . Assume system unit A receives and acts upon the received request before system unit C. System unit A will send a proposal to add system unit D to system unit C signal and to itself. System unit C will send a proposal to add system unit D to system unit A and to itself not shown in . Since the proposals sent by system unit A are received first the subsequent proposals from system unit C are rejected. Thus system unit C will vote for the proposal from system unit A and will reject its own proposal signal and system unit A will vote for its own proposal and reject the proposal from system unit C not shown in . Thus system unit A will reach consensus for its proposal and system unit D will be added to the dataset group associated with counting application dataset signals and the change will be distributed as a result of the accepted proposal.

System unit A may send an indication to system unit D that system unit D has been added to the dataset group associated with counting application dataset signal and will provide counting application dataset to system unit D signal . Distribution layer D may store the received counting application dataset in storage layer signal The quorum requirement for the dataset group associated with counting application dataset need not be changed in this case.

This application incorporates by reference the following applications filed the same day as the present patent application U.S. application Ser. No. 14 028 218 titled Event Timeline Generation U.S. application Ser. No. 14 028 118 titled Control System Configuration Within an Operational Environment U.S. application Ser. No. 14 028 236 titled Anonymous Decisions in an Access Control System U.S. application Ser. No. 14 028 243 titled Consensus Loss in Distributed Control Systems U.S. application Ser. No. 14 028 059 titled Joining a Distributed Database U.S. application Ser. No. 14 028 198 titled Distributed Events in an Access Control System and U.S. application Ser. No. 14 028 208 titled Distribution of User Credentials .

In the preceding specification various preferred embodiments have been described with reference to the accompanying drawings. It will however be evident that various modifications and changes may be made thereto and additional embodiments may be implemented without departing from the broader scope of the invention as set forth in the claims that follow. The specification and drawings are accordingly to be regarded in an illustrative rather than restrictive sense.

For example while series of blocks have been described with respect to the order of the blocks may be modified in other implementations. Further non dependent blocks may be performed in parallel.

It will be apparent that systems and or methods as described above may be implemented in many different forms of software firmware and hardware in the implementations illustrated in the figures. The actual software code or specialized control hardware used to implement these systems and methods is not limiting of the embodiments. Thus the operation and behavior of the systems and methods were described without reference to the specific software code it being understood that software and control hardware can be designed to implement the systems and methods based on the description herein.

Further certain portions described above may be implemented as a component that performs one or more functions. A component as used herein may include hardware such as a processor an ASIC or a FPGA or a combination of hardware and software e.g. a processor executing software .

The terms comprises and comprising specify the presence of stated features integers steps or components but does not preclude the presence or addition of one or more other features integers steps components or groups thereof.

No element act or instruction used in the present application should be construed as critical or essential to the embodiments unless explicitly described as such. Also as used herein the article a is intended to include one or more items. Further the phrase based on is intended to mean based at least in part on unless explicitly stated otherwise.

