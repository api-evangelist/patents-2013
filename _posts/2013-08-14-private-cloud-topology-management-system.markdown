---

title: Private cloud topology management system
abstract: A device configured to receive network topological information from devices in a private Internet Protocol (PIP) network receive network performance data from the devices; receive service topological information from a cloud; receive service performance data from the cloud; receive policies for determining optimum routes to the cloud from an administration device; apply the policies to the network topological information from the devices, the network performance data, the service topological information, and the service performance data to obtain routing rules; and forward the routing rules to a set of request routers.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09338223&OS=09338223&RS=09338223
owner: Verizon Patent and Licensing Inc.
number: 09338223
owner_city: Basking Ridge
owner_country: US
publication_date: 20130814
---
The term cloud or cloud computing may refer to a network for providing hosted services over the Internet or another network or to providing hosted services by the cloud respectively. Cloud services are generally tailored to give the illusion of unlimited and ubiquitous resource availability. Services provided by a cloud may include a Software as a Service SaaS Platform as a Service PaaS and Infrastructure as a Service IaaS .

SaaS includes providing software application instances via the cloud. Typically such applications are client server types with the server instances running in the cloud and the client instances running on customer devices. Examples of SaaS applications include Microsoft Office 365 and Google Apps.

PaaS includes provisioning platforms needed for deployment of software applications on the cloud e.g. operating systems web servers databases etc. . Examples of PaaS systems include Amazon Web Services AWS Elastic Beanstalk and Google App Engine.

IaaS includes provisioning physical devices or virtual machines disk spaces computing power memory network devices e.g. physical and or virtual routers etc. . Users may install operating systems applications etc. on the provisioned infrastructure. Examples of IaaS systems include Amazon Elastic Compute Cloud EC2 and Google Compute Engine.

The following detailed description refers to the accompanying drawings. The same reference numbers in different drawings may identify the same or similar elements.

As described herein a private cloud topology management PCTM system may optimize a user s cloud traffic e.g. traffic from to the customer to from the cloud by routing guiding the traffic over the best network path. The user may be connected to a landline network or a wireless network and in a private or public network.

As shown clouds provide services to users not shown that are in or connected to PIP networks . On PIP network by PIP network basis topology manager collects network service topology information from clouds network topology information from PIP network and policies from administration device . Based on the received information topology manager generates routing rules or a routing table that specify optimum paths over which traffic flow from to devices in PIPS to from clouds . Topology manager then distributes the routing table routing rules to request routers . When a user device in PIP network attempts to access a service provided by one of clouds the user device obtains the routing information directly or via another device e.g. a web server from request routers . Based on the routing information the user device may access the service over the optimum path.

Network may include the Internet an intranet a cloud network a virtual private network VPN a software defined network SDN a service provider network a local area network LAN a wide area network WAN a metropolitan area network MAN a cellular network a public switched telephone network PSTN an optical network an ad hoc network any other network or a combination of one or more networks.

As further shown network may include clouds through M collectively referred to as clouds and individually as cloud PIP networks through M collectively referred to as PIP networks and individually as PIP network and PCTM system .

Cloud may include a network that provides hosted services. As discussed above the hosted services may include SaaS PaaS and or IaaS. In addition some clouds may provide a network as a service NaaS . A public cloud may render the hosted services over the Internet while a private cloud may render its services over a private network. Exemplary services may include storage services backup services spam filtering web services managed services etc.

PIP network may include a private IP network which may include a VPN. PIP network may be a logical or a physical network. A logical network may include network elements e.g. logical or physical interconnected or communicating over logical paths e.g. tunnels . For example a remote device may connect to a PIP network via a tunnel.

PCTM system may provide for optimization of data transport between a user device in PIP network and cloud . As briefly discussed above PCTM system may route the traffic over the best network path between the user device and the cloud e.g. the path that optimizes a particular performance metric .

As further shown in PCTM system may include topology manager and request routers through M collectively request routers and individually a request router . Depending on the implementation PCTM system may include additional fewer different or a different arrangement of devices than those illustrated in .

Topology manager may receive cloud ranking policies and or cloud route selection policies e.g. business rules from administration device and receive network cloud data from devices in network . Based on the information topology manager may generate or update network models e.g. topologies . In addition topology manager may analyze traffic based on the received network data and the network models. Cloud ranking policies and cloud route selection policies are described below in greater detail.

Topology manager may derive routing rules also referred to as a routing table based on network state variables a particular PIP network network data and routes i.e. paths from a user device to a cloud and ranking policies. The routing rules may specify for a particular set of network state variables and or network data e.g. a network address of a domain name system DNS a network address of a device that requested the cloud service the time of the request bandwidths available to clouds availability of a particular service health status of clouds load conditions of clouds for a type of service etc. a list clouds or paths that may provide the optimum service e.g. the fastest download time .

Topology manager may initiate pushing the routing rules to request routers . Alternatively topology manager may provide the rules table upon receipt of a request from request routers . In addition topology manager may convey cloud selection policies received from administration device to request routers .

Request router may receive a request to identify a cloud or a network path to the cloud from a network device such as a DNS device. In response request router may specify to the network device the network address of a cloud or the network path based on the cloud selection policies and or the routing rules for a given service or applications obtained from topology manager .

Alternatively or additionally request router may delegate its role to or may operate in conjunction with web servers. In such implementations request router may send the selection policies and or the routing rules or a portion of the routing rules to the web servers that may use the selection policies and the table rules to provide a hypertext transfer protocol HTTP redirect response to a user device requesting the service. As further described below a web server may identify to the user device via a HTTP redirect response a particular cloud or a path that may provide optimum data transport.

Request router may receive single use tokens from user device and ensure that a request for service is honored by different clouds by re signing a URL URI or re issuing a token. Request routers may be distributed over different geographical locations and each of request routers may be configured similarly to other request routers .

User device may include a handset cellular phone smart phone personal computer laptop computer tablet computer set top box gaming console personal digital assistant PDA smart television TV and or another type of communication and or computational device that is capable of receiving and playing multimedia content.

In accessing a cloud service user device may follow one of two processes a single stage cloud selection process also referred to as route selection process or a dual stage cloud route selection process. In the single stage selection process user device may make a single request to cloud identified by a DNS. In the dual stage selection process user device may make two requests to clouds one request to a web server usually at a first cloud that provides a HTTP redirect response and another request to a cloud identified by the earlier redirect response. User device may send a request for service to the second cloud and obtain from the second cloud the requested service e.g. IaaS service PaaS service etc. .

Administration device may receive a list of clouds a list of services provided by the clouds a list of policies e.g. cloud ranking policies cloud or cloud route selection policies etc. configuration parameters that are associated with collecting network data and obtaining network state variable values etc. from an administrator user via a graphical user interface GUI . Administration device may provide the list of clouds the policies and the configuration parameters to topology manager .

Depending on the implementation network may include additional fewer different or a different arrangement of components than those illustrated in . For example depending on the implementation functions that are described as being performed by one device may be performed by two or more other devices and functions that are described as being performed by two or more devices may be performed by one device. In addition although not illustrated in network may include other devices and or components such as gateways bridges switches routers server devices etc.

Processor may include a processor a microprocessor an Application Specific Integrated Circuit ASIC a Field Programmable Gate Array FPGA and or other processing logic e.g. embedded devices capable of controlling device executing programs instructions etc.

Memory may include static memory such as read only memory ROM and or dynamic memory such as random access memory RAM or onboard cache for storing data and machine readable instructions e.g. programs scripts etc. . Storage unit may include a floppy disk CD ROM CD read write R W disc holographic versatile disc HVD digital versatile disc DVD and or flash memory as well as other types of storage devices e.g. hard disk drive for storing data and or machine readable instructions e.g. a program script etc. . Depending on the context the term memory storage storage device storage unit and or medium may be used interchangeably. For example a computer readable storage device or computer readable medium may refer to both a memory and or storage device.

Input component and output component may provide input and output from to a user to from device . Input output components and may include a display screen a keyboard a mouse a speaker a microphone a camera a DVD reader Universal Serial Bus USB lines and or other types of components for converting physical events or phenomena to and or from signals that pertain to device .

Network interface may include a transceiver e.g. a transmitter and a receiver for device to communicate with other devices and or systems. For example via network interface device may communicate over a network such as the Internet an intranet a terrestrial wireless network e.g. a WLAN WiFi WiMax etc. a satellite based network optical network etc. Network interface may include a modem an Ethernet interface to a LAN and or an interface connection for connecting device to other devices e.g. a Bluetooth interface .

Communication path may provide an interface through which components of device can communicate with one another.

Network device may perform the operations described herein in response to processor executing software instructions stored in a non transient computer readable medium such as memory or storage device . The software instructions may be read into memory from another computer readable medium or from another device via network interface . The software instructions stored in memory or storage device when executed by processor may cause processor to perform processes that are described herein.

Policy engine may receive policies from administration device and store the received policies in policy database . In addition policy engine may edit delete process e.g. compile or check for errors and or apply the policies stored in policy database in response to user input via administration device . In addition policy engine may receive quality of service QoS classes for each service and associate those classes with particular clouds using an application programming interface API . In addition policy engine may receive latency thresholds from administration device for selecting a specific cloud or a route.

Policies that policy engine receives from administration device may include cloud policies and routing policies. The cloud policies in turn may include cloud ranking policies and cloud selection policies. The cloud ranking policies include rules that policy engine may apply to a list of clouds for a given service application and a VPN to generate a routing rules table based on network information and network state variable values in network information database .

The cloud selection policies may include routing rules received from administration device . Topology manager may provide the cloud selection policies to request routers along with the routing rules table. Request routers may use the routing rules and or apply the cloud selection policies to select a cloud or a route in response to a request from a network device e.g. DNS server or to a request from a web server. In some implementations topology manager may distribute the cloud selection policies and the routing rules to web servers hosted on clouds rather than to request routers .

The routing policies may include rules for routing based on network data e.g. network traffic latencies service type etc. state variables etc.

Policy engine may apply different policies to generate routing rules. For example policy engine may apply a policy that requires the end to end latency for accessing a service be less than 100 milliseconds a policy for sending customer traffic to a particular site until the customer has sent a terabyte of data each month a policy for keeping the cost of network traffic below a threshold or a policy to distribute traffic between two cloud sites etc.

Data collector may receive information for configuring network components for collecting data e.g. Simple Network Management Protocol SNMP configuration parameters Netflow configuration parameters JFlow configuration parameters scheduling information etc. from administration device . Data collector may store the configuration information in network information database and apply the received configuration information to data collection components not shown installed on devices in network e.g. servers gateways etc. . Data collector may also collect network data received by the data collection components and store the collected data in network information database .

In some implementations data collector may invoke APIs made available by cloud service providers to determine or identify for devices in clouds CPUs memory server storage throughout each server storage farm in the cloud etc. Data collector may store such data in cloud database .

Network modeler may determine interconnectivity between networks e.g. clouds PIP networks etc. peering points and or network devices based on network data and maintain obtain maps of network topologies e.g. topologies of clouds for a given service or PIP networks . Network modeler may determine or maintain for example an integrated content services and network layer topology map.

In addition network modeler may obtain or determine information related to network topologies such as performance indices weighted network costs the lowest highest cost performance index for each client network address etc. For a service service type a performance index and weighted network cost may be obtained between cloud node pairs e.g. two cloud servers each cloud node e.g. a server device in the cloud and edge router pairs and each cloud node and peering router pairs etc. In addition network modeler may correlate service application topology discussed below and the output of analytics engine discussed below with network data stored in network information database .

Analytics engine may obtain network metrics statistics and or network parameters used to rank clouds or to obtain optimum paths to clouds . Analytics engine may obtain for example flow information e.g. data from Netflow sFlow IPFIX etc. peering ratios between different networks e.g. ratio of incoming traffic from a first network to a second network via a peering point to outgoing traffic from the second network to the first network the overall bandwidth of a cloud download or upload speeds of a cloud etc.

Cloud database may include a list of clouds and service application topologies provided via data collector and or administration device . The service application topologies may include for example for a cloud which cloud service is available from which device all available services to each VPN a URI an IP address and login password credentials specific storage farm locations etc. Cloud database may also include information about the CPUs memories and storage servers throughout each cloud . The information in cloud database together with results from analytics engine analytics information may be correlated with network data in network information database .

Network information database may include topology maps or topology information obtained by network modeler data collector and or administration device . The topology maps may include one or more of for example a PIP network or VPN topology map a multiprotocol label switched MPLS topology map and an autonomous systems AS topology map.

Returning to the network topology map may also include information that indicates different types of connectivity between PIP networks and other networks. illustrates different types of PIP network connectivity. As shown PIP connectivity may be a PIP network to the Internet connectivity a PIP wireless network through a wireless gateway connectivity or a PIP network to PIP network connectivity .

In PIP network to the Internet connectivity a user device may connect to a PIP network via another network e.g. the Internet . In connecting to network user device may form a tunnel to provider edge PE router on network .

In PIP wireless network through a wireless gateway connectivity a user device may connect to PIP network via a radio access network RAN and a wireless network . RAN is coupled to wireless network . in an exemplary communication path extends from wireless network to a PIP network via PE routers on wireless network a gateway between PE routers and PE router on cloud PIP network .

In PIP network to PIP network connectivity a user device not shown in a VPN may connect to a VPN . An exemplary communication path may extend from VPN to VPN via a customer edge CE router on VPN a PE router on network a PE router on network a PE router on network a PE router on network and a CE router on VPN .

For each of the above connectivity types the network topology map may include information that indicates which customer addresses map to each border device. Although not illustrated in there may be other types of connectivity.

Network information database may also include network data obtained by data collector . The data obtained by data collector may include aggregated traffic load on networks e.g. clouds PIP networks etc. traffic load between cloud nodes load conditions of each cloud node an aggregate bandwidth consumption of cloud traffic traffic between local and remote AS networks local traffic route information ingress and egress traffic between a network and its peer networks or third party networks inter AS traffic route information user device or network device geo location information client edge router distribution information in networks etc.

The traffic data provided to network information database by data collector may include for each node e.g. router from which data is collected traffic data for different Quality of Service QoS classes or differentiated service code point DSCP markings. illustrates exemplary QoS and corresponding DSCP markings according to one implementation.

As shown in this exemplary implementation service classes are mapped to DSCP or diff serv markings . More specifically a Voice real time data QoS Video Priority Data High QoS Video Priority Data Low QoS Mission Critical Data High QoS Mission Critical Data Low QoS Business Data High QoS Business Data Low QoS General Data High QoS General Data Low QoS and Default Data QoS are assigned DSCP markings of Expedited Forwarding EF Assured Forwarding AF AF AF AF AF AF AF AF and Default Forwarding DF respectively.

In this implementation some of the DSCP markings have corresponding IP Precedence class selectors. More specifically EF AF AF AF AF and DF correspond to IP Precedence selectors of 5 4 3 2 1 and 0 respectively. No corresponding IP Precedence selectors exist for other DSCP markings i.e. AF AF AF and AF .

Returning to network information database may also include network statistics parameters. The network statistics parameters may include for example a percentage of input output traffic between different content providers a percentage of input output traffic between local and remote ASs statistics on traffic between cloud nodes processing load conditions on each cloud node client quality of service experience statistics information traffic trending information for different types of traffic associated with a content provider a service provider an AS or a collection of IP addresses traffic between different cloud nodes traffic statistics as functions of time day week etc. state variables values e.g. the current load of a cloud ingress egress traffic and traffic ratio as a function of time day week etc. for each peering interface etc.

Network information database may also include network latency and or delivery cost information for clouds at different physical locations e.g. cost of delivering a given amount of data from a point of presence POP or a user device to a cloud at a given location . depicts an exemplary delivery cost table . For a particular node or a POP cost table includes the cost row cents per gigabyte GB and columns of clouds at specific locations such as Amazon Web Services AWS District of Columbia DC AWS New York City AWS Los Angeles Google DC Google New York City and Google Lost Angeles . The delivery costs for AWS DC AWS New York City AWS Los Angeles Google DC Google New York City and Google Lost Angeles are illustrated as 2 3 3 2 4 and 2 cents GB respectively.

Returning to policy database includes cloud ranking policies cloud selection policies and routing policies. As describe above the cloud ranking policies include rules e.g. business rules that policy engine may apply to a list of clouds to generate routing rules table or a ranked list of clouds. The cloud selection policies include rules that policy engine may distribute to request routers . Request routers may enforce the cloud selection policies in selecting clouds in response to requests for service or in response to requests to identify a cloud .

Cloud ranking policies or cloud selection policies may include business rules. Cloud ranking policy for example may include a rule for ranking a cloud based on contractual obligations of one entity e.g. a service provider network to another entity that owns a cloud . A cloud selection policy may include for example a business rule for directing all service requests for content to a single cloud or a rule for splitting requests for content between two or more clouds .

A business rule may include ranking selecting a particular cloud based on characteristics of clouds . The characteristics may include for example for a given service application whether a cloud supports multicast IPv6 delivery specific protocol versions service protocols services applications available at cloud geographical locations of clouds health status of clouds identities of clouds or entities that own clouds IP addresses of clouds etc.

A business rule may also include ranking selecting clouds based on characteristics that are associated with a device requesting a service application or requesting the identity of a cloud e.g. user device or a DNS server and based on the characteristics of clouds . For example a rule may require that for a given service application a cloud be selected based on the IP address of user device and IP addresses of clouds e.g. select a cloud whose IP address prefix best matches the IP address of user device . In another example a rule may require that a cloud be selected based on the following the IP address of user device geographical locations of clouds e.g. New York city Texas etc. and types of services applications available at clouds . In some instances a rule may require that a cloud be selected based on the point of presence of user device and whether the cloud belongs to a particular business entity e.g. a business entity that offers network services to user device an entity that with whom the user of user device has a service contract etc. . A rule may specify other combinations of characteristics of user device DNS server device and clouds .

A business rule may require that for a given service application a request for service to a first cloud be redirected to a second cloud to the extent that the bandwidth ratio of the two clouds stays above a minimum threshold. In another example a rule may require that a request for service be directed to the second cloud to the extent that the bandwidth per measurement interval for the first cloud stays above a minimum threshold.

In another implementation a business rule may require selecting a target cloud based on ranking values that are computed as a function of available bandwidths of clouds over a measurement interval or a function of a bandwidth ratio between a first network a network with which user device is associated such as a service provider network and clouds . A request for service application then may be directed to the cloud with the lowest or the highest ranking value. In some implementations each of the ranking values may be computed as the sum of a ratio e.g. between a network bandwidth and a cloud bandwidth and a weighted value associated with the cloud. One reason for adding the weighted value to the ratio may be to bias the selection of the cloud s .

In another example a business rule may involve geographical areas locations and or regions. For example a business rule may require that only a particular cloud be allowed to provide a service to user device in a specific area e.g. India Nebraska New York City etc. . Such a business rule may allow entities that own clouds to comply with laws regulations business arrangements etc.

In yet another example a business rule may include determining ranking values based on cache hits cache misses cache efficiency etc. of clouds for a given service. In still yet another example a business rule may include selecting clouds in a weighted round robin fashion selecting or distributing requests for service to multiple clouds sending all requests within a specific IP block to a designated cloud etc.

A business rule can be based on user telemetry data from user devices . The telemetry data which is similar to flow data or log data may be collected via data collector . The data may provide topology manager or request routers with information that indicates which IP segments of network are performing optimally.

Both cloud selection policies and ranking policies may include rules based on cloud performance information a client service provider information client account status peering ratios flow records cloud log files etc.

Routing rules database may include cloud routing rules or a table. Records in the routing rules table may be a function of service types or a specific application offered as a service different network statistics parameters state variables etc. For a given cloud service type PIP networks VPNS and state variable values a record in the cloud table may include a URI or IP address a path URL signing policies login password credentials rules etc.

The routing rules table in routing rules database in effect maps out the domain of PCTM system PCTM domain . depicts an example of a PCTM domain. In PCTM domain includes service provider IP network and service provider WAN . Service provider IP network includes nodes through which are accessible to customer sites and customer network . Customer network includes nodes and .

As further shown the routing rules specify that node access a managed service A site that node access managed service B site and SaaS PaaS site and that node access SaaS PaaS site . The routing rules also specify that node access managed service A site and SaaS PaaS site . Node is not part of customer network .

Returning to policy engine may distribute the table rules in routing rules database to request routers . Having received the table rules request routers may use the routing rules table from routing rules database to direct user devices to a cloud in accordance with a single stage cloud route selection process or a dual stage cloud route selection process.

In the single stage cloud selection process user device or a resolver on user device sends a query to DNS to resolve a domain name of a cloud to its IP address. If the query is a recursive one and a first DNS server e.g. DNS server in DNS that receives the query does not have a DNS record to resolve the domain name the first DNS server sends out a query of its own to a second DNS server e.g. DNS server . The second DNS server may then act similarly as the first DNS server to resolve the domain name. The process may continue until one of DNS servers e.g. DNS server Q is directed to request router via a CNAME record in the DNS server which applies its routing rules or performs a lookup of the domain name in the cloud routing table provided by topology manager . The IP address of cloud provided by request router then flows through the chain of DNS servers in the direction opposite to the flow of the queries from the resolver to request router . Upon receipt of the IP address user device may use the IP address to request a service from the cloud associated with the IP address.

For the dual stage process request router disseminates its information to a web server in a cloud by sending the cloud routing table received from topology manager to the web server. Alternatively request router may disseminate the information in response to a request from a web server to identify a cloud that may optimally provide the service requested by user device . DNS servers e.g. DNS server B and DNS server B are each aware of clouds and their corresponding IP addresses.

DNS query of stage one cloud query may include user device requesting a network address of a cloud from DNS which may include DNS server B to DNS server B and or DNS server B to DNS server B. DNS query may conclude with user device receiving a response from DNS e.g. from DNS server B . The response may provide an IP address corresponding to the domain name of the cloud e.g. cloud which may not optimally provide the requested service to user device .

Cloud request of stage one cloud request may include user device requesting content from the cloud by using the IP address obtained through DNS query . When a web server in cloud receives the request however the web server sends a message to request router to identify a cloud that may best optimally provide requested service to user device . When the web server receives the IP address or the domain name of a second cloud from request router the web server may provide the information to user device .

DNS query of stage two cloud request may include user device requesting an IP address of the second cloud from DNS . DNS query may conclude with user device receiving a response from DNS e.g. from DNS server B . The response may provide an IP address corresponding to the domain name of the second cloud e.g. cloud . If user device received the IP address of the second cloud at cloud request instead of the domain name of the second cloud DNS query may be omitted.

Cloud request of stage two may include user device requesting content from the second cloud by using the IP address obtained through either cloud request or DNS query .

In the dual stage cloud selection process of the web server that requests information about cloud from request router may also relay information about user device which requested content from the web server to request router . The information passed from the web server to request router may include the IP address of user device a network to which user device belongs POP information etc. Request router may use such information to select the second cloud e.g. by applying routing rules cloud selection policies .

In contrast in the single stage cloud selection process illustrated in a DNS server that requests information from request router may be unable to pass information about user device to request router . Accordingly in the single stage cloud selection process request router may select a cloud without such information.

Service ID field may include one or more identifiers for particular services or service types. For example an identifier in service ID field may identify a service for providing a general or specific type of SaaS PaaS IaaS and or NaaS. Depending on the implementation the identifier may also identify other types of services that involve virtual servers physical servers an application etc. In some implementations service ID field may identify more than one service that is offered by the cloud associated with record .

Cloud ID field may identify a cloud which is associated with the record that includes the ID field . In some implementations information in cloud ID field may have been provided by a network administrator via for example a GUI on administration device .

Access control field may indicate levels of access that are associated with IP addresses of user devices domain names user IDs etc. Devices and parameters field may include device or network information that is input by an administrator via administration device . For example in one implementation devices and parameters field may identify a network topology edge routers gateways etc. In another example devices and parameters field may provide information regarding overall network capacity server storage locations for the specific service bandwidth memory disk spaces etc. In some implementations devices and parameters field may also provide information about the CPU memory storage locations bandwidth etc. for each device in the cloud.

Network statistics field may include bandwidth traffic jitter delays latency and or error information about devices in a cloud corresponding to record . Network statistics field may further include statistics that pertain to the cloud and are obtained from the device statistics e.g. overall network traffic bandwidth errors etc. . Network statistics field may include time dependent information e.g. bandwidth of a device at a specific time day of month day of week etc. . In some implementations the information in network statistics field may be obtained from data in network information database .

State variables field may include values of parameters that indicate the current state of clouds and or devices in clouds . State variables field may include for example a flag that indicates whether a specific network device e.g. a peering router is down whether the cloud is down etc. In another example state variables field may include currently available bandwidths of individual devices and or clouds .

Policy ID field may include a string of alphanumeric characters that uniquely identify a policy associated with record . In some implementations policy ID field may include multiple fields each of which includes information for identifying the policy such as a user ID associated with a cloud or PIP network an administrator ID a policy type e.g. characteristic associated with a subscription type or a QoS etc. etc.

Filters and functions field may include conditions for identifying clouds e.g. from a list of clouds in cloud database or paths to clouds based on one or more datum factors such as access control values in access control value field and or values in devices and parameters field values in network statistics field and or values in state variables field . The conditions may be specified via expressions representing mathematical relationships mathematical operations and or symbols that reference information from different fields in records in cloud database .

Filters and functions field may also specify a relationship between different filters via logical operators or set operators. For example assume that filters field for record includes DAV

Filters and functions field may also include functions to be applied to clouds that are listed in cloud database and or are identified by the filters in filters and functions field . For example in one implementation the functions may include expressions for computing numerical values used to rank clouds ranking values . Each function may reference numbers mathematical expressions and or one or more of values in access control field values in devices and parameters field values in network statistics field and or values in state variables field .

For example assume that F1 represents the result of applying a filter designated or defined in filters and functions field . Also assume that filters and functions field includes R1 F1 1. R1 F1 1 may indicate that each of the clouds identified by applying F1 is be assigned a ranking value of one.

Depending on the implementation records may include fewer additional different or a different arrangement of fields than those illustrated in . In some implementations fields in each record may have a different syntax.

Selection variable values field may include a predetermined set of selected data from network information database and fields in a record of cloud database . Each set of values may represent a condition under which the policies specified in policy database have been applied to obtain an optimum path to a cloud. Selection variable values field may include for example a service type e.g. IaaS SaaS PaaS NaaS etc. the IP address of a DNS server that may request the identity of a cloud from which a user device is to obtain a service a set of IP addresses to which an IP address of user device belongs time information e.g. time of day day of week day of month etc. associated with a request for service a jitter associated with the path a latency or delay associated with the path etc.

Route field may include a list of ranked routes or clouds from which a user may obtain a particular service. Each of the clouds in the list may be identified by an IP address a Universal Resource Identifier URI a Universal Resource Locator URL etc. Each route may be identified by a sequence of network addresses or identifiers such as DNS names that represent nodes of a particular path.

Topology manager may determine whether the user requests routing rules for a list of clouds in cloud database be generated block . If the topology manager determines that the rules for the list of clouds is to be generated block yes topology manager may generate the rules block . Generating the rules or a table may include applying one or more policies in policy database to the list of clouds for a chosen set of selection variable values network information cloud information etc. The resulting cloud routing rules may be stored in routing rules database . Thereafter at block process may return to block where topology manager may receive additional commands from administration device .

If the cloud routing rules is not to be generated block no topology manager may proceed to block to determine whether the command received at block directs topology manager to distribute the cloud routing rules to request routers block . If the cloud routing rules is to be distributed block yes topology manager may distribute the cloud routing rules to a selected set of request routers block . Thereafter at block process may return to block .

If the cloud routing rules is not to be distributed block no topology manager may determine whether the command received at block requires that PCTM system be configured block . If PCTM system is not to be configured block no process may return to block . Otherwise block yes topology manager may provide a GUI e.g. to administration device and receive administrator input block . Topology manager may proceed to block .

At block topology manager may determine whether the administrator input indicates that topology manager is to receive one of the following information regarding a cloud information about policies information about configuration data for collecting network data information about request routers e.g. addresses of request routers to which routing rules may be distributed information about PIP networks or VPN or another command. If the input indicates that another command is to be received block command process may return to block .

If the input indicates that topology manager is to receive data about a cloud block cloud topology manager may present a user interface for receiving cloud data to administration device and receive the cloud data from administration device block . If the input indicates that topology manager is to receive policies block policy topology manager may present a user interface for receiving policies to administration device and receive the policies from device block . If the input indicates that topology manager is to receive configuration information for collecting network data block configuration topology manager may present a user interface for receiving configuration information to administration device and receive the configuration information from administration device block .

If the input indicates that topology manager is to receive information about request routers block request routers topology manager may present a user interface for receiving information about request routers to administration device and receive the information from administration device block . If the input indicates that topology manager is to receive PIP VPN network data block PIP VPN topology manager may present a user interface for receiving information about PIP VPN network data and receive the information from administration device block .

As shown process may include by DNS receiving a request to resolve a cloud domain name to an IP address block . In response DNS resolves the domain name to the IP address block . When user device receives the IP address user device forwards a request for service to a device cloud corresponding to the IP address block .

When the device cloud corresponding to the IP address receives the request for service a web server hosted on the device cloud provides a redirect URL URI to user device by either looking up its routing rules received from request router or topology manager or by querying a request router block . Upon receipt of the redirect URL URI user device may resolve the redirect URL URI e.g. via DNS to an IP address block and forward its request for service to the resolved IP address block .

When a device cloud corresponding to the resolved IP address receives the request for service from user device the device cloud may provide the service to user device block . In some implementations user device may provide some feedback information e.g. user experience download time etc. . The feedback information may be forwarded to topology manager block .

As shown topology manager may receive policies and or rules from administration device. Furthermore based on the received policies rules topology manager may generate routing rules table and forward routing rules table to request router .

When request router receives a request for a path to cloud from a user device request router may provide a redirection address e.g. IP address URL URL etc. to user device . Based on redirection address user device may send a request for service to cloud .

In some implementations topology manager may provide reports on PIP networks VPNS clouds etc. to administrators via administration device . This is illustrated in in which administration device sends a request for cloud information to topology manage . In response topology manager provides a report to administration device . Depending on the implementation topology manager may also provide GUI interface via which an administrator can access the information in the report.

This specification describes PCTM system that may allow a user application to receive services from different clouds . To allow this PCTM system may generate routing rules. The routing rules may specify for particular state variable values e.g. time bandwidth quality of service etc. which route is likely to provide the best worst latency the highest lowest cost the maximum minimum bandwidth the least number of errors etc. When PCTM system receives a request for service from a user application on user device cloud selection system may direct the user application to a particular cloud based on the rules the state variable values and cloud selection policies.

In this specification various preferred embodiments have been described with reference to the accompanying drawings. It will however be evident that various modifications and changes may be made thereto and additional embodiments may be implemented without departing from the broader scope of the invention as set forth in the claims that follow. The specification and drawings are accordingly to be regarded in an illustrative rather than restrictive sense.

In the above while a series of blocks have been described with regard to the processes illustrated in the order of the blocks may be modified in other implementations. In addition non dependent blocks may represent blocks that can be performed in parallel.

It will be apparent that aspects described herein may be implemented in many different forms of software firmware and hardware in the implementations illustrated in the figures. The actual software code or specialized control hardware used to implement aspects does not limit the invention. Thus the operation and behavior of the aspects were described without reference to the specific software code it being understood that software and control hardware can be designed to implement the aspects based on the description herein.

Further certain portions of the implementations have been described as logic that performs one or more functions. This logic may include hardware such as a processor a microprocessor an application specific integrated circuit or a field programmable gate array software or a combination of hardware and software. No element block or instruction used in the present application should be construed as critical or essential to the implementations described herein unless explicitly described as such. Also as used herein the articles a an and the are intended to include one or more items. Further the phrase based on is intended to mean based at least in part on unless explicitly stated otherwise.

