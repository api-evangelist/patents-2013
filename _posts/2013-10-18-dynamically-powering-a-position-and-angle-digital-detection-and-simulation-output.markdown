---

title: Dynamically powering a position and angle digital detection and simulation output
abstract: A position detection and simulation platform includes software configurable logic and programmable inputs and outputs to support software configuration only changes for use with a variety of position feedback devices including synchros, resolvers, linear variable differential transformers, and rotary variable differential transformers. Power to the software configurable outputs is dynamically controlled so that the power supply voltage presented to the outputs satisfies a minimum threshold above the amplitude of the output signal. Dynamic control is based on at least one of a digital representation of a signal to be output, an analog version of the signal to be output, or the signal being output.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09015013&OS=09015013&RS=09015013
owner: United Electronic Industries, Inc
number: 09015013
owner_city: Walpole
owner_country: US
publication_date: 20131018
---
This application is a continuation in part of U.S. patent application Ser. No. 12 143 797 filed Jun. 22 2008 which is incorporated by reference in its entirety.

The methods systems objects features and advantages of the present invention generally relate to transformer coupled position sensing and simulation thereof. In particular they relate to providing universal sensing control and simulation of synchros resolvers linear variable differential transformers LVDT and rotary variable differential transformers RVDT .

Converting angular rotation or linear displacement to an electrical signal may be performed by an AC transducer. Types of transducers include synchros resolvers and linear rotary variable differential transformers LVDTs RVDTs . They can be used in a variety of applications such as an inertial navigation reference unit gyro or compass an automatic direction finder ADF an omni range system distance measurement equipment cockpit indicators landing gear positioning and control various industrial applications motor control position detection machine tool control oil field exploration navigation flight simulation and many other relative position detection applications.

Synchros resolvers LVDTs and RVDTs have been used in a variety of military and commercial systems for many years because of the high degree of reliability when difficult environment conditions exist. The simplicity of operation when combined with superior reliability makes these non contact position sensors a very attractive component of industrial control operation simulation and the like. In an example a resolver or synchro in an automatic direction finder is used to provide an electrical signal that may drive an indicator. As an aircraft turns the amount of coupling in the transducer changes proportionally. There are many other examples of use of these relative position sensing technologies that populate the known art.

While synchros resolvers LVDTs and RVDTs output an electrical signal the output signal typically must be converted to a digital signal for processing and other operations associated with computerized motion sensing control simulation and the like. Digital converters are commonly configured with hardware that is tailored to meet voltage and frequency requirements associated with particular synchro resolver LVDT or RVDT implementation specifications. Hardware tailoring is commonly implemented through selection of certain combinations of electrical components that support the implementation specifications. However there are a wide variety of implementation specifications across even a single industry such as avionics. Therefore to offer products that can be sold to even a single customer in a single industry a converter supplier may have to offer a variety of differently tailored converters. Consequently each unique implementation requires a correspondingly uniquely tailored converter resulting in increases in converter ordering complexity service parts stocking installation and maintenance procedures and the like. Also while hardware tailored converters may facilitate digital conversion they cannot be used with different synchro resolver LVDT and or RVDT implementations. Therefore as new implementation requirements arise new hardware tailored converters must be designed tested and offered for sale thereby slowing down converter customer development cycles. Hardware tailored converters increase costs throughout the supply chain including manufacturers distributors integrators customers maintenance suppliers and the like. There are certain implementations that hardware tailored converters cannot support such as calibration and test. Because the hardware is tailored to a particular implementation specification determining a degree of calibration within the particular implementation specification cannot be achieved without changing the hardware such as using a dedicated calibration or test device.

In an example hardware tailoring may include using differential sensing circuits such as differential amplifiers to produce a measurable analog signal from the synchro resolver LVDT or RVDT. Signal amplification is quite common in these applications because without a measurable signal digital conversion is not possible. However a 4 wire implementation requires different sensing hardware than a 5 wire or a 6 wire implementation. Consequently even if frequencies and voltages are identical for each of the 4 5 and 6 wire implementations uniquely tailored differential sensing circuitry must be provided.

Reduction of power consumption is desirable for improving product reliability cooling and operational costs reduction in form factor among others. Devices and systems that are configured to provide high drive currents demand more power for output driver circuits. Power consumption in high current output drivers is a function of the supply voltage presented to the device so optimizing the supply voltage based on the output demand may provide a significant reduction in power dissipation of this portion of a system. Output drivers are known to be capable of providing high output current so long as a the supply voltage present exceeds the output signal voltage by at least a minimum threshold that is specified by the driver manufacturer. Therefore dynamic signal based power delivery may ensure robust high current output capabilities while mitigating heat buildup in the vicinity of the output drivers. The following disclosure describes methods and systems for delivering supply voltage s to amplifier drivers of software controllable outputs that are described herein wherein the supply voltages maintain the minimum threshold while minimizing power consumption of the output drivers.

In an aspect of the methods and systems described herein a method of dynamically powering a software configurable output may include receiving a representation of a signal determining based on a software configurable parameter of the software configurable output an expected amplitude of a driven output of the signal adjusting a power supply voltage based on the expected amplitude and providing the power supply voltage to a power supply input of a signal driver for generating the driven output. In the method the software configurable outputs are suitable for providing at least one of rotor excitation signals and simulated stator output signals. Alternatively in the method adjusting a power supply voltage comprises increasing the power supply voltage if the expected amplitude is greater than a current amplitude. Also adjusting a power supply voltage comprises decreasing the power supply voltage if the expected amplitude is less than a current amplitude. In the method receiving a representation of a signal comprises receiving digital waveform data and or receiving output control data. Note that the output control data affects one or more of gain phase shift and offset of the driven output.

In another aspect of the methods and systems described herein a method of signal based powering of a flight simulator signal driver may include providing a flight simulation signal to a signal driver for generating a flight simulator output and controlling a supply voltage for powering the signal driver so that the supply voltage tracks the simulation signal wherein the supply voltage exceeds an amplitude of the flight simulator output by at least a power supply to signal threshold. In the method controlling a supply voltage comprises generating feedback to a power supply based on the flight simulation signal. Also the power supply is a DC DC power converter. Note that the flight simulator output comprises a simulated stator signal. In the method controlling a supply voltage comprises determining based on a change in the flight simulation signal an expected amplitude of the flight simulator output and adjusting a power supply voltage based on the expected amplitude. Alternatively controlling a supply voltage is based on output control data that affects one or more of gain phase shift and offset of the flight simulator output.

In yet another aspect of the methods and systems described herein a system for dynamically determining a software configurable output power supply feedback signal may include a processor accessible memory for storing digital waveform data for presenting to a software configurable output a power supply feedback generation engine for generating a digital representation of the power supply feedback signal based on the digital waveform data a phase adjust facility for providing the waveform data to the feedback generation engine wherein the waveform data is provided to the feedback generation engine shifted in time relative to presenting corresponding waveform data to the software configurable output and a digital to analog converter for converting the digital representation of the power supply feedback signal to a signal that is suitable for controlling a power supply output voltage of an adjustable power supply. In the system the software configurable outputs are suitable for providing at least one of rotor excitation signals and simulated stator output signals. Also in the system the power supply feedback generation engine generates a digital representation of the feedback signal that indicates to the adjustable power supply to increase the power supply output voltage if the waveform data indicates an increase in amplitude of the software configurable output. The power supply feedback generation engine may also generate a digital representation of the feedback signal that indicates to the adjustable power supply to decrease the power supply output voltage if the waveform data indicates an decrease in amplitude of the software configurable output. In the system the adjustable power supply is a DC DC power converter. Also in the system the software configurable output is suitable for providing at least one of rotor excitation signals and simulated stator output signals. the system may further include a software configurable output feedback facility for providing a digital representation of the software configurable output to the power supply feedback generation engine.

With the applications of synchros resolvers LVDTs and RVDTs covering a wide range of industries uses operating modes tracking rates environments and the like a wide range of these devices are available to support various implementation specifications. Features configurations and operating modes of these devices must support the application needs for avionics simulation training test measurement industrial automation motor control robotics navigation and the like. Similarly converters that facilitate digital acquisition control processing and management of this wide range of devices in these highly varying applications may require a rich and broad set of features capabilities interfaces and the like. Therefore a digital position detection and simulation platform is presented herein.

The digital position detection and simulation platform may support a wide range of features configurations implementation specifications device interfaces and the like in a programmable environment that offers flexible configuration. The flexibility of the programmable environment of the platform may allow the platform to be applied to a wide variety of applications in industries such as avionics aerospace industrial control robotics test and measurement simulation and the like. Unlike hardware tailored systems that have limited applicability the digital position detection and simulation platform may be configured through software to operate in a wide variety of applications including flight control and monitoring flight simulation shipboard navigation oil field exploration motor control machine tool control antenna positioning fire control and the like.

The digital position detection and simulation platform may include configurable and programmable logic to support the wide range of features. The logic may be programmable through a software interface based around a framework that may provide a comprehensive yet easy to use programming interface API for computer operating systems such as Windows Linux and various real time operating systems. The configurable and programmable logic may be implemented with commercial off the shelf components such as Field Programmable Gate Arrays FPGA analog to digital converters and the like.

The digital position detection and simulation platform may include programmable interface features that facilitate supporting a wide range of synchro and resolver input configurations. Exemplary interface features may include supporting S wire synchro and 4 wire resolver excitation and input frequencies up to 4000 Hz or more signal input up to 28 Vrms or higher and the like. The programmable interface features may also support LVDT RVDT input configuration features such as for example 4 5 and 6 wire configurations up to 28 Vrms or greater signal input up to 5000 Hz or greater excitation frequency and the like.

The digital position detection and simulation platform may include programmable LVDT RVDT output or simulation features that support 2 3 and 4 wire interfaces up to 10 Vrms output voltage high current drive of 50 mA and the like. The platform may support programmable synchro resolver output or simulation features such as 3 wire and 4 wire configurations up to 28 Vrms and other features.

The example interface and output features described herein do not specifically limit the range of embodiments. Instead they represent sample features of an exemplary embodiment.

In an aspect of the invention a position feedback interface and simulator system includes a plurality of software configurable inputs suitable for receiving one or more of stator output signals and rotor excitation signals a plurality of software configurable input processing circuits for converting the signals into digital samples and for determining frequency characteristics of the signals a processor accessible memory for storing the digital samples a plurality of software configurable outputs suitable for providing at least one of rotor excitation signals and simulated stator output signals based on at least a portion of the frequency characteristics a processor accessible memory for storing digital waveform data and a plurality of software configurable conversion circuits for converting waveform data to an electrical signal and for providing the electrical signal to at least one of the plurality of software configurable outputs.

In the aspect the processor accessible memory for storing digital waveform data is a FIFO. The aspect further includes a processor accessible memory for storing waveform conversion and output control data. The conversion and output control data affects one or more of gain phase shift and offset associated with the at least one of the plurality of software configurable outputs.

The aspect further includes a software framework for facilitating configuring the inputs the outputs the input processing circuits and at least one of storing digital waveform data and retrieving acquired digital samples.

The aspect further includes a processor signaling function for generating a signal based on an assessment of the frequency characteristics. In the aspect an assessment of the frequency characteristics includes comparing a measurement of acceleration of at least one of the signals to an acceleration warning threshold.

In the aspect determining frequency characteristics includes an arctangent recovery calculation. The arctangent recovery calculation includes a base polynomial that is adjusted by a recovery factor that includes a recovery value and an operation that are determined based on a relationship of sine and cosine frequency characteristics wherein the recovery value is selected from the set consisting of 0 PI 2 1 PI 2 2 PI 2 and 3 PI 2 and wherein the operation is selected from the set consisting of subtracting the base polynomial from the recovery value and adding the base polynomial to the recovery value.

In the aspect the input processing circuits facilitate measuring an acceleration of at least one of the signals.

In another aspect of the invention a method of stator signal simulation includes providing an angle and position detection platform having a plurality of identical channels programming a first channel to receive a plurality of stator signals converting the stator signals to digital data based on a first excitation signal storing the digital data in a first processor accessible memory associated with the platform programming a second channel to simulate a plurality of stator signals wherein programming includes storing digital waveform data in a second processor accessible memory and transmitting simulated stator signals using the data stored in the second memory based on a second excitation signal.

In the aspect the platform derives at least one of the first excitation signal and the second excitation signal from a reference clock associated with the platform.

The aspect further includes receiving external excitation and deriving at least one of the first excitation signal and the second excitation signal therefrom. In the aspect one of the first excitation signal and the second excitation signal is derived from the reference clock and the other of the first excitation signal and the second excitation signal is derived from the eternal excitation.

In the aspect the simulated stator signals can be adjusted at least once per simulated signal cycle. The adjustment includes gain offset and phase. The simulated stator signals are adjusted contemporaneously with a zero crossing of the second excitation signal.

In yet another aspect of the invention a method of flight simulation includes providing a position detection and simulation platform comprising a plurality of functionally identical channels exciting at least two of the plurality of channels to simulate stator output signals wherein the at least two of the plurality of channels are configured to generate at least one of different frequency phase delay gain and offset communicating the simulated signals to a flight simulator user interface and controlling at least two flight indicators based on the signals wherein the at least two flight indicators indicate different flight functions.

In the aspect exciting includes generating excitation by the platform. In the aspect exciting includes receiving excitation into the platform.

In another aspect of the invention a method of multi resolution position detection includes providing a position detection and simulation platform receiving an excitation signal and stator signals associated with a first rotor detecting a first rotor position using the received signals transmitting an excitation signal to a second rotor receiving signals into the platform from stators associated with the first and second rotors in response to the second rotor excitation and detecting a second rotor position based on the received signals.

In another aspect of the invention a method of using a platform in two different applications without changing platform hardware includes providing a position detection platform using the platform to receive and detect a position of a first position feedback device based on a software configuration of the platform and using the platform to receive and detect a position of a second position feedback device based on an alternate software configuration of the platform. In the aspect the first feedback device is selected from the set consisting of a resolver and a synchro. In the aspect the second feedback device is selected from the set consisting of an LVDT and an RVDT. In the aspect the first feedback device is selected from the set consisting of an LVDT and an RVDT. In the aspect the second feedback device is selected form the set consisting of a resolver and a synchro. In the aspect the first device is a synchro and the second device is a resolver. Alternatively in the aspect the first device is a resolver and the second device is a synchro.

In an aspect of the invention simulation using excitation includes sampling excitation counting a number of reference clocks for one complete excitation cycle generating a simulation output clock therefrom measuring drift in the excitation adjusting the simulated output clock based on the measured drift at least once per output cycle.

These and other systems methods objects features and advantages of the present invention will be apparent to those skilled in the art from the following detailed description of the preferred embodiment and the drawings. All documents mentioned herein are hereby incorporated in their entirety by reference.

A position detection interface and control platform may be embodied in a layer structure that may conform to a base layer of an analog input family of products. The platform may be embodied as an attachment to the base layer. The platform may include a plurality of channels wherein a channel has associated with it one or more input stages one or more output stages configured so that each channel may function as an isolated multifunctional data acquisition system.

The platform may be implemented as a layer for LVDT RVDT type applications and may include a plurality of isolated channels with at least up to a 40 volt input range a plurality of high resolution analog to digital converters ADCs operating independently over a wide frequency range including up to at least 330 KHz input processing logic that automatically calculates position at a rate equal to two times an excitation frequency a FIFO for storing data such as rotor position and the like and at least one analog output driven by a high precision digital to analog converter DAC operating over a wide frequency range including up to at least 250 KHz that is capable of outputting pre loaded waveforms with various types of time and phase shift with dynamic offset and gain adjustment. When more than one output is embodied pairs of outputs may be linked to form a differential pair of outputs thereby quadrupling at least the output voltage range.

The platform may be implemented as a layer for synchro resolver type applications and may include a plurality of isolated channels with up to a 40 volt input range a plurality of high resolution analog to digital converters ADCs operating independently over a wide frequency range including up to at least 330 KHz input logic that may automatically calculate synchro resolver angle at a rate equal to two times an excitation frequency associated with the synchro resolver a FIFO for storing data such as input position and the like and at least one analog output driven by a high precision digital to analog converter DAC operating over a wide frequency range including up to at least 250 KHz that is capable of outputting pre loaded waveforms with various types of time and phase shift plus dynamic offset and gain adjustment.

The digital position detection and simulation platform and associated elements may be implemented in digital and analog circuits that take advantage of high precision circuitry to accomplish a high degree of isolation similar to galvanic isolation among all inputs and outputs and between any input and digital circuitry. In embodiments the digital position detection and simulation platform may provide a high degree of synchro resolver accuracy using commercial off the shelf components such as standard commercial grade devices. In an example 2.6 arc minutes of accuracy is readily achievable. In fact accuracies that are ten times greater than this example are possible with the platform. Such greater accuracies may be achieved when digital sample averaging is used. To support a wide variety of features functionality programmability expandability and general flexibility the platform may be implemented using programmable logic devices. Programmable logic devices may also facilitate providing the features and etceteras in performance grades that support real time functionality for input detection internal excitation simulation and the like. Software configurability may be provided by a framework of software such as one or more APIs that support various standard and real time operating systems e.g. Windows Linux QNX RTX RT Linux and the like . The framework may facilitate application development and deployment in environments such as LabVIEW MATLAB Simulink DASYLab Active X and OPC servers. The combination of programmable logic and software framework may support highly parameterized operation and configuration that may support user configurability through preconfigured application packages library based configuration options default parameters for a wide variety of industry applications and the like. In addition to setting parameters to control functionality performance and operation of the platform the platform may facilitate self adjusting parameters based on feedback such as from logical processing of input of signals. The platform may be available in a variety of form factors including a form factor suitable for use in a cube product a form factor suitable for use in a rack such as the RACKtangle chassis and any other form supporting electronic circuitry. The platform may confirm with industry standard backplanes and bus architectures. The platform may enable expandability such as multiple channels per module multiple modules per chassis and the like.

The Referring to an overview block diagram of the digital position detection and simulation platform the platform may include a digital position detection and simulation facility a base layer through which the digital position detection and simulation facility interfaces with a control bus a controller that communicates with a computer that hosts framework software . The framework software may include or may communicate through a user interface to users for the purposes of digital position detection and simulation platform configuration programming operation monitoring and the like. The platform may also include uses in various markets that may be associated with various position detection applications . The digital position detection and simulation facility may interface to the various market applications through a programmable and versatile interface . Software may access application specification to ensure the position detection and simulation facility is properly configured for the application .

The base layer may provide bus interface features that may support interfacing the digital position detection and simulation facility to other devices on the bus such as the controller . The framework software which may be hosted by a computer such as a personal computer operating a Windows or similar operating system may support configuring all programmable and configurable aspects of the digital position detection and simulation platform such as through an application programming interface API and may provide communication to the digital position detection and simulation facility through the controller . Alternatively the computer may interface through a high speed network such as an Ethernet network with appropriate interface to the bus . The framework software may support popular operating systems such as Windows Linux real time operating systems such as QNX RTX RT Linux and the like. The framework may facilitate application development in LabVIEW MATLAB Simulink DASYLab and other application development environments that support ActiveX or OPC servers.

Markets may include aeronautics avionics flight control flight simulation industrial control robotics navigation automated production oil field exploration and operation and any market that requires any of measurement control simulation and test of motion electronics. Markets may be associated with a wide variety of position detection and or simulation applications such as jet engine control cockpit indicators landing gear positioning and control flap actuators rudder control ailerons automatic direction finders cockpit simulation inertial referencing radar robotics control oil well operation motor control motor commutation machine tool control process control antenna positioning data acquisition fire control production test calibration and the like.

The markets and applications may be served by the digital position detection and simulation platform by accessing that application specifications for a particular application or application market combination such as by the software and configuring the features performance interfaces functions and logic of the position detection and simulation facility accordingly.

The digital position detection and simulation platform may receive signals from an LVDT RVDT such as through input SA or SB. Each input may include individual programmable input gain that may be set individually through software in a software accessible input configuration register. Input gain may be programmed for a variety of signal gain values such as unit gain 2 gain 5 gain 10 gain other gain values based on the application specification and the like. The input gain may facilitate detecting LVDT RVDT input signals that otherwise may be too small in amplitude to be properly sampled. In an example the input gain may be set to 5 for an input signal of amplitude 0.5 Vrms resulting in a gain adjusted input of 2.5 Vrms. The gain adjusted input may be sampled by an analog to digital converter such as a successive approximation register SAR converter or other type of converter which may be controlled through software. Software controls for the analog to digital converter may include adjustments to calibration values for offset and gain . In an example gain may range from a value of 0 to 2 substantially linearly throughout the range based on the value written to a gain register. Analog to digital converter may receive a sample clock that may be based on a reference clock an internally generated clock or an externally provided clock. Analog to digital converter sends converted digital data to at least a zero cross detection facility and a moving sum facility .

Inputs may be sampled at a high rate relative to other rates present in a configuration. Inputs may be sampled at 150 KHz or higher whereas excitation inputs and therefore position and motion sensing signals may be in the range of 4 KHz. The high sample rate may result in very precise sampling of the inputs which may facilitate accurate digital reproduction of the input waveform. In this way the digitized data that represents the analog input can be analyzed to detect important features such as zero crossing signal acceleration phase differences between inputs and the like. Unlike systems that are based on the Nyquist Shannon sampling theorem there is no need for the sampling to have any specific relationship to the signal therefore a wide variety of input frequencies can be supported by a common set of hardware components. Common mode noise and disturbances can readily be detected and eliminated in the digital data by comparing a plurality of inputs. By performing various digital waveform functions addition subtraction time shifting and the like noise and disturbances that affect at least some of the plurality of inputs can be detected and removed. Additionally due to the very high sample rate filtering the signal well above its cycle rate e.g. 4 KHz results in a sampled signal that eliminates high frequency components from the sampled digital data. Therefore signal noise near the sample rate e.g. 150 KHz is filtered out before the signal is sampled. Using these and other well known techniques signals received from rotors stators excitation sources and other signals related to LVDT RVDT applications and simulations are digitally stored and processed by the platform resulting in very high accuracy position detection and simulation reproduction.

A digital sample of the gain adjusted input signal is evaluated by the zero cross detection facility . The zero cross detection facility may include several software programmable configuration options such as zero level enable zero cross detection number of samples to average for the purposes of detecting the input signal had crossed the programmed zero level direction of zero cross detection zero cross source input or output signal enable auto zero functionality input signal to detect zero crossing and other options associated with detecting a zero crossing. Zero cross facility may provide a zero signal indicative of a when the evaluated signal crosses the programmed zero level. The zero signal may facilitate notifying other elements of the platform of a zero crossing event. A zero cross count facility may determine information related to one or more zero crossing events. In an example the zero cross count facility may track an interval between zero crossing events. The interval between zero crossing events may be based on a reference clock such as a 33 MHz base clock and the interval may be a count of the reference clocks between zero crossings.

The digital sample provided by the analog to digital converter facility may be simultaneously or contemporaneously applied to moving sum facility wherein a running average of samples may be calculated. The running average of samples may be provided to an ALU for computing various mathematical functions related to the inputs.

ALU may receive sampled input data from ALU A and ALU B as well as a separate running average for input A and B from the moving sum facility . The ALU may perform computations of at least one of the inputs and the computations may be based on a software programmable option or command that controls at least a portion of the ALU . In an example the ALU may perform functions such as Sa Sb Sa Sb Sa Sb Sa Se and the like wherein Sa is a value related to input A Sb is a value related to input B and Se is a programmed value. The resultant of the ALU operation may be passed to a user offset function where a software programmed offset value may be added to the resultant. The offset resultant may then be passed to a user gain function where the offset resultant can be adjusted by a software programmed user gain value. In an example the software programmed offset value may be a twos compliment 24 bit value and the software programmed gain value may be a 24 bit binary multiplier. Other values other types of values and gain and offset functions may alternatively be provided to implement functions associated with position detection. Also the offset function and gain function may be optional. One optional embodiment may include programming the offset function for no offset and or the gain function for no gain thereby making the gain function and or the offset function optionally applied during position detection or simulation.

Input processing associated with the digital position detection and simulation platform may include passing the offset and gain adjusted resultant to a position detection function an averaging function or both. Additionally because user offset and user gain are optional ALU resultant may be provided to the position detection function the averaging function or both.

The averaging function may facilitate averaging decimating samples by adding them together and then shifting the added samples to perform a decimating function. The averaging function may generate resultant data that may be stored at least temporarily in a FIFO memory . The FIFO memory may include sample time stamp data raw sample value data calibrated value data averaged position Sa and or Sb raw ADC output data and the like. The FIFO memory may be accessed by a host computer or controller over the bus through the base layer if needed.

Position detection function may process data received from one or more of the ALU user offset user gain average function and FIFO to determine status of the position of the LVDT RVDT. Determining status may include comparing received data to one or more thresholds such as a maximum position a minimum position and the like. Each of the thresholds or comparison values may be software programmable. Additionally the position detection function may be software programmed to select the inputs to process the data types being provided in the inputs and the like. In an example software programmability of the position detection function may be beneficial in that detecting a position for raw ALU data values may involve different processing than detecting a position of user calibrated offset and or gain adjusted data.

Position detection function may signal input interrupt function to generate an interrupt signal that may be detectable through the bus by software running on the controller and or a host computer. Software processing of the interrupt signal may include reading data from the FIFO memory adjusting values of one or more software programmable options features and registers of the digital position detection and simulation platform and the like. Interrupts may also be generated based on status such as calibrated data being ready in the FIFO the FIFO being empty above a threshold FIFO full position above a maximum or other reference position value position below a minimum or other low reference value within a range and the like.

Referring to an input data flow chart for an embodiment of the input functionality described above and depicted in LVDT RVDT data flow may include receiving an LVDT RVDT output signal and in step applying an input gain to the received signal. Following step step may result in the gain adjusted received input signal being digitally sampled. In step a moving average of the digitally sampled input signal may be calculated. Step which may be performed in parallel with step may result in detecting a zero crossing of the LVDT RVDT output signal. After steps and step may perform various ALU functions and optionally may apply a user offset and gain function to the ALU resultant. The resultant is further processed at step where it may be averaged and or decimated based on requirements. In step the data processed in step may be stored in a FIFO or similar memory from which hit may be accessed and processed as in step to detect the position of the LVDT RVDT system relative to one or more thresholds. Also in step one or more interrupts may be generated based on computations related to the position the FIFO status zero crossing and the like. The LVDT RVDT input data flow may conclude with a variety of data associated with the data flow being retrieved from the FIFO at step .

The digital position detection and simulation platform may receive signals from a synchro or resolver such as through input A B C and D. Each input may include individual programmable input gain that may be set individually through software in a software accessible input configuration register. Input gain may be programmed for a variety of signal gain values such as unit gain 2 gain 5 gain 10 gain other gain values based on the application specification and the like. The input gain may facilitate detecting synchro or resolver input signals that otherwise may be too small in amplitude to be properly sampled. In an example the input gain may be set to 5 for an input signal of amplitude 0.5 Vrms resulting in a gain adjusted input of 2.5 Vrms. The gain adjusted input may be sampled by an analog to digital converter such as a successive approximation register SAR converter or other type of converter which may be controlled through software. Software controls for the analog to digital converter may include adjustments to calibration values for offset and gain . In an example gain may range from a value of 0 to 2 substantially linearly throughout the range based on the value written to a gain register. Analog to digital converter may receive a sample clock that may be based on a reference clock an internally generated clock or an externally provided clock. Analog to digital converters for each of the inputs send converted digital samples to at least a zero cross detection facility and a moving sum facility .

Synchro and resolver inputs may be sampled at a high rate relative to other rates present in a configuration. Inputs may be sampled at 150 KHz or higher whereas excitation inputs and therefore position and motion sensing signals may be in the range of 4 KHz. The high sample rate may result in very precise sampling of the inputs which may facilitate accurate digital reproduction of the input waveform. In this way the digitized data that represents the analog input can be analyzed to detect important features such as zero crossing signal acceleration phase differences between inputs and the like. Unlike systems that are based on the Nyquist Shannon sampling theorem there is no need for the sampling to have any specific relationship to the signal therefore a wide variety of input frequencies can be supported by a common set of hardware components. Common mode noise and disturbances can readily be detected and eliminated in the digital data by comparing a plurality of inputs. By performing various digital waveform functions addition subtraction time shifting and the like noise and disturbances that affect at least some of the plurality of inputs can be detected and removed. Additionally due to the very high sample rate filtering the signal well above its cycle rate e.g. 4 KHz results in a sampled signal that eliminates high frequency components from the sampled digital data. Therefore signal noise near the sample rate e.g. 150 KHz is filtered out before the signal is sampled. Using these and other well known techniques signals received from rotors stators excitation sources and other signals related to synchro resolver applications and simulations are digitally stored and processed by the platform resulting in very high accuracy position detection and simulation reproduction.

A digital sample of the gain adjusted input signal is evaluated by the zero cross detection facility . The zero cross detection facility may include several software programmable configuration options such as zero level enable zero cross detection number of samples to average for the purposes of detecting the input signal had crossed the programmed zero level direction of zero cross detection zero cross source input or output signal enable auto zero functionality input signal A B C D to detect zero crossing and other options associated with detecting a zero crossing. Zero cross facility may provide a zero signal indicative of a when the evaluated signal crosses the programmed zero level. The zero signal may facilitate notifying other elements of the platform of a zero crossing event. A zero cross count facility may determine information related to one or more zero crossing events. In an example the zero cross count facility may track an interval between zero crossing events. The interval between zero crossing events may be based on a reference clock such as a 33 MHz base clock and the interval may be a count of the reference clocks between zero crossings.

The digital samples from each of the analog to digital converter facilities may also be applied to a moving sum facility wherein a running average of the digital samples may be calculated. Each sample from each of the inputs may be included in the running average. A phase delay function may provide control input to the moving sum facility to account for phase differences among the inputs. In an example a phase difference between an excitation signal and stator output signals may be measured by differences in the digital samples of each signal. The resulting difference may be used to determine a control or adjustment to align the samples that are summed by the moving sum facility . The running average of samples may be provided to a tangent function for computing various angular functions related to the inputs.

Tangent function may receive sampled input data from each of the analog to digital converters as well as the running average from the moving sum facility . The tangent function may perform computations of at least the inputs and the computations may be based on a software programmable option or command that controls at least a portion of the tangent function . In an example the tangent function may calculate a tangent depending on the current angle determined from the input A B C and D. The resultant of the tangent function may be passed to an angle restore function where programmed logic may restore the angle and calculate synchro resolver acceleration.

Synchro angle restore function may include an angle computation that may begin with a cosine computation such as for 240 degrees phase and 0 degrees phase conditions. After cosine conversion additional angle related calculations may be performed. Computations may be executed using an all integer arctangent algorithm that allows accurate angle position detection based on integer only arithmetic. In an embodiment calculations may include the following polynomial conversion that represents the basic function ATAN ABS SIN COS 

Although the selected polynomial may only directly recover angles in the range of 0 degrees to 45 degrees it can be used as a base for very efficient and fast computations of other angles. An arctangent recovery method that uses the selected polynomial method may provide unique benefits in that it facilitates direct calculation of any angle by extending the use of the base polynomial to a full 360 degrees without requiring lookup tables that require greater processing speed and or much more data storage. The following chart shows how the base polynomial is applied to calculate different angles by applying an appropriate recovery factor to the polynomial. The recovery factor applied to the polynomial is based at least on conditions associated with the angle. In the chart below the conditions include only the sign of the sine Sin and cosine Cos and their relative absolute values. By evaluating these simple conditions the arctangent recovery algorithm that comprises the base polynomial and a recovery factor can be quickly computed. In embodiments the base polynomial can be calculated independently of the recovery factor conditions and the resultant of the base polynomial calculated can be adjusted by the recovery factor.

In embodiments the computations to recover the angle using angle restore function may provide a low error angle. In an example maximum error of the recovered angle is approximately 4 arcsec when computed using a 16 bit scaling coefficient and 32 bit arithmetic. In another example maximum error may be approximately 1 arcmin using a 13 bit scaling coefficient and 24 bit arithmetic.

The tangent function may generate resultant data that may be stored at least temporarily in a FIFO memory . The FIFO memory may include sample time stamp data raw sample value data calibrated value data averaged position Sa Sb Sc Sd raw ADC output data and the like. The FIFO memory may be accessed by a host computer or controller over the bus through the base layer if needed.

Interrupt function may process data received from one or more of the tangent facility restore angle function and FIFO to determine status of the angular position of the synchro and or resolver. Determining status may include comparing received data to one or more thresholds such as a maximum position a minimum position maximum acceleration loss of traction and the like. Each of the thresholds or comparison values may be software programmable. Additionally the interrupt function may be software programmed to select the inputs to process the data types being provided in the inputs and the like. In an example software programmability of the interrupt function may be beneficial in that detecting a position for raw tangent function data values may involve different processing than detecting acceleration. Because acceleration is continuously being measured not only can it be a condition for status related actions but the measurement may facilitate anticipating loss of friction and thereby provide feedback to a control system that may take action to prevent loss of traction.

Input interrupt function to generate an interrupt signal that may be detectable through the bus by software running on the controller and or a host computer. Software processing of the interrupt signal may include reading data from the FIFO memory adjusting values of one or more software programmable options features and registers of the digital position detection and simulation platform and the like. Interrupts may also be generated based on status such as for example calibrated data being ready in the FIFO the FIFO being empty above a threshold FIFO full position above a maximum or other reference position value acceleration above a maximum position below a minimum or other low reference value within a range and the like.

Referring to an input data flow chart for an embodiment of the input functionality described above and depicted in synchro resolver data flow may include receiving synchro resolver output signals in step and applying an input gain to each received signal. Following step step may result in the gain adjusted received input signals being digitally sampled. In step a moving average of all of the digitally sampled input signals may be calculated. The moving average calculation in step may include a phase delay component to facilitate adjusting for phase differences among the digitally sampled inputs. Step which may be performed in parallel with step may result in detecting a zero crossing of the synchro resolver signals. After steps and step may generate a tangent resultant based on a determined angle or angular position of the inputs. The resultant is further processed at step where the determined angle may be restored and an acceleration of the inputs may be determined. In step the data processed in step may be stored in a FIFO or similar memory from which it may be accessed and processed as in step to detect a position or acceleration of the synchro resolver relative to one or more thresholds. Also in step one or more interrupts may be generated based on computations related to the position the FIFO status zero crossing acceleration and the like. The synchro resolver input data flow may conclude with a variety of data associated with the data flow being retrieved from the FIFO at step .

The platform may include various input configurations as described in for receiving signals associated with synchros resolvers LVDTs and RVDTs in operational test simulation or combination modes. The platform may also include one or more output configurations for driving a plurality of output signals including driving simulation signals based on the application objectives. depicts an exemplary output stage of the platform. The output stage may support programmability to adjust the operation functions features performance and logical configuration of elements in and outputs provided by the output stage . The output stage may be programmed and or configured using software such as software .

Output stage may provide data to one or more of outputs based on one or more clock sources. The output stage may also process the one or more clock sources such as to generate clocks that have configurable relative phase relationships for two or more of the outputs . Each output generated by the output stage may be independently clocked groups of outputs may be commonly clocked each output may be clocked based off of a common clock source that may be processed differently for each output and other combinations of clock sources processed clocks externally clocked sources and the like may be applied to one or more outputs. Output clock sources may include a reference sources such as a locally generated 24 MHz or 33 MHz clock an externally provided clock a clock derived from one or more input stage signals from or including Zero and or Count and the like. A derived clock may be an automatically detected and processed to divide the 24 or 33 MHz reference clock based on the period measurement represented by the Zero and or Count signals that are provided by the analog input subsystem. The derived clock may be produced by a clock derivative facility such as a phase lock loop type circuit. An output clock may also be software generated. Software executing on a processor or controller may cause the output clock to change state directly under software control. In this way output signals may be clocked based on a variety of clock sources relationships and the like to meet application specifications and needs.

A signal for each output may be generated by a Digital to Analog Converter DAC . In an exemplary embodiment quad DAC AD5664 from Analog Devices Corporation may provide analog signals for up to four outputs . Each output may include dedicated software configurable offset and gain registers depicted by element CALIBRATE in . In an example an offset register associated with an output may be programmed and used as a 16 bit twos compliment integer. In the example a gain register may be programmed and used as a 16 bit integer that facilitates adjusting output gain from approximately 0 to approximately 2. In this example when the gain register is programmed with a value of 0 the gain is approximately 0 and the output signal will be approximately 0. Further in this example when the gain register is programmed with 0x7FFF or optionally 0x8000 the gain is approximately 1 or unity gain. When the gain register is programmed to 0xFFFF the gain is approximately 2 or twice what it is when the gain register is programmed with 0x7FFF or 0x8000.

Continuing to refer to DAC engine provides output configuration and control features such as a state machine that may check for an over under condition against a valid range for value programmed into the calibration offset and gain registers . When an over condition is detected the gain or offset registers provide 0xFFFF to the DAC and when an under condition is detected the gain or offset registers provide a 0x0000 value. This may ensure that the DAC is not improperly operated which may cause damage to the device damage to a connected device distorted output signals and other undesired defects and or errors such as phase reversion. This results in a more stable and reliably operating system under unexpected conditions. Additionally the platform may include DAC power consumption circuits that provide a signal when a DAC power consumption exceeds a threshold. In embodiments a circuit that may provide monitoring and threshold signaling includes a series resistor in the DAC power line that is paralleled with an LED or optocoupler that transmits light when the current draw of the DAC generates a voltage across the series resistor that exceeds the turn on voltage for the LED optocoupler. The LED output can be monitored by an optical sensor to generate a logic signal that can be used to generate an interrupt.

The output stage may be configured so that two of the outputs may be linked to provide an output signal that has a maximum voltage range that is twice that of a single output e.g. a double span differential output . In this way the output stage offers performance flexibility and features that may be needed to comply with any of a synchro resolver LVDT RVDT or simulation application. By connecting two outputs in series the resulting linked output can generate voltages twice that of either of the two linked outputs if operated individually. In an example the output stage may include four outputs 0 1 2 3. In the example outputs 0 1 and 2 3 may be linked. In addition to providing features to facilitate linking outputs the output stage may include alternate gain registers that may provide gain control to two or more outputs . In an embodiment that includes one or more of the alternate gain registers programming the alternate gain registers to 0x8000 will result in the alternate gain register effectively being disabled by providing unity gain to the two associated outputs .

Output DACs may receive digital data to be converted from a variety of sources associated with the output stage including without limitation a direct write register a direct output register an output FIFO a waveform generation facility and various combinations of these sources. There may be one or more than one of each of the aforementioned digital data sources for each of the outputs . Any of the digital data sources may be shared among two or more of the DACs . The direct write register s may facilitate providing a digital value to each of the DACs . The direct write register may facilitate providing the data simultaneously to each DAC . In an example the direct write registers may be 32 bit registers. Bits through of the register may be configured to be provided to each of the DACs for conversion to an analog output. Bits through may be transferred to each DAC simultaneously when bit is written to a logical value of 1. In this way bit may be used as a signal to update all of the DACs . The direct output register may allow software programming of a digital value that is provided directly to the DAC for conversion to an analog signal. In an embodiment the direct output register is a 22 bit register.

Output FIFO may temporarily store data that may affect the output . The data temporarily stored in the FIFO may include digital data for conversion to an analog signal simulation commands and the like. Data in the FIFO may be sequenced out to the DAC based on a FIFO clock that is provided by a FIFO Clock facility . The FIFO clock facility may provide a clock to the FIFO that is derived from one or more inputs that may include an internal reference clock an externally supplied clock the signals Zero and Count . The FIFO clock facility may be configured by software that may be used to select the clock source the mode of generating the FIFO clock and the like. The FIFO may alternatively be clocked by using software to access a FIFO clock register. In an example the internal reference clock may be a derivative of a 24 MHz or a 33 MHz clock reference available to various elements of the platform . The externally supplied clock that is input to the FIFO clock facility may be received by the platform through a different interface connection than the externally supplied clock that is input to the clock derivative facility . The FIFO may operate as a first in first out memory. In an example the FIFO may include 256 memory locations. The FIFO clock and the DAC clock may be synchronized so that data stored in the FIFO is delivered to the direct output register in proper phase with the DAC clock so that the DAC converts a new FIFO data value with each DAC clock event.

In embodiments the FIFO may include a plurality of separate channels that may be separately clocked. The separate channels may include a channel for waveform data and a channel for conversion control data. Conversion control data may include gain control phase control offset control and the like. While the waveform data channel may be clocked at a rate that provides an accurate representation of a simulation or excitation waveform the control data channel may be clocked at a different rate such as a rate equal to a single cycle of the desired signal. In this way control of the conversion by the conversion data can be adjusted as desired independently of or synchronized with the waveform data FIFO. In an example offset control data in a conversion control data FIFO channel may be changed at the start of an output waveform cycle. The offset change may be synchronized with the output waveform cycle so that the offset change occurs when the output waveform is at a zero voltage output thereby allowing the offset to be changed without inappropriately disrupting the generated waveform. Alternatively a plurality of FIFOs may be used to provide waveform data and control. Waveform data may be accessed in one of the plurality of FIFOs and control data may be accessed in another of the plurality of FIFOs . Each FIFO may be separately clocked as described above for separately clocking channels of a FIFO.

The waveform generation facility may facilitate providing pre loaded waveforms for digitization and output. The pre loaded waveforms may be used to generate outputs for linked outputs as herein described. Any two sets of linked outputs e.g. linked outputs 0 1 and 2 3 may have a relative phase offset. The relative phase offset may be derived from a phase adjust facility and may be represented as an index in the pre loaded waveform. Additionally certain configurations can begin sequencing the pre loaded waveform from the index based on an event such as an input signal zero crossing event. Software may facilitate configuring the waveform generation facility to support indexing time delay combinations of indexing and time delay and the like. In an example of combining indexing and time delay a pre loaded waveform may hold 256 samples and time delay may be configurable in 1 uS increments. The phase adjust facility may apply a received or specified index offset of 6 samples and a time delay of 14 us so that the waveform cycle may begin a total of 6 sample clocks plus 14 us after an excitation input zero crossing is detected. The waveform generation facility may be clocked by the clock derivative facility as herein described. Clock sources that may be used to provide a clock to the waveform generation facility may include software access 24 MHz or 33 MHz a derivation of 24 MHz or 33 MHz an externally provides clock an auto detected clock and the like. In an example of auto detected clock operation each zero crossing event on an input to the platform may cause the waveform to be restarted at its index.

The waveform generation facility and the FIFO may be operated in a coordinated manner such as during simulation operation. When operated in a coordinated manner waveform generation facility output data may be directed to the DAC direct output register whereas the FIFO outputs may be directed to the offset and gain calibration registers. As a result a change in phase or gain of an affected output may take place in an automated and coordinated manner so that each new data from the waveform generation facility may be associated with a new gain and or offset to be converted by the DAC . Optionally the data in the FIFO that is directed to the offset and gain calibration registers may be held so that any change associated with the data is delayed until the index of the output waveform is equal to zero.

The phase adjust facility may also facilitate determining and maintaining a desired phase relationship between two sets of linked outputs an output or linked output pair and an input to the platform and other combinations of inputs and outputs The phase adjust facility may also help with maintaining a preconfigured phase delay based on a count of microseconds. In an embodiment phase adjust facility may provide a time based phase delay up to 250 ms .

The output stage may also include an interrupt capability that may be provided by an interrupt facility that provides an interrupt to a system component such as a controller or other device associated with the platform . In an example the interrupt facility may generate an interrupt signal based on a status of the FIFO memory such as FIFO empty FIFO full and FIFO half full.

A four channel embodiment of an LVDT RVDT map configuration includes a reserved area for registers that are common for all channels or are independent of channel designation four analog input address spaces four analog output address spaces and an analog output waveform address space . A two channel embodiment of a synchro resolver map configuration includes a reserved area for registers that are common for all channels or are independent of channel designation two analog input address spaces two analog output address spaces reserved address spaces and an analog output waveform address space .

Each analog input channel in the analog input address space may include a plurality of registers to enable various features functions and operation of an input stage for an LVDT RVDT configuration such as that depicted by or other configurations all of which are included in the scope of this disclosure. The following table of registers is exemplary of such a plurality of registers.

The analog input registers may include an input configuration register an input status register an input interrupt source register and others described herein. The following tables represent an embodiment of each of the input configuration input status and input interrupt registers.

The platform may include a layer control and configuration register which may be used to set common settings such as the on off state of a status LED. An Isolated Side TX Register ISTR may be used to access digital output bits reset individual blocks on the platform and switch zero crossing debug mode On Off. An Isolated Side RX Register ISDR may be used to provide the current state of digital inputs. An interrupt register may be used to enable and monitor interrupts generated by the platform. The following table shows exemplary embodiments of the function and description of each of these registers.

Each analog out channel in the analog out address space may include a plurality of registers to enable various features functions and operation of an output stage for an LVDT RVDT configuration such as that depicted by . The following table of registers is exemplary of such a plurality of registers.

The platform may include analog output registers associated with the above analog output stage register address space. The analog output registers may include an output configuration register an output status register an output direct write register phase shift register output interrupt sources register FIFO mode and format register and other registers as herein disclosed. The following tables represent these registers.

The output phase shift register may be used in waveform mode e.g. when one or more WEx bits are set in the output configuration register and allows precise control of the phase shift between outputs and relative to analog input. Phase may be defined by two parameters sample offset within output waveform and delay in microseconds before outputting first and all consecutive samples after the waveform clock arrives. In an embodiment this delay should be shorter than the time interval between waveform clocks. In an embodiment with 1024 samples in the output waveform 10 bits are required to set sample based phase shift. An additional 18 bits are used to set phase delay in microseconds thus allowing very slow waveforms e.g. maximum delay is 0.25 sec .

Output based interrupts may be controlled by three registers that provide enable status and clear interrupt functionality. The table below shows an exemplary embodiment that could be applied to each of the output control registers 

Each analog input channel in the analog input address space may include a plurality of registers to enable various features functions and operation of an input stage for a synchro resolver configuration such as that depicted by . The following table of registers is exemplary of such a plurality of registers.

The analog input registers may include two input configuration registers an input status register an input interrupt source register and others described herein. The following tables represent an embodiment of each of the input configuration input status and input interrupt registers.

The platform may include a layer control and configuration register which may be used to set common settings such as the on off state of a status LED. An Isolated Side TX Register ISTR may be used to access digital output bits reset individual blocks on the platform and switch zero crossing debug mode On Off. An Isolated Side RX Register ISDR may be used to provide the current state of digital inputs. An interrupt register may be used to enable and monitor interrupts generated by the platform. The following table shows exemplary embodiments of the function and description of each of these registers.

Each analog out channel in the analog out address space may include a plurality of registers to enable various features functions and operation of an output stage for a synchro resolver configuration such as that depicted by . The following table of registers is exemplary of such a plurality of registers.

The platform may include analog output registers associated with the above analog output stage register address space. The analog output registers may include an output configuration register an output status register an output direct write register phase shift register output interrupt sources register FIFO mode and format register and other registers as herein disclosed. The following tables represent these registers.

The output configuration register is used to configure each analog output channel. Note that in this table analog output channels are named AOut0 1 2 3 and also A B C D. When AOut0 1 2 3 is used it refers to a physical DAC or output circuit whereas when A B C D are used they refer to the waveform signal that is output. This naming differentiation facilitates simplifying calibration because all calibration coefficients are loaded to OFFSx and GAINx registers where x is 0 1 2 3 while waveform span and phase is controlled via PHy and GAINy registers where y is A B C D. In this way a logical operation associated with configuring a waveform such as setting a phase offset is readily distinguished from a physical operation such as changing the gain voltage on an output DAC.

The output phase shift register may be used in waveform mode e.g. when one or more WEx bits are set in the output configuration register and allows precise control of the phase shift between outputs and relative to analog input. Phase may be defined by two parameters sample offset within output waveform and delay in microseconds before outputting first and all consecutive samples after the waveform clock arrives. In an embodiment this delay should be shorter than the time interval between waveform clocks. In an embodiment with 1024 samples in the output waveform 10 bits are required to set sample based phase shift. An additional 18 bits are used to set phase delay in microseconds thus allowing very slow waveforms e.g. maximum delay is 0.25 sec .

Output based interrupts may be controlled by three registers that provide enable status and clear interrupt functionality. The table below shows an exemplary embodiment that could be applied to each of the output control registers 

The methods and systems associated with the platform may be employed in various environments and applications including at least LVDT RVDT input position detection LVDT RVDT simulator synchro input position detection resolver input position detection synchro simulator and resolver simulator. Additionally the configuration operation of the platform may be characterized by LVDT RVDT operation modes including input with external excitation in 4 5 or 6 wire configuration input with external excitation in 4 5 or 6 wire configuration LVDT RVDT sensor simulation mode in 4 5 or 6 wire configuration. These use environments applications and operating modes are exemplary and are not meant to be limiting.

Referring to an LVDT RVDT flap position indicator simulator configuration may allow an embodiment of the platform to provide LVDT RVDT stator signals instead of using a physical LVDT RVDT device. In a 4 wire LVDT RVDT simulation two outputs are configured and operated cooperatively to provide a differential signal that is typically provided by the LVDT RVDT device stators. As shown in external excitation is used in the simulation therefore two inputs are connected to the externally supplied excitation signal . The two inputs may be processed by the input logic to determine some of the operating parameters such as clocking parameters to generate a simulated Vout equivalent signal. In a 6 wire simulation not shown two outputs provide an equivalent Va signal and two other outputs provide an equivalent Vb signal. Logic and configuration registers in the platform are programmed to ensure that the simulation is appropriate and closely represents how a physical LVDT RVDT would perform given the equivalent input conditions such as the excitation signals. The following table depicts the simulation configuration connections.

Alternatively the platform may be operated for synchro resolver applications in at least the following modes synchro input with internal excitation resolver input with internal excitation synchro input with external excitation resolver input with external excitation synchro simulation with internal excitation for fully sourced operation resolver simulation with internal excitation for fully sourced operation synchro simulation with externally sourced excitation and resolver simulation with externally sourced excitation. Synchro and resolver applications are represented by standard designations such as Sx for Stator connections Rx for rotor excitation connections C for common connection and the like. Synchros typically have one common connection C and three stator connections S S S that provide a voltage relative to common that reflects a position of the rotor. Resolver applications typically include four stator connections associated with two stators S S and S S. Rotors typically have one or two windings. A one winding rotor may include connections R and R where as a two winding rotor may have R R R and a common C or may have separately excited windings R R and R R.

In resolver configuration that includes internal excitation rotor inputs R and R are driven by two outputs of the platform . Each terminal of each stator winding S S S and S is connected to one of the inputs on the platform. A resolver operates by outputting a voltage on S through S that is indicative of the absolute angle of the rotor. Voltages on S through S are detected sampled converted to digital form and processed by the platform as herein described.

Referring to synchro and resolver simulation may be provided by connecting outputs from the platform in place of stator output voltage signals in synchro and resolver applications test environments simulation environments and the like. Heading indicator simulation scenario includes excitation provided to the facility by a heading indicator module . The excitation signal may normally be transmitted to a compass or the like that would return stator signals that the heading indicator module would translate into a heading indication to be represented by the pointer dial. In this simulation configuration excitation is processed by the facility and combined with software programmable waveform control and data so that the heading indicator receives signals from the platform outputs that are indistinguishable from those provided by the compass. Similarly a turret indicator simulation scenario includes an excitation source. However in the turret simulation scenario both a turret indicator and the facility receive excitation from an independent excitation source . This configuration is typical of actual flight and flight simulator installations that include a common 28 Vrms excitation signal for position sensing and indicating devices. The position detection and simulation facility receives the external excitation and provides stator equivalent signals from outputs that simulate a device such as a synchro or resolver. The following table represents connections for simulation of synchro and for resolver in both internal excitation and external excitation modes.

The above describe architecture features software interface programmability memory map connection examples and the like may support a wide variety of products that include LVDT RVDT digital converter and simulation systems synchro resolver digital converter and simulation systems and the like. The products supported by the platform may perform simulation input sensing excitation external excitation sensing and other capabilities without requiring any hardware tailoring reconfiguration or changes. An LVDT RVDT product may support four secondary pairs through software configurable inputs four excitation output pairs four simulation output pairs digital filtering armature control support and the like. By combining the four excitation out pairs with the four simulation output pairs an LVDT RVDT product based on the platform may simulate four secondary stator pairs. A synchro resolver product may include support for 2 I O channels with 16 bid resolution analog to digital converters support for 3 wire synchronizer 4 wire and 5 6 wire resolver outputs with independent reference per channel and accuracy of at least 4 arc minutes. The independent reference outputs may be programmed from approximately 2 VRMS to 28 VRMS or more at 1.2 VA or more. With a frequency response of 50 to 4000 Hz and output excitation frequency generation of 50 to 4000 Hz with accuracy of 0.5 the platform exceeds performance requirements for most industrial synchro resolver applications. Inputs in a product may support acceleration of up to 1000 rps s 4000 Hz and a step response of 150 ms 179 at 2500 Hz. Isolation among channels from channel circuitry to chassis ground and from any signal pin to chassis is at least 350 Vrms.

The platform may provide support for a wide variety of applications including inertial navigation reference unit gyro or compass automatic direction finder ADF omnirange system distance measurement equipment cockpit indicators landing gear positioning and control flight surface measurement such as flaps slats rudder and aileron general mechanical measurement simulation control test of motion electronics and the like. Other related applications include simulation which may include simulating various types of stimulation and activation functionality as well as simulation of sensing functions flight simulation control e.g. synchro or resolver outputs to drive attitude indicators flight simulation monitoring test providing synchro or resolver output as a test source for a wide range of synchro or resolver input devices and the like. The platform provides multi channel interface sensing and control and may facilitate multi speed applications by performing coarse detection on one channel and fine detection on another.

The methods and systems of the platform may be beneficially and productively employed in a variety of markets including avionics flight simulation airborne control shipboard control and sensing navigation e.g. inertial reference gyro compass automatic direction finders radar robotics oil field exploration motor control and commutation machine tool control process control antenna positioning data acquisition fire control aero space programs production test calibration and the like. Avionics may further include avionics test jet engine control cockpit indicators landing gear positioning control flap actuators and simulation which may benefit from a significant reduction in wiring related costs for high value areas such as design materials installation maintenance and the like.

The platform may facilitate flight simulation test and measurement. Flight and flight simulation applications typically include one or more common excitation sources for position sensing devices and indicators. Simulation test and measurement in such applications may be required to support the common external excitation while conforming to the specific performance criteria of devices that are being simulated tested and or measured. In an example of flight simulation the platform may receive external excitation on an input . The platform samples the excitation as herein described and determines among other attributes a count of reference clocks for each complete cycle of the excitation input. Using the facilities and functions of the position detection and simulation facility of the platform at least a simulation output clock is derived from the excitation input. The platform may factor in measured drift and the like present in the excitation input to be included in or at least influence the simulated output. In the example the simulation output clock may be adjusted according to the measured drift of the excitation signal from one cycle to another so that the simulated output signals reflect real world responses to the changes present in the excitation signal. Coordinated with the excitation signal an output waveform simulating a real world device such as an LVDT RVDT synchro resolver and the like may be generated.

The simulated output may include at least a phase offset relative to the excitation signal to reflect real world delays associated with signal transmission through an aircraft device delays and the like. A simulator for an older model aircraft that uses synchros and resolvers designed and produced decades earlier may require substantially different phase shift response and performance than a simulator for a current production aircraft. The programmability and flexibility of configuration of the platform makes possible support for these potentially very different real world situations without changing tailoring or reconfiguring hardware on the platform. Similarly devices within a single aircraft simulator may need to be simulated with very different performance characteristics. A single embodiment of the platform may be produced and used for these different applications because of the high degree of configuration and operational flexibility inherent in the platform .

The signals that are output from a position and angle digital detection and simulation system as described herein may benefit from dynamic signal based power delivery. In particular the signals being output are generated or controlled by the system and therefore can be efficiently and effectively used to control supply voltage being provided to each individual output driver. In some embodiments of the system the system drives a plurality of sinusoidal signals that are synchronized so each is always driving in phase or is one hundred eighty degrees out of phase. In these embodiments the synchronous signals zero crossing is consistent so active control of the power rails for the output buffers could be applied simultaneously across a plurality of outputs. Therefore whether dynamic signal based supply voltage delivery is conducted for a positive power rail each of a positive and negative power rail for a single output driver for several output drivers or individually for a plurality of output drivers each supply voltage delivery may be based on a signal that is being provided to an output driver.

In one embodiment we take advantage of features of commonly available DC DC converters that generate the supply voltage DC DC converter output based on a signal presented to the converter. This signal is generally known as an output feedback signal to help in stabilizing the output as a result of load changes and the like. Most common off the shelf COTS DC DC converters are active devices that operate internally at greater than a megahertz to convert an input DC voltage to an output DC voltage. Therefore by actively controlling the feedback signal provided to the DC DC converter the DC signal output from the converter which can be provided as a DC supply voltage to one or more high current output drivers should be able to be dynamically and rapidly changed. To provide active control of the DC DC converter feedback signal that ensures that the DC output that is delivered to one more of voltage supply inputs of a high current signal driver maintains sufficient head room above the resulting signal being output from the signal driver some information about the signal being output may be required such as frequency slew rate peak output voltage positive and or negative DC offset and the like.

In an embodiment a 1.2 MHz operating frequency DC DC converter provides an output adjustment response rate that can readily match at least a 1 KHZ sinusoidal signal based on a DC DC feedback signal with a frequency of change of approximately 250 KHz. Providing feedback to the DC DC converter at a rate that is much higher than the signal being delivered to the power driver amplifier facilitates requesting small incremental changes in the supply voltage out of the DC DC converter while enabling a slew rate that is much greater than the signal primary 1 KHz frequency. Generally an embodiment as described herein facilitates signal based amplifier driver supply voltage control based on any signal that is substantially sinusoidal.

If the signal that is provided to the amplifier driver is well known and therefore highly predictable and or if it can be sampled prior to being fed into the amplifier driver then a DC DC converter feedback control function may be generated by circuitry or software that predicts samples or generates the signal to be amplified.

In the position and angle digital detection and simulation system described herein because the signal s to be amplified driven that are provided to the output buffer are generated by logic that is under the control of the system e.g. a state machine in an FPGA a circuit that generates a feedback control function for conversion e.g. D A to an active feedback signal for the DC DC controller can be built into the logic e.g. as a function of the FPGA . A separate control signal may be generated for each individual output based on frequency and slew rate characteristics being generated in the FPGA.

An example of FPGA based information that may facilitate generating a DC DC converter feedback control signal may be found in one or more portions of the output logic as described herein with respect to at least . In an example waveform generation facility may provide essential information about the shape of a waveform that may be delivered to one of the DAC circuits to further be driven amplified by one of the outputs . The output system described in respect to may include outputs which may be software controllable outputs. These outputs may include one or more high current driver amplifiers as described herein that when controlled through the signal based supply voltage control methods and systems described herein may benefit from the power consumption reduction of such supply voltage control methods. Further in an example of using the waveform generation facility which may provide digital waveform data to the FIFO the FIFO may be adapted to provide a DC DC feedback control output signal from an earlier tap than the tap that provides the digital waveform to the DAC engine for the output signal s . Other potential sources of data or information that may be used to generate a DC DC converter feedback control signal in clude channel conversion control data such as the current gain value phase value offset value and the like for each software programmable output . These and other software programmable output capabilities are described herein.

Referring to which depicts an embodiment of generating a DC DC converter feedback control signal an output sub system that is similar to that depicted in incorporates dynamic power control features that also leverage the output subsystem features of the that are described herein. Therefore the differences between are presented here. DC control output driver may provide a signal that is suitable for connecting to the feedback input of COTS DC DC converters such as LT1935 by Linear Technology and others. A digital to analog converter DAC may receive a digital signal from DAC engine and convert it to an analog signal that meets the requirements for providing feedback to a COTS DC DC converter. DAC Engine may operate similarly to DAC engine as described herein but may further integrate output signal digital waveform data from waveform facility to generate a control signal that takes into account response time of a COTS DC DC converter for providing power to one or more outputs . The waveform data provided from waveform facility may be identified e.g. addressed by DC Phase adjust facility . Phase adjust facility may provide a phase adjust of the waveform data provided to DAC engine relative to the waveform data that is delivered to DAC engine . This may allow the DC control facility to present a feedback signal to a COTS DC DC converter so that the feedback signal precedes the output signal with sufficient time offset to ensure that the DC DC converter adjusts the DC power to the output driver e.g. output to maintain the necessary headroom above the amplitude of the signal being output from the driver.

A basic objective to achieve low power consumption is to ensure that the DC DC converter output which is input to the amplifier driver supply voltage power rails tracks the signal that is input to the amplifier driver with a small phase offset shift that ensures the supply voltage available to the amplifier driver is sufficient for it to provide the power needed based on the output signal amplitude and load. Because this offset is based on the DC DC converter response rate to changes in the feedback signal there might be a calibration or at least characterization process that is executed during production during setup of the position and angle digital detection and simulation system at power up of the system or through a dynamic calibration capability that may be built into a DC DC converter feedback signal circuit. Such a calibration function may be needed to set the proper offset phase shift between the control signal and the signal being amplified driven. This offset may be implemented in the phase adjust facility to enable software based control of the phase shift between the DC DC converter feedback control signal and the signal being amplified driven.

In one embodiment a single DC DC converter can be controlled to provide both positive and negative supply voltage to a plurality of outputs. This may be sufficient for a system in which the plurality of output signals are synchronized with common zero crossing events. Two DC DC converters for each output amplifier driver can facilitate independent control of positive and negative supply voltages. This may facilitate having the DC DC output that provides the positive supply voltage to the amplifier driver tracking the positive voltage excursions of the output signal and the DC DC output that provides the negative supply voltage to the amplifier driver tracking the negative voltage excursions of the output signal. Requirements for the power supply voltage provided out of each DC DC converter may be represented as an equation VDC DC Out Max Vlim Vout Vheadroom 1 VDC DC Out Min Vlim Vout Vheadroom 2 

By operating the signal amplifier driver just above the minimum supply voltage needed to ensure low signal distortion and noise injection during signal amplification e.g. to achieve high quality amplifier performance such a dynamic supply voltage control method and system may facilitate achieving amplifier class B C or D efficiency with nearly amplifier class A linearity response and output drive quality.

Another embodiment of the dynamic supply voltage control capability may include integrating such functionality into an output driver component so that the power consumption saving benefits may be provided to any implementation that requires high current signal amplification driving. The result may be an integrated device which is an intelligent power saving amplifier driver.

Referring to an integrated power saving output driver device is depicted that embodies aspects of the dynamic supply voltage control capability described herein. Power saving output driver includes a supply control circuit that senses the signal in and signal out feedback signal provided by feedback facility . The supply control facility generates control signal s for a positive rail voltage control facility and for a negative rail voltage control facility . Each of the voltage control facilities and independently provide sufficient supply voltage to output driver to enable outputting a signal out with a desired peak signal amplitude while conserving power drawn by the device .

Supply control facility may detect an amplitude change on the signal in that correlates to a change in amplitude of the signal out a typical output amplifier driver function . The supply control facility may further detect the amplitude of the signal out through feedback facility that may sense the signal out and provide a representation of the signal out . The signal out representative signal may include adjustments in amplitude phase or other parameters. These adjustments may be based on factors related to controlling the power that is supplied to the positive and or negative power rail of the output driver . An exemplary factor may be related to the response time of the voltage control facilities and and the like. Supply control facility may determine an adjustment factor independently for each of the positive supply voltage and the negative supply voltage that is to be provided to the output driver so that the supply voltage provided thereto exceeds the signal out amplitude by a margin that is sufficient to ensure proper drive capability and operation of the output driver and of the device .

The elements depicted in flow charts and block diagrams throughout the figures imply logical boundaries between the elements. However according to software or hardware engineering practices the depicted elements and the functions thereof may be implemented as parts of a monolithic software structure as standalone software modules or as modules that employ external routines code services and so forth or any combination of these and all such implementations are within the scope of the present disclosure. Thus while the foregoing drawings and description set forth functional aspects of the disclosed systems no particular arrangement of software for implementing these functional aspects should be inferred from these descriptions unless explicitly stated or otherwise clear from the context.

Similarly it will be appreciated that the various steps identified and described above may be varied and that the order of steps may be adapted to particular applications of the techniques disclosed herein. All such variations and modifications are intended to fall within the scope of this disclosure. As such the depiction and or description of an order for various steps should not be understood to require a particular order of execution for those steps unless required by a particular application or explicitly stated or otherwise clear from the context.

The methods or processes described above and steps thereof may be realized in hardware software or any combination of these suitable for a particular application. The hardware may include a general purpose computer and or dedicated computing device. The processes may be realized in one or more microprocessors microcontrollers embedded microcontrollers programmable digital signal processors or other programmable device along with internal and or external memory. The processes may also or instead be embodied in an application specific integrated circuit a programmable gate array programmable array logic or any other device or combination of devices that may be configured to process electronic signals. It will further be appreciated that one or more of the processes may be realized as computer executable code created using a structured programming language such as C an object oriented programming language such as C or any other high level or low level programming language including assembly languages hardware description languages and database programming languages and technologies that may be stored compiled or interpreted to run on one of the above devices as well as heterogeneous combinations of processors processor architectures or combinations of different hardware and software.

Thus in one aspect each method described above and combinations thereof may be embodied in computer executable code that when executing on one or more computing devices performs the steps thereof. In another aspect the methods may be embodied in systems that perform the steps thereof and may be distributed across devices in a number of ways or all of the functionality may be integrated into a dedicated standalone device or other hardware. In another aspect means for performing the steps associated with the processes described above may include any of the hardware and or software described above. All such permutations and combinations are intended to fall within the scope of the present disclosure.

While the invention has been disclosed in connection with the preferred embodiments shown and described in detail various modifications and improvements thereon will become readily apparent to those skilled in the art. Accordingly the spirit and scope of the present invention is not to be limited by the foregoing examples but is to be understood in the broadest sense allowable by law.

