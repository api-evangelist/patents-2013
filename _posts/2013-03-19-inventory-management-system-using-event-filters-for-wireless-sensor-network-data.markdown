---

title: Inventory management system using event filters for wireless sensor network data
abstract: A wireless sensor node, WSN, tag and method for filtering sensor data obtained by the WSN. At least one event filter is applied to sensor data. The sensor data is based at least in part on motion of the WSN tag. The at least one event filter includes at least one filter parameter, and the at least one filter parameter includes a minimum amount of movement of the WSN tag within a predetermined time threshold.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09501916&OS=09501916&RS=09501916
owner: Tyco Fire & Security GmbH
number: 09501916
owner_city: Neuhausen am Rheinfall
owner_country: CH
publication_date: 20130319
---
This application is related to and claims priority to U.S. Provisional Application Ser. No. 61 613 048 filed Mar. 20 2012 entitled INVENTORY MANAGEMENT SYSTEM USING EVENT FILTERS FOR WIRELESS SENSOR NETWORK DATA and U.S. Provisional Application Ser. No. 61 613 333 filed Mar. 20 2012 entitled RETAIL ITEM MANAGEMENT USING WIRELESS SENSOR NETWORKS the entirety of both of which are incorporated herein by reference.

The present invention relates generally to retail item management and more specifically to using event filters for wireless sensor node data for item management.

In retail stores items of high value and popularity are often promoted using displays in special locations of high visibility inside the retail store. These special locations often include ends of aisles or on countertops inside particular departments at which consumers are likely to interact with the special items. For various reasons retailers are intensely interested in the level and nature of human activity surrounding the special items in particular the physical handling of these items. One source of interest to retailers is the concern of potential theft of the item. Another aspect of interest to retailers deals with how the handling of the item correlates with the presentation and offering of the item. For example retailers may want to know whether the price and placement of the item coupled with all of the influencing factors such as advertising store lighting and store wide sales promotions have resulted in a net increase or decrease in the amount of physical attention that the retail demo item garners. This is particularly true for certain high value or high interest items or promotional items which have special correlation with general store performance or sales of a particular store department.

Some retailers employ tethers such as wires and cables attached to retail items on display in order to protect specially displayed retail items and collect motion data. For example a security device may be tethered to a retail item on display in which a wire or set of wires conveys motion data of the item to a computer hidden under or inside the display fixture surface. However tethers are often unsightly and make handling of the tethered retail item awkward.

While point of sale POS data is readily available to retailers it is difficult to use POS data to determine whether item placement in a store is good or bad. For example reviewing POS data is often not a good indicator of item placement since price has such a profound influence on the decision to buy. The decision to investigate and the decision to buy are very different i.e. these decisions are dependent on different factors. In other words it is very difficult to measure how an item is being handled inside the retail store because this information is independent of POS data. While video surveillance can be used in some cases to monitor customer behavior it is difficult to implement in a manner which allows for automated determination of specific customer behavior such as the handling of a given retail item. In general such implementations of video surveillance technology are labor intensive complex and expensive.

Another source of interest that a retailer might have in the direct physical handling of retail items within a store has to do with deployment of sales associates. For example retailers want their sale employees to spend a relatively large amount of their time dealing face to face with the shopper who is most interested in the high profile retail item on display. However at the present time the retailer must rely upon high levels of staffing to assure that shoppers will have an opportunity to deal face to face with a store associate at the time of the buying decision. While using a large number of store associates on the sales floor at any one time may increase the amount of face time store employees have with shoppers high staffing levels have the disadvantage of high labor costs and training.

The present invention advantageously provides a method and system for retail item management using wireless sensor nodes. In particular event filters are applied to capture wireless sensor node data to determine how items are being physically handled.

According to one embodiment a method for filtering sensor data obtained by the WSN is provided. At least one event filter is applied to sensor data. The sensor data is based at least in part on motion of the WSN tag. The at least one event filter includes at least one filter parameter and the at least one filter parameter includes a minimum amount of movement of the WSN tag within a predetermined time threshold.

In accordance with another embodiment a wireless sensor node WSN tag for identifying handling events is provided in which the WSN tag is associable with an item. At least one sensor is configured to generate sensor data based at least in part on motion of the WSN tag. A memory is configured to store at least one event filter and the sensor data. A processor is configured to apply at least one event filter to the sensor data where the at least one event filter includes at least one filter parameter. The at least one filter parameter includes a minimum amount of movement of the WSN tag within a predetermined time threshold.

In accordance with still another embodiment a method for identifying handling events of a wireless sensor node WSN tag associable with an item is provided. Sensor data is received in which the sensor data is based at least in part on motion of the WSN tag. At least one event filter is applied to the sensor data. A filter firing of the at least one event filter is triggered based at least in part on the applying of the at least one event filter to the received sensor data. A determination is made as to whether a handling event occurred based at least in part on the filter firing of the at least one event filter where the at least one event filter includes at least one filter parameter. The at least one filter parameter includes a minimum amount of movement of the WSN tag within a predetermined time threshold.

Before describing in detail exemplary embodiments that are in accordance with the present invention it is noted that the embodiments reside primarily in combinations of apparatus components and processing steps related to implementing a system and method for retail item management using filters applied to captured wireless sensor node data. Accordingly the system and method components have been represented where appropriate by conventional symbols in the drawings showing only those specific details that are pertinent to understanding the embodiments of the present invention so as not to obscure the disclosure with details that will be readily apparent to those of ordinary skill in the art having the benefit of the description herein. While one or more embodiments herein suggest co location of apparatus components inside the same housing system or site location the invention is not limited to such. Actual deployment of may involve greater distribution of components and functionality around and among different physical devices some of which may be remotely accessible such as via the Internet or internal network or a combination of these networks. While one or more embodiments described herein have been simplified for the sake of clarity the instant invention may include more highly distributed embodiments which involve the same general components and functionality.

As used herein relational terms such as first and second top and bottom and the like may be used solely to distinguish one entity or element from another entity or element without necessarily requiring or implying any physical or logical relationship or order between such entities or elements.

Referring now to the drawing figures in which like reference designators refer to like elements there is shown in an exemplary system wireless sensor node WSN tag system constructed in accordance with the principles of the present invention and designated generally as . System includes one or more items to collectively referred to as item one or more WSN tags to collectively referred to as WSN tag and one or more user devices collectively referred to as user device . In particular a consumer is illustrated interacting with item in which WSN tag senses the motion and determines whether the motion should be reported as described in detail with respect to . Furthermore WSN tag may sense motion of item falling to the floor but does not report the motion as the motion does not meet the event filter as described in detail with respect to . In other words WSN tag is programmed to report predetermined motion events that are important to the retailer based on filter parameters i.e. motion events indicating a consumer is interest in item . Furthermore a notification may be sent to user device based on the motion sensed by WSN tag such that an employee is able to increase face to face time with a consumer that is showing actual interest in item

User device may be a mobile device for use by an employee in which the mobile device receives alerts and or reports generated by system . For example user device may be a Smartphone tablet computer or personal digital assistant PDA among other mobile devices that can receive and display alerts and or reports generated by analytics device and or WSN access point . In particular user device includes transceiver for communicating with Wi Fi access point among other devices in system . User device also includes display for displaying a received alert or report to an employee operating user device .

WSN access point includes transceiver that provides communication to and from WSN tag in which WSN access point is co located with WSN tags in the retail store e.g. separated by no more than several hundred feet to support short range radio communication. WSN tags form a sub network that can access and be accessed by the WSN access point in which WSN tags may be governed by multi layer communications protocols such as IEEE 802.15.4 media access control with Zigbee or 6LoWPAN for network management and message routing among other communication protocols designed to achieve the same functions of the above cited standard layers. WSN access point may transmit on a short path directly to Wi Fi access point as is described in detail with respect to . Transceiver can be a separate transmitter and receiver but are described herein as a transceiver for efficiency and ease of understanding. System may include additional WSN network elements such as repeater nodes not shown designed to extend the physical range of the network communication and to store and forward messages in cases where WSN tags or other network nodes are asleep and unable to receive or transmit messages in real time.

WSN access point includes processor that may be one or more central processing units CPUs for executing computer program instructions stored in memory . WSN access point includes memory for storing tag event module for tracking and reporting tag state changes and tag state change data based on event data received from WSN tag . In particular WSN access point stores and updates tag state change data in order to track which WSN tags are in new states. For example tag state change data may include a linked list of the WSN tags in system and a state changed flag for each WSN tag in a linked list among other information related to the changed state of WSN tag . For example tag state change data may include date time of the event that caused WSN tag to change states type of state and tag ID as described in more detail with respect to . When WSN tag sends a new state report to WSN access point indicating WSN tag is in a new state WSN access point records the details of WSN tag s new or changed state in the linked list and sets the state changed flag to 1 . Upon the next request from analytics device for new WSN tag states WSN access point uses the state changed flag to determine which WSN tags have experienced a state change since the previous polling request from analytics device .

After sending the report of WSN tag with new states to analytics device WSN access point resets the state changed flag to 0 . Therefore WSN access point tracks WSN tag state changes. If more than one analytics device polls WSN access point WSN access point may assign a service requester identification ID number for each subscribing analytics device and may maintain a separate state changed flag for each of the subscribing analytics devices . The manner in which WSN tag updates state information with WSN access point inside the WSN and in which WSN access point updates state information with external devices LAN or WAN based such as analytics device may be governed by web service based publisher subscriber techniques. More particularly RESTful web services utilizing hypertext transfer protocol HTTP or constrained application protocol CoAP message transport functionality may be used among other applications and web service implementation technologies. Memory may include non volatile and volatile memory. For example non volatile memory may include a hard drive memory stick flash memory and others known in the art. While volatile memory may include random access memory and others known in the art. Wi Fi access point provides communication to and from user device .

Analytics device polls access point for tag state change data and generates reports based on the received tag state change data . Analytics device includes transceiver processor and memory . Transceiver provides communications to and from analytics device . For example transceiver transmits polling commands to WSN access point via network and receives tag state change data from WSN access point . Processor may be one or more central processing units CPUs for executing computer program instructions stored in memory . Memory may function substantially the same as corresponding memory with size and performance being adjusted based on design need. Memory includes reporting module Analytics module and motion database . Reporting module includes instructions which when executed by processor causes processor to perform the reporting process discussed in detail with respect to . Analytics module includes instructions which when executed by processor causes processor to perform the analytics process discussed in detail with respect to . Motion database stores tag state change data and reports associated with WSN tag state changes among other WSN tag related information. Network may be a wide area network WAN such as the Internet local area network LAN Ethernet LAN cellular communication network public switched telephone network PSTN Wi Fi network or combination of any of these network types among other protocol based networks.

Transceiver RF matching sub circuit that may include a balun chip and antenna provide communications with WSN access point such as to transmit event data to WSN access point . Motion sensor may be a contact sensor or three axis accelerometer among other motion sensing devices.

Memory stores event module and event filters . Event module includes instructions which when executed by processor causes processor to perform the event process discussed in detail with respect to . Event filters include one or more filter parameters corresponding to one or more filters that are used to determine whether an event occurred. In particular event filters include firmware instructions e.g. executable programmatic code instructions stored in memory and at least one filter parameter such as formula coefficients exponents and or other formula required values. Event filters may also include special data structures or groupings of data elements designed to facilitate processing and communication of data sets. In other words event filter takes as input raw sensor data and processor as output as decision or declaration as to whether a particular event has occurred in which event has special significance is mathematically defined in the details of event filter .

Event filter may be downloaded from analytics device via WSN access point such that event filter of WSN tag may be dynamically updated or replaced. In particular WSN tag may have different event filters . Memory may also store event data associated with a tag event. Power supply may be a battery such as a coin cell battery and power supply sub circuit. Alternatively power supply may be an energy harvesting module. WSN tag may also include a light emitting diodes LEDs and or piezoelectric resonator not shown to generate a hearable audio signal. Memory and processor may be co located on a single microcontroller MCU chip. In one embodiment the sensor data may be processed directly without storage of the sensor data in memory . Alternatively sensor data may be stored in memory .

WSN tag may periodically wake to transmit a tag event or may operate in low power mode where only the radio and other control circuitry are active in order to detect polling commands from WSN access point . Further processor of WSN tag may wake up due to sensed motion from motion sensor . In other words WSN tag may sleep to conserve power until a condition occurs that causes WSN tag to wake up.

Alternatively WSN tag may be a dumb tag that reports all motions sensed by motion sensor such that WSN tag does not perform filtering or performs minimal filter i.e. reports motion above a predetermined threshold. Analytics device would perform the filtering described in detail with respect to of sensor data received from WSN tag i.e. event module and event filters are stored in memory . WSN tag would report raw data to analytics device for filtering. In other words this centralized filtering approach helps simplify WSN tag design thereby reducing WSN tag cost. However this centralized filtering approach may also increase network traffic as large amounts of raw data may be generated by numerous WSN tags inside the WSN such that the actual number of WSN tags that may be deployed in this approach is limited.

If processor determines that tag motion has occurred or is still currently occurring processor determines whether at least one event filter is met Block S . Each event filter includes and is defined by a number of filter parameters or thresholds that must be met in order to determine an event occurred. The event filters or filter parameters are designed to be implemented in WSN tag having a small memory storage capacity yet be complex enough to capture the salient characteristics of item handling. The types of event filters implemented by WSN tag fall into at least two general categories thin filtering filters and thick filtering filters. Thin filters are event filters at WSN tag that report simple events more often than thick filters. Thick filters are event filters that report a smaller number of complex events.

One type of event filter is a first event filter that corresponds to specific filter parameters in which the first event filter is the least computationally complex filter. When processor applies the first event filter processor counts the number of movements X above a predefined threshold e.g. acceleration value above a certain acceleration threshold value in a predefined time Y where X and Y are positive values. In cases where the accelerometer sensor itself employs internal filters of its own movements X can correspond to one or more number of different types of motions sensed by motion sensor such as a tap translation above X Y or Z translation acceleration threshold tilting and torquing among other motions that may be sensed by motion sensor . In more limited situations where sensor has no internal filter such that filtering is done on the raw sensor data after the raw sensor data is reported to processor by sensor the raw sensor data involves only limited data such as X Y and Z translation acceleration. In translational acceleration threshold filtering for motion in dimension X if the value of X e.g. 0.1 gravitational g force is above the predefined threshold processor determines movement X has occurred. The first event filter may be expressed in equation form as 

F X where X is the sum of movements X with acceleration values exceeding the acceleration threshold and Y is the threshold time. For example if the acceleration threshold is 0.2 g s and there are five movements X of force greater than 0.2 g in five seconds and the time threshold value Y equals six seconds then the filter result is true and the filter declares the event i.e. filter satisfied event.

In one embodiment movements X may correspond to a complex combination of one or more of the above listed different types of motions. For example movements X may be tilting movements i.e. X T in which the first event filter may be expressed as 

F where T is the sum of tilting movements in any plane is the threshold value expressed for example in degrees relative to some orientation plane for T and Y is the threshold time. One possible set of filter parameters for the first event filter may be 5 T 30 degrees and Y 60 seconds in which five movements of greater than 30 degrees must occur within sixty seconds for the event filter to be met.

A more explicit way of expressing this filter F is to show that all tilting movements that are counted in the sum are above a predefined tilt threshold T i.e. tilt angle. The first event filter with the predefined tilt threshold Tmay be expressed as F T . The first event filter is a thin filter if X is small and or is small and Y is large.

Another type of event filter is a second event filter that automatically changes filter parameters i.e. is self adapting based at least in part on the number of events WSN tag has reported to WSN access point i.e. number of times WSN tag has fired. The second event filter is express as 

F T and F m F where F is the total number of times since filter reset that the filter has fired and m is a constant. In other words the second event filter fires like the first event filter but will not fire again prior to reset for a handling event of the same intensity but requires an increased handling intensity after each fire i.e. increases after each firing. The second event filter advantageously allows system to capture the first primary event or firing and then capture any increases in intensity of handling of item without flooding the sensor network communication channels e.g. network with redundant reports of continued handling at the initial intensity.

Another type of self adapting event filter is a third event filter that automatically changes filters parameters based at least in part on firing or events reported by WSN tag . The third event filter is expressed as 

F T Y Y F Y 1 F where Yis the initial value of the time threshold and k is a constant. If k is small and positive between 0 and 1 closer to 0 then Y increases slowly with each filter firing. However if k is large k 2 then Y increases very rapidly with each filter firing. If k is negative then the time limit Y is shortened slowly or quickly depending on the magnitude of k after each filter firing event. The third event filter may be used when retailer put more importance on the first firing event than motion occurring over time. For example the retailer may implement the third event filter if it is very important to know the first time motion occurs above the threshold and less important though not unimportant to know that motion is occurring over time. In the case of retail item management analytics device may be notified as soon as a retail item is handled above a certain threshold e.g. 3 tilts in 25 seconds. If another 3 tilts occurs in the next 25 seconds the second event may not be as interesting as the first event since analytics device already knows the item is being handled. However retailers may want to know if the next 3 tilts occur within the next 10 seconds not 25 seconds in which constant m can be properly chosen such that the second filter firing occurs due to a high intensity handling event.

Another event filter is a fourth event filter that tapers the turning off of the filter to match real world handling of item . For example fourth event filter includes a filter counter that starts at 0 and increments 1 if motion above threshold 0 occurs. Anytime that the counter is greater than 0 a timer t is running. If the timer t reaches a predefined time limit Y prior to another motion above threshold the counter is decremented 1 and the timer is reset. If the counter reaches 0 the timer is reset but does not start again until there is another motion event above threshold. However if the filter counter reaches some threshold at any time the filter is satisfied i.e. the event trigger filter firing and the event is reported.

Another event filter is a composite event filter that includes at least two event filters of the same and or different filter type. One variation of the composite event filter is a series composite filter in which firing of a first filter disables the first filter and enables the second filter in the series. Firing of the second filter disables the second filter and enables a third filter in the series and so on until the final filter fires. After the final filter fires the final filter is disabled and the first filter is enabled such that the process repeats. For example firing of first event filter F enables the second event filter F while also disabling the first event filter F . For example a consumer may pick up and handle an item causing at least 5 motions X within 10 seconds such that the first event filter fires i.e. is triggered and then is disabled. The consumer may continue to handle the item but may start to intently examine the item thereby causing higher intensity firings over the next 10 seconds such that the second filter fires causing a tag event to be reported.

A second variation of the composite event filter is a parallel composite filter. In the parallel composite filter at least two event filters are grouped together in a set and firing by one of the event filters in the set constitutes firing of the set. For example the first event filter F and second event filter F may be grouped together in parallel in which firing of either filter constitutes firing of the set. For example filter Fmight be triggered after detection motion for X seconds while a second filter might be triggered after motion is detected for X Y seconds from the initial motion. A consumer may pick up item and start intensely handling the item i.e. inspects the item from all angles such that the second event filter that has time threshold of 30 seconds is triggered after the first event filter with a time threshold of 10 seconds with both time thresholds being based on the same starting point in time. The tag event is then reported.

A third variation of the composite event filter is a series parallel composite filter that includes at least three event filters in a series parallel configuration. For example the first event filter F may be in series with a set of parallel filters F F F in which the set of filters are inactive until the first event filter fires. After the first event filters fires the set of filters F F F are activated and the first event filter is deactivated. Firing of either F F or F will cause a report or event data to be transmitted to WSN access point . For example a consumer may pick up item examine the item and put item back down thereby triggering first event filter which will disable the first event filter and enable the parallel set of filters. The consumer may then pick up item for a second time as if still trying to decide whether to purchase item in which the handling of item the second time around is more intense i.e. the consumer lifts the item up in order examine under item . The examination causes the second event filter to trigger before the third and fourth event filters such that the event is reported and the set of parallel event filters are disabled the first event filter is enabled. The series parallel filter set approach is suited to defining complex motions of items which involve alternating acceleration and turning tilting of items. For example an initial translational acceleration followed by a series of tilting changes may be characteristic of item pick up and examination whereas a series of repeated cyclical translations and tilting my indicate examination of an item by a group of two or more people. Additionally a series parallel arrangement of filters based on infrequent but significant large in the X and Y directions but very frequent and smaller accelerations in the Z direction may be indicative of a person walking with an item in their possession.

Although the parallel serial and composite event filters are described with reference to a single WSN tag the invention is not limited to such. It is contemplated that the determination of the parallel serial and composite triggering can be made by WSN access point or analytics device using filters in those devices based on sensor data provided by multiple WSN tags or based on the firing of a set of filters in a single WSN tag . Furthermore when a set of WSN tags each with its respective internal series parallel set of filters is employed to monitor a collection of retail items the filter events from one tag may influence the activation and deactivation of filters or subsets of filters in other adjacent WSN tags . Such activation and deactivation of filters in adjacent WSN tags provides added utility in monitoring the activity in a particular part of a retail store in which WSN tag activity beyond a certain intensity with numbers of retail items greater than a predefined small number is not of great business importance since the store employee s response is not influenced by the additional event reporting. In other words this super filter may include filter sets from multiple WSN tags and may thus have a single event declaration associated with it by the WSN access point or analytics device.

Another event filter is a learning mode event filter. The learning mode event filter counts motion events and time intervals and uses a pre programmed function form with regression analysis or rules to determine its own parameters or selects from a list of pre programmed parameters options e.g. best fit Y and values . Once filter parameters are selected or determined the filter parameters are used when WSN tag is placed in normal activity mode. A variation of the learning mode approach is when one of WSN tags is instructed by WSN access point or analytics device to transmit raw motion sensor i.e. cease all filtering. In particular WSN tag may receive a command to report every slight movement X Xm for a small value of m in which the analytics device or other network entity uses the raw data to select an event filter and corresponding filter parameters that best fit the raw data.

For example the WSN tag set may include individual WSN tags located at fixed positions along the walls posts shelf supports and other fixed points along the normal walkways inside the retail store. These WSN tags may include proximity sensors not shown which detect when a person walks past or approaches inside a certain distance. During the sensor network training period the tags are instructed to send all detectable sensor readings i.e. readings above noise level to WSN access point via the wireless network. During the same period of time employees are assigned to count the number of people walking up and down each aisle either exhaustively or according to some statistics based sampling formula. Afterwards the raw proximity sensor data from the network of WSN tags is compared with the eye witness data to determine which filters and filter parameter values can best fit the actual store traffic data. The fitted filters can then be used subsequently and trusted to yield accurate reports of store customer traffic without the need for on site employee observation. Similar examples could be used to determine which filters and filter parameter sets best fit the meaningful types of item handling for the accelerometer based filters described above.

Analytics device and or WSN access point may then transmit the selected event filter and filter parameters to WSN tag and instruct WSN tag to implement to selected event filter and leave the learning mode i.e. enters normal activity mode using the selected event filter. Along with transmitting or stream raw data WSN tag may also tag or flag the raw data to indicate whether the handling of item that is initiating the stream is of interest to retailers based on predefined parameters. Alternatively the tagging or flagging may be done after the fact by reviewing video closed circuit television CCT recordings of the sales floor and watching for item handling. Time stamps or time intervals for these events of interest are matched with the time stamps intervals for the motion data and WSN tag raw data stream identified and flagged.

The learning mode filter allows WSN tag to off load complex modeling to device s with greater computational capabilities i.e. analytics device when the modeling is too complex to be handled by WSN tag . The learning mode filter may also be modified to include storage of the raw data from more than one WSN tags sampled over time in a cloud or local server based database for analysis. The motion database of raw data may be submitted to one or more of a number of different learning machines technologies such as fuzzy logic model development engines neural network analysis and various types of regression analyses.

Furthermore WSN tag may select its own filter parameters based upon the level of network activity. For example if WSN tag tries to deliver a message from a previous event or firing and finds that there is lots of activity on the network as determined using collision avoidance algorithms such as Carrier Sense Multiple Access with Collision Avoidance CSMA CA WSN tag may modify its own filter parameters to fire the filters more selectively or less often i.e. may switch event filter types or may modify specific filter parameters. The specific type of self censoring may be guided by external applications running in WSN access point or analytics device i.e. externally imposed reporting criteria. For example WSN tag may be instructed to report its five most extreme motion events in any 10 minute period and then WSN tag is left to iteratively modify its own filter parameters until on average WSN tag s filter reports meet the externally imposed reporting frequency criterion.

Referring back to Block S if processor determines an event filter has not been met processor repeats the determination of Block S. If processor determines an event filter has been met processor causes event data associated with the event to be reported to WSN access point i.e. the event filter fires Block S . After reporting the event processor performs the determination of Block S.

An exemplary tag event process is described with reference to . Processor determines whether event data associated with a tag event has been received from WSN tag Block S . Event data may include date time of an event tag ID type of event and other information related to event. For example WSN access point may receive a message indicating WSN tag has detected tag event indicating handling 256 event as discussed in detail with respect to . If processor determines event data has not been received from WSN tag processor repeats the determination of Block S. If processor determines event data associated with a tag event has been received from WSN tag processor causes tag state change data to be updated and stored in memory Block S . For example tag state change data may include a linked list of WSN tags that tracks which WSN tags are in a new state and details of the handling event that was reported of by WSN tag .

Processor determines whether to perform short path reporting Block S . Short path reporting includes transmitting a reporting message directly with any user device on the Wi Fi network without having to go to network and analytic device i.e. without having to transmit the reporting message to a cloud computing environment or off site software applications as an intermediary. Whether short path reporting is performed is based at least in part on the nature of the reporting message and tolerability of the reporting message latency among other factors. For example short path reporting is not required for some reports that are used for long term analytics such as understanding how customers are interacting with items for the purpose of understanding the effects of product placement price packaging and other merchandising considerations. In one embodiment soft reports may be included in the long term analytics type reports and therefore do not require short path reporting. Soft reports are discussed in detail with respect to .

Other reports that are urgent and motivated by the need to respond to a real time tag event such as a hard reporting event may be reported using short path reporting. For example a potential theft of item which has moved outside of a predetermined area may require reporting via short path reporting that has less reporting delay due to less device intermediaries. Hard reporting events are described in detail with respect to . If processor determines to short path reporting is required processor causes transceiver to transmit a short path message to user device via Wi Fi access point . In order for WSN access point to transmit to Wi Fi access point WSN access point may support at least two wireless protocols and may include two physical radios such as ultra high frequency UHF radio e.g. industrial scientific and medical ISM band or 868 915 MHz for wireless sensor network communication and a 2.4 GHz radio for communication over the Wi Fi network. Alternatively WSN access point may use a common radio and protocol for communication within system or user device may be part of the WSN network and adapted to receive short path messages. In some embodiments user device may itself function as WSN access point . In one example when the retail employee in possession of user device enters a physical region holding a set of WSN tags those WSN tags may detect and associate with the WSN network created by the newly arrived access points provided by user device . This embodiment provides added utility since user device can be in direct communication with all WSN tags in the general vicinity of the retail employee best able in terms of physical availability and reaction time to respond to local tag filter events.

Referring to the embodiment in which user device and WSN access point are separate devices communicating with each other over a Wi Fi network after transmitting the short path message processor determines whether a polling message has been received from analytics device Block S . If a polling message has not been received processor performs the determination of Block S. Furthermore WSN access point may update the flags in tag state change data . If processor determines a polling message has been received processor causes transceiver to transmit event data to analytics device Block S . After transmitting event data to analytics device processor performs the determination of Block S. Referring back to Block S if short path reporting is not required processor performs the determination of Block S. Alternatively Blocks S and S may be skipped or omitted based on design need. As mentioned above the particular details of the management of polling and response messages may be implemented using techniques such as RESTful web serving CoAP based messaging and other open standards based techniques designed to support robust and RESTful link stateless publisher subscriber communications.

An exemplary analytics process for tracking WSN tag states and generating reports is described with reference to . Processor causes WSN access point to be polled Block S . For example analytics device may transmit a polling command to WSN access point requesting tag state change data i.e. WSN tags that have changed state from the last time the polling command was sent. Processor determines whether WSN access point reports any WSN tag state changes in response to the polling command Block S . If processor determines that no WSN tag state changes have occurred processor returns to Block S i.e. analytics device may periodically poll WSN access point for WSN tag state changes.

If processor determines that at least one WSN tag state change has occurred based on received tag state change data processor generates at least two lists of WSN tags that are in new states i.e. tags that have changed states Block S . In particular one list includes reportable WSN tag states while the other list includes non reportable WSN tag states. For example non reportable WSN tag states require entry into motion database for establishing the existence of WSN tags and for further tracking the existence of WSN tag by itself does not require generating a report or alert as predefined by the retailer and or system administrator. In these cases WSN tag state change is not significant or does not provide new useful data relating to consumer handling of item . Reportable WSN tag state changes are predefined by the retailer and or system administrator in which the state changes generate a report or alert i.e. may transmit an alert to an employee s user interface device . Processor causes the received WSN tag state changes to be stored in motion database Block S . Processor generates report Block S . For example processor performs the reporting process as described in .

An exemplary reporting process for generating reports or alerts is described with reference to . Processor determines at least one recipient associated with each event on the reportable list of WSN tag events based on reporting parameters Block S . For example the reporting parameters may include the nature of the report reporting history and or incident escalation rules staff member ID availability of store employee among other factors. In one embodiment processor determines which recipient i.e. store employee should receive and act on a report alert based on whether the store employee has received a previous report within a predetermined time whether the store employee has acknowledged that a previous report has been acted on and or spatial location of user device associated with a user employee with respect to the location of WSN tag that generated the event. For example since user devices are part of the WSN the location of user devices and WSN tag may be determined based on spatial location methods such that processor determines that a first employee is closer to WSN tag than a second employee. In this case the first employee receives the report alert from analytics device .

WSN tag may be located within a store or predetermined location in which WSN access point may use the signal strength of message transmitted by WSN tag to determine the location of WSN tag . In other words the received signal strength indicator RSSI at WSN access point is used to determine WSN tag location. In one embodiment the received signal strength may be averaged over time in order to improve location determination accuracy. Further triangulation and curve fitting techniques based on Fri s law or empirical adaptations of Fri s law may then be used to determine the location of the transmitting WSN tag .

One type of report alert that may be generated are hard reports in which the hard reports are generated and send to a human or recipient system that causes immediate attention and response such as of urgent critical event reporting. For example a hard report may include an audio announcement over the retail store loud speakers or other audible alarm. Another example of hard report may include emails and or text messages to user device or other device that prompts an employee to respond.

Another type of report alert that may be generated is a soft report in which the recipient of the report e.g. employee may examine the report at a convenient time when the recipient is interested in considering events of a specific type or nature. In the case of retail item management the soft report may prompt an employee via user device to evoke a face to face customer service engagement with a consumer if the employee is in a position to respond to the report i.e. is available or is not already helping another customer. After processor determines recipient s for each report processor cause transceiver to transmit the reports to respective recipients Block S . For example the report may be communicated to a recipient via a loud speaker user device and or a desktop computer within the retail store such as at customer service among communicated to other devices capable of receiving and displaying and or announcing the report. Processor causes the report event to be stored in motion database Block S .

The present invention can be realized in hardware software or a combination of hardware and software. Any kind of computing system or other apparatus adapted for carrying out the methods described herein is suited to perform the functions described herein. Furthermore the invention may be realized using one or more radio technologies modulation types wireless protocols reporting platforms phone table pager etc. and may be incorporated in one or more types of messaging schema codes or code systems used to define the messages between WSN tag and WSN access point or between access points and other network devices or entities on site or in a cloud computing environment . Furthermore the functionality of analytics device may be implemented on a server on a retail store premise with WSN access point or may be included as part of WSN access point .

A typical combination of hardware and software could be a specialized or general purpose computer system having one or more processing elements and a computer program stored on a storage medium that when loaded and executed controls the computer system such that it carries out the methods described herein. The present invention can also be embedded in a computer program product which comprises all the features enabling the implementation of the methods described herein and which when loaded in a computing system is able to carry out these methods. Storage medium refers to any volatile or non volatile storage device. Furthermore system is not limited to retail item management as the WSN infrastructure and software modules describe herein may be used to enable other applications such as employee time management customer service request and response automated price updated and management asset tracking store traffic monitoring and area department security among other applications.

Computer program or application in the present context means any expression in any language code or notation of a set of instructions intended to cause a system having an information processing capability to perform a particular function either directly or after either or both of the following a conversion to another language code or notation b reproduction in a different material form.

In addition unless mention was made above to the contrary it should be noted that all of the accompanying drawings are not to scale. Significantly this invention can be embodied in other specific forms without departing from the spirit or essential attributes thereof and accordingly reference should be had to the following claims rather than to the foregoing specification as indicating the scope of the invention.

