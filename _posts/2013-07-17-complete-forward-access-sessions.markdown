---

title: Complete forward access sessions
abstract: A service provider manages access control to multiple services through an authentication system. One or more services are able to fulfill requests at least in part by submitting requests to other services of the service provider. Such a service is able to obtain, from the authentication system, information that can be passed on to one or more other services to enable the one or more other services to determine request validity without having to contact the authentication system. The information may include, for example, one or more responses that the one or more other services would have received had the one or more services contacted the authentication system themselves.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09521000&OS=09521000&RS=09521000
owner: Amazon Technologies, Inc.
number: 09521000
owner_city: Seattle
owner_country: US
publication_date: 20130717
---
The security of computing resources and associated data is of high importance in many contexts. As an example organizations often utilize networks of computing devices to provide a robust set of services to their users. Networks often span multiple geographic boundaries and often connect with other networks. An organization for example may support its operations using both internal networks of computing resources and computing resources managed by others. Computers of the organization for instance may communicate with computers of other organizations to access and or provide data while using services of another organization. In many instances organizations configure and operate remote networks using hardware managed by other organizations thereby reducing infrastructure costs and achieving other advantages. With such configurations of computing resources ensuring that access to the resources and the data they hold is secure can be challenging especially as the size and complexity of such configurations grow.

In the following description various embodiments will be described. For purposes of explanation specific configurations and details are set forth in order to provide a thorough understanding of the embodiments. However it will also be apparent to one skilled in the art that the embodiments may be practiced without the specific details. Furthermore well known features may be omitted or simplified in order not to obscure the embodiment being described.

Techniques described and suggested herein include systems and methods for managing access to resources such as computing resources hosted by a computing resource service provider. In some examples a service provider operates a plurality of services that are accessible to customers of the service provider. Access to the services may require utilization of various techniques for controlling access to resources so that only authorized access is allowed. Such techniques may include the use of electronic signatures or other mechanisms to enable proof of identity as a part of requesting resource access. To enable customers of the service provider to utilize multiple offered services the service provider may utilize a centralized authentication system also referred to as an authentication service that is configured within the system of the service provider as a whole to have authority with respect to access to the various services. For instance in some embodiments the various services may receive electronically signed requests and utilize the authentication service to verify the electronic signatures and therefore use verification of the electronic signatures to determine whether to fulfill the requests.

In various embodiments multiple services of the service provider operate in concert. For instance a request to one service may be fulfillable at least in part by the performance of one or more operations by another service. As an illustrative example one service may involve the management and coordination of one or more other services. When the service receives a request from a customer customer request the service may itself cause one or more other services to perform one or more operations to fulfill the requests. The service may itself for instance submit its own requests service requests to the other service s as a result of receiving a customer request. As another example the service may provide a management console that provides e.g. as web pages a convenient graphical user interface to assist customers in configuring computing resources using the various services of the service provider. In other examples a service may submit requests to other services independent of a pending customer request. For instance a service may operate in accordance with a timer triggers and or otherwise independently of a pending customer request. As an illustrative example a service may provide automatic scaling functionality. Upon the detection of one or more triggers system load of a remotely hosted customer system relative to capacity e.g. the service may submit one or more requests to another service to increase or decrease capacity or some other aspect of computing resources such as bandwidth as appropriate.

In various embodiments of the present disclosure techniques described and suggested herein provide for the collective operation of multiple services in furtherance of a goal with a lightened load on an authentication system. For instance in some examples one service may provide to another service information that enables determination of whether a request should be fulfilled without direct communication with the authentication service. In some embodiments a first service can submit an authentication request to the authentication system. The authentication request may be sent for instance in response to receipt of a customer request. The authentication request may include information that enables the authentication system to make a determination regarding the authenticity of certain information such as an electronic signature. In response to the authentication request the authentication system may provide an authentication response. If appropriate the authentication system may provide in or otherwise in connection with the authentication response information that is usable by other services to determine whether to fulfill received requests.

In some embodiments the authentication system provides in authentication responses a plurality of information instances. The plurality information instances may include a service wide information that is applicable to multiple perhaps all services provided by a service provider or in some embodiments multiple services of multiple service providers . The service wide information may comprise various information such as a signing key a copy of the signing key encrypted under a key accessible only to the authentication service and metadata in connection with an identity of the customer. The metadata may be electronically signed by the authentication service and usable by the first service to determine the identity and policy information associated with a second electronic signature provided with a request from the first service to the second service.

The plurality of information instances may also include one or more instances of service specific information that are each usable only by a service or set of services to which the service specific information applies. For a particular service an instance of service specific information may be an encrypted collection of information. The information when decrypted may enable a request signed with a signing key of the service wide information to be verified. The collection of information may be encrypted using a key shared exclusively between the particular service and the authentication service. In this manner a receiving service of an authentication response can forward a request signed using information from the service wide information and service specific information to another service e.g. as part of a request to the other service and the other service can use the service specific information service wide information to verify whether to perform one or more operations e.g. in response to the request .

The service wide information and service specific information may be derived e.g. cryptographically derived utilizing techniques to ensure the security of access to computing resources. The various services may lack access to the secret information shared between the authentication service and the customer. Each service specific information may be derived using at least in part information that is held secret between a corresponding service or between each service of a set of services corresponding to the service specific information and the authentication service. The customer and other services may lack access to the secret information used to derive the service specific information. In this manner the authentication service is able to control access to various services without the need to communicate directly with those services.

In some embodiments as illustrated in the customer may utilize the authentication service to prove authority to access one or more of the services through the system . As discussed in more detail below the customer may submit a request to or otherwise interact with the system . As a result the system may contact the authentication service .

As noted above a computing resource service provider may provide various computing resource services to its customers. The services provided by the computing resource service provider in this example include a virtual computer system service a block level data storage service a cryptography service also referred to as a key management service an on demand data storage service and one or more other services although not all embodiments of the present disclosure will include all such services and additional services may be provided in addition to or as an alternative to services explicitly described herein. Each of the services may include one or more web service interfaces that enable the customer to submit appropriately configured API calls to the various services through web service requests. In addition each of the services may include one or more service interfaces that enable the services to access each other e.g. to enable a virtual computer system of the virtual computer system service to store data in or retrieve data from the on demand data storage service and or to access one or more block level data storage devices provided by the block data storage service .

The virtual computer system service may be a collection of computing resources configured to instantiate virtual machine instances onto virtual computing systems on behalf of the customers of the computing resource service provider . Customers of the computing resource service provider may interact with the virtual computer systems service via appropriately configured and authenticated API calls to provision and operate virtual computer systems that are instantiated on physical computing devices hosted and operated by the computing resource service provider . The virtual computer systems may be used for various purposes such as to operate as servers supporting a website to operate business applications or generally to serve as computing power for the customer. Other applications for the virtual computer systems may be to support database applications electronic commerce applications business applications and or other applications.

The block level data storage service may comprise a collection of computing resources that collectively operate to store data for a customer using block level storage devices and or virtualizations thereof . The block level storage devices of the block level data storage service may for instance be operationally attached to virtual computer systems provided by the virtual computer system service to serve as logical units e.g. virtual drives for the computer systems. A block level storage device may enable the persistent storage of data used generated by a corresponding virtual computer system where the virtual computer system service may only provide ephemeral data storage.

As illustrated in the computing resource service provider may operate a cryptography service which is described in more detail below in connection with . Generally the cryptography service may be a collection of computing resources collectively configured to manage and use cryptographic keys for customers of the computing resource service provider. Keys used by the cryptography service may have associated identifiers that the customers can reference when submitting requests to perform cryptographic operations such as encryption decryption and message signing and or other operations such as key rotation. The cryptography service may securely maintain the cryptographic keys to avoid access by unauthorized parties.

The computing resource service provider may also include an on demand data storage service. The on demand data storage service may be a collection of computing resources configured to synchronously process requests to store and or access data. The on demand data storage service may operate using computing resources e.g. databases that enable the on demand data storage service to locate and retrieve data quickly so as to allow data to be provided in responses to requests for the data. For example the on demand data storage service may maintain stored data in a manner such that when a request for a data object is retrieved the data object can be provided or streaming of the data object can be initiated in a response to the request. As noted data stored in the on demand data storage service may be organized into data objects. The data objects may have arbitrary sizes except perhaps for certain constraints on size. Thus the on demand data storage service may store numerous data objects of varying sizes. The on demand data storage service may operate as a key value store that associates data objects with identifiers of the data objects which may be used by the customer to retrieve or perform other operations in connection with the data objects stored by the on demand data storage service . The on demand data storage service may also be accessible to the cryptography service . For instance in some embodiments the cryptography service utilizes the on demand data storage service to store keys of the customers in encrypted form where keys usable to decrypt the customer keys are accessible only to particular devices of the cryptography service . Access to the data storage service by a customer another service or other entity may be through appropriately configured API calls.

In the environment illustrated in a notification service is included. The notification service may comprise a collection of computing resources collectively configured to provide a web service or other interface and browser based management console that can be used to create topics customers want to notify applications or people about subscribe clients to these topics publish messages and have these messages delivered over clients protocol of choice i.e. HTTP email SMS etc. . The notification service may provide notifications to clients using a push mechanism without the need to periodically check or poll for new information and updates. The notification service may be used for various purposes such as monitoring applications executing in the virtual computer system service workflow systems time sensitive information updates mobile applications and many others.

The computing resource service provider may additionally maintain one or more other services based on the needs of its customers . For instance the computing resource service provider may maintain a database service for its customers . A database service may be a collection of computing resources that collectively operate to run one or more databases for one or more customers . Customers of the computing resource service provider may operate and manage a database from the database service by utilizing appropriately configured API calls. This in turn may allow a customer to maintain and potentially scale the operations in the database. Other services include but are not limited to object level archival data storage services services that manage and or monitor other services and or other services.

As illustrated in the computing resource service provider in various embodiments includes an authentication system and a policy management service . The authentication system in an embodiment is a computer system i.e. collection of computing resources configured to perform operations involved in authentication of users of the customer. For instance one of the services may provide information from the users to the authentication service to receive information in return that indicates whether or not the user requests are authentic. Determining whether user requests are authentic may be performed in any suitable manner and the manner in which authentication is performed may vary among the various embodiments. For example in some embodiments users electronically sign messages i.e. computer systems operated by the users electronically sign messages that are transmitted to a service. Electronic signatures may be generated using secret information e.g. a private key of a key pair associated with a user that is available to both an authenticating entity e.g. user and the authentication system. The request and signatures for the request may be provided to the authentication system which may using the secret information compute a reference signature for comparison with the received signature to determine whether the request is authentic.

If the request is authentic the authentication service may provide information to the service that the service can use to determine whether to fulfill a pending request and or to perform other actions such as prove to other services such as the cryptography service that the request is authentic thereby enabling the other services to operate accordingly. For example the authentication service may provide a token that another service can analyze to verify the authenticity of the request. Electronic signatures and or tokens may have validity that is limited in various ways. For example electronic signatures and or tokens may be valid for certain amounts of time. In one example electronic signatures and or tokens are generated based at least in part on a function e.g. a Hash based Message Authentication Code that takes as input a timestamp which is included with the electronic signatures and or tokens for verification. An entity verifying a submitted electronic signature and or token may check that a received timestamp is sufficiently current e.g. within a predetermined amount of time from a current time and generate a reference signature token using for the received timestamp. If the timestamp used to generate the submitted electronic signature token is not sufficiently current and or the submitted signature token and reference signature token do not match authentication may fail. In this manner if an electronic signature is compromised it would only be valid for a short amount of time thereby limiting potential harm caused by the compromise. It should be noted that other ways of verifying authenticity are also considered as being within the scope of the present disclosure.

The policy management service in an embodiment is a computer system configured to manage policies on behalf of customers of the computing resource service provider. The policy management service may include an interface that enables customers to submit requests related to the management of policy. Such requests may for instance be requests to add delete change or otherwise modify policy for the customer or for other administrative actions such as providing an inventory of existing policies and the like. The policy management service may also interface with other services to enable the services to determine whether the fulfillment of a pending request is allowable according to policy corresponding to the customer for which the request was made. For example when a service receives a request the service if it has not locally cached such information may transmit information about the request and or the request itself to the policy management system which may analyze policies for the customer to determine whether existing policy of the customer allows fulfillment of the request and provide information to the service according to the determination.

As discussed above the computing resource service provider may provide a service which may utilize another service as part of its operations. Access to the services may utilize an authentication service such as discussed above. For example the authentication service may be a system configured with authority to determine whether access to the services is allowable in various instances such as in response to requests received from the customer . As illustrated in the customer may submit a request to the first service .

The request from the customer to the service may include an electronic signature based at least in part on the request and a customer key indicated in the diagram of as Key. The key Key may comprise secret information shared between the customer and the authentication service . The key Key may for instance comprise a long term credential for the customer for use with the computing resource service provider . The customer and authentication service may restrict access to the customer key for the purpose of ensuring the integrity of data managed on behalf of the customer and or otherwise to provide security to the computing resources corresponding to the customer .

Upon receipt of the request and electronic signature the service may interact with the authentication service to determine whether to fulfill the request from the customer . In an embodiment as illustrated in the service may provide the request and electronic signature to the authentication service . While not illustrated as such additional information may be provided from the service to the authentication service . For instance information that enables the authentication service to select the key Key from multiple keys accessible to the authentication service and use Keyto verify the signature may be provided. In addition an electronic signature of a request authentication request to the authentication service from the service may also be included to enable the authentication service to determine whether the authentication request is authentic. The electronic signature from the service may be generated using a key held in secret between the authentication service and authentication service .

It should be noted that while various embodiments of the present disclosure use symmetric cryptographic processes where the sender and receiver utilize the same cryptographic key in a cryptographic process the various techniques described herein may be modified to utilize one or more asymmetric cryptographic techniques where the sender and receiver use different cryptographic keys in a cryptographic process such as a public private key pair in a public key cryptographic encryption decryption or message signing algorithm . For instance as noted above various embodiments of the present disclosure utilize techniques wherein digital signatures are generated using symmetric keys shared secretly between entities e.g. between a customer and an authentication or other service . The various techniques described above are adaptable to utilize digital signatures generated using secret information exclusively accessible to a particular entity e.g. customer or service . A digital signature may be generated for instance using the Digital Signature Algorithm DSA the Elliptic Curve Digital Signature Algorithm ECDSA the RSA digital signature algorithm and or authenticated encryption.

Returning to the embodiment illustrated in the figure the authentication service may be configured to determine the authenticity of the electronic signature provided from the customer such as by using the customer key Key to generate a signature for the request to determine whether the generated signature matches the signature that was provided from the service . If the generated signature matches the signature that was provided from the service the authentication service may determine that the request from the customer is authentic thereby enabling the service to determine that the request should be fulfilled. In particular as illustrated in in some embodiments the authentication service provides an authentication response to the service indicating a determination of the authentication service whether the signature provided from the service to the authentication service is authentic.

The authentication response may include various information such as an attestation that the signature provided from the service matches the customer one or more policies associated with the customer to be enforced by the service and or other services . In an embodiment the authentication service also provides with the authentication response temporary credentials that the service can use to make calls to the other services related to the request submitted by the customer . In an embodiment the temporary credentials which may not be temporary in all embodiments are provided in service wide information indicated in the diagram as Info. In an embodiment the service wide information is a key or generally information generated at least in part on the customer key or otherwise generated based at least in part on secret information shared between the customer and the authentication service . In an embodiment the service wide information is different from the customer key and generally different from the secret information shared between the customer and the authentication service so as not to expose to other services the customer key or other secret information. In an embodiment the service wide information comprises various information such as a signing key illustrated in the figure as Key a copy of the signing key encrypted under a key accessible only to the authentication service and metadata in connection with an identity of the customer. The metadata may be electronically signed by the authentication service and usable by the first service to determine the identity and policy information associated with a second electronic signature provided with a request from the first service to the second service. The service wide information may also include information encrypted e.g. using an appropriate mode of the advanced encryption standard AES under a key held secretly by the authentication service where the information includes an attestation to the identity of the customer a timestamp policy information a signature of the attestation and or timestamp and or policy information.

In an embodiment the service wide information Infois usable by the service to access one or more other services such as the second service . Accordingly as illustrated in the first service may submit a request to the second service with a digital signature generated using the signing key from the service wide information. The second service on receipt of the request may provide the request and digital signature along with other information such as an identity of the requestor and or signing key to the authentication service e.g. in an authentication request in order to cause the authentication service to make a determination whether the request from the first service should be fulfilled. The authentication service may use its secret key to decrypt the information encrypted in the service wide information verify the decrypted information and use the signing key in the encrypted information to verify the signature. If the signature is determined by the authentication service to be valid the authentication service may generate service specific information indicated in the diagram as Infowhich may be then provided to the second service with an authentication response such as described above. It should be noted that the authentication response provided from the authentication service to the service may be the same as or different from the authentication response received by the service . For instance the authentication response received by the second service may include the same type of information as the authentication response received by the service but specific to the service . In some embodiments the type s of information included in an authentication response received by each service may vary by service.

The service specific information may include encrypted under a key shared between the second service and the authentication service the signing key Key or a derivation thereof. Generally the service specific information may include a key whether the signing key or a derivation thereof that the second service can use to verify a signature from the first service. An example way a derivation of the signing key can be include in the service specific information Info is as follows Key date region service where where date region and service are parameters corresponding respectively to limitations on the date region and service in which the key Keyis usable where f is any suitable function and Eis an encryption function e.g. application of an appropriate mode of AES that uses a key shared secretly between the second service and the authentication service and where f f f Key date region service is an argument along with the request to a digital signature algorithm that will produce a reference digital signature that matches the received signature if the received signature is valid. In other words the first service may have generated the digital signature by using f f f Key date region service as a key into a digital signature algorithm. In some embodiments f represents a hash based message authentication code HMAC generated based on the arguments to the function. In some embodiments the second service decrypts the service specific information to obtain Key uses Keyto generate f f f Key date region service and uses f f f Key date region service to verify the signature from the first service. In other embodiments decrypting the service specific information results in f f f Key date region service which is then used to verify the signature from the first service. In yet other embodiments the decrypted service specific information results in a partial derivation e.g. f f Key date region which the second service finishes e.g. to obtain f f f Key date region service for use in verifying a signature from the first service. It should be noted that a derivation of a signing key can also be referred to as a signing key such as when the derivation is used to generate a digital signature.

It should be noted that the order in which the parameters are input into the iterative use of the function f and the way the parameters are encoded may be based on a canonical system utilized throughout the services of the computing resource service provider . In other words when a service verifies a received service specific information the service will generate a reference key using the same canonical system e.g. by encoding the date in the same way and inputting the date in the same order . In this manner the service will only be able to positively verify the service specific information it received if it uses the same parameters and the same secret key shared with the authentication service. Thus for instance in this illustrative example if the service specific information is provided on a different date than when generated the service receiving the service specific information will be unable to verify the service specific information and as a result will not determine to perform one or more operations on the sole basis of having received the service specific information although other information such as a subsequent communication from the authentication service may be usable to determine to perform one or more operations despite having received an invalid service specific information . It should further be noted that the particular parameters of date region and service are provided for the sake of illustration and different sets of parameters may be used. For example generally limitation on key use may be used as a parameter. Further while the above illustrates a specific calculation that utilizes iterative invocations of the same function different functions may be used. For instance the output of one function may be used as an input to another function. Further a single function may take as input all parameters. Other variations are considered as being within the scope of the present disclosure.

In some embodiments the service specific information for a service includes metadata that is electronically signed by the authentication service so that the electronic signature of the metadata is verifiable by the service thereby enabling the service to determine the authenticity of the metadata. For instance the metadata may be electronically signed using a secret key shared exclusively between the service and the authentication service. For example the metadata may include identity information origination information and or policy information associated with the service specific information. The identity information may specify an identity of the customer that submitted the request to the first system. The identity information may enable a service to access resources associated with the identity and to perform other operations such as generate one or more bills for the customer. The origination information may specify an identity of an originator of a request to the second service e.g. an identity of the first service . The policy information may encode one or more policies applicable to the customer and or specific identity of a user associated of the customer where the policies are obtained from a data store by the authentication service and provided for enforcement by the first service second service and or other service. Thus the authentication service may provide information that indicates the signature from the customer is valid but another service may nevertheless deny a request due to fulfillment of the request being disallowed by policy provided from the authentication service. The metadata may be structured such that the service receiving the metadata is able to verify that a request from another service that includes the metadata as part of the service specific information is from and or for one or more identities e.g. service and or customer matching the metadata and that fulfillment of the request is in accordance with any policy encoded in the metadata. The metadata data may be part of the information of the service specific information that is encrypted and decryptable by the service or may be provided separately such as in a token provided outside of the encrypted data.

In this manner the second service can use its own version of the secret information to determine whether requests from the first service made on behalf of the customer are authentic. For example as noted above the second service may upon receipt of the of a digitally signed request from the first service use its own copy of secret information to decrypt the service specific information and use the decrypted service specific information to determine if the digital signature received from the authentication service is authentic. For instance if the second service generates a reference signature that matches the digital signature from the first service a request may be fulfilled and conversely if there is not a match the request may be denied or otherwise verified . In addition when the second service receives service specific information either from the authentication service or as described below from the first service or a customer computer system the second service may insert some or all of the service specific information or information derived therefrom into a cache that that second service can use for future requests from the first service. When another request is received the second service may check the cache before processing e.g. decrypting service specific information received with the request. In other words the second service may process service specific information received in a request in the event of a cache miss.

As noted numerous variations are considered as being within the scope of the present disclosure. For example the environment is simplified for the sake of illustration of certain concepts. Other environments within the scope of the present disclosure include those that are different than what is illustrated. For example in some embodiments services maintain a cache of responses from the authentication service . Before communicating with the authentication service the service may check its cache to determine whether a determination whether to fulfill a request can be made without contacting the authorization service. The second service may for instance cache the service specific information and or information contained therein so that at least some future requests from the first request on behalf of the customer can be verified without contacting the authentication service. In addition various information is shown as being transmitted from one component to the other. Such information may vary according to the various embodiments. As just one example of an alternative information passed from one component to the other may be different from but based at least in part on the information discussed and illustrated in the figures. Additional layers of encryption may be used as may additional electronic signatures to enable various components to verify the authenticity of communications. Further the variations discussed above in connection with are applicable to other environments such as those discussed below. Conversely variations discussed below are likewise applicable to the environment discussed above in connection with .

In an embodiment the environment and in particular the computing resource service provider is configured such that the first service is able to access the one or more other services without the other services requiring communication with the authentication service . In other words the computing resource service provider may operate such that information from the first service is sufficient for authentication of requests but determinations on authentication is ultimately controlled by the authentication service . For instance referring to instead of a single request from the customer causing the authentication service to communicate with two separate services a single request from the customer may result in utilization of multiple services with only one service communicating with the authentication service . In this manner load on the authentication service is reduced better latency with the authentication service is attained network resources are freed up and other advantages are achieved.

As illustrated in such may be accomplished through the passage of appropriately configured information. For example as illustrated in the customer may submit a request and an electronic signature for the request to the first service . The electronic signature may be signed using a customer key such as described above in connection with . Upon receipt of the request in the electronic signature for the request the first service may provide the request and the electronic signature to the authentication service . As discussed above in connection with the authentication service may provide in response to the request from the first service an authentication response and service wide information such as described above. In addition however to the authentication response and the service wide information the authentication service may provide one or more instances of service specific information which in the figure are identified by Infothrough Info. Also the authentication service may include for the one or more services corresponding service specific authentication responses. A service specific authentication response may be a response that a corresponding service would receive from the authentication service if the service were to submit the service wide information to the authentication service itself such as described in . The service specific authentication response may include information specific to the corresponding service such as described above. For instance the service specific authentication response may include policy associated with the customer and applicable to the corresponding service an attestation to the identity of the customer and an electronic signature generated based at least in part on a secret key shared between the corresponding service and the authentication service but lacked by other services where the electronic signature is usable by the corresponding service to verify the authenticity of information provided in the service specific authentication response. As discussed above the service specific information may include a signing key that is included in the service wide information and or a derivation thereof. Further the service specific information may be encrypted such that a corresponding service e.g. the second service in can decrypt the service specific information but such that other non corresponding services cannot decrypt the service specific information. For instance the some or all of the service specific information may be encrypted using a secret key shared exclusively between the corresponding service and the authentication service.

In other words the first service receives information that another service would have received in response to a communication with the authentication service to determine whether or not to perform one or more operations. In addition the service specific information may be provided to the first service in the form of an authentication response that another service e.g. in the figure Service through Service N would have received had the other service contacted the authentication service itself. In this manner the first service may digitally sign requests to other services using a signing key provided in the service wide information and provide with the requests and signatures appropriate service specific information to another service utilized in fulfilling a request from the customer . For example the service specific information Info may correspond to a second service labeled in the figure as Service . The first service may provide the request a signature of the request using a signing key from the service wide information and the service specific information Info to the second service . In this manner the second service may utilize the its own secret key shared with the authentication service to decrypt the service specific information obtain a signing key or derivation thereof from the decrypted service specific information and use the signing key or derivation thereof to determine whether the generated key matches the provided service specific information Info. In other words the second service is able to utilize the information provided from the first service in order to determine whether or not to perform one or more operations in response to a communication from the first service . The second service therefore does not need to communicate with the authentication service to determine whether to fulfill the request from the first service. However the second service is able to determine whether to perform one or more operations under authority of the authentication service because of the use of secret information shared with the authentication service . In addition the information usable by the second service to determine whether to perform one or more operations is information that the first service is unable to utilize or access due to having been generated using secret information that is shared by the authentication service and the second service but that which the first service lacks. Further since the service specific information received from the second service from the first service is in the form of an authentication response that the second service would have received had it contacted the authentication itself to verify the signature the second service is able to cache some or all of the service specific information or information derived therefrom and utilize a cache for future requests from the first service.

As with all environments illustrated herein variations are considered as being with the scope of present disclosure. For example as illustrated in a first service communicates with an authentication service in response to a request received from a customer of a computing resource service provider. It should be noted that the scope of the present disclosure extends to embodiments where a synchronous request from the customer does not necessarily precede the transfer of information as illustrated in and variations thereof. As one illustrative example referring to the first service may be an auto scaling service that measures various activity in connection with computing resources managed by the computing resource service provider and performs scaling operations in response thereto. As one example if a customer utilizes the computing resource service provider to operate a website the auto scaling service may add or subtract web servers supporting the website as appropriate. Such auto scaling operations may be performed without a synchronous customer request present. That is the operations may be performed in response to one or more triggers that do not include a pending request from the customer although the customer may have submitted a request asynchronously e.g. to set up auto scaling prior to any auto scaling operations.

As an example of another variation as considered within the scope of the present disclosure illustrates service wide information and service specific information being provided to each of the other services . Additional information may be included as well. For example each of the services may be provided the service specific information for each of the services or s subset thereof . Each of the services may share secret information with the authentication service that the other services and the service lack. In this manner the first service may provide to each service both information that is usable by that service to determine whether to perform one or more operations and other information that is not usable by that service because it cannot be decrypted e.g. . In this manner this first service is not required to determine which service gets which information and the services can each make such determinations on their own.

Other variations are also considered as being within the scope of the present disclosure. For example as noted above certain operations illustrated in as being performed at the computing resource service provider may be performed client side such as on a computers system of a customer of the computer resource service provider. accordingly shows an illustrative example of an environment in which various embodiments may be practiced. As illustrated in the environment may include components such as those described above. For instance as illustrated in the environment includes a customer of a computing resource service provider such as described above. The computing resource service provider may include one or more services and an authentication service . Instead of from a service of the computing resource service provider the customer that is a computer system of the customer may submit an authentication request with a corresponding electronic signature to the authentication service of the computing resource service provider . The authentication service may verify the electronic signature provided from the customer and may provide an authentication response that if the electronic signature is valid includes service wide information such as described above.

The customer then may submit a request to the service using a signing key or derivation thereof from the service wide information such as described above. The service may then provide the request and digital signature to the authentication service which may provide an authentication response and service specific information to the service in response. The service may fulfill or deny the request according to the authentication response. As discussed the service may cache information the service specific information and or information obtained therefrom to be used for future requests to avoid at least some communications with the authentication service. The service may for instance may decrypt the service specific information using a key to which the service has access obtain the signing key or derivation thereof from the decrypted service specific information and use the signing key or derivation thereof from the service specific information to verify one or more future requests from the customer without a need to contact the authentication service.

In embodiments where various operations are performed client side such as illustrated in the various techniques described herein may be utilized to allow services to determine whether to perform operations without a need to communicate with an authentication service. accordingly shows an illustrative example of an environment which may be used to implement various embodiments of the present disclosure. The environment may include various components such as described above including a customer of a computing resource service provider . The computing resource service provider may include one or more services the access to which is ultimately controlled by an authentication service . As illustrated in a customer may submit an authentication request directly to the authentication service allowing with an electronic signature which may be verified by the authentication service . Upon a positive verification the authentication service may provide to the customer an authentication response that includes a service wide information and service specific information for one or more services such as described above. The customer may then use a signing key or derivation thereof from the service wide information to sign a request to another service which is transmitted to the other service with the service specific information. Each of the services may use a secret shared between the service and the authentication service but that is lacked by the customer and the other services to decrypt corresponding service specific information to obtain a signing key or derivation thereof from the service specific information. The signing key or derivation thereof may be used to and determine whether the request from the customer is authentic without contacting the authentication service. In this manner each of the services are able to independently verify without communication with the authentication service whether to perform one or more operations in response to a communication from the customer .

Upon receipt of the customer request and electronic signature the process may include requesting an authentication determination from an authentication service such as described above. As discussed above requesting an authentication determination may be performed by submitting an authentication request to an authentication system. Accordingly a response from the authentication service may be received in response to the request for the authentication determination. The response from the authentication service may be analyzed and a determination may be made whether the customer request is authentic. For instance the response may be an authentication response such as discussed above that includes an attestation to the identity provided as a result of a positive authentication determination. If it is determined that the customer request is authentic that is that the authentication response from the authentication service allows the customer request to be fulfilled the process may include fulfilling the customer request. The manner in which the request may be fulfilled may vary in accordance with the various embodiments and in accordance with the type of request was submitted.

The process may also include using a service wide information and a service specific information from the authentication service response to submit one or more requests to one or more other services such as described above. For instance the process may include using a signing key from service wide information received from the authentication service to sign a request to another. The request to the other service may be provided to the other service with service specific information for the other service. Other information such as an authentication response may also be provided to the one or more other services. The authentication response may be an authentication response that the one or more services would have received themselves had the one or more services provided the service wide information to the authentication service themselves for an authentication determination from the authentication service. It should be noted that while illustrates fulfilling the customer request and using the service wide information and the service specific information to submit one or more requests to one or more other services as separate operations fulfillment of the customer request may include use of the service wide information and service specific information to submit one or more requests to one or more other services. Other variations including repeating operations of the process to submit requests to additional services are also considered as being within the scope of present disclosure such as described above and below.

Returning to process illustrated in if it is determined that the customer request is not authentic then the customer request may then be denied . Denial of the customer request may be performed in any suitable manner such as by providing that the request is denied providing one or more reasons why the request was denied or by not taking any action and or generally in any suitable manner. As noted variations of process and all processes described herein are considered as being within the scope of the present disclosure. For example additional operations may be included in the process . In some embodiments for instance services may cache responses from an authentication service. Accordingly the process may include checking a cache to determine whether information usable to determine authenticity of the customer request has been cached. An authentication request to the authentication service may occur when such information is not found in the cache. Other variations are also considered as being within the scope of the present disclosure.

If however it is determined that the signature is not authentic the process may include providing an authentication response without the service wide information and without the service specific information. An authentication response may for example indicate a failure to verify the electronic signature. In this manner the service wide information and service specific information are only provided when the signature that was received is authentic.

As with all processes discussed herein variations are considered as being within the scope of the present disclosure. For example shows generation of a service wide information and one or more service specific information upon determining that the signature that was received is authentic. It should be noted however that in some embodiments the order of operations performed may vary. For example the service wide information and or one or more service specific information may be generated before receipt of the request and or determination whether the signature is authentic. A system performing the process or a variation thereof may for instance pre generate service wide information and or service specific information and store the service wide information and service specific information in a cache that is accessed upon a determination that a signature provided in an authentication request is authentic.

As another example as noted above a system performing the process may selectively provide service specific information for a selected proper subset of services configured with the ability to use service specific information to authenticate signatures from other services. Accordingly in some embodiments the process and variations thereof include selecting which service specific information to generate and or provide. Selection may be made in various ways in accordance with the various embodiments. For example in some embodiments the authentication request may indicate which service specific information to provide. A customer request may for instance be fulfillable using a subset e.g. proper or other subset of services of a service provider. As an example some types of requests may have associated subsets of services. As a result of receiving the customer request an authentication request may be submitted that specifies the services of the proper subset or generally any subset . The system performing the process may generate and or provide service specific information that has been specified. As noted in more detail below selection of what service specific information to provide may be performed in various ways such as by analyzing past customer behavior to determine which services are likely to be needed. As one illustrative example a database used by the system performing the process may maintain an association between the customer and a set of services the customer utilizes e.g. has resources in . Other additional operations that may be performed by a system performing the process include performing other operations such as policy evaluation in determining the authentication response. Other variations are also considered to be within the scope of the present disclosure.

If it is determined that the service request is provided with service specific information the process may include using the and a secret key to decrypt the service specific information obtain a signing key from the service specific information and generating a reference signature of the request using the obtained signing key. As noted a derivation of the signing key such as described above may be obtained and used to generate the reference signature. A determination may then be made whether the generated reference signature matches the received signature. If it is determined that the reference signature matches the received signature the process may include fulfilling the service request. Fulfillment of the service request may include the performance of one or more operations and or providing a response to the service request. If however it is determined that the request is not provided with service specific information the process may include requesting an authentication determination from an authentication service such as described above. A response from the authentication service may then be received and a determination may then be made whether the service request is authentic such as described above. If however it is determined that the generated reference signature does not match the received signature or if it is otherwise determined that the service request is not authentic the process may include denying the service request such as described above.

It should be noted that variations are considered as being within the scope for the present disclosure. For example the process may include operations in addition to those illustrated in the Figure. As an example as noted above a service request may include one or service specific information for one or more other services where some of the service specific information is inapplicable to the service for which the process is being performed. The process may therefore include selecting appropriate service specific information from the information that was received with the service request. The request may for example include information that is useable to identify which key to select and or the information may be organized in a canonical manner that enables selection of the appropriate service specific information. As another example the process illustrates denying the service request upon a determination that the generated reference signature does not match the received signature. As a variation the process may include requesting an authentication determination from the authentication service if it is determined that the reference signature does not match the received signature. It may be for example that the received service specific information is expired and communication with the authentication service is thereby required. In other words it may be that despite the invalidity of the received signature the request may nevertheless be fulfillable upon a determination that the request is fulfillable from the authentication service.

As yet another example as noted above a service request may in addition to a service specific information include an authentication response that may include various information such as policy applicable to the customer and or the system providing the service request. For instance as noted service specific information may authenticate metadata and determine whether the metadata is sufficient for fulfilling the request. For instance a service receiving the service specific information in connection with a request may check whether the identity of the requestor matches an identity in the metadata and whether fulfilling the request would be in accordance with any policy encoded in the metadata. Accordingly the process may include using this information e.g. evaluating policy according to the manner in which a system performing the process is programmed to use the information.

Other variations are also considered as being within the scope of the present disclosure. For example as noted above an authentication service may provide in response to an authentication request service specific information for each service of a set of services. In various embodiments the authentication service may selectively provide service specific information instead of for instance providing service specific information for all services for which service specific information is providable. It may be for example that a system is configured to provide responses of a particular length and therefore only a certain number of instances of service specific information are providable. Accordingly various embodiments of the present disclosure allow for intelligent selection of service specific information in order to optimize system performance and reduce the amount of information transferred across a network.

As yet another example customer service use information may indicate services that the customer is likely to use. As one example some services may frequently be used by customers together where frequency may be measured across multiple e.g. all customers. As one example customers of a virtual computer system service may use a lock level beta storage service more often than other services. Accordingly the service use information may include such services that are frequently used together. Generally this customer service use information may include any information which prioritizes or otherwise indicates which service specific information should be provided by an authentication service. Accordingly the process includes determining a set of services for the customer based at least in part on the customer service use information. An authentication service may then be configured to provide service specific information for each of the determined set of services. Configuring the authentication service may be performed for instance by updating a database used by the authentication service to select which service specific information to provide and or by updating programming logic of the authentication service to cause the authentication service to operate in accordance with the determined set of services for the customer.

The illustrative environment includes at least one application server and a data store . It should be understood that there can be several application servers layers or other elements processes or components which may be chained or otherwise configured which can interact to perform tasks such as obtaining data from an appropriate data store. Servers as used herein may be implemented in various ways such as hardware devices or virtual computer systems. In some contexts servers may refer to a programming module being executed on a computer system. As used herein the term data store refers to any device or combination of devices capable of storing accessing and retrieving data which may include any combination and number of data servers databases data storage devices and data storage media in any standard distributed or clustered environment. The application server can include any appropriate hardware and software for integrating with the data store as needed to execute aspects of one or more applications for the client device handling some even a majority of the data access and business logic for an application. The application server may provide access control services in cooperation with the data store and is able to generate content such as text graphics audio and or video to be transferred to the user which may be served to the user by the web server in the form of HyperText Markup Language HTML Extensible Markup Language XML or another appropriate structured language in this example. The handling of all requests and responses as well as the delivery of content between the client device and the application server can be handled by the web server. It should be understood that the web and application servers are not required and are merely example components as structured code discussed herein can be executed on any appropriate device or host machine as discussed elsewhere herein. Further operations described herein as being performed by a single device may unless otherwise clear from context be performed collectively by multiple devices which may form a distributed system.

The data store can include several separate data tables databases or other data storage mechanisms and media for storing data relating to a particular aspect of the present disclosure. For example the data store illustrated may include mechanisms for storing production data and user information which can be used to serve content for the production side. The data store also is shown to include a mechanism for storing log data which can be used for reporting analysis or other such purposes. It should be understood that there can be many other aspects that may need to be stored in the data store such as for page image information and to access right information which can be stored in any of the above listed mechanisms as appropriate or in additional mechanisms in the data store . The data store is operable through logic associated therewith to receive instructions from the application server and obtain update or otherwise process data in response thereto. In one example a user through a device operated by the user might submit a search request for a certain type of item. In this case the data store might access the user information to verify the identity of the user and can access the catalog detail information to obtain information about items of that type. The information then can be returned to the user such as in a results listing on a web page that the user is able to view via a browser on the user device . Information for a particular item of interest can be viewed in a dedicated page or window of the browser. It should be noted however that embodiments of the present disclosure are not necessarily limited to the context of web pages but may be more generally applicable to processing requests in general where the requests are not necessarily requests for content.

Each server typically will include an operating system that provides executable program instructions for the general administration and operation of that server and typically will include a computer readable storage medium e.g. a hard disk random access memory read only memory etc. storing instructions that when executed by a processor of the server allow the server to perform its intended functions. Suitable implementations for the operating system and general functionality of the servers are known or commercially available and are readily implemented by persons having ordinary skill in the art particularly in light of the disclosure herein.

The environment in one embodiment is a distributed computing environment utilizing several computer systems and components that are interconnected via communication links using one or more computer networks or direct connections. However it will be appreciated by those of ordinary skill in the art that such a system could operate equally well in a system having fewer or a greater number of components than are illustrated in . Thus the depiction of the system in should be taken as being illustrative in nature and not limiting to the scope of the disclosure.

The various embodiments further can be implemented in a wide variety of operating environments which in some cases can include one or more user computers computing devices or processing devices which can be used to operate any of a number of applications. User or client devices can include any of a number of general purpose personal computers such as desktop laptop or tablet computers running a standard operating system as well as cellular wireless and handheld devices running mobile software and capable of supporting a number of networking and messaging protocols. Such a system also can include a number of workstations running any of a variety of commercially available operating systems and other known applications for purposes such as development and database management. These devices also can include other electronic devices such as dummy terminals thin clients gaming systems and other devices capable of communicating via a network.

Various embodiments of the present disclosure utilize at least one network that would be familiar to those skilled in the art for supporting communications using any of a variety of commercially available protocols such as Transmission Control Protocol Internet Protocol TCP IP protocols operating in various layers of the Open System Interconnection OSI model File Transfer Protocol FTP Universal Plug and Play UpnP Network File System NFS Common Internet File System CIFS and AppleTalk. The network can be for example a local area network a wide area network a virtual private network the Internet an intranet an extranet a public switched telephone network an infrared network a wireless network and any combination thereof

In embodiments utilizing a web server the web server can run any of a variety of server or mid tier applications including Hypertext Transfer Protocol HTTP servers FTP servers Common Gateway Interface CGI servers data servers Java servers and business application servers. The server s also may be capable of executing programs or scripts in response to requests from user devices such as by executing one or more web applications that may be implemented as one or more scripts or programs written in any programming language such as Java C C or C or any scripting language such as Perl Python or TCL as well as combinations thereof. The server s may also include database servers including without limitation those commercially available from Oracle Microsoft Sybase and IBM .

The environment can include a variety of data stores and other memory and storage media as discussed above. These can reside in a variety of locations such as on a storage medium local to and or resident in one or more of the computers or remote from any or all of the computers across the network. In a particular set of embodiments the information may reside in a storage area network SAN familiar to those skilled in the art. Similarly any necessary files for performing the functions attributed to the computers servers or other network devices may be stored locally and or remotely as appropriate. Where a system includes computerized devices each such device can include hardware elements that may be electrically coupled via a bus the elements including for example at least one central processing unit CPU or processor at least one input device e.g. a mouse keyboard controller touch screen or keypad and at least one output device e.g. a display device printer or speaker . Such a system may also include one or more storage devices such as disk drives optical storage devices and solid state storage devices such as random access memory RAM or read only memory ROM as well as removable media devices memory cards flash cards etc.

Such devices also can include a computer readable storage media reader a communications device e.g. a modem a network card wireless or wired an infrared communication device etc. and working memory as described above. The computer readable storage media reader can be connected with or configured to receive a computer readable storage medium representing remote local fixed and or removable storage devices as well as storage media for temporarily and or more permanently containing storing transmitting and retrieving computer readable information. The system and various devices also typically will include a number of software applications modules services or other elements located within at least one working memory device including an operating system and application programs such as a client application or web browser. It should be appreciated that alternate embodiments may have numerous variations from that described above. For example customized hardware might also be used and or particular elements might be implemented in hardware software including portable software such as applets or both. Further connection to other computing devices such as network input output devices may be employed.

Storage media and computer readable media for containing code or portions of code can include any appropriate media known or used in the art including storage media and communication media such as but not limited to volatile and non volatile removable and non removable media implemented in any method or technology for storage and or transmission of information such as computer readable instructions data structures program modules or other data including RAM ROM Electrically Erasable Programmable Read Only Memory EEPROM flash memory or other memory technology Compact Disc Read Only Memory CD ROM digital versatile disk DVD or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store the desired information and which can be accessed by the system device. Based on the disclosure and teachings provided herein a person of ordinary skill in the art will appreciate other ways and or methods to implement the various embodiments.

The specification and drawings are accordingly to be regarded in an illustrative rather than a restrictive sense. It will however be evident that various modifications and changes may be made thereunto without departing from the broader spirit and scope of the invention as set forth in the claims.

Other variations are within the spirit of the present disclosure. Thus while the disclosed techniques are susceptible to various modifications and alternative constructions certain illustrated embodiments thereof are shown in the drawings and have been described above in detail. It should be understood however that there is no intention to limit the invention to the specific form or forms disclosed but on the contrary the intention is to cover all modifications alternative constructions and equivalents falling within the spirit and scope of the invention as defined in the appended claims.

The use of the terms a and an and the and similar referents in the context of describing the disclosed embodiments especially in the context of the following claims are to be construed to cover both the singular and the plural unless otherwise indicated herein or clearly contradicted by context. The terms comprising having including and containing are to be construed as open ended terms i.e. meaning including but not limited to unless otherwise noted. The term connected when unmodified and referring to physical connections is to be construed as partly or wholly contained within attached to or joined together even if there is something intervening. Recitation of ranges of values herein are merely intended to serve as a shorthand method of referring individually to each separate value falling within the range unless otherwise indicated herein and each separate value is incorporated into the specification as if it were individually recited herein. The use of the term set e.g. a set of items or subset unless otherwise noted or contradicted by context is to be construed as a nonempty collection comprising one or more members. Further unless otherwise noted or contradicted by context the term subset of a corresponding set does not necessarily denote a proper subset of the corresponding set but the subset and the corresponding set may be equal.

Conjunctive language such as phrases of the form at least one of A B and C or at least one of A B and C unless specifically stated otherwise or otherwise clearly contradicted by context is otherwise understood with the context as used in general to present that an item term etc. may be either A or B or C or any nonempty subset of the set of A and B and C. For instance in the illustrative example of a set having three members used in the above conjunctive phrase at least one of A B and C and at least one of A B and C refers to any of the following sets A B C A B A C B C A B C. Thus such conjunctive language is not generally intended to imply that certain embodiments require at least one of A at least one of B and at least one of C to each be present.

Operations of processes described herein can be performed in any suitable order unless otherwise indicated herein or otherwise clearly contradicted by context. Processes described herein or variations and or combinations thereof may be performed under the control of one or more computer systems configured with executable instructions and may be implemented as code e.g. executable instructions one or more computer programs or one or more applications executing collectively on one or more processors by hardware or combinations thereof. The code may be stored on a computer readable storage medium for example in the form of a computer program comprising a plurality of instructions executable by one or more processors. The computer readable storage medium may be non transitory.

The use of any and all examples or exemplary language e.g. such as provided herein is intended merely to better illuminate embodiments of the invention and does not pose a limitation on the scope of the invention unless otherwise claimed. No language in the specification should be construed as indicating any non claimed element as essential to the practice of the invention.

Preferred embodiments of this disclosure are described herein including the best mode known to the inventors for carrying out the invention. Variations of those preferred embodiments may become apparent to those of ordinary skill in the art upon reading the foregoing description. The inventors expect skilled artisans to employ such variations as appropriate and the inventors intend for embodiments of the present disclosure to be practiced otherwise than as specifically described herein. Accordingly the scope of the present disclosure includes all modifications and equivalents of the subject matter recited in the claims appended hereto as permitted by applicable law. Moreover any combination of the above described elements in all possible variations thereof is encompassed by the scope of the present disclosure unless otherwise indicated herein or otherwise clearly contradicted by context.

All references including publications patent applications and patents cited herein are hereby incorporated by reference to the same extent as if each reference were individually and specifically indicated to be incorporated by reference and were set forth in its entirety herein.

