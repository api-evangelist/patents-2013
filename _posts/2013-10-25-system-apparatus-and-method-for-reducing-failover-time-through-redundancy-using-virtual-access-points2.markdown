---

title: System, apparatus and method for reducing failover time through redundancy using virtual access points
abstract: According to one embodiment of the disclosure, a non-transitory computer readable medium is described for an network device, where the medium comprising instructions which, when executed by one or more hardware processors, cause performance of a number of operations. These operations include configuring a first network device to provide network access to a client device using a first Basic Service Set Identification (BSSID) and determining that the first network device is not responsive. Based on determining that the first network device is not responsive, the one or more hardware processors further configure a second network device to provide the network access to the client device using the same first BSSID that was previously used by the first network device without the client device disassociating with the first BSSID.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09608859&OS=09608859&RS=09608859
owner: Aruba Networks, Inc.
number: 09608859
owner_city: Sunnyvale
owner_country: US
publication_date: 20131025
---
Embodiments of the disclosure relate to the field of wireless digital networks. More specifically one embodiment of the disclosure relates to the reduction of failover times based on redundancy through virtual access points VAPs .

Wireless local area networks WLANs are becoming ubiquitous. Particularly in locations such as school and businesses there may be a number of wireless access points APs each operating as a gateway for wireless connectivity to a wired network. In this type of complex networking system there is a need to provide a redundancy mechanism with a short failover time in order to at least maintain client s connectivity.

Currently conventional wireless systems are adapted to handle failover conditions based on redundancy at the controller. For instance three primary controller based redundancy mechanisms include backup LMS Local Area Network LAN Management Solution Virtual Router Redundancy Protocol VRRP and High Availability HA Lite. For backup LMS the AP system profile is configured with a primary and a backup LMS address. APs initially connect to the Primary LMS. When an AP loses connectivity with the primary controller it fails over to the backup controller. As part of failover it re establishes the tunnel with the backup LMS downloads the configuration and then becomes operational. In accordance with VRRP two controllers are configured to form a VRRP pair. The VRRP IP address is configured as the LMS in the AP system profile.

All these mechanisms provide controller based redundancy. However it is contemplated that redundancy provided at the edge of the network may enable compliance with more stringent failover requirements.

Embodiments of the disclosure relate to a system and framework for reducing failover time by providing redundancy for services at an edge device e.g. an access point AP . In particular a redundancy scheme may be implemented at the edge device in order to ensure that none of the Basic Service Sets BSSes experiences a complete disruption of service upon failure of the edge device. Hence failure at the edge device e.g. AP failover is transparent to associated client devices.

In a wireless distributed system a single edge device e.g. an access point AP a base station etc. together with all associated client devices STAs is referred to as a Basic Service Set or BSS . An example of a particular types of wireless distributed system includes a first type of wireless WiFi network operating in accordance with the IEEE 802.11 2012 standard. It is contemplated that the invention may be applicable to other network types such as a second type of wireless WiMax network representative of an IEEE 802.16 based network and or a Bluetooth network.

Herein the BSS is uniquely identified by a BSS Identification BSSID which also correlates to a Service Set Identifier SSID being the informal name of the BSS. For a BSS operating in infrastructure mode the BSSID is the Media Access Control MAC address of a Virtual Access Point VAP . By placement of BSSID redundancy at the edge devices in lieu of controller based redundancy faster failover may be achieved.

In general according to one embodiment of the invention redundant edge devices are chosen from the same radio frequency RF neighborhood such as the same clique set that features two or more edge devices operating within the same RF neighborhood. Herein at least two neighboring edge devices being part of the same clique set also referred to as a redundant grouping include BSSIDs stored in redundancy for each other. For instance a first network edge device is adapted with both a first storage portion that stores a first plurality of available BSSIDs associated with BSSes primarily handled by the first network device referred to as primary BSSIDs and a second storage portion. The second storage portion is configured to store a second plurality of BSSIDs referred to as backup BSSIDs that are associated with BSSes primarily supported by the second network edge device of the redundant grouping.

According to one embodiment of the disclosure two types of messages may be used to trigger a failover event. A first type of message which is referred to as an AP heartbeat is a message transmitted between a network edge device and a controller on a wired link. A second type of message which is referred to as a virtual AP heartbeat is a message between network edge devices in the same redundant grouping. Herein a second edge device listens to messages associated within BSSes including the first edge device. In response to no heartbeat messages being detected during prescribed transmission times e.g. heartbeat messages are missed B times consecutively or in total where B may be set to any integer value and or for a prescribed time e.g. 3 beacons or 300 milliseconds a heartbeat miss event is considered to have occurred. Upon detecting the heartbeat miss event that constitutes a failover triggering event the second edge device or one of the redundant edge devices activates the backup BSSes available with it.

In order to achieve transparent failover both edge devices need to synchronize information for the BSS es currently active on each other. Examples of information to be synchronized may include two or more of the following 1 Timing Synchronization Function TSF 2 associated Client MAC addresses 3 client information e.g. association identifier power save state capabilities rates etc. and or 4 encryption key s .

In summary one embodiment of the disclosure describes a non transitory computer readable medium comprising instructions which when executed by one or more hardware processors causes performance of operations including subsequent to a client device associating with a first Basic Service Set Identification BSSID configuring a first edge device to provide services to the client device by the first edge device using the first BSSID to communicate with the client device. Examples of such services may include but are not limited or restricted to network connectivity. Upon determining that the first edge device is not responsive a second edge device is configured to provide the services to the client device by the second edge device using the first BSSID to communicate with the client device without the client device disassociating with the first BSSID.

Herein certain terminology is used to describe features within embodiments of the invention. For example the term network device generally refers to electronic equipment configured to communicate over a wired and or wireless network and process information related to such communications. Hence the network device may be adapted with circuitry to support wireless connectivity with other network devices being part of a wireless network. Different types of network devices may include but are not limited to 1 a client device being any consumer electronics with connectivity to multiple networks that are based on different technologies such as cellular wireless e.g. WiFi or WiMax Bluetooth or the like 2 an edge device and or 3 a data control device.

Herein an edge device may include a wireless access point a wireless base station a Bluetooth receiver transceiver or any device configured as a hot spot or gateway for providing services such as network connectivity which may include any type of mobile network device. A client device may be a stationary network device e.g. desktop computer television set top box video gaming console etc. or a mobile network device capable of connecting to one or more networks. Illustrative examples of mobile network devices may include a tablet laptop netbook bar code scanner a digital camera and or a mobile handset such as a smartphone personal digital assistant PDA or the like. Likewise illustrative examples of a data control device may include but are not limited or restricted to a network switch a controller a router a brouter or the like.

It is contemplated that a network device includes hardware logic such as one or more of the following i processing circuitry ii one or more communication interfaces such as a radio e.g. component that handles the wireless data transmission and or reception and or a physical connector to support wired connectivity and or iii memory in the form of a non transitory computer readable storage medium e.g. a programmable circuit a semiconductor memory such as a volatile memory such as random access memory RAM or non volatile memory such as read only memory power backed RAM flash memory phase change memory or the like a hard disk drive an optical disc drive etc. or any connector for receiving a portable memory device such as a Universal Serial Bus USB flash drive portable hard disk drive or the like.

Herein the term logic is generally defined as hardware and or software. For example as hardware logic may include processing circuitry e.g. a microcontroller any type of processor a programmable gate array an application specific integrated circuit etc. semiconductor memory combinatorial logic or the like. As software logic may be one or more software modules such as executable code in the form of an executable application an application programming interface API a subroutine a function a procedure an object method implementation an applet a servlet a routine a source code an object code a shared library dynamic load library or one or more instructions. These software modules may be stored in any type of a suitable non transitory computer readable medium described above or transitory computer readable transmission media e.g. electrical optical acoustical or other form of propagated signals such as carrier waves infrared signals digital signals .

The term link is a physical or logical communication path between two or more network devices. Examples of links supporting wireless communications may include certain radio frequency RF channels and or bands as well as the logic associated therewith.

The terms connected and connection generally relate to an established communication path between two network devices that enables one network device to transfer data targeted specifically for receipt by the other network device.

The term message generally refers to information transmitted as information in a prescribed format where each message may be in the form of a packet a frame an Asynchronous Transfer Mode ATM cell or any other series of bits having the prescribed format.

Lastly the terms or and and or as used herein are to be interpreted as an inclusive or meaning any one or any combination. Therefore A B or C or A B and or C mean any of the following A B C A and B A and C B and C A B and C. An exception to this definition will occur only when a combination of elements functions steps or acts are in some way inherently mutually exclusive.

As this invention is susceptible to embodiments of many different forms it is intended that the present disclosure is to be considered as an example of the principles of the invention and not intended to limit the invention to the specific embodiments shown and described.

Referring to an exemplary embodiment of a wireless distributed system with BSSID redundancy located at one or more edge devices is shown. Herein according to one embodiment of the disclosure each of the one or more N edge devices operates as a gateway to provide communicative coupling to a wired network which provides access to a common public network such as the Internet. Such communicative coupling may be via a centralized network device e.g. controller or may be conducted directly by the various edge devices. These edge devices may include one or more access points APs that control connectivity over a first wireless WiFi network and or one or more wireless base stations that control connectivity to a second wireless WiMAX network. Each of these edge devices enables one or more client devices such as a mobile network device for example to access public network .

As shown edge devices M 2 are within the same RF neighborhood as at least wireless signaling from edge device is detected by edge device and wireless signaling from edge device is detected by edge device . However edge device may be within a different RF neighborhood as signaling from edge devices are not detected by edge device and vice versa. Hence edge device is outside the coverage areas of edge devices . The selection of redundant groupings within the RF neighborhood may be accomplished through the formation of clique sets as described in U.S. patent application Ser. No. 13 959 603 entitled Task Processing and Resource Sharing In a Distributed Wireless System the entire contents of which are incorporated by reference.

In particular according to one embodiment of the disclosure centralized network device may be configured with neighborhood identification logic namely software including routines for identifying a plurality of network devices. In some embodiments the neighborhood identification logic can be a set of instructions executable by the processor not shown within the network device that provide the functionality described below for identifying a clique for selection of redundant network device s .

In particular the neighborhood identification logic determines a list of available network devices in a wireless distributed system and identifies a plurality of network devices from the list of available network devices where each identified network device in the plurality of network devices has a radio frequency RF neighborhood that includes the other network devices. For an identified network device in the plurality of network devices a RF neighborhood of the identified network device includes the other network devices and the other network devices are capable of hearing messages such as beacons for example from the network device. In other words each identified network device in the plurality of network devices is in an RF neighborhood with other network devices that are each capable of hearing each other s messages.

Herein as an illustrative embodiment shown in network devices are RF neighboring network devices. The network devices are RF neighbors as these devices have a similar view of a communication network. For example network devices are located in close geographical proximity to each other so that they are neighbors and operate in the same radio frequency environment. In some embodiments network devices are RF neighbors if client device is able to connect to network devices . In some embodiments network devices are RF neighbors if a task e.g. a channel scanning task or a load balancing task which can be processed by one network device can also be processed by the other network device and . For example three network devices are RF neighbors if the same result is produced for the same task being performed on either network device. In some embodiments network devices are RF neighbors if their radio frequency spectrums are substantially overlapped with each other.

In some embodiments any network device in the identified plurality of network devices is an RF neighbor if it is associated with a RF spectrum that is substantially overlapped with RF spectrums of the other network devices. For example a spectrum associated with one network device is at least 70 overlapped with a spectrum associated with the other network device constitutes an RF neighbor. In some embodiments the plurality of network devices can be identified manually. In some other embodiments the plurality of network devices can be identified automatically.

In some embodiments of the disclosure first network device generates and sends a particular message to a second network device that is in the RF neighborhood of the second network device and the second network device is also in the RF neighborhood of the first network device . The particular messages are used to establish one or more redundancy groupings e.g. clique set from the plurality of network devices of the RF neighborhood where the redundancy grouping is automatically conducted under control by network device or manually controlled.

As an exemplary embodiment this grouping logic can be software including routines for identifying one or more redundancy groupings e.g. clique sets . In some embodiments the grouping logic can be a set of instructions executable by the processor not shown to provide the functionality described below for identifying one or more redundancy groupings. In some other embodiments the grouping logic can be stored in the memory of the network device and can be accessible and executable by the processor not shown . The grouping logic may be adapted for cooperation and communication with the processor and other components of the network device .

A redundancy grouping and clique set are generally defined as a set of network devices with any two or more network devices in the grouping or set being RF neighbors. In some embodiments the redundancy grouping is a subset of RF neighbors such that each of the device is RF neighbor of each other. For instance device A B and C may be in an RF neighborhood such that A is in neighborhood of B and not in RF neighborhood of C e.g. 3 APs placed in a straight line . In such case RF neighborhood of B has both A and C but it s redundancy group can have either A or C.

In some embodiments as shown in an undirected graph G V E is used to represent network devices available in a distributed wireless system where the set V V 5 includes all the vertices in the graph with each vertex representing one network device and the set E E 4 represents all the connection in the graph. If three network devices and are RF neighbors three vertices and representing the three network devices and are connected by an undirected connections in the graph while vertices and represent network devices and M 3 N 5 . The redundancy grouping represented by a symbol S is a subset of the set V e.g. S is a subset of V where any two vertices in the redundancy grouping S are connected e.g. the network devices in the redundancy grouping are pair wise connected to each other . The size of the redundancy grouping S is the number of vertices included in the set S. An exemplary graph and redundancy grouping is illustrated in .

According to one embodiment of the disclosure one or more edge devices e.g. edge devices from the same redundancy grouping may be selected as for redundancy. For instance second edge device may be selected to operate as a redundant edge device for first edge device as thus second edge device includes backup BSSes for edge device . Similarly first edge device operates to include backup BSSes for second edge device as shown in .

Referring to both first edge device is communicatively coupled to network device which operates as a controller. Similarly second edge device is communicatively coupled to network device . According to this illustrative embodiment both first edge device and second edge device constitute access points APs within the same redundancy grouping. More specifically AP operates as part of a redundant grouping with AP .

As further shown in AP is configured to handle S identifiers and AP is also configured to handle S identifiers . For illustrative purposes the number of identifiers S is set as sixteen and the type of identifiers may include BSSIDs. According to one embodiment of the disclosure AP is configured to support a first group of BSSIDs referred to as primary BSSIDs along with a second group of BSSIDs referred to as backup BSSIDs . As shown the number of primary BSSIDs may be equal in number eight to the number of backup BSSIDs although it is contemplated that the number of primary BSSIDs may exceed the number of backup BSSIDs or the number of backup BSSIDs may exceed the number of primary BSSIDs .

Herein AP has a base address X and AP has a base address Y . Hence first group of BSSIDs starting with base BSSID X is equivalent to the backup BSSIDs within AP . Similarly second group of BSSIDs starting with base BSSID Y constitutes backup BSSIDs that are equivalent to the primary BSSIDs within AP . Hence in response to a primary BSSID e.g. BSSID X experiencing a failover triggering event under control by the network device or operating independently AP is now configured to support BSSID X previously supported by AP .

It is noted that illustrates a redundant scheme 1 1 in which redundancy is provided by a counterpart edge device and the number of backup BSSes supported are equal in number to the number of primary BSSes supported. However it is contemplated that multiple edge devices may provide redundancy for a corresponding AP e.g. a first set of backup BSSes is supported by one redundant edge device while another set of backup BSSes is supported by another redundant edge device . Assigned with a unique identifier e.g. MAC address or derivation thereof normally at configuration each edge device advertises this unique identifier in a Vendor Information Element IE in a broadcast message e.g. beacon . Selection of redundant edge device is as simple as the edge device having the lowest ID operating at any point of time. For example if primary edge device has ID X and two redundant edge devices have IDs Y and Y Z when edge device X fails edge device having ID Y will take over. Since all APs are hearing each other Y as well as Y Z know the presence absence of each other.

For instance AP may be selected as a part of a redundant grouping with AP based on AP having the greater signal strength measurement for access points detected by AP . Alternatively AP and AP may be selected as a part of a redundant grouping with AP where both AP and AP include backup BSSIDs for primary BSSIDs associated with AP . As a result in response to detecting of a failover triggering event at AP the AP and AP operate as redundant APs for client devices associated with AP . Similarly AP and AP include backup BSSIDs for primary BSSIDs associated with AP and AP and AP include backup BSSIDs for primary BSSIDs associated with AP .

Referring now to an exemplary embodiment of signaling in order to synchronize edge devices for transparent failover is described. Herein a first edge device and the second edge device are communicatively coupled and operate as a redundant grouping . As the operating states for each of the edge devices and forming the redundant grouping frequently vary certain state information from edge device needs to be continuously shared with edge devices . Similarly certain state information from edge device needs to be continuously shared with edge devices . Such state information and may include but it is not limited or restricted to two or more of the following 1 Timing Synchronization Function TSF information 2 associated Client MAC addresses 3 client information e.g. association identifier power save state capabilities rates etc. and or 4 encryption key s 

Herein the TSF information is configured to maintain synchronization between the timers associated with the network devices namely at least edge devices and . The Client MAC addresses are the MAC addresses for the client devices associated with the other edge device. For instance edge device supplies to second edge device MAC address for the client devices associated with edge device . This client MAC address listing is modified continuously as associations by the client devices may vary especially for mobile client devices.

Besides TSF information and the Client MAC addresses edge device supplies client information to second edge device where the client information may include one or more association identifiers AIDs power saving state information associated with each client device transmission rates associated with each client device and other client capabilities. Encryption keys need to be synchronized to enable edge device to decrypt information from a client device currently associated with edge device if the VAP associated with edge device fails.

Referring now to an exemplary block diagram of logic associated with the edge network device is illustrated. Edge device comprises one or more processors that are coupled to communication interface logic via a first link . Communication interface logic enables wireless and or wired communications with other network devices such as edge device centralized network device or the like. According to one embodiment of the disclosure communication interface logic may be implemented as a physical interface including one or more ports for wired connectors. Additionally or in the alternative communication interface logic may be implemented with one or more radio units for supporting wireless communications with other network devices.

Processor is further coupled to a memory device via a second link . According to one embodiment of the disclosure the memory device such as persistent storage for example may include neighborhood identification logic grouping logic device specific synchronization information neighboring device synchronization information and failover control logic .

As described above neighborhood identification logic and grouping logic are adapted to identify and establish one or more RF neighborhoods and one or more redundant groupings e.g. cliques associates with the RF neighborhood s . The device specific synchronization information includes information associated with the first edge device that is continuously monitored updated when applicable and provided to its corresponding redundant edge device s e.g. edge device . The neighboring device synchronization information associated with the second edge device and continuously provided therefrom.

Failover control logic responds to a failure by another edge device that is part of the redundant grouping normally through detection of a prolonged interruption of heartbeat messages exchanged between the edge device and other network devices. A heartbeat message is a periodic signal generated by hardware and or software to indicate normal operations or synchronize different logic within a network device. For instance according to one embodiment of the disclosure a plurality of heartbeat messages may be used to trigger a failover event. One type of heartbeat message may be referred to as an AP heartbeat which is periodic signaling between edge device and centralized network device of over a wired link. Another type of heartbeat message may be referred to as a virtual AP heartbeat which is periodic signaling between edge device and its redundant grouping device e.g. edge device .

For a particular BSS identified by BSSID e.g. BSSID Y if failover control logic fails to detect the presence of an AP heartbeat and or a virtual AP heartbeat from network device for T consecutive times intervals e.g. T beacons where T 3 the failover control logic determines that a heartbeat miss event has occurred which constitutes a failover triggering event. In response to an occurrence of the failover triggering event edge device activates the backup BSS identified by BSSID Y that is primarily handled by edge device . Hence edge device operates as a backup AP by providing services to those client devices that were previously provided services by edge device without requiring client devices associated with a particular BSS BSSID Y to be disassociated from that particular BSS. Hence by activation of the backup BSS at least the BSS remains in service despite an operating failure by edge device .

Upon determining that the edge device has resumed being responsive and in an active status which may be determined by repeated detection of the above identified heartbeat messages the primary BSS identified by BSSID Y is re activated and the backup BSS BSSID Y maintained by edge device is deactivated without client devices disassociating from the BSSID Y .

Referring to an exemplary flowchart of the enhanced VAP redundancy is shown. Initially a redundant grouping is created in which two or more edge network devices operate as redundant VAPs for each other block . Herein the redundant grouping includes at least a first edge device and a second edge device.

In response to a failover triggering event associated with a BSS managed by the second edge device identified by BSSID Y the first edge device now supports BSSID Y namely a BSS having a backup BSSID corresponding to the failed BSSID Y blocks and . Thereafter as an optional feature when the backup BSS becomes active the backup tunnels to the centralized network device e.g. controller also are activated as prior tunnels associated with the primary BSS are inactive block .

Although not shown in response to the second edge device returning to an active status and being able to again support the backup BSS BSSID Y it is contemplated that the second edge device actively supports services pertaining to BSSID Y while the first edge device halts providing further services pertaining to BSSID Y. Hence the second edge device now is responsible for services requested by the associated client device s . Of course alternatively first edge device may continue to actively support services pertaining to BSSID Y until a load or capacity factor is reached by the first edge device after which the second edge device would regain its support of BSSID Y and providing services to its associated client device s .

This invention may be embodied in other forms without departing from the spirit or essential attributes thereof. Accordingly reference should be made to the following claims rather than to the foregoing specification as indicating the scope of the invention.

