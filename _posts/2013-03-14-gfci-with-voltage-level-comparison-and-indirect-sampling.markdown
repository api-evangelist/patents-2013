---

title: GFCI with voltage level comparison and indirect sampling
abstract: A circuit interrupting device having an auto-monitoring circuit for automatically testing various functions and structures of the device. The auto-monitoring circuit initiates an auto-monitoring routine which, among other things, establishes a self-test fault during either the positive or negative half-wave, or both, of an AC power cycle and determines whether the detection mechanisms within the device properly detect the self-test fault. An early detection signal indicates that the self-test fault was properly detected without interfering with the normal operation of the detection circuitry and without causing a false trip within the device. Additional functionality of the auto-monitoring circuit permits automatic verification that the device is properly wired, that is, not miswired, and determines whether the device has reached the end of its useful life.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09118174&OS=09118174&RS=09118174
owner: Hubbell Incorporation
number: 09118174
owner_city: Shelton
owner_country: US
publication_date: 20130314
---
This application contains subject matter related to subject matter contained in copending U.S. patent application Ser. No. 13 422 797 titled SOLENOID COIL HAVING AN ENHANCED MAGNETIC FIELD by Stephen P. Simonin U.S. patent application Ser. No. 13 422 790 titled ENHANCED AUTO MONITORING CIRCUIT AND METHOD FOR AN ELECTRICAL DEVICE by Gaetano Bonasia and Kenny Padro and U.S. patent application Ser. No. 13 422 793 titled REINSTALLABLE CIRCUIT INTERRUPTING DEVICE WITH VIBRATION RESISTANT MISWIRE PROTECTION by Gaetano Bonasia et al. which applications are assigned to the assignee hereof and the entire contents of each of which are expressly incorporated herein by reference.

The present invention relates generally to switched electrical devices. More particularly the present invention is directed to self testing circuit interrupting devices such as ground fault circuit interrupter GFCI devices that switch to a tripped or unlatched state from a reset or latched state when one or more conditions is detected. Such devices consistent with the invention disclosed herein have more robust self testing capabilities than provided in previously known GFCI devices.

GFCI devices having contacts that are biased toward the open position require a latching mechanism for setting and holding the contacts in a closed position. Likewise switched electrical devices having contacts that are biased toward the closed position require a latching mechanism for setting and holding the contacts in an open position. Examples of conventional types of devices include devices of the circuit interrupting type such as circuit breakers arc fault interrupters and GFCIs to name a few.

To be commercially sold in the United States a GFCI device must conform to standards established by the Underwriter s Laboratory UL in conjunction with industry leading manufacturers as well as other industry members such as various safety groups. One UL standard covering GFCI devices is UL 943 titled Standard for Safety Ground Fault Circuit Interrupters. UL 943 applies to Class A single and three phase GFCIs intended for protection of personnel and includes minimum requirements for the function construction performance and markings of such GFCI devices. UL 943 requires among other things specific fault current levels and response timing requirements at which the GFCI device should trip. Typically GFCIs are required to trip when a ground fault having a level higher than 5 milliamps mA is detected. Further when a high resistance ground fault is applied to the device the present version of UL 943 specifies that the device should trip and prevent current from being delivered to the load in accordance with the equation T 20 I where T refers to time and is expressed in seconds and I refers to electrical current and is expressed in milliamps. Thus in the case of a 5 mA fault the device must detect the fault and trip in 7.26 seconds or less.

With such safety related standards in place and because GFCI devices are directly credited with saving many lives since their introduction in the early 1970s they have become ubiquitous throughout the residential and commercial electrical power grid. Like most electro mechanical devices however GFCI devices are susceptible to failure. For example one or more of the electronic components that drive the mechanical current interrupter device can short out or otherwise become defective as can components in the fault detector circuit or elsewhere within the device rendering the device unable to properly detect the ground fault and or properly interrupt the flow of electrical current. For this reason it has long been required that GFCI devices be provided with a supervisory circuit that enables manual testing of the ability of the device to trip when a fault is encountered. Such supervisory circuits are typically have a TEST button which when pressed actuates a simulated ground fault on the hot and neutral conductors. If the device is functioning properly the simulated fault is detected and the device will trip i.e. the mechanical interrupter is actuated to open the current path connecting the line side of the device e.g. where the in AC power is supplied and load side where the user connects his or her electrical appliance etc. and where downstream receptacles or additional GFCI devices are connected.

A study performed by industry safety groups indicated that most often the public does not regularly test their GFCI devices for proper operation i.e. by pressing the TEST button. This study further revealed that some GFCI devices that had been in service for an extended period of time became non functional and were unable to properly detect a fault condition thus rendering the device unsafe. Specifically it was discovered that after extended use GFCI devices fail to trip when a fault occurs thus rendering the device operable as an electrical receptacle but unsafe in the presence of a fault condition. Because the devices are not being regularly tested this unsafe condition is exacerbated. That is people falsely believe the device is operational in view of the fact that it adequately delivers power when in fact the device is a potentially life threatening hazard.

The discovery that GFCI devices deployed in the field are becoming increasingly non operational and unsafe in combination with the realization that people do not regularly test their GFCI devices regardless of manufacturer s explicit instructions to do so initiated investigations into possible changes to the UL 943 standard to require the GFCI devices to self test e.g. auto monitor themselves without the need for human intervention. The changes contemplated to UL 943 further included a requirement for either a warning to the consumer of the loss of protection and or the device automatic removing itself from service e.g. permanently tripping. Moreover these additional self testing operations would have to be performed without interfering with the primary function of the device i.e. tripping when an actual fault was encountered.

The revised self test functionality mentioned above is not yet a requirement for UL 943 certification but it is expected that it will be soon. In preparation for this significant UL change and in view of the seemingly endless reduction in the cost of integrated circuits many GFCI manufacturers have migrated to digital techniques e.g. microprocessors and microcontrollers in favor of previous analog designs to provide both ground fault protection and self monitoring functionality. The digital solutions offered thus far however are not ideal. For example several related art GFCI designs including those directed at providing self test functionality suffer from nuisance tripping a situation where the interrupter is actuated when neither a real ground fault a manually generated simulated ground fault nor an automatic self test fault are present. This unfavorable condition is believed by many to be worsened by the additional requirement of automatic self testing which results in additional inductive currents being generated within the device.

It is therefore desired to provide a GFCI device that provides certain self testing capabilities including those proposed in the next revision of UL 943 but minimizes the risks associated with nuisance tripping.

In consideration of problematic issues associated with related art GFCI devices including but not limited to the problematic issues discussed above a circuit in accordance with one or more exemplary embodiments of the present invention generally relates to an auto monitoring circuit that continuously monitors the performance of a GFCI device. More specifically a processing device such as a microcontroller or microprocessor is configured to periodically perform an auto monitoring routine based on a stored software program for testing and verifying the viability and functionality of various sub circuits within the GFCI device. To test proper current isolation of the GFCI device a driver coupled to the microcontroller is operated to initiate a test signal representative of a ground fault each time the auto monitoring routine is performed or run and different circuit nodes are monitored to confirm proper operation of the device.

An end of life indicator is also coupled to the microcontroller to indicate whether the GFCI device has failed to properly detect the test signal or some other malfunction within the device has occurred. To avoid tripping the mechanical current interrupting device when the test signal is generated but also allow as much of the GFCI device circuitry to perform its intended function a unique monitor circuit is provided that takes advantage of various functionality of the digital components such as the GFCI integrated circuit device and the microcontroller. Specifically to provide an automatic test function that monitors the fault detection capability of the GFCI device without interfering and causing a false trip under normal conditions embodiments consistent with the invention include a specifically selected filter capacitor associated with the interrupter drive output of the GFCI integrated circuit IC device. Proper selection of the capacitor and other related circuit components prevents the interrupter drive circuit e.g. silicon controlled rectifier SCR from firing or turning ON until a real fault condition is encountered.

In accordance with one aspect of the invention a circuit interrupting device is provided that includes one or more line terminals for connecting to an external power supply such as an AC power supply used for residential and commercial electricity requirements one or more load terminals for connecting to an external load such as an electrical appliance an interrupting device connected to the line terminals and the load terminals and electrically connecting the line terminals to the load terminals when the circuit interrupting device is in a reset condition and disconnecting the line terminals from the load terminals when the circuit interrupting device is in a tripped condition. A device in accordance with this aspect further includes a fault detection circuit that detects a fault condition in the circuit interrupting device and generates a fault detection signal when the fault condition is detected wherein the fault detection signal is provided to the interrupting device to place the circuit interrupting device in the tripped condition. If the device is already in the tripped condition the fault detection signal will maintain this condition. Further an auto monitoring circuit electrically coupled to the fault detection circuit and the interrupting device is included for continuously monitoring one or more signals to determine an operating state of the circuit interrupting device wherein at least one of the monitored signals includes a first auto monitoring input signal the value of which is at least partially determined by a value of a power indication signal generated by the fault detection circuit.

According to another aspect of the invention a circuit interrupting device is provided that includes one or more line terminals for connecting to an external AC power supply one or more load terminals for connecting to an external AC load an interrupting device connected to the line terminals and the load terminals and delivering an AC power signal from the line terminals to the load terminals when the circuit interrupting device is in a reset condition and preventing the AC power signal from being delivered from the line terminals to the load terminals when the circuit interrupting device is in a tripped condition. A fault detection circuit is also provided according to this aspect of the invention that detects a fault condition in the circuit interrupting device and generates a fault detection signal when the fault condition is detected wherein the fault detection signal is provided to the interrupting device to place the circuit interrupting device in the tripped condition when the fault condition is detected. Also an auto monitoring circuit is included that is electrically coupled to the fault detection circuit and the interrupting device and the one or more line terminals the auto monitoring circuit includes a DC power supply circuit coupled to the one or more line terminals and generating a DC voltage signal based on the AC power signal a programmable device programmed to repetitively run an auto monitoring routine to regularly monitor one or more signals and determine an operating state of the circuit interrupting device based on respective values of the monitored signals and a first switching device controlled by the programmable device for controllably providing a self test fault signal to the fault detection circuit. According to this aspect of the invention the programmable device of the auto monitoring circuit receives a test signal from the fault detection circuit on a first signal input port and determines that the fault detection circuit is adequately powered if the value of the test signal is greater than or equal to about one half the value of the DC voltage signal.

According to a further aspect of the invention a method of monitoring the operational state of an electrical wiring device is provided where the method includes the steps of receiving an AC power signal power signal generating a DC power signal by rectifying the AC power signal running an auto monitoring program stored in a programmable circuit device monitoring a test signal output from a fault detection circuit to determine an operational state of the electrical wiring device determining in the programmable circuit device an end of life state if the test signal from the fault detection circuit is less than a threshold value and generating an alarm signal when the end of life state is determined.

Exemplary embodiments of devices consistent with the present invention include one or more of the novel mechanical and or electrical features described in detail below. For example one or more of the exemplary embodiments of the invention disclosed include auto monitoring or self test features. Some self test features and capabilities with respect to GFCI devices have been disclosed previously for example in U.S. Pat. Nos. 6 807 035 6 807 036 7 315 437 7 443 309 and 7 791 848 and U.S. patent application Ser. No. 13 422 790 filed on Mar. 16 2012 all which are commonly assigned to the same assignee of this application and the entire respective contents of which are incorporated herein by reference for all that is taught. An auto monitoring feature consistent with the present invention disclosed herein is more robust than that which has been previously disclosed and reduces the probability of false or nuisance tripping by the device. For example additional features are provided that relate to the determination of an end of life EOL condition and actions taken subsequent to such determination. Further exemplary novel electrical and mechanical features consistent with the invention are described herein below with reference to the figures.

Referring to a GFCI receptacle according to an exemplary embodiment of the invention includes a front cover having a duplex outlet face with phase neutral and ground openings. Face also has opening accommodating RESET button adjacent opening accommodating TEST button and six respective circular openings . In accordance with this exemplary embodiment openings accommodate two respective indicators such as different colored LEDs openings accommodate respective bright LEDs used for example as a nightlight opening accommodates a photoconductive photocell used for example to control the nightlight LEDs and opening provides access to a set screw for adjusting a photocell device in accordance with this and other exemplary embodiments. Rear cover is secured to front cover by eight fasteners four fasteners are shown in and four additional fasteners are provided on the side of receptacle obscured from view in . For example each fastener may include a barbed post on front cover and corresponding resilient hoop on rear cover similar to that which is described in detail in U.S. Pat. No. 6 398 594 the entire contents of which are incorporated herein by reference for all that is taught. Ground yoke bridge assembly having standard mounting ears protrudes from the ends of receptacle .

Referring to front cover has been removed to expose manifold which provides support for printed circuit board and yoke bridge assembly . According to the embodiment shown manifold includes four dovetail interconnects that mate with corresponding cavities along the upper edge of rear cover . One dovetail cavity pair is provided on each of the four sides of manifold and rear cover respectively.

The circuit of includes phase line terminal and neutral line terminal for electrical connection to an AC power source not shown such as a 60 hertz 120 volt rms power source as used in the United States for mains power. The circuit of and the software resident on and implemented therewith can be modified to accommodate other power delivery systems as well. Such modifications and the resultant circuit and wiring device in which the circuit and software are would ultimately be used are contemplated by the inventor and considered to be within the spirit and scope of the invention described herein. For example power delivery systems that use different voltages and frequencies are within the scope of the invention.

Referring to phase conductor and neutral conductor are respectively connected to the phase and neutral line terminals and each pass through sense transformer and grounded neutral transformer which are part of a detection circuit described below. By way of example phase and neutral line terminals correspond to input terminal screws in above and phase and neutral line conductors represent line contact arms respectively as described above with respect to . Each of line conductors has a respective fixed end connected to the phase and neutral line terminals and each includes a respective movable contact e.g. contacts from the embodiment described above. Face phase and face neutral conductors respectively include electrical contacts not shown fixed thereto. The face conductors are electrically connected to and in the embodiment shown are integral with respective face terminals to which plug blades from a load device not shown such as an electrical appliance would be connected when the electrical receptacle device is in use.

The circuit shown in according to this embodiment also includes optional load phase and load neutral terminals respectively which electrically connect to a downstream load not shown such as one or more additional receptacle devices. Load terminals are respectively connected to cantilevered load conductors each of which includes a movable contact not shown in at its distal end. The load contacts are disposed below respective phase and neutral line contacts and phase and neutral face contacts and are coaxial with them such that when the line conductors are moved toward the load and face conductors the three sets of contacts mate and are electrically connected together. When the device is in this condition it is said to be reset or in the reset state.

With continued reference to detector circuit includes transformers as well as a GFCI integrated circuit device GFCI IC . In accordance with the present embodiment GFCI IC is the well known 4141 device such as an RV4141 device made by Fairchild Semiconductor Corporation. Other GFCI IC devices could also be used in the circuit of instead of the 4141 and such a modification is within the spirit and scope of the invention.

GFCI IC device receives electrical signals from various other circuit components including transformers and detects one or more kinds of faults such as a real fault a simulated fault or self test ground fault as well as a real or simulated grounded neutral fault. For example when a sufficient current imbalance in line conductors occurs a net current flows through the transformers causing a magnetic flux to be created about at least transformer . This magnetic flux results in electrical current being induced on conductor which is wound around sense transformer . Respective ends of conductor are connected to the positive and negative inputs to the sense amplifier of GFCI IC device at input ports V REF and VFB respectively. The induced current on conductor causes a voltage difference at the inputs to the sense amplifier of GFCI IC . When the voltage difference exceeds a predetermined threshold value a detection signal is generated at one or more of outputs of GFCI IC such as the SCR trigger signal output port SCR OUT . The threshold value used by GFCI IC is determined by the effective resistance connected between the op amp output OP OUT and the positive input to the sense amplifier VFB .

The current imbalance on line conductors results from either a real ground fault a simulated ground fault or a self test ground fault. A simulated ground fault is generated when test switch in closes which occurs when TEST button is pressed. As described in further detail below a self test fault occurs when auto monitoring circuit initiates an auto monitoring test sequence that includes an electrical current being generated on independent conductor .

According to the present embodiment when test switch closes some of the current flowing in line conductors and load conductors is diverted from the phase face conductor and phase load conductor when the device is in the reset state around sense transformer and through resistor to neutral line conductor . By diverting some of the current through resistor in this manner an imbalance is created in the current flowing through conductor and the current flowing in the opposite direction through conductor . When the current imbalance i.e. the net current flowing through the conductors passing through the sense transformer exceeds a threshold value for instance 4 5 milliamps this simulated ground fault is detected by detector circuit and the SCR output of GFCI IC SCR OUT is activated.

When the SCR output of GFCI IC is activated the gate of SCR is turned ON allowing current to flow from the phase line conductor through diode and SCR . The current flowing through SCR turns ON the gate of SCR and SCR . When SCR is turned ON current flows from phase line conductor through secondary coil of dual coil solenoid fuse diode and SCR . Further when SCR is turned ON current flows from phase line conductor through primary coil of dual coil solenoid fuse diode and SCR . The current flowing through both coils generates a magnetic field that moves an armature within solenoid . When the solenoid armature moves it unlatches a contact carriage e.g. in which is part of interrupting device and the carriage drops under the natural bias of line conductors that is away from the face conductors and load conductors . The device is now said to be tripped as a result of the successful manual simulated fault test sequence and the device will not deliver power to a load until it is reset. The time it takes from the instant switch closes until the device is tripped and current no longer flows from phase line conductor to either the face and load conductors and through solenoid coils is so short that fuses remain intact.

With continued reference to closing reset switch e.g. by pressing RESET button also initiates a test operation. Specifically when reset switch closes a voltage supply output VS of GFCI IC is electrically connected to the gate of SCR through conductor thus turning ON SCR . When SCR is turned ON current is drawn from line conductor through diode and SCR and ultimately to ground. Similar to when SCR is turned ON by pressing the TEST button as discussed previously turning ON SCR by pressing the RESET button results in SCR and SCR also being turned ON and current flowing through solenoid coils . The current flowing through coils of solenoid generates a magnetic field at the solenoid and the armature within the solenoid is actuated and moves. Under typical e.g. non test conditions the armature is actuated in this manner to trip the device such as when an actual fault occurs.

When reset switch closes however the device is likely already in the tripped condition i.e. the contacts of the line face and load conductors are electrically isolated. That is the RESET button is usually pressed to re latch the contact carriage and bring the line face and load contacts back into electrical contact after the device has tripped. If the armature of solenoid fails to fire when the RESET button is pressed and the reset mechanism including the contact carriage fails to engage the reset plunger on its return after the RESET button is released the device will not reset. Accordingly if for example the device has not been wired to the AC power lines or it has been miswired that is the device has been wired with the AC power not connected to the line terminals no power is applied to the GFCI IC . If no power is applied to GFCI IC the gate of SCR cannot be driven either by the SCR output of GFCI IC or when the REST button is pressed. Under this condition the device will not be able to be reset. The mis wire condition is prevented in accordance with a wiring device consistent with the present embodiment by ensuring the device is shipped to the user in the tripped condition. Because the device cannot be reset until AC power is properly applied to the line terminals the mis wire condition is prevented.

With continued reference to the exemplary circuit schematic shown in auto monitoring circuit includes a programmable device . Programmable device can be any suitable programmable device such as a microprocessor or a microcontroller which can be programmed to implement the auto monitoring routine as explained in detail below. For example according to the embodiment shown in programmable device is implemented by an ATMEL microcontroller from the ATtiny 10 family. It could also be implemented by a Microchip microcontroller such as a PIC10F204 206.

According to one exemplary auto monitoring or automatic self testing routine in accordance with the embodiment shown in microcontroller initiates the auto monitoring routine approximately every three 3 seconds by setting a software auto monitoring test flag. The auto monitoring test flag initiates the auto monitoring routine within the circuit interrupting device and confirms that the device is operating properly or under certain circumstances determines that the circuit interrupting device has reached its end of life EOL . When the auto monitoring routine runs with a positive i.e. successful result the auto monitoring circuit enters a hibernation state until microcontroller sets the test flag again and initiates another auto monitoring routine.

If the auto monitoring routine runs with a negative result e.g. it cannot be determined that the circuit interrupting device is functioning properly or it determines that it is in fact not operating properly a failure counter is incremented and microcontroller initiates another auto monitoring routine when instructed by the software program stored in memory within the device. In addition to the failure count being incremented a temporary indication of the failure is also provided. For example according to the present embodiment when such a failure occurs I O port GP of microcontroller is controlled to be an output and light emitting diode LED is controlled to flash e.g. one or more times to indicate the failure to a user. If the failure counter reaches a predetermined value i.e. the auto monitoring routine runs with a negative result a certain number of times the number being stored and implemented in software the auto monitoring routine invokes an end of life EOL sequence. The EOL sequence includes one or more of the following functions a indicate that EOL has been reached for example by continuously flashing or illuminating an indicator light and or generating an audible sound b attempt to trip the device c prevent an attempt to reset the device d store the EOL event on non volatile memory e.g. in the event there is a power failure and e clear the EOL condition when the device is powered down.

In accordance with this embodiment when the auto monitoring software determines it is time to run the auto monitoring routine i.e. based on the auto monitor timer a stimulus signal is turned ON at I O port GP of microcontroller . When the stimulus signal is turned ON electrical current flows through resistor and a voltage is established at the base of transistor turning the transistor ON. When transistor is turned ON current flows from dc voltage supply through resistor which is for example a 3 k ohm resistor and continues through electrical conductor and transistor to ground. Regarding dc voltage source according to the present embodiment the value of this voltage source is designed to be between 4.1 and 4.5 volts dc but the value of this voltage supply can be any other suitable value as long as the value used is adequately taken into account for other circuit functionality described below.

According to this exemplary embodiment electrical conductor is a wire but it could also be a conductive trace on a printed circuit board. Conductor is connected at one end to resistor traverses through sense transformer and is looped approximately ten 10 times around the core of the transformer and connected at its other end to the collector of transistor . Thus when the software auto monitoring test flag is set in microcontroller and transistor is turned ON current flows through conductor which comprises an independent conductor separate from phase line conductor and neutral line conductor which also traverse through the center of sense transformer .

If the circuit interrupting device according to the present embodiment is functioning properly as current flows through conductor and through the sense transformer a magnetic flux is generated at sense transformer . The flux generates a signal on conductor which is detected by detection circuit including GFCI IC device . In accordance with this embodiment when device detects the flux created at sense transformer a voltage level is increased at one of the I O ports of device for example at the output port labeled CAP in thus increasing the voltage on conductor .

According to this embodiment capacitor is connected between the CAP I O port of microcontroller and ground. As is known in the art attaching a capacitor directly between the CAP output of a 4141 GFCI IC device and ground causes the SCR trigger signal SCR OUT output from GFCI IC device to be delayed by a predetermined period of time. The amount of time the trigger signal is delayed is typically determined by the value of the capacitor. According to the present embodiment however capacitor is not connected directly between the CAP output and ground. Instead capacitor is also connected to the ADC I O port GP of microcontroller via a circuit path that includes diode in series with resistor e.g. 3 M Ohm which completes a voltage divider circuit with resistor e.g. 1.5 M Ohm. This additional circuitry connected to the capacitor at the CAP output of GFCI IC device drains current from the delay capacitor.

By measuring the value of the signal at ADC I O port GP and confirming it is above a certain level it can be determined whether or not the self test fault signal generated on conductor was properly detected by detection circuit and it can further be confirmed whether GFCI IC device is capable of generating the appropriate SCR trigger signal. Also to avoid tripping the device during a self test auto monitoring fault the voltage at capacitor is measured and proper self test fault detection is confirmed before a drive signal is output at SCR OUT of GFCI IC device .

If the current drain on capacitor is too high GFCI IC device may not operate properly. For example if as little as 3 4 microamps of current is drained from capacitor grounded neutral conditions which are also intended to be detected by GFCI IC device may not be accurately detected e.g. pursuant to UL requirements because the SCR trigger signal SCR OUT will not fire within the necessary amount of time. According to the present embodiment less than about 1.3 microamps or about 5 of the specified delay current for the GFCI IC device is drained for the ADC I O port GP of microcontroller . This small current drain from capacitor has no effect on the ability of the device to properly detect real ground faults and or real grounded neutral faults.

According to this embodiment approximately 50 nanoamps of current is drawn off of capacitor . Parallel resistors and connected to the ADC I O port GP of microcontroller create a 4.5 megaohm drain which limits the current pulled from capacitor to a maximum of 1.0 microamp. GFCI IC device uses approximately 40 microamps of current to generate the SCR trigger but microcontroller only requires approximately 50 nanamps to read the SCR trigger signal off of capacitor before the SCR trigger signal is output from SCR OUT. Accordingly by selecting the proper value for capacitor in conjunction with appropriate value selections for resistors and as well as diode it is possible to maintain the correct delay for the SCR trigger signal SCR OUT from GFCI IC device and use the ADC in microcontroller to measure the signal at ADC input GP to determine whether the test signal on conductor has been properly detected by detection circuit .

It should also be noted that in the embodiment shown in LED is also connected to ADC I O port GP of microcontroller . Accordingly whether or not LED is conducting or not will affect the drain on capacitor as well as the delay of the SCR trigger signal and the ability of microcontroller to properly measure the signal output from the CAP I O port of GFCI IC device . Thus in regard to the circuit shown in LED is selected such that it does not turn ON and begin conducting during the time microcontroller is measuring the signal from the CAP output of GFCI IC device . For example LED is selected such that its turn ON voltage is about 1.64 volts or higher which according to the circuit shown in can be measured at I O port GP. Additionally to prevent any signal adding to capacitor when LED is being driven diode is provided.

According to this embodiment the circuit path that includes diode and the voltage divider is connected to I O port GP of microcontroller which serves as an input to an analog to digital converter ADC within microcontroller . The ADC of microcontroller measures the increasing voltage established by the charging action of capacitor . When a predetermined voltage level is reached microcontroller turns OFF the auto monitoring stimulus signal which in turn turns OFF transistor stopping the current flow on conductor and thus the flux created at sense transformer . When this occurs it is determined by microcontroller that a qualified auto monitoring event has successfully passed and the auto monitoring fail counter is decremented if the present count is greater than zero.

In other words according to this embodiment an auto monitoring routine is repeated by microcontroller on a predetermined schedule. Based on the software program stored in memory within microcontroller the auto monitoring routine is run as desired anywhere from every few seconds to every month etc. When the routine is initiated the flux created at sense transformer occurs in similar fashion to the manner in which flux would be created if either an actual ground fault had occurred or if a simulated ground fault had been manually generated e.g. by pressing the TEST button as described above.

There is a difference however between an auto monitoring self test fault generated by the auto monitoring routine and either an actual ground fault or a simulated fault generated by pressing the TEST button. When either an actual or simulated ground fault occurs a difference in the current flowing in the phase and neutral conductors and respectively should be generated. That is the current on conductor should be different than the current on conductor . This differential current flowing through sense transformer is detected by GFCI IC device which drives a signal on its SCR OUT I O port to activate the gate of SCR and turn it ON. When SCR turns ON current is drawn through coils which causes interrupting device to trip causing the contact carriage to drop which in turn causes the line face and load contacts to separate from each other. Thus current is prevented from flowing through phase and neutral conductors to the phase and neutral face terminals and the phase and neutral load terminals respectively.

In comparison when the auto monitoring routine is performed in accordance with the present invention no differential current is created on the phase and neutral conductors and the interrupting device is not tripped. Instead during the auto monitoring routine the flux generated at sense transformer is a result of current flowing through conductor which is electrically separated from phase and neutral conductors . The current generated on conductor is present for only a brief period of time for example less than the delay time established by capacitor discussed previously.

If the voltage established at the input to the ADC input GP of microcontroller reaches a programmed threshold value within this predetermined period of time during an auto monitoring routine it is determined that the detection circuit successfully detected the current flowing through the core of sense transformer and the auto monitoring event is deemed to have passed. Microcontroller thus determines that detection circuit including GFCI IC device is working properly. Because the current flowing through sense transformer during the auto monitoring routine is designed to be substantially similar in magnitude to the differential current flowing through the transformer during a simulated ground fault e.g. 4 6 milliamps it is determined that detection circuit would be able to detect an actual ground fault and provide the proper drive signal to SCR to trip interrupter .

Alternatively auto monitoring circuit might determine that the auto monitoring routine failed. For example if it takes longer than the predetermined period of time for the voltage at the ADC input at GP of microcontroller to reach the given voltage during the auto monitoring routine it is determined that the auto monitoring event failed. If this occurs an auto monitoring fail tally is incremented and the failure is indicated either visually or audibly. According to one embodiment the ADC port GP of microcontroller is converted to an output port when an auto monitoring event failure occurs and a voltage is placed on conductor via I O port GP which is first converted to a output port by the microcontroller. This voltage at GP generates a current on conductor that flows through indicator LED and resistor to ground. Subsequently ADC I O port GP of microcontroller is converted back to an input port and remains ready for the next scheduled auto monitoring event to occur.

According to this embodiment when an auto monitoring event failure occurs indicator LED illuminates only for the period of time when the I O port is converted to an output and an output voltage is generated at that port otherwise LED remains dark or non illuminated. Thus if the auto monitoring routine is run for example every three 3 seconds and an event failure occurs only a single time or sporadically the event is likely to go unnoticed by the user. If on the other hand the failure occurs regularly as would be the case if one or more of the components used in the auto monitoring routine is permanently disabled indicator LED is repetitively turned ON for 10 msec and OFF for 100 msec by microcontroller thus drawing attention to the device and informing the user that critical functionality of the device has been compromised. Conditions that cause the auto monitoring routine to fail include one or more of the following open circuited differential transformer closed circuited differential transformer no power to the GFCI IC open circuited solenoid SCR trigger output of the GFCI IC continuously high and SCR output of the GFCI IC continuously low.

According to a further embodiment if the auto monitoring fail tally reaches a predetermined limit for example seven 7 failures within one 1 minute microcontroller determines that the device is no longer safe and has reached its end of life EOL . If this occurs a visual indicator is activated to alert the user that the circuit interrupting device has reached the end of its useful life. For example when this EOL state is determined the ADC I O port GP of microcontroller is converted to an output port similar to when a single failure is recorded as described above and a signal is either periodically placed on conductor via GP i.e. to blink LED at a rate of for example 10 msec ON and 100 msec OFF or a signal is continuously placed on conductor to permanently illuminate LED . The auto monitoring routine is also halted at this time.

In addition to the blinking or continuously illuminated LED according to a further embodiment when EOL is determined an optional audible alarm circuit on printed circuit board PCB is also activated. In this situation the current through LED establishes a voltage on the gate of SCR such that SCR is turned ON either continuously or intermittently in accordance with the output signal from GP of microcontroller . When SCR is ON current is drawn from phase line conductor to activate audible alarm e.g. a buzzer providing additional notice to a user of the device that the device has reached the end of its useful life i.e. EOL. For example with respect to the present embodiment audible alarm circuit includes a parallel RC circuit including resistor and capacitor . As current is drawn from phase line conductor capacitor charges and discharges at a rate controlled by the value of resistor such that buzzer sounds a desired intermittent alarm.

A further aspect of this embodiment includes dimmable LED circuit . Circuit includes transistor LEDs light sensor e.g. a photocell and resistors . When the ambient light e.g. the amount of light in the vicinity of the circuit interrupting device according to the present embodiment is rising light sensor reacts to the ambient light level to apply increasing impedance to the base of transistor to dim the LEDs as the ambient light increases. Alternatively when the ambient light decreases e.g. as night begins to fall the current flowing through sensor increases accordingly. As the ambient light level decreases LEDs and illuminate brighter and brighter thus providing a controlled light level in the vicinity of the device.

A further embodiment of the invention shown in includes a mechanism for providing microcontroller with data related to whether the device is tripped or in the reset condition. As shown in opto coupler is connected between phase and neutral load conductors and I O port GP of microcontroller . Microcontroller uses the value of the signal voltage at port GP to determine whether or not GFCI IC device is being supplied with power and whether the device is tripped or in the reset condition. When GFCI IC device is powered e.g. via its voltage input port LINE which occurs when AC power is connected to line terminals a voltage is generated at the output port VS . This voltage is dropped across zener diode which is provided to maintain the voltage supplied to the microcontroller within an acceptable level. Diodes connected between the phase line conductor and power supply input port LINE of GFCI IC ensures that the voltage level supplied to GFCI IC and the VS output remain below approximately 30 volts. The voltage signal dropped across zener diode is connected to input port GP of microcontroller . If microcontroller does not measure a voltage at GP it determines that no power is being supplied by GFCI IC device and declares EOL.

Alternatively if microcontroller measures a voltage at GP it determines whether the device is tripped or in the reset state based on the value of the voltage. For example according to the circuit in if the voltage at GP is measured to be between 3.2 and 4.0 volts e.g. between 76 of VCC and 100 of VCC it is determined that there is no power at the face and load contacts and thus the device is in the tripped state. If the voltage at GP is between 2.4 and 2.9 volts e.g. between 51 of VCC and 74 of VCC it is determined that there is power at the face and load contacts and the device is in the reset state.

According to a further embodiment when EOL is determined microcontroller attempts to trip interrupting device in one or both of the following ways a by maintaining the stimulus signal on third conductor into the firing half cycle of the AC wave and or b by generating a voltage at an EOL port GP of microcontroller . When EOL has been declared e.g. because the auto monitoring routine fails the requisite number of times and or no power is being supplied from the supply voltage output VS of GFCI IC device microcontroller produces a voltage at EOL port GP . Optionally microcontroller can also use the value of the input signal at GP as described above to further determine whether the device is already in the tripped state. For example if microcontroller determines that the device is tripped e.g. the load and face contacts are not electrically connected to the line contacts microcontroller may determine that driving SCR and or SCR in an attempt to open the contacts and trip the device is unnecessary and thus not drive SCR and SCR via GP.

The voltage at GP directly drives the gate of SCR and or SCR to turn SCR and or SCR ON thus enabling it to conduct current and activate solenoid . More specifically when SCR and or SCR are turned ON current is drawn through coil of dual coil solenoid . For example dual coil solenoid includes inner primary coil which comprises an 800 turn 18 Ohm 35 AWG coil and outer secondary coil which includes a 950 turn 16.9 Ohm 33 AWG coil. Further details of the construction and functionality of dual coil can be found in U.S. patent application Ser. No. 13 422 797 assigned to the same assignee as the present application the entire contents of which are incorporated herein by reference for all that is taught.

As described above when it is determined via the auto monitoring routine that detection circuit is not successfully detecting ground faults e.g. it does not detect the flux resulting from current flowing in conductor or it is not otherwise generating a drive signal at the SCR OUT output port of GFCI IC device to drive the gate of SCR upon such detection microcontroller determines EOL and attempts to trip interrupting device by methods mentioned above. Specifically microcontroller attempts to directly trip directly driving the primary coil by the back up path GP to SCR and SCR. There is at least one difference however between the signal on conductor when the auto monitoring routine is being run normally and the signal on conductor generated when EOL is determined. That is under EOL conditions GP energizes both SCR and SCR to be triggered and coil and coil to be energized thus activating solenoid and to trip interrupting device .

If interrupting device is opened or if interrupting device was otherwise already open power on indicator circuit will be OFF. For example in the embodiment shown in power on indicator circuit includes LED in series with resistor and diode . The cathode of LED is connected to the neutral load conductor and the anode of diode is connected to phase load conductor . Accordingly when power is available at the load conductors that is the device is powered and in the reset state current is drawn through the power on circuit on each alternating half cycle of AC power thus illuminating LED . If on the other hand power is not available at the load conductors for example because interrupting device is open or tripped or the device is reset but no power is being applied LED will be dark or not illuminated.

Additional embodiments and aspects thereof related to the auto monitoring functionality consistent with the present invention as well as further discussion of some of the aspects already described are provided below.

The sinusoidal AC waveform discussed herein is connected to the phase and neutral line terminals when the self test GFCI device is installed correctly. According to one embodiment the AC waveform is a 60 Hz signal that includes two half cycles a positive 8.333 millisecond half cycle and a negative 8.333 millisecond half cycle. The so called firing half cycle refers to the particular half cycle either positive or negative during which a gate trigger signal to SCR results in the respective gates of SCR and SCR being driven and the corresponding respective solenoid coils conducting current thus firing solenoid and causing the armature of the solenoid to be displaced. A non firing half cycle refers to the alternate half cycle of the AC waveform i.e. either negative or positive during which current does not flow through the SCR or its respective solenoid coil regardless of whether or not the SCR gate is triggered. According to the present embodiment whether the positive or negative half cycle is the firing half cycle is determined by a diode or some other switching device placed in series with the respective solenoid coil. For example in diodes and are configured such that the positive half cycle is the firing half cycle with respect to SCRs and respectively.

According to a further embodiment of a circuit interrupting device consistent with the invention microcontroller optionally monitors the AC power input to the device. For example the 60 Hz AC input that is electrically connected to the phase and neutral line terminals is monitored.

More particularly a full 60 Hz AC cycle takes approximately 16.333 milliseconds to complete. Thus to monitor and confirm receipt and stabilization of the AC waveform a timer counter within microcontroller is implemented. For example within the three 3 second auto monitoring window the 60 Hz input signal is sampled once every millisecond to identify a leading edge i.e. where the signal goes from negative to positive values. When a leading edge is detected a flag is set in the software and a count is incremented. When the three 3 second test period is finished the count result is divided by 180 to determine whether the frequency is within a specified range. For example if the frequency is stable at 60 Hz the result of dividing by 180 would be 1.0 because there are 180 positive edges and 180 cycles in three 3 seconds worth of a 60 Hz signal. If the frequency is determined to not be within a given range for example 50 70 Hz the auto monitoring self test fault testing is stopped but the monitoring of GP continues. Accordingly a premature or errant power failure determination is avoided when a circuit interrupting device in accordance with the invention is connected to a variable power source such as a portable generator and the power source exhibits a lower frequency at start up and requires a stabilization period before the optimal frequency e.g. 60 Hz is achieved.

If the frequency is not stable at the optimal frequency or at least not within an acceptable range initiation of the auto monitoring routine is delayed until the frequency is stabilized. If the frequency does not achieve the optimal frequency or a frequency within an acceptable range within a predetermined time a fail tally is incremented. Similar to the fail tally discussed previously with respect to the auto monitoring routine if the tally reaches a given threshold microcontroller declares EOL.

As described above according to at least one exemplary embodiment programmable device is implemented in a microcontroller. Because some microcontrollers include non volatile memory e.g. for storing various data etc. in the event of a power outage according to a further embodiment all events timers tallies and or states within the non volatile memory are cleared upon power up of the device. Accordingly if the fail tally or other condition resulted from improper device installation inadequate or improper power or some other non fatal condition with respect to the circuit interrupting device itself the fail tally is reset on power up when the tally incrementing event may no longer be present. Another way of avoiding this potential issue in accordance with the invention is to utilize a programmable device that does not include non volatile memory.

While various embodiments have been chosen to illustrate the invention it will be understood by those skilled in the art that other modifications may be made without departing from the scope of the invention as defined by the appended claims.

