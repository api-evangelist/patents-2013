---

title: Method and system for feature extraction and decision making from series of images
abstract: Apparatus and methods comprise examination of a subject using images of the subject. The images can provide a non-invasive analysis technique and can include a plurality of images of a portion of the subject at different times a temperature stimulus applied to the subject. An image of the portion of the subject can be aligned such that each pixel of the image corresponds to the same point on the subject over a sequence of images of the portion. The sequence of images can be processed after aligning the images such that data is extracted from the images. The extracted data can be used to make decisions regarding the health status of the subject. Additional apparatus, systems, and methods are disclosed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09471974&OS=09471974&RS=09471974
owner: SKINfrared LLC
number: 09471974
owner_city: Albuquerque
owner_country: US
publication_date: 20130314
---
This patent application is a U.S. National Stage Filing under U.S.C. 371 from International Patent Application Serial No. PCT US2013 031689 filed 14 Mar. 2013 published as WO 2013 172963A1 which application claims the priority benefit of U.S. Provisional Application Ser. No. 61 648 927 filed 18 May 2012 both of which are incorporated herein by reference in their entirety.

This invention was made with U.S. Government support under grant number R25 CA153825 awarded by the National Institute of Health CNTC . The United States Government has certain rights to the invention.

Skin cancer is a serious medical condition that can be fatal under certain situations if not properly treated. In most cases when this illness is diagnosed a patient will go to the doctor to report a skin abnormality discoloration growth etc. . After a visual inspection that determines that the abnormality could be malignant the doctor typically will perform a biopsy wherein a portion or the entirety of the abnormality is removed. This specimen is then processed with known techniques and examined by an expert to determine whether or not it is a malignant cancer. However in an effort to conservatively catch all incidents of cancer doctors tend to perform the biopsy procedure in any case where there is doubt. Therefore the large majority 90 of biopsies that are taken turn out to be healthy tissue. This causes undue suffering and discomfort to healthy individuals. In addition the risk of not catching serious skin cancers early enough increases when doctors try to avoid this intrusive procedure in the first place.

The following detailed description refers to the accompanying drawings that show by way of illustration and not limitation various example embodiments of the invention. These embodiments are described in sufficient detail to enable those skilled in the art to practice these and other embodiments. Other embodiments may be utilized and structural logical and electrical changes may be made to these embodiments. The various embodiments are not necessarily mutually exclusive as some embodiments can be combined with one or more other embodiments to form new embodiments. The following detailed description is therefore not to be taken in a limiting sense.

In various embodiments a complete imaging and analysis system for the detection of skin cancer may offer doctors and medical technicians an entirely passive non intrusive way of detecting skin cancer. Such an imaging and analysis system is based on the principle that healthy tissue has different thermal properties than diseased tissue. For example when the skin is cooled healthy tissue will return to its original temperature at a different rate than diseased tissue. By examining these differences the system can provide doctors a better idea whether the abnormality is or is not malignant. However such a system or a system similar to an embodiment of a system operable to detect skin cancer may also be used in extremely different applications such as for example but not limit to embodiments of systems to classify minerals in rock for a geological survey.

System to control temperature can be arranged as a system for controlling temperature so that the thermal response of a subject can be measured. The subject may be skin of an individual. Controlling temperature can include for example cooling a subject such as skin from an ambient temperature or from a temperature to which the subject has been heated. System to mark a subject can be arranged as a system for marking the subject such as skin to enable a registration process. System to acquire images can be arranged as a system for acquiring images where the images may be traditional single color images traditional multi color images infrared images multispectral hyperspectral images other types of images or combinations thereof. System to align the images can be arranged as a system for aligning the images with each other to account for subject motion such as a patient motion and or camera motion. System to align the images can be structured to operate on stored instructions to align the images according to an algorithm performed by execution of the instructions. An algorithm is herein and generally conceived to be a self consistent sequence of steps and or rules governing operation of the steps leading to a result. The aligning of the images can provide for registering images. System to process the acquired images can be arranged as a system for processing the acquired images to extract information. System to process the acquired images can be structured to operate on stored instructions to process the images according to an algorithm performed by execution of the instructions. System to view information can be arranged as a system for viewing the information in a manner that is meaningful to an expert that deals with the subject being investigation. For system disposed as part of a system to detect cancer the information can be provided in a manner that is meaningful to a medical expert. Though imaging and analysis systems as taught herein may be used in non medical applications the following discussions deal with a system operable to detect skin cancer. Such discussions appropriately modified may be applied to non medical applications.

In an embodiment system to control temperature can be used to detect skin cancer. The detection of skin cancer can be conducted by examining differences in thermal response of different parts of the skin. In other words a system can use system to control temperature to detect and analyze the rate of warming of skin that has been cooled down. To perform such a function system to control temperature can include cooling and or heating components that can cool or warm the skin quickly while at the same time providing uniform cooling or heating to the region of skin that is being imaged by for example system to acquire images. The heating or cooling images can be captured by an infrared camera. System to control temperature may include cooling and or heating components that not only cool or warm the skin quickly but can also cool or warm the skin comfortably. Uniformity can be important to have all the cells at the same initial temperature.

In an embodiment a pressurized air system that blows cold air on the patient s skin can be used. The cooling system may consist of a vortex tube that provides a blast of cold air whose temperature and output volume depend on the system parameters such diameter of opening shape of nozzle and inlet pressure. Another approach to cooling or heating can include the use of a thermal spreader to achieve cooling via conduction convection or radiation. The thermal spreader could be placed in an on status temporarily and removed before data acquisition or could be in the field of view of an imaging system such as system to acquire images. Pulsed heating or cooling may also be used with different durations to study the differential temperature response of a lesion and healthy skin.

System to mark a subject such as skin and system to align the images are related to the process of registering the images acquired using system to acquire images. System to process the acquired images can provide an information extraction process requiring that all of the images are substantially lined up with respect to each other so that a specific pixel in each image corresponds to the same part of the skin on the patient. In this way information such as temporal trends at each selected point on the skin s surface can be measured. However in practice the patient s skin undergoes natural motion because of breathing involuntary movement etc. and the camera may not be perfectly static. These events produce apparent motion in each of the captured image frames which must be removed if the information extraction is to be performed successfully.

System to mark a subject can be used to first apply calibration markers to the patient s skin that enable the registration of the images by an algorithm of system to align the images. These are important to a proper working system since without the calibration markers it is difficult if not impossible to register the images by system to align the images. These markers must be clearly visible against the skin in the wavelength measured by the imaging device such as a camera of system to acquire images. In other words the marker should clearly stand out in the final image when compared to the surrounding skin.

In an embodiment the marker contains sharp corners that can be clearly resolved in the captured images. These corners can provide features that will help in the registration process when used by an algorithm of system to align the images. It was found experimentally that putting thermal insulation between the marker and the skin helped the marker stand out better in the final infrared thermal images. For example tape can be used as the thermal insulation. Different materials with different emissivity and thermal conductivity can be used to make good markers. For markers to be visible in all frames markers having a high emissivity can be used in all the frames. Reheating or re cooling of the surrounding skin from the marker should be avoided. Similarly reheating or re cooling of the marker must be avoided.

In an embodiment system to acquire images can include an imaging device to capture images of the skin s surface. An imaging device can be a camera or other similar device to capture images of the skin s surface. To study the skin s response over time the camera or similar device includes the capability to acquire video or a sequential series of frames where the time of each is known or can be computed. In an embodiment a camera has the capability to acquire frames reasonably close together over a selected time period. The time period may be but is not limited to about 3 5 minutes. In a non limiting example a camera having the capability to acquire 10 frames per second for example for a period of about 3 5 minutes can be used. However a selected number of frames over a selected time period other than the above examples can be implemented depending on the application. The camera or other imaging device can be arranged to capture an abnormality in the skin being investigated the skin markers identified by a system as system to mark a subject as well as some of the healthy tissue surrounding the abnormality.

The imaging device may be provided in different formats. The imaging device can be an infrared camera which can measure the temperature of the skin. The imaging device can be a device capable of measuring a response from 300 microns to 3 mm covering the entire electromagnetic spectra. For example for measuring temperatures a mid wave infrared camera for example 5 m and a long wave infrared camera for example 10 m can be used.

The imaging device can include a number of different types of cameras. For example the imaging device can include an infrared camera and a standard color camera. The cameras may both be taking pictures throughout the entire period of the acquisition either simultaneously or asynchronously . Alternatively the color camera may capture a single picture with the rest of the acquisition being performed by the infrared camera. Having two kinds of pictures makes the system more useful in practice since doctors are normally accustomed to looking at color images of the skin and are unfamiliar with infrared images. Therefore the color images help the doctor recognize the skin features on the infrared images better.

The imaging device such as a camera can have spacers or handles to make it easier to align with the skin and to take pictures consistently from a fixed distance to the skin. The imaging devices such as cameras can be mechanically electronically or optically synced to capture the images at the same point of time.

Stage to align the images can include an algorithm for registering images. The patient s skin will undergo involuntary motion. Since the motion in the series of images is not a desirable feature and must be eliminated the images acquired over time need to be registered or aligned so that each pixel of the image corresponds to the same point on the skin over the entire sequence. For this reason a registration algorithm uses the markers from system to align the images to each other. In an embodiment the algorithm uses a corner detection technique to extract the sharp corners from the image many of which correspond to the skin markers from using system to mark a subject. Corner detection technique is a known technique. The algorithm treats these sharp corners as features and tracks them over all the frames. The algorithm is structured to use knowledge that these features although they are moving from frame to frame all correspond to the same point on the skin surface. Therefore it solves for a transformation that maps each single feature to its correct location in a reference image. In an example a homography can be used to compute this transformation which assumes that the skin is on a plane. Once this transformation has been computed it can be applied to all the pixels in the image. Sometimes re sampling may be performed to compute the final pixel values. Effectively this registers the skin from one image to another. In an embodiment with registration performed on the infrared images the algorithm can work entirely on scalar values. In another embodiment color images can be registered to the infrared images in a similar manner.

Stage to process the acquired images can use an algorithm for processing the acquired images to extract information. Once the images have been registered system to process the acquired images performs algorithms on the aligned image sequence in order to extract information. In an embodiment the information to be extracted is yes no binary values that suggest the presence of malignant cancer. In another embodiment the information can be a probability value a real number not binary that may indicate the chance of malignancy.

The following provides a non limiting example of an algorithm to extract information. When using an infrared camera the temperature of the skin is being imaged at every point in the image over time. Therefore for each point on the skin a temperature vs. time curve that indicates how the skin s temperature at that point changed over time can be obtained. A mathematical model can be fitted to this data to generate a list of n parameters that describe the curves at each selected point. The model can be but is not limited to a simple polynomial model an exponential model a logarithmic model a model using orthogonal basis functions a model using non orthogonal basis functions or a physiologically based model. These n parameters can then be used to classify the different parts of the skin with various segmentation clustering algorithms. It is important to also consider the fact that not all the areas of the skin are at the same initial temperature which may be due to variations caused by the cooling or heating systems. The algorithm may provide an approach to compensate for the offset associated with the various differential temperature curves.

For example if a model is fitted with n parameters to each selected point on the skin each selected point on the skin can essentially be considered as embedded within an n dimensional space. If some parts of the skin are known to be healthy such as the healthy tissue surrounding the abnormality these parts can be used to potentially classify the points into healthy tissue or malignant tissue. Algorithms such as but not limited to principal component analysis PCA may be used for such a procedure. PCA effectively would linearly project the n dimensional parameter space into an orthogonal basis that would separate out features more strongly with fewer parameters.

System to view information can be arranged for viewing the information in a manner that is meaningful to a medical expert. Once the algorithms of stage have been applied to the aligned images system allows a medical expert to understand the results of the analysis. System can use stored instructions that can be executed by a processor to present the information to the medical expert. For example executable instructions can be used to plot the temperature trends as a function of a point or many points on the skin where the point s are selected by the user using a user selector mechanism such as but not limited to a mouse. The executable instructions may assign colors to the representation of the information such that the images can be color coded using the n dimensional parameter space discovered in stage . This procedure may be performed for example by producing n false color images showing the magnitude of each component. Computer vision machine learning algorithms may also be applied to this data to further segment and highlight features and structures in the data.

In an embodiment system to view information may provide a visualization system that may include a full mouse driven navigation control to allow a doctor to rotate the skin to view it from different directions. Also if the sample is later biopsied the visualization data can be used to align to the scan of the biopsy to allow for a medical expert to correlate physical features to temperature patterns or other patterns on the skin. This would allow for a greater understanding for the processes involved in malignant cases. In an embodiment system to view information may be a text based indicator that indicates to the user yes or no as to whether to biopsy the sample.

At an image is aligned such that each pixel of the image corresponds to a same point on the subject over a sequence of images of the portion. The image being aligned may be an image of the portion of the subject. The method can include applying one or more calibration markers to the subject such that the one or more calibration markers are used when aligning the image of the portion of the subject. The one or more calibration markers can be visible against the portion of the subject in a wavelength range measured by an imagining device that captures the images of the subject. The one or more calibration markers can contain sharp corners resolved in the acquired images where the one or more calibration markers are used in aligning the image of the portion of the subject. Aligning the image of the portion of the subject can include using a corner detection technique to extract sharp corners from the image. Aligning the image of the portion of the subject can include performing a transformation that maps each feature of the image to its correct location in a reference image. Performing the transformation can use a homography to compute the transformation under an assumption that the subject is on a plane.

At the sequence of images is processed after aligning the images such that data is extracted from the images. Processing the sequence of images may include for each selected point on the subject generating temperature vs. time data fitting a model to the data generating a list of parameters corresponding to the temperature vs. time data at each selected point using the model and using one or more segmentation clustering techniques to classify different parts of the subject. Using one or more segmentation clustering techniques to classify different parts of the subject can include classifying points on skin as healthy tissue or malignant tissue.

At data corresponding to the subject is presented on a display unit. The data can be presented following the processing of the sequence. Presenting the data can include color coding the images on the display unit. The color coding can be conducted using a n dimensional parameter space generated from processing the sequence of images after aligning the images. Presenting the data can include rotating on the display unit an image of a skin subject to view the skin subject from different directions. Presenting the data can include on the display unit displaying visualization data of a skin subject aligning the visualization data to a scan of a biopsy of the skin subject corresponding to the visualization data of the skin subject.

The method can include applying a set of temperature stimuli to the portion of the subject capturing the images of the portion at the different times with respect to applying the set of temperature stimuli and determining a status of the portion of the subject from processing the sequence of images after alignment. Determining the status of the portion of the subject can include determining a rate of warming the subject after the subject has been cooled. Applying the set of temperature stimuli to the portion of the subject can include applying pulsed heating or cooling with different durations to skin including healthy skin and a lesion to analyze a differential temperature response of the lesion and the healthy skin. Determining the status of the portion of the subject can include determining a presence of malignant cancer or a probability value indicating a chance of malignancy. Various techniques discussed herein or combinations thereof can be used in the example method of examining a subject using images of the subject or in other methods to examine a subject using images of the subject in a manner similar to the example method or portions thereof.

In various embodiments a machine readable storage device can have instructions stored thereon which instructions when executed by one or more processors of a machine cause the machine to perform operations the operations comprising any of the features of methods of examining a subject using images of the subject and conducting operations based on the images in a manner identical to or similar to the methods and schemes described herein. For example the instructions can include acquiring images of a subject the images including a plurality of images of a portion of the subject at different times aligning an image of the portion of the subject such that each pixel of the image corresponds to a same point on the subject over a sequence of images of the portion processing the sequence of images after aligning the images such that data is extracted from the images and presenting data corresponding to the subject on a display unit following the processing of the sequence. Further a machine readable storage device herein is a physical device that stores data represented by physical structure within the device. Examples of machine readable storage devices include but are not limited to read only memory ROM random access memory RAM a magnetic disk storage device an optical storage device a flash memory other electronic magnetic and or optical memory devices and combinations thereof.

System can include one or more sources arranged to apply a set of temperature stimuli to the portion of the subject. System can include temperature controller to control operation of sources . Temperature controller can be structured to apply pulsed heating or cooling with different durations to skin including healthy skin and a lesion. This control may be realized with sources in conjunction with circuitry to activate and turn off sources and timing circuitry to control the duration in which sources are on. Temperature sensors can be used with the timing circuitry.

Image acquisition system can be arranged to capture the images of the portion at the different times with respect to application of the set of temperature stimuli using the sources . Image acquisition system can include a plurality of imaging devices . The plurality of imaging devices can include an infrared camera and a camera that provides color images. Image acquisition system can include one or more imaging devices with one or more optical elements to capture images of the subject. The optical elements can include one or more of a spectral filter a polarizer or a neutral density filter. The spectral filter can include a low pass filter a high pass filter a bandpass filter or a notch filter. The polarizer used can have an angle continuously variable from 0 degrees to 360 degrees. The neutral density filter can be operable to change a dynamic range of an image being captured by its corresponding imaging device.

System can include a marker system to identify markers applied to the subject. The markers can be realized as one or more calibration markers applied to the subject in a manner in which alignment system is operable to use to align the image of the portion of the subject. The one or more calibration markers can be structured to be visible against the portion of the subject in a wavelength range measured by an imagining device of image acquisition system that captures the images of the subject. The one or more calibration markers can contain sharp corners resolvable in the acquired images where the sharp corners can be used in aligning the image of the portion of the subject. Spatial coordinates of a reference marker can be used to correct for voluntary or involuntary movement of a portion of the subject under investigation.

Alignment system can include instructions to perform a corner detection technique to extract sharp corners from the image. Alignment system can include instructions to perform a transformation that maps each feature of the image to its correct location in a reference image. The instructions to perform the transformation can include instructions to use a homography to compute the transformation under an assumption that the subject is on a plane.

Processing system can be structured to be operable to determine a rate of warming a subject after the subject has been cooled. Processing system can be structured to determine a status of the portion of the subject from processing the images after alignment. Processing system can be arranged to analyze a differential temperature response of a lesion and healthy skin of a subject. Processing system can be operable to determine a presence of malignant cancer or a probability value indicating a chance of malignancy. Processing system can include instructions to process the sequence of images including instructions to for each selected point on the subject generate temperature vs. time data to fit a model to the data to generate a list of discrete and continuous parameters corresponding to the temperature vs. time data at each selected point using the model and to use one or more segmentation clustering techniques to classify different parts of the subject. The instructions to use one or more segmentation clustering techniques can include instructions to classify points on skin as healthy tissue or malignant tissue.

Display system can be structured to be operable to present data with respect to the subject by color coding the processed images on display unit . The color coding can be conducted using a n dimensional parameter space generated from processing the sequence of images after aligning the images. Display system can be operable to rotate on display unit an image of skin of a subject such that the skin is viewable from different directions. Display system can be operable to present the data on display unit displaying visualization data of the skin such that the visualization data is aligned to a scan of a biopsy of the skin corresponding to the visualization data of the skin.

One or more components of system may be realized as one or more sets of instructions stored in system such as stored in memory and executed by one or more processor s to perform the functions of such components. Such instructions can include one or more algorithms to perform specific functions. The one or more processor s may be used by any of the components of system . Alternatively system components may include their own processor. System may include a database with data disposed in memory that is accessible to the components of system . The database can be arranged to store data corresponding to a full body scan of the subject. System can be arranged to conduct non invasive operations for analysis in accordance with the methods taught herein and may include various of the devices discussed herein to conduct the non invasive operations.

System may also include electronic apparatus and a communications unit . Electronic apparatus may include circuitry to operate with various components of system . For example electronic apparatus may include circuitry to activate and turn off components timing circuitry to control the duration in which components are off or on sensors such as but not limited to temperature sensors or combinations of these circuits and sensors. Communications unit may be operable to provide data and or analysis results to systems other than system .

System can also include a bus where bus provides electrical conductivity among the components of system . Bus can include an address bus a data bus and a control bus each may be independently configured. Bus can be realized using a number of different communication mediums that may allow for the distribution of components of system . Use of bus can be regulated by processor s . Bus may be realized as a communications network.

In various embodiments peripheral devices can include additional displays additional storage memory and or other control devices that may operate in conjunction with processor s and or memory . Processor s may operate independently depending on an assigned function. Peripheral devices can include a display which may be arranged as a distributed component that can be used with instructions stored in memory to implement a user interface to manage the operation of components of system . Such a user interface may be operated in conjunction with communications unit and bus . The user interface to manage the operation of components of system may be implemented in display system .

Systems and combinations thereof or similar systems such as but not limited to those of may be integrated into a system that may provide a home test version of systems discussed herein. A person may use this home test system in their home routinely to detect if there are possible dangers. The person may be for example someone who is in a population that is considered high risk of getting skin cancer either by their geographical location or skin complexion fair skin . This kind of system may be able to detect early stages of malignant cancers before they are even visible in the skin and may produce a warning instructing the person to seek medical help for further examination. This system may also be extended to total body photography where the differential temperature data is obtained by using an extended cooling system single or multiple markers and multiple cameras infrared visible etc .

Although specific embodiments have been illustrated and described herein it will be appreciated by those of ordinary skill in the art that any arrangement that is calculated to achieve the same purpose may be substituted for the specific embodiments shown. Upon studying the disclosure it will be apparent to those skilled in the art that various modifications and variations can be made in the devices and methods of various embodiments of the invention. Various embodiments can use permutations and or combinations of embodiments described herein. Other embodiments will be apparent to those skilled in the art from consideration of the specification and practice of the embodiments disclosed herein. It is to be understood that the above description is intended to be illustrative and not restrictive and that the phraseology or terminology employed herein is for the purpose of description.

