---

title: Generating and using network data to provide a content customization service
abstract: A system is configured to receive a request for a customization packet associated with a user device; retrieve data associated with the device; encode portions of the network data using a group of keys, wherein each portion is encoded using a different one of the keys, and wherein each key corresponds to a different set of fields, of one or more sets of fields within the packet; store the encoded portions in the one or more sets of fields within the packet; and transmit, to a content provider, the packet, wherein the packet enables the content provider to decode all or a portion of the network data using one of the keys, and wherein all or the portion of the decoded network data enables the content provider to generate customized content for the device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09489683&OS=09489683&RS=09489683
owner: Verizon Patent and Licensing Inc.
number: 09489683
owner_city: Basking Ridge
owner_country: US
publication_date: 20131021
---
This application is a divisional of U.S. patent application Ser. No. 13 072 891 filed Mar. 28 2011 the disclosure of which is hereby incorporated herein in its entirety.

Service provider networks transport network traffic associated with a variety of services applications and content. The network traffic may include voice text video and or data. Service provider networks are sized and or scaled in order to transport an increasing quantity of traffic that is sent by and or received from an increasing number of users and or content providers. Additionally the increase in the quantity of traffic corresponds to an expanding demand for various types of services applications and or content.

Unfortunately content providers transport content such as advertising to user devices in a manner that is not always tailored to the user devices. Additionally service provider networks are transporting an increasing amount of the content e.g. at higher bandwidths data rates bulk quantities etc. to the user devices without charging the content providers a fee for network services provided by the service provider networks.

The following detailed description refers to the accompanying drawings. The same reference numbers in different drawings may identify the same or similar elements.

Systems and or methods described herein may enable network data associated with a user device to be stored within a customization packet that when decoded permits a content provider to send customized content to the user device. The term network data as used herein may include information associated with the user device e.g. a device identifier a device address a port identifier etc. information associated with a user of the user device e.g. a username a password information associated with an age language gender etc. context information associated with the user device e.g. information associated with a location of the user device a browsing history preferred content a call history etc. and or information associated with a community of interest COI with respect to the user device e.g. preferred content preferred user devices with which the user device communicates etc. .

As described herein a server device such as an analytical and reporting AR server may encode the network data associated with the user device in a format that includes one or more stages. The AR server may store the encoded network data in a customization packet and or data structure within fields that correspond to the stages and may send the customization packet and or information obtained from the data structure to the content provider e.g. usually for a fee and or another form of consideration .

As also described herein each field within the customization packet may include a respective portion of the network data associated with the user device. The content provider may obtain a portion of the network data that corresponds to each stage for which access is authorized. Different portions of the network data may be encoded differently e.g. based on a different key based on a respective stage with which each of the different portions are associated. The encoding may permit the content provider to access one or more portions of the network data based on the stage for which a key has been obtained e.g. for the fee and or other form of consideration . The content provider may for example access all of the network data associated with the user device when a respective key for all of the stages has been obtained and or purchased. The content provider may use the network data to customize content such as advertising movies television content sports music books games etc. for the user device. Customized content may be particular types of content that have been selected and or tailored to the user device based on a location of the user device usage habits of the user device e.g. a call history browsing history purchasing habits preferred content etc. information associated with a user of the user device etc. A degree of customization to be performed on the content to be sent to the user device may be based on a quantity of network data accessible by the content provider.

As further described herein a content optimization CO server may perform an operation that enables updated customization packets to be dynamically sent to a content provider in a timely manner. The CO server may for example identify a particular content provider from which content is to be obtained by the user device based on a domain name service DNS query received from the user device. The CO server may communicate with the AR server to obtain an updated customization packet associated with the user device. The CO server may send the updated customization packet to the particular content provider and or another content provider that for example renders advertising content via a web page associated with the particular content provider. The updated customization packet may enable the particular content provider to provide particular types of content to the user device. Additionally or alternatively the updated customization packet may enable the other content provider to display in a timely manner customized advertising content via the web page associated with the particular content provider.

Also in some implementations one or more of the devices of environment may perform one or more functions described as being performed by another one or more of the devices of environment . For example CO server and AR server may be combined into a single device. Devices and or systems of environment may interconnect via wired connections wireless connections or a combination of wired and wireless connections.

User device may include any computation or communication device such as a wireless mobile communication device that is capable of communicating with service provider network . For example user device may include a radiotelephone a smart phone a personal communications system PCS terminal e.g. that may combine a cellular radiotelephone with data processing and data communications capabilities a personal digital assistant PDA e.g. that can include a radiotelephone a pager Internet intranet access etc. a laptop computer a tablet computer a camera a personal gaming system or another type of mobile computation or communication device.

PGW may include one or more devices or other types of computation or communication devices that gather process search store and or provide information in a manner similar to that described herein. PGW may include one or more data processing and or traffic transfer devices such as a gateway a router a modem a switch a firewall a network interface card NIC a hub a bridge a proxy server an optical add drop multiplexer OADM or some other type of device that processes and or transfers traffic. In one example implementation PGW may include a device that aggregates traffic received from one or more user devices and may send the aggregated traffic to network . In another example implementation PGW may receive traffic from network and may send the traffic to user device . PGW may perform policing operations on traffic destined for service provider network .

CO server may include one or more server devices that gather process search store and or provide information in a manner similar to that described herein. In an example implementation CO server may perform operations associated with content distribution within environment . For example CO server may perform caching operations by obtaining content from content provider and or temporarily storing the content in a memory associated with CO server . CO server may process content in order to ensure that the content is sent to user device . CO server may for example convert content into a format and or protocol based on a type of user device . CO server may send the content to user device in a manner that maximizes network throughput without inducing congestion jitter and or other conditions within service provider network .

In another example implementation CO server may perform operations to provide a content customization service to content provider and or user devices that subscribes to service provider network . CO server may obtain network data associated with user device . CO server may for example obtain information associated with user device . In one example CO server may monitor traffic flows associated with user device and may obtain from network address translation NAT bindings associated with service provider network information associated with user device . The information associated with user device may include a device identifier e.g. an MDN etc. a device address e.g. an internal IP address and or range of port identifiers a port range associated with the internal IP address a public IP address etc. . CO server may send the information associated with user device to AR server to be used to generate a customization packet.

CO server may monitor packets associated with traffic flows being transported to and or from service provider network . CO server may for example detect packets associated with a DNS query from user device . CO server may identify a uniform resource locator URL associated with content provider from the packets. CO server may replicate the packets and may send a copy of the packets to AR server to obtain an updated customization packet associated with user device . CO server may forward the packets associated with the DNS query to DNS server . CO server may forward the updated customization packet to content provider and or another content provider e.g. that renders advertising content on a web page associated with content provider that enables content destined for user device to be customized for user device .

AR server may include one or more server devices or other types of computation or communication devices that gather process search store and or provide information in a manner similar to that described herein. In one example implementation AR server may monitor traffic being sent to and or received from service provider network to obtain network data associated with user device . In another example implementation AR server may generate and or update a customization packet associated with user device based on the network data.

For example AR server may monitor packets associated with traffic flows that are being transported to and or from service provider network to obtain network data associated with user device . AR server may in one example obtain information associated with user habits of user device to be included in a usage history associated with user device . AR server may for example obtain information associated with a time e.g. total time peak time average time etc. per second day week etc. and or at what cost e.g. based on minutes used and or rate per minute etc. that a particular user device communicates with content provider . AR server may obtain information associated with a quantity of content that is downloaded e.g. total quantity of bytes per second week month etc. a quantity of bandwidth used e.g. total peak average etc. per second week month etc. and or a quantity of purchases made e.g. total average etc. per day week month etc. as a result of communications with content provider .

AR server may obtain information associated with content that is accessed and or downloaded from content provider which may include a method of download e.g. via streaming media progressive download etc. a type of content e.g. movies video music audio games documents images etc. a genre associated with the content e.g. sports science fiction news etc. etc. Based on the information associated with the content AR server may identify preferred content providers e.g. top one top five top 10 etc. a preferred type of content a preferred genre of content etc. for user device . Additionally or alternatively AR server may identify a quantity of content that user device is likely to download a type of product that user device is likely to purchase a likelihood that user device may purchase the type of product etc.

AR server may obtain information associated with a call and or message history of user device over a period of time. For example AR server may obtain information associated with messages e.g. using a short message service SMS protocol multi media service MMS protocol an instant message IM protocol an email protocol etc. . AR server may in another example obtain information associated with calls e.g. based on a mobile switching center MSC call data record placed by and or to user device . AR server may use the messages and or calls to identify preferred user devices e.g. sometimes referred to as friends with which user device communicates a preferred method of communicating e.g. SMS MMS calls etc. and or information associated with a duration that a message exchange and or call is likely to be.

AR server may obtain context information associated with user device . AR server may for example obtain location information associated with user device over a prior period of time. For example AR server may obtain the location information from service provider network . In one example AR server may use an application programming interface API to obtain the location information. In another example AR server may send a query to user device to obtain the location information. In yet another example AR server may obtain from packets associated with the traffic monitoring information associated with a cell via which user device is communicating. AR server may identify preferred locations associated with user device e.g. top five locations top ten locations etc. based on a respective period of time that user device is located at each preferred location. AR server may identify a location at which user device is located most often. AR server may obtain a current location when generating and or updating a customization packet. In another example AR server may communicate with HSS to obtain information associated with a type of user device an operating system being executed by user device services for which user device has subscribed etc.

AR server may obtain information associated with a user of user device . AR server may for example communicate with HSS to retrieve information associated with a user profile e.g. a username a password a PIN information associated with an age and or gender of the user information associated with preferred content genres parental controls preferred language etc. that corresponds to the user.

AR server may identify a COI associated with user device based on the traffic monitoring. For example AR server may in a manner similar to that described above obtain context information associated with each preferred user device e.g. information associated with user habits preferred content preferred content providers SMS messages MMS messages calls etc. for each preferred user device . AR server may identify the COI associated with user device based on the context information associated with user device and context information associated with the preferred user devices .

AR server may use the network data associated with user device to generate a customization packet to be used to provide a customization service to content provider and or user device . AR server may encode the network data and may store the encoded network data in a customization packet that is transmitted by CO server to content provider that enables content provider to decode and use all or a portion of the network data to customize content that is sent to user device . AR server may send a key used to encode the network data to content provider via CO server that enables content provider to decode the network data.

DNS server may be a server device that manages stores and or obtains one or more IP addresses that corresponds to content providers from which user device obtains content. DNS server may handle DNS queries received from user device . DNS server may receive from user device and via service provider network a request for an IP address associated with particular content e.g. based on a domain name etc. and DNS server may retrieve an IP address associated with a particular content provider that corresponds to the domain name. DNS server may send the IP address to user device that enables user device to obtain the content from particular content provider .

HSS may include one or more server devices or other types of computation or communication devices that gather process search store and or provide information in a manner similar to that described herein. For example HSS may manage and or store in a memory associated with HSS information associated with a user profile that corresponds to user device . The information associated with the user profile may in addition or as an alternative to that described above include an access point name APN that is permitted and or accessible by user device rate information minutes allowed and or other information. An APN may identify particular applications services and or data that are permitted for user device . HSS may store information associated with preferences that were specified by user device such as preferred content types e.g. videos movies music etc. preferred content genres e.g. horror sports country music etc. or patterns parental controls e.g. exclude content with a restricted R rating etc. . Additionally or alternatively HSS may authenticate user device to service provider network and or determine whether user device is authorized to use a particular service and or access particular information.

Content providers may include any type or form of content providers. For example content providers may include free television broadcast providers e.g. local broadcast providers such as NBC CBS ABC and or Fox for pay television broadcast providers e.g. TNT ESPN HBO Cinemax CNN etc. and or Internet based content providers e.g. Youtube Vimeo Netflix Hulu Veoh etc. that stream content from websites and or permit content to be downloaded e.g. via progressive download etc. . Content providers may produce media streams e.g. television broadcasts . A media stream may refer to a stream of content that includes video content e.g. a video stream audio content e.g. an audio stream and or textual content e.g. a textual stream .

Content provider may communicate with CO server to obtain a key to obtain encoded network data that is stored in a customization packet. Content provider may use the key that corresponds to all or a portion of the network data to decode the network data stored in the customization packet. Content provider may use the decoded network data to customize content that is to be transmitted to user device .

Service provider network may include one or more wired and or wireless networks via which user devices communicate and or receive content. For example service provider network may include a cellular network the Public Land Mobile Network PLMN a second generation 2G network a third generation 3G network a fourth generation 4G network e.g. a long term evolution LTE network a fifth generation 5G network and or another network. Additionally or alternatively service provider network may include a wide area network WAN a metropolitan area network MAN an ad hoc network an intranet a fiber optic based network and or a combination of these or other types of networks.

Network may include one or more wired and or wireless networks. For example network may include a cellular network the PLMN a 2G network a 3G network a 4G network e.g. an LTE network a 5G network and or another network. Additionally or alternatively network may include a WAN a MAN a telephone network e.g. the Public Switched Telephone Network PSTN an ad hoc network an intranet the Internet a fiber optic based network and or a combination of these or other types of networks.

Bus may include a path that permits communication among the components of device . Processor may include a processor microprocessor or processing logic that may interpret and execute instructions. Memory may include any type of dynamic storage device that may store information and instructions for execution by processor and or any type of non volatile storage device that may store information for use by processor .

Input component may include a mechanism that permits a user to input information to device such as a keyboard a keypad a button a switch etc. Output component may include a mechanism that outputs information to the user such as a display a speaker one or more light emitting diodes LEDs etc. Communication interface may include any transceiver like mechanism that enables device to communicate with other devices and or systems via wireless communications e.g. radio frequency infrared and or visual optics etc. wired communications e.g. conductive wire twisted pair cable coaxial cable transmission line fiber optic cable and or waveguide etc. or a combination of wireless and wired communications. For example communication interface may include mechanisms for communicating with another device or system via a network such as service provider network and or network . In one alternative implementation communication interface may be a logical component that includes input and output ports input and output systems and or other input and output components that facilitate the transmission of data to other devices.

As will be described in detail below device may perform certain operations relating to providing a content customization service. Device may perform these operations in response to processor executing software instructions contained in a computer readable medium such as memory . A computer readable medium may be defined as a non transitory memory device. A memory device may include space within a single physical memory device or spread across multiple physical memory devices. The software instructions may be read into memory from another computer readable medium or from another device. The software instructions contained in memory may cause processor to perform processes described herein. Alternatively hardwired circuitry may be used in place of or in combination with software instructions to implement processes described herein. Thus implementations described herein are not limited to any specific combination of hardware circuitry and software.

Stage field may store information associated with a particular stage that corresponds to a portion of network data associated with user device . Resolution level field may store information associated with a level of resolution that corresponds to the particular stage identified in stage field . The level of resolution may be associated with a degree of precision and or accuracy associated with the network data. The level of resolution may increase in relation to a value associated with the particular stage. In one example a resolution level associated with the particular stage may be lower than another resolution level associated with a stage with a value that is higher than the particular stage. In this example the resolution level associated with a location of user device may be associated with a quantity of error e.g. 1 mile . The particular quantity of error may for example be greater than another quantity of error e.g. 0.25 miles associated with the location of user device that corresponds to the other resolution level.

Price field may store a price associated with network data that corresponds to the particular stage identified in stage field and or resolution level field . The price may be a value that is to be paid by content provider to obtain access to the particular stage e.g. by obtaining a key to the particular stage . Generally the price may increase as the resolution level increases and or a value associated with the stage increases.

Customization data structure may store information associated with a stage e.g. stage 1 that corresponds to a portion of network data associated with user device e.g. as shown by ellipse . The portion of the network data may correspond to a resolution level e.g. resolution level 1 that pertains to a type of network data and or a degree of precision and or accuracy associated with the portion of network data e.g. as shown by ellipse . The portion of the network data and or the resolution level may correspond to a price and or fee structure e.g. price 1 to be paid by a content provider to obtain a key that enables the portion of the network data to be decoded and or accessed e.g. as shown by ellipse .

Customization data structure may store information associated with one or more other stages e.g. stage 2 stage 3 stage 4 etc. that corresponds to other portions of network data associated with user device e.g. as shown by ellipse . Each of the other portions of the network data may correspond to a respective resolution level e.g. resolution level 2 resolution level 3 resolution level 4 etc. as shown by ellipse . The respective resolution level may pertain to another type of network data and or another degree of precision and or accuracy associated with each of the other portions of network data. Each of the other portions of the network data and or the respective resolution level may correspond to a respective price and or fee structure e.g. price 2 price 3 price 4 etc. as shown by ellipse .

Stage field may store information associated with a particular stage to which a portion of network data associated with user device corresponds. Location field may store information associated with a location of user device . The information associated with the location of user device may be associated with a particular degree of accuracy e.g. a resolution level that may for example increase as a value associated with the particular stage increases. The information associated with the location user device may used only to an extent that a user of user device has authorized the use of the information associated with the location of user device . Time at location field may store information associated with a period of time during which user device is located at the location identified in location field . The information associated with the period of time may be associated with a particular stage which may be accessed by content provider only when authorized to access the particular stage. The period of time may be an average time a period within a day e.g. working hours evening hours etc. a day of the week and or some other period of time e.g. peak period of time etc. during which user device spends at the location.

Preferred location field may store information associated with a preferred location such as a location where user device is most often located during a time period e.g. on a per day week month season year etc. basis . The information associated with the preferred location may be associated with a particular stage which may be accessed by content provider only when authorized to access the particular stage.

Gender field may store information associated with a gender of a user of user device e.g. male female unknown etc. . The information associated with the gender may be associated with a particular stage which may be accessed by content provider when authorized to access the particular stage. Age field may store information associated with an age and or age range e.g. under 12 years old 13 to 17 18 to 24 etc. of the user. The information associated with the age and or the age range may be associated with a particular stage which may be accessed by content provider when authorized to access the particular stage.

In an example implementation one or more portions of the network data stored in fields through of network data structure may be processed by AR server . When processing the network data AR server may for example encode each portion of the network data based on a respective stage to which each portion corresponds. AR server may perform the encoding using a hash function e.g. Fowler Noll Vo FNV 1a hash function a cryptographic function and or some other mathematical function. The encoding for each stage may be performed based on a respective different key and or may be decoded using the respective different key and or another key.

AR server may store and or process information associated with a location of user device based on a stage with which the information is associated. For example for stage 1 e.g. as shown by ellipse AR server may process and or store the information associated with the location of user device e.g. location code A as shown by ellipse that corresponds to a stage 1 level of resolution e.g. 2.4 km .

For stage two AR server may for example process and or store the information associated with the location of user device e.g. location code B as shown by ellipse that corresponds to a stage 2 level of resolution e.g. 0.61 km . The stage two level of resolution may be higher e.g. more precise than the stage one level of resolution. For stage three AR server may process and or store the information associated with the location of user device e.g. location code C as shown by ellipse that corresponds to a stage three level of resolution e.g. 0.076 km . The stage three level of resolution may be higher than the stage two level of resolution.

AR server may obtain information associated with a quantity of time that user device is likely to be located at a particular location and or a preferred location from context information associated with user device . AR server may process and or store the quantity of time e.g. time code as shown by ellipse in a manner that corresponds to a stage e.g. stage 2 as shown by ellipse . AR server may process and or store information associated with the preferred location e.g. preferred location prefloc code as shown by ellipse in a manner that corresponds to another stage e.g. stage 3 as shown by ellipse .

AR server may obtain information associated a gender and or an age of a user of user device from information associated with a user profile that was obtained from HSS . AR server may process and or store the information associated with the gender e.g. gender code as shown by ellipse and or the information associated with the age e.g. age code as shown by ellipse in a manner that corresponds to a stage e.g. stage 2 as shown by ellipse . The information associated with the age may be stored as an age range that corresponds to the age of the user.

A portion of the network data that corresponds to stage 1 may be processed e.g. using the hash function the cryptographic function and or the other mathematical function based on a stage one key prior to being stored in network data structure . The other portions of the network data that correspond to other stages e.g. stage 2 stage 3 etc. may be processed based on respective keys associated with the other stages.

URL field may store a particular URL that was visited by user device within a period of time e.g. one day seven days 14 days 30 days etc. . For example a URL that corresponds to a top level web page e.g. a home page of a website may be stored in URL field . In another example another URL that corresponds to a sublevel web page associated with the website e.g. that is accessed via the top level web page or another sublevel web page associated with the website may be stored in URL field .

Stage 1 category field may store information associated with a major category and or a subcategory of a web page that corresponds to the particular URL identified in URL field . For example information associated with a major category that corresponds to a top level webpage may be stored in stage 1 category field . The major category may correspond to a type of subject matter e.g. automobiles etc. and or content genre e.g. advertising etc. associated with the top level web page. In another example information associated with a subcategory that corresponds to a sublevel web page may be stored in stage 1 category . The subcategory may correspond to particular subject matter e.g. a particular make of automobile that is associated with the type of subject matter and or a particular content genre e.g. automobile advertising etc. associated with the content genre.

Stage 2 visits field may store information associated with a quantity of visits to a website that corresponds to the particular URL by user device . The quantity of visits may for example include a total quantity of visits to the top level web page and or one or more sublevel web pages associated with the website. Stage 3 time field may store information associated with a quantity of time that user device visited the website. The quantity of time may for example include a total quantity of time that user device spent visiting the top level web page and or the one or more sublevel web pages associated with the website.

AR server may obtain information associated with a usage history of user device based on monitoring traffic associated with user device . AR server may obtain from the information associated with the usage history preferred websites visited by user device over a period of time e.g. a previous day week month etc. . AR server may process and or store a URL associated with a preferred website. For example AR server may process and or store a URL e.g. top level webpage associated with a home page of the preferred website e.g. as shown by ellipse . AR server may identify a major category associated with the home page and may store information associated with the major category e.g. majcat1 in history data structure e.g. as shown by ellipse . AR server may identify a quantity of times that user device accessed the home page and may process and or store a value e.g. visit 0 that corresponds to the quantity of times user device accessed the home page e.g. as shown by ellipse . AR server may identify a quantity of time that user device accessed the home page and may process and or store another value e.g. time 0 that corresponds to the quantity of time that user device accessed the home page.

AR server may process and or store another URL e.g. sub level 1 webpage associated with a sublevel web page that is accessed via the home page within the preferred website e.g. as shown by ellipse . AR server may identify a subcategory associated with the sublevel page and may process and or store information associated with the subcategory e.g. subcat1 in history data structure e.g. as shown by ellipse . AR server may identify a quantity of times that user device accessed the sublevel web page and may process and or store a value e.g. visit 1 that corresponds to the quantity of times that user device accessed the sublevel web page e.g. as shown by ellipse . AR server may identify a quantity of time that user device accessed the sublevel page and may process and or store another value e.g. time 1 that corresponds to the quantity of time that user device accessed the sublevel web page.

AR server may process and or store other information associated with the usage history that corresponds to other sublevel web pages e.g. URLs associated with sublevel 2 webpage sublevel 3 webpage etc. within the preferred website e.g. as shown by ellipse . AR server may store other information associated with the usage history that correspond to other preferred websites e.g. top five preferred websites top 10 preferred websites etc. over a period of time.

In an example implementation one or more portions of the information associated with the usage history stored in fields through of history data structure may be encoded by AR server . For example in a manner similar to that described above e.g. with respect to each portion of the information associated with the usage history may be processed based on a respective stage to which each portion corresponds. For example a portion of the information associated with the usage history that corresponds to stage 1 e.g. the major category and or one or more subcategories of the preferred website may be encoded e.g. using the hash function the cryptographic function and or the other mathematical function based on a stage one key prior to being stored in history data structure . The other portions of the information associated with the usage history that correspond to other stages e.g. stages 2 stage 3 etc. may be encoded based on respective keys associated with the other stages.

As shown in process may include obtaining information associated with a user device from traffic flows to and or from a service provider network block . For example CO server may monitor packets associated with traffic flows to and or from service provider network . CO server may detect an IP address associated with a traffic flow and may identify an internal IP address and or port range associated with service provider network that corresponds to the IP address from NAT bindings stored in a memory associated with CO server . CO server may use the internal IP address and or port range to identify user device e.g. via an MDN associated with user device to which the internal IP address and or port range has been assigned. CO server may transmit to AR server information associated with user device . The information associated with user device may include address information e.g. the internal IP address port range etc. and or a device identifier e.g. the MDN etc. . AR server may receive the information associated with user device and may inspect packets associated with traffic flows that correspond to user device .

As also shown in process may include retrieving network data associated with the user device based on the information associated with the user device block . For example AR server may communicate with one or more devices associated with service provider network to obtain network data associated with user device .

For example AR server may communicate with service provider network to obtain information associated with a location hereinafter referred to as location information of user device . In one example AR server may use an API to obtain the location information. The location information may include information as described above in connection with . In an example implementation AR server may perform an operation to verify that a user of user device has authorized the use of the location information prior to obtaining the location information.

AR server may communicate with HSS to obtain information associated with a user profile of the user of user device . The information associated with the user profile may include the information as described above in connection with . AR server may retrieve from a memory associated with AR server information associated with a usage history and or COI in connection with user device . The information associated with the usage history and or COI may have been obtained from monitoring traffic flows associated with user device over a prior period of time. The information associated with the usage history and or the COI may include information as described above in connection with .

As further shown in process may include processing the network data associated with the user device based on stages associated with a customization data structure block . For example AR server may process one or more portions of the network data e.g. the information associated with user device information associated with the user information associated with the usage history and or COI the context information etc. based on a respective stage with which each of the portions is assigned.

AR server may perform stage one encoding on a portion of the network data such as the information associated with the user device the location information and or information associated with the usage history e.g. top 10 URLs visited previous 10 URLs visited etc. . The encoding may be based on a hash function a cryptographic hash function and or some other mathematical function using a key that is associated with stage one. AR server may encode the information associated with user device e.g. an IP address and or port range to generate a device code e.g. a string a numeric value and or an alphanumeric value of a predetermined length e.g. a predetermined quantity of bytes . AR server may in a manner similar to that described above e.g. with respect to encode the location information e.g. a location at a particular level of resolution based on a particular level of resolution to generate a location code. AR server may in a manner similar to that described above e.g. in connection with encode the information associated with the usage history of user device . The encoding of the information associated with the usage history may for example generate a URL code for each URL e.g. top 10 URLs previous 10 URLs visited etc. included in the usage history. The encoding of the information associated with the usage history may in another example generate a category code for each URL e.g. associated with a top level web page and or one or more sublevel web pages included in the usage history.

AR server may perform stage two encoding on another portion of the network data such as the information associated with a user of user device e.g. age gender language etc. the location information e.g. the location at another level of resolution a period of time associated with the location and or information associated with the usage history e.g. quantity of visits to each of the preferred URLs . The encoding may be based on a hash function a cryptographic hash function and or some other mathematical function using a key that is associated with stage two. AR server may based on the stage two encoding generate an age code that when decoded corresponds to an age or an age range of the user. AR server may generate a gender code that when decoded corresponds to the age of the user. AR server may generate a language code that when decoded corresponds to a language spoken by the user and or used by user device . AR server may generate a location code that when decoded identifies the location of the user device at the other level of resolution that is greater than the particular level of resolution. AR server may generate a time code that when decoded identifies a period of time that user device is likely to be at the location. AR server may generate a visit code for each of the preferred URLs that when decoded identifies a respective quantity of times that user device has visited each website associated with the preferred URLs.

AR server may perform stage three encoding on a further portion of the network data such as the location information e.g. the location at a further level of resolution a preferred location and or information associated with the usage history e.g. a duration that user device visits one or more URLs within a website . The encoding may be based on a hash function a cryptographic hash function and or some other mathematical function using a key that is associated with stage three. AR server may based on the stage three encoding generate a location code that when decoded identifies the location of the user device at the further level of resolution that is greater than the other level of resolution. AR server may generate a preferred location code that when decoded identifies a preferred location at which user device is most often located. AR server may generate a time code for each of the preferred URLs that when decoded identifies a respective period of time that user device has visited each website associated with the preferred URLs.

AR server may perform stage four encoding on another portion of the network data such as the information associated with the COI in connection with user device . The encoding may be based on a hash function a cryptographic hash function and or some other mathematical function using a key that is associated with stage four. AR server may perform the stage four encoding in a manner similar to that described above with respect to the encoding of the information associated with the usage history in stages one through stage three. Based on the stage four encoding AR server may for example generate a COI URL code for each COI URL included in the information associated with the COI and or a COI category code for each of the COI URLs. AR server may in another example generate a respective COI time code and or a respective COI visit code for each of the COI URLs.

As yet further shown in process may include storing the processes network data based on the stages associated in the customization data structure block and sending the processed network data to a content provider block . For example AR server may store the processed network data in a customization data structure. AR server may for example store the encoded network data associated with stage one encoding in one or more entries of the data structure associated with stage one. AR server may in yet another example store the encoded network data associated with stage two encoding stage three encoding and or stage four encoding in a respective one or more entries of the data structure associated with stage two stage three and or stage four respectively.

AR server may send the processed network data to content provider . In an example implementation AR server may store the processed network data in a customization packet that is configured in a manner similar to the customization data structure. AR server may for example send the customization packet to content provider via CO server . AR server may determine to which stage associated with the customization packet content provider is authorized to access e.g. based on a service level agreement associated with content provider . AR server and or CO server may transmit a key that corresponds to the stage to which content provider is determined to have access.

Content provider may receive the key and may use the key to process network data that is stored in stages with which the key is associated. For example if the key corresponds to stage one then content provider may decode the processed network data stored within stage one but not in stages other than stage one. In another example if the key corresponds to stage three then content provider may decode the processed network data stored within stage one stage two and or stage three but not in stages other than stages one two and or three. Content provider may use the decoded network data to generate content that is customized for user device .

Stage 1 field may store a portion of network data associated with user device that has been encoded based on stage one encoding e.g. in a manner similar to that described above in connection with of . Stage 1 field may include a device code entry a location code entry a URL history code entry and a category code entry .

Device code entry may store a device code associated with user device . Location code entry may store a location code associated with user device . URL history code entry may store a URL code for each preferred URL identified in the usage history associated with user device . Category code entry may store a category code for each preferred URL that was generated as a result of the stage one encoding. The device code location code URL codes and or category codes may have been generated as a result of stage one encoding in a manner similar to that described above e.g. in connection with block of .

Stage 2 field may store another portion of network data associated with user device that has been encoded based on stage two encoding e.g. in a manner similar to that described above in connection with . Stage 2 field may include an age code entry a gender code entry a language code entry a location code entry a time at location code entry and a visit code entry .

Age code entry may store an age code associated with a user of user device . Gender code entry may store a gender code associated with the user. Language code entry may store a language code associated with the user and or user device . Location code entry may store a location code associated with user device at another level of resolution. Time at location code entry may store a time at location code associated with user device . Visit code entry may store a visit code for each preferred URL identified in the usage history associated with user device . The age code gender code language code location code time at location code and or visit code may have been generated as a result of stage two encoding in a manner similar to that described above e.g. in connection with block of .

Stage 3 field may store yet another portion of the network data associated with user device that has been encoded based on stage three encoding e.g. in a manner similar to that described above in connection with . Stage 3 field may include a location code entry a preferred location code entry and a time code entry .

Location code entry may store a location code associated with user device at another level of resolution. Preferred location code entry may store a preferred location code associated with user device . Time code entry may store a time code associated with a respective period of time that user device accessed each preferred URL identified in the usage history. The location code the preferred location code and or the time code may have been generated as a result of stage three encoding in a manner similar to that described above e.g. in connection with block of .

Stage 4 field may store a further portion of the network data associated with user device that has been encoded based on stage four encoding e.g. in a manner similar to that described above in connection with . Stage 4 field may include a community of interest COI history code entry a community of interest COI category code entry a community of interest COI visit code entry and a community of interest COI time code entry .

COI history code entry may store a COI URL code for each preferred URL identified in the information associated with the COI in connection with user device . COI category code entry may store a COI category code for each preferred URL identified in the information associated with the COI. COI visit code entry may store a COI visit code for each preferred URL identified in the information associated with the COI. COI time code entry may store a COI time code that for each preferred URL identified in the information associated with the COI.

Data structure of may store encoded network data for a particular type of content such as video content. Although data structure will be described below in a context associated with video content in another example implementation data structure may be described in a context associated with a type of content that is different than video content e.g. music games etc. . Data structure may include one or more of the collection of fields as described above in connection with customization data structure of .

Stage 1 field may include one or more of the collection of entries and as described above with respect to . Additionally stage 1 field may include a title history entry and a genre entry . Title history entry may store a respective title code that uniquely identifies each of selected video titles that are stored in the usage history associated with user device . The video titles may correspond to video content that is obtained e.g. downloaded streamed etc. by user device most often e.g. top five top ten etc. based on the usage history of user device . Genre entry may store a respective genre code that corresponds to each of the video titles. The title code and or the genre code may have been generated as a result of stage one encoding in a manner similar to that described above e.g. in connection with block of .

Stage 2 field may include one or more of the collection of entries through as described above with respect to . Additionally stage 2 field may include a data rate field . Data rate field may store a respective data rate code that corresponds to each of the video titles. The data rate code may be based on a data rate at which video content is to be streamed and or transmitted to user device . The data rate may have been obtained from the information associated with the usage history of user device . The data rate code may have been generated as a result of stage two encoding in a manner similar to that described above e.g. in connection with block of .

Stage 3 field may include one or more of the collection of entries and as described above with respect to . Additionally stage 3 field may include a total time field . Total time field may store a respective total time code that corresponds to each of the video titles. The total time code may be based on a period of time that video content was obtained e.g. accessed tuned to recorded downloaded streamed etc. by user device . The period of time may have been obtained from the information associated with the usage history of user device . The total time code may have been generated as a result of stage three encoding in a manner similar to that described above e.g. in connection with block of .

Stage 4 field may include a community of interest COI title history entry a community of interest COI genre entry a community of interest COI data rate entry and a community of interest COI total time entry . COI title history entry may store a respective title code for each video title identified in the information associated with the COI. COI genre entry may store a respective genre code that corresponds to video content associated with the video titles. COI data rate field may store a respective COI data rate code that corresponds to each of the video titles. COI total time entry may store a respective COI total time code that corresponds to each of the video titles. The COI total time code may be based on a period of time that video content was obtained by user device and or other user devices within the COI. The title code the genre code the data rate code and or the total time code may have been generated as a result of stage four encoding in a manner similar to that described above e.g. in connection with block of .

Data structures and of respectively include a number of fields and or entries for explanatory purposes. In practice data structures and or of respectively may include additional fields and or entries fewer fields and or entries different fields and or entries and or differently arranged fields and or entries than are described with respect to data structures and or of respectively.

As shown in process may include receiving a request for an address associated with a content provider block . For example a user of user device may desire to obtain content from content provider and may instruct user device to transmit a request for the content. User device may in response to the instruction transmit a request for an address associated with content provider as indication to PGW . PGW may receive the request and may transmit another request for the content as indication to CO server . CO server may receive the other request from PGW . In one example implementation the request and or other request may be a DNS query e.g. based on a URL associated with content provider .

As also shown in process may include replicating packets associated with the request block and transmitting a copy of the packets to an AR server and another copy of the packets to a DNS server block . CO server may generate copies of the packets associated with the other request. CO server may in a manner similar to that described above e.g. in connection with block of identify an internal IP address and or port range associated with user device based on NAT bindings associated with user device . CO server may retrieve from a memory associated with CO server information associated with user device e.g. a device identifier such as a MDN that is associated with the internal IP address and or port range. CO server may transmit the packets as indication to DNS server and may transmit the copies of the packets and or the internal IP address port range and or the information associated with user device as indication to AR server .

As further shown in process may include receiving a customization packet from the AR server and identifying another content provider that is associated with the content provider block . For example AR server may receive the copies of the packets and may identify a URL associated with content provider from the packets. AR server may determine whether content provider has subscribed to a customization service associated with service provider network e.g. based on a look up operation using the URL . AR server may generate or update a customization packet based on a determination that content provider subscribes to the customization service. AR server may not generate or update the customization packet based on a determination that content provider does not subscribe to the customization service

In another example implementation AR server may inspect the copies of the packets to determine whether a condition exists. For example AR server may detect a protocol error a header error e.g. associated with a transfer control protocol TCP header a user datagram protocol UDP header etc. mis ordered and or dropped packets malicious software e.g. a virus a worm etc. a potential electronic attack etc. Based on a determination that a condition is associated with the copies of the packets AR server may send a notification to CO server indicating that the condition has been detected. CO server may receive the notification and may ignore the condition may send a notification to user device indicating that the condition has been detected and or may drop the packets and or the copies of the packets associated with the request from user device .

AR server may use the information associated with user device to retrieve a customization data structure e.g. customization data structure of or data structure of associated with user device from a memory associated with AR server . In an example implementation AR server may store encoded network data obtained from the data structure in a customization packet associated with user device . In another example implementation AR server may retrieve updated network data associated with user device . For example AR server may communicate with service provider network to obtain location information associated with user device . In another example AR server may query user device to obtain the location information. In yet another example AR server may obtain from traffic flows associated with user device the location information e.g. based on cell identifiers parsed from packet headers etc. .

AR server may obtain updated information associated with a usage history and or COI such as updated preferred content providers preferred content e.g. previous 10 URLs visited top 5 genres etc. preferred user devices etc.

AR server may in a manner similar to that described above in connection with encode the updated network data. AR server may store the updated network data e.g. that has been encoded and or the encoded network data obtained from the customization data structure in a customization packet associated with user device . AR server may send the customization packet as indication to CO server .

CO server may receive the customization packet and may identify other content providers that subscribe to the customization service and or that provide advertising content to content provider . For example CO server may identify from a list of advertising content providers stored in a memory associated with CO server a particular advertising content provider e.g. content provider that provides advertising content to content provider and or other content providers . CO server may retrieve from the memory an IP address associated with advertising content provider .

As yet further shown in process may include transmitting the customization packet to the other content provider block . For example CO server may use the IP address retrieved from the memory to transmit the customization packet as indication to advertising content provider .

Advertising content provider may receive the customization packet and may use a key associated with a particular stage e.g. stage 1 stage 4 to decode the network data stored within the customization packet. The key may have been obtained at a prior point in time when advertising content provider subscribed to the customization service. Advertising content provider may use the decoded network data to customize advertising content to be rendered via a web page associated with content provider .

As still further shown in process may include receiving a request for content associated with the content provider and transmitting to the content provider another request for the content block . For example DNS server may obtain a URL from the packets associated with the DNS query. DNS server may use the URL to retrieve an IP address associated with content provider from a memory associated with DNS server . DNS server may transmit in response to the DNS query the IP address as indication to CO server .

CO server may receive the IP address and may transmit the IP address as indication to PGW . PGW may receive the IP address and may transmit the IP address as indication to user device . User device may receive the IP address and may generate a request for content from content provider . In one example the request for content may be based on a hypertext transfer protocol HTTP e.g. an HTTP GET message . User device may transmit the request for content as indication to PGW . PGW may receive the request for content and may transmit another request for content as indication to CO server . CO server may receive the other request for content and may transmit a further request for content as indication to content provider .

In another example implementation CO server may replicate packets associated with the other request for content and may transmit copies of the packets to AR server . The copies of the packets may include an IP address port range and or information associated with user device e.g. a device identifier such as a MDN . AR server may receive the packets and may in a manner similar to that described above in connection with generate a customized packet associated with a type of content e.g. video audio games etc. to be obtained from content provider . In one example the customization packet may be based on a data structure e.g. data structure of that stores network content associated with preferred content titles genres data rates period of time at which preferred content has been obtained by user device and or other user devices within a COI etc. AR server may send the customization packet associated with the type of content to CO server . CO server may send the further request for content and or the customization packet associated with the particular type of content as indication to content provider .

As also shown in process may include receiving content from the content provider based on the other request for content block . For example content provider may receive the other request for content and may transmit the content as indication to CO server in response to the other request for content. CO server may receive the content from content provider .

In another example implementation content provider may retrieve a key that corresponds to a particular stage e.g. stage 1 stage 4 for which content provider has subscribed to the customization service associated with service provider network . Content provider may use the key to decode network data stored within a customization packet associated with a specific type of content e.g. data structure of that was received from CO server . The key may have been obtained at a prior point in time when content provider subscribed to the customization service. Content provider may use the decoded network data to customize the content to be sent to user device . The content may be customized based on a preferred genre preferred content titles etc. The content may be transmitted to user device at a data rate identified within the network data. Content provider may send the customized content as indication to CO server . CO server may receive the customized content from content provider .

As further shown in process may include receiving customized advertising content from the other content provider based on the customization packet block . For example advertising content provider may send customized advertising content that was generated using the network data obtained from the customization packet as indication to CO server . Advertising content provider may in one example transmit the customized advertising content in response to a request from content provider . Advertising content provider may in another example transmit the customized advertising content in response to a request from CO server e.g. based on scripts that are executed within the content received from content provider .

CO server may receive the customized advertising content and may transmit the customized advertising content and or the content e.g. received from content provider as indication to PGW . PGW may receive the customized advertising content and or the content and may transmit the customized advertising content and or the content as indication to user device . User device may receive the customized advertising content and or the content and may render the customized advertising content and or the content for display on user device . In another example implementation user device may receive the customized content from CO server e.g. via PGW and may render the customized content for display on user device .

Systems and or methods described herein may enable network data associated with a user device to be encoded and or stored within a customization packet that when decoded permits a content provider to send customized content to a user device. The systems and or methods may transmit the customization packet to the content provider and or an advertising content provider. The systems and or methods may transmit the customization packet in a timely manner that enables customized advertising content to be dynamically generated and or rendered via a webpage associated with the content provider.

The foregoing description provides illustration and description but is not intended to be exhaustive or to limit the implementations to the precise form disclosed. Modifications and variations are possible in light of the above teachings or may be acquired from practice of the embodiments.

While series of blocks have been described with regard to the order of the blocks may be modified in other implementations. Further non dependent blocks may be performed in parallel.

It will be apparent that systems and or methods as described above may be implemented in many different forms of software firmware and hardware in the implementations illustrated in the figures. The actual software code or specialized control hardware used to implement these systems and methods is not limiting of the embodiments. Thus the operation and behavior of the systems and methods were described without reference to the specific software code it being understood that software and control hardware can be designed to implement the systems and methods based on the description herein.

Further certain portions described above may be implemented as a component that performs one or more functions. A component as used herein may include hardware such as a processor an ASIC or a FPGA or a combination of hardware and software e.g. a processor executing software .

It should be emphasized that the terms comprises comprising when used in this specification are taken to specify the presence of stated features integers steps or components but does not preclude the presence or addition of one or more other features integers steps components or groups thereof.

Even though particular combinations of features are recited in the claims and or disclosed in the specification these combinations are not intended to limit the disclosure of the embodiments. In fact many of these features may be combined in ways not specifically recited in the claims and or disclosed in the specification. Although each dependent claim listed below may directly depend on only one other claim the disclosure of the embodiments includes each dependent claim in combination with every other claim in the claim set. No element act or instruction used in the present application should be construed as critical or essential to the embodiments unless explicitly described as such. Also as used herein the article a is intended to include one or more items. Where only one item is intended the term one or similar language is used. Further the phrase based on is intended to mean based at least in part on unless explicitly stated otherwise.

The term packet as used herein may refer to a datagram a data item or a cell a fragment of a packet a fragment of a datagram a fragment of a data item a fragment of a cell or another type arrangement or packaging of data.

