---

title: Method and apparatus for processing digital service signals
abstract: An apparatus of processing a digital service signals and a method thereof are disclosed. The present invention includes a receiving module configured to receive the digital service signals having contents and receive URL information for additional data related to the contents, an extracting module configured to extract logo data for indicating contents provider from each of the video frames of the contents, wherein the logo data is located in a specific area in the each of the video frames, a comparing module configured to compare the extracted logo data with stored logo data to obtain channel information of the contents, an obtaining module configured to obtain the channel information of the contents from metadata related to the logo data and obtain the additional data related to the contents and a generating module configured to generate a request for obtaining the URL information using the obtained channel information, wherein the receiving module receives the URL information using the generated request, wherein the obtaining module obtains the additional data over an IP (Internet Protocol network) according to the URL information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09131264&OS=09131264&RS=09131264
owner: LG ELECTRONICS INC.
number: 09131264
owner_city: Seoul
owner_country: KR
publication_date: 20130716
---
This application claims the benefit of U.S. Provisional Application No. 61 671 807 filed on Jul. 16 2012 which is hereby incorporated by reference as if fully set forth herein.

The present invention relates to a method and apparatus for processing an automatic content recognition ACR service related to a broadcast program and more particularly to a method and apparatus for providing an additional service related to broadcast content in an ACR environment.

As digital satellite broadcasting has been introduced digital data broadcasting has appeared as a new supplementary service. An interactive data broadcast which is a representative interactive service may transmit not only a data signal but also an existing broadcast signal to a subscriber so as to provide various supplementary services.

A digital data broadcast may be largely divided into an independent service using a virtual channel and a broadcast associated service via an enhanced TV ETV . The independent service includes only text and graphics without a broadcast image signal and is provided in a format similar to an existing Internet web page. Representative examples of the independent service include a weather and stock information provision service a TV banking service a commercial transaction service etc. The broadcast associated service transmits not only a broadcast image signal but also additional text and graphic information. A viewer may obtain information regarding a viewed broadcast program via a broadcast associated service. For example there is a service for enabling a viewer to view a previous story or a filming location while viewing a drama.

In a broadcast associated service of a digital data broadcast an ETV service may be provided based on ACR technology. ACR means technology for automatically recognizing content via information hidden in the content when a device plays audio video A V content back.

In implementation of ACR technology a watermarking or fingerprinting scheme may be used to acquire information regarding content. Watermarking refers to technology for inserting information indicating a digital content provider into digital content. Fingerprinting is equal to watermarking in that specific information is inserted into digital content and is different therefrom in that information regarding a content purchaser is inserted instead of information regarding a content provider.

However a conventional system for providing an interactive service via an ACR function has several restrictions.

If a content provider or a broadcaster transmits content for a real time service and enhancement data or additional data for an ETV service and a TV receiver receives the content for the real time service and the enhancement data through external input the content for the real time service may be received but the enhancement data may not be received.

In addition if an existing ETV service is provided on an ACR system intervention of a separate ACR server or an ACR solution provider is inevitably required. Therefore there is a need for a receiver for performing an ACR function alone without a separate ACR server.

In addition in watermarking technology for providing an ETV service if the amount of information included in a watermark is large quality of content in which a watermark is embedded may be deteriorated. Therefore there is a limitation in efficient use of watermarking.

In addition in fingerprinting technology for providing an ETV service an external ACR server for recognizing content is additionally necessary and a content recognition result depends on the size of a reference set.

Accordingly the present invention is directed to a method and apparatus for processing digital service signals that substantially obviates one or more problems due to limitations and disadvantages of the related art.

An object of the present invention is to identify information regarding a broadcast program using a broadcast system and provide additional information of the identified broadcast program in real time.

Additional advantages objects and features of the invention will be set forth in part in the description which follows and in part will become apparent to those having ordinary skill in the art upon examination of the following or may be learned from practice of the invention. The objectives and other advantages of the invention may be realized and attained by the structure particularly pointed out in the written description and claims hereof as well as the appended drawings.

To achieve these objects and other advantages and in accordance with the purpose of the invention as embodied and broadly described herein a method of processing digital service signals according to the present invention includes receiving the digital service signals having contents extracting logo data for indicating contents provider from each of the video frames of the contents wherein the logo data is located in a specific area in the each of the video frames comparing the extracted logo data with stored logo data to obtain channel information of the contents obtaining the channel information of the contents from metadata related to the logo data generating a request for obtaining URL information for the additional data related to the contents using the obtained channel information receiving the URL information using the generated request and obtaining the additional data over an IP Internet Protocol network according to the URL information.

Preferably the method further includes extracting watermarks from the audio frames of the contents wherein the watermarks carry program information related to the contents wherein the program information includes content id information identifying each of the contents and obtaining the program information in the watermarks.

Preferably when the video frames include symbol data for indicating a program related to the contents the method further comprises extracting the symbol data from the each of the video frames of the contents wherein the symbol data is located in a specific area in the each of the video frames processing the extracted symbol data to obtain program information related to the contents wherein the program information includes content id information identifying each of the contents and obtaining the program information.

Preferably the method further comprises extracting watermarks from the specific area of the video frames wherein the watermarks carry the channel information and program information related to the contents wherein the program information includes content id information identifying each of the contents.

In another aspect of the present invention a method of processing digital service signals the method comprising generating the digital service signals having contents inserting logo data for indicating contents provider into each of the video frames of the contents wherein the logo data is located in a specific area in the each of the video frames and transmitting the digital service signals wherein the logo data is for obtaining channel information of the contents and the channel information is for receiving the URL information for additional data related to the contents.

Preferably the contents include audio frames the method further comprises generating watermarks and inserting the generated watermarks into the audio frames of the contents wherein the watermarks carry program information related to the contents wherein the program information includes content id information identifying each of the contents.

Preferably the method further comprises generating watermarks and inserting the generated watermarks into the video frames of the contents wherein the watermarks carry channel information and program information related to the contents wherein the program information includes content id information identifying each of the contents.

Preferably the method further includes dividing the audio or video frames into sub frames detecting specific sub frames from among the divided sub frames to insert the watermarks inserting the watermarks into the detected specific sub frames and assembling the divided sub frames into the audio or video frames.

Preferably the method further comprises generating symbol data for indicating a program related to the contents and inserting the generated symbol data into the each of the video frames of the contents wherein the inserted symbol data is located in a specific area in the each of the video frames.

It is to be understood that both the foregoing general description and the following detailed description of the present invention are exemplary and explanatory and are intended to provide further explanation of the invention as claimed.

Reference will now be made in detail to the preferred embodiments of the present invention examples of which are illustrated in the accompanying drawings. Wherever possible the same reference numbers will be used throughout the drawings to refer to the same or like parts.

Reference will now be made in detail to the preferred embodiments of the present invention examples of which are illustrated in the accompanying drawings.

Reference will now be made in detail to the preferred embodiments of the present invention examples of which are illustrated in the accompanying drawings. The configuration and operation of the embodiments of the present invention will be described with reference to the accompanying drawings. The configuration and operation of the present invention shown in the drawings and described hereinafter will be described in at least one embodiment without limiting the spirit and scope of the present invention.

Although the terms used in the present invention are selected from generally known and used terms terms used herein may be changed depending on operator s intention or customs in the art appearance of a new technology or the like. In addition some of the terms mentioned in the description of the present invention have been selected by the applicant at his or her discretion the detailed meanings of which are described in relevant parts of the description herein. Furthermore it is required that the present invention is understood not simply by the actual terms used but by the meanings of each term lying within.

The ACR based ETV service system shown in may include a broadcaster or content provider a multichannel video programming distributor MVPD a set top box STB a receiver such as a digital TV receiver and an ACR server or an ACR Solution Provider . The receiver may operate according to definition of the advanced television system committee ATSC and may support an ACR function. A real time broadcast service may include A V content.

A digital broadcast service may be largely divided into a terrestrial broadcast service provided by the broadcaster and a multi channel broadcast service such as a cable broadcast or a satellite broadcast provided by the MVPD . The broadcaster may transmit a real time broadcast service and enhancement data or additional data together. In this case as shown in the receiver may receive only the real time broadcast service and may not receive the enhancement data through the MVPD and the STB .

Accordingly in order to receive the enhancement data the receiver analyzes and processes A V content output as the real time broadcast service and identifies broadcast program information and or broadcast program related metadata. Using the identified broadcast program information and or broadcast program related metadata the receiver may receive the enhancement data from the broadcaster or the ACR server . In this case the enhancement data may be transmitted via an Internet protocol IP network .

If the enhancement data is received from a separate ACR server in a mechanism between the ACR server and the receiver a request response model among triggered declarative object TDO models defined in the ATSC 2.0 standard may be applied to the ACR server . Hereinafter the TDO and request response model will be described.

TDO indicates additional information included in broadcast content. TDO serves to timely triggers additional information within broadcast content. For example if an audition program is broadcast a current ranking of an audition participant preferred by a viewer may be displayed along with the broadcast content. At this time additional information of the current rating of the audition participant may be a TDO. Such a TDO may be changed through interaction with viewers or provided according to viewer s intention.

In the request response ACR model of the standard ATSC 2.0 the digital broadcast receiver is expected to generate signatures of the content periodically e.g. every 5 seconds and send requests containing the signatures to the ACR server . When the ACR server gets a request from the digital broadcast receiver it returns a response. The communications session is not kept open between request response instances. In this model it is not feasible for the ACR server to initiate messages to the client.

However in the above described ETV service system an ACR function may not be provided without a separate ACR server. Therefore there is a need for a method of independently performing an ACR function at a receiver without a separate ACR server.

According to the ACR service processing system shown in enhancement data related to a real time broadcast may be received using watermarking without intervention of an ACR server to provide an interactive service.

The ACR service processing system shown in may include a transmitter for generating and transmitting a digital service signal and or a receiver for receiving and processing a digital service signal. The transmitter may be a content provider or a broadcaster and the receiver may be a receiver such as a digital TV receiver. The transmitter may include a generating module an inserting module and or a transmitting module . The receiver may include a receiving module and or an extracting module .

Hereinafter operation of each module of the ACR service processing system shown in will be described.

First the generating module of the transmitter may generate a watermark and insert the watermark into a frame of A V content to be transmitted. The watermark may include information about a channel of the content into which the watermark is inserted and or content information or metadata such as URL information of enhancement data of content. The transmitting module may transmit the content into which the watermark is inserted to the receiver .

The receiving module of the receiver may receive the content into which the watermark is inserted and deliver the content to the extracting module . The extracting module may extract the inserted watermark from an A V frame of the delivered content.

As shown in the ACR service processing system may include a content provider or broadcaster an MVPD a set top box a receiver an application URL lookup server ALS and an application server AS . The content provider may include a watermark inserter and the receiver may include a watermark extractor . The ALS and the AS are physically subordinate to one server.

The content provider may insert metadata related to enhancement data into A V content transmitted in real time in the form of a watermark. Even when A V content is received via the MVPD A V content into which metadata related to enhancement data is inserted in the form of a watermark may be received. The receiver having the ACR function may extract the watermark from the A V content received through the MVPD and recognize information about a program broadcast in real time and metadata. The receiver may receive enhancement data via an IP network.

The broadcaster may insert metadata related to enhancement data such as a content ID for identifying content into A V content in the form of a watermark. More specifically the watermark inserter searches the A V content for an area into which the watermark will be appropriately inserted and inserts the watermark into the searched area.

The receiver having an ACR function may receive A V content into which the watermark is inserted through the MVPD and the set top box extract the watermark from the A V content and obtain metadata related to the enhancement data. More specifically the watermark extractor of the receiver may search the received A V content for the area into which the watermark is inserted and extract the watermark inserted into the searched area.

The receiver may download the enhancement data related to a real time broadcast program via the metadata obtained from the extracted watermark. More specifically the receiver may access the ALS via the IP network to receive a URL of an associated application according to a query. According to the URL of the application the receiver may access the AS for managing the application and download the enhancement data subordinate to the application from the AS .

More specifically shows an embodiment of the configuration of a receiver supporting an ACR based ETV service using watermarking.

As shown in the receiver supporting the ACR based ETV service according to the embodiment of the present invention may include an input data processor an ATSC main service processor an ATSC mobile handheld MH service processor and or an ACR service processor. The input data processor may include a tuner demodulator and or a vestigial side band VSB decoder . The ATSC main service processor may include a transport protocol TP demux a Non Real Time NRT guide information processor a digital storage media command and Control DSM CC addressable section parser an Information Provider IP User Datagram Protocol UDP parser a FLUTE parser a metadata module a file module an electronic service guide ESG data carrier detect DCD handler a storage control module a file TP switch a playback control module a first 1 storage device an IP packet storage control module an Internet access control module an IP interface a live recorded switch a file object decoder a TP Packetized Elementary Stream PES decoder a Program Specific Information PSI program and system information protocol PSIP decoder and or an Electronic Program Guide EPG handler . The ATSC MH service processor may include a main MH NRT switch a MH baseband processor an MH physical adaptation processor an IP protocol stack a file handler an ESG handler a second storage device and or a streaming handler . The ACR service processor may include a main MH NRT switch an A V decoder an A V process module an external input handler a watermark extractor and or an application .

In the input data processor the tuner demodulator may tune and demodulate a broadcast signal received from an antenna. Through this process a VSB symbol may be extracted. The VSB decoder may decode the VSB symbol extracted by the tuner demodulator .

The VSB decoder may output ATSC main service data and MH service data according to decoding. The ATSC main service data may be delivered to and processed by the ATSC main service processor and the MH service data may be delivered to and processed by the ATSC MH service processor.

The ATSC main service processor may process a main service signal in order to deliver main service data excluding an MH signal to the ACR service processor. The TP demux may demultiplex transport packets of ATSC main service data transmitted via the VSB signal and deliver the demultiplexed transport packets to other processing modules. That is the TP demux may demultiplex a variety of information included in the transport packets and deliver information such that elements of the broadcast signal are respectively processed by modules of the broadcast receiver. The demultiplexed data may include real time streams DSM CC addressable sections and or an NRT service table A 90 92 signaling table. More specifically as shown in the TP demux may output the real time streams to the live recorded switch output the DSM CC addressable sections to the DSM CC addressable section parser and output the NRT service table A 90 92 signaling table to the NRT guide information processor .

The NRT guide information processor may receive the NRT service table A 90 92 signaling table from the TP demux and extract and deliver FLUT session information to the DSM CC addressable section parser . The DSM CC addressable section parser may receive the DSM CC addressable sections from the TP demux receive the FLUT session information from the NRT guide information processor and process the DSM CC addressable sections. The IP UDP parser may receive the data output from the DSM CC addressable section parser and parse IP datagrams transmitted according to the IP UDP. The FLUTE parser may receive data output from the IP UDP parser and process FLUTE data for transmitting a data service transmitted in the form of an asynchronous layered coding ALC object. The metadata module and the file module may receive the data output from the FLUTE parser and process metadata and a restored file. The ESG DCD handler may receive data output from the metadata module and process an electronic service guide and or downlink channel descriptor related to a broadcast program. The restored file may be delivered to the storage control module in the form of a file object such as ATSC 2.0 content and reference fingerprint. The file object may be processed by the storage control module and divided into a normal file and a TP file to be stored in the first storage device . The playback control module may update the stored file object and deliver the file object to the file TP switch in order to decode the normal file and the TP file. The file TP switch may deliver the normal file to the file decoder and deliver the TP file to the live recorded switch such that the normal file and the TP file are decoded through different paths.

The file decoder may decode the normal file and deliver the decoded file to the ACR service processor. The decoded normal file may be delivered to the main MH NRT switch of the ACR service processor. The TP file may be delivered to the TP PES decoder under the control of the live recorded switch . The TP PES decoder decodes the TP file and the PSI PSIP decoder decodes the decoded TP file again. The EPG handler may process the decoded TP file and process an EPG service according to ATSC.

The ATSC MH service processor may process the MH signal in order to transmit ATSC MH service data to the ACR service processor. More specifically the MH baseband processor may convert the ATSC MH service data signal into a pulse waveform suitable for transmission. The MH physical adaptation processor may process the ATSC MH service data in a form suitable for an MH physical layer.

The IP protocol stack module may receive the data output from the MH physical adaption processor and process data according to a communication protocol for Internet transmission reception. The file handler may receive the data output from the IP protocol stack module and process a file of an application layer. The ESG handler may receive the data output from the file handler and process a mobile ESG. In addition the second storage device may receive the data output from the file handler and store a file object. In addition some of the data output from the IP protocol stack module may become data for an ACR service of the receiver instead of a mobile ESG service according to ATSC. In this case the streaming handler may process real streaming received via a real time transport protocol RTP and deliver the real streaming to the ACR service processor.

The main MH NRT switch of the ACR service processor may receive the signal output from the ATSC main service processor and or the ATSC MH service processor. The A V decoder may decode compression A V data received from the main MH NRT switch . The decoded A V data may be delivered to the A V process module .

The external input handler may process the A V content received through external input and transmit the A V content to the A V process module .

The A V process module may process the A V data received from the A V decoder and or the external input handler to be displayed on a screen. In this case the watermark extractor may extract data inserted in the form of a watermark from the A V data. The extracted watermark data may be delivered to the application . The application may provide an enhancement service based on an ACR function identify broadcast content and provide enhancement data associated therewith. If the application delivers the enhancement data to the A V process module the A V process module may process the received A V data to be displayed on a screen.

More specifically shows operation for acquiring program information using a watermark if a receiver receives a terrestrial channel through external input of an external device such as a set top box.

The ACR service processing system shown in may include a receiver a CE server a broadcaster or content provider and an application server . The receiver may include an A V processor a watermark extractor and an application module . The CE server may include a watermarking manager . In addition the receiver may have an ACR function.

The A V processor delivers A V content received through external input to the watermark extractor and the watermark extractor may extract data inserted in the form of a watermark from the A V content and access the application server . At this time the CE server may manage a watermarking related module and micro code.

The micro code according to one embodiment of the present invention refers to code for extracting a watermark inserted into A V content and may be dynamically downloaded by an A V decoder chip and or a raw data processing chip. The receiver may compress and store one or a plurality of micro codes as necessary or download one or a plurality of micro codes through a download interface. The download interface may be differently implemented according to chip type.

The watermark extractor of the receiver may extract a watermark from audio content or video content or extract a watermark using audio content and video content. The extracted watermark may include channel information and or content information. The content information may include information about content used in an ATSC 2.0 service.

The application module may tune to a channel for transmitting content associated with the channel and or metadata based on channel information and content information extracted from the watermark and receive content information. In addition the application module may receive content and or metadata associated with the channel via an IP network. According to one embodiment of the present invention the channel may include an ATSC message handler MH channel.

The CE server may manage and update a watermarking related micro code and or software. That is the CE server may continuously add delete or update related micro code and or software according to a protocol of the broadcaster . If a request is received from the receiver or the CE server is updated the CE server may inform the receiver that the request is received or the CE server is updated and download a new code.

The watermark extractor may be implemented as micro code or software module operating on a chip of the receiver . The new micro code or software module may be continuously downloaded from the CE server .

The ETV service reception apparatus according to the embodiment of the present invention shown in may include a remote controller a remote controller receiver a UI module a network interface a micro code downloader a web browser a trigger processor a micro processor a micro code interface mif an audio decoder a video decoder a graphics processor an application a speaker a display module an antenna a tuner a demodulator and or a system decoder . The system decoder may be an MPEG 2 TS decoder. The demodulator may be a VSB demodulator or a digital video broadcasting DVB demodulator. Each of the audio decoder and the video decoder may include a micro code interface .

As shown in the ETV service reception apparatus may extract a watermark from A V content transmitted through a terrestrial wave in real time using micro code running on a chip of a video decoder or an audio decoder transmit the extracted watermark to an application and receive an enhancement service. The micro code may be downloaded from an external device through the micro code downloader . The micro code may be dynamically downloaded on the chip of the video decoder or the audio decoder via the micro code interface .

Hereinafter operation between components of the ETV service reception apparatus shown in will be described.

The remote controller receiver may receive a request signal of a viewer through infrared IR light from the remote controller and transmit the signal to the UI module using a key code. The UI module and or the remote controller receiver may deliver the signal to the web browser using a browser key code. The signal passing through the UI module may be delivered to the graphics processor .

The tuner tunes the signal received from the antenna and the demodulator may restore the waveform of the tuned signal. The decoder may decode the restored signal and deliver the decoded signal to the trigger processor . The trigger processor may process the decoded signal to trigger data and transmit the trigger data to the web browser .

If the signal delivered to the web browser is delivered to the micro code downloader the micro code may be downloaded and delivered to the micro code interface . The micro code passing through the micro code interface and the decoded signal may be divided into an audio signal and a video signal which are respectively delivered to the audio decoder and the video decoder . The micro code interface of the audio decoder and the video decoder may extract the watermark inserted into A V content using the micro code.

The extracted watermark may be delivered to the application the audio signal may be delivered to the speaker and the video signal may be output to the display module along with the graphic signal received from the graphics processor .

The ETV service reception apparatus according to the embodiment of the present invention shown in may include a remote controller a remote controller receiver a UI module a network interface a micro code downloader a web browser a trigger processor a micro processor a micro code interface mif an audio decoder a video decoder a graphics processor an application a speaker a display module an antenna a tuner a demodulator a system decoder an audio postprocessor and amplifier and or a video display processor . According to the embodiment of the present invention the system decoder may include an MPEG 2 TS decoder. According to the embodiment of the present invention the demodulator may include a VSB demodulator and or a DVB demodulator. Each of the audio postprocessor and amplifier and the video display processor may include the micro code interface .

As shown in the ETV service reception apparatus may extract a watermark inserted into A V content through micro code in real time on a post processing chip instead of the chip of the audio decoder or the video decoder. According to the embodiment of the present invention the postprocessing chip may include the audio postprocessor and amplifier and the video display processor . The ETV service reception apparatus may automatically recognize the A V content using the extracted watermark. The ETV service reception apparatus may download the micro code from an external device through the micro code downloader . In addition the audio or video postprocessing chip of the ETV service reception apparatus may download the micro code through the micro code interface .

Hereinafter operation between the components of the ETV service reception apparatus shown in will be described.

The remote controller receiver may receive a request signal of a viewer through infrared IR light from the remote controller and transmit the received signal to the UI module using a key code. The UI module and or the remote controller receiver may deliver the signal to the web browser using a browser key code. The signal passing through the UI module may be delivered to the graphics processor .

The tuner tunes the signal received from the antenna and the demodulator may restore the waveform of the tuned signal. The decoder may decode the restored signal and deliver the decoded signal to the trigger processor . The trigger processor may process the decoded signal into trigger data and transmit the trigger data to the web browser .

If the signal delivered to the web browser is delivered to the micro code downloader the micro code may be downloaded and delivered to the micro code interface of the audio postprocessor and amplifier and or the display processor through the micro code interface .

The decoded signal may be divided into an audio signal and a video signal which are respectively delivered to the audio decoder and the video decoder . The audio signal decoded by the audio decoder may be delivered to the audio postprocessor and amplifier . The video signal decoded by the video decoder may be delivered to the video display processor .

If the micro code interface of the audio postprocessor and amplifier and or the display processor receives the audio signal and or the video signal through the micro code interface the watermark inserted into audio and or video content may be extracted through the micro code.

The extracted watermark may be delivered to the application the audio signal may be output to the speaker and the video signal may be output to the display module .

The ETV service reception apparatus according to the embodiment of the present invention shown in may include a remote controller a remote controller receiver a UI module a network interface a micro code downloader a web browser a trigger processor a micro processor a micro code interface mif an audio decoder a video decoder a graphics processor an application a speaker a display module an audio postprocessor and amplifier a set top box and an external input handler . The external input handler may receive external input through a high definition multimedia interface HDMI .

As shown in the ETV service reception apparatus may automatically recognize A V content using micro code and receive an ETV service even when the A V content is not transmitted through a terrestrial wave but is received via an external device such as the set top box . That is if A V content is received from an external device the ETV service reception apparatus may extract a watermark from the A V content using micro code in real time. At this time a video or audio post processing chip may download the micro code through the micro code interface . The extracted watermark may be delivered to the application and the receiver may acquire enhancement data using data included in the watermark. According to the embodiment of the present invention the post processing chip may include the audio postprocessor and amplifier and or the video display processor .

Hereinafter operation between the components of the ETV service reception apparatus shown in will be described.

The remote controller receiver may receive a request signal of a viewer through infrared IR light from the remote controller and transmit the received signal to the UI module using a key code. The UI module and or the remote controller receiver may deliver the signal to the web browser using a browser key code. If the signal delivered to the web browser is delivered to the micro code downloader the ETV service reception apparatus may download the micro code and deliver the micro code to the micro code interface . The signal passing through the UI module may be delivered to the graphics processor .

The signal received from the external device through the set top box may be processed into trigger data through the trigger processor without being decoded through the external input handler and may be delivered to the web browser . Alternatively the external input signal passing through the external input handler may be divided into an audio signal and a video signal which are respectively delivered to the audio decoder and the video decoder . At this time the audio decoder may decode the audio signal.

The decoded audio signal may be delivered to the audio postprocessor and amplifier and the decoded video signal may be delivered to the video display processor . The micro code interface of the audio postprocessor and amplifier and the display processor may extract the watermark inserted into audio and or video content using the micro code.

The extracted watermark may be delivered to the application the audio signal may be output to the speaker and the video signal may be output to the display module .

Digital watermarking is the process of embedding information into a digital signal in a way that is difficult to remove. The signal may be audio pictures or video for example. If the signal is copied then the information is also carried in the copy. A signal may carry several different watermarks at the same time.

In visible watermarking the information is visible in the picture or video. Typically the information is text or a logo which identifies the owner of the media. When a television broadcaster adds its logo to the corner of transmitted video this is also a visible watermark.

In invisible watermarking information is added as digital data to audio picture or video but it cannot be perceived as such although it may be possible to detect that some amount of information is hidden. The watermark may be intended for widespread use and is thus made easy to retrieve or it may be a form of Steganography where a party communicates a secret message embedded in the digital signal. In either case as in visible watermarking the objective is to attach ownership or other descriptive information to the signal in a way that is difficult to remove. It is also possible to use hidden embedded information as a means of covert communication between individuals.

One application of watermarking is in copyright protection systems which are intended to prevent or deter unauthorized copying of digital media. In this use a copy device retrieves the watermark from the signal before making a copy the device makes a decision to copy or not depending on the contents of the watermark. Another application is in source tracing. A watermark is embedded into a digital signal at each point of distribution. If a copy of the work is found later then the watermark can be retrieved from the copy and the source of the distribution is known. This technique has been reportedly used to detect the source of illegally copied movies.

Annotation of digital photographs with descriptive information is another application of invisible watermarking.

While some file formats for digital media can contain additional information called metadata digital watermarking is distinct in that the data is carried in the signal itself.

The information to be embedded is called a digital watermark although in some contexts the phrase digital watermark means the difference between the watermarked signal and the cover signal. The signal where the watermark is to be embedded is called the host signal.

A watermarking system is usually divided into three distinct steps embedding attack and detection or extraction .

In embedding an algorithm accepts the host and the data to be embedded and produces a watermarked signal.

The watermarked signal is then transmitted or stored usually transmitted to another person. If this person makes a modification this is called an attack . While the modification may not be malicious the term attack arises from copyright protection application where pirates attempt to remove the digital watermark through modification. There are many possible modifications for example lossy compression of the data cropping an image or video or intentionally adding noise.

Detection is an algorithm which is applied to the attacked signal to attempt to extract the watermark from it. If the signal was unmodified during transmission then the watermark is still present and it can be extracted. In robust watermarking applications the extraction algorithm should be able to correctly produce the watermark even if the modifications were strong. In fragile watermarking the extraction algorithm should fail if any change is made to the signal.

A digital watermark is called robust with respect to transformations if the embedded information can reliably be detected from the marked signal even if degraded by any number of transformations. Typical image degradations are JPEG compression rotation cropping additive noise and quantization. For video content temporal modifications and MPEG compression are often added to this list. A watermark is called imperceptible if the watermarked content is perceptually equivalent to the original unwatermarked content. In general it is easy to create robust watermarks or imperceptible watermarks but the creation of robust and imperceptible watermarks has proven to be quite challenging. Robust imperceptible watermarks have been proposed as tool for the protection of digital content for example as an embedded no copy allowed flag in professional video content.

First a watermark is called fragile if it fails to be detected after the slightest modification Robustness . Fragile watermarks are commonly used for tamper detection integrity proof . Modifications to an original work that are clearly noticeable are commonly not referred to as watermarks but as generalized barcodes. A watermark is called semi fragile if it resists benign transformations but fails detection after malignant transformations. Semi fragile watermarks are commonly used to detect malignant transformations. A watermark is called robust if it resists a designated class of transformations. Robust watermarks may be used in copy protection applications to carry copy and access control information.

Second a watermark is called imperceptible if the original cover signal and the marked signal are close to perceptually indistinguishable Perceptibility . A watermark is called perceptible if its presence in the marked signal is noticeable but non intrusive.

Third about a capacity the length of the embedded message determines two different main classes of watermarking schemes 

The message is conceptually zero bit long and the system is designed in order to detect the presence or the absence of the watermark in the marked object. This kind of watermarking schemes is usually referred to as Italic zero bit or Italic presence watermarking schemes. Sometimes this type of watermarking scheme is called 1 bit watermark because a 1 denotes the presence and a 0 the absence of a watermark.

The message is a n bit long stream with n m or M 0 1n and is modulated in the watermark. This kinds of schemes are usually referred to as multiple bit watermarking or non zero bit watermarking schemes.

Forth there are several ways for the embedding step. A watermarking method is referred to as spread spectrum if the marked signal is obtained by an additive modification. Spread spectrum watermarks are known to be modestly robust but also to have a low information capacity due to host interference. A watermarking method is said to be of quantization type if the marked signal is obtained by quantization. Quantization watermarks suffer from low robustness but have a high information capacity due to rejection of host interference. A watermarking method is referred to as amplitude modulation if the marked signal is embedded by additive modification which is similar to spread spectrum method but is particularly embedded in the spatial domain.

According to the existing ACR service processing system if a broadcaster transmits content for a real time service and enhancement data for an ETV service together and a TV receiver receives the content and the ETV service the content for the real time service may be received but the enhancement data may not be received.

In this case according to the embodiment of the present invention it is possible to solve problems of the existing ACR processing system through an independent IP signaling channel using an IP network. That is a TV receiver may receive content for a real time service via an MVPD and receive enhancement data via an independent IP signaling channel.

In this case according to the embodiment of the present invention an IP signaling channel may be configured such that a PSIP stream is delivered and processed in the form of a binary stream. At this time the IP signaling channel may be configured to use a pull method or a push method.

The IP signaling channel of the pull method may be configured according to an HTTP request response method. According to the HTTP request response method a PSIP binary stream may be included in an HTTP response signal for an HTTP request signal and transmitted through SignalingChannelURL. In this case a polling cycle may be periodically requested according to Polling cycle in metadata delivered as an ACR query result. In addition information about a time and or a cycle to be updated may be included in a signaling channel and transmitted. In this case the receiver may request signaling information from a server based on update time and or cycle information received from the IP signaling channel.

The IP signaling channel of the push method may be configured using an XMLHTTPRequest application programming interface API . If the XMLHTTPRequest API is used it is possible to asynchronously receive updates from the server. This is a method of at a receiver asynchronously requesting signaling information from a server through an XMLHTTPRequest object and at the server providing signaling information via this channel in response thereto if signaling information has been changed. If there is a limitation in standby time of a session a session timeout response may be generated and the receiver may recognize the session timeout response request signaling information again and maintain a signaling channel between the receiver and the server.

In order to receive enhancement data through an IP signaling channel the receiver may operate using watermarking and fingerprinting. Fingerprinting refers to technology for inserting information about a content purchaser into content instead of a content provider. If fingerprinting is used the receiver may search a reference database to identify content. A result of identifying the content is called an ACR query result. The ACR query result may include a query provided to a TV viewer and answer information of the query in order to implement an ACR function. The receiver may provide an ETV service based on the ACR query result.

Information about the ACR query result may be inserted embedded into in A V content on a watermark based ACR system and may be transmitted. The receiver may extract and acquire ACR query result information through a watermark extractor and then provide an ETV service. In this case an ETV service may be provided without a separate ACR server and a query through an IP network may be omitted.

Hereinafter the diagram of the XML schema of the ACR query result shown in will be described in detail and an example of the XML schema will be described.

The result code element may indicate a result value of an ACR query. This may indicate query success or failure and a failure reason if a query fails in the form of a code value. For example if the value of the result code element is 200 this may indicate that a query succeeds and content information corresponding thereto is returned and if the value of the result code element is 404 this may indicate that content is not found.

The content ID element may indicate an identifier for globally and uniquely identifying content and may include a global service identifier element which is an identifier for identifying a service.

The NTP timestamp element may indicate that a time of a specific point of a sample frame interval used for an ACR query is provided in the form of an NTP timestamp. Here the specific point may be a start point or end point of the sample frame. NTP means a protocol for synchronizing a time of a computer with a reference clock through the Internet and may be used for time synchronization between a time server and client distributed on a computer network. Since NTP uses a universal time coordinated UTC time and ensures accuracy of 10 ms the receiver may accurately process a frame synchronization operation.

The signaling channel information element may indicate access information of an independent signaling channel on an IP network for an ETV service.

More specifically the signaling channel URL element which is a sub element of the signaling channel information element may indicate URL information of a signaling channel. The signaling channel URL element may include an update mode element and a polling cycle element as sub elements. The update mode element may indicate a method of acquiring information via an IP signaling channel. For example in a pull mode the receiver may periodically perform polling according to a pull method to acquire information and in a push mode the server may transmit information to the receiver according to a push method The polling cycle element may indicate a basic polling cycle value of the receiver according to a pull method if the update mode element is a pull mode. Then the receiver may specify a basic polling cycle value and transmit a request signal to the server at a random time interval thereby preventing requests from overloading in the server.

The service information element may indicate information about a broadcast channel. The content id element may indicate an identifier of a service which is currently being viewed by a viewer and the service information element may indicate detailed information about the broadcast channel. For example the detailed information indicated by the service information element may be a channel name a logo or a text description.

More specifically the service name element which is a sub element of the service information element may indicate a channel name the service logo element may indicate a channel logo and the service description element may indicate a channel text description.

The following shows the XML schema of elements of the ACR query result shown in according to the embodiment of the present invention.

The ATSC Content Identifier is a structure that is composed of a TSID Transmitting Subscriber Identification and a house number with a period of uniqueness. A house number is any number that the holder of the TSID wishes as constrained herein. Numbers are unique for each value of TSID. The syntax of the ATSC Content Identifier structure shall be as defined in .

 TSID a 16 bit unsigned integer field shall contain a value of transport stream id. The assigning authority for these values for the United States is the FC Ranges for Mexico Canada and the United States have been established by formal agreement among these countries. Values in other regions are established by appropriate authorities.

 end of day field this 5 bit unsigned integer shall be set to the hour of the day in UTC in which the broadcast day ends and the instant after which the content id values may be re used according to unique for. The value of this field shall be in the range of 0 23. The values 24 31 are reserved. Note that the value of this field is expected to be static per broadcaster.

 unique for field this 9 bit unsigned integer shall be set to the number of days rounded up measure relative to the hour indicated by end of day during which the content id value is not reassign to different content. The value shall be in the range 1 to 511. The value zero shall be forbidden. The value 511 shall have the special meaning of indefinitely . Note that the value of this field is expected to be essentially static per broadcaster only changing when the method of house numbering is changed. Note also that decoders can treat stored content values as unique until the unique for fields expire which can be implemented by decrementing all stored unique for fields by one every day at the end of day until they reach zero.

 content id field this variable length field shall be set to the value of the identifier according to the house number system or systems for the value of TSID. Each such value shall not be assigned to different content within the period of uniqueness set by the values in the end of day an unique for fields. The identifier may be any combination of human readable and or binary values and need not exactly match the form of a house number not to exceed 242 bytes 1.

As a method of providing an ETV service supporting an ACR function in the present invention a method using watermarking is proposed. is a diagram showing operation between modules of a receiver for performing an ACR function using watermarking.

As shown in a receiver using watermarking may include a Mobile Handheld M H receiving module an Internet module a storing module an external input module a watermark extracting module an application module an A V processing module and a displaying module .

As shown in the receiver may recognize a content provider CP using a watermark and process an enhancement service provided by the recognized CP.

In the receiver according to the embodiment of the present invention the watermark extracting module may extract a watermark from an A V signal received by the M H receiving module through external input and obtain content information included in the A V signal. The content information which may be included in the watermark according to the embodiment of the present invention will be described below.

The extracted content information may be displayed to a viewer through the application module and the viewer may selectively receive enhancement data for an enhancement service through M H or Internet using the displayed content information.

Although not shown in the received enhancement data may be stored in the storing module to be used for an ACR service. In this case the content information and metadata are stored in the storing module and the stored content information and metadata may be used to receive related enhancement data upon A V playback. Alternatively the receiver may access the content provider or newly receive enhancement data through M H tuning upon A V playback.

Hereinafter operation of each module shown in will be described and then content information which may be extracted from the watermark will be described.

The M H receiving module may receive enhancement data from the content provider through an M H signal.

The storing module may store data including A V information and or enhancement data received from the content provider. If the watermark extracting module extracts a watermark the watermark may be displayed and stored in the storage device as special metadata.

The watermark extracting module may extract a watermark from the A V signal received by the external input module . If content is stored in the storage of the TV and is then played back the watermark may be extracted upon playback.

The application module may receive the watermark extracted by the watermark extracting module from data including A V information and or enhancement data received from the content provider and stored in the storing module and process the data including the A V information and or the enhancement data using the information about the watermark.

The A V processing module may decode the A V signal through an audio decoder and or a video decoder to process data received from the application module .

The displaying module may display the data processed by the A V processing module on a screen of the receiver in an on screen display OSD manner.

Hereinafter content information according to one embodiment of the present invention will be described.

The content information extracted through the watermark may include information about a content provider. More specifically the content information may include ID information of a content provider or a broadcaster ID information of content information about a time of content content life cycle information and or information about enhancement data. In an ACR service using fingerprinting according to one embodiment of the present invention an ACR query result may be used as metadata for content acquired via an ACR function.

The CP ID information may mean an identifier for identifying a content provider or a broadcaster. According to the embodiment of the present invention the CP ID information may serve as a primary identifier. The CP ID information may include a collection of a serial number for identifying a producer name and a producer and or a serial number for identifying a country a region and a service property genre . According to one embodiment of the present invention a TS id used for an ATSC program and system information protocol PSIP may be used as CP ID information.

The content ID information may mean an identifier for identifying content instead of a content provider. More specifically the content ID information may include a collection of a serial number for identifying a content name and content and a serial number for identifying a content property genre . According to one embodiment of the present invention an event id used for an ATSC PSIP may be used as content ID information.

The CP ID information may be included in the watermark with a frequency higher than that of the content ID information and may be configured to be more easily extracted. In this case the CP ID information may include more compressed information or more detailed information.

The time information may indicate time information related to content. More specifically the time information may include a start time a duration time an end time and or a lead time meaning a total service playback time. According to one embodiment of the present invention the time information may be based on UTC or GPS and may be configured in another format such as an STT of an ATSC PSIP. In addition the time information may be used for synchronization in a display process when a service such as a synchronized widget is provided. In addition the time information may be used for content rescheduled by a cable or satellite personal video recorder PVR set top box.

The content life cycle information may include information about a life cycle within which a service is valid.

The information about the enhancement data may include information about presence absence of enhancement data and usage of a watermark and or information about a path for receiving enhancement data. More specifically the information about the enhancement data may include information about presence of enhancement data provided by a content provider and information indicating whether a watermark is used for a license for preventing illegal copy and distribution audience rating survey or content provider recognition for an additional service. Information about a path for receiving enhancement data may include information indicating whether an IP network is used or another medium such as a mobile device is used. More specifically if enhancement data is received via an IP network an IP address and or URL information may be included and if enhancement data is received via a mobile device frequency information standard ATSC MH DMB media flow DVB H NGH etc. information and or channel information may be included.

A receiver such as a general digital TV receiver receives an A V signal from a cable or satellite set top box mounted in the receiver through an HDMI or component connection. Hereinafter according to the embodiment of the present invention shown in operation for extracting a watermark and recognizing a CP will be described in stages in the set top box and the receiver .

If an input mode of the receiver is set to an external input mode the receiver may search for a CP ID for identifying a content provider or a broadcaster. If the set top box is turned on and a channel is tuned to the receiver may detect a CP ID. The receiver may detect a content ID and time information of content provided by the detected content provider. If the channel of the service received from the set top box is changed the receiver may newly search for a CP ID for identifying a content provider according to the changed channel.

As described with reference to the receiver according to one embodiment of the present invention may recognize a CP using a watermark for transmitting CP information included in A V content. In this case if the amount of information stored in the watermark is increased quality of A V content into which the watermark is inserted may be deteriorated. Accordingly in the present invention in order to solve such a problem a method of profiling and leveling a watermark according to attributes of information stored in the watermark and inserting the leveled watermark into A V content is proposed. In this case since the leveled watermark is differentiated according to attributes of the stored information and is inserted into the A V content the amount of information about the inserted watermark may be adjusted to prevent the quality of content from being deteriorated.

Accordingly in the present invention in order to level a watermark according to profiling the watermark may be divided into a basic profile watermark and an extended profile watermark according to attributes of information stored in the watermark. The basic profile watermark may include information essentially necessary to recognize a real time broadcast program in order to perform an ACR function. The extended profile watermark may include additional information instead of information essentially necessary to perform an ACR function. A plurality of extended profile watermarks may be present and may be leveled again according to attributes of information. In this case the basic profile watermark and the extended profile watermark may be inserted into A V content according to different cycles.

As described above a content provider may receive an original signal such as video audio search for a region into which a watermark will be inserted and embed in a watermark metadata related to content to be provided . Thereafter the content provider may transmit the watermarked signal to a receiver. In the watermarked signal the original signal and the metadata may be stored in the form of a watermark. In one embodiment the watermark of may include a basic profile watermark W and first and second extended profile watermarks W and W and .

The content provider ID element may indicate information for identifying a broadcaster or a CP for providing content.

The extension indicator element may indicate whether a watermark of a next level that is a first extended profile watermark is additionally inserted. If the value of the extension indicator element is 1 this indicates that the first extended profile watermark of the next level is inserted.

The first extended profile watermark may include a content ID element a timestamp element and an extension indicator element.

The content ID element may indicate serial number information for identifying a content name or content.

The extension indicator element may indicate whether a watermark of a next level that is a second extended profile watermark is additionally inserted as described above. As shown in the second extended profile watermark may include a watermark insertion usage element a URL element of additional information and an extension indicator element.

The URL element of the additional information may indicate additional information or URL information for receiving a service.

As shown in a content provider or a broadcaster may differentiate the number of times of inserting the watermark into the A V content according to watermark profiling when the leveled watermark is inserted into the A V content. For example since the basic profile watermark includes important basic information of a broadcast program the content provider or the broadcaster may set the number of times of inserting the basic profile watermark such that the receiver accurately recognizes information as soon as possible.

That is the content provider or the broadcaster may insert basic profile watermarks more than extended profile watermarks and during a transmission cycle of the watermarked signal . Accordingly the receiver may preferentially extract the basic profile watermark and then extract the extended profile watermarks and as necessary. In this case the receiver may check presence of the extended profile watermark according to the value of the extension indicator element and extract the extended profile watermark. That is the receiver may discriminatorily extract watermarks discriminatorily inserted according to the profile of the watermark and efficiently store and manage information included in the watermark.

Up to now a method and system for providing an ACR service using watermarking according to an embodiment of the present invention has been described. Hereinafter a method of embedding a watermark in content at a content provider and a method of extracting a watermark from content at a receiver according to an embodiment of the present invention will be described in detail.

A method of embedding a watermark in a video frame at a content provider and a method of extracting a watermark from content at a receiver will be described with reference to and a method of embedding a watermark in an audio frame at a content provider and a method of extracting a watermark from content at a receiver will be described with reference to .

A content provider first subdivides one video frame into subframes searches for the subdivided subframes and determines an area in which a watermark will be appropriately embedded. If a subframe area in which a watermark will be embedded is determined the watermark is embedded in the subframe area and the subframes are combined to regenerate one video frame .

In order to extract the watermark from the video frame embedded in the overall area of one video frame at the receiver first the receiver subdivides one video frame into subframes. An area in which the watermark may be embedded is detected from the subdivided subframes. The watermark is extracted from the detected subframe area and the extracted watermarks are compared to finally determine one watermark. Enhancement data may be downloaded using content information through the determined watermark.

More specifically shows a method of embedding a watermark in a bar data area of a video frame according to an embodiment of the present invention.

If a watermark is embedded in the overall area of one video frame watermarking robustness may be improved but processing necessary to extract the watermark at the receiver may be increased. Therefore by embedding the watermark in some areas of the video frame it is possible to decrease processing necessary to extract the watermark at the receiver so as to improve operation efficiency of the receiver. Some areas in which the watermark will be embedded of the overall area of the video frame may be predefined according to the rules of the transmitter receiver. Hereinafter according to the embodiment of the present invention the content provider may embed the watermark in the bar data area which is a part of the overall area of the video frame.

When the content provider transmits content to the receiver if an image ratio of content mismatches a transmission format a bar data area may be generated on a screen. For example as shown in in case of converting a video frame having an aspect ratio of 16 9 into an aspect ratio of 4 3 black bands may be generated in upper and lower edges of a screen having the aspect ratio of 4 3 so as not to crop the left and right edges of the screen. The area of the black band may be the bar data area which is called a letterbox.

As shown in in case of a video frame in which the bar data area is present the watermark may be embedded in the bar data area to be transmitted. The method of embedding the watermark in the bar data area may be performed equally to the process of embedding the watermark in the video frame described with reference to .

More specifically the content provider may search for the bar data area of the video frame in which the watermark will be embedded and embed the watermark in the bar data area .

In order to extract the watermark embedded in some areas of the video frame first the receiver subdivides one video frame into subframes. An area in which the watermark may be embedded is detected from the subdivided subframes. According to the embodiment of the present invention shown in the receiver may detect the bar data area from the subdivided subframes. The watermark is extracted from the detected subframe area and the extracted watermarks are compared to finally determine one watermark. Enhancement data may be downloaded using content information through the determined watermark.

More specifically shows a method of embedding a plurality of watermarks including different content information or metadata into different areas of one video frame.

For example as shown in a watermark including CP ID information may be embedded in a logo area located at a right upper side of a screen and a watermark including a content ID and timestamp information may be embedded in a central area of the same screen.

A method of embedding the plurality of watermarks including different content information into one video frame may be largely divided into two methods according to the embodiment of the present invention.

A plurality of different watermarks may be embedded in different areas and of a video frame. At this time the two or more areas and of the video frame in which the watermark will be embedded may be predefined according to the rules of the transmitter receiver.

Alternatively a separate watermark including information about the different areas and of the video frame may be first embedded. Different areas and in which the watermarks including content information will be embedded may be detected through a separate watermark and the watermarks may be respectively embedded in the areas and . The separate watermark may be embedded in a specific area or a logo part of the video frame and may be predefined according to the rules of the transmitter receiver.

If the received video frame includes watermarks having different content information according to areas first the receiver acquires information about the area in which the watermark is embedded through another path or according to the rules of the transmitter receiver. Using the acquired information the watermark is extracted from each area of the video frame. According to the embodiment of the present invention shown in the watermark including information about a content provider may be extracted from the logo area and the watermark including a content ID and time information may be extracted from the central area of the screen. Alternatively if information for extracting different watermarks from the extracted watermarks e.g. information about an area in which the watermark is embedded is included it is possible to extract the different watermarks using the information.

An original audio signal is divided into frames having a constant length and the divided audio frame is subdivided into subframes . Using the subdivided subframes an area in which a watermark will be embedded may be searched for . For example a frequency band higher than 4 kHz to which a human ear is sensitive may be searched for and determined as a watermark embedding area. The watermark is embedded in the searched area and the subframes are recombined into one audio signal .

In addition according to the embodiment of the present invention a plurality of watermarks may be embedded in an audio signal based on the watermark embedding process shown in . The embedding method may include a method of respectively embedding watermarks to two or more different frequency bands and recombining the subframes into one audio signal and a method of embedding one watermark in continuous audio frames and embedding the other watermarks to different frequency bands.

According to the above described embodiment of the present invention if the audio signal in which the watermark is embedded is received the receiver may first divide the audio signal into frames having a constant length in order to extract the watermark from the audio signal. The divided frame may be subdivided into subframes and the watermark extraction area may be detected from the subframes. The watermark is extracted from the detected area. If a plurality of watermarks is embedded in an audio signal the watermarks may be extracted from the received audio signal at two or more frequency bands defined according to the rules of the transmitter receiver. Alternatively one watermark may be extracted from continuous audio frames and the other watermarks may be extracted from the signals of different frequency bands defined according to the rules of the transmitter receiver. In addition according to the embodiment of the present invention of the method of embedding the watermark described with reference to the watermark may be embedded in both audio content and video content.

If a watermark including the same content information may be embedded in both video and audio frames the same watermark may be repeatedly embedded in the video and audio frames with a predetermined periodicity. According to such a method since the receiver may simultaneously extract the same watermark from the video and audio frames in which the watermark is embedded it is possible to improve accuracy of a result of extracting the watermark and to reduce a time consumed to finally acquire an accurate result.

Alternatively watermarks may be divided according to content information included in the watermark and the divided watermarks may be embedded in video and audio frames. For example the content information included in the watermark is divided into essential information for recognizing a broadcast program such as a CP ID and a content ID and additional information. The essential information may be embedded in a video frame and additional information may be embedded in an audio frame. On the contrary the essential information may be embedded in an audio frame and additional information may be embedded in a video frame. Since the amount of information embedded in one video or audio frame is restricted if the watermark is embedded using such a method it is possible to increase the amount of metadata embedded during a predetermined time.

As described with reference to since the quality of A V content may be deteriorated as the amount of content information stored in the watermark is increased if the watermark is leveled according to type of information stored in the watermark it is possible to efficiently utilize the watermark while maintaining the quality of content.

According to the embodiment of the present invention after the watermark is profiled according to attributes of information stored in the watermark the number of times of embedding the watermark in a content frame during a predetermined cycle may be differently set.

For example information stored in the watermark may be divided into essential information for recognizing a broadcast program and additional information or information having a short change cycle and information having a long change cycle. The number of embedding the watermark including essential information and or information having a short change cycle in the frame during a predetermined cycle may be increased and the number of embedding the watermark including additional information and or information having a long change cycle in the frame during a predetermined cycle may be decreased.

More specifically as shown in a watermark including information necessary to recognize a program such as a CP ID and a content ID may be embedded in a logo area and a watermark including additional information such as URL information may be embedded in another specific area of the frame. In this case the watermark of the logo area is data necessary to recognize the program and thus may be embedded in all video frames and and the watermark of the specific area of the frame for providing the additional information may be embedded in the two frames and once.

The amount of content information which may be embedded in one A V frame is restricted. According to the embodiment of the present invention shown in the watermark may include a large amount of content information.

As shown in the content provider may embed the watermark including content information into continuous frames. In order to indicate the start and end of the content information after a start tag indicating start information of content information and an end tag are embedded in content information the content information is divided into sub content information . The watermarks including the sub content information may be embedded in continuous A V frames respectively. In addition if the watermarks are repeatedly embedded in the continuous A V frames during a predetermined cycle the receiver may efficiently extract the watermarks.

As shown in the receiver may extract the watermarks from the continuous frames in which the watermarks are embedded. First the receiver extracts the watermarks embedded in the continuous A V frames. A start tag and an end tag of content information may be detected from the extracted watermarks. If the start information of the content information is acquired from the start tag the watermarks are extracted from the A V frames received after the start tag has been detected so as to acquire sub content information and the acquired sub content information is combined. If the end information of the content information is acquired from the end tag the process of combining the sub content information is finished to acquire one piece of content information.

A full 3D video image may be implemented by acquiring a left image and a right image using two cameras enabling a left eye to view the left image and enabling a right eye to view the right image. In the present invention a method of embedding and extracting a watermark in and from a 3D video frame is proposed.

As shown in the 3D video frame may include a left frame and a right frame . A content provider may embed content information or metadata into the left frame and the right frame and generate a left frame in which the watermark is embedded hereinafter referred to as a watermarked left frame and a right frame in which the watermark is embedded hereinafter referred to as a watermarked right frame .

First the content provider may embed the watermark in only the left frame or the right frame and transmit the watermarked left and right frames to the receiver. The receiver may extract the watermark from one of the watermarked left frame or the watermarked right frame . In this case as described with reference to the method of embedding the watermark in the video frame and the method of extracting the watermark from the video frame may be applied. The watermarked video frame may be predefined according to the rules of the transmitter receiver.

Second the content provider may embed the watermark including the same content information into the left frame or the right frame and transmit the watermarked left and right frames to the receiver. The receiver may extract the watermark from each of the watermarked left frame or the watermarked right frame . The extracted watermarks may be compared and corrected if the watermarks are identical or if a difference between the watermarks is within an allowed error range. In this case the methods described with reference to are applicable to the method of inserting the watermark into the left frame or the right frame and the method of extracting the embedded mark. The watermark may be embedded in the left frame or the right frame using the same method or different methods. Although such a method may increase complexity when the receiver extracts the watermark watermark extraction robustness may be increased.

Third the content provider may embed different watermarks in the left frame or the right frame and transmit the watermarked left and right frames to the receiver. The receiver may extract the watermark from each of the watermarked left frame or the watermarked right frame . The extracted watermark may include one piece of content information. Alternatively content information included in the extracted watermark may be combined to generate one piece of new content information. In the latter case content information greater in amount than the amount of content information transmittable via one video frame may be embedded in the video frame. Alternatively content information which may be included in one video frame may be divided and embedded in the left frame or the right frame . In this case it is possible to reduce a possibility that the quality of image is deteriorated.

More specially shows an ACR service provision system for recognizing broadcast content using both watermarking and fingerprinting technologies according to one embodiment of the present invention.

In watermarking a recognition ratio of content embedded in one frame is high but the quality of content may be deteriorated if a large amount of content information is embedded in a watermark. That is the amount of embedded metadata is restricted.

In fingerprinting the quality of content is not influenced but an ACR server for recognizing content is necessary. In addition a time consumed to recognize content and a content recognition result depends on the size of a reference set.

According to the embodiment of the present invention shown in if broadcast content is recognized by a combination of watermarking and fingerprinting technologies it is possible to efficiently provide an ACR service while solving the problems of the two technologies.

The present invention includes a method of recognizing a broadcast program which is currently being viewed using two technologies. Metadata which is used to recognize a program such as an identifier of a content provider or a broadcaster and needs to be most accurately recognized may be embedded in broadcast A V content and may be transmitted.

Hereinafter a mechanism between components of an ACR service provision system shown in will be described in detail.

If the content provider transmits watermarked A V content and enhancement data to an MVPD the receiver may receive the A V content through a set top box but may not receive the enhancement data . Accordingly in order to enable the receiver to receive the enhancement data through another path the content provider may transmit additional information of the A V content to an ACR server and transmit the enhancement data to an application server s . The additional information of the A V content may be information for delivering the enhancement data related to the A V content to the receiver and may include a content ID a timestamp a URL etc.

A watermark extractor of the receiver may extract a watermark from the received A V content and at the same time a fingerprint extractor may extract a fingerprint signature from the A V content. The receiver may transmit a query including the content information included in the watermark and the fingerprint signature to an ACR server and acquire the additional information of the A V content from the ACR server . Then the receiver may receive the enhancement data from the application server using the additional information of the A V content . By including the watermarking result in the query it is possible to reduce a time consumed to recognize the content at the ACR server and to improve content recognition accuracy of the ACR server.

A content provider or a broadcaster has a logo indicating content thereof. For example content providers may have logos shown in . The broadcaster or the content provider may insert a logo into a right upper side a left upper side a right lower side or a left lower side of a screen as shown in so as to display content. Even when a video scene displayed on the screen is changed the logo is not changed and is continuously displayed. In the present invention an ACR service method of automatically recognizing information continuously displayed in a specific part of a screen using the property of a logo is proposed.

As shown in according to the embodiment of the present invention a watermark may be inserted into a logo to provide an ACR service. A receiver may recognize the logo to acquire content provider information indicating the logo and access the content provider to receive a service thereby providing an ACR service. Hereinafter a method of providing an ACR service using a logo will be described in detail.

First the receiver may acquire logo information through a logo recognition step and a logo comparison step . The receiver may acquire content provider information as a comparison result to recognize the content provider and access the content provider server . Additional information of the content may be received from the content provider server to provide an additional server .

The logo recognition step and the logo comparison step of the receiver may be performed by comparing the logo recognized by the receiver and the logos of the content providers pre stored in the receiver.

Information about the stored logos is information received and stored by the receiver through an IP network or MH or default information stored in the receiver. New version information of the logo may be maintained. In case of information received via the IP network or MH new logo information may be maintained by continuously receiving logo information through the IP network or MH and in case of the default information new logo information may be maintained through continuous update.

In the logo comparison step if the recognized logo is compared with all logo information stored in the receiver the amount of information is large. Thus a burden is imposed on the receiver. According to the embodiment of the present invention since extraction storage and comparison may be performed based on the detailed properties of the logo it is possible to overcome such a restriction. For example logo properties such as logo color letter SBS CNN etc. and contour may be recognized to perform comparison. If a contour is used a space in which the logo is displayed may be divided by coordinates to recognize the logo using the coordinate properties.

As shown in in an ACR service a receiver may extract logo information or a watermark to acquire information about a content provider and receive an additional service provided by a content provider through an IP network or MH.

As described above if a watermark is embedded in content the data of the content may be changed. Accordingly in the present invention a method of embedding a watermark in a logo area included in content is proposed.

Hereinafter a method of utilizing logo information and a watermark at a receiver for an ACR service according to the embodiment of the present invention shown in will be described in detail.

As described above the receiver according to the embodiment of the present invention may extract and utilize a watermark including a predetermined amount of content information by a specific algorithm inserted into a specific field of A V frame data when content is played back. For example the receiver which receives video content including 30 frames per second may extract from M frames a watermark including data of N bits corresponding to a specific field or a specific location in each frame. In this case the total amount of extracted watermark data may become N M bits. If the number of watermarked frames is increased the amount of watermark data to be extracted is increased. Therefore a time consumed to extract the watermark at the receiver may be increased and the quality of the A V content processed by the receiver may be deteriorated.

Accordingly in the present invention a method of embedding a watermark in a logo area included in a video frame is proposed. The logo area is included in all video frames and may be displayed at the same location on a screen even when a playback screen is changed. Accordingly even when the amount of data is large if a watermark is embedded in a logo area it is possible to reduce a time consumed to extract a watermark and to decrease a possibility that the quality of A V content is deteriorated.

Hereinafter a method of embedding a watermark in a logo according to one embodiment of the present invention will be described. The method of embedding the watermark in the logo according to the embodiment of the present invention may include a method of embedding bar code data at a predetermined location of a logo a method of utilizing a metadata packet of logo information as a watermark and a method of embedding a watermark in a part of image data of a logo.

In case of the method of embedding the bar code data at the predetermined location of the logo the receiver may recognize the bar code data located at a specific location as a watermark. In this case the bar code data is not displayed.

In the method of utilizing the metadata packet of the logo information as the watermark the metadata packet describing the logo is used as the watermark while the original form of image data of the logo is maintained. In this case the metadata packet may include a CP ID a content ID time information etc.

In the method of embedding the watermark in the logo information N logo frames are combined using bits of the part of the image data of the logo and N watermark bits are embedded in the logo image data. In this case content information or metadata included in the watermark is as described above.

As shown in an ACR service provision apparatus using the logo and the watermark may include a set top box STB a terminal a logo server a metadata server an application lookup server and or an application server . Here the logo server the metadata server the application lookup server and or the application server may be incorporated in the terminal as internal components or may be provided independent of the terminal.

An ACR service reception apparatus receiver according to one embodiment of the present invention may include the STB the terminal and the logo server or may include at least one of the metadata server the application lookup server and the application server which may be changed according to designer s intention.

More specifically shows a relationship between components of the receiver for receiving additional data or enhancement data related to broadcast content using logo data and a watermark if a receiver according to an embodiment of the present invention receives the broadcast content through the STB . The logo data indicates a content provider and corresponds to a logo image such as a broadcaster emblem displayed in a specific area of content. Hereinafter the components shown in will be described.

The terminal may recognize and extract logo data from a video frame of raw data of the broadcast content received through the STB . The logo data according to one embodiment of the present invention corresponds to a logo image displayed in a specific area of content. The terminal may transmit the extracted logo data and a channel information search signal to the logo server and receive channel information of a channel via which the content is transmitted from the logo server . The channel information search signal according to one embodiment of the present invention may be generated based on the extracted logo data and may be request syntax. In addition the channel information according to one embodiment of the present invention may include information indicating a content provider indicated by the logo data. In addition the terminal may extract a watermark from an audio frame of the broadcast content and obtain program information of the broadcast content. The program information according to the embodiment of the present invention may include content ID information and or time information.

The terminal may generate a request for obtaining an URL address and or an IP address using the obtained channel information and or program information. The terminal may send the request to the application lookup server to obtain the URL address and or the IP address and access the application server using the obtained URL address and or IP address to receive additional data of the content.

The logo server may receive metadata related to the logo data from the metadata server and store and manage the metadata in a database DB . The metadata may include channel information of content indicated by the logo data.

The logo server may receive the logo data and the channel information search signal from the terminal and search the DB for the channel information related to the received logo data.

The logo server according to the embodiment of the present invention may compare the received logo data with the logo data pre stored in the DB and confirm a content provider indicated by the received logo data. More specifically the logo server may determine whether the received logo data is equal to the logo data stored in the DB. The logo server according to one embodiment of the present invention may compare a logo image logo image color text and or contour corresponding to the logo data and determine whether the logo image corresponding to the received logo data is equal to the logo image of the stored logo data as described with reference to .

If the received logo data is equal to the logo data stored in the DB a content provider indicated by the received logo data is equal to a content provider indicated by the logo data stored in the DB. Accordingly the logo server may obtain metadata related to the logo data stored in the same DB as the received logo data from the DB. As described above the metadata may include channel information.

The logo server may send the channel information of the metadata related to the logo data to the terminal . If the channel information is not present in the DB of the logo server the logo server may receive the channel information from the metadata server .

The metadata server may update the metadata related to the logo data. More specifically the metadata server may add update and or delete metadata and periodically send the updated metadata to the DB of the logo server to update the DB of the logo server . The metadata server may be managed by a content provider a broadcaster or a third party and the terminal may be managed by a manufacturer a receiver manufacturer or a service delivery platform SDP server which may be changed according to designer s intention.

The application lookup server may analyze the request received from the terminal and obtain channel information and or program information included in the request. Through the analyzed result the application lookup server may determine whether an application for content corresponding to the channel information and or program information is present. If the application for the content is present the application lookup server may send the URL address and or IP address of the application server to the terminal .

The application server may manage the application for the content and or data regarding the application.

As described above the terminal may generate a request using the logo data and the watermark and receive the URL address and or IP address from the application lookup server through the generated request. Thereafter the terminal may access the application server using the received URL address and or IP address and download the application. The application server may manage the application downloaded by the receiver. Thereafter the receiver may receive additional data of the content through the application.

If the receiver cannot access an audio signal and thus cannot extract the watermark inserted into an audio frame the terminal according to the embodiment of the present invention may generate a request using only the logo data extracted from the video frame. More specifically the terminal according to the embodiment of the present invention may send the request including the channel information obtained through the logo data to the application lookup server . The request according to one embodiment of the present invention may use an HTTP protocol. The application lookup server may confirm time information of the received request using a data field value included in a header of HTTP. Thereafter the application lookup server may search for the URL address and or IP address of the application accessible by the terminal using the channel information and or the time information and send the URL address and or IP address to the receiver. Thereafter the receiver may receive additional data through the URL address and or IP address.

If the receiver cannot access an audio signal and thus cannot extract the watermark inserted into an audio frame the terminal according to the embodiment of the present invention may generate a request using symbol data included in a video frame. The symbol data according to one embodiment of the present invention corresponds to a symbol image displayed on a screen and may represent a program related to content. More specifically if the symbol data is included in a video frame the terminal may extract the symbol data and generate a request using the logo data and the symbol data. The ACR service system using the symbol data will be described below.

If the receiver cannot access a video signal and thus cannot extract the watermark inserted into a video frame the terminal according to the embodiment of the present invention may generate a request using only the watermark extracted from an audio frame. The terminal may generate the request including the information obtained from the watermark and send the request to the application lookup server . Thereafter the application lookup server may search for the URL address and or IP address of the application accessible by the terminal using the received request and send the URL address and or IP address to the receiver. Thereafter the receiver may receive additional data through the URL address and or IP address.

First the terminal may extract logo data from a video frame. Thereafter the terminal may send logo data and a channel information search signal to the logo server as described above.

The logo server may search for channel information according to a request signal of the terminal and transmit the searched channel information to the terminal .

The metadata server may periodically update metadata related to the logo data and send the updated metadata to the logo server . The metadata server may update the metadata before receiving the logo data or after receiving the logo data.

In addition the terminal may extract a watermark from an audio frame and obtain program information from the watermark. The terminal according to the embodiment of the present invention may simultaneously or sequentially perform a process of extracting logo data from a video frame and a process of extracting a watermark from an audio frame which may be changed according to designer s intention.

Thereafter the terminal may generate a request using the channel information extracted from the logo data and or the program information extracted from the watermark. The terminal may send the request to the application lookup server through an HTTP protocol.

The application lookup server may analyze the received request search for an URL address and or IP address of an application capable of providing additional data of the channel and or program and send the URL address and or IP address to the terminal .

The terminal may access the application server through the received URL address and or IP address and download the application. The downloaded application may be managed by the application server and the additional data may be sent to the terminal through the downloaded application.

As shown in the terminal may process a video signal and an audio signal included in a broadcast signal received from the STB via independent paths. Hereinafter the logo extractor and or the watermark extractor included in the terminal will be focused upon.

The logo extractor may automatically recognize and extract logo data corresponding to the logo image from the video frame. More specifically the logo extractor may recognize a specific area of the video frame and extract the logo data located in the specific area. The logo extractor may recognize the logo image corresponding to the logo data extracted through image processing.

The terminal may send the extracted logo data to the logo server such that the logo server compares the logo data extracted by the logo extractor with the logo data stored in the DB of the logo server. A detailed comparison method is described with reference to . If the logo image corresponding to the extracted logo data is equal to the logo image of the stored logo data the logo server may search for channel information of the logo data and send the channel information to the terminal. According to one embodiment of the present invention the channel information may be represented in a channel number major minor short number format.

The logo server may periodically receive the updated logo data from the metadata server and continuously update the DB of the logo server. If the channel information of the logo data is not currently present in the DB of the logo server the logo server may receive the channel information from the metadata server.

The watermark extractor may recognize and extract a watermark inserted into an audio frame. The watermark inserted into the audio frame may include program information including content ID information and or time information and further include CP ID information content life cycle information described with reference to which may be changed according to designer s intention. Accordingly the watermark extractor may obtain the program information from the extracted watermark.

The terminal may generate a request using the program information extracted from the watermark of the audio frame and the channel information extracted from the logo data of the video frame and send the request to the application lookup server.

The request according to one embodiment of the present invention may be composed of a combination of the channel information the program information and the URL address of the application server. shows http www.ohtv.org ch 7 1 KBS2HD ContentID 12 2345 . . . which is the request according to one embodiment of the present invention.

The request shown in is a request in which channel information and program information are represented in the form of parameters http www.ohtv.org may indicate the URL address of the application lookup server ch 7 1 KBS2HD may indicate channel information and ContentID 12 2345 . . . may indicate program information.

The application lookup server may search for the URL address and or IP address of the application capable of obtaining additional data using parameters of the request received from the terminal and send the searched result to the terminal.

The basic components shown in are equal to those described with reference to and and a description thereof will be omitted. Hereinafter the symbol extractor and or the content metadata server will be focused upon.

As shown in the symbol extractor may be incorporated in the terminal. The content metadata server may be incorporated in the terminal or located separately from the terminal which may be changed according to designer s intention. As shown in a symbol image and or a logo image may be included in a specific area of displayed content.

As described with reference to if the receiver according to the embodiment of the present invention cannot access an audio signal the terminal may obtain symbol data included in a video frame and generate a request using the logo data and the symbol data.

More specifically the symbol extractor of the terminal shown in may extract symbol data corresponding to the symbol image from the video frame and recognize a symbol image corresponding to the extracted symbol data using an image processing method. Thereafter the terminal may send the recognized symbol image or the symbol data corresponding to the symbol image to the content metadata server .

The content metadata server may obtain and send program information of a program indicated by the symbol image to the terminal. The content metadata server may receive metadata including program information related to the symbol image from the metadata server and store and manage the metadata in a DB. The content metadata server may search the DB of the content metadata server to obtain program information and receive program information from the metadata server if the program information is not present in the DB. As described above the program information according to the embodiment of the present invention may include content ID information and or time information. The metadata including the program information may be added corrected updated and or deleted by the metadata server. The updated metadata may be periodically sent to the DB of the content metadata server .

As shown in the terminal may extract logo data from the video frame. As described with reference to the logo extractor included in the terminal may extract logo data corresponding to the logo image from the video frame send the logo data to the logo server and receive channel information of the logo data from the logo server.

Operations of the above described logo extractor and the symbol extractor may be sequentially or simultaneously performed and may be changed according to designer s intention. The terminal may generate a request including the program information obtained using the symbol data and or the channel information obtained using the logo data. The method of receiving additional data at the terminal using the generated request is equal to the method described with reference to and a description thereof will be omitted.

As shown in the ACR service reception apparatus according to the embodiment of the present invention may include a receiving module an extracting module a comparing module an obtaining module and or a generating module .

The receiving module the extracting module the obtaining module and or the generating module shown in may be incorporated in the terminal described with reference to and the comparing module shown in may be incorporated in the logo server described with reference to which may be changed according to designers intention. Hereinafter the modules of will be described.

The receiving module may receive a digital service signal including content. In addition the receiving module may receive an URL address and or an IP address for receiving additional data of content. the detailed process of receiving the URL address and or the IP address was described with reference to .

The extracting module may extract logo data included in each video frame of the received content. The logo data may be included in a specific area of a video frame and corresponds to a logo image displayed in a specific area of content as described with reference to . The extracting module may extract a watermark from a specific area of a video frame. In the embodiment of the present invention the watermark extracted from the video frame may include channel information and or program information.

The comparing module may compare the logo data extracted by the extracting module with the logo data stored in the ACR service reception apparatus . The detailed method of comparing the extracted logo data with the stored logo data was described with reference to .

The obtaining module may obtain channel information from the metadata related to the logo data using the comparison result of the comparing module . The obtaining module may obtain additional data of the content using the URL address and or IP address received by the receiving module .

The generating module may generate a request using the channel information obtained by the obtaining module . As described with reference to to the generating module may generate a request using the obtained channel information of the logo data and or the program information of the watermark included in an audio frame. If an audio frame is not accessible the generating module may generate a request using only the obtained channel information of the logo data or the symbol data included in the video frame. If a video frame is not accessible the generating module may generate a request using only the program information of the watermark included in the audio frame.

The receiving module may receive an URL address and or an IP address using the request generated by the generating module . The obtaining module may obtain additional data over an IP network according to the URL address and or IP address received by the receiving module .

Although not shown in the ACR service reception apparatus according to the embodiment of the present invention may further include a watermark extracting module a program information obtaining module a symbol extracting module a processing module and or an updating module. The watermark extracting module the program information obtaining module and or the symbol extracting module may be included in the terminal described with reference to . The processing module may be included in the terminal or the content metadata server described with reference to . The updating module may be included in the terminal or the metadata server described with reference to . This may be changed according to designer s intention.

The watermark extracting module according to the embodiment of the present invention may extract a watermark from an audio frame of content received by the receiving module . Thereafter the program information obtaining module may obtain program information included in the extracted watermark. As described with reference to the program information according to the embodiment of the present invention may include content ID information and or time information. The detailed method of extracting the watermark from the audio frame at the terminal was described with reference to .

If symbol data is included in a video frame the symbol extracting module according to the embodiment of the present invention may extract the symbol data from the video frame. Thereafter the program information obtaining module according to the embodiment of the present invention may obtain program information from the extracted watermark. The symbol data may be included in a specific area of each video frame. Detailed operations of the symbol extracting module and or the program information obtaining module were described with reference to .

The updating module according to the embodiment of the present invention may periodically update metadata related to logo data. As described with reference to the metadata server may continuously add update and or delete the logo data stored in the metadata lookup server .

As shown in the ACR service transmission apparatus according to the embodiment of the present invention may include a generating module an inserting module and or a transmitting module .

The generating module may generate a digital service signal including content. More specifically the content generated according to the embodiment of the present invention may include both video content and audio content. The generating module may generate a watermark to be inserted into an audio and or video frame. The generating module may generate symbol data indicating a program of the content.

The inserting module may insert logo data into each video frame of the content. More specifically the logo data may be inserted into the same specific area of each video frame and corresponds to a logo image displayed in the specific area of the content.

In addition the inserting module may insert a watermark into an audio and or video frame. More specifically the inserting module may divide the audio and or video frame into subframes and detect a specific subframe into which the watermark will be inserted from the divided subframes. Thereafter the inserting module may insert the watermark into the specific subframe and combine the subframes to generate an audio and or video frame.

The inserting module may insert the symbol data generated by the generating module into a specific area of each video frame of the content.

The transmitting module may transmit a digital service signal including content into which the logo data and or the watermark are inserted through the inserting module to the ACR service reception apparatus described with reference to . The logo data according to the embodiment of the present invention may be used to receive the channel information by the obtaining module described with reference to . The channel information according to the embodiment of the present invention may be used to receive the URL address and or the IP address by the receiving module described with reference to .

The receiving module according to one embodiment of the present invention may receive the digital service signal including the content S . As described above the receiving module may be incorporated in the terminal described with reference to . More specifically as described with reference to the terminal may recognize the logo data from the video frame of the raw data of the broadcast content received via the STB .

The extracting module according to one embodiment of the present invention may extract the logo data from a specific area of each video frame of the received content S . As described above the extracting module may be incorporated in the terminal described with reference to .

More specifically as described with reference to the logo extractor of the terminal may extract the logo data from the video frame through image processing. The logo data may be included in a specific area of the video frame and correspond to the logo image displayed in the specific area of the content as described with reference to .

The terminal according to the embodiment of the present invention may extract the watermark from the audio frame and obtain the program information using the extracted watermark. The extracted watermark may include the program information. As described with reference to the program information according to the embodiment of the present invention may include content ID information and or time information. The detailed method of extracting the watermark from the audio frame at the terminal was described with reference to .

The terminal according to the embodiment of the present invention may extract the symbol data from the specific area of each video frame. Thereafter the terminal may process the extracted symbol data to obtain the program information. The symbol data may include the program information which was described in detail with reference to .

As described with reference to the terminal according to the embodiment of the present invention may extract the watermark from the specific area of each video frame. In the embodiment of the present invention the watermark extracted from the video frame includes the channel information and or the program information.

The comparing module according to one embodiment of the present invention may compare the extracted logo data with the logo data stored in the DB of the logo server S . As described above the comparing module may be incorporated in the terminal described with reference to . The detailed method of comparing the extracted logo data with the stored logo data was described with reference to .

The obtaining module according to one embodiment of the present invention may obtain the channel information from the metadata related to the logo data S . As described above the obtaining module may be incorporated in the terminal described with reference to .

More specifically as described with reference to if the images of the extracted logo data and the stored logo data are equal the logo server may search the DB for the channel information of the logo data and send the channel information to the terminal.

In addition the updating module according to the embodiment of the present invention may periodically update the metadata related to the logo data. As described with respect to the the updating module may be incorporated in the terminal or the metadata server. The metadata server according to the embodiment of the present invention may periodically update the metadata stored in the DB of the logo server.

The generating module according to one embodiment of the present invention may generate a request using the channel information S . As described above the generating module may be incorporated in the terminal described with reference to .

More specifically as described with respect to the terminal may generate the request using the channel information received from the logo server. As described with reference to the terminal may send the generated request to the application lookup server through an HTTP protocol.

As described with reference to the generating module may generate the request using the obtained channel information of the logo data and the program information of the watermark included in the audio frame. In addition if the audio frame is not accessible the generating module may generate the request using only the obtained channel information of the logo data or using the symbol data included in the video frame. If the video frame is not accessible the generating module may generate the request using only the program information of the watermark included in the audio frame.

The receiving module according to one embodiment of the present invention may receive the URL address and or IP address using the request S . As described above the receiving module may be incorporated in the terminal described with reference to .

More specifically as described with reference to the terminal may receive the URL address and or IP address of the application searched using the request by the application lookup server . The detailed process of the URL address and or IP address was described with reference to .

The obtaining module according to one embodiment of the present invention may obtain the additional data over the IP network according to the URL address and or IP address S . As described above the obtaining module may be incorporated in the terminal described with reference to .

More specifically as described with reference to the terminal may access the application through the URL address and or IP address to download the application. The downloaded application may be managed by the application server and the additional data may be sent to the terminal through the downloaded application which was described in detail with reference to .

The generating module according to the embodiment of the present invention may generate the digital service signal including the content S . More specifically the content generated according to the embodiment of the present invention may include both video content and audio content.

The generating module may generate the watermark which will be inserted into the audio and or video frame. In addition the generating module may generate the symbol data indicating the program of the content.

The inserting module according to the embodiment of the present invention may insert the logo data into each video frame of the content S . More specifically the logo data may be inserted into the same specific area of each video frame and correspond to the logo image displayed in the specific area of the content.

The inserting module may insert the watermark into the audio and or video frame. More specifically the inserting module may divide the audio and or video frame into subframes and detect a specific subframe into which the watermark will be inserted from the divided subframes. Thereafter the inserting module may insert the watermark to the specific subframe and combine the subframes to generate the audio and or video frame.

In addition the inserting module may insert the symbol data into the specific area of each video frame of the content which is described in detail with reference to .

The transmitting module according to the embodiment of the present invention may transmit the digital service signal S . The transmitting module may transmit the digital service signal including the content into which the watermark and or the logo data are inserted through the inserting module to the ACR service reception apparatus described with reference to . The logo data according to the embodiment of the present invention may be used to receive the channel information by the obtaining module described with reference to . The channel information according to the embodiment of the present invention may be used to receive the URL address and or IP address by the receiving module described with reference to .

According to the present invention it is possible to identify information regarding a broadcast program in real time using ACR technology.

According to the present invention it is possible to receive enhancement data related to a broadcast program using an ACR function so as to have an improved TV viewing experience.

According to the present invention by recognizing information regarding a broadcast program and receiving enhancement data using watermarking technology a TV receiver can perform an ACR function alone without a separate ACR server.

According to the present invention it is possible to profile a watermark according to information included in the watermark and efficiently utilize watermarking even when the amount of information included in the watermark is large.

According to the present invention by combining watermarking and fingerprinting it is possible to efficiently provide an ACR service.

As described above the present invention can be wholly or partially applied to apparatus for dual display.

It will be apparent to those skilled in the art that various modifications and variations can be made in the present invention without departing from the spirit or scope of the invention. Thus it is intended that the present invention cover the modifications and variations of this invention provided they come within the scope of the appended claims and their equivalents.

