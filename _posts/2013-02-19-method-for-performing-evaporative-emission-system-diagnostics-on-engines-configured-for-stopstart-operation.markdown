---

title: Method for performing evaporative emission system diagnostics on engines configured for stop-start operation
abstract: A method of operating an engine in a vehicle equipped with an evaporative emissions system is described. The engine is configured to perform automatically an engine stop and an engine restart when the vehicle stops moving to increase fuel economy of the vehicle. The method includes the steps of determining if an engine stop is allowed while a diagnostic test of the of the evaporative emissions system is being performed if an engine stop is requested, and preventing the engine stop if the engine stop is not allowed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09404463&OS=09404463&RS=09404463
owner: Delphi Technologies, Inc.
number: 09404463
owner_city: Troy
owner_country: US
publication_date: 20130219
---
This disclosure generally relates to a method of operating an engine equipped with an evaporative emissions system wherein the engine is configured to automatically stop when the vehicle stops moving to increase fuel economy of the vehicle and more particularly relates to preventing an engine stop if the engine stop interferes with completing a diagnostic test of the evaporative emission system.

Government regulations require vehicles be configured to perform self diagnostic testing of the evaporative emission EVAP system on the vehicle. Typically vacuum pressure generated by a running engine is used to create certain conditions in the EVAP system so diagnostic testing can be performed. However some engines are configured to automatically stop and restart to increase fuel economy. For example when the vehicle is stopped at a traffic light the engine may automatically stop running. Then when the driver releases the brake pedal or presses the accelerator pedal because the traffic light turned green the engine restarts automatically. This automatic stopping and restarting i.e. stop start operation of the engine may interrupt the diagnostic testing of the EVAP system because the source of vacuum pressure is lost when the engine stops. As such frequent stopping of the engine may make it difficult to perform the required diagnostic testing of the EVAP system if the system relies on a running engine to provide the vacuum pressure necessary for diagnostic testing.

In accordance with one embodiment a method of operating an engine in a vehicle equipped with an evaporative emissions system is provided. The engine is configured to perform automatically an engine stop and an engine restart when the vehicle stops moving to increase fuel economy of the vehicle. The method includes the steps of determining if an engine stop is allowed while a diagnostic test of the of the evaporative emissions system is being performed if an engine stop is requested and preventing the engine stop if the engine stop is not allowed.

Further features and advantages will appear more clearly on a reading of the following detailed description of the preferred embodiment which is given by way of non limiting example only and with reference to the accompanying drawings.

Described herein is a method that overcomes the problems described above by preventing the stopping of the engine to avoid the subsequent loss of vacuum pressure that is needed for certain aspects of evaporative emissions EVAP system diagnostic testing. In general software that incorporates the teaching of the method described herein controls the operation of the engine and execution of the EVAP diagnostic tests. The software typically includes calibration information that can be calibrated to prioritize the execution of the diagnostic tests or prioritize the stopping of the engine to maximize fuel economy. Furthermore as will be described in more detail below software corresponding to the method also typically includes the decision of whether to stop an engine or prevent the engine from stopping so the diagnostic test can be completed. This decision may be based on other calibration values i.e. thresholds and a comparison of those thresholds to the number of times that for example a diagnostic test has been aborted because the engine was allowed to stop. By way of example and not limitation if a diagnostic test is aborted more than five times because the engine was allowed to stop the software i.e. the method may prevent the engine from stopping until the diagnostic tests are complete.

Many of the details illustrated in are commonly found in typical EVAP systems and are only shown for the purpose of explanation and not a limitation. Furthermore it is recognized that the EVAP system may include additional features not shown in . The EVAP system may include a fuel tank for storing fuel to run the engine . While not subscribing to any particular theory fuels such as gasoline evaporate and evaporated gasoline has been deemed an undesirable pollutant. Accordingly a canister is provided to capture and store fuel vapors until a time when the canister can be purged by applying vacuum typically provide by the engine to draw fresh air into the canister and remove fuel vapors out of the canister . The EVAP system includes a purge valve configured to be operated by the controller to regulate purge flow into the engine . It will be recognized by those skilled in the art that the purge flow is also influenced by the amount of vacuum generated by the engine at a purge port illustrated here as being downstream of a throttle plate of a throttle body .

The EVAP system may also include a vent valve operated by the controller to regulate the amount of vent air or filtered fresh air entering the canister . The system also includes a fuel fill inlet so the fuel tank can be refilled and a fuel cap that when properly installed seals the fuel tank so fuel vapors cannot escape to the environment via the fuel fill inlet . In the description that follows it is assumed that the fuel cap has been properly installed. The EVAP system may also include a vacuum sensor configured to determine a vacuum value in the fuel tank and communicate the vacuum value to the controller .

By way of example and not limitation the purge valve and the vent valve may both be operated to an open state so a vacuum pressure from the engine can be used to purge fuel or fuel vapors from the canister. Alternatively the vent valve may be operated to a closed state while the purge valve is operated to an open state and the engine is generating a vacuum pressure so that a fuel tank pressure can be established in the canister and in the fuel tank . Then once a predetermined fuel tank pressure is established in the fuel tank both the vent valve and the purge valve may be operated to a closed state and the fuel tank pressure indicated by the vacuum value should persist for at least a brief period. As will become apparent in the description that follows the rate at which the vacuum value changes or the amount that the vacuum value changes over a time interval after the fuel tank pressure is established and both valves are closed is indicative of a leak size of a leak somewhere in the EVAP system .

It should be appreciated that the entire suite of tests listed above needs to be performed in order to determine which aspect or feature of the EVAP system has most like developed a leak or is inoperative. It should also be appreciated that prior EVAP system diagnostic tests would abort the sequence of tests if the engine was stopped or turned off during the sequence of tests. As such the method of operating the engine and conducting the diagnostic tests described herein is an improvement over the prior art. In particular momentary engine off events where for example the time duration between an engine stop and a subsequent engine restart is less than two minutes can be tolerated by the method and system described herein.

Step WARM LEAK TEST ENABLED may include determining if the operating conditions of the vehicle or the engine are suitable for performing a warm leak test. By way of example and not limitation the warm leak test may be enabled YES if sensor input parameters indicate that the vehicle environmental conditions provide for a state of higher fuel volatility and or insufficient engine soaking i.e. engine at rest and the warm leak test may not be enabled NO if these condition are not met.

Step PURGE VALVE LEAK TEST ENABLED may include determining if the operating conditions of the vehicle or the engine are suitable for performing a purge valve leak test. By way of example and not limitation the purge valve leak test may be enabled YES if sensor input parameters indicate that the vehicle environmental conditions provide for a state of lower fuel volatility and or sufficient engine soaking i.e. engine at rest and the purge valve leak test may not be enabled NO if these condition are not met.

The purge valve leak test may be performed to detect a leak across the purge valve by detecting an increase in vacuum value i.e. a decrease in absolute pressure indicated by the vacuum sensor while the engine is running and both the purge valve and the vent valve are operated to the closed state by the ECM. This test is performed because a leak across the purge valve can allow hydrocarbons from the tank to leak to the atmosphere when the engine is off. Because the EVAP system is supposed to be sealed when the purge valve and the vent valve are operated to the closed state an increase in the vacuum value i.e. a decrease in the absolute pressure constitutes a leakage in the system. The test is preferably calibrated to detect a one half millimeter 0.5 mm leak path through the purge valve . By performing the other tests described herein a leak path through the purge valve can be isolated as the most likely fault with the EVAP system . It is preferable that the engine run throughout this entire purge valve leak test which typically has a test duration of 30 seconds. However if an engine stop is forthcoming the purge valve leak test may be interrupted prior to the engine stop and then the purge valve leak test may be resumed following an engine restart if the engine restart occurs within for example two minutes following the engine stop.

Step COLD LEAK TEST ENABLED may include determining if the operating conditions of the vehicle or the engine are suitable for performing a cold leak test. By way of example and not limitation the cold leak test may be enabled YES if sensor input parameters indicate that the vehicle environmental conditions provide for a state of lower fuel volatility and or sufficient engine soaking i.e. engine at rest and the purge valve leak test has completed and the cold leak test may not be enabled NO if these conditions are not met. The cold leak test may be partitioned into several portions such as one or more of a large leak test a small leak test and a very small leak test. By way of example the large leak test may be performed to determine if EVAP system has a leak corresponding to a hole greater than one millimeter hole 1.0 mm leak . Similarly the small leak test may be performed to detect leaks corresponding to a hole size between one millimeter and one half millimeter 1.0 mm to 0.5 mm leak and the very small leak test may be performed to detect a hole smaller than one half millimeter 

Step RESTRICTED PATH TEST ENABLED may include determining if the operating conditions of the vehicle or the engine are suitable for performing a restricted path leak test. By way of example and not limitation the restricted path leak test may be enabled YES if sensor input parameters indicate that the vehicle environmental conditions provide for a state of lower fuel volatility and or sufficient engine soaking engine at rest and the cold leak test has completed and the restricted path leak test may not be enabled NO if these conditions are not met.

Referring now to if the response of step WARM LEAK TEST ENABLED is YES then the method proceeds to step ENGINE STOP PRIORITIZED . Otherwise the method proceeds to step . To complete step the controller may examine previously stored calibration variables to determine if the calibration indicates that an engine stop maximizes fuel economy is prioritized or preferred over preventing an engine stop improves the chance that the warm leak test will be completed i.e. not interrupted by an engine stop . If YES calibration indicates that allowing an engine stop is preferred the method proceeds to step ENGINE STOP REQUESTED .

If an engine stop has not been requested NO path from step then the warm leak test is performed by step PERFORM WARM LEAK TEST. However if an engine stop has been requested or an engine stop is requested after the warm leak test has been started the method follows the YES path from step to step .

Step WARM TEST ABORT COUNTER FIRST THRESHOLD determines if prior attempts to complete the warm leak test have been aborted because an engine stop was allowed. If too many prior attempts have aborted i.e. more attempts than the first threshold have been made the YES logic path is taken to step PREVENT ENGINE STOP UNTIL WARM LEAK TEST COMPLETE. This allows the warm leak test to be completed before allowing the engine to stop. By way of example and not limitation a suitable value for the first threshold is five and so in this non limiting example five engine stops will be allowed before an engine stop is prevented. This allows for the fuel economy increases provided for by operating the engine in a stop start fashion to be realized until it is deemed that completion of the warm leak test is critical to assure compliance with government regulations for example. Accordingly the method provides for incrementing a diagnostic abort counter each time the diagnostic test is aborted due to engine stop during a drive cycle if a calibration option designates that an engine stop is prioritized wherein the engine stop is not allowed to interrupt the diagnostic test for the rest of the driving cycle if the diagnostic abort counter is greater than a threshold.

Accordingly a method of operating an engine in a vehicle equipped with an evaporative emissions system the EVAP system is provided where the engine is configured to perform automatically an engine stop and an engine restart when for example the vehicle stops moving momentarily to increase fuel economy of the vehicle. This method includes the steps of determining if an engine stop is allowed while a diagnostic test of the of the evaporative emissions system is being performed if an engine stop is requested and preventing the engine stop if the engine stop is not allowed because for example it has been determined that keeping the engine running so the diagnostic test can be completed is critical. As such in this example the engine stop is not allowed if a diagnostic abort counter is greater than a threshold.

If the NO path from step is taken the method proceeds to step INCREMENT WARM LEAK TEST ABORT COUNTER where for example the controller increments a counter register in memory to keep track of the number of times in the present driving cycle the warm leak test has been aborted because an engine stop was allowed. Accordingly the method provides for a diagnostic abort counter that is incremented each time a diagnostic test is aborted during a drive cycle.

Following the incrementing of the warm leak test abort counter in step the method proceeds to step INTERRUPT WARM LEAK TEST ALLOW ENGINE STOP RESUME WARM LEAK TEST AFTER ENGINE RESTART where the warm leak test may be interrupted or paused and then resumed when the engine restarts. Accordingly the method provides for interrupting the diagnostic test an engine stop if the diagnostic abort counter is not greater than a threshold and an engine stop is requested and resuming the diagnostic test after an engine restart. Step may also include a timing operation that prevents the resuming of the warm leak test if the test is interrupted for an excessive amount of time more than an hour for example. Accordingly the method provides for interrupting the warm leak test prior to the engine stop then allowing an engine stop and then resuming the warm leak test following an engine restart during the warm leak test.

Referring back to step if an engine stop is not prioritized NO the method proceeds to step ENGINE STOP REQUESTED which is similar to step but shown as a separate step because of the distinct logic paths that follow. If an engine stop has not been requested NO path from step then the warm leak test is performed by step . However if an engine stop has been requested or an engine stop is requested after the warm leak test has been started the method follows the YES path from step to step .

Step ENGINE STOP COUNTER SECOND THRESHOLD determines if prior attempts to complete the warm leak test have been aborted because an engine stop was allowed. If too many prior attempts have aborted i.e. more engine stops than the second threshold have occurred the YES logic path is taken to step DISABLE WARM LEAK TEST FOR REMAINDER OF DRIVING CYCLE AND ALLOW ENGING STOP. This avoids further attempts to complete the warm leak test to be completed before allowing the engine to stop. By way of example and not limitation a suitable value for the second threshold is five and so in this non limiting example five aborted attempts to complete a warm leak test caused by engine stops will be allowed before further attempts to complete a warm leak test are prohibited. Accordingly the method provides for disabling the diagnostic test for the remainder of the driving cycle if the diagnostic abort counter is greater than a threshold. Furthermore the method provides for incrementing an engine stop abort counter each time an engine stop is prevented during the diagnostic test if a calibration option designates that an engine stop is not prioritized and disabling the diagnostic tests for the rest of the driving cycle if the engine stop abort counter is greater than a threshold.

If the result of step is NO then the logic proceeds to step INCREMENT ENGINE STOP COUNTER where for example the controller increments a counter register in memory to keep track of the number of times in the present driving cycle an engine stop was allowed while the warm leak test was in progress.

Referring now to if the response of step PURGE VALVE LEAK TEST ENABLED is YES then the method proceeds to step ENGINE STOP PRIORITIZED . Otherwise the method proceeds to step . To complete step the controller may examine previously stored calibration variables to determine if the calibration indicates that an engine stop maximizes fuel economy is prioritized or preferred over preventing an engine stop improves the chance that the warm leak test will be completed i.e. not interrupted by an engine stop . If YES calibration indicates that allowing an engine stop is preferred the method proceeds to step ENGINE STOP REQUESTED .

If an engine stop has not been requested NO path from step then the purge valve leak test is performed by step PERFORM PURGE VALVE LEAK TEST. However if an engine stop has been requested or an engine stop is requested after the purge valve leak test has been started the method follows the YES path from step to step .

Step PURGE VALVE LEAK TEST ABORT COUNTER THIRD THRESHOLD determines if prior attempts to complete the purge valve leak test have been aborted because an engine stop was allowed. If too many prior attempts have aborted i.e. more attempts than the third threshold have been made the YES logic path is taken to step PREVENT ENGINE STOP UNTIL PURGE VALVE LEAK TEST COMPLETE. This allows the purge valve leak test to be completed before allowing the engine to stop. By way of example and not limitation a suitable value for the third threshold is five and so in this non limiting example five engine stops will be allowed before an engine stop is prevented. This allows for the fuel economy increases provided for by operating the engine in a stop start fashion to be realized until it is deemed that completion of the warm leak test is critical to assure compliance with government regulations for example.

If the NO path from step is taken the method proceeds to step INCREMENT PURGE VALVE LEAK TEST ABORT COUNTER where for example the controller increments a counter register in memory to keep track of the number of times in the present driving cycle the purge valve leak test has been aborted because an engine stop was allowed.

Following the incrementing of the purge valve leak test abort counter in step the method proceeds to step INTERRUPT PURGE VALVE LEAK TEST ALLOW ENGINE STOP RESUME PURGE VALVE LEAK TEST AFTER ENGINE RESTART where the purge valve leak test may be interrupted or paused and then resumed when the engine restarts.

Referring back to step if an engine stop is not prioritized NO the method proceeds to step ENGINE STOP REQUESTED which is similar to step but shown as a separate step because of the distinct logic paths that follow. If an engine stop has not been requested NO path from step then the purge valve leak test is performed by step PERFORM PURGE VALVE LEAK TEST. However if an engine stop has been requested or an engine stop is requested after the purge valve leak test has been started the method follows the YES path from step to step .

Step ENGINE STOP COUNTER FOURTH THRESHOLD determines if prior attempts to complete the purge valve leak test have been aborted because an engine stop was allowed. If too many prior attempts have aborted i.e. more engine stops than the second threshold have occurred the YES logic path is taken to step DISABLE PURGE VALVE LEAK TEST FOR REMAINDER OF DRIVING CYCLE AND ALLOW ENGING STOP. This avoids further attempts to complete the purge valve leak test before allowing the engine to stop. By way of example and not limitation a suitable value for the fourth threshold is five and so in this non limiting example five aborted attempts to complete a purge valve leak test caused by engine stops will be allowed before further attempts to complete the purge valve leak test are prohibited.

If the result of step is NO then the logic proceeds to step INCREMENT ENGINE STOP COUNTER where for example the controller increments a counter register in memory to keep track of the number of times in the present driving cycle an engine stop was allowed while the purge valve leak test was in progress.

Referring now to if the response of step COLD LEAK TEST ENABLED is YES then the method proceeds to step ENGINE STOP PRIORITIZED . Otherwise the method proceeds to step . To complete step the controller may examine previously stored calibration variables to determine if the calibration indicates that an engine stop maximizes fuel economy is prioritized or preferred over preventing an engine stop improves the chance that the cold leak test will be completed i.e. not interrupted by an engine stop . If YES calibration indicates that allowing an engine stop is preferred the method proceeds to step ENGINE STOP REQUESTED .

If an engine stop has not been requested NO path from step then the cold leak test is performed by step PERFORM COLD LEAK TEST. However if an engine stop has been requested or an engine stop is requested after the cold leak test has been started the method follows the YES path from step to step .

Step COLD TEST ABORT COUNTER FIFTH THRESHOLD determines if prior attempts to complete the cold leak test have been aborted because an engine stop was allowed. If too many prior attempts have aborted i.e. more attempts than the fifth threshold have been made the YES logic path is taken to step IS TANK VACUUM DRAW COMPLETE If YES then the method proceeds to step . If NO the method proceeds to step PREVENT ENGING STOP UNTIL TANK VACUUM DRAW COMPLETE and then proceeds to step . This allows the portion of the cold leak test that relies on engine vacuum to complete before allowing the engine to stop. By way of example and not limitation a suitable value for the fifth threshold is five and so in this non limiting example five engine stops will be allowed before an engine stop is prevented. This allows for the fuel economy increases provided for by operating the engine in a stop start fashion to be realized until it is deemed that completion of the cold leak test is critical to assure compliance with government regulations for example.

If the YES path from step is taken the method proceeds to step COLD LEAK TEST ABORT COUNTER SIXTH THRESHOLD . If YES the method proceeds to step INCREMENT PURGE DUTY CYCLE AND INCREASE DESIRED TEST VACUUM FOR THE NEXT EVAP SYSTEM MONITORING CYCLE. Increasing the purge duty cycle i.e. the duty cycle of a control signal applied to the purge valve will generally increase the purge flow and so implement a more aggressive strategy for completing the cold leak test by increasing the rate at which the tank pressure is reduced. Increasing the desired test vacuum also serves to implement a more aggressive strategy by allowing the various sub tests of the cold leak test e.g. large leak test small leak test and very small leak test to be completed more quickly. By way of example and not limitation a suitable value for the sixth threshold is three and so in this non limiting example three engine stops will be allowed before a more aggressive test strategy is implemented.

Accordingly the method provides for increasing a purge duty cycle if the diagnostic abort counter is greater than a threshold. Furthermore the method provides for increasing a desired tank vacuum value prior a subsequent diagnostic test and increasing a purge duty cycle during the subsequent diagnostic test if a cold leak test abort counter is greater than a first cold test threshold. Increasing the purge duty cycle may include applying a maximum purge duty cycle to reach the desired tank vacuum level faster. Also the increased purge duty cycle is applied for the remainder of the driving cycle if the engine stop abort counter is greater than a second cold test threshold.

Furthermore during the cold leak test the method provides for increasing a desired tank vacuum value prior a subsequent diagnostic test and increasing a purge duty cycle during the subsequent diagnostic test if a cold leak test abort counter is greater than a first cold test threshold. Increasing the purge duty cycle may include applying maximum purge duty cycle to reach the desired tank vacuum level faster wherein the increased purge duty cycle is applied for the remainder of the driving cycle if the engine stop abort counter is greater than a second cold test threshold.

If the NO path from step is taken or if step is executed the method proceeds to step INCREMENT COLD LEAK TEST ABORT COUNTER where for example the controller increments a counter register in memory to keep track of the number of times in the present driving cycle the cold leak test has been aborted because an engine stop was allowed. Following the incrementing of the cold leak test abort counter in step the method proceeds to step INTERRUPT COLD LEAK TEST ALLOW ENGINE STOP RESUME COLD LEAK TEST AFTER ENGINE RESTART where the cold leak test may be interrupted or paused and then resumed when the engine restarts.

Referring back to step if an engine stop is not prioritized NO the method proceeds to step ENGINE STOP REQUESTED which is similar to step but shown as a separate step because of the distinct logic paths that follow. If an engine stop has not been requested NO path from step then the cold leak test is performed by step . However if an engine stop has been requested or an engine stop is requested after the warm leak test has been started the method follows the YES path from step to step .

Step ENGINE STOP COUNTER SEVENTH THRESHOLD determines if prior attempts to complete the cold leak test have been aborted because an engine stop was allowed. If too many prior attempts have aborted i.e. more engine stops than the seventh threshold have occurred the YES logic path is taken to step DISABLE COLD LEAK TEST FOR REMAINDER OF DRIVING CYCLE AND ALLOW ENGING STOP. This avoids further attempts to complete the cold leak test before allowing the engine to stop. By way of example and not limitation a suitable value for the second threshold is five and so in this non limiting example five aborted attempts to complete a cold leak test caused by engine stops will be allowed before further attempts to complete a warm leak test are prohibited.

If the result of step is NO then the logic proceeds to step ENGINE STOP COUNTER EIGHTH THRESHOLD . If YES the method proceeds to step INCREMENT PURGE VALVE DUTY CYCLE and then to step INCREMENT ENGINE STOP COUNTER followed by step . If NO the method proceeds from step directly to step .

Referring now to if the response of step RESTRICTED VENT PATH TEST ENABLED is YES then the method proceeds to step ENGINE STOP PRIORITIZED . Otherwise the method proceeds to step ALLOW ENGINE STOP. To complete step the controller may examine previously stored calibration variables to determine if the calibration indicates that an engine stop maximizes fuel economy is prioritized or preferred over preventing an engine stop improves the chance that the restricted vent path test will be completed i.e. not interrupted by an engine stop . If YES calibration indicates that allowing an engine stop is preferred the method proceeds to step ENGINE STOP REQUESTED .

If an engine stop has not been requested NO path from step then the restricted vent path test is performed by step PERFORM RESTRICTED VENT PATH TEST. However if an engine stop has been requested or an engine stop is requested after the restricted vent path test has been started the method follows the YES path from step to step .

Step RESTRICTED VENT PATH TEST ABORT COUNTER NINTH THRESHOLD determines if prior attempts to complete the restricted vent path test have been aborted because an engine stop was allowed. If too many prior attempts have aborted i.e. more attempts than the first threshold have been made the YES logic path is taken to step PREVENT ENGINE STOP UNTIL RESTRICTED VENT PATH TEST COMPLETE. This allows the restricted vent path test to be completed before allowing the engine to stop. By way of example and not limitation a suitable value for the ninth threshold is five and so in this non limiting example five engine stops will be allowed before an engine stop is prevented. This allows for the fuel economy increases provided for by operating the engine in a stop start fashion to be realized until it is deemed that completion of the restricted vent path test is critical to assure compliance with government regulations for example.

If the NO path from step is taken the method proceeds to step INCREMENT RESTRICTED VENT PATH TEST ABORT COUNTER where for example the controller increments a counter register in memory to keep track of the number of times in the present driving cycle the restricted vent path test has been aborted because an engine stop was allowed.

Following the incrementing of the restricted vent path test abort counter in step the method proceeds to step ALLOW ENGINE STOP AND CONTINUE RESTRICTED VENT PATH TEST AFTER ENGINE STOP AND AFTER ENGINE RESTART because the restricted vent path test method allows for disrupted monitoring periods where the test can continue even if the engine is stopped. Accordingly during restricted vent path testing the method provides for interrupting the restricted vent path test prior to the engine stop then allowing an engine stop and then resuming the warm leak test following an engine restart.

Referring back to step if an engine stop is not prioritized NO the method proceeds to step ENGINE STOP REQUESTED which is similar to step but shown as a separate step because of the distinct logic paths that follow. If an engine stop has not been requested NO path from step then the restricted vent path test is performed by step . However if an engine stop has been requested or an engine stop is requested after the restricted vent path test has been started the method follows the YES path from step to step .

Step ENGINE STOP COUNTER TENTH THRESHOLD determines if prior attempts to complete the restricted vent path test have been aborted because an engine stop was allowed. If too many prior attempts have aborted i.e. more engine stops than the second threshold have occurred the YES logic path is taken to step DISABLE RESTRICTED VENT PATH TEST FOR REMAINDER OF DRIVING CYCLE AND ALLOW ENGING STOP. This avoids further attempts to complete the restricted vent path test before allowing the engine to stop. By way of example and not limitation a suitable value for the tenth threshold is five and so in this non limiting example five aborted attempts to complete a restricted vent path test caused by engine stops will be allowed before further attempts to complete a restricted vent path test are prohibited.

If the result of step is NO then the logic proceeds to step INCREMENT ENGINE STOP COUNTER where for example the controller increments a counter register in memory to keep track of the number of times in the present driving cycle an engine stop was allowed while the restricted vent path test was in progress.

Accordingly a method of operating an automatic stop start engine in a vehicle equipped with an evaporative emissions system is provided where the automatic stopping of the engine may be prevented if an EVAP diagnostic test is being conducted. This allows engine calibrators the option to balance fuel economy and regulation compliance.

While this invention has been described in terms of the preferred embodiments thereof it is not intended to be so limited but rather only to the extent set forth in the claims that follow.

