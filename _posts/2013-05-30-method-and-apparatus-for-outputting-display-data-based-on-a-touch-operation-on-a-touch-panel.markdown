---

title: Method and apparatus for outputting display data based on a touch operation on a touch panel
abstract: An apparatus includes a touch panel display including one or more sensors for detecting an input operation by an instruction object. The apparatus includes circuitry that acquires one or more coordinates corresponding to one or more positions of the instruction object on the touch panel display, and determines whether a current condition of the instruction object during the input operation is an up condition or a down condition. The circuitry determines, when the current condition is the down condition, based on one or more previous conditions of the instruction object stored in a memory, whether the previous condition immediately preceding the current condition is the up condition and if so, converts the immediately preceding previous condition to the up condition. The circuitry controls the touch panel display to output a continuous line corresponding to the acquired one or more coordinates at which the instruction object is in the down condition.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09377943&OS=09377943&RS=09377943
owner: Sony Mobile Communications Inc.
number: 09377943
owner_city: Tokyo
owner_country: JP
publication_date: 20130530
---
The present disclosure relates to a method and apparatus for displaying data. In particular the present disclosure relates to a method and apparatus for displaying data based on aspects of a touch operation performed on a touch panel.

Recent mobile devices utilize touch panel displays for allowing a user to perform input operations using an instruction object such as a finger or a stylus. In some devices a user may draw for example a character on the touch panel display using the finger and or stylus. The touch panel may detect changes in position of the instruction object in contact with an operation surface of the touch panel display for example by a change in sensor output values such as electrostatic capacitance. In contrast with touch operations allowing users to perform individual tap operations for selecting icons characters on a virtual keyboard etc. these touch screen displays allow users to input handwritten characters numbers etc. by moving the instruction object on the operation surface of the touch panel display in a corresponding shape of the desired character number etc. When an instruction object such as a stylus is moved to form handwritten characters the contact state of the instruction object such as a stylus on the operation surface of the touch panel display may become unstable which may result in interruptions of the displayed characters. While these handwritten character interruptions on touch panel displays may occur when using a finger as an instruction object such instability becomes especially prevalent when relatively thinner instruction objects such as a stylus are used when performing such input operations.

In one aspect of the present disclosure an apparatus includes a touch panel display having one or more sensors for detecting an input operation by an instruction object on an operation surface of the touch panel display. The apparatus may include circuitry configured to acquire from the one or more sensors one or more coordinates corresponding to one or more positions of the instruction object on the operation surface of the touch panel display during the input operation. The circuitry may determine as a first determination based on an output from the one or more sensors in response to detecting the input operation a current condition of the instruction object during the input operation the current condition being an up condition or a down condition. The circuitry may determine as a second determination when the current condition of the instruction object is the down condition based on one or more previous conditions of the instruction object stored in a memory whether the previous condition immediately preceding the current condition is the up condition. The circuitry may convert when the previous condition immediately preceding the current condition is the up condition the immediately preceding previous condition to the down condition and update the one or more previous conditions stored in the memory based on the conversion result. The circuitry may control based on the one or more acquired coordinates and the one or more previous conditions stored in the memory the touch panel display to output a continuous line in the interface corresponding to the acquired one or more coordinates at which the instruction object is determined to be in the down condition. The down condition may correspond to a state in which the instruction object is within a predetermined range from the operation surface of the touch panel display and the up condition may correspond to a state in which the instruction object is outside the predetermined range from the operation surface of the touch panel display. A shape of the continuous line may correspond to a movement of the instruction object on the operation surface of the touch panel display during the input operation.

The foregoing general description of the illustrative embodiments and the following detailed description thereof are merely exemplary aspects of the teachings of this disclosure and are not restrictive.

Referring now to the drawings wherein like reference numerals designate identical or corresponding parts throughout the several views.

The exemplary mobile device of includes a controller a wireless communication processor connected to an antenna a speaker a microphone and a voice processor .

The controller may include one or more Central Processing Units CPUs and may control each element in the mobile device to perform features related to communication control audio signal processing control for the audio signal processing image processing and control and other kinds signal processing. The controller may perform these features by executing instructions stored in a memory or a non transitory computer readable medium having instructions stored therein.

The antenna transmits receives electromagnetic wave signals between base stations for performing radio based communication such as the various forms of cellular telephone communication.

The wireless communication processor controls the communication performed between the mobile device and other external devices. For example the wireless communication processor may control communication between base stations for cellular phone communication.

The microphone detects surrounding audio and converts the detected audio into an audio signal. The audio signal may then be output to the voice processor for further processing.

The voice processor demodulates and or decodes the audio data read from the memory or audio data received by the wireless communication processor and or a near field wireless communication processor . Additionally the voice processor may decode audio signals obtained by the microphone .

The exemplary mobile device may also include a display a touch panel section an operation key the memory and the near field communication processor connected to an antenna .

The display may be a Liquid Crystal Display LCD an organic electroluminescence display panel or another known display screen technology. In addition to displaying an output corresponding to a movement of an instruction object during a touch operation the display may display operational inputs such as numbers or icons which may be used for control of the mobile device . The display may additionally display a graphical user interface with which a user may control aspects of the mobile device . Further the display may display characters and images received by the mobile device and or stored in the memory . For example the mobile device may access a network such as the Internet and display text and or images transmitted from a Web server.

The touch panel section may include a physical touch panel display screen and a touch panel driver. The touch panel section may include one or more touch sensors for detecting an input operation on an operation surface of touch panel display screen. Used herein the phrasing touch operation refers to an input operation performed by touching an operation surface of the touch panel display with an instruction object such as a finger or stylus type instrument. In the case where a stylus or the like is used in a touch operation the stylus may include a conductive material at least at the tip of the stylus such that the sensors included in the touch panel section may detect when the stylus approaches contacts the operation surface of the touch panel display similar to the case in which a finger is used for the touch operation .

In certain aspects of the present disclosure the touch panel display screen may be disposed adjacent to the display e.g. laminated or may be formed integrally with the display . The touch panel section and the display may be surrounded by a protective casing which may also enclose the other elements included in the mobile device .

For simplicity examples discussed in the present disclosure often assume the touch panel section is a capacitance type touch panel technology however it should be appreciated that aspects of the present disclosure may easily be applied to other touch panel types e.g. resistance type touch panels with alternate structures. In certain aspects of the present disclosure the touch panel may include transparent electrode touch sensors arranged in the X Y direction on the surface of transparent sensor glass.

The touch panel driver may be included in the touch panel section for control processing related to the touch panel section such as scanning control. For example the touch panel driver may scan each sensor in an electrostatic capacitance transparent electrode pattern in the X direction and Y direction and detect the electrostatic capacitance value of each sensor to determine when a touch operation is performed. The touch panel driver may output a coordinate and corresponding electrostatic capacitance value for each sensor. The touch panel driver may also output a sensor identifier that may be mapped to a coordinate on the touch panel display screen. Additionally the touch panel driver and touch panel sensors may detect when an instruction object such as a finger is within a predetermined distance from an operation surface of the touch panel display screen. That is the instruction object does not necessarily need to directly contact the operation surface of the touch panel display screen for touch sensors to detect the instruction object and perform processing described herein. Signals may be transmitted by the touch panel driver e.g. in response to a detection of a touch operation in response to a query from another element based on timed data exchange etc.

The operation key may include one or more buttons or similar external control elements which may generate an operation signal based on a detected input by the user. In addition to outputs from the touch panel section these operation signals may be supplied to the controller for performing related processing and control. In certain aspects of the present disclosure the processing and or functions associated with external buttons and the like may be performed by the controller in response to an input operation on the touch panel section display screen rather than the external button key etc. In this way external buttons on the mobile device may be eliminated in lieu of performing inputs via touch operations thereby improving water tightness.

The memory may include e.g. Read Only Memory ROM Random Access Memory RAM or a memory array comprised of a combination of volatile and non volatile memory units. The memory may be utilized as working memory by the controller while executing the processing and algorithms of the present disclosure. Additionally the memory may be used for long term storage e.g. of images and information related thereto.

The antenna may transmit receive electromagnetic wave signals to from other external apparatuses and the near field communication processor may control the wireless communication performed between the other external apparatuses. Bluetooth Wi Fi and near field communication NFC are non limiting examples of wireless communication protocols that may be used for inter device communication.

The mobile device is equipped with a control line CL and data line DL as internal communication bus lines. Control data to from the controller may be transmitted through the control line CL. The data line DL may be used for transmission of voice data display data etc.

Next illustrate non limiting examples of handwritten character strings displayed on a touch panel device in response to a corresponding motion of an instruction object in the shape of the character strings on an operation surface of a touch panel display. For the sake of simplicity external elements that may typically be included in the mobile device such as protective casing have been omitted from the examples of .

Referring first to illustrates a handwritten text string Hello Stylus displayed on the display . As shown in the figure numerous breaks disconnects can be seen in the lines forming the displayed character string. The breaks disconnects in the displayed lines may occur e.g. when the instruction object used in the input operation momentarily breaks contact from the operation surface of the touch panel . Area in highlights portions of the character s of Stylus that are disconnected due to unstable intermittent contact by the instruction object with the operation surface of the touch panel . Disconnected lines displayed on the display make the character strings more difficult to read and unrepresentative of actual handwritten text thereby decreasing user friendliness of such a device.

In contrast with the example of illustrates a corresponding handwritten character string to the string shown in however the disconnects in the lines forming the displayed character string such as those breaks shown in the area in are not present in the example of . The improvement in the displayed character string shown in may for example result from the instruction object e.g. a finger or stylus used during the input operation maintaining constant contact with the operation surface of the touch panel during the touch operation. However maintaining constant contact with an instruction object on the operation surface of the touch panel may prove difficult especially for handheld mobile devices in which case aspects of the present disclosure may be applied such that display performance is increased by controlling the touch panel display such that the characters are respectively output as a continuous line. That is aspects of the present disclosure may prevent unintentional breaks in a continuous line forming e.g. a handwritten character.

Next illustrate touch panel sensor outputs resultant from contacting the operation surface of a touch panel display with a user s finger and a stylus respectively. As a non limiting example the sensor outputs corresponding to may be electrostatic capacitance values output by sensors included in an electrostatic capacitance type touch panel. The sensor outputs illustrated in are shown in three dimensions such that both the sensor coordinate and corresponding signal level magnitude of an input operation with each respective instruction object may be viewed. Locations in the graphs shown in at which the sensor output values are highest correspond to the locations on the operation surface of the touch panel device that the instruction object i.e. the user s finger and stylus respectively is contacting the operation surface of the touch panel. Other locations of the three dimensionally displayed graph at which sensor output values are not peaking may correspond to low level noise outputs detected by surrounding sensors. For the purposes of this example assume all conditions are the same with the exception of the type of instruction object used during the touch operation.

By comparing the sensor output graphs shown in it can be shown that in the case in which a stylus is used to perform an input operation the sensor output magnitude peak is low compared to the case in which a finger is used to perform the input operation. Moreover in the case in which a finger is used to perform the input operation the size area of the location where the sensor output value becomes high is relatively large compared to the case in which a stylus is used for performing the input operation. In contrast the size of the location where the sensor output value becomes high is comparatively narrow in the case in which a stylus is used when performing the input operation. In certain aspects of the present disclosure the controller may distinguish between touch operations performed with a finger or a stylus based on the peak value of the sensor output resulting from the touch operation and or based on the size area of the location where the sensor output values become high. In certain aspects of the present disclosure the controller may change a detection state and or interruption condition for touch operations based on a distinction between whether a finger and a stylus is used for a touch operation. It should be noted however that the distinction between a finger and another instruction object such as a stylus is not necessary for the purposes of the present disclosure.

Next illustrates a non limiting example of a block diagram showing an exemplary structure of the controller . The exemplary structure illustrated in shows a case in which the controller changes the display output of the display based on detected features of a touch operation. illustrates the touch panel section as including the touch panel and the touch driver . The touch driver may drive the touch panel for detecting a position coordinate of a touch operation performed on the operation surface of the touch panel . Data corresponding to the touch position coordinate detected by the touch driver during the touch operation may be supplied to the controller for further processing.

The framework processor may acquire data corresponding to a determination as to the presence or absence of a touch operation based on an input from the touch driver . The framework processor may also acquire data corresponding to a coordinate position of the touch panel that is touched during the touch operation. Coordinate positions may be represented as a time series including corresponding sensor magnitudes which provides for temporal analysis of sensor outputs. Data representing the presence or absence of a touch may be classified as down data in the case in which the touch panel is in a touched state and up data when the touch panel is in a state in which it is not being touched by an instruction object.

The framework processor may read the application A through an application programming interface API when executing the application A. Image data acquired generated when the framework processor executes the application A may be supplied to a frame buffer . The image data may correspond to free form data entry such as the character string entered in the example of . The display may perform a display process of outputting the image data that accumulates in the frame buffer .

Next illustrates another non limiting example of a block diagram of a structure for the controller . illustrates an exemplary case in which multiple applications may be executed in response to a determination as to whether filters should be applied when outputting image data corresponding to a touch operation. In the exemplary case of the controller may execute a first application B when a determination is made that an input operation is being performed with a stylus or a similar type instruction object and subsequently update the display based on the touch operation using the stylus. In this case the application B may enable the stylus filter during its processing. A second application C may be executed by the controller when a determination is made that a touch operation is being performed using a stylus however the second application C may perform its processing while disabling the use of the stylus filter . As non limiting examples of applications for using the first application B and the second application C the first application B may be executed when outputting a hand drawn character number figure etc. based on a change of touch position determined by the controller and the second application C may be executed when the instruction object is used during tap operations to select icons or the like displayed on the display .

Next illustrates a non limiting example of an algorithmic flowchart for executing an application based on a detection of a touch operation on a touch panel display. For example may illustrate a case in which the controller executes the application A or the application B discussed above with respect to respectively.

At step S the controller waits until an interruption signal is received from the touch panel section . The interruption signal may include or correspond to a coordinate position corresponding to a position of the operation surface of the touch panel at which a touch was detected. In certain aspects of the present disclosure the interruption signal may include the detected sensor value magnitude and corresponding coordinate position for each sensor or a subset thereof included in the touch panel . For example sensor value magnitudes and corresponding coordinates such as those illustrated in the exemplary graphs of may be included in the interruption signal.

At step S the controller determines a touch area size based on the sensor value output magnitude and or coordinates received in the interruption signal at step S. The touch area size may correspond to an aggregated area of touch coordinates having sensor output magnitudes above a predetermined threshold value e.g. a predetermined range corresponding to detected background noise .

At step S the controller acquires the sensor output signal level detected by the touch panel section and determines the change of the sensor level values. As a non limiting example in the case in which an electrostatic capacitance type device is used in the touch panel section the controller may acquire the electrostatic capacitance values detected by the touch panel section and determine an electrostatic capacitance potential change at step S.

At step S the controller determines based on the received sensor value magnitudes and coordinate positions whether the input operation was performed with a finger or a relatively smaller instruction object such as a stylus type instruction object. If the controller determines that a stylus has performed the input operation the controller at step S changes the conditions for performing an interruption process to an event driven condition. Exemplary conditions for performing an interruption process that may be changed in step S may include a condition in which the coordinate position where a touch operation is detected has been changed or a condition in which a sensor output magnitude value is changed by at least a predetermined value.

At step S the controller sets a threshold value for detecting a touch operation as a threshold value corresponding to performing a touch operation with a finger. The threshold value of step S may correspond to a typical sensor output magnitude detected for touch operations performed with a finger on a given sensor type. In addition to the threshold value the controller at step S may also adjust a baseline value for detection to correspond with a finger based input. The baseline value may correspond to a sensitivity setting. For example if the baseline value is increased the controller may be more sensitive to input detection. Conversely if the baseline value is decreased the controller may be less responsive to input detection.

When sensor output values are higher than the threshold values set at step S the controller at step S performs a predetermined function corresponding to the coordinate position at which a touch operation is detected. For example the controller may execute a predetermined function corresponding to displaying lines on the display in response to corresponding movements of the finger on the operation surface of the touch panel e.g. the display output in .

If the controller determines at step S that the touch operation was performed with a stylus type instruction object the controller at step S changes the condition at which an interruption process is performed to a time driven condition. As a non limiting example the time driven condition set at step S may correspond to a periodic sampling frequency e.g. a 60 Hz cycle . That is in certain aspects of the present disclosure the condition at which the interruption processing is performed may correspond to detecting a touch position based on the sampling frequency set at step S.

At step S the controller sets the threshold value for detecting a touch operation as a threshold value corresponding to performing a touch operation using a stylus or the like. The threshold value of step S may correspond to a typical sensor output magnitude detected for touch operations performed with a stylus type instruction object on a given sensor type. In addition to the threshold value the controller at step S may also adjust a baseline value for detection to correspond with a stylus based input. The baseline value set at step S may be similar to the baseline value previously discussed with regard to step S.

At step S the controller applies the trace tearing filter which prevents an interruption of a line drawn in response to a change in a touch position of the instruction object during the touch operation. Aspects of applying the trace tearing filter are discussed later with respect to .

At step S the controller applies a smoothing filter that is included in the stylus filter . The smoothing filter is a filter that smooths the line drawn in response to a change in the touch position of the instruction object during the touch operation. Aspects of applying the smoothing filter are discussed later with respect to .

At step S the controller performs processing based on the coordinate position at which a touch operation is detected when the sensor output value magnitudes are higher than the threshold value for a stylus set at step S. For example the controller may execute a process for displaying a line on the display starting at the initial touch position and ending at a final touch position after moving the instruction object on the operation surface of the touch panel .

Next illustrates an exemplary algorithmic flowchart for performing processing in response to a touch operation performed in an interrupt mode. In certain aspects of the present disclosure the interrupt mode may correspond to a case where a touch input event is reported only when an object detection status has changed.

Referring to the figure the touch panel driver scans the touch panel at step S and the controller determines based on the scanning result of step S whether a change in sensor output is detected in response to a touch operation. If a change in sensor output is detected at step S the controller generates an interruption signal for performing interruption processing and notifies a host device of the generation of the interruption signal. The host device in response to receiving an interruption signal and or the notification that the interruption signal was generated may then execute an application program. At step S the controller reads out coordinate positions corresponding to the touch operation performed on the operation surface of the touch panel . At step S the controller executes processing based on the determined coordinate positions from step S. The processing corresponding to the coordinates determined at step S may in certain aspects of the present disclosure corresponding to displaying a line characters numbers etc. in response to the user moving his or her finger about the operation surface of the touch panel .

Next illustrates an exemplary algorithmic flowchart for processing a touch operation in a continuous report mode. In certain aspects of the present disclosure the controller may continuously read the touch panel cyclically e.g. to determine whether an up event has occurred.

Referring now to the touch panel driver scans the touch panel at step S. At step S the controller notifies a host device of the generation of an interruption signal. In response to the generation of the interruption signal and or based on the data included in the interruption signal the host device may execute an application program. At step S the controller determines touch coordinates corresponding to the detected touch operation. The touch coordinates may be determined based on the result of the scanning operation performed at step S. The controller at step S outputs the determined coordinates to the trace tearing filter and the smoothing filter. In addition to the touch coordinates the controller may output corresponding sensor output magnitudes e.g. electrostatic capacitance magnitude values for use by the trace tearing filter and or the smoothing filter. The controller determines at step S whether the trace tearing filter and or the smoothing filter are applied or whether insufficient sampling of touch operation data prevents processing related to the trace tearing filter and or the smoothing filter from being performed. If the controller determines at step S that the filters are to be applied the controller at step S executes a predetermined function based on the touch coordinates. For example the controller may execute processing related to displaying a line corresponding to a movement of the stylus on the operation surface of the touch panel .

Next illustrates an exemplary algorithmic flowchart showing an example of processing performed by the trace tearing filter according to one aspect of the present disclosure.

At step S the trace tearing filter determines whether a down event has been generated as a result of a stylus contacting the operation surface of the touch panel . In one aspect of the present disclosure a down or up event may be generated for every fixed sampling period e.g. according to the interruption conditions set by step S of the flowchart illustrated in .

If the trace tearing filter determines at step S that a down event has been generated the trace tearing filter determines at step S whether a current value of a consecutive up event counter is equal to zero. The current value of the consecutive up event counter may correspond to the number of consecutive up events occurring subsequent to the currently analyzed down event. For example if the current value of the consecutive up event counter equals one the current value may indicate that the immediately preceding condition of the touch panel display was an up condition. In certain aspects of the present disclosure the controller may in response to determining a current condition of the touch panel display is a down condition event convert one or more previously detected up conditions events detected prior to e.g. immediately preceding the current down condition event to the down condition. In other aspects of the present disclosure the conversion of previously detected up events conditions to the down condition may be based on a determination as to whether the current event is detected within a predetermined time period relative to a previously detected event condition.

If the trace tearing filter determines at step S that the consecutive up event counter is equal to zero the trace tearing filter at step S outputs the down event indicating that the stylus is contacting the operation surface of the touch panel .

Otherwise if the consecutive up event counter is determined to be a value other than zero at step S the trace tearing filter replaces the suspended up event with a down event. It is noted that an up event may be previously suspended for example at processing described later for step S. At step S the trace tearing filter clears the current value of the up event counter such that the current value is equal to zero and the down event is processed at step S.

If the trace tearing filter determines at step S that an up event has been generated the trace tearing filter at step S determines whether the up event has been continuously generated greater than or equal to N times. The value of N is typically a relatively small value such as 5 to 7 times. However it is noted that the value of N may be changed as appropriate based on changes to the periodic sampling frequency such as the sampling frequency set at step S of .

If the trace tearing filter determines at step S that the up event has continuously occurred greater than or equal to N times the presently analyzed event is determined as an up event and additionally the events in suspension are set as up events.

At step S the trace tearing filter clears the current value of the consecutive up event counter such that the current value equals zero.

If the trace tearing filter at step S determines that the up event continued less than N times the trace tearing filter suspends the present up event and increments the consecutive up event counter at step S.

Next illustrates another exemplary algorithmic flowchart for processing related to the trace tearing filter. The exemplary processing illustrated by the flowchart of is similar to the example discussed above with respect to however the example of includes processing for converting an up event to a down event by adding a fixed value to the sensor output magnitude.

Referring now to the trace tearing filter at step S determines whether a down event has been generated. If the trace tearing filter determines at step S that a down event has been generated the trace tearing filter determines at step S whether the consecutive up event counter is equal to zero. If it determined at step S that the consecutive up event counter equals zero the trace tearing filter outputs the down event indicating that the stylus is presently contacting the operation surface of the touch panel .

Otherwise if it is determined at step S that the consecutive up event counter does not equal zero the trace tearing filter at step S adds a fixed value to the value of the center output corresponding to the suspended up event. The fixed value may be a predetermined value the magnitude of which may be stored in the memory . The fixed value may correspond to a sensor magnitude that would result in the summation of the sensor output plus the fixed value exceeding a predetermined threshold value effectively changing the suspended up event to a down event. At step S the trace tearing filter clears the current value of the consecutive up event counter causing the current value to equal zero and the down event is processed at step S.

If the trace tearing filter at step S determines that the present event is an up event the trace tearing filter at step S checks the detected sensor level value to determine whether the signal level value corresponds to an up event. For example the trace tearing filter may confirm the present event is an up event based on the sensor level output magnitude value.

At step S the trace tearing filter determines whether the sensor output magnitude value is above a predetermined threshold value. In certain aspects of the present disclosure the threshold used in the comparison at step S may be a sensor output magnitude value that is smaller than the threshold value distinguishing an up event from a down event. If the sensor output value is determined to be above the threshold at step S the present up event is registered as a down event and the processing continues at step S.

Otherwise the trace tearing filter determines at step S whether the present up event has been continuously generated N or more times. If the up event has been determined to have been continuously generated N or more times at step S the present event is determined to be an up event and any suspended events are determined to be up events. The trace tearing filter then clears the consecutive up event counter to zero at step S.

Otherwise if the trace tearing filter at step S determines that the up event has not been continuously generated at least N times the trace tearing filter suspends the present up event at step S and increments the consecutive up event counter by one at step S.

Next illustrates a non limiting example of determining up events and down events based on sensor outputs detected in the touch panel section . Line A of illustrates a time series bar graph of sensor output magnitudes relative to threshold values TH1 and TH2 for one scanning cycle. In this example the first threshold value TH1 is a predetermined threshold value for distinguishing between an up event and a down event. For example the first threshold value TH1 may be selected based on sensor outputs typical of those that occur when an instruction object is directly in contact with the operation surface of the touch panel . The second threshold value TH2 is assumed in this example to be a predetermined threshold value that is set lower than the first threshold value TH1. In certain aspects of the present disclosure the second threshold value may correspond to a sensor output value typical of those occurrences in which an instruction object momentarily disconnects from the operation surface of the touch panel during a touch operation or when the instruction object is not applied to the operation surface of the touch panel with sufficient pressure. For example the second threshold value TH2 may correspond to a sensor output magnitude value resultant from an instruction object being within a predetermined range of the operation surface of the touch panel . The second threshold value TH2 may for example correspond to the threshold value used in the processing discussed above with respect to step S of .

Line B of illustrates sequential determination results of the controller distinguishing between up events and down events using only the first threshold value TH1. In this case the controller may perform a comparison between received sensor output values and the first threshold value TH1 and determine that a down event has occurred when the received sensor output value is greater than the first threshold value TH1. In the case of the controller determines based on the comparison of the sensor output values and the first threshold value TH1 that five down events occur consecutively followed by a single up event. The controller determines that the single up event has occurred following the five continuous down events based on the sensor output value being less than the first threshold value TH1 as illustrated in line A of . The controller may determine that two other up events occur during the scanning cycle using similar methods.

Processing performed in accordance with the methods described for line B of may result in handwritten lines being displayed on the display only in cases in which down events are determined to have occurred. That is the controller may perform processing and or a predetermined function related to drawing handwritten characters numbers etc. in response to detecting down events above the threshold TH1 and suspend processing related to displaying the handwritten characters numbers etc. when the sensor output magnitude is below the threshold TH1. Consequently displayed outputs resultant from the methods described for line B of may result in interruptions of the lines forming the characters numbers etc. such as in the case of .

Referring now to line C of the controller may perform a similar determination process as that described above for line B but rather than registering up events when the sensor output value is determined to be less than the first threshold value TH1 the controller may perform a second comparison of the sensor output value with the second threshold value TH2 and convert the up event to a down event if the sensor output value is above the second threshold value TH2. As illustrated in line C of the three up events that were determined to have occurred in the process discussed above for line B have been converted to down events because the sensor output values are greater than the second threshold value TH2. This process may mitigate momentary disconnections between an instruction object and the operation surface of the touch panel that may otherwise result in interruptions of lines displayed as a result of detecting movement of the instruction object on the operation surface of the touch panel .

Next illustrates another non limiting example of distinguishing between up events and down events based on a sensor output value comparison to a threshold. The example of illustrates a case in which the sensor output value for each sample in a sample cycle is compared to the first threshold value TH1 which may be the same magnitude that discussed above for . In the example of the controller determines that a down event has occurred if the sensor output value is above the first threshold value TH1. However if the controller determines that the sensor output value is below the first threshold value TH1 the controller adds a predetermined fixed value OP to the sensor value and performs a second comparison of the summation to the first threshold value TH1. If the summation of the sensor output value and the fixed value OP is greater than the first threshold value TH1 the controller registers the detected event as a down event.

For the specific sensor outputs illustrated in three samples are determined to be below the threshold TH1. After adding the fixed value OP to the three samples falling below the threshold TH1 the resulting summation is determined to be above the threshold TH1. Therefore the three events are registered as down events rather than up events. This processing may mitigate the case where the instruction object briefly disconnects from but remains in close proximity to the operation surface of the touch panel during the touch operation by converting events within a predetermined range of the down event detection threshold to up events.

Next illustrate an exemplary process for applying a smoothing filter according to aspects of the present disclosure. Referring first to illustrates coordinate positions and . The coordinate positions illustrated in may be determined by the touch panel section in response to a movement of an instruction object on the operation surface of the touch panel . Solid arrows connecting the coordinate points illustrate the movement of the instruction object from the initially detected coordinate point to the final detected coordinate point . It may be assumed that the instruction object actually moves with a constant curvature during the touch operation in this example and the unnatural curvature of results from limitations in touch detection e.g. sensor placement sampling frequency etc. .

In certain aspects of the present disclosure when applying a smoothing filter the controller may interpolate intermediate coordinates between detected coordinates when a touch operation such as that in is performed. illustrates a non limiting example of the controller determining intermediate coordinates based on detected coordinates determined during a touch operation. In the example of a controller performs an interpolation process to determine intermediate coordinates and between the coordinates shown and discussed above for . The controller may determine the intermediate coordinates based on features of previous and or subsequently detected coordinates such as curvature and direction of motion. Solid arrows in illustrate the improved movement detection of the instruction object during the touch operation while the dashed arrows represent the detected movement of the instruction object using the method of . As is evident in the intermediate coordinates provide for a more natural and representative output corresponding to the actual movement of the instruction object during the touch operation. Mathematical functions for interpolating coordinate positions based on aspects of previously and or subsequently detected coordinate positions may for example include regression and best fit models.

Next illustrate non limiting examples of displayed outputs resultant from displaying lines based on touch operation detection with and without the inclusion of a smoothing filter. Referring first to illustrates a line connecting coordinate positions and . The line output shown in may correspond to the detection result discussed above for . As evident in the line shown in the case in which a smoothing filter is not applied results in an unnatural curvature of the line which may result in an undesirable output being displayed on the display in response to detected instruction object movement during touch operations.

In contrast illustrates a line connecting the points and . The line may correspond to the application of a smoothing filter such as in the case discussed above for . By interpolating intermediate coordinate positions such as in the example discussed above for the line output on the display has a much more natural curvature relative to the case of thereby improving device performance for outputting lines in response to detecting instruction object movement during touch operations.

Next illustrate a non limiting example in which aspects of a smoothing filter are applied for smoothing a thickness of a line output on a touch panel display in response to movement of an instruction object during a touch operation. In one aspect of the present disclosure the controller may interpolate intermediate points between detected coordinate points based on a touch area size of the detected coordinate points and or corresponding sensor output magnitudes.

Referring first to illustrates detected coordinate points and . The detected coordinate points illustrated in are shown in varied sizes to represent variations in touch area size detected by the touch panel section . An increase in touch area size may for example result from a user applying greater pressure to the operation surface of the touch panel during a touch operation. Solid arrow lines illustrate a progression of the touch operation from the initially detected coordinate point to the final detected coordinate point . When applying aspects of the smoothing filter for interpolating touch area size and corresponding displayed line thickness the controller may analyze two or more detected coordinate points and interpolate a size of an intermediate point or points such that changes in displayed line thickness resultant e.g. from changes in pressure applied by the instruction object during the touch operation appear smoother than in the case in which a smoothing filter is not applied.

Referring now to illustrates intermediate points and which are shown between the points illustrated above for . As discussed above the size of the intermediate points illustrated in corresponds to the displayed line thickness resultant from outputting a line on the display based on the detected touch operation. The size of the intermediate points illustrated in may be an interpolated size analyzed on the basis of one or more preceding and or one or more subsequent detected coordinate points. For example the size of intermediate point of may be a linear or weighted average of the size of the previously detected coordinate point and the subsequently detected coordinate point . A skilled artisan will appreciate that performing an interpolation such that more than one intermediate point is calculated will result in improved performance with respect to smoothing the output displayed on the display following detection and processing of the touch operation by methods described herein. Further utilizing more detected coordinate points in the interpolation process may also improve performance.

In contrast illustrates an example in which the coordinate points and the intermediate points illustrated in are connected by a similar line as that in resulting in smoother changes in line thickness and an improved output result.

It should be appreciated that aspects of the smoothing filter described herein may be applied to both cases in which a user uses a finger and or a stylus type instruction object when performing touch operations. That is the processes methods and functions described herein are not limited to being performed only in the case in which a particular instruction object type is used. For example illustrative examples discussed herein using a finger as an instruction object may be applied to the case in which a stylus type instruction object is used.

Obviously numerous modifications and variations of the present disclosure are possible in light of the above teachings. It is therefore to be understood that within the scope of the appended claims the invention may be practiced otherwise than as specifically described herein. For example advantageous results may be achieved if the steps of the disclosed techniques were performed in a different sequence if components in the disclosed systems were combined in a different manner or if the components were replaced or supplemented by other components. The functions processes and algorithms described herein may be performed in hardware or software executed by hardware including computer processors and or programmable processing circuits configured to execute program code and or computer instructions to execute the functions processes and algorithms described herein. A processing circuit includes a programmed processor as a processor includes circuitry. A processing circuit also includes devices such as an application specific integrated circuit ASIC and conventional circuit components arranged to perform the recited functions.

The functions and features described herein may also be executed by various distributed components of a system. For example one or more processors may execute these system functions wherein the processors are distributed across multiple components communicating in a network. The distributed components may include one or more client and or server machines in addition to various human interface and or communication devices e.g. display monitors smart phones tablets personal digital assistants PDAs . The network may be a private network such as a LAN or WAN or may be a public network such as the Internet. Input to the system may be received via direct user input and or received remotely either in real time or as a batch process.

Additionally some implementations may be performed on modules or hardware not identical to those described. Accordingly other implementations are within the scope that may be claimed. For example aspects of the present disclosure may be utilized in a desktop computer a laptop computer a tablet computer a smartphone a navigation device an electronic payment terminal or the like.

It must be noted that as used in the specification and the appended claims the singular forms a an and the include plural referents unless the context clearly dictates otherwise.

 1 An apparatus comprising a touch panel display including one or more sensors for detecting an input operation by an instruction object on an operation surface of the touch panel display and circuitry configured to acquire from the one or more sensors one or more coordinates corresponding to one or more positions of the instruction object on the operation surface of the touch panel display during the input operation determine as a first determination based on an output from the one or more sensors in response to detecting the input operation a current condition of the instruction object during the input operation the current condition being an up condition or a down condition determine as a second determination when the current condition of the instruction object is the down condition based on one or more previous conditions of the instruction object stored in a memory whether the previous condition immediately preceding the current condition is the up condition convert when the previous condition immediately preceding the current condition is the up condition the immediately preceding previous condition to the down condition and update the one or more previous conditions stored in the memory based on the conversion result control based on the one or more acquired coordinates and the one or more previous conditions stored in the memory the touch panel display to output a continuous line in the interface corresponding to the acquired one or more coordinates at which the instruction object is determined to be in the down condition wherein the down condition corresponds to a state in which the instruction object is within a predetermined range from the operation surface of the touch panel display and the up condition corresponds to a state in which the instruction object is outside the predetermined range from the operation surface of the touch panel display and a shape of the continuous line corresponds to a movement of the instruction object on the operation surface of the touch panel display during the input operation.

 2 The apparatus of 1 wherein the circuitry is configured to acquire from the one or more sensors one or more capacitance values for each of the one or more coordinates corresponding to the one or more positions of the instruction object on the operation surface of the touch panel display during the input operation.

 3 The apparatus of 1 or 2 wherein the circuitry performs the first determination by comparing the one or more capacitance values to a first threshold value when a detected capacitance value of the one or more capacitance values is greater than or equal to the first threshold value the circuitry determines the current condition of the instruction object during the input operation as being the down condition and when the detected capacitance value of the one or more capacitance values is less than the first threshold value the circuitry determines the current condition of the instruction object during the input operation as being the up condition.

 4 The apparatus of any one of 1 to 3 wherein when the detected capacitance value of the one or more capacitance values is less than the first threshold value and the detected capacitance value has been detected by the one or more sensors within a predetermined period of time after the down condition has occurred the circuitry compares the detected capacitance value to a second threshold value that is lower than the first threshold value and when the detected value is greater than the second threshold value the circuitry determines the current condition of the instruction object during the input operation as being the down condition.

 5 The apparatus of any one of 1 to 4 wherein when the detected capacitance value of the one or more capacitance values is less than the first threshold value the circuitry adds a predetermined fixed value to the detected capacitance value.

 6 The apparatus of any one of 1 to 5 wherein the circuitry compares the summation of the detected capacitance value and the predetermined fixed value to the first threshold value and when the summation is greater than the first threshold value the circuitry determines the current condition of the instruction object during the input operation as being the down condition.

 7 The apparatus of any one of 1 to 6 wherein the circuitry is configured to determine based on the output received from the one or more sensors in the first determination if the instruction object performing the input operation is a finger or a stylus.

 8 The apparatus of any one of 1 to 7 wherein the second determination is performed only when the finger is used to perform the input operation.

 9 The apparatus of any one of 1 to 8 wherein the circuitry is configured to interpolate one or more intermediate coordinates between the one or more coordinates corresponding to one or more positions of the instruction object on the operation surface of the touch panel display during the input operation and the circuitry is configured to control the touch panel display to output the continuous line in the interface based on the one or more intermediate coordinates and the acquired one or more coordinates at which the instruction object is determined to be in the down condition.

 10 The apparatus of any one of 1 to 9 wherein the circuitry is configured to calculate based on the output from the one or more sensors in response to detecting the input operation one or more touch areas corresponding to each of the acquired one or more coordinates at which the instruction object is determined to be in the down condition the circuitry is configured to interpolate one or more intermediate touch areas between the one or more coordinates corresponding to one or more positions of the instruction object on the operation surface of the touch panel display during the input operation and the circuitry is configured to control the touch panel display to output the continuous line in the interface based on the one or more intermediate touch areas and the one or more touch areas corresponding to each of the acquired one or more coordinates at which the instruction object is determined to be in the down condition.

 11 A method of controlling a touch panel display including one or more sensors for detecting an input operation by an instruction object on an operation surface of the touch panel display the method comprising acquiring by circuitry from the one or more sensors one or more coordinates corresponding to one or more positions of the instruction object on the operation surface of the touch panel display during the input operation determining by the circuitry as a first determination based on an output from the one or more sensors in response to detecting the input operation a current condition of the instruction object during the input operation the current condition being an up condition or a down condition determining by the circuitry as a second determination when the current condition of the instruction object is the down condition based on one or more previous conditions of the instruction object stored in a memory whether the previous condition immediately preceding the current condition is the up condition converting by the circuitry when the previous condition immediately preceding the current condition is the up condition the immediately preceding previous condition to the down condition and updating the one or more previous conditions stored in the memory based on the conversion result controlling by the circuitry based on the one or more acquired coordinates and the one or more previous conditions stored in the memory the touch panel display to output a continuous line in the interface corresponding to the acquired one or more coordinates at which the instruction object is determined to be in the down condition wherein the down condition corresponds to a state in which the instruction object is within a predetermined range from the operation surface of the touch panel display and the up condition corresponds to a state in which the instruction object is outside the predetermined range from the operation surface of the touch panel display and a shape of the continuous line corresponds to a movement of the instruction object on the operation surface of the touch panel display during the input operation.

 12 The method of 11 further comprising acquiring by the circuitry from the one or more sensors one or more capacitance values for each of the one or more coordinates corresponding to the one or more positions of the instruction object on the operation surface of the touch panel display during the input operation.

 13 The method of 11 or 12 wherein the circuitry performs the first determination by comparing the one or more capacitance values to a first threshold value when a detected capacitance value of the one or more capacitance values is greater than or equal to the first threshold value the circuitry determines the current condition of the instruction object during the input operation as being the down condition and when the detected capacitance value of the one or more capacitance values is less than the first threshold value the circuitry determines the current condition of the instruction object during the input operation as being the up condition.

 14 The method of any one of 11 to 13 wherein when the detected capacitance value of the one or more capacitance values is less than the first threshold value and the detected capacitance value has been detected by the one or more sensors within a predetermined period of time after the down condition has occurred the circuitry compares the detected capacitance value to a second threshold value that is lower than the first threshold value and when the detected value is greater than the second threshold value the circuitry determines the current condition of the instruction object during the input operation as being the down condition.

 15 The method of any one of 11 to 14 wherein when the detected capacitance value of the one or more capacitance values is less than the first threshold value the circuitry adds a predetermined fixed value to the detected capacitance value.

 16 The method of any one of 11 to 15 wherein the circuitry compares the summation of the detected capacitance value and the predetermined fixed value to the first threshold value and when the summation is greater than the first threshold value the circuitry determines the current condition of the instruction object during the input operation as being the down condition.

 17 The method of any one of 11 to 16 further comprising determining by the circuitry based on the output received from the one or more sensors in the first determination if the instruction object performing the input operation is a finger or a stylus.

 18 The method of any one of 11 to 17 wherein the second determination is performed only when the finger is used to perform the input operation.

 19 The method of any one of 11 to 18 further comprising interpolating by the circuitry one or more intermediate coordinates between the one or more coordinates corresponding to one or more positions of the instruction object on the operation surface of the touch panel display during the input operation and controlling by the circuitry the touch panel display to output the continuous line in the interface based on the one or more intermediate coordinates and the acquired one or more coordinates at which the instruction object is determined to be in the down condition.

 20 The method of any one of 11 to 19 further comprising calculating by the circuitry based on the output from the one or more sensors in response to detecting the input operation one or more touch areas corresponding to each of the acquired one or more coordinates at which the instruction object is determined to be in the down condition the circuitry is configured to interpolate one or more intermediate touch areas between the one or more coordinates corresponding to one or more positions of the instruction object on the operation surface of the touch panel display during the input operation and the circuitry is configured to control the touch panel display to output the continuous line in the interface based on the one or more intermediate touch areas and the one or more touch areas corresponding to each of the acquired one or more coordinates at which the instruction object is determined to be in the down condition.

 21 A non transitory computer readable medium having instructions stored therein that when executed by one or more processors caused the one or more processors to execute a method the method comprising detecting an input operation by an instruction object on an operation surface of a touch panel display the touch panel display including one or more sensors acquiring from the one or more sensors one or more coordinates corresponding to one or more positions of the instruction object on the operation surface of the touch panel display during the input operation determining as a first determination based on an output from the one or more sensors in response to detecting the input operation a current condition of the instruction object during the input operation the current condition being an up condition or a down condition determining as a second determination when the current condition of the instruction object is the down condition based on one or more previous conditions of the instruction object stored in a memory whether the previous condition immediately preceding the current condition is the up condition converting when the previous condition immediately preceding the current condition is the up condition the immediately preceding previous condition to the down condition and updating the one or more previous conditions stored in the memory based on the conversion result controlling based on the one or more acquired coordinates and the one or more previous conditions stored in the memory the touch panel display to output a continuous line in the interface corresponding to the acquired one or more coordinates at which the instruction object is determined to be in the down condition wherein the down condition corresponds to a state in which the instruction object is within a predetermined range from the operation surface of the touch panel display and the up condition corresponds to a state in which the instruction object is outside the predetermined range from the operation surface of the touch panel display and a shape of the continuous line corresponds to a movement of the instruction object on the operation surface of the touch panel display during the input operation.

