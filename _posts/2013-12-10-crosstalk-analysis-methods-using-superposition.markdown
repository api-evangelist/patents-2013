---

title: Crosstalk analysis methods using superposition
abstract: System, methods and apparatus are described that facilitate communications circuit design. A first response of a channel to a first signal transmitted through the channel and a second response of the channel to a second signal transmitted through a neighboring channel are determined and a first signal analysis based on the first response and the second response is calculated. A modified second response is determined after modifying the magnitude or timing of the second response to simulate a change in a characteristic of the second signal. A second signal analysis performed using the first response and the modified second response may identify differences in the effects of the second signal and the modified second signal on the first signal. A physical relationship between a pair of connectors of a circuit may be modified based on the magnitude of a scaling factor or phase difference used to obtain the second response.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09337893&OS=09337893&RS=09337893
owner: QUALCOMM Incorporated
number: 09337893
owner_city: San Diego
owner_country: US
publication_date: 20131210
---
The present disclosure relates generally to high speed data communications interfaces and more particularly to optimizing circuit designs for communications links.

Manufacturers of mobile devices such as cellular phones may deploy various electronic components in one or more integrated circuit IC devices and or on one or more circuit boards. The electronic components may include processing devices storage devices communications transceivers display drivers and the like. In one example a processing device may be provided on a printed circuit board PCB and may communicate with one or more memory devices on the same PCB and or on a different PCB. The processor may communicate with the memory devices using a high speed communication link that supports unidirectional and bidirectional channels for data and control signals.

In a multi wire interface the maximum speed of the communication link and the ability of a receiver to reliably capture data may be limited by crosstalk from neighboring connectors. The effect of crosstalk can be diminished by increasing spacing between adjacent connectors assignment of signals transmitted on adjacent connectors reducing transmission clock rates and through other techniques many of which can have negative impacts including reduced performance of the communication link increased size of semiconductor dice circuit boards and chip carriers. Accordingly there is a need for tools and techniques that optimize design of communications links.

Embodiments disclosed herein provide systems methods and apparatus that can be used to optimize communications links.

In an aspect of the disclosure a method for optimizing a circuit and or a circuit design process includes determining a first response of a channel to a first signal transmitted through the channel determining a second response of the channel to a second signal transmitted through a neighboring channel performing a first signal analysis based on the first response and the second response determining a modified second response by modifying a magnitude or timing of the second response to simulate a change in a characteristic of the second signal and performing a second signal analysis based on the first response and the modified second response. The first signal analysis may identify the effect of the second signal on the first signal. The second signal analysis identifying the effect of the modified second signal on the first signal. A signal analysis may include a statistical analysis and or a best case worst case analysis.

In an aspect of the disclosure the first signal may comprise a pulse and the second signal comprises a pulse. The first response may be determined by sampling a version of the first signal received from the channel. The second response may be determined by sampling crosstalk in the channel. The channel may be electromagnetically or electrostatically coupled to the neighboring channel.

In an aspect of the disclosure the first signal analysis may be performed by recursively convolving samples of the first response with samples of the second response. The second signal analysis may be performed by recursively convolving samples of the first response with samples of the second response after a delay is added to the first response or the second response. A physical relationship between a pair of connectors of a circuit may be modified based on the delay.

In an aspect of the disclosure the modified second response includes scaling samples of crosstalk in the channel. The second signal analysis may be performed by recursively convolving samples of the first signal received from the channel with scaled samples of the crosstalk in the channel. A physical relationship between a pair of connectors of a circuit may be modified based on a magnitude of a scaling factor used to obtain the scaled samples. A distance separating a pair of connectors of a circuit may be modified based on a magnitude of a scaling factor used to obtain the scaled samples.

In an aspect of the disclosure the steps of determining the modified second response and performing the second signal analysis may be iteratively repeated until the effect of the modified second signal on the first signal crosses a desired threshold. An attribute of a pair of connectors is modified between each iteration.

In an aspect of the disclosure an apparatus includes means for determining a first response of a channel to a first signal transmitted through the channel means for determining a second response of the channel to a second signal transmitted through a neighboring channel means for performing a first signal analysis based on the first response and the second response means for determining a modified second response by modifying the magnitude or timing of the second response to simulate a change in a characteristic of the second signal and means for performing a second signal analysis based on the first response and the modified second response. The first signal analysis may identify the effect of the second signal on the first signal. The second signal analysis may identify the effect of the modified second signal on the first signal.

In an aspect of the disclosure an apparatus for wireless communication includes a processing system configured to determine a first response of a channel to a first signal transmitted through the channel determine a second response of the channel to a second signal transmitted through a neighboring channel perform a first signal analysis based on the first response and the second response determine a modified second response by modifying the magnitude or timing of the second response to simulate a change in a characteristic of the second signal and perform a second signal analysis based on the first response and the modified second response. The first signal analysis may identify the effect of the second signal on the first signal. The second signal analysis identifying the effect of the modified second signal on the first signal.

In an aspect of the disclosure a processor readable storage medium which may be non transitory has or maintains one or more instructions which when executed by at least one processing circuit cause the at least one processing circuit to determine a first response of a channel to a first signal transmitted through the channel determine a second response of the channel to a second signal transmitted through a neighboring channel perform a first signal analysis based on the first response and the second response determine a modified second response by modifying the magnitude or timing of the second response to simulate a change in a characteristic of the second signal and the first signal analysis identifying the effect of the second signal on the first signal perform a second signal analysis based on the first response and the modified second response. The first signal analysis may identify the effect of the second signal on the first signal. The second signal analysis may identify the effect of the modified second signal on the first signal.

Various aspects are now described with reference to the drawings. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of one or more aspects. It may be evident however that such aspect s may be practiced without these specific details.

As used in this application the terms component module system and the like are intended to include a computer related entity such as but not limited to hardware firmware a combination of hardware and software software or software in execution. For example a component may be but is not limited to being a process running on a processor a processor an object an executable a thread of execution a program and or a computer. By way of illustration both an application running on a computing device and the computing device can be a component. One or more components can reside within a process and or thread of execution and a component may be localized on one computer and or distributed between two or more computers. In addition these components can execute from various computer readable media having various data structures stored thereon. The components may communicate by way of local and or remote processes such as in accordance with a signal having one or more data packets such as data from one component interacting with another component in a local system distributed system and or across a network such as the Internet with other systems by way of the signal.

Moreover the term or is intended to mean an inclusive or rather than an exclusive or. That is unless specified otherwise or clear from the context the phrase X employs A or B is intended to mean any of the natural inclusive permutations. That is the phrase X employs A or B is satisfied by any of the following instances X employs A X employs B or X employs both A and B. In addition the articles a and an as used in this application and the appended claims should generally be construed to mean one or more unless specified otherwise or clear from the context to be directed to a singular form.

Certain aspects of the invention may be applicable to communications links deployed between electronic devices that may include subcomponents of an apparatus such as a telephone a mobile computing device an appliance automobile electronics avionics systems etc. depicts an apparatus that may employ a communication link between IC devices. In one example the apparatus may comprise a wireless communication device that communicates through a radio frequency RF transceiver with a radio access network RAN a core access network the Internet and or another network. The apparatus may include a communications transceiver operably coupled to a processing circuit . The processing circuit may comprise one or more IC devices such as an application specific IC ASIC . The ASIC may include one or more processing devices logic circuits and so on. The processing circuit may include and or be coupled to processor readable storage such as a memory device that may maintain instructions and data that may be executed by the processing circuit . The processing circuit may be controlled by one or more of an operating system and an application programming interface API layer that supports and enables execution of software modules residing in storage media such as the memory device of the wireless device. The memory device may include read only memory ROM or random access memory RAM electrically erasable programmable ROM EEPROM flash cards or any memory device that can be used in processing systems and computing platforms. The processing circuit may include or have access to a local database that can maintain operational parameters and other information used to configure and operate the apparatus . The local database may be implemented using one or more of a database module flash memory magnetic media EEPROM optical media tape soft or hard disk or the like. The processing circuit may also be operably coupled to external devices such as an antenna a display operator controls such as a button and a keypad among other components.

In the example data is transmitted by a processing circuit to a memory circuit that captures and decodes the data from certain of the various connectors. Some memory devices such as dual data rate DDR dynamic random access memory DRAM use a data strobe DQS transmitted on one of the connectors to determine when the data is valid and or can be reliably captured from the communication link . DDR and other interfaces may rely on the propagation of a complimentary data strobe DQST C along with the various data signals DQs to trigger data capture within the receiver. Conventionally DDR interfaces have been source synchronous with matched DQ and DQST C path delays which can facilitate noise and or jitter cancellation techniques applied during data capture.

As noted certain DDR interfaces can rely on source synchronous propagation of control signals or DQST C with the data signals . In the example shown in the control signals and or data signals may be transmitted with asymmetric delays. Low power 4th generation DDR LPDDR4 devices may be associated with non uniform static delays such that DQ DQS launch timing may vary by a large degree. In the LPDDR4 example timing delays of between 200 picoseconds 200 ps and 800 ps may be observed or expected between DQ and DQS edges. The differences in timing may complicate noise and or jitter cancellation during data capture.

Circuit designers can benefit from models that can characterize the response of channels to transmitted signals and interference such as co channel interference which may include or be referred to as crosstalk. The response of the connectors to a pulse may be used to model the signaling channels provided by the connectors and the ability of the signaling channels to handle signals transmitted between IC devices. A channel response may be characterized using an eye diagram contour or a statistical data eye diagram based on the pulse response of a signaling channel provided by the connectors . The eye diagram contour often represents the worst case eye opening while the statistical eye diagram presents the eye opening as a function of probabilities. In one example a statistical data eye diagram may be created using techniques and methods described in a document published by the Institute of Electrical and Electronic Engineers IEEE which was authored by Casper et al. and titled An accurate and Efficient Analysis Method for Multi Gb s Chip to chip Signaling Schemes See Proceedings of IEEE Symposium on VLSI Circuits pp. 54 55 June 2002 which is incorporated herein by reference in its entirety .

As disclosed herein statistical data eye diagrams and associated methods and techniques may be used to simulate the effects of co channel interference on input signals and thereby reduce design cycles and improve design efficiency by enabling optimization of interconnect circuits in simulators for example. Crosstalk from a neighboring aggressor communications channel connector typically derives from a different data stream than a data stream of interest victim and is generally non coherent. In later generations of synchronous DRAM SDRAM devices including LPDDR4 that employ a static delay asymmetry the effectiveness of noise jitter cancellation techniques may be reduced and phase differences between signals can become more significant.

According to certain aspects disclosed herein methods for generating statistical data eye diagrams may be adapted to enable and support crosstalk analysis and amelioration during circuit design. In one example processes and techniques disclosed herein may be used during the design phase to establish design targets and to postulate and evaluate what if scenarios. Certain of the methodologies may enable exploration of relationships between aggressor signals and victim signals through numerical manipulation. For example the crosstalk response of a channel to an aggressor pulse or signal may be assumed to be independent of a victim pulse or other victim signal applied to or communicated through the channel. The use of numerical manipulation can enable iterative crosstalk optimization without iterative redesign of the connector architecture.

Numerical manipulation may include scaling the magnitude of crosstalk induced or otherwise introduced into a channel in order to determine tolerable levels of crosstalk from the perspective of a victim signal. A scaling factor derived from the numerical manipulation may be translated into one or more parameters that control routing and other characteristics of connectors associated with a circuit board chip carrier IC device and or a package. For example the scaling factor may be used to adapt or derive parameters that control trace spacing shielding requirements etc.

Numerical manipulation may include modifying the phase relationship between a victim signal and crosstalk induced or introduced by an aggressor signal into a channel in order to identify worst case timing and or best case timing and to explore the sensitivities of a particular design.

According to certain aspects described herein a methodology for quantifying or estimating crosstalk and for exploring its effect on a victim signal may include using processes based on an adapted and or expanded Casper method or methods. The Casper method or methods may be generally useful for channel evaluation and the method may be adapted as described herein for use during a circuit design phase to establish design targets and evaluate what if scenarios associated with placement and routing of connectors of a bus.

In some instances a statistical eye diagram may be used to characterize a channel pulse response. The channel pulse response may be generated by convolving the impulse response of the channel with a pulse representative of a signal transmitted over the channel. The pulse may represent a digital signal that transitions from logic 0 to logic 1 and back to logic 0 after a transmission period. In some instances the pulse response may be generated through the appropriate combination of step responses. A positive going step response followed by a negative going step response delayed by the data bit period or unit interval UI may be used to form a positive pulse response with a pulse width corresponding to the data bit period UI. In linear time invariant systems these pulse responses may be combined to form the pulse response for later convolution with the channel response or the step responses may each be convolved with the channel response and then combined to form the channel pulse response. In other words the order of these initial operations does not necessarily matter. A process for generating the statistical eye may include transmitting a pulse over a physical channel and sampling a signal received from the channel at a receiver in a plurality of sampling instants or unit intervals UIs . The samples obtained at the receiver may be used to determine the pulse response of the channel and to model the channel for further analysis.

In one example the samples of the received signal may represent corresponding UIs and inter symbol interference ISI terms. Each ISI sample may be recursively convolved with one another to obtain an ISI probability distribution function PDF . A PDF of a random variable represents the probability that the random variable lies within an infinitely small interval of a function representing the sample space of the random variable. The generated PDF may be convolved with a sampled high voltage representing a logic 1 for example and a sampled low voltage representing a logic 0 for example to produce a pair of PDFs that are representative of probability distribution of the logic 1 and logic 0 respectively. Crosstalk may be characterized using the same method.

Each step may be scaled by 50 to account for the fact that the probabilities of occurrence of a logic 1 and logic 0 are equal.

The PDFs corresponding to logic 1 and logic 0 signaling levels can be produced for a series of sampling instants and represented as a vertical cross section of a statistical eye diagram. The various PDFs may be generated in picosecond and or multi picosecond steps across the width of the eye.

According to certain aspects described herein the relationship between an aggressor signal and a victim signal for a channel may be explored through numerical manipulation of a designed channel. In some instances a design may be realized on a circuit board chip carrier substrate IC device etc. and the channel response determined by processing empirically obtained samples of a received signal. The channel may additionally or alternatively be modeled such that a designer may perform optimizations using estimates of the channel response based on the modeled channel. One or more design iterations may be explored without the need to produce a physical specimen of the designed channel. An optimized design may be used to create a physical circuit which can be used to verify the performance of a channel that has been optimized according to certain aspects disclosed herein.

A victim pulse response for the channel may be captured or calculated based on the victim signal and crosstalk responses for the channel associated with the one or more aggressor signals may be captured or calculated. A combined crosstalk response of the channel may be calculated as the sum of the responses for the one or more aggressor signals. A statistical eye diagram see may then be constructed by recursively convolving pulse and crosstalk samples using Casper s method for example. The opening of the statistical eye diagram of graphically indicates to the circuit designer a voltage margin and a timing margin allowed by the channel. For example the timing margin may indicate the earliest and or latest point in time that data may be available for sampling with respect to an expected transition time of a clock or strobe signal.

The effect of increased crosstalk magnitudes may be explored. The channel responses to the one or more aggressor signals may be scaled individually or globally as a group to simulate changes in physical attributes of a simulated channel. For example the sampled channel responses of one or more aggressor signals may be increased by a factor calculated to simulate the effect of decreasing the proximity of the channel to neighboring channels that are the source of the one or more aggressor signals. In one example proximity crosstalk responses are scaled through simple scalar multiplication and a new statistical eye diagram may be constructed by recursively convolving victim pulse and scaled crosstalk samples. In one example the statistical eye diagram may be constructed using Casper s method. As illustrated in the statistical eye diagram of the opening of the statistical eye diagram provides lesser margins than the margins provided in the statistical eye diagram .

Additional statistical eye diagrams not shown may be produced using various scaling factors or combinations of scaling factors and these additional statistical eye diagrams may be used together with the illustrated statistical eye diagrams and to determine a maximum tolerable level of crosstalk. Based on a calculated maximum tolerable crosstalk one or more routing requirements can be configured to ensure that the crosstalk of an optimized circuit does not exceed the calculated maximum tolerable degree of crosstalk. A design optimization process according to certain aspects described herein can improve circuit design efficiency and may reduce the time required to produce a final circuit design by limiting or eliminating the number of intermediate designs that are manufactured. Conventional methods typically require the physical layout to be altered between each design iteration and that the circuit is tested using a corresponding transient simulation.

According to certain aspects described herein the phase relationship between one or more aggressor signals and a victim signal can be scaled to identify worst case timing and to explore the sensitivities of a particular design to phase variances introduced in crosstalk.

The effect of increased or decreased phase differences between victim and aggressor signals may then be explored. The time scale of the aggressor channel responses may be shifted a time difference relative to the one or more victim signals. A new statistical eye diagram see may be constructed by recursively convolving pulse and scaled crosstalk samples. The statistical eye diagram may indicate a voltage margin and a timing margin allowed by the channel relative to a signal transition edge and may be constructed using Casper s method for example. In one example increased or decreased phase differences may be simulated through the use of a timing offset in the convolution of the pulse and scaled crosstalk samples. As illustrated by a comparison of the statistical eye diagrams and in variations between the opening of the statistical eye diagram corresponding to the time shifted aggressor channel responses and the opening of the statistical eye diagram corresponding to the aggressor channel responses without a time shift may result in greater or lesser margins or than the margins .

Additional statistical eye diagrams not shown may be produced using various timing delays to simulate worst case and best case phase and these additional statistical eye diagrams and the statistical eye diagrams and in may be used to determine a maximum tolerable phase difference between aggressor and victim signals. Based on a calculated maximum tolerable phase difference one or more routing requirements can be configured to ensure that the crosstalk of an optimized circuit does not exceed the calculated maximum tolerable degree of crosstalk. A design optimization process according to certain aspects described herein can improve circuit design efficiency and may reduce the time required to produce a final circuit design by limiting or eliminating the number of intermediate designs that are manufactured. Conventional methods typically require the physical layout to be altered between each design iteration and that the circuit is tested using a corresponding transient simulation.

At step a first response of a first channel to a first signal transmitted through the channel may be determined The first signal may include a pulse. The first response may be determined by sampling a version of the first signal received from the channel.

At step a second response of the first channel to a second signal transmitted through a neighboring channel may be determined The second signal may include a pulse. The channel may be electromagnetically or electrostatically coupled to the neighboring channel. The second response may be determined by sampling crosstalk in the first channel.

At step a first signal analysis may be performed based on the first response and the second response. The first signal analysis may identify the effect of the second signal on the first signal. The first signal analysis may be performed by recursively convolving the first response with the second response. The first signal analysis may be performed by sampling and recursively convolving the first response and the second response with one another. The signal analysis performed on the first or second signal may include a statistical analysis and or a best case worst case analysis.

At step a modified second response may be determined by modifying the magnitude or timing of the second response to simulate a change in a characteristic of the second signal. In one example the characteristic may be an amplitude of crosstalk from the second signal in the first channel. In one example the characteristic may relate to a phase relationship between the first and second signals or between the first and second responses. The modified second response may be determined by scaling samples of crosstalk in the channel.

At step a second signal analysis may be performed based on the first response and the modified second response. The second signal analysis may identify the effect of crosstalk derived from the modified second signal on the first signal. The second signal analysis may be performed by recursively convolving the first response with the second response after a delay is added to the first response or the second response. The second signal analysis may be performed by recursively convolving samples of the first signal received from the channel with scaled samples of the crosstalk in the channel.

In an aspect of the disclosure a physical relationship between a pair of connectors of a circuit is modified based on the delay. The physical relationship between the pair of connectors of the circuit may be modified based on a magnitude of a scaling factor used to obtain the scaled samples. A distance separating a pair of connectors of a circuit may be modified based on a magnitude of a scaling factor used to obtain the scaled samples.

In an aspect of the disclosure the modified second response may be iteratively determined and the second signal analysis performed for each iteration until the effect of the modified second signal on the first signal crosses a desired threshold. An attribute of a pair of connectors may be modified between each iteration.

The processor is responsible for general processing including the execution of software stored on the computer readable storage medium . The software when executed by the processor causes the processing circuit to perform or configure various functions described supra for any particular apparatus. The computer readable storage medium may also be used for storing data that is manipulated by the processing circuit when executing software including data decoded from signals transmitted over the connectors . The device further includes at least one of the modules and . The modules and may include some combination of software modules running in the processing circuit and hardware circuits or modules.

In one configuration the device may include a module and or circuit that is configured to determine a response of a channel to a first signal transmitted through the channel a module and or circuit for performing a signal and or statistical analysis based on responses of the channel to two or more signals and a module and or circuit for modifying a physical relationship between a pair of connectors of a circuit based on a delay or scaling factor used in the signal analysis of two or more responses.

The aforementioned means may be implemented for example using some combination of elements of the receiver circuit and coupling capacitor which may be incorporated in the receiving circuit .

It is understood that the specific order or hierarchy of steps in the processes disclosed is an illustration of exemplary approaches. Based upon design preferences it is understood that the specific order or hierarchy of steps in the processes may be rearranged. The accompanying method claims present elements of the various steps in a sample order and are not meant to be limited to the specific order or hierarchy presented.

The previous description is provided to enable any person skilled in the art to practice the various aspects described herein. Various modifications to these aspects will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other aspects. Thus the claims are not intended to be limited to the aspects shown herein but is to be accorded the full scope consistent with the language claims wherein reference to an element in the singular is not intended to mean one and only one unless specifically so stated but rather one or more. Unless specifically stated otherwise the term some refers to one or more. All structural and functional equivalents to the elements of the various aspects described throughout this disclosure that are known or later come to be known to those of ordinary skill in the art are expressly incorporated herein by reference and are intended to be encompassed by the claims. Moreover nothing disclosed herein is intended to be dedicated to the public regardless of whether such disclosure is explicitly recited in the claims. No claim element is to be construed as a means plus function unless the element is expressly recited using the phrase means for. 

