---

title: Systems and methods for energy-efficient control of an energy-consuming system
abstract: Systems and methods are provided for efficiently controlling energy-consuming systems, such as heating, ventilation, or air conditioning (HVAC) systems. For example, an electronic device used to control an HVAC system may encourage a user to select energy-efficient temperature setpoints. Based on the selected temperature setpoints, the electronic device may generate or modify a schedule of temperature setpoints to control the HVAC system.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09459018&OS=09459018&RS=09459018
owner: Google Inc.
number: 09459018
owner_city: Mountain View
owner_country: US
publication_date: 20130315
---
This is a continuation in part of U.S. Ser. No. 13 269 501 filed Oct. 7 2011 which is a continuation in part of U.S. Ser. No. 13 033 573 filed Feb. 23 2011. Both U.S. Ser. Nos. 13 269 501 and 13 033 573 claim the benefit of U.S. Prov. Ser. No. 61 415 771 filed Nov. 19 2010 and U.S. Prov. Ser. No. 61 429 093 filed Dec. 31 2010.

This is also a continuation in part of U.S. Ser. No. 13 632 118 filed Sep. 30 2012 which is a continuation in part of U.S. Ser. No. 13 434 560 filed Mar. 29 2012. U.S. Ser. No. 13 434 560 is a continuation in part of U.S. Ser. No. 13 269 501 filed Oct. 7 2011 is a continuation in part of U.S. Ser. No. 13 317 423 filed Oct. 17 2011 is a continuation in part of PCT Ser. No. PCT US11 61437 filed Nov. 18 2011 is a continuation in part of PCT Ser. No. PCT US12 30084 filed Mar. 22 2012 and claims the benefit of U.S. Prov. Ser. No. 61 627 996 filed Oct. 21 2011. As noted above U.S. Ser. No. 13 269 501 is a continuation in part of U.S. Ser. No. 13 033 573 filed Feb. 23 2011. U.S. Ser. Nos. 13 317 423 13 269 501 and 13 033 573 claim the benefit of U.S. Prov. Ser. No. 61 415 771 filed Nov. 19 2010 and U.S. Prov. Ser. No. 61 429 093 filed Dec. 31 2010.

This is also a continuation in part of U.S. Ser. No. 13 632 041 filed Sep. 30 2012 which claims the benefit of U.S. Prov. Ser. No. 61 550 346 filed Oct. 7 2011.

The commonly assigned patent applications noted in this application including all of those listed above are incorporated by reference herein in their entirety for all purposes. These applications are collectively referred to below as the commonly assigned incorporated applications. 

This disclosure relates to efficiently controlling and or scheduling the operation of an energy consuming system such as a heating ventilation and or air conditioning HVAC system by encouraging energy efficient user feedback.

This section is intended to introduce the reader to various aspects of art that may be related to various aspects of the present techniques which are described and or claimed below. This discussion is believed to be helpful in providing the reader with background information to facilitate a better understanding of the various aspects of the present disclosure. Accordingly it should be understood that these statements are to be read in this light and not as admissions of prior art.

While substantial effort and attention continues toward the development of newer and more sustainable energy supplies the conservation of energy by increased energy efficiency remains crucial to the world s energy future. According to an October 2010 report from the U.S. Department of Energy heating and cooling account for 56 of the energy use in a typical U.S. home making it the largest energy expense for most homes. Along with improvements in the physical plant associated with home heating and cooling e.g. improved insulation higher efficiency furnaces substantial increases in energy efficiency can be achieved by better control and regulation of home heating and cooling equipment. By activating heating ventilation and air conditioning HVAC equipment for judiciously selected time intervals and carefully chosen operating levels substantial energy can be saved while at the same time keeping the living space suitably comfortable for its occupants.

Historically however most known HVAC thermostatic control systems have tended to fall into one of two opposing categories neither of which is believed be optimal in most practical home environments. In a first category are many simple non programmable home thermostats each typically consisting of a single mechanical or electrical dial for setting a desired temperature and a single HEAT FAN OFF AC switch. While being easy to use for even the most unsophisticated occupant any energy saving control activity such as adjusting the nighttime temperature or turning off all heating cooling just before departing the home must be performed manually by the user. As such substantial energy saving opportunities are often missed for all but the most vigilant users. Moreover more advanced energy saving capabilities are not provided such as the ability for the thermostat to be programmed for less energy intensive temperature setpoints setback temperatures during planned intervals of non occupancy and for more comfortable temperature setpoints during planned intervals of occupancy.

In a second category on the other hand are many programmable thermostats which have become more prevalent in recent years in view of Energy Star US and TCO Europe standards and which have progressed considerably in the number of different settings for an HVAC system that can be individually manipulated. Unfortunately however users are often intimidated by a dizzying array of switches and controls laid out in various configurations on the face of the thermostat or behind a panel door on the thermostat and seldom adjust the manufacturer defaults to optimize their own energy usage. Thus even though the installed programmable thermostats in a large number of homes are technologically capable of operating the HVAC equipment with energy saving profiles it is often the case that only the one size fits all manufacturer default profiles are ever implemented in a large number of homes. Indeed in an unfortunately large number of cases a home user may permanently operate the unit in a temporary or hold mode manually manipulating the displayed set temperature as if the unit were a simple non programmable thermostat.

Proposals have been made for so called self programming thermostats including a proposal for establishing learned setpoints based on patterns of recent manual user setpoint entries as discussed in US20080191045A1 and including a proposal for automatic computation of a setback schedule based on sensed occupancy patterns in the home as discussed in G. Gao and K. Whitehouse The Self Programming Thermostat Optimizing Setback Schedules Based on Home Occupancy Patterns Proceedings of the First ACM Workshop on Embedded Sensing Systems for Energy Efficiency in Buildings pp. 67 72 Association for Computing Machinery November 2009 . It has been found however that crucial and substantial issues arise when it comes to the practical integration of self programming behaviors into mainstream residential and or business use issues that appear unaddressed and unresolved in such self programming thermostat proposals. By way of example just as there are many users who are intimidated by dizzying arrays of controls on user programmable thermostats there are also many users who would be equally uncomfortable with a thermostat that fails to give the user a sense of control and self determination over their own comfort or that otherwise fails to give confidence to the user that their wishes are indeed being properly accepted and carried out at the proper times. At a more general level because of the fact that human beings must inevitably be involved there is a tension that arises between i the amount of energy saving sophistication that can be offered by an HVAC control system and ii the extent to which that energy saving sophistication can be put to practical everyday use in a large number of homes. Similar issues arise in the context of multi unit apartment buildings hotels retail stores office buildings industrial buildings and more generally any living space or work space having one or more HVAC systems. It has been found that the user interface of a thermostat which so often seems to be an afterthought in known commercially available products represents a crucial link in the successful integration of self programming thermostats into widespread residential and business use and that even subtle visual and tactile cues can make a large difference in whether those efforts are successful.

Thus it would be desirable to provide a thermostat having an improved user interface that is simple intuitive elegant and easy to use such that the typical user is able to access many of the energy saving and comfort maintaining features while at the same time not being overwhelmed by the choices presented. It would be further desirable to provide a user interface for a self programming or learning thermostat that provides a user setup and learning instantiation process that is relatively fast and easy to complete while at the same time inspiring confidence in the user that their setpoint wishes will be properly respected. It would be still further desirable to provide a user interface for a self programming or learning thermostat that provides convenient access to the results of the learning algorithms and methods for fast intuitive alteration of scheduled setpoints including learned setpoints. It would be even further desirable to provide a user interface for a self programming or learning thermostat that provides insightful feedback and encouragement regarding energy saving behaviors performance and or results associated with the operation of the thermostat. Notably although one or more of the embodiments described infra is particularly advantageous when incorporated with a self programming or learning thermostat it is to be appreciated that their incorporation into non learning thermostats can be advantageous as well and is within the scope of the present teachings. Other issues arise as would be apparent to one skilled in the art upon reading the present disclosure.

Indeed consider that users can use a variety of devices to control home operations. For example thermostats can be used to control home temperatures refrigerators can be used to control refrigerating temperatures and light switches can be used to control light power states and intensities. Extreme operation of the devices can frequently lead to immediate user satisfaction. For example users can enjoy bright lights warm temperatures in the winter and very cold refrigerator temperatures. Unfortunately the extreme operation can result in deleterious costs. Excess energy can be used which can contribute to harmful environmental consequences. Further device parts e.g. light bulbs or fluids life cycles can be shortened which can result in excess waste.

Typically these costs are ultimately shouldered by users. Users may experience high electricity bills or may need to purchase parts frequently. Unfortunately these user shouldered costs are often time separated from the behaviors that led to them. Further the costs are often not tied to particular behaviors but rather to a group of behaviors over a time span. Thus users may not fully appreciate which particular behaviors most contributed to the costs. Further unless users have experimented with different behavior patterns they may be unaware of the extent to which their behavior can influence the experienced costs. Therefore users can continue to obliviously operate devices irresponsibly thereby imposing higher costs on themselves and on the environment.

Furthermore many controllers are designed to output control signals to various dynamical components of a system based on a control model and sensor feedback from the system. Many systems are designed to exhibit a predetermined behavior or mode of operation and the control components of the system are therefore designed by traditional design and optimization techniques to ensure that the predetermined system behavior transpires under normal operational conditions. A more difficult control problem involves design and implementation of controllers that can produce desired system operational behaviors that are specified following controller design and implementation. Theoreticians researchers and developers of many different types of controllers and automated systems continue to seek approaches to controller design to produce controllers with the flexibility and intelligence to control systems to produce a wide variety of different operational behaviors including operational behaviors specified after controller design and manufacture.

Although certain control systems in existence before those described below have been used in efforts to improve energy efficiency these prior control systems may depend heavily on user feedback and such user feedback could be energy inefficient. For example many users may select temperature setpoints for an HVAC system based primarily on comfort rather than energy efficiency. Yet such energy inefficient feedback could cause a control system to inefficiently control the HVAC system.

A summary of certain embodiments disclosed herein is set forth below. It should be understood that these aspects are presented merely to provide the reader with a brief summary of these certain embodiments and that these aspects are not intended to limit the scope of this disclosure. Indeed this disclosure may encompass a variety of aspects that may not be set forth below.

Embodiments of this disclosure relate to systems and methods for efficiently controlling energy consuming systems such as a heating ventilation or air conditioning HVAC system. For example a method may involve via one or more electronic devices configured to effect control over such a system encouraging a user to select a first more energy efficient temperature setpoint over a second less energy efficient temperature setpoint and perhaps as a result receiving a user selection of the first temperature setpoint. Thus using this more efficient temperature setpoint a schedule of temperature setpoints used to control the system may be generated or modified.

In another example one or more tangible non transitory machine readable media may encode instructions to be carried out on an electronic device. The electronic device may at least partially control an energy consuming system. The instructions may cause an energy savings encouragement indicator to be displayed on an electronic display. The energy savings encouragement indicator may prompt a user to select more energy efficient rather than less energy efficient system control setpoints used to control the energy consuming system. The instructions may also automatically generate or modify a schedule of system control setpoints based at least partly on the more energy efficient system control setpoints when the more energy efficient system control setpoints are selected by the user.

Another example method may be carried out on an electronic device that effects control over a heating ventilation or air conditioning HVAC system. The method may include receiving a user indication of a desired temperature setpoint of the system and displaying a non verbal indication meant to encourage energy efficient selections. To this end the non verbal indication may provide immediate feedback in relation to energy consequences of the desired temperature setpoint.

In a further example an electronic device for effecting control over a heating ventilation or air conditioning HVAC system includes a user input interface an electronic display and a processor. The user input interface may receive an indication of a user selection of or a user navigation to a user selectable temperature setpoint. The processor may cause the electronic display to variably display an indication calculated to encourage the user to select energy efficient temperature setpoints. The indication may be variably displayed based at least in part on energy consequences of the temperature setpoint.

Various refinements of the features noted above may be used in relation to various aspects of the present disclosure. Further features may also be incorporated in these various aspects as well. These refinements and additional features may be used individually or in any combination. For instance various features discussed below in relation to one or more of the illustrated embodiments may be incorporated into any of the above described aspects of the present disclosure alone or in any combination. The brief summary presented above is intended only to familiarize the reader with certain aspects and contexts of embodiments of the present disclosure without limitation to the claimed subject matter.

One or more specific embodiments of the present disclosure will be described below. These described embodiments are only examples of the presently disclosed techniques. Additionally in an effort to provide a concise description of these embodiments all features of an actual implementation may not be described in the specification. It should be appreciated that in the development of any such actual implementation as in any engineering or design project numerous implementation specific decisions must be made to achieve the developers specific goals such as compliance with system related and business related constraints which may vary from one implementation to another. Moreover it should be appreciated that such a development effort might be complex and time consuming but may nevertheless be a routine undertaking of design fabrication and manufacture for those of ordinary skill having the benefit of this disclosure.

When introducing elements of various embodiments of the present disclosure the articles a an and the are intended to mean that there are one or more of the elements. The terms comprising including and having are intended to be inclusive and mean that there may be additional elements other than the listed elements. Additionally it should be understood that references to one embodiment or an embodiment of the present disclosure are not intended to be interpreted as excluding the existence of additional embodiments that also incorporate the recited features.

As used herein the term HVAC includes systems providing both heating and cooling heating only cooling only as well as systems that provide other occupant comfort and or conditioning functionality such as humidification dehumidification and ventilation.

As used herein the terms power harvesting sharing and stealing when referring to HVAC thermostats all refer to the thermostat are designed to derive power from the power transformer through the equipment load without using a direct or common wire source directly from the transformer.

As used herein the term residential when referring to an HVAC system means a type of HVAC system that is suitable to heat cool and or otherwise condition the interior of a building that is primarily used as a single family dwelling. An example of a cooling system that would be considered residential would have a cooling capacity of less than about 5 tons of refrigeration 1 ton of refrigeration 12 000 Btu h .

As used herein the term light commercial when referring to an HVAC system means a type of HVAC system that is suitable to heat cool and or otherwise condition the interior of a building that is primarily used for commercial purposes but is of a size and construction that a residential HVAC system is considered suitable. An example of a cooling system that would be considered residential would have a cooling capacity of less than about 5 tons of refrigeration.

As used herein the term thermostat means a device or system for regulating parameters such as temperature and or humidity within at least a part of an enclosure. The term thermostat may include a control unit for a heating and or cooling system or a component part of a heater or air conditioner. As used herein the term thermostat can also refer generally to a versatile sensing and control unit VSCU unit that is configured and adapted to provide sophisticated customized energy saving HVAC control functionality while at the same time being visually appealing non intimidating elegant to behold and delightfully easy to use.

Although being formed from a single lens like piece of material such as polycarbonate the cover has two different regions or portions including an outer portion and a central portion . According to some embodiments the cover is painted or smoked around the outer portion but leaves the central portion visibly clear so as to facilitate viewing of an electronic display disposed thereunderneath. According to some embodiments the curved cover acts as a lens that tends to magnify the information being displayed in electronic display to users. According to some embodiments the central electronic display is a dot matrix layout individually addressable such that arbitrary shapes can be generated rather than being a segmented layout. According to some embodiments a combination of dot matrix layout and segmented layout is employed. According to some embodiments central display is a backlit color liquid crystal display LCD . An example of information displayed on the electronic display is illustrated in and includes central numerals that are representative of a current setpoint temperature. According to some embodiments metallic portion has number of slot like openings so as to facilitate the use of a passive infrared motion sensor mounted therebeneath. The metallic portion can alternatively be termed a metallic front grille portion. Further description of the metallic portion front grille portion is provided in the commonly assigned U.S. Ser. No. 13 199 108 supra. The thermostat is preferably constructed such that the electronic display is at a fixed orientation and does not rotate with the outer ring so that the electronic display remains easily read by the user. For some embodiments the cover and metallic portion also remain at a fixed orientation and do not rotate with the outer ring . According to one embodiment in which the diameter of the thermostat is about 80 mm the diameter of the electronic display is about 45 mm. According to some embodiments an LED indicator is positioned beneath portion to act as a low power consuming indicator of certain status conditions. For example the LED indicator can be used to display blinking red when a rechargeable battery of the thermostat see infra is very low and is being recharged. More generally the LED indicator can be used for communicating one or more status codes or error codes by virtue of red color green color various combinations of red and green various different blinking rates and so forth which can be useful for troubleshooting purposes.

Motion sensing as well as other techniques can be use used in the detection and or predict of occupancy as is described further in the commonly assigned U.S. Ser. No. 12 881 430 supra. According to some embodiments occupancy information is used in generating an effective and efficient scheduled program. Preferably an active proximity sensor A is provided to detect an approaching user by infrared light reflection and an ambient light sensor B is provided to sense visible light. The proximity sensor A can be used to detect proximity in the range of about one meter so that the thermostat can initiate waking up when the user is approaching the thermostat and prior to the user touching the thermostat. Such use of proximity sensing is useful for enhancing the user experience by being ready for interaction as soon as or very soon after the user is ready to interact with the thermostat. Further the wake up on proximity functionality also allows for energy savings within the thermostat by sleeping when no user interaction is taking place our about to take place. The ambient light sensor B can be used for a variety of intelligence gathering purposes such as for facilitating confirmation of occupancy when sharp rising or falling edges are detected because it is likely that there are occupants who are turning the lights on and off and such as for detecting long term e.g. 24 hour patterns of ambient light intensity for confirming and or automatically establishing the time of day.

According to some embodiments for the combined purposes of inspiring user confidence and further promoting visual and functional elegance the thermostat is controlled by only two types of user input the first being a rotation of the outer ring as shown in referenced hereafter as a rotate ring or ring rotation input and the second being an inward push on an outer cap see until an audible and or tactile click occurs referenced hereafter as an inward click or simply click input . For the embodiment of the outer cap is an assembly that includes all of the outer ring cover electronic display and metallic portion . When pressed inwardly by the user the outer cap travels inwardly by a small amount such as 0.5 mm against an interior metallic dome switch not shown and then springably travels back outwardly by that same amount when the inward pressure is released providing a satisfying tactile click sensation to the user s hand along with a corresponding gentle audible clicking sound. Thus for the embodiment of an inward click can be achieved by direct pressing on the outer ring itself or by indirect pressing of the outer ring by virtue of providing inward pressure on the cover metallic portion or by various combinations thereof. For other embodiments the thermostat can be mechanically configured such that only the outer ring travels inwardly for the inward click input while the cover and metallic portion remain motionless. It is to be appreciated that a variety of different selections and combinations of the particular mechanical elements that will travel inwardly to achieve the inward click input are within the scope of the present teachings whether it be the outer ring itself some part of the cover or some combination thereof. However it has been found particularly advantageous to provide the user with an ability to quickly go back and forth between registering ring rotations and inward clicks with a single hand and with minimal amount of time and effort involved and so the ability to provide an inward click directly by pressing the outer ring has been found particularly advantageous since the user s fingers do not need to be lifted out of contact with the device or slid along its surface in order to go between ring rotations and inward clicks. Moreover by virtue of the strategic placement of the electronic display centrally inside the rotatable ring a further advantage is provided in that the user can naturally focus their attention on the electronic display throughout the input process right in the middle of where their hand is performing its functions. The combination of intuitive outer ring rotation especially as applied to but not limited to the changing of a thermostat s setpoint temperature conveniently folded together with the satisfying physical sensation of inward clicking together with accommodating natural focus on the electronic display in the central midst of their fingers activity adds significantly to an intuitive seamless and downright fun user experience. Further descriptions of advantageous mechanical user interfaces and related designs which are employed according to some embodiments can be found in U.S. Ser. No. 13 033 573 supra U.S. Ser. No. 29 386 021 supra and U.S. Ser. No. 13 199 108 supra.

According to some embodiments the thermostat includes a processing system display driver and a wireless communications system . The processing system is adapted to cause the display driver and display area to display information to the user and to receiver user input via the rotatable ring . The processing system according to some embodiments is capable of carrying out the governance of the operation of thermostat including the user interface features described herein. The processing system is further programmed and configured to carry out other operations as described further hereinbelow and or in other ones of the commonly assigned incorporated applications. For example processing system is further programmed and configured to maintain and update a thermodynamic model for the enclosure in which the HVAC system is installed such as described in U.S. Ser. No. 12 881 463 supra. According to some embodiments the wireless communications system is used to communicate with devices such as personal computers and or other thermostats or HVAC system components which can be peer to peer communications communications through one or more servers located on a private network or and or communications through a cloud based service.

Backplate includes electronics and a temperature humidity sensor in housing which are ventilated via vents . Two or more temperature sensors not shown are also located in the head unit and cooperate to acquire reliable and accurate room temperature data. Wire connectors are provided to allow for connection to HVAC system wires. Connection terminal provides electrical connections between the head unit and backplate . Backplate electronics also includes power sharing circuitry for sensing and harvesting power available power from the HVAC system circuitry.

According to some embodiments the transitions between some screens use a coin flip transition and or a translation or shifting of displayed elements as described in U.S. patent application Ser. No. 13 033 573 supra. The animated coin flip transition between progressions of thermostat display screens which is also illustrated in the commonly assigned U.S. Ser. No. 29 399 625 supra has been found to be advantageous in providing a pleasing and satisfying user experience not only in terms of intrinsic visual delight but also because it provides a unique balance between logical segregation a sense that one is moving on to something new and logical flow a sense of connectedness and causation between the previous screen and the next screen . Although the type of transitions may not all be labeled in the figures herein it is understood that different types of screen to screen transitions could be used so as to enhance the user interface experience for example by indicating to the user a transition to a different step or setting or a return to a previous screen or menu.

In screen the user proceeds to the connection setup steps by selecting CONNECT with the rotatable ring followed by an inward click. Selecting CONNECT causes the thermostat to scan for wireless networks and then to display screen in . If the user selects SKIP then screen is displayed which informs the user that they can connect at any time from the settings menu. The user acknowledges this by clicking which leads to screen . In screen the first step Internet Connection is greyed out which indicates that this step has been intentionally skipped.

In screen is shown after a scan is made for wireless networks e.g. using Wi Fi or ZigBee wireless communication . In the example shown in screen two wireless networks have been found and are displayed Network2 and Network3. The electronic display preferably also includes a lock icon to show that the network uses password security and also can show a wireless icon to indicate the wireless connection to the network. According to some embodiments wireless signal icon can show a number of bars that indicates relative signal strength associated with that network. If the user selects one of the found networks that requires a password screen is displayed to obtain the password from the user. Screen uses an alphanumeric input interface where the user selects and enters characters by rotating the ring and clicking. Further details of this type of data entry interface is described in the commonly assigned U.S. Ser. No. 13 033 573 supra. The user is reminded that a password is being entered by virtue of the lock icon . After the password is entered screen is displayed while the thermostat tries to establish a connection to the indicated Wi Fi network. If the network connection is established and the internet is available then the thermostat attempts to connect to the manufacturer s server. A successful connection to the server is shown in screen . After a pause or a click to acknowledge screen is displayed that indicates that the internet connection setup step has been successfully completed. According to some embodiments a checkmark icon is used to indicate successful completion of the step.

If no connection to the selected local network could be established screen is displayed notifying the user of such and asking if a network testing procedure should be carried out. If the user selects TEST then screen with a spinner icon is displayed while a network test is carried out. If the test discovers an error a screen such as screen is displayed to indicate the nature of the errors. According to some embodiments the user is directed to further resources online for more detailed support.

If the local network connection was successful but no connection to the manufacturer s server could be established then in screen the user is notified of the status and acknowledges by clicking CONTINUE. In screen the user is asked if they wish to try a different network. If the user selects NETWORK then the thermostat scans for available networks and then moves to screen . If the user selects SKIP then screen is displayed.

Under some circumstances for example following a network test screen the system determines that a software and or firmware update is needed. In such cases screen is displayed while the update process is carried out. Since some processes such as downloading and installing updates can take a relatively long time a notice combined with a spinner having a percent indicator can be shown to keep the user informed of the progress. Following the update the system usually needs to be rebooted. Screen informs the user of this.

According to some embodiments in cases where more than one thermostat is located in the same dwelling or business location the units can be associated with one another as both being paired to the user s account on a cloud based management server. When a successful network and server connection is established screen and if the server notes that there is already an online account associated with the current location by comparison of a network address of the thermostat with that of other currently registered thermostats then screen is displayed asking the user if they want to add the current thermostat to the existing account. If the user selects ADD the thermostat is added to the existing account as shown in screens and . After adding the current thermostat to the online account. If there is more than one thermostat on the account a procedure is offered to copy settings beginning with screen . In screen notifies the user that another thermostat in this case named Living Room is also associated with the user s account and asks the user if the settings should be copies. If the user selects COPY SETTINGS then the screen is displayed with a spinner while settings are copied to the new thermostat. According to some embodiments one or more of the following settings are copied account pairing learning preferences e.g. learning on or learning off heating or cooling mode if feasible location setup interview answers current schedule and off season schedule if any .

Advantageous functionalities can be provided by two different instances of the thermostat unit located in a common enclosure such as a family home that are associated with a same user account in the cloud based management server such as the account tomsmith3 mailhost.com in . For purposes of the present description it can be presumed that each thermostat is a primary thermostat characterized in that it is connected to an HVAC system and is responsible for controlling that HVAC system which can be distinguished from an auxiliary thermostat having many of the same sensing and processing capabilities of the thermostat except that an auxiliary thermostat does not connect to an HVAC system but rather influences the operation of one or more HVAC systems by virtue of its direct or indirect communication with one or more primary thermostats. However the scope of the present disclosure is not so limited and thus in other embodiments there can be cooperation among various combinations of primary and or auxiliary thermostats.

A particular enclosure such as a family home can use two primary thermostats where there are two different HVAC systems to control such as a downstairs HVAC system located on a downstairs floor and an upstairs HVAC system located on an upstairs floor. Where the thermostats have become logically associated with a same user account at the cloud based management server such as by operation of the screens the two thermostats advantageously cooperate with one another in providing optimal HVAC control of the enclosure as a whole. Such cooperation between the two thermostats can be direct peer to peer cooperation or can be supervised cooperation in which the central cloud based management server supervises them as one or more of a master referee mediator arbitrator and or messenger on behalf of the two thermostats. In one example an enhanced auto away capability is provided wherein an away mode of operation is invoked only if both of the thermostats have sensed a lack of activity for a requisite period of time. For one embodiment each thermostat will send an away state vote to the management server if it has detected inactivity for the requisite period but will not go into an away state until it receives permission to do so from the management server. In the meantime each thermostat will send a revocation of its away state vote if it detects occupancy activity in the enclosure. The central management server will send away state permission to both thermostats only if there are current away state votes from each of them. Once in the collective away state if either thermostat senses occupancy activity that thermostat will send a revocation to the cloud based management server which in turn will send away state permission revocation or an arrival command to both of the thermostats. Many other types of cooperation among the commonly paired thermostats i.e. thermostats associated with the same account at the management server can be provided without departing from the scope of the present teachings.

Where there is more than one thermostat for a particular enclosure and those thermostats are associated with the same account on the cloud based management server one preferred method by which that group of thermostats can cooperate to provide enhanced auto away functionality is as follows. Each thermostat maintains a group state information object that includes i a local auto away ready AAR flag that reflects whether that individual thermostat considers itself to be auto away ready and ii one or more peer auto away ready AAR flags that reflect whether each other thermostat in the group considers itself to be auto away ready. The local AAR flag for each thermostat appears as a peer AAR flag in the group state information object of each other thermostat in the group. Each thermostat is permitted to change its own local AAR flag but is only permitted to read its peer AAR flags. It is a collective function of the central cloud based management server and the thermostats to communicate often enough such that the group state information object in each thermostat is maintained with fresh information and in particular that the peer AAR flags are kept fresh. This can be achieved for example by programming each thermostat to immediately communicate any change in its local AAR flag to the management server at which time the management server can communicate that change immediately with each other thermostat in the group to update the corresponding peer AAR flag. Other methods of direct peer to peer communication among the thermostats can also be used without departing from the scope of the present teachings.

According to a preferred embodiment the thermostats operate in a consensus mode such that each thermostat will only enter into an actual away state if all of the AAR flags for the group are set to yes or ready . Therefore at any particular point in time either all of the thermostats in the group will be in an away state or none of them will be in the away state. In turn each thermostat is configured and programmed to set its AAR flag to yes if either or both of two sets of criteria are met. The first set of criteria is met when all of the following are true i there has been a period of sensed inactivity for a requisite inactivity interval according to that thermostat s sensors such as its passive infrared PIR motion sensors active infrared proximity sensors PROX and other occupancy sensors with which it may be equipped ii the thermostat is auto away confident in that it has previously qualified itself as being capable of sensing statistically meaningful occupant activity at a statistically sufficient number of meaningful times and iii other basic reasonableness criteria for going into an auto away mode are met such as a the auto away function was not previously disabled by the user b the time is between 8 AM and 8 PM if the enclosure is not a business c the thermostat is not in OFF mode d the away state temperature is more energy efficient than the current setpoint temperature and e the user is not interacting with the thermostat remotely through the cloud based management server. The second set of criteria is met when all of the following are true i there has been a period of sensed inactivity for a requisite inactivity interval according to that thermostat s sensors ii the AAR flag of at least one other thermostat in the group is yes and iii the above described reasonableness criteria are all met. Advantageously by special virtue of the second set of alternative criteria by which an individual thermostat can set its AAR flag to yes it can be the case that all of the thermostats in the group can contribute the benefits of their occupancy sensor data to the group auto away determination even where one or more of them are not auto away confident as long as there is at least one member that is auto away confident. This method has been found to increase both the reliability and scalability of the energy saving auto away feature with reliability being enhanced by virtue of multiple sensor locations around the enclosure and with scalability being enhanced in that the misplacement of one thermostat for example installed at an awkward location behind a barrier that limits PIR sensitivity causing that thermostat to be away non confident will not jeopardize the effectiveness or applicability of the group consensus as a whole.

It is to be appreciated that the above described method is readily extended to the case where there are multiple primary thermostats and or multiple auxiliary thermostats. It is to be further appreciated that as the term primary thermostat is used herein it is not required that there be a one to one correspondence between primary thermostats and distinct HVAC systems in the enclosure. For example there are many installations in which plural zones in the enclosure may be served by a single HVAC system by virtue of controllable dampers that can stop and or redirect airflow to and among the different zones from the HVAC system. In such cases there can be a primary thermostat for each zone each of the primary thermostats being wired to the HVAC system as well as to the appropriate dampers to regulate the climate of its respective zone.

Referring now again to in screen a name is entered for the thermostat assuming the thermostat is being installed in a dwelling rather than in a business. The list of choices is larger than the screen allows so according to some embodiments the list scrolls up and down responsive to user ring rotation so the user can view all the available choices. For purposes of clarity of description it is to be appreciated that when a listing of menu choices is illustrated in the drawings of the present disclosure as going beyond the spatial limits of a screen such as shown with listing of screen those menu choices will automatically scroll up and down as necessary to be viewable by the user as they rotate the rotatable ring . The available choices of names in this case are shown including an option to enter a custom name by selecting TYPE NAME . The first entry Nest 2 is a generic thermostat name and assumes there is already a thermostat on the account named Nest 1. If there already is a Nest 2 thermostat then the name Nest 3 will be offered and so on. If the user selects TYPE NAME then a character entry user interface is used to enter a name. Screen shows a thermostat naming screen analogous to screen except that is represents a case in which the thermostat is being installed in a business rather than a dwelling. Screen is displayed when thermostat learning or self programming features are turned on. In this case the user is asked if the current schedule from the other thermostat should be copied. Screens and show what is displayed after completion of the Internet connection server connection and pairing procedures are completed. Screen is used in the case there an Internet connection is established but no pairing is made with a user account on the server. Screen is used in the case where both an Internet connection and pairing the user s account on the server is established. Finally screen is used in the case where no internet connection was successfully established. In all cases the next setup topic is Heating and Cooling. 

If the user selects HEATING at screen then in screen the user is asked to set a low energy using away heating temperature that should be maintained when the home or business is unoccupied. According to some embodiments the default value offered to the user is 65 degrees F. the maximum value selectable by the user is 75 degrees F. the minimum value selectable is 55 degrees F. and a leaf or other suitable energy savings encouragement indicator is displayed when the user selects a value below 63 degrees F. Screens and show examples of the user inputting 63 and 62 degrees respectively. According to some embodiments a schedule is then created while the screen is displayed to the user.

According to some alternate embodiments parameters other than simply the difference in current to setpoint temperature can be used in displaying background colors and intensity. For example time to temp the estimated amount of time it will take to reach the current setpoint temperature amount of energy and or cost if accurately known can also be used alone or in combination determine which color and how intense or opaque is used for the background of the thermostat display.

According to some preferred embodiments the characters and other graphics are mainly displayed in white overlying the black orange or blue backgrounds as described above. Other colors for certain displayed features such green for the leaf logo are also used according to some embodiments. Although many of the screens shown and described herein are provided in the accompanying drawings with black characters and graphics overlaying a white background for purposes of clarity and print reproduction it is to be understood that the use of white or colored graphics and characters over black and colored backgrounds such is generally preferable for enhancing the user experience particularly for embodiments where the electronic display is a backlit dot matrix LCD display similar to those used on handheld smartphones and touchpad computers. Notably although the presently described color schemes have been found to be particularly effective it is to be appreciated that the scope of the present teachings is not necessarily so limited and that other impactful schemes could be developed for other types of known or hereinafter developed electronic display technologies e.g. e ink electronic paper displays organic LED displays etc. in view of the present description without departing from the scope of the present teachings.

In screen has a red orange background color with white central numerals indicating the current setpoint of 72 degrees F. The current setpoint of 72 degrees is also shown by the large tick mark . The current ambient temperature is 70 degrees as shown by the small numerals and the tick mark . Other tick marks in a circular arrangement are shown in a more transparent or more muted white color to give the user a sense of the range of adjustments and temperatures in keeping with the circular design of the thermostat display area and rotatable ring. According to some embodiments the circular arrangement of background tick marks are sized and spaced apart so that 180 tick marks would complete a circle but 40 tick marks are skipped at the bottom such that a maximum of 140 tick marks are displayed. The setpoint tick mark and the current temperature tick mark may replace some the of the background tick marks such that not all of the background tick marks are displayed. Additionally the current temperature is displayed numerically using numerals which can also be overlaid or displayed in muted or transparent fashion over the background tick marks. According to some embodiments so as to accentuate visibility the setpoint tick mark is displayed in 100 opacity or 0 transparency is sized such that it extends 20 farther towards the display center than the background tick marks and is further emphasized by the adjacent background tick marks not being displayed. According to some embodiments a time to temperature display is used to indicate the estimated time needed to reach the current setpoint as is described more fully co pending commonly assigned patent application U.S. Ser. No. 12 984 602. shows a screen which displays a HEAT TO message indicating that the HVAC system is in heating mode although currently is not active HEATING will be displayed when the HVAC system is active . According to some embodiments the background color of screen is a neutral color such as black. A fan logo can be displayed indicating the fan is active without any associated heating or cooling. Further a lock icon can be displayed when the thermostat is locked. shows a screen which has the message COOLING indicating that cooling is being called for in addition to a background color such as blue. In this case the message COOLING is displayed instead of the time to temp display since there may be low confidence in the time to temp number may such as due to insufficient data for a more accurate estimation . In screen shows an example similar to screen but with the time to temp displayed instead of message indicating that there is a higher confidence in the time to temp estimation. Note that the background color of screen and are bluish so as to indicate HVAC cooling is active although the color may be partially muted or partially transparent since the current setpoint temperature and current ambient temperature is relatively close.

According to some embodiments to facilitate the protection of compressor equipment from damage such as with conventional cooling compressors or with heat pump heating compressors the thermostat prevents re activation of a compressor within a specified time period lockout period from de activation so as to avoid compressor damage that can occur if the de activation to re activation interval is too short. For example the thermostat can be programmed to prevent re activation of the compressor within a lockout interval of 2 minutes after de activation regardless of what happens with the current ambient temperature and or current setpoint temperature within that lockout interval. Longer or shorter lockout periods can be provided with 2 minutes being just one example of a typical lockout period. During this lockout period according to some embodiments a message such as message in screen of is displayed which provides a visually observable countdown until the end of the lockout interval so as to keep the user informed and avoid confusion on the user s part as to why the compressor has not yet started up again.

According to some embodiments a manual setpoint change will be active until an effective time of the next programmed setpoint. For example if at 2 38 PM the user walks up to the thermostat and rotates the outer ring see supra to manually adjust the setpoint to 68 degrees F. and if the thermostat has a programmed schedule containing a setpoint that is supposed to take effect at 4 30 PM with a setpoint temperature that is different than 68 degrees F. then the manual setpoint temperature change will only be effective until 4 30 PM. According to some embodiments a message such as message till 4 30 PM will be displayed on screen in which informs the user that their setpoint of 68 degrees F. will be in effect until 4 30 PM.

According to a preferred embodiment all of the operational screens of the thermostat described herein that correspond to normal everyday operations such as the screens of will actually only appear when the proximity sensor A see supra indicates the presence of a user or occupant in relatively close proximity e.g. 50 cm 200 cm or closer to the thermostat and the electronic display will otherwise be dark. While the user is proximal to the thermostat the electronic display will remain active and when the user walks away out of proximity the electronic display will remain active for a predetermined period of time such as 20 seconds and then will go dark. In contrast to an alternative of keeping the electronic display active all of the time this selective turn on and turn off of the electronic display has been found to be a preferable method of operation for several reasons including the savings of electrical power that would otherwise be needed for an always on electronic display extension of the hardware life of the electronic display and also aesthetic reasons for domestic installations. The savings of electrical power is particularly advantageous for installations in which there is no C wire provided by the HVAC system since it will often be the case that the average power that can safely obtained from power stealing methods will be less than the average power used by a visually pleasing hardware implementation of the electronic display when active. Advantageously by designing the thermostat with the rechargeable battery and programming its operation such that the electronic display will only be active when there is a proximal viewer the electronic display itself can be selected and sized to be bright bold informative and visually pleasing even where such operation takes more instantaneous average electrical power than the power stealing can provide because the rechargeable battery can be used to provide the excess power needed for active display and then can be recharged during periods of lesser power usage when the display is not active. This is to be contrasted with many known prior art electronic thermostats whose displays are made very low power and less visually pleasing in order to keep the thermostat s instantaneous power usage at budget power stealing levels. Notably it is also consistent with the aesthetics of many home environments not to have a bright and bold display on at all times such as for cases in which the thermostat is located in a bedroom or in a media viewing room such as a television room. The screens of can be considered as the main display for thermostat in that these are the screens that are most often shown to the user as they walk up to the thermostat in correspondence with normal everyday operation.

According to one embodiment the thermostat is programmed and configured such that upon the detection of a working C wire at device installation and setup the user is automatically provided with a menu choice during the setup interview and then revised later at any time through the settings menu whether they would like the electronic display to be on all the time or only upon detection of a proximal user. If a C wire is not detected that menu choice is not provided. A variety of alternative display activation choices can also be provided such as allowing the user to set an active display timeout interval e.g. how long the display remains active after the user has walked away allowing the user to choose a functionality similar to night lighting or safety lighting i.e. upon detection of darkness in the room by the ambient light sensor B the display will be always on and other useful functionalities. According to yet another embodiment if the presence of a C wire is not detected the thermostat will automatically test the power stealing circuitry to see how much power can be tapped without tripping the call relay s and if that amount is greater than a certain threshold then the display activation menu choices are provided but if that amount is less than the certain threshold the display activation menu choices are not provided.

Screen has a central disk indicating the name of the sub menu in this case the Fan mode. Some sub menus only contain a few options which can be selected or toggled among by inward clicking alone. For example the Fan sub menu only has two settings automatic shown in screen and always on shown in screen . In this case the fan mode is changed by inward clicking which simply toggles between the two available options. Ring rotation shifts to the next or previous settings sub menu item. Thus rotating the ring from the fan sub menu shift to the system on off sub menu shown in screens in the case of system ON and in the case of system OFF . The system on off sub menu is another example of simply toggling between the two available options using the inward click user input.

In screen is the top level of the lock sub menu. If the thermostat is connected and paired i.e. has Internet access and is appropriately paired with a user account on a cloud based server an inward click will lead to screen . At screen the user can vary the highlighting between the displayed selections by rotating the rotatable ring and then can select the currently displayed menu item by inward clicking the rotatable ring . If LOCKED is selected then the user is asked to enter a locking PIN in screen . If the thermostat is already locked then screen is displayed instead of screen . If the thermostat is unlocked then a PIN confirmation is requested such as in screen . If the confirmation PIN does not match then the user is asked to enter a new PIN in screen . If the confirmation PIN matches then the temperature limits are set in screens and or in . The described locking capability can be useful in a variety of contexts such as where a parent desires the limit the ability of their teenager to set the temperature too high in winter or too low in summer. According to some embodiments locking of the thermostat is not permitted if the thermostat is not connected to the Internet or is not paired to an account so that an online backup method of unlocking the thermostat is available should the user forget the PIN number. In such case if the thermostat is not connected to the Internet then screen is displayed and if the thermostat is not paired then screen is displayed.

Upon user ring rotation at screen screen is displayed which allows entry to the auto away sub menu. Screen asks if the auto away feature should be active. Screen notifies the user about the auto away feature. Screen is an example showing the user the status of training and or confidence in the occupancy sensors. Other examples instead of screen include TOO LOW FOR AUTO AWAY and ENOUGH FOR AUTO AWAY as appropriate.

In screen shows an example of a wiring warning which is denoted by a yellow or otherwise highlighted disk next to the connector terminal label cool . An inward click input leads to an explanation of the warning in this case being an error in which there is a wire insertion detected at terminal Y1 but no electronic signature consistent with a cooling system can be sensed. Note that the wiring warning shown in this example is not serious enough to block operation. However some wiring errors are serious enough such that HVAC operation is blocked. An example is shown in screen where the wires are detected on the C and Rc terminals but no power is detected. A red disk appears next to the terminal connected labeled cool which indicates a wiring error. Clicking leads to an explanation screen and a notification screen followed by a mandatory thermostat shut down blank screen . Examples of detected wiring warnings that do not block operation and wiring errors that block operation are discussed supra with respect to .

According to some embodiments timewise navigation within the week long schedule is accomplished using the rotatable ring shown in . Rotating the ring clockwise shifts the schedule in one direction such as in screen which is moves forward in time i.e. the schedule plot area shifts to the left relative to the centrally located current schedule time cursor bar and the analog clock spins forward in displayed time . Rotating the ring counter clockwise does the opposite as shown in screen shifting the schedule backwards in time i.e. the schedule plot area shifts to the right relative to the centrally located current schedule time cursor bar and the analog clock spins backward in displayed time . According to some preferred embodiments the schedule time adjustment using the rotatable ring is acceleration based. That is the speed that the schedule time is adjusted is based on the speed of rotation of the ring such that detailed adjustments in the current schedule time can be made by slowly rotating the ring while shifts from day to day or over multiple days can be made by rapidly rotating the ring. According to some embodiments the difference in acceleration rate factor is about 4 to 1 between the fastest and slowest rotating speeds to achieve both adequate precision and easy movement between days or to the end of the week. Screen shows an example of more rapid movement of the rotatable ring where the schedule has been shifted at a higher rate factor than in screen . According to some embodiments the schedule time adjustments are accompanied by audible click sound or other noise to provide further feedback and further enhance the user interface experience. According to some preferred embodiments the audible clicks correspond to each 15 minutes of schedule time that passes the time cursor bar .

If the time cursor bar is not positioned on an existing setpoint such as shown in screen and an inward click is received a create new setpoint option will be offered as in screen of . In screen if the user selects NEW then a new setpoint disk will appear on the time cursor bar as shown in screen . For some embodiments this birth of the new setpoint disk proceeds by virtue of an animation similar to that illustrated in the commonly assigned U.S. Ser. No. 29 399 637 supra wherein as soon as the user clicks on NEW a very small disk much smaller than the disk at screen appears near the top of the cursor bar and then progressively grows into its full size version as it visibly slides downward to land at a vertical location corresponding to a starting temperature setpoint value. For some embodiments the starting temperature setpoint value is equal to that of an immediately preceding setpoint in the schedule. Rotating the ring will then adjust the setpoint temperature of the new setpoint disk upward or downward from that starting temperature setpoint value. According to some embodiments an energy savings encouragement indicator such as the leaf logo is displayed when the new setpoint temperature corresponds to energy saving and or cost saving parameters which aids the user in making energy saving decisions. Once the temperature for the new setpoint is satisfactory an inward click allows adjustment of the setpoint time via the rotatable ring as shown in screen . Once the start time for the new setpoint is satisfactory another inward click establishes the new setpoint as shown in screen . If the time cursor bar is positioned on an existing setpoint such as shown in screen an inward click brings up a menu screen in which the user can choose to change the setpoint remove the setpoint or return out of the schedule viewer editor. If the user selects CHANGE then the user can make adjustments to the temperature and start time similar to the methods shown in screens and respectively.

According to some embodiments setpoints must be created on even quarter hours i.e. on the hour or 15 30 or 45 minutes past and two setpoints cannot be created or moved to be less than 60 minutes apart. Although the examples shown herein display a week long schedule according to other embodiments other time periods can be used for the displayed schedule such as daily 3 day two weeks etc.

As illustrated in the user can perform a ring rotation to change the setpoint with showing a new setpoint of 73 degrees along with a shift in the setpoint tick mark to a different arc location representative of the higher setpoint and with a current temperature tick mark and current temperature numerical display appearing as shown. As with other embodiments there is preferably a sweeping visual display of tick marks not illustrated in that sweeps from the current temperature tick mark to the setpoint temperature tick mark analogous to the tick mark sweep shown in supra. With the exception of the differently implemented ring rotation facility and the changing of various display layouts to conform to the rectangular electronic display screen operation of the thermostat is preferably similar to that of the circularly shaped thermostat embodiments described supra. Thus by way of non limiting example the thermostat is configured to provide a menu options screen not shown on electronic display that contains menu options such as Heat Cool Schedule Energy Settings Away and Done and to function similarly to that shown in responsive to rotation of the belt style rotatable ring with the exception that instead of the electronically displayed words moving around in a circular trajectory those words move around in a rectangular trajectory along the periphery of the electronic display .

Although the foregoing has been described in some detail for purposes of clarity it will be apparent that certain changes and modifications may be made without departing from the principles thereof. By way of example it is within the scope of the present teachings for the rotatable ring of the above described thermostat to be provided in a virtual static or solid state form instead of a mechanical form whereby the outer periphery of the thermostat body contains a touch sensitive material similar to that used on touchpad computing displays and smartphone displays. For such embodiments the manipulation by the user s hand would be a swipe across the touch sensitive material rather than a literal rotation of a mechanical ring the user s fingers sliding around the periphery but not actually causing mechanical movement. This form of user input which could be termed a virtual ring rotation static ring rotation solid state ring rotation or a rotational swipe would otherwise have the same purpose and effect of the above described mechanical rotations but would obviate the need for a mechanical ring on the device. Although not believed to be as desirable as a mechanically rotatable ring insofar as there may be a lesser amount of tactile satisfaction on the part of the user such embodiments may be advantageous for reasons such as reduced fabrication cost. By way of further example it is within the scope of the present teachings for the inward mechanical pressability or inward click functionality of the rotatable ring to be provided in a virtual or solid state form instead of a mechanical form whereby an inward pressing effort by the user s hand or fingers is detected using internal solid state sensors for example solid state piezoelectric transducers coupled to the outer body of the thermostat. For such embodiments the inward pressing by the user s hand or fingers would not cause actual inward movement of the front face of the thermostat as with the above described embodiments but would otherwise have the same purpose and effect as the above described inward clicks of the rotatable ring. Optionally an audible beep or clicking sound can be provided from an internal speaker or other sound transducer to provide feedback that the user has sufficiently pressed inward on the rotatable ring or virtual solid state rotatable ring. Although not believed to be as desirable as the previously described embodiments whose inwardly moving rotatable ring and sheet metal style rebounding mechanical click has been found to be particularly satisfying to users such embodiments may be advantageous for reasons including reduced fabrication cost. It is likewise within the scope of the present teachings for the described thermostat to provide both the ring rotations and inward clicks in virtual or solid state form whereby the overall device could be provided in fully solid state form with no moving parts at all.

By way of further example although described above as having ring rotations and inward clicks as the exclusive user input modalities which has been found particularly advantageous in terms of device elegance and simplicity it is nevertheless within the scope of the present teachings to alternatively provide the described thermostat with an additional button such as a back button. In one option the back button could be provided on the side of the device such as described in the commonly assigned U.S. Ser. No. 13 033 573 supra. In other embodiments plural additional buttons such as a menu button and so forth could be provided on the side of the device. For one embodiment the actuation of the additional buttons would be fully optional on the part of the user that is the device could still be fully controlled using only the ring rotations and inward clicks. However for users that really want to use the menu and back buttons because of the habits they may have formed with other computing devices such as smartphones and the like the device would accommodate and respond accordingly to such menu and back button inputs.

As described further herein one or more intelligent multi sensing network connected devices can be used to promote user comfort convenience safety and or cost savings. illustrates an example of general device components which can be included in an intelligent network connected device i.e. device which may represent an example of the thermostat discussed above. Each of one more or all devices within a system of devices can include one or more sensors a user interface component a power supply e.g. including a power connection and or battery a communications component a modularity unit e.g. including a docking station and replaceable module and intelligence components . Particular sensors user interface components power supply configurations communications components modularity units and or intelligence components can be the same or similar across devices or can vary depending on device type or model.

By way of example and not by way of limitation one or more sensors in a device may be able to e.g. detect acceleration temperature humidity water supplied power proximity external motion device motion sound signals ultrasound signals light signals fire smoke carbon monoxide global positioning satellite GPS signals or radio frequency RF or other electromagnetic signals or fields. Thus for example sensors can include temperature sensor s humidity sensor s hazard related sensor s or other environmental sensor s accelerometer s microphone s optical sensors up to and including camera s e.g. charged coupled device or video cameras active or passive radiation sensors GPS receiver s or radio frequency identification detector s . While illustrates an embodiment with a single sensor many embodiments will include multiple sensors. In some instances device includes one or more primary sensors and one or more secondary sensors. The primary sensor s can sense data central to the core operation of the device e.g. sensing a temperature in a thermostat or sensing smoke in a smoke detector . The secondary sensor s can sense other types of data e.g. motion light or sound which can be used for energy efficiency objectives or smart operation objectives. In some instances an average user may even be unaware of an existence of a secondary sensor.

One or more user interface components in device may be configured to receive input from a user and or present information to a user. User interface component can also include one or more user input components to receive information from a user. The received input can be used to determine a setting. The user input components can include a mechanical or virtual component that can respond to a user s motion thereof. For example a user can mechanically move a sliding component e.g. along a vertical or horizontal track or rotate a rotatable ring e.g. along a circular track or a user s motion along a touchpad can be detected. Such motions can correspond to a setting adjustment which can be determined based on an absolute position of a user interface component or based on a displacement of a user interface components e.g. adjusting a setpoint temperature by 1 degree F. for every 10 degrees of rotation of a rotatable ring component . Physically and virtually movable user input components can allow a user to set a setting along a portion of an apparent continuum. Thus the user is not confined to choose between two discrete options e.g. as would be the case if up and down buttons were used but can quickly and intuitively define a setting along a range of possible setting values. For example a magnitude of a movement of a user input component can be associated with a magnitude of a setting adjustment such that a user can dramatically alter a setting with a large movement or finely tune a setting with s small movement.

User interface components can further or alternatively include one or more buttons e.g. up and down buttons a keypad a number pad a switch a microphone and or a camera e.g. to detect gestures . In one embodiment user input component includes a click and rotate annular ring component wherein a user can interact with the component by rotating the ring e.g. to adjust a setting and or by clicking the ring inwards e.g. to select an adjusted setting or to select an option . In another embodiment user input component includes a camera such that gestures can be detected e.g. to indicate that a power or alarm state of a device is to be changed . In some instances device has only one primary input component which may be used to set a plurality of types of settings. User interface components can also be configured to present information to a user via e.g. a visual display e.g. a thin film transistor display or organic light emitting diode display and or an audio speaker.

A power supply component in device may include a power connection and or local battery . For example power connection can connect device to a power source such as a line voltage source. In some instances connection to an AC power source can be used to repeatedly charge a e.g. rechargeable local battery such that battery can later be used to supply power if needed in the event of an AC power disconnection or other power deficiency scenario.

A communications component in device can include a component that enables device to communicate with a central server or a remote device such as another device described herein or a portable user device. Communications component can allow device to communicate via e.g. Wi Fi ZigBee 3G 4G wireless CAT6 wired Ethernet HomePlug or other powerline communications method telephone or optical fiber by way of non limiting examples. Communications component can include a wireless card an Ethernet plug or another transceiver connection.

A modularity unit in device can include a static physical connection and a replaceable module . Thus the modularity unit can provide the capability to upgrade replaceable module without completely reinstalling device e.g. to preserve wiring . The static physical connection can include a docking station which may also be termed an interface box that can attach to a building structure. For example docking station could be mounted to a wall via screws or stuck onto a ceiling via adhesive. Docking station can in some instances extend through part of the building structure. For example docking station can connect to wiring e.g. to 120V line voltage wires behind the wall via a hole made through a wall s sheetrock. Docking station can include circuitry such as power connection circuitry and or AC to DC powering circuitry and can prevent the user from being exposed to high voltage wires. In some instances docking stations are specific to a type or model of device such that e.g. a thermostat device includes a different docking station than a smoke detector device. In some instances docking stations can be shared across multiple types and or models of devices .

Replaceable module of the modularity unit can include some or all sensors processors user interface components batteries communications components intelligence components and so forth of the device. Replaceable module can be configured to attach to e.g. plug into or connect to docking station . In some instances a set of replaceable modules are produced with the capabilities hardware and or software varying across the replaceable modules . Users can therefore easily upgrade or replace their replaceable module without having to replace all device components or to completely reinstall device . For example a user can begin with an inexpensive device including a first replaceable module with limited intelligence and software capabilities. The user can then easily upgrade the device to include a more capable replaceable module. As another example if a user has a Model 1 device in their basement a Model 2 device in their living room and upgrades their living room device to include a Model 3 replaceable module the user can move the Model 2 replaceable module into the basement to connect to the existing docking station. The Model 2 replaceable module may then e.g. begin an initiation process in order to identify its new location e.g. by requesting information from a user via a user interface .

Intelligence components of the device can support one or more of a variety of different device functionalities. Intelligence components generally include one or more processors configured and programmed to carry out and or cause to be carried out one or more of the advantageous functionalities described herein. The intelligence components can be implemented in the form of general purpose processors carrying out computer code stored in local memory e.g. flash memory hard drive random access memory special purpose processors or application specific integrated circuits combinations thereof and or using other types of hardware firmware software processing platforms. The intelligence components can furthermore be implemented as localized versions or counterparts of algorithms carried out or governed remotely by central servers or cloud based systems such as by virtue of running a Java virtual machine JVM that executes instructions provided from a cloud server using Asynchronous Javascript and XML AJAX or similar protocols. By way of example intelligence components can be intelligence components configured to detect when a location e.g. a house or room is occupied up to and including whether it is occupied by a specific person or is occupied by a specific number of people e.g. relative to one or more thresholds . Such detection can occur e.g. by analyzing microphone signals detecting user movements e.g. in front of a device detecting openings and closings of doors or garage doors detecting wireless signals detecting an IP address of a received signal or detecting operation of one or more devices within a time window. Intelligence components may include image recognition technology to identify particular occupants or objects.

In some instances intelligence components can be configured to predict desirable settings and or to implement those settings. For example based on the presence detection intelligence components can adjust device settings to e.g. conserve power when nobody is home or in a particular room or to accord with user preferences e.g. general at home preferences or user specific preferences . As another example based on the detection of a particular person animal or object e.g. a child pet or lost object intelligence components can initiate an audio or visual indicator of where the person animal or object is or can initiate an alarm or security feature if an unrecognized person is detected under certain conditions e.g. at night or when lights are out . As yet another example intelligence components can detect hourly weekly or even seasonal trends in user settings and adjust settings accordingly. For example intelligence components can detect that a particular device is turned on every week day at 6 30 am or that a device setting is gradually adjusted from a high setting to lower settings over the last three hours. Intelligence components can then predict that the device is to be turned on every week day at 6 30 am or that the setting should continue to gradually lower its setting over a longer time period.

In some instances devices can interact with each other such that events detected by a first device influences actions of a second device. For example a first device can detect that a user has pulled into a garage e.g. by detecting motion in the garage detecting a change in light in the garage or detecting opening of the garage door . The first device can transmit this information to a second device such that the second device can e.g. adjust a home temperature setting a light setting a music setting and or a security alarm setting. As another example a first device can detect a user approaching a front door e.g. by detecting motion or sudden light pattern changes . The first device can e.g. cause a general audio or visual signal to be presented e.g. such as sounding of a doorbell or cause a location specific audio or visual signal to be presented e.g. to announce the visitor s presence within a room that a user is occupying .

The depicted structure includes a plurality of rooms separated at least partly from each other via walls . The walls can include interior walls or exterior walls. Each room can further include a floor and a ceiling . Devices can be mounted on integrated with and or supported by a wall floor or ceiling .

The smart home depicted in includes a plurality of devices including intelligent multi sensing network connected devices that can integrate seamlessly with each other and or with cloud based server systems to provide any of a variety of useful smart home objectives. One more or each of the devices illustrated in the smart home environment and or in the figure can include one or more sensors a user interface a power supply a communications component a modularity unit and intelligent software as described with respect to . Examples of devices are shown in .

An intelligent multi sensing network connected thermostat can detect ambient climate characteristics e.g. temperature and or humidity and control a heating ventilation and air conditioning HVAC system . One or more intelligent network connected multi sensing hazard detection units can detect the presence of a hazardous substance and or a hazardous condition in the home environment e.g. smoke fire or carbon monoxide . One or more intelligent multi sensing network connected entryway interface devices which can be termed a smart doorbell can detect a person s approach to or departure from a location control audible functionality announce a person s approach or departure via audio or visual means or control settings on a security system e.g. to activate or deactivate the security system .

Each of a plurality of intelligent multi sensing network connected wall light switches can detect ambient lighting conditions detect room occupancy states and control a power and or dim state of one or more lights. In some instances light switches can further or alternatively control a power state or speed of a fan such as a ceiling fan. Each of a plurality of intelligent multi sensing network connected wall plug interfaces can detect occupancy of a room or enclosure and control supply of power to one or more wall plugs e.g. such that power is not supplied to the plug if nobody is at home . The smart home may further include a plurality of intelligent multi sensing network connected appliances such as refrigerators stoves and or ovens televisions washers dryers lights inside and or outside the structure stereos intercom systems garage door openers floor fans ceiling fans whole house fans wall air conditioners pool heaters irrigation systems security systems and so forth. While descriptions of can identify specific sensors and functionalities associated with specific devices it will be appreciated that any of a variety of sensors and functionalities such as those described throughout the specification can be integrated into the device.

In addition to containing processing and sensing capabilities each of the devices and can be capable of data communications and information sharing with any other of the devices and devices as well as to any cloud server or any other device that is network connected anywhere in the world. The devices can send and receive communications via any of a variety of custom or standard wireless protocols Wi Fi ZigBee 6LoWPAN etc. and or any of a variety of custom or standard wired protocols CAT6 Ethernet HomePlug etc. . The wall plug interfaces can serve as wireless or wired repeaters and or can function as bridges between i devices plugged into AC outlets and communicating using HomePlug or other power line protocol and ii devices that not plugged into AC outlets.

For example a first device can communicate with a second device via a wireless router . A device can further communicate with remote devices via a connection to a network such as the Internet . Through the Internet the device can communicate with a central server or a cloud computing system . The central server or cloud computing system can be associated with a manufacturer support entity or service provider associated with the device. For one embodiment a user may be able to contact customer support using a device itself rather than needing to use other communication means such as a telephone or Internet connected computer. Further software updates can be automatically sent from the central server or cloud computing system to devices e.g. when available when purchased or at routine intervals .

By virtue of network connectivity one or more of the smart home devices of can further allow a user to interact with the device even if the user is not proximate to the device. For example a user can communicate with a device using a computer e.g. a desktop computer laptop computer or tablet or other portable electronic device e.g. a smartphone . A webpage or app can be configured to receive communications from the user and control the device based on the communications and or to present information about the device s operation to the user. For example the user can view a current setpoint temperature for a device and adjust it using a computer. The user can be in the structure during this remote communication or outside the structure.

The smart home also can include a variety of non communicating legacy appliances such as old conventional washer dryers refrigerators and the like which can be controlled albeit coarsely ON OFF by virtue of the wall plug interfaces . The smart home can further include a variety of partially communicating legacy appliances such as IR controlled wall air conditioners or other IR controlled devices which can be controlled by IR signals provided by the hazard detection units or the light switches .

The central server or cloud computing system can collect operation data from the smart home devices. For example the devices can routinely transmit operation data or can transmit operation data in specific instances e.g. when requesting customer support . The central server or cloud computing architecture can further provide one or more services . The services can include e.g. software update customer support sensor data collection logging remote access remote or distributed control or use suggestions e.g. based on collected operation data to improve performance reduce utility cost etc. . Data associated with the services can be stored at the central server or cloud computing system and the central server or cloud computing system can retrieve and transmit the data at an appropriate time e.g. at regular intervals upon receiving request from a user etc. .

One salient feature of the described extensible devices and services platform as illustrated in is a processing engine which can be concentrated at a single server or distributed among several different computing entities without limitation. Processing engine can include engines configured to receive data from a set of devices e.g. via the Internet or a hubbed network to index the data to analyze the data and or to generate statistics based on the analysis or as part of the analysis. The analyzed data can be stored as derived data . Results of the analysis or statistics can thereafter be transmitted back to a device providing ops data used to derive the results to other devices to a server providing a webpage to a user of the device or to other non device entities. For example use statistics use statistics relative to use of other devices use patterns and or statistics summarizing sensor readings can be transmitted. The results or statistics can be provided via the Internet . In this manner processing engine can be configured and programmed to derive a variety of useful information from the operational data obtained from the smart home. A single server can include one or more engines.

The derived data can be highly beneficial at a variety of different granularities for a variety of useful purposes ranging from explicit programmed control of the devices on a per home per neighborhood or per region basis for example demand response programs for electrical utilities to the generation of inferential abstractions that can assist on a per home basis for example an inference can be drawn that the homeowner has left for vacation and so security detection equipment can be put on heightened sensitivity to the generation of statistics and associated inferential abstractions that can be used for government or charitable purposes. For example processing engine can generate statistics about device usage across a population of devices and send the statistics to device users service providers or other entities e.g. that have requested or may have provided monetary compensation for the statistics . As specific illustrations statistics can be transmitted to charities governmental entities e.g. the Food and Drug Administration or the Environmental Protection Agency academic institutions e.g. university researchers businesses e.g. providing device warranties or service to related equipment or utility companies . These entities can use the data to form programs to reduce energy usage to preemptively service faulty equipment to prepare for high service demands to track past service performance etc. or to perform any of a variety of beneficial functions or tasks now known or hereinafter developed.

For example shows processing engine as including a number of paradigms . Processing engine can include a managed services paradigm that monitors and manages primary or secondary device functions. The device functions can include ensuring proper operation of a device given user inputs estimating that e.g. and responding to an intruder is or is attempting to be in a dwelling detecting a failure of equipment coupled to the device e.g. a light bulb having burned out implementing or otherwise responding to energy demand response events or alerting a user of a current or predicted future event or characteristic. Processing engine can further include an advertising communication paradigm that estimates characteristics e.g. demographic information desires and or products of interest of a user based on device usage. Services promotions products or upgrades can then be offered or automatically provided to the user. Processing engine can further include a social paradigm that uses information from a social network provides information to a social network for example based on device usage and or processes data associated with user and or device interactions with the social network platform. For example a user s status as reported to their trusted contacts on the social network could be updated to indicate when they are home based on light detection security system inactivation or device usage detectors. As another example a user may be able to share device usage statistics with other users. Processing engine can include a challenges rules compliance rewards paradigm that informs a user of challenges rules compliance regulations and or rewards and or that uses operation data to determine whether a challenge has been met a rule or regulation has been complied with and or a reward has been earned. The challenges rules or regulations can relate to efforts to conserve energy to live safely e.g. reducing exposure to toxins or carcinogens to conserve money and or equipment life to improve health etc.

Processing engine can integrate or otherwise utilize extrinsic information from extrinsic sources to improve the functioning of one or more processing paradigms. Extrinsic information can be used to interpret operational data received from a device to determine a characteristic of the environment near the device e.g. outside a structure that the device is enclosed in to determine services or products available to the user to identify a social network or social network information to determine contact information of entities e.g. public service entities such as an emergency response team the police or a hospital near the device etc. to identify statistical or environmental conditions trends or other information associated with a home or neighborhood and so forth.

An extraordinary range and variety of benefits can be brought about by and fit within the scope of the described extensible devices and services platform ranging from the ordinary to the profound. Thus in one ordinary example each bedroom of the smart home can be provided with a smoke fire CO alarm that includes an occupancy sensor wherein the occupancy sensor is also capable of inferring e.g. by virtue of motion detection facial recognition audible sound patterns etc. whether the occupant is asleep or awake. If a serious fire event is sensed the remote security monitoring service or fire department is advised of how many occupants there are in each bedroom and whether those occupants are still asleep or immobile or whether they have properly evacuated the bedroom. While this is of course a very advantageous capability accommodated by the described extensible devices and services platform there can be substantially more profound examples that can truly illustrate the potential of a larger intelligence that can be made available. By way of perhaps a more profound example the same data bedroom occupancy data that is being used for fire safety can also be repurposed by the processing engine in the context of a social paradigm of neighborhood child development and education. Thus for example the same bedroom occupancy and motion data discussed in the ordinary example can be collected and made available for processing properly anonymized in which the sleep patterns of schoolchildren in a particular ZIP code can be identified and tracked. Localized variations in the sleeping patterns of the schoolchildren may be identified and correlated for example to different nutrition programs in local schools.

Feedback engine can include an input monitor that monitors input received from a user. The input can include input received via a device itself or an interface tied to a device. The input can include e.g. rotation of a rotatable component selection of an option e.g. by clicking a clickable component such as a button or clickable ring input of numbers and or letters e.g. via a keypad etc. The input can be tied to a function. For example rotating a ring clockwise can be associated with increasing a setpoint temperature.

In some instances an input s effect is to adjust a setting with immediate consequence e.g. a current setpoint temperature a current on off state of a light a zone to be currently watered by a sprinkler system etc. . In some instances an input s effect is to adjust a setting with delayed or long term consequence. For example the input can alter a start or stop time in a schedule a threshold e.g. an alarm threshold or a default value associated with a particular state e.g. a power state or temperature associated with a device when a user is determined to be away or not using the device . In some instances the input s effect is to both adjust a setting with immediate consequence and a setting with a delayed or long term consequence. For example a user can adjust a current setpoint temperature which can also influence a learned schedule thereby also affecting setpoint temperatures at subsequent schedule times.

Feedback engine can include a scheduling engine that generates or updates a schedule for a device. show examples of an adjustable schedule which identifies a mapping between times and setpoint temperatures. The schedule shows an icon or other representation hereinafter representation for each of a set of scheduled setpoints. Each scheduled setpoint is characterized by a i scheduled setpoint type that represented by a color of the representation for example a heating setpoint represented by an orange red color a cooling setpoint by a blue color ii a scheduled setpoint temperature value represented numerically on the representation and iii an effective time and day of the scheduled setpoint. The vertical location of representation indicates a day of the week on which the scheduled setpoint is s to take effect. The horizontal location of representation indicates a time at which the scheduled setpoint is to take effect. The value on representation identifies the setpoint temperature to take effect. Schedule features e.g. when setpoint temperature changes should occur and what setpoint temperature should be effected can be influenced by express user inputs to the schedule itself e.g. establishing setpoints removing setpoints changing setting times or values for the setpoints by ordinary temperature setting user inputs e.g. the user changes the current setpoint temperature by turning the dial on the thermostat or by a smartphone or other remote user interface and a schedule is automatically learned based on usage patterns and or by default rules or other methods e.g. biasing towards low power operation during particular hours of the day .

The schedule can further be influenced by non input usage monitored by usage monitor . Usage monitor can monitor e.g. when a system associated with a device or a part of a device is actually operating e.g. whether a heating ventilation and air conditioning system is operating or whether an electronic device connected to a power source is being used when a user is in an enclosure or part of an enclosure influenced by a device e.g. whether a user is at home when the air conditioning is running or whether a user is in a room with lights on when a device s operation is of utility e.g. whether food is in a pre heated oven etc. Scheduling engine can adjust a schedule or other settings based on the monitored usage to reduce unnecessary energy consumption. For example even if a user routinely leaves all light switches on scheduling engine can adjust a schedule to turn the lights off e.g. via smart light switch devices during portions of the day that usage monitor determines that the user is not at home.

A user can interact with temperature adjusting feature to adjust a setpoint temperature of an associated scheduled setpoint. In each selection of the arrow can cause the setpoint temperature of an associated scheduled setpoint to be adjusted by a fixed amount. For example a user could twice select e.g. press click the down arrow of temperature adjusting feature shown in to adjust an associated heating setpoint temperature from 65 degrees F. to 63 degrees F. as shown in . As described in further detail herein if the adjustment is sufficient to satisfy a feedback criterion e.g. indicating that positive feedback is to be presented upon a change of a setpoint temperature that is at least a threshold directional amount a feedback icon can be presented on schedule . Thus the user receives immediate feedback about a responsibility of the adjustment.

Settings can be stored in one or more settings databases . It will be appreciated that a schedule can be understood to include a set of settings e.g. start and stop times values associated with time blocks etc. . Thus settings database can further store schedule information and or schedules. Settings database can be updated to include revised immediate effect settings delayed settings or scheduled settings determined based on user input monitored usage or learned schedules. Settings database can further store historical settings dates and times that settings were adjusted and events causing the adjustment e.g. learned scheduled changes express user input etc. .

Feedback engine can include one or more setting adjustment detectors. As depicted in feedback engine includes an immediate setting adjustment detector that detects adjustments to settings that result in an immediate consequence and a long term setting adjustment detector that detects adjustments to settings that result in a delayed or long term consequence. Setting adjustments that result in an immediate consequence can include e.g. adjusting a current setpoint temperature or changing a current mode e.g. from a heating or cooling mode to an away mode . Thus the effect of these adjustments is an immediate adjustment of a current setpoint temperature or other operation feature of a controlled HVAC system. Setting adjustments that result in an immediate consequence can include e.g. adjusting a schedule e.g. adjusting a value or time of a scheduled setpoint adding a new scheduled setpoint or deleting a scheduled setpoint or adjusting a lockout temperature described in further detail below in reference to .

An adjustment can be quantified by accessing a new setting e.g. from input monitor or scheduling engine and comparing the new setting to a historical setting e.g. stored in settings database by comparing multiple settings within settings database e.g. a historical and new setting by quantifying a setting change based on input e.g. a degree of a rotation etc. For example at 3 30 pm an enclosure s setpoint temperature may be set to 74 degrees F. based on a schedule. If a user then adjusts the setpoint temperature to 72 degrees F. the adjusted temperature 72 degrees F. can be compared to the previously scheduled temperature 74 degrees F. which in some instances absent repeated user setpoint modifications amounts to comparing the setpoint temperature before the adjustment to the setpoint temperature after the adjustment. As another example a user can interact with a schedule to change a heating setpoint temperature scheduled to take effect on Wednesday at 10 30 am from 65 degrees F. to 63 degrees F. e.g. as shown in . The old and new temperatures can then be compared. Thus an adjustment quantification can include comparing but for and corresponding temperatures first identifying what a new temperature has been set to second identifying what the temperature would have otherwise then been e.g. at a time the temperature is to be effected if the adjustment had not occurred and third comparing these temperatures. However the comparison can be further refined to avoid analysis of a change between multiple repeated adjustments. For example by comparing a new immediate effect setpoint temperature to a setpoint temperature scheduled to take effect at that time positive feedback is not provided in response to a user first irresponsibly setting a current temperature and soon thereafter mitigating this effect.

The detected adjustment and or adjusted setting can be analyzed by a feedback criteria assessor . Feedback criteria assessor can access feedback criteria stored in a feedback criteria database . The feedback criteria can identify conditions under which feedback is to be presented and or the type of feedback to be presented. The feedback criteria can be relative and or absolute. For example a relative feedback criterion can indicate that feedback is to be presented upon detection of a setting adjustment exceeding a particular value while an absolute feedback criteria can indicate that feedback is to be presented upon detection of a setting that exceeds a particular value.

For each of one or more criteria feedback criteria assessor can compare the quantified adjustment or setting to the criterion e.g. by comparing the adjustment or setting to a value of the criterion or otherwise evaluate whether the criterion is satisfied to determine whether feedback is to be presented i.e. whether a criterion has been satisfied what type of feedback is to be presented and or when feedback is to be presented. For example if feedback is to be presented based on an adjustment to a setting with an immediate consequence that exceeds a given magnitude feedback criteria assessor can determine based on the feedback criteria that feedback is to be instantly presented for a given time period. If feedback is to be presented based on an adjustment to a setting with delayed consequence of a given magnitude feedback criteria assessor can determine based on the feedback criteria that feedback is to be presented when the setting takes effect. Feedback criteria assessor can further determine whether summary feedback or delayed feedback is to be presented. For example feedback can be presented if settings or setting adjustments over a time period e.g. throughout a day satisfy a criterion. This feedback can be presented e.g. via a report or on a schedule.

As one example a user may have adjusted a current cooling setpoint temperature from a first value to a second value. Two criteria may be applicable a first may indicate that feedback is to be immediately presented for a time period if the second value is higher than a first threshold and a second may indicate that feedback is to be immediately presented for a time period if a difference between the first and second values exceeds a threshold.

Feedback determinations can be stored in an awarded feedback database . The stored information can indicate e.g. the type of feedback to be presented e.g. specific icons or sounds an intensity of the feedback a number of presented visual or audio signals etc. start and stop times for feedback presentations conditions for feedback presentations events that led to the feedback where feedback is to be presented e.g. on a front display of a device on a schedule display of a device on an interface tied t the device etc. .

A feedback presenter can then present the appropriate feedback or coordinate the feedback presentation. For example feedback presenter can present an icon on a device for an indicated amount of time or can transmit a signal to a device or central server indicating that the feedback is to be presented e.g. and additional details such as the type of feedback to be presented the presentation duration etc. . In some instances feedback presenter analyzes current settings device operations times etc. to determine whether and when the feedback is to be presented. For example in instances in which feedback is to be presented upon detecting that the device is in an away mode e.g. subsequent to a setting adjustment that adjusted an away associated setting feedback presenter can detect when the device has entered the away mode and thereafter present the feedback.

At block feedback to be awarded is determined e.g. by feedback criteria assessor . The determination can involve determining whether feedback is to be presented the type of feedback to be presented and or when the feedback is to be presented. The determination can involve assessing one or more feedback criteria.

Upon determining that feedback is to be provided the feedback is caused to be presented e.g. by feedback presenter at block . In some instances the feedback is visually or audibly presented via a device or via an interface. In some instances a signal is transmitted e.g. to a device or central server indicating that the feedback is to be presented via the device or via an interface controlled by the central server.

Processes illustrate specific implementations or extensions of process . In the detected new setting has an immediate consequence e.g. immediately changing a setpoint temperature . Thus at block the feedback can be caused to be presented immediately.

In the new setting with an immediate consequence causes a learned schedule to be adjusted at block . Thus at block the feedback can be caused to be presented at and or during one or more subsequent scheduled events. For example a user can raise a setpoint temperature from 74 to 76 degrees at 8 pm causing a schedule to correspondingly adjust a nighttime setpoint temperature. The feedback may then be presented during subsequent nights upon entry of the nighttime time period.

In the detected setting has a delayed consequence. For example a user can set a schedule setting or a user can set a threshold e.g. influencing when or how a device should operate . At block the feedback can be caused to be presented upon the delayed consequence. In some instances feedback is also caused to be presented immediately to indicate to the user an effect or responsibility of the new setting.

In at block it is determined whether and what kind of non binary feedback to award at block . For example rather than determining whether a signal e.g. an icon or tone should or shouldn t be presented the determination can involve determining an intensity of the signal or a number of signals to be presented. Then at block the feedback can be dynamically adjusted in response to subsequent setting adjustments.

As a specific illustration the feedback intensity can depend on how close the new setting is to a threshold or based on a magnitude of a change in the setting. Thus if e.g. a temperature setting begins at 72.2 degrees and the user adjusts it to 72.4 degrees a faded icon can appear. As the user continues to raise the temperature setting the icon can grow in intensity. Not only does the non binary feedback provide richer feedback to the user but it can reduce seeming inconsistencies. For example if a user s display rounds temperature values to the nearest integer and a strict feedback criteria requires the temperature be raised by two degrees before feedback is presented the user may be confused as to why the icon only sometimes appears after adjusting the temperature from 72 to 74 degrees wherein the inconsistency is explained because the adjustment may or may not actually account for an adjustment of 2.0 or more degrees.

In feedback is not tied only to a single adjustment but to a time period. At block settings or feedbacks associated with a time period e.g. a day are accessed. At block it is determined whether feedback is to be awarded and or the type of feedback to be awarded . The determination can involve e.g. assessing the types or degrees or feedback associated with the time period. For example a daily positive feedback can be awarded upon a determination that positive feedback was presented for a threshold amount of time e.g. two or more hours over the course of the day. At block feedback is caused to be presented in association with the time period. For example a visual icon can be presented near a day s representation on a calendar.

In some instances a user can interact with a system at multiple points. For example a user may be able to adjust a setting and or view settings i at the local user interface of a device itself and ii via a remote interface such as a web based or app based interface hereinafter remote interface . If a user adjusts a setting at one of these points feedback can be presented in some embodiments at both points. illustrates a process for accomplishing this objective. At block a device e.g. a thermostat detects a new setting e.g. based on a user adjustment . At block the device transmits the new setting to a central server e.g. controlling an interface such as a web based or app based interface . The transmission may occur immediately upon detection of the setting or upon determining that an interface based session has been initiated or is ongoing.

The central server receives the new setting at block . Then both the device and the central server determine whether feedback is to be awarded at blocks and . The determination can be based on a comparison of the new setting to one or more criteria e.g. evaluating the one or more criteria in view of the new setting . If feedback is to be awarded the device and central server cause feedback to be presented at blocks and both at the device and via the interface. It will be appreciated that a converse process is also contemplated in which a new setting is detected at transmitted from the central server and received by the device. It will further be appreciated that process can be repeated throughout a user s adjustment of an input component causing corresponding setting adjustments.

According to one embodiment that stands in contrast to that of the decision about whether to display the feedback is made or owned by the local device itself with all relevant feedback triggering thresholds being maintained by the local device itself. This can be particularly advantageous for purposes of being able to provide immediate time critical feedback including the fading leaf effect just as the user s adjustments are crossing the meaningful thresholds as they control the local device. In addition to offloading central server from this additional computing responsibility undesired latencies that might otherwise occur if the central server owned the decision are avoided. For cases in which the local device owns the feedback display decision one issue arises for cases in which a remote device such as a smartphone is being used to remotely adjust the relevant setting on the local device because there may be a substantial latency between the time the local device has triggered the feedback display decision and the time that a corresponding feedback display would actually be shown to the remote user on the remote device. Thus in the case of a thermostat it could potentially happen that the remote user has already turned the setpoint temperature to a very responsible level but because the feedback did not show up immediately the user is frustrated and may feel the need to continue to change the setpoint temperature well beyond the required threshold. According to one embodiment this scenario is avoided by configuring the thermostat to upload the feedback triggering decision criteria such as temperature thresholds needed to trigger a leaf display to the remote device in advance of or at the outset of the user control interaction. In this way the remote device will decide for itself whether to show the feedback to the user and will not wait for the decision to be made at the local device thereby avoiding the display latency and increasing the immediacy of user feedback thereby leading to a more positive user experience.

According to another embodiment in one variant of the process of the device could transmit an instruction to present the feedback rather than transmitting the new setting. However an advantage of process is that the central server then has access to the actual setting such that if a user later adjusts the setting via the interface the central server can quickly determine whether additional feedback is to be awarded. Thus both the device and central server have access to user settings which are also sufficient to determine whether to award feedback. The user can then receive immediate feedback regarding a setting adjustment regardless of whether the user is viewing the device or an interface and regardless of at which point the adjustment was made.

The change can be analyzed by comparing what the setpoint temperature would be had no adjustment been made to what the setpoint temperature is given the change. Thus identifying the change can involve comparing a newly set current setpoint temperature to a temperature in a schedule that would have determined the current setpoint temperature. The schedule based comparison can prevent a user from receiving feedback merely due to e.g. first ramping a setpoint temperature up before ramping it back down. It will be appreciated that similar analysis can also be applied in response to a user s adjustment to a scheduled non current setpoint temperature. In this instance identifying the change can involve comparing a newly set scheduled setpoint temperature corresponding to a day and time to a temperature that would have otherwise been effected at the day and time had no adjustment occurred. Further while the above text indicates that the setpoint adjustment is a manual adjustment similar analysis can be performed in response to an automatic change in a setpoint temperature determined based on learning about a user s behaviors.

In some instances a feedback criterion relates to learning algorithms in the case such algorithms are being used. For example in association with an initial setup or a restart of the thermostat a user can be informed that their subsequent manual temperature adjustments will be used to train or teach the thermostat. The user can then be asked to select between whether a device e.g. a thermostat should enter into a heating mode for example if it is currently winter time or a cooling mode for example if it is currently summer time . If COOLING is selected then the user can be asked to set the away cooling temperature that is a low energy using cooling temperature that should be maintained when the home or business is unoccupied in order to save energy and or money. According to some embodiments the default value offered to the user is set to an away cooling initial temperature e.g. 80 degrees F. the maximum value selectable by the user is set to an away cooling maximum temperature e.g. 90 degrees F. the minimum value selectable is set to an away cooling minimum temperature e.g. 75 degrees F. and a leaf or other suitable indicator is displayed when the user selects a value of at least a predetermined leaf displaying away cooling temperature threshold e.g. 83 degrees F. .

If the user selects HEATING then the user can be asked to set a low energy using away heating temperature that should be maintained when the home or business is unoccupied. According to some embodiments the default value offered to the user is an away heating initial temperature e.g. 65 degrees F. the maximum value selectable by the user is defined by an away heating maximum temperature e.g. 75 degrees F. the minimum value selectable is defined by an away heating minimum temperature e.g. 55 degrees F. and a leaf or other suitable energy savings encouragement indicator is displayed when the user selects a value below a predetermined leaf displaying away heating threshold e.g. 63 degrees F. .

Thus illustrates how feedback can be used to provide immediate feedback via a device to a user about the responsibility of their setting adjustments. illustrate instances in which feedback can be provided via a device and can be associated with non current actions. At judiciously selected times for example on the same day that the monthly utility bill is e mailed to the homeowner or upon user request or at other times including random points in time the a thermostat device displays information on its visually appealing user interface that encourages reduced energy usage. In one example shown in the user is shown a message of congratulations regarding a particular energy saving and therefore money saving accomplishment they have achieved for their household. Positive feedback icons e.g. including pictures or symbols such as leaf icons can be simultaneously presented to evoke pleasant feelings or emotions in the user thus providing positive reinforcement of energy saving behavior.

When the Energy menu option of selected from menu in by the user the display transitions to that shown in . A central display area shows energy related information to the user in a calendar format. The individual days of the month are shown below the month banners such as banner as shown. For each day a length of a horizontal bar such as bar and a number of hours is used to indicate to the user the amount of energy used and an activity duration on that day for heating and or cooling. The bars can be colored to match the HVAC function such as orange for heating and blue for cooling.

Also shown on the far right side of each day is a responsibility explanation icon which indicates the determined primary cause for either over or under average energy usage for that day. According to some embodiment a running average is used for the past seven days for purposes of calculating whether the energy usage was above or below average. According to some embodiments three different explanation icons are used weather such as shown in explanation icon users people manually making changes to thermostat s set point or other settings and away time either due to auto away or manually activated away modes .

According to some embodiments further detail for the energy usage throughout any given day is displayed when the user requests it. When the user touches one of the energy bar symbols or anywhere on the row for that day a detailed energy usage display for that day is activated. In the detailed energy information for February 25th is displayed in response to the user tapping on that day s area. The detailed display are includes a time line bar for the entire day with hash marks or symbols for each two hours. The main bar is used to indicate the times during the day and duration of each time the HVAC function was active in this case single stage heating . The color of the horizontal activity bar such as bar matches the HVAC function being used and the width of the activity bar corresponds to the time of day during which the function was active. Above the main timeline bar are indicators such as the set temperature and any modes becoming active such as an away mode e.g. being manually set by a user or automatically set by auto away . The small number on the far upper left of the timeline indicates the starting set point temperature i.e. from the previous day . The circle symbols such as symbol indicate the time of day and the temperature of a set point change. The symbols are used to indicate both scheduled setpoints and manually change setpoints.

Feedback can be associated with various portions of the timeline bar. For example a leaf can be displayed above the time bar at horizontal locations indicating times of days in which responsible actions were performed. In an away icon is used to indicate that the thermostat went into an away mode either manually or under auto away at about 7 AM.

Area indicates responsibility feedback information. In this instance leafs are identified as positive earned feedbacks. In some instances a user has the opportunity to earn one or more fixed number of earned feedbacks within a time period. For example a user can have the opportunity to earn one feedback per day in which case the earned feedbacks can be synonymous with daily feedbacks. In some instances the earned credits are tied to a duration of time or a number of times that an instantaneous feedback is presented e.g. such that one earned feedback is awarded upon detecting that the instantaneous feedback has been consecutively or non consecutively presented for a threshold cumulative time since the last awarded earned feedback .

For the depicted report the user earned a total of 46 leafs overall since the initial installation each leaf being indicative of a daily positive feedback. A message indicates how the user compares to the average user. A calendar graphic shows the days by shading in which a leaf was earned. In this case leafs were earned on 12 days in the current month.

It will be appreciated that feedback need not necessarily be positive. Images colors intensities animation and the like can further be used to convey negative messages indicating that a user s behaviors are not responsible. illustrate a dynamic user interface of a thermostat device in which negative feedback can be presented according to an embodiment. Where as in the heating setpoint is currently set to a value known to be within a first range known to be good or appropriate for energy conservation a pleasing positive reinforcement icon such as the green leaf is displayed. As the user turns up the heat see the green leaf continues to be displayed as long as the setpoint remains in that first range. However as the user continues to turn up the setpoint to a value greater than the first range see there is displayed a negatively reinforcing icon indicative of alarm consternation concern or other somewhat negative emotion such icon being for example a flashing red version of the leaf or a picture of a smokestack or the like. It is believed that the many users will respond to the negatively reinforcing icon by turning the set point back down. As illustrated in if the user returns the setpoint to a value lying in the first range they are rewarded by the return of the green leaf . Many other types of positive emotion icons or displays can be used in place of the green leaf and likewise many different negatively reinforcing icons or displays can be used in place of the flashing red leaf while remaining within the scope of the present teachings.

As illustrated thermostat includes a user friendly interface according to some embodiments. Thermostat includes control circuitry and is electrically connected to an HVAC system. Thermostat is wall mounted is circular in shape and has an outer rotatable ring for receiving user input.

Outer rotatable ring allows the user to make adjustments such as selecting a new target temperature. For example by rotating outer ring clockwise a target setpoint temperature can be increased and by rotating the outer ring counter clockwise the target setpoint temperature can be decreased.

A central electronic display may include e.g. a dot matrix layout individually addressable such that arbitrary shapes can be generated rather than being a segmented layout a combination of a dot matrix layout and a segmented layout or a backlit color liquid crystal display LCD . An example of information displayed on electronic display is illustrated in and includes central numerals that are representative of a current setpoint temperature. It will be appreciated that electronic display can display other types of information such as information identifying or indicating an event occurrence and or forecasting future event properties.

Thermostat has a large front face lying inside the outer ring . The front face of thermostat comprises a clear cover that according to some embodiments is polycarbonate and a metallic portion preferably having a number of slots formed therein as shown. According to some embodiments metallic portion has number of slot like openings so as to facilitate the use of a passive infrared motion sensor mounted therebeneath. Metallic portion can alternatively be termed a metallic front grille portion. Further description of the metallic portion front grille portion is provided in the commonly assigned U.S. Ser. No. 13 199 108 which is hereby incorporated by reference in its entirety for all purposes.

Motion sensing as well as other techniques can be use used in the detection and or predict of occupancy as is described further in the commonly assigned U.S. Ser. No. 12 881 430 which is hereby incorporated by reference in its entirety. According to some embodiments occupancy information is used in generating an effective and efficient scheduled program. Preferably an active proximity sensor A is provided to detect an approaching user by infrared light reflection and an ambient light sensor B is provided to sense visible light. Proximity sensor A can be used to detect proximity in the range of about one meter so that the thermostat can initiate waking up when the user is approaching the thermostat and prior to the user touching the thermostat. Ambient light sensor B can be used for a variety of intelligence gathering purposes such as for facilitating confirmation of occupancy when sharp rising or falling edges are detected because it is likely that there are occupants who are turning the lights on and off and such as for detecting long term e.g. 24 hour patterns of ambient light intensity for confirming and or automatically establishing the time of day.

According to some embodiments for the combined purposes of inspiring user confidence and further promoting visual and functional elegance thermostat is controlled by only two types of user input the first being a rotation of the outer ring as shown in FIG. A referenced hereafter as a rotate ring or ring rotation input and the second being an inward push on an outer cap see until an audible and or tactile click occurs referenced hereafter as an inward click or simply click input . Upon detecting a user click new options can be presented to the user. For example a menu system can be presented as detailed in U.S. Ser. No. 13 351 668 which is hereby incorporated by reference in its entirety for all purposes. The user can then navigate through the menu options and select menu settings using the rotation and click functionalities.

According to some embodiments thermostat includes a processing system display driver and a wireless communications system . Processing system is adapted to cause the display driver and display area to display information to the user and to receiver user input via the rotatable ring . Processing system according to some embodiments is capable of carrying out the governance of the operation of thermostat including the user interface features described herein. Processing system is further programmed and configured to carry out other operations as described herein. For example processing system may be programmed and configured to dynamically determine when to collect sensor measurements when to transmit sensor measurements and or how to present received alerts. According to some embodiments wireless communications system is used to communicate with e.g. a central server other thermostats personal computers or portable devices e.g. laptops or cell phones .

Referring next to an exemplary environment with which embodiments may be implemented is shown with a computer system that can be used by a user to remotely control for example one or more of the sensor equipped smart home devices according to one or more of the embodiments. The computer system can alternatively be used for carrying out one or more of the server based processing paradigms described hereinabove can be used as a processing device in a larger distributed virtualized computing scheme for carrying out the described processing paradigms or for any of a variety of other purposes consistent with the present teachings. The computer system can include a computer keyboard a network router a printer and a monitor . The monitor processor and keyboard are part of a computer system which can be a laptop computer desktop computer handheld computer mainframe computer etc. The monitor can be a CRT flat screen etc.

A user can input commands into the computer using various input devices such as a mouse keyboard track ball touch screen etc. If the computer system comprises a mainframe a designer can access the computer using for example a terminal or terminal interface. Additionally the computer system may be connected to a printer and a server using a network router which may connect to the Internet or a WAN.

The server may for example be used to store additional software programs and data. In one embodiment software implementing the systems and methods described herein can be stored on a storage medium in the server . Thus the software can be run from the storage medium in the server . In another embodiment software implementing the systems and methods described herein can be stored on a storage medium in the computer . Thus the software can be run from the storage medium in the computer system . Therefore in this embodiment the software can be used whether or not computer is connected to network router . Printer may be connected directly to computer in which case the computer system can print whether or not it is connected to network router .

With reference to an embodiment of a special purpose computer system is shown. For example one or more of intelligent components processing engine feedback engine and components thereof may be a special purpose computer system . The above methods may be implemented by computer program products that direct a computer system to perform the actions of the above described methods and components. Each such computer program product may comprise sets of instructions codes embodied on a computer readable medium that directs the processor of a computer system to perform corresponding actions. The instructions may be configured to run in sequential order or in parallel such as under different processing threads or in a combination thereof. After loading the computer program products on a general purpose computer system it is transformed into the special purpose computer system .

Special purpose computer system comprises a computer a monitor coupled to computer one or more additional user output devices optional coupled to computer one or more user input devices e.g. keyboard mouse track ball touch screen coupled to computer an optional communications interface coupled to computer a computer program product stored in a tangible computer readable memory in computer . Computer program product directs system to perform the above described methods. Computer may include one or more processors that communicate with a number of peripheral devices via a bus subsystem . These peripheral devices may include user output device s user input device s communications interface and a storage subsystem such as random access memory RAM and non volatile storage drive e.g. disk drive optical drive solid state drive which are forms of tangible computer readable memory.

Computer program product may be stored in non volatile storage drive or another computer readable medium accessible to computer and loaded into memory . Each processor may comprise a microprocessor such as a microprocessor from Intel or Advanced Micro Devices Inc. or the like. To support computer program product the computer runs an operating system that handles the communications of product with the above noted components as well as the communications between the above noted components in support of the computer program product . Exemplary operating systems include Windows or the like from Microsoft Corporation Solaris from Sun Microsystems LINUX UNIX and the like.

User input devices include all possible types of devices and mechanisms to input information to computer system . These may include a keyboard a keypad a mouse a scanner a digital drawing pad a touch screen incorporated into the display audio input devices such as voice recognition systems microphones and other types of input devices. In various embodiments user input devices are typically embodied as a computer mouse a trackball a track pad a joystick wireless remote a drawing tablet a voice command system. User input devices typically allow a user to select objects icons text and the like that appear on the monitor via a command such as a click of a button or the like. User output devices include all possible types of devices and mechanisms to output information from computer . These may include a display e.g. monitor printers non visual displays such as audio output devices etc.

Communications interface provides an interface to other communication networks and devices and may serve as an interface to receive data from and transmit data to other systems WANs and or the Internet . Embodiments of communications interface typically include an Ethernet card a modem telephone satellite cable ISDN a asynchronous digital subscriber line DSL unit a FireWire interface a USB interface a wireless network adapter and the like. For example communications interface may be coupled to a computer network to a FireWire bus or the like. In other embodiments communications interface may be physically integrated on the motherboard of computer and or may be a software program or the like.

RAM and non volatile storage drive are examples of tangible computer readable media configured to store data such as computer program product embodiments of the present invention including executable computer code human readable code or the like. Other types of tangible computer readable media include floppy disks removable hard disks optical storage media such as CD ROMs DVDs bar codes semiconductor memories such as flash memories read only memories ROMs battery backed volatile memories networked storage devices and the like. RAM and non volatile storage drive may be configured to store the basic programming and data constructs that provide the functionality of various embodiments of the present invention as described above.

Software instruction sets that provide the functionality of the present invention may be stored in RAM and non volatile storage drive . These instruction sets or code may be executed by the processor s . RAM and non volatile storage drive may also provide a repository to store data and data structures used in accordance with the present invention. RAM and non volatile storage drive may include a number of memories including a main random access memory RAM to store of instructions and data during program execution and a read only memory ROM in which fixed instructions are stored. RAM and non volatile storage drive may include a file storage subsystem providing persistent non volatile storage of program and or data files. RAM and non volatile storage drive may also include removable storage systems such as removable flash memory.

Bus subsystem provides a mechanism to allow the various components and subsystems of computer communicate with each other as intended. Although bus subsystem is shown schematically as a single bus alternative embodiments of the bus subsystem may utilize multiple busses or communication paths within the computer .

For a firmware and or software implementation the methodologies may be implemented with modules e.g. procedures functions and so on that perform the functions described herein. Any machine readable medium tangibly embodying instructions may be used in implementing the methodologies described herein. For example software codes may be stored in a memory. Memory may be implemented within the processor or external to the processor. As used herein the term memory refers to any type of long term short term volatile nonvolatile or other storage medium and is not to be limited to any particular type of memory or number of memories or type of media upon which memory is stored.

Moreover as disclosed herein the term storage medium may represent one or more memories for storing data including read only memory ROM random access memory RAM magnetic RAM core memory magnetic disk storage mediums optical storage mediums flash memory devices and or other machine readable mediums for storing information. The term machine readable medium includes but is not limited to portable or fixed storage devices optical storage devices wireless channels and or various other storage mediums capable of storing that contain or carry instruction s and or data.

A few examples of using feedback to encourage or prompt users to energy efficient behavior are provided below.

A thermostat is provided. Thermostat settings can be explicitly adjusted by a user or automatically learned e.g. based on patterns of explicit adjustments motion sensing or light detection . The thermostat wirelessly communicates with a central server and the central server supports a real time interface. A user can access the interface via a website or app e.g. a smart phone app . Through the interface the user can view device information and or adjust settings. The user can also view device information and or adjust settings using the device itself.

A feedback criterion indicates that a leaf icon is to be displayed to the user when the user adjusts a heating temperature to be two or more degrees cooler than a current scheduled setpoint temperature. A current scheduled setpoint temperature is 75 degrees F. Using a rotatable ring on the thermostat a user adjusts the setpoint temperature to be 74 degrees F. No feedback is provided. The device nevertheless transmits the new setpoint temperature to the central server.

The next day at nearly the same time of day the user logs into a website configured to control the thermostat. The current scheduled setpoint temperature is again 75 degrees F. The user then adjusts the setpoint temperature to be 71 degrees F. The central server determines that the adjustment exceeds two degrees. Thus a green leaf icon is presented via the interface. Further the central server transmits the new setpoint temperature to the thermostat. The thermostat also aware that the scheduled setpoint temperature was 75 degrees F. also determines that the adjustment exceeds two degrees and similarly displays a green leaf icon.

A computer is provided. A user can control the computer s power state e.g. on off hibernating or sleeping monitor brightness and whether accessories are connected to and drawing power from the computer. The computer monitors usage in five minute intervals such that the computer is active if it receives any user input or performs any substantive processing during the interval and inactive otherwise.

An efficiency variable is generated based on the power used by the computer during inactive periods. The variable scales from 0 to 1 with 1 being most energy conserving. A feedback criterion indicates that a positive reinforcement or reward icon is to be displayed each morning to the user when the variable is either about 0.9 or has improved by 10 relative to a past weekly average of the variable.

On Monday a user is conscientious enough to turn off the computer when it is not in use. Thus the variable exceeds 0.9 and a positive message is displayed to the user when the user powers on the computer on Tuesday morning.

A vehicle component is provided that monitors acceleration patterns. A feedback criterion indicates that a harsh tone is to be provided if a user s cumulative absolute acceleration exceeds a threshold value during a two minute interval. Two minute intervals are evaluated every 15 seconds such that the intervals overlap between evaluations. The criterion further indicates that a loudness of the tone is to increase as a function of how far the cumulative sum exceeds the threshold value.

The user encounters highway traffic and rapidly varies the vehicle s speed between 25 miles per hour and 70 miles per hour. He grows increasingly frustrated and drives increasingly recklessly. The tone is presented and becomes louder as he drives.

Specific details are given in the above description to provide a thorough understanding of the embodiments. However it is understood that the embodiments may be practiced without these specific details. For example circuits may be shown in block diagrams in order not to obscure the embodiments in unnecessary detail. In other instances well known circuits processes algorithms structures and techniques may be shown without unnecessary detail in order to avoid obscuring the embodiments.

Implementation of the techniques blocks steps and means described above may be done in various ways. For example these techniques blocks steps and means may be implemented in hardware software or a combination thereof. For a hardware implementation the processing units may be implemented within one or more application specific integrated circuits ASICs digital signal processors DSPs digital signal processing devices DSPDs programmable logic devices PLDs field programmable gate arrays FPGAs processors controllers micro controllers microprocessors other electronic units designed to perform the functions described above and or a combination thereof.

Also it is noted that the embodiments may be described as a process which is depicted as a flowchart a flow diagram a data flow diagram a structure diagram or a block diagram. Although a flowchart may describe the operations as a sequential process many of the operations can be performed in parallel or concurrently. In addition the order of the operations may be re arranged. A process is terminated when its operations are completed but could have additional steps not included in the figure. A process may correspond to a method a function a procedure a subroutine a subprogram etc. When a process corresponds to a function its termination corresponds to a return of the function to the calling function or the main function. Furthermore embodiments may be implemented by hardware software scripting languages firmware middleware microcode hardware description languages and or any combination thereof. When implemented in software firmware middleware scripting language and or microcode the program code or code segments to perform the necessary tasks may be stored in a machine readable medium such as a storage medium. A code segment or machine executable instruction may represent a procedure a function a subprogram a program a routine a subroutine a module a software package a script a class or any combination of instructions data structures and or program statements. A code segment may be coupled to another code segment or a hardware circuit by passing and or receiving information data arguments parameters and or memory contents. Information arguments parameters data etc. may be passed forwarded or transmitted via any suitable means including memory sharing message passing token passing network transmission etc.

Furthermore schedules of control setpoints may be determined and used to control energy consuming systems as will be discussed further below. illustrates a general class of intelligent controllers to which the present disclosure is directed in part. The intelligent controller controls a device machine system or organization via any of various different types of output control signals and receives information about the controlled entity and the environment from sensor output received by the intelligent controller from sensors embedded within the controlled entity the intelligent controller or in the environment of the intelligent controller and or controlled entity. In the intelligent controller is shown connected to the controlled entity via a wire or fiber based communications medium . However the intelligent controller may be interconnected with the controlled entity by alternative types of communications media and communications protocols including wireless communications. In many cases the intelligent controller and controlled entity may be implemented and packaged together as a single system that includes both the intelligent controller and a machine device system or organization controlled by the intelligent controller. The controlled entity may include multiple devices machines system or organizations and the intelligent controller may itself be distributed among multiple components and discrete devices and systems. In addition to outputting control signals to controlled entities and receiving sensor input the intelligent controller also provides a user interface through which a human user or remote entity including a user operated processing device or a remote automated control system can input immediate control inputs to the intelligent controller as well as create and modify the various types of control schedules. In the intelligent controller provides a graphical display component that displays a control schedule and includes a number of input components that provide a user interface for input of immediate control directives to the intelligent controller for controlling the controlled entity or entities and input of scheduling interface commands that control display of one or more control schedules creation of control schedules and modification of control schedules.

To summarize the general class of intelligent controllers to which the current is directed receive sensor input output control signals to one or more controlled entities and provide a user interface that allows users to input immediate control command inputs to the intelligent controller for translation by the intelligent controller into output control signals as well as to create and modify one or more control schedules that specify desired controlled entity operational behavior over one or more time periods. These basic functionalities and features of the general class of intelligent controllers provide a basis upon which automated control schedule learning to which the present disclosure is directed can be implemented.

The controller logic accesses and uses a variety of different types of stored information and inputs in order to generate output control signals that control the operational behavior of one or more controlled entities. The information used by the controller logic may include one or more stored control schedules received output from one or more sensors immediate control inputs received through an immediate control interface and data commands and other information received from remote data processing systems including cloud based data processing systems . In addition to generating control output the controller logic provides an interface that allows users to create and modify control schedules and may also output data and information to remote entities other intelligent controllers and to users through an information output interface.

There are many different types of sensors and sensor output. In general sensor output is directly or indirectly related to some type of parameter machine state organization state computational state or physical environmental parameter. illustrates the general characteristics of sensor output. As shown in a first plot in a sensor may output a signal represented by curve over time with the signal directly or indirectly related to a parameter P plotted with respect to the vertical axis . The sensor may output a signal continuously or at intervals with the time of output plotted with respect to the horizontal axis . In certain cases sensor output may be related to two or more parameters. For example in plot a sensor outputs values directly or indirectly related to two different parameters P and P plotted with respect to axes and respectively over time plotted with respect to vertical axis . In the following discussion for simplicity of illustration and discussion it is assumed that sensors produce output directly or indirectly related to a single parameter as in plot in . In the following discussion the sensor output is assumed to be a set of parameter values for a parameter P. The parameter may be related to environmental conditions such as temperature ambient light level sound level and other such characteristics. However the parameter may also be the position or positions of machine components the data states of memory storage address in data storage devices the current drawn from a power supply the flow rate of a gas or fluid the pressure of a gas or fluid and many other types of parameters that comprise useful information for control purposes.

The control schedules learned by an intelligent controller represent a significant component of the results of automated learning. The learned control schedules may be encoded in various different ways and stored in electronic memories or mass storage devices within the intelligent controller within the system controlled by the intelligent controller or within remote data storage facilities including cloud computing based data storage facilities. In many cases the learned control schedules may be encoded and stored in multiple locations including control schedules distributed among internal intelligent controller memory and remote data storage facilities. A setpoint change may be stored as a record with multiple fields including fields that indicate whether the setpoint change is a system generated setpoint or a user generated setpoint whether the setpoint change is an immediate control input setpoint change or a scheduled setpoint change the time and date of creation of the setpoint change the time and date of the last edit of the setpoint change and other such fields. In addition a setpoint may be associated with two or more parameter values. As one example a range setpoint may indicate a range of parameter values within which the intelligent controller should maintain a controlled environment. Setpoint changes are often referred to as setpoints. 

Finally illustrates the observed parameter changes as indicated by sensor output resulting from control by the intelligent controller of one or more controlled entities. In the sensor output directly or indirectly related to the parameter P is plotted with respect to the vertical axis . The observed parameter value is represented by a smooth continuous curve . Although this continuous curve can be seen to be related to the initial specification curve plotted in the observed curve does not exactly match that specification curve. First it may take a finite period of time for the controlled entity to achieve the parameter valued change represented by setpoint in the control schedule plotted in . Also once the parameter value is obtained and the controlled entity directed to discontinue operation the parameter value may begin to fall resulting in a feedback initiated control output to resume operation of the controlled entity in order to maintain the desired parameter value. Thus the desired high level constant parameter value in may in actuality end up as a time varying curve that does not exactly correspond to the control specification . The first level of feedback discussed above with reference to is used by the intelligent controller to control one or more control entities so that the observed parameter value over time as illustrated in matches the specified time behavior of the parameter in as closely as possible. The second level feedback control loop discussed above with reference to may involve alteration of the specification illustrated in by a user over time either by changes to stored control schedules or by input of immediate control directives in order to generate a modified specification that produces a parameter value time curve reflective of a user s desired operational results.

There are many types of controlled entities and associated controllers. In certain cases control output may include both an indication of whether the controlled entity should be currently operational as well as an indication of a level throughput or output of operation when the controlled entity is operational. In other cases the control out may be simply a binary activation deactivation signal. For simplicity of illustration and discussion the latter type of control output is assumed in the following discussion.

Each of the main cycle states is associated with two additional states 1 a schedule change state and a control change state . These states are replicated so that each main cycle state is associated with its own pair of schedule change and control change states. This is because in general schedule change and control change states are transient states from which the controller state returns either to the original main cycle state from which the schedule change or control change state was reached by a previous transition or to a next main cycle state in the above described cycle. Furthermore the schedule change and control change states are a type of parallel asynchronously operating state associated with the main cycle states. A schedule change state represents interaction between the intelligent controller and a user or other remote entity carrying out control schedule creation control schedule modification or control schedule management operations through a displayed schedule interface. The control change states represent interaction of a user or other remote entity to the intelligent controller in which the user or other remote entity inputs immediate control commands to the intelligent controller for translation into output control signals to the one or more controlled entities.

To illustrate the level of detail contained in consider the state transitions associated with states and . As can be determined from the table provided in the transition from state to state involves a control schedule change made by either a user a remote entry or by the intelligent controller itself to one or more control schedules stored within or accessible to the intelligent controller. In general following the schedule change operation transitions back to state via transition . However in the relatively unlikely event that the schedule change has resulted in sensor data that was previously within specified ranges now falling outside newly specified ranges the state transitions instead via transition to the awakening state .

Automated control schedule learning by the intelligent controller in fact occurs largely as a result of intelligent controller operation within the schedule change and control change states. Immediate control inputs from users and other remote entities resulting in transitions to the control change states provide information from which the intelligent controller learns over time how to control the one or more controlled entities in order to satisfy the desires and expectations of one or more users or remote entities. The learning process is encoded by the intelligent controller in control schedule changes made by the intelligent controller while operating in the schedule change states . These changes are based on recorded immediate control inputs recorded control schedule changes and current and historical control schedule information. Additional sources of information for learning may include recorded output control signals and sensor inputs as well as various types of information gleaned from external sources including sources accessible through the Internet. In addition to the previously described states there is also an initial state or states that represent a first power on state or state following a reset of the intelligent controller. Generally a boot operation followed by an initial configuration operation or operations leads from the one or more initial states via transitions and to one of either the quiescent state or the awakening state .

Following initial configuration the intelligent controller transitions next to the aggressive learning mode discussed above with reference to . The aggressive learning mode is a learning mode state which encompasses most or all states except for state of the states in . In other words the aggressive learning mode state is a learning mode state parallel to the general operational states discussed in . As discussed above during aggressive learning the intelligent controller attempts to create one or more control schedules that are at least minimally adequate to specify operational behavior of the intelligent controller and the entities which it controls based on frequent input from users or other remote entities. Once aggressive learning is completed the intelligent controller transitions forward through a number of steady state learning phases . Each transition downward in the state transition diagram shown in through the series of steady state learning phase states is accompanied by changes in learning mode parameters that result in generally slower more conservative approaches to automated control schedule learning as the one or more control schedules developed by the intelligent controller in previous learning states become increasingly accurate and reflective of user desires and specifications. The determination of whether or not aggressive learning is completed may be made based on a period of time a number of information processing cycles carried out by the intelligent controller by determining whether the complexity of the current control schedule or schedules is sufficient to provide a basis for slower steady state learning and or on other considerations rules and thresholds. It should be noted that in certain implementations there may be multiple aggressive learning states.

In the following discussion it is generally assumed that a parameter value tends to relax towards lower values in the absence of system operation such as when the parameter value is temperature and the controlled system is a heating unit. However in other cases the parameter value may relax toward higher values in the absence of system operation such as when the parameter value is temperature and the controlled system is an air conditioner. The direction of relaxation often corresponds to the direction of lower resource or expenditure by the system. In still other cases the direction of relaxation may depend on the environment or other external conditions such as when the parameter value is temperature and the controlled system is an HVAC system including both heating and cooling functionality.

Turning to the control schedule shown in the continuous curve represented control schedule may be alternatively encoded as discrete setpoints corresponding to vertical segments or edges in the continuous curve. A continuous curve control schedule is generally used in the following discussion to represent a stored control schedule either created by a user or remote entity via a schedule creation interface provided by the intelligent controller or created by the intelligent controller based on already existing control schedules recorded immediate control inputs and or recorded sensor data or a combination of these types of information.

Immediate control inputs are also graphically represented in parameter value versus time plots. show representations of immediate control inputs that may be received and executed by an intelligent controller and then recorded and overlaid onto control schedules such as those discussed above with reference to as part of automated control schedule learning. An immediate control input is represented graphically by a vertical line segment that ends in a small filled or shaded disk. shows representations of two immediate control inputs and . An immediate control input is essentially equivalent to an edge in a control schedule such as that shown in that is input to an intelligent controller by a user or remote entity with the expectation that the input control will be immediately carried out by the intelligent controller overriding any current control schedule specifying intelligent controller operation. An immediate control input is therefore a real time setpoint input through a control input interface to the intelligent controller.

Because an immediate control input alters the current control schedule an immediate control input is generally associated with a subsequent temporary control schedule shown in as dashed horizontal and vertical lines that form a temporary control schedule parameter vs. time curve extending forward in time from the immediate control input. Temporary control schedules and are associated with immediate control inputs and respectively in .

In an alternative approach shown in the parameter value specified by the immediate control input is maintained until a next scheduled setpoint is reached in this case the setpoint corresponding to edge in the control schedule shown in . At the next setpoint the intelligent controller resumes control according to the existing control schedule. This approach is often desirable because users often expect a manually entered setpoint to remain in force until a next scheduled setpoint change.

In a different approach shown in the parameter value specified by the immediate control input is maintained by the intelligent controller for a fixed period of time following which the parameter value that would have been specified by the existing control schedule at that point in time is resumed .

In the approach shown in the parameter value specified by the immediate control input is maintained until a setpoint with opposite direction from the immediate control input is reached at which the existing control schedule is resumed . In still alternative approaches the immediate control input may be relaxed further to a lowest reasonable level in order to attempt to optimize system operation with respect to resource and or energy expenditure. In these approaches generally used during aggressive learning a user is compelled to positively select parameter values greater than or less than a parameter value associated with a minimal or low rate of energy or resource usage.

In one example implementation of automated control schedule learning an intelligent controller monitors immediate control inputs and schedule changes over the course of a monitoring period generally coinciding with the time span of a control schedule or sub schedule while controlling one or more entities according to an existing control schedule except as overridden by immediate control inputs and input schedule changes. At the end of the monitoring period the recorded data is superimposed over the existing control schedule and a new provisional schedule is generated by combining features of the existing control schedule and schedule changes and immediate control inputs. Following various types of resolution the new provisional schedule is promoted to the existing control schedule for future time intervals for which the existing control schedule is intended to control system operation.

Cluster processing is intended to simplify the new provisional schedule by coalescing the various existing control schedule setpoints and immediate control inputs within a cluster to zero one or two new control schedule setpoints that reflect an apparent intent on behalf of a user or remote entity with respect to the existing control schedule and the immediate control inputs. It would be possible by contrast to generate the new provisional schedule as the sum of the existing control schedule setpoints and immediate control inputs. However that approach would often lead to a ragged highly variable and fine grained control schedule that generally does not reflect the ultimate desires of users or other remote entities and which often constitutes a parameter value vs. time curve that cannot be achieved by intelligent control. As one example in an intelligent thermostat two setpoints 15 minutes apart specifying temperatures that differ by ten degrees may not be achievable by an HVAC system controlled by an intelligent controller. It may be the case for example that under certain environmental conditions the HVAC system is capable of raising the internal temperature of a residence by a maximum of only five degrees per hour. Furthermore simple control schedules can lead to a more diverse set of optimization strategies that can be employed by an intelligent controller to control one or more entities to produce parameter values or P values over time consistent with the control schedule. An intelligent controller can then optimize the control in view of further constraints such as minimizing energy usage or resource utilization.

There are many possible approaches to resolving a cluster of existing control schedule setpoints and immediate control inputs into one or two new provisional schedule setpoints. illustrate one approach to resolving schedule clusters. In each of three plots are shown. The first plot shows recorded immediate control inputs superimposed over an existing control schedule. The second plot reduces the different types of setpoints to a single generic type of equivalent setpoints and the final plot shows resolution of the setpoints into zero one or two new provisional schedule setpoints.

The cluster illustrated in contains five setpoints . Two of these setpoints specify a decrease in P value two specify an increase in P value and one had no effect. As a result there is no clear P value change intent demonstrated by the collection of setpoints and therefore the new provisional schedule contains no setpoints over the cluster interval with the P value maintained at the initial P value of the existing control schedule within the cluster interval.

In the cluster includes three setpoints . The setpoint corresponding to the existing control schedule setpoint and a subsequent immediate control setpoint indicate a clear intent to raise the P value at the beginning of the cluster interval and the final setpoint indicates a clear intent to lower the P value at the end of the cluster interval. In this case the three setpoints are replaced by two setpoints and in the new provisional schedule that mirror the intent inferred from the three setpoints in the cluster. shows a similar situation in which three setpoints in the cluster are replaced by two new provisional schedule setpoints and in this case representing a temporary lowering and then subsequent raising of the P value as opposed to the temporary raising and subsequent lowering of the P value in the new provisional schedule in .

There are many different computational methods that can recognize the trends of clustered setpoints discussed with reference to . These trends provide an example of various types of trends that may be computationally recognized. Different methods and strategies for cluster resolution are possible including averaging curve fitting and other techniques. In all cases the goal of cluster resolution is to resolve multiple setpoints into a simplest possible set of setpoints that reflect a user s intent as judged from the existing control schedule and the immediate control inputs.

An additional step that may follow clustering and cluster resolution and precede new provisional schedule propagation in certain implementations involves spreading apart setpoints derived from immediate control setpoints in the new provisional schedule. illustrate the setpoint spreading operation. shows a new provisional schedule with setpoints labeled as discussed above with reference to with either s or i in order to indicate the class of setpoints from which the setpoints were derived. In this new provisional schedule two setpoints labeled i and are separated by a time interval of length less than a threshold time interval for separation purposes. The spreading operation detects pairs of i labeled setpoints that are separated in time by less than the threshold time interval and moves the latter setpoint of the pair forward in time so that the pair of setpoints are separated by at least a predetermined fixed length time interval in . In a slightly more complex spreading operation in the case that the latter setpoint of the pair would be moved closer than the threshold time to a subsequent setpoint the latter setpoint may be moved to a point in time halfway between the first setpoint of the pair and the subsequent setpoint. The intent of the spreading operation is to ensure adequate separation between setpoints for schedule simplicity and in order to produce a control schedule that can be realized under intelligent controller control of a system.

A next operation carried out by the currently discussed automated control schedule learning method is propagation of a new provisional sub schedule created as discussed above following a monitoring period to related sub schedules in a higher level control schedule. Schedule propagation is illustrated in . shows a higher level control schedule that spans a week in time and that includes daily sub schedules such as the Saturday sub schedule . In the Monday sub schedule has recently been replaced by a new provisional Monday sub schedule following the end of a monitoring period indicated in by crosshatching oppositely slanted from the crosshatching of the sub schedules corresponding to other days of the week. As shown in the schedule propagation technique used in the currently discussed automated control schedule learning method involves propagating the new provisional Monday sub schedule to other related sub schedules in the higher level control schedule . In this case weekday sub schedules are considered to be related to one another as are weekend sub schedules but weekend sub schedules are not considered to be related to weekday sub schedules. Sub schedule propagation involves overlaying the i labeled setpoints in the new provisional schedule over related existing control schedules in this case sub schedules and then resolving the setpoint overlaid existing control schedules to produce new provisional sub schedules for the related sub schedules. In overlaying of i labeled setpoints from new provisional sub schedule onto the related sub schedules is indicated by bi directional crosshatching. Following resolution of these overlaid setpoints and existing sub schedules the entire higher level control schedule is then considered to be the current existing control schedule for the intelligent controller. In other words following resolution the new provisional sub schedules are promoted to existing sub schedules. In certain cases the sub schedule propagation rules may change over time. As one example propagation may occur to all days initially of a weekly schedule but may then more selectively propagate weekday sub schedules to weekdays and week end day sub schedules to week end days. Other such rules may be employed for propagation of sub schedules.

As discussed above there can be multiple hierarchical layers of control schedules and sub schedules maintained by an intelligent controller as well as multiple sets of hierarchically related control schedules. In these cases schedule propagation may involve relatively more complex propagation rules for determining to which sub schedules a newly created provisional sub schedule should be propagated. Although propagation is shown in in the forward direction in time propagation of a new provisional schedule or new provisional sub schedule may be carried out in either a forward or reverse direction with respect to time. In general new provisional schedule propagation is governed by rules or by tables listing those control schedules and sub schedules considered to be related to each control schedule and or sub schedule.

Following propagation and overlaying of i labeled setpoints onto a new provisional schedule to a related sub schedule or control schedule as shown in numerous rules may be applied to the overlying setpoints and existing control schedule in order to simplify and to make realizable the new provisional schedule generated from the propagated setpoints and existing control schedule. illustrate a number of example rules used to simplify a existing control schedule overlaid with propagated setpoints as part of the process of generating a new provisional schedule. Each of include two P value vs. t plots the first showing a propagated setpoint overlying a existing control schedule and the second showing resolution of the propagated setpoint to generate a portion of a new provisional schedule obtained by resolving a propagated setpoint.

The first left hand P value vs. t plot in shows a propagated setpoint overlying an existing control schedule . also illustrates terminology used in describing many of the example rules used to resolve propagated setpoints with existing control schedules. In a first existing setpoint pe1 precedes the propagated setpoint in time by a length of time a and a second existing setpoint of the existing control schedule pe2 follows the propagated setpoint in time by a length of time b . The P value difference between the first existing control schedule setpoint and the propagated setpoint is referred to as P . The right hand P value vs. t plot shown in illustrates a first propagated setpoint resolution rule. As shown in this FIG. when P is less than a threshold P and b is less than a threshold t then the propagated setpoint is deleted. Thus resolution of the propagated setpoint with the existing control schedule by rule 1 removes the propagated setpoint as shown in the right hand side of .

When none of the first four rules described above with reference to are applicable then additional rules may be tried in order to resolve a propagated setpoint with an existing control schedule. illustrates a fifth rule. When b is less than a threshold t and P is less than a threshold p then as shown in the propagated setpoint is deleted. In other words a propagated setpoint too close to an existing control schedule setpoint is not incorporated into the new provisional control schedule. The existing setpoints may also be reconsidered during propagated setpoint resolution. For example as shown in when a second existing setpoint pe2 that occurs after a first existing setpoint pe1 results in a change in the parameter value P less than a threshold P then the second existing setpoint pe2 may be removed. Such proximal existing setpoints may arise due to the deference given to schedule changes following previous monitoring periods. Similarly as shown in when a propagated setpoint follows an existing setpoint and the change in the parameter value P produced by the propagated setpoint is less than a threshold P value then the propagated setpoint is deleted. As shown in two existing setpoints that are separated by less than a threshold t value may be resolved into a single setpoint coincident with the first of the two existing setpoints. Finally in similar fashion a propagated setpoint that is too close in time to an existing setpoint may be deleted.

In certain implementations a significant distinction is made between user entered setpoint changes and automatically generated setpoint changes. The former setpoint changes are referred to as anchor setpoints and are not overridden by learning. In many cases users expect that the setpoints which they manually enter should not be changed. Additional rules heuristics and consideration can be used to differentiate setpoint changes for various levels of automated adjustment during both aggressive and steady state learning. It should also be noted that setpoints associated with two parameter values that indicate a parameter value range may be treated in different ways during comparison operations used in pattern matching and other automated learning calculations and determinations. For example a range setpoint change may need to match another range setpoint change in both parameters to be deemed to be equivalent or identical.

Next an example implementation of an intelligent controller that incorporates the above described automated control schedule learning method is provided. illustrate an example implementation of an intelligent controller that incorporates the above described automated control schedule learning method. At the onset it should be noted that the following implementation is but one of many different possible implementations that can be obtained by varying any of many different design and implementation parameters including modular organization control structures data structures programming language hardware components firmware and other such design and implementation parameters. Many different types of control schedules may be used by different types of intelligent controllers applied to different control domains. Automated control schedule learning methods incorporated into intelligent controller logic may significantly vary depending on the types and numbers of control schedules that specify intelligent controller operation. The time periods spanned by various different types of control schedules and the granularity in time of control schedules may vary widely depending on the control tasks for which particular controllers are designed.

In step the intelligent controller waits for a next control related event to occur. When a control related event occurs control flows to step and the intelligent controller determines whether an immediate control input has been input by a user or remote entity through the immediate control input interface. When an immediate control input has been input by a user or other remote entity as determined in step the intelligent controller carries out the immediate control input in step generally by changing internally stored specified ranges for parameter values and when needed activating one or more controlled entities and then the immediate control input is recorded in memory in step . When an additional setpoint or other schedule feature needs to be added to terminate the immediate control input as determined in step then the additional setpoint or other schedule feature is added to the control schedule in step . Examples of such added setpoints are discussed above with reference to . When the control related event that triggered exit from step is a timer event indicating that the current time is that of a scheduled setpoint or scheduled control as determined in step then the intelligent controller carries out the scheduled controller setpoint in step . When the scheduled control carried out in step is a temporary scheduled control added in step to terminate an immediate control input as determined in step then the temporary scheduled control is deleted in step . When the control related event that triggered exit from step is a change made by a user or remote entity to the control schedule via the control schedule change interface as determined in step then when the schedule change is prospective as determined in step the schedule change is made by the intelligent controller to the existing control schedule in step as discussed above with reference to . Otherwise the schedule change is retrospective and is recorded by the intelligent controller into memory in step for later use in varying a new provisional schedule at the termination of the current monitoring period.

When the control related event that triggered exit from is a timer event associated with the end of the current monitoring period as determined in step then a monitoring period routine is called in step to process recorded immediate control inputs and schedule changes as discussed above with reference to . When additional control related events occur after exit from step which are generally queued to an occurred event queue as determined in step control flows back to step for handling a next queued event. Otherwise control flows back in step where the intelligent controller waits for a next control related event.

In step the intelligent controller combines all recorded immediate control inputs with the existing control schedule as discussed above with reference to . In step the routine cluster is called in order to partition the recorded immediate control inputs and schedule changes and existing control schedule setpoints to clusters as discussed above with reference to and . In step the intelligent controller calls the routine simplify clusters to resolve the various setpoints within each cluster as discussed above with reference to . In step the intelligent controller calls the routine generate new schedule to generate a new provisional schedule following cluster resolution as discussed above with reference to B. In step the intelligent controller calls the routine propagateNewSchedule discussed above with reference to in order to propagate features of the provisional schedule generated in step to related sub schedules and control schedules of the intelligent controller s control schedule. In step the intelligent controller determines whether or not the currently completed monitoring period is the final monitoring period in the aggressive learning mode. When the recently completed monitoring period is the final monitoring period in the aggressive monitoring learning mode as determined in step then in step the intelligent controller sets various state variables that control the current learning mode to indicate that the intelligent controller is now operating in the steady state learning mode and in step sets various learning parameters to parameter values compatible with phase I of steady state learning.

Many different learning parameters may be used in different implementations of automated control schedule learning. In the currently discussed implementation learning parameters may include the amount of time that immediate control inputs are carried out before termination by the intelligent controller the magnitudes of the various threshold t and threshold P values used in cluster resolution and resolution of propagated setpoints with respect to existing control schedules. Finally in step the recorded immediate control inputs and schedule changes as well as clustering information and other temporary information derived and stored during creation of a new provisional schedule and propagation of the provisional schedule are deleted and the learning logic is reinitialized to begin a subsequent monitoring period.

Various different types of clustering criteria may be used by an intelligent controller. In general it is desirable to generate a sufficient number of clusters to produce adequate control schedule simplification but too many clusters result in additional control schedule complexity. The clustering criteria are designed therefore to choose a tint sufficient to produce a desirable level of clustering that leads to a desirable level of control schedule simplification. The while loop continues while the value of tint remains within an acceptable range of values. When the clustering criteria fails to be satisfied by repeated calls to the routine intervalCluster in the while loop of steps then in step one or more alternative clustering methods may be employed to generate clusters when needed for control schedule simplification. Alternative methods may involve selecting clusters based on local maximum and minimum parameter values indicated in the control schedule or when all else fails by selecting as cluster boundaries a number of the longest setpoint free time intervals within the setpoints generated in step .

As mentioned above an intelligent controller may employ multiple different control schedules that are applicable over different periods of time. For example in the case of a residential HVAC thermostat controller an intelligent controller may use a variety of different control schedules applicable to different seasons during the year perhaps a different control schedule for winter summer spring and fall. Other types of intelligent controllers may use a number of control schedules for various different periods of control that span minutes and hours to months years and even greater periods of time.

An implementation of automated control schedule learning is included in a next described intelligent thermostat. The intelligent thermostat is provided with a selectively layered functionality that exposes unsophisticated users to a simple user interface but provides advanced users with an ability to access and manipulate many different energy saving and energy tracking capabilities. Even for the case of unsophisticated users who are only exposed to the simple user interface the intelligent thermostat provides advanced energy saving functionality that runs in the background. The intelligent thermostat uses multi sensor technology to learn the heating and cooling environment in which the intelligent thermostat is located and to optimize energy saving settings.

The intelligent thermostat also learns about the users beginning with a setup dialog in which the user answers a few simple questions and then continuing over time using multi sensor technology to detect user occupancy patterns and to track the way the user controls the temperature using schedule changes and immediate control inputs. On an ongoing basis the intelligent thermostat processes the learned and sensed information automatically adjusting environmental control settings to optimize energy usage while at the same time maintaining the temperature within the environment at desirable levels according to the learned occupancy patterns and comfort preferences of one or more users. Advantageously the selectively layered functionality of the intelligent thermostat allows for effective operation in a variety of different technological circumstances within home and business environments. For simple environments having no wireless home network or Internet connectivity the intelligent thermostat operates effectively in a standalone mode learning and adapting to an environment based on multi sensor technology and user input. However for environments that have home network or Internet connectivity the intelligent thermostat operates effectively in a network connected mode to offer additional capabilities.

When the intelligent thermostat is connected to the Internet via a home network such as through IEEE 802.11 Wi Fi connectivity the intelligent thermostat may 1 provide real time or aggregated home energy performance data to a utility company intelligent thermostat data service provider intelligent thermostats in other homes or other data destinations 2 receive real time or aggregated home energy performance data from a utility company intelligent thermostat data service provider intelligent thermostats in other homes or other data sources 3 receive new energy control instructions and or other upgrades from one or more intelligent thermostat data service providers or other sources 4 receive current and forecasted weather information for inclusion in energy saving control algorithm processing 5 receive user control commands from the user s computer network connected television smart phone and or other stationary or portable data communication appliance 6 provide an interactive user interface to a user through a digital appliance 7 receive control commands and information from an external energy management advisor such as a subscription based service aimed at leveraging collected information from multiple sources to generate energy saving control commands and or profiles for their subscribers 8 receive control commands and information from an external energy management authority such as a utility company to which limited authority has been voluntarily given to control the intelligent thermostat in exchange for rebates or other cost incentives 9 provide alarms alerts or other information to a user on a digital appliance based on intelligent thermostat sensed HVAC related events 10 provide alarms alerts or other information to the user on a digital appliance based on intelligent thermostat sensed non HVAC related events and 11 provide a variety of other useful functions enabled by network connectivity.

Next an implementation of the above described automated control schedule learning methods for the above described intelligent thermostat is provided. illustrate steps for achieving initial learning. illustrate a progression of conceptual views of a thermostat schedule. The progression of conceptual views of a thermostat schedule occurs as processing is performed according to selected steps of for an example one day monitoring period during an initial aggressive learning period. For one implementation the steps of are carried out by the head unit microprocessor of thermostat with or without Internet connectivity. In other implementations one or more of the steps of can be carried out by a cloud server to which the thermostat has network connectivity. While the example presented in is for a heating schedule scenario the described method is likewise applicable for cooling schedule learning and can be readily extended to HVAC schedules containing mixtures of heating setpoints cooling setpoints and or range setpoints. While the examples of are presented in the particular context of establishing a weekly schedule which represents one particularly appropriate time basis for HVAC schedule establishment and execution in other implementations a bi weekly HVAC schedule a semi weekly HVAC schedule a monthly HVAC schedule a bi monthly HVAC schedule a seasonal HVAC schedule and other types of schedules may be established. While the examples of are presented and or discussed in terms of a typical residential installation this is for the purpose of clarity of explanation. The methods are applicable to a wide variety of other types of enclosures such as retail stores business offices industrial settings and so forth. In the discussion that follows the time of a particular user action or setpoint entry are generally expressed as both the day and the time of day of that action or entry while the phrase time of day is generally used to express a particular time of day.

The initial learning process represents an aggressive learning approach in which the goal is to quickly establish an at least roughly appropriate HVAC schedule for a user or users based on a very brief period of automated observation and tracking of user behavior. Once the initial learning process is established the thermostat then switches over to steady state learning which is directed to perceiving and adapting to longer term repeated behaviors of the user or users. In most cases the initial learning process is begun in step in response to a new installation and startup of the thermostat in a residence or other controlled environment often following a user friendly setup interview. Initial learning can also be invoked by other events such as a factory reset of the intelligent thermostat or an explicit request of a user who may wish for the thermostat to repeat the aggressive learning phase.

In step a default beginning schedule is accessed. For one implementation the beginning schedule is simply a single setpoint that takes effect at 8 AM each day and that includes a single setpoint temperature. This single setpoint temperature is dictated by a user response that is provided near the end of the setup interview or upon invocation of initial learning where the user is asked whether to start learning a heating schedule or a cooling schedule. When the user chooses heating the initial single setpoint temperature is set to 68 F. or some other appropriate heating setpoint temperature and when the user chooses cooling the initial single setpoint temperature is set to 80 F. or some other appropriate cooling setpoint temperature. In other implementations the default beginning schedule can be one of a plurality of predetermined template schedules that is selected directly or indirectly by the user at the initial setup interview. illustrates an example of a default beginning schedule having heating setpoints labeled a through g .

In step a new monitoring period is begun. The selection of a one day monitoring period has been found to provide good results in the case of control schedule acquisition in an intelligent thermostat. However other monitoring periods can be used including multi day blocks of time sub day blocks of time other suitable periods and can alternatively be variable random or continuous. For example when performed on a continuous basis any user setpoint change or scheduled setpoint input can be used as a trigger for processing that information in conjunction with the present schedule to produce a next version iteration or refinement of the schedule. For one implementation in which the thermostat is a power stealing thermostat having a rechargeable battery the period of one day has been found to provide a suitable balance between the freshness of the schedule revisions and the need to maintain a modest computing load on the head unit microprocessor to preserve battery power.

In step throughout the day the intelligent thermostat receives and stores both immediate control and schedule change inputs. shows a representation of a plurality of immediate control and schedule change user setpoint entries that were made on a typical day of initial learning which happens to be a Tuesday in the currently described example. In the following discussion and in the accompanying drawings including a preceding superscript N identifies a schedule change or non real time NRT setpoint entry and a preceding superscript R identifies an immediate control or real time RT setpoint entry. An encircled number represents a pre existing scheduled setpoint. For each NRT setpoint a succeeding subscript that identifies the entry time of that NRT setpoint is also provided. No such subscript is needed for RT setpoints since their horizontal position on the schedule is indicative of both their effective time and their entry time. Thus in the example shown in at 7 30 AM a user made an RT setpoint entry i having a temperature value of 76 F. at 7 40 AM a user made another RT setpoint entry j having a temperature value of 72 F. at 9 30 AM a user made another RT setpoint entry l having a temperature value of 72 F. at 11 30 AM a user made another RT setpoint entry m having a temperature value of 76 F. and so on. On Tuesday at 10 AM a user created through a scheduling interface an NRT setpoint entry n that is to take effect on Tuesdays at 12 00 PM and created an NRT setpoint entry w that is to take effect on Tuesdays at 9 00 PM. Subsequently on Tuesday at 4 00 PM a user created an NRT setpoint entry h that is to take effect on Mondays at 9 15 PM and created an NRT setpoint entry k that was to take effect on Tuesdays at 9 15 AM. Finally on Tuesday at 8 PM a user created an NRT setpoint entry s that is to take effect on Tuesdays at 6 00 PM.

Referring now to step throughout the 24 hour monitoring period the intelligent thermostat controls the HVAC system according to whatever current version of the control schedule is in effect as well as whatever RT setpoint entries are made by the user and whatever NRT setpoint entries have been made that are causally applicable. The effect of an RT setpoint entry on the current setpoint temperature is maintained until the next pre existing setpoint is encountered until a causally applicable NRT setpoint is encountered or until a subsequent RT setpoint entry is made. Thus with reference to on Tuesday morning at 6 45 PM the current operating setpoint of the thermostat changes to 73 F. due to pre existing setpoint b then at 7 30 AM the current operating setpoint changes to 76 F. due to RT setpoint entry i then at 7 45 AM the current operating setpoint changes to 72 F. due to RT setpoint entry j then at 8 15 AM the current operating setpoint changes to 65 F. due to pre existing setpoint entry c then at 9 30 AM the current operating setpoint changes to 72 F. due to RT setpoint entry l then at 11 30 AM the current operating setpoint changes to 76 F. due to RT setpoint entry m then at 12 00 PM the current operating setpoint changes to 71 F. due to NRT setpoint entry n then at 12 15 PM the current operating setpoint changes to 78 F. due to RT setpoint entry o and so forth. At 9 15 AM there is no change in the current setpoint due to NRT setpoint entry k because it did not yet exist. By contrast the NRT setpoint entry n is causally applicable because it was entered by the user at LOAM that day and took effect at its designated effective time of 12 00 PM.

According to one optional alternative embodiment step can be carried out so that an RT setpoint entry is only effective for a maximum of 2 hours or other relatively brief interval as the operating setpoint temperature with the operating setpoint temperature returning to whatever temperature would be specified by the pre existing setpoints on the current schedule or by any causally applicable NRT setpoint entries. This optional alternative embodiment is designed to encourage the user to make more RT setpoint entries during the initial learning period so that the learning process can be achieved more quickly. As an additional optional alternative the initial schedule in step is assigned with relatively low energy setpoints as for example relatively low temperature setpoints in winter such as 62 F. which generally produces a lower energy control schedule. As yet another alternative during the first few days instead of reverting to pre existing setpoints after 2 hours the operating setpoint instead reverts to a lowest energy pre existing setpoint in the schedule.

Referring now to step at the end of the monitoring period the stored RT and NRT setpoints are processed with respect to one another and the current schedule to generate a modified version iteration or refinement of the schedule the particular steps for which are shown in . This processing can be carried out for example at 11 50 PM of the learning day or at some other time near or around midnight. When it is determined that the initial learning is not yet complete in step the modified version of the schedule is used for another day of initial learning in steps is yet again modified in step and the process continues until initial learning is complete. When initial learning is complete steady state learning begins in step .

For some implementations the decision in step regarding whether or not the initial control schedule learning is complete is based on both the passage of time and whether there has been a sufficient amount of user behavior to record and process. For one implementation the initial learning is considered to be complete only when two days of initial learning have passed and there have been ten separate one hour intervals in which a user has entered an RT or NRT setpoint. Any of a variety of different criteria can be used to determine whether there has been sufficient user interaction to conclude initial learning.

In step each cluster of setpoint entries is processed to generate a single new setpoint that represents the entire cluster in terms of effective time and temperature value. This process is directed to simplifying the schedule while at the same time best capturing the true intent of the user by virtue of the user s setpoint entry behavior. While a variety of different approaches including averaging of temperature values and effective times of cluster members can be used one method for carrying out step described in more detail in takes into account the NRT vs. RT status of each setpoint entry the effective time of each setpoint entry and the entry time of each setpoint entry.

Referring now to which corresponds to step of a determination is made in step whether there are any NRT setpoint entries in the cluster having an entry time that is later than the earliest effective time in the cluster. When this is the case then in step the cluster is replaced by a single representative setpoint with both the effective time and the temperature value of the latest entered NRT setpoint entry. This approach provides deference to the wishes of the user who has taken the time to specifically enter a desired setpoint temperature for that time. When in step there are no such NRT setpoint entries then in step the cluster is replaced by a single representative setpoint with an effective time of the earliest effective cluster member and a setpoint temperature equal to that of the cluster member having the latest entry time. This approach provides deference to the wishes of the user as expressed in the immediate control inputs and existing setpoints.

Referring again to in step the new representative setpoint that determined in step is tagged with an RT or NRT label based on the type of setpoint entry from which the setpoint s temperature value was assigned. Thus in accordance with the logic of were an NRT setpoint to have the latest occurring time of entry for the cluster the new setpoint would be tagged as NRT. Were an RT setpoint to have the latest occurring time of entry the new setpoint would be tagged as RT. In steps any singular setpoint entries that are not clustered with other setpoint entries are simply carried through as new setpoints to the next phase of processing in step .

Referring to it can be seen that for the ij cluster which has only RT setpoint entries the single representative setpoint ij is assigned to have the earlier effective time of RT setpoint entry i while having the temperature value of the later entered RT setpoint entry j representing an application of step of and that new setpoint ij is assigned an RT label in step . It can further be seen that for the kl cluster which has an NRT setpoint k with an entry time later than the earliest effective time in that cluster the single representative setpoint kl is assigned to have both the effective time and temperature value of the NRT setpoint entry k representing an application of step of and that new setpoint kl is assigned an NRT label in step . For the mno cluster which has an NRT setpoint n but with an entry time earlier than the earliest effective time in that cluster the single representative setpoint mno is assigned to have the earliest effective time of RT setpoint entry m while having the temperature value of the latest entered setpoint entry o again representing an application of step of and that new setpoint mno is assigned an RT label in step . The remaining results shown in all of which are also considered to be new setpoints at this stage also follow from the methods of .

Referring again to step is next carried out after steps and and applied to the new setpoints as a group which are shown in . In step any new setpoint having an effective time that is 31 60 minutes later than that of any other new setpoint is moved in time to have a new effective time that is 60 minutes later that that of the other new setpoint. This is shown in with respect to the new setpoint q the effective time of which is being moved to 5 00 PM so that it is 60 minutes away from the 4 00 PM effective time of the new setpoint p. In one implementation this process is only performed a single time based on an instantaneous snapshot of the schedule at the beginning of step . In other words there is no iterative cascading effect with respect to these new setpoint separations. Accordingly while step results in a time distribution of new setpoint effective times that are generally separated by at least one hour some new setpoints having effective times separated by less than one hour may remain. These mirror variances have been found to be tolerable and often preferable to deleterious effects resulting from cascading the operation to achieve absolute one hour separations. Furthermore these one hour separations can be successfully completed later in the algorithm after processing against the pre existing schedule setpoints. Other separation intervals may be used in alternative implementations.

Referring to step of consistent with the aggressive purposes associated with initial learning the new setpoints that have now been established for the current learning day are next replicated across other days of the week that may be expected to have similar setpoints when those new setpoints have been tagged as RT setpoints. Preferably new setpoints tagged as NRT are not replicated since it is likely that the user who created the underlying NRT setpoint entry has already created similar desired NRT setpoint entries. For some implementations that have been found to be well suited for the creation of a weekly schedule a predetermined set of replication rules is applied. These replication rules depend on which day of the week the initial learning process was first started. The replication rules are optimized to take into account the practical schedules of a large population of expected users for which weekends are often differently structured than weekdays while at the same time promoting aggressive initial schedule establishment. For one implementation the replication rules set forth in Table 1 are applicable.

Referring now to step of the new setpoints and replicated new setpoints are overlaid onto the current schedule of pre existing setpoints as illustrated in which shows the pre existing setpoints encircled and the new setpoints not encircled. In many of the subsequent steps the RT tagged and NRT tagged new setpoints are treated the same and when so the RT and NRT labels are not used in describing such steps. In step a mutual filtering and or time shifting of the new and pre existing setpoints is carried out according to predetermined filtering rules that are designed to optimally or near optimally capture the pattern information and preference information while also simplifying overall schedule complexity. While a variety of different approaches can be used one method for carrying out the objective of step is described in greater detail in . Finally in step the results of step become the newest version of the current schedule that is either further modified by another initial learning day or that is used as the starting schedule in the steady state learning process.

Referring to which sets forth one method for carrying out the processing of step of a first type of any new setpoint having an effective time that is less than one hour later than that of a first pre existing setpoint and less than one hour earlier than that of a second pre existing setpoint is identified in step . Examples of such new setpoints of the first type are circled in dotted lines in . The steps of are carried out for the entire weeklong schedule even though only a portion of that schedule is shown in for explanatory purposes. In step any new setpoints of the first type are deleted when they have effective times less than one hour earlier than the immediately subsequent pre existing setpoint and when they have a temperature value that is not more than one degree F. away from that of the immediately preceding pre existing setpoint. For purposes of step and other steps in which a nearness or similarity evaluation between the temperature values of two setpoints is undertaken the comparison of the setpoint values is carried out with respect to rounded versions of their respective temperature values the rounding being to the nearest one degree F. or to the nearest 0.5 degree C. even though the temperature values of the setpoints may be maintained to a precision of 0.2 F. or 0.1 C. for other operational purposes. When using rounding for example two setpoint temperatures of 77.6 F. and 79.4 F. are considered as 1 degree F. apart when each is first rounded to the nearest degree F. and therefore not greater than 1 degree F. apart. Likewise two setpoint temperatures of 20.8 C. and 21.7 C. will be considered as 0.5 degree C. apart when each is first rounded to the nearest 0.5 degree C. and therefore not greater than 0.5 degree C. apart. When applied to the example scenario at new setpoint ij falls within the purview of the rule in step and that new setpoint ij is thus deleted as shown in .

Subsequent to the deletion of any new setpoints of the first type in step any new setpoint of the first type that has an effective time that is within 30 minutes of the immediately subsequent pre existing setpoint is identified in step . When such first type setpoints are identified they are moved later in time to one hour later than the immediately preceding pre existing setpoint and the immediately subsequent pre existing setpoint is deleted. When applied to the example scenario at new setpoint ij2 falls within the purview of the rule in step and new setpoint ij2 is therefore moved later in time to one hour from the earlier pre existing setpoint f with the subsequent pre existing setpoint g deleted as shown in . Subsequently in step any new setpoint of the first type that has an effective time that is within 30 minutes of the immediately preceding pre existing setpoint there is identified. When such a first type setpoint is identified the setpoint is moved earlier in time to one hour earlier than the immediately subsequent pre existing setpoint and the immediately preceding pre existing setpoint is deleted. In step for each remaining new setpoint of the first type that is not subject to the purview of steps or the setpoint temperature of the immediately preceding pre existing setpoint is changed to that of the new setpoint and that new setpoint is deleted.

In step any RT tagged new setpoint that is within one hour of an immediately subsequent pre existing setpoint and that has a temperature value not greater than one degree F. different from an immediately preceding pre existing setpoint is identified and deleted. In step for each new setpoint any pre existing setpoint that is within one hour of that new setpoint is deleted. Thus for example shows a pre existing setpoint a that is less than one hour away from the new setpoint x2 and so the pre existing setpoint a is deleted in . Likewise the pre existing setpoint d is less than one hour away from the new setpoint q and so the pre existing setpoint d is deleted in .

In step starting from the earliest effective setpoint time in the schedule and moving later in time to the latest effective setpoint time a setpoint is deleted when the setpoint has a temperature value that differs by not more than 1 degree F. or 0.5 degree C. from that of the immediately preceding setpoint. As discussed above anchor setpoints in many implementations are not deleted or adjusted as a result of automatic schedule learning. For example shows the setpoints mno and x that are each not more than one degree F. from immediately preceding setpoints and so setpoints mno and x are deleted in . Finally in step when there are any remaining pairs of setpoints new or pre existing having effective times that are less than one hour apart the later effective setpoint of each pair is deleted. The surviving setpoints are then established as members of the current schedule as indicated in all of which are labeled pre existing setpoints for subsequent iterations of the initial learning process of or when that process is complete for subsequent application of steady state learning described below. Of course the various time intervals for invoking the above discussed clustering resolving filtering and shifting operations may vary in alternative implementations.

Certain differences arise between initial and steady state learning in that for the steady state learning process there is an attention to the detection of historical patterns in the setpoint entries an increased selectivity in the target days across which the detected setpoint patterns are replicated and other differences. Referring to the steady state learning process begins in step which can correspond to the completion of the initial learning process step and which can optionally correspond to a resumption of steady state learning after a user requested pause in learning. In step a suitable version of the current schedule is accessed. When the steady state learning is being invoked immediately following initial learning often be the case for a new intelligent thermostat installation the control schedule is generally the current schedule at the completion of initial learning.

However a previously established schedule may be accessed in step in certain implementations. A plurality of different schedules that were previously built up by the intelligent thermostat over a similar period in the preceding year can be stored in the thermostat or alternatively in a cloud server to which it has a network connection. For example there may be a January schedule that was built up over the preceding January and then stored to memory on January 31. When step is being carried out on January 1 of the following year the previously stored January schedule can be accessed. In certain implementations the intelligent thermostat may establish and store schedules that are applicable for any of a variety of time periods and then later access those schedules in step for use as the next current schedule. Similar storage and recall methods are applicable for the historical RT NRT setpoint entry databases that are discussed further below.

In step a new day of steady state learning is begun. In step throughout the day the intelligent thermostat receives and tracks both real time and non real time user setpoint entries. In step throughout the day the intelligent thermostat proceeds to control an HVAC system according to the current version of the schedule whatever RT setpoint entries are made by the user and whatever NRT setpoint entries have been made that are causally applicable.

According to one optional alternative embodiment step can be carried out so that any RT setpoint entry is effective only for a maximum of 4 hours after which the operating setpoint temperature is returned to whatever temperature is specified by the pre existing setpoints in the current schedule and or whatever temperature is specified by any causally applicable NRT setpoint entries. As another alternative instead of reverting to any pre existing setpoints after 4 hours the operating setpoint instead reverts to a relatively low energy value such as a lowest pre existing setpoint in the schedule. This low energy bias operation can be initiated according to a user settable mode of operation.

At the end of the steady state learning day such as at or around midnight processing steps are carried out. In step a historical database of RT and NRT user setpoint entries which may extend back at least two weeks is accessed. In step the day s tracked RT NRT setpoint entries are processed in conjunction with the historical database of RT NRT setpoint entries and the pre existing setpoints in the current schedule to generate a modified version of the current schedule using steps that are described further below with respect to . In step the day s tracked RT NRT setpoint entries are then added to the historical database for subsequent use in the next iteration of the method. Notably in step whether there should be a substitution of the current schedule to something that is more appropriate and or preferable is determined such as for a change of season a change of month or another such change. When a schedule change is determined to be appropriate a suitable schedule is accessed in step before the next iteration. Otherwise the next iteration is begun in step using the most recently computed schedule. In certain implementations step is carried out based on direct user instruction remote instruction from an automated program running on an associated cloud server remote instruction from a utility company automatically based on the present date and or current forecasted weather trends or based on a combination of one or more of the above criteria or other criteria.

Referring to which corresponds to step of steps similar to those of steps of are carried out in order to cluster resolve tag and adjust the day s tracked RT NRT setpoint entries and historical RT NRT setpoint entries. In step all RT tagged setpoints appearing in the results of step are identified as pattern candidate setpoints. In step the current day s pattern candidate setpoints are compared to historical pattern candidate setpoints to detect patterns such as day wise or week wise patterns of similar effective times and similar setpoint temperatures. In step for any such patterns detected in step that include a current day pattern candidate setpoint the current day pattern candidate setpoint is replicated across all other days in the schedule for which such pattern may be expected to be applicable. As an example Table 2 illustrates one particularly useful set of pattern matching rules and associated setpoint replication rules.

For one implementation in carrying out step the replicated setpoints are assigned the same effective time of day and the same temperature value as the particular current day pattern candidate setpoint for which a pattern is detected. In other implementations the replicated setpoints can be assigned the effective time of day of the historical pattern candidate setpoint that was involved in the match and or the temperature value of that historical pattern candidate setpoint. In still other implementations the replicated setpoints can be assigned the average effective time of day of the current and historical pattern candidate setpoints that were matched and or the average temperature value of the current and historical pattern candidate setpoints that were matched.

In step the resulting replicated schedule of new setpoints is overlaid onto the current schedule of pre existing setpoints. Also in step any NRT tagged setpoints resulting from step are overlaid onto the current schedule of pre existing setpoints. In step the overlaid new and pre existing setpoints are then mutually filtered and or shifted in effective time using methods similar to those discussed above for step of . The results are then established in step as the newest version of the current schedule.

Although the present invention has been described in terms of particular examples it is not intended that the invention be limited to these examples. Modifications within the spirit of the invention will be apparent to those skilled in the art. For example as discussed above automated control schedule learning may be employed in a wide variety of different types of intelligent controllers in order to learn one or more schedules that may span period of time from milliseconds to years. Intelligent controller logic may include logic circuit implementations firmware and computer instruction based routine and program implementations all of which may vary depending on the selected values of a wide variety of different implementation and design parameters including programming language modular organization hardware platform data structures control structures and many other such design and implementation parameters. As discussed above the steady state learning mode follows aggressive learning may include multiple different phases with the intelligent controller generally becoming increasingly conservative with regard to schedule modification with later phases. Automated control schedule learning may be carried out within an individual intelligent controller may be carried out in distributed fashion among multiple controllers may be carried out in distributed fashion among one or more intelligent controllers and remote computing facilities and may be carried out primarily in remote computing facilities interconnected with intelligent controllers. For some embodiments the features and advantages of one or more of the teachings hereinabove are advantageously combined with the features and advantages of one or more of the teachings of the following commonly assigned applications each of which is incorporated by reference herein U.S. Ser. No. 13 656 189 filed Oct. 19 2012 International Application No. PCT US12 00007 filed Jan. 3 2012 U.S. Ser. No. 13 656 200 filed Oct. 19 2012 U.S. Ser. No. 13 632 093 filed Sep. 30 2012 U.S. Ser. No. 13 632 028 filed Sep. 30 2012 U.S. Ser. No. 13 632 070 filed Sep. 30 2012 and U.S. Ser. No. 13 632 152 filed Sep. 30 2012.

The specific embodiments described above have been shown by way of example and it should be understood that these embodiments may be susceptible to various modifications and alternative forms. It should be further understood that the claims are not intended to be limited to the particular forms disclosed but rather to cover modifications equivalents and alternatives falling within the spirit and scope of this disclosure.

