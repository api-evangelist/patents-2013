---

title: Interface between web applications for text messaging and packet-switched networks
abstract: Systems and methods are disclosed for interfacing SMS/MMS web applications with packet-switched networks. One embodiment comprises a system that handles a Mobile Terminated (MT) text message from a web application to a packet-switched network. The system receives a send command for the MT text message from the web application. The send command is based on a standard used by the web application, such as Parlay X. The system converts the send command for the MT text message to a SIP send request, and transmits the SIP send request for the MT text message to a packet-switched network for delivery to a recipient.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08977238&OS=08977238&RS=08977238
owner: Alcatel Lucent
number: 08977238
owner_city: Boulogne-Billancourt
owner_country: FR
publication_date: 20130423
---
The patent application is a divisional of a co pending U.S. patent application having the Ser. No. 13 160 703 and filed on Jun. 15 2011 which is incorporated by reference herein.

The invention is related to the field of communications and in particular to interfacing text messaging web applications with packet switched networks that use Session Initiation Protocol SIP .

Text messaging has become a popular mode of communication in many mobile or wireless networks. One example of text messaging is Short Message Service SMS which is a set of communication protocols allowing the exchange of short text messages i.e. 160 characters or less between devices. While the term text message traditionally referred to text only messages sent using SMS it has been extended to include multimedia messages such as images video sound content etc. The multimedia messages may be sent using Multimedia Message Service MMS protocol. Often times mobile users more frequently use text messaging for communication than voice calls.

Although text messaging is traditionally thought of as two mobile devices exchanging text messages there may be web based applications that allow an end user to send or receive text messages. For example an end user may access a web site that provides a page for sending receiving text messages. Through the web page the end user may enter a message intended for a recipient and a telephone number for the recipient. The web based application then generates a send request for the text message using an Application Programming Interface API defined for web based services.

Organizations have defined standard APIs for web based applications to use when sending receiving text messages. One standard is Parlay X SMS Web Service for SMPP. Parlay X SMS Web Service for SMPP provides operations for sending an SMS message to a network monitoring the delivery status of a sent SMS message and asynchronously receiving notification of message delivery status. Parlay X SMS Web Service for SMPP interacts with a native SMPP network to send receive SMS messages.

Another standard is Parlay X SMS Web Service for Parlay. Parlay X SMS Web Service for Parlay provides operations for sending an SMS message to the network monitoring the delivery status of a sent SMS message and asynchronously receiving notification of message delivery status. Parlay X SMS Web Service for Parlay interacts with a Parlay gateway using a Parlay Connector to send receive SMS messages to from a network.

Unfortunately the standard APIs presently defined for web services do not provide enough flexibility for today s evolving networks.

Embodiments described herein provide a system such as an API that interfaces SMS MMS web applications with packet switched networks. The system is able to translate messages from a web application to Session Initiation Protocol SIP that is used within the packet switched network for SMS MMS messaging. Also the system is able to translate SIP messages from the packet switched network to the standard used by the web application such as from SIP to Parlay X. By converting between the standard used by a web application and SIP text messages may be exchanged directly between the web application and the packet switched network. This advantageously improves how web based text messaging may be implemented in evolving networks such as IMS networks or LTE networks.

One embodiment comprises a system that handles a Mobile Terminated MT text message from a web application to a packet switched network. The system includes an interface operable to receive a send command for the MT text message from the web application. The send command is based on a standard used by the web application such as Parlay X. The system further includes a controller operable to convert the send command for the MT text message to a SIP send request. The interface is further operable to transmit the SIP send request for the MT text message to a packet switched network for delivery to a recipient.

In another embodiment the system is able to handle a Mobile Originated MO text message from the packet switched network to the web application. The interface is operable to receive a SIP send request for the MO text message from the packet switched network. The controller is further operable to convert the SIP send request for the MO text message to a receive command based on the standard used by the web application. The interface is further operable to transmit the receive command for the MO text message to the web application.

The figures and the following description illustrate specific exemplary embodiments of the invention. It will thus be appreciated that those skilled in the art will be able to devise various arrangements that although not explicitly described or shown herein embody the principles of the invention and are included within the scope of the invention. Furthermore any examples described herein are intended to aid in understanding the principles of the invention and are to be construed as being without limitation to such specifically recited examples and conditions. As a result the invention is not limited to the specific embodiments or examples described below but by the claims and their equivalents.

Web application is able to exchange text messages with UE with the assistance of conversion system . Conversion system acts to translate function calls operations or commands used by web application to requests responses used in packet switched network and vice versa. Conversion system may be thought of as an Application Programming Interface API as it converts standardized commands from web application to a signaling protocol used in packet switched network . In this embodiment the signaling protocol used in packet switched network is Session Initiation Protocol SIP . The standard used by web application may vary but one example of the standard may be Parlay X.

Conversion system includes an interface and a controller . Interface comprises any device or component that communicates with web application and or other web applications not shown. Interface is also able to communicate with packet switched network through a signaling protocol used within packet switched network i.e. SIP . Controller comprises any device or component that translates messages between a standard used by web application and the signaling protocol used in packet switched network .

Assume that a user of web application creates a text message intended for UE . This is referred to as a Mobile Terminated MT or Application Originated AO text message. When this occurs web application generates a function call operation or command for sending the MT text message based on the standard it is using. For example if web application uses Parlay X then web application may use a SendSms command that encapsulates the MT text message as a command for sending the MT text message. The command for sending the MT text message is referred to herein generally as a send command. Web application then transmits the send command to conversion system .

In step interface receives the send command for the MT text message from web application . In step controller converts the send command in the standard used by web application to a SIP send request. The SIP send request is used for sending the MT text message in packet switched network . One example of the SIP send request is a SIP MESSAGE that encapsulates the MT text message and is used for transporting a text message within packet switched network . In order to perform the conversion controller may store a table that maps the standardized commands from the standard used by web application to SIP Methods. The table may also map fields from the standardized commands e.g. source address terminating address message type etc. to fields in a SIP message. Controller may use this table to convert the send request from web application to the SIP send request.

In step interface transmits the SIP send request to packet switched network so that the MT text message may be delivered to its intended recipient which is UE . It is presumed that packet switched network uses SIP to transport text messages. Thus the appropriate node in packet switched network may attempt delivery of the MT text message to UE without conversion to another protocol.

A similar process as above is used for delivering a text message from UE to web application . Assume that an end user of UE creates a text message intended for web application . This is referred to as a Mobile Originated MO or Application Terminated AT text message. When this occurs a text message application in UE generates a SIP send request for sending the MO text message such as a SIP MESSAGE. UE then transmits the SIP send request to conversion system .

When MT and MO text messages are sent as described in the above embodiments there may be additional communications exchanged to indicate whether the text messages are successfully delivered. These communications may be referred to as notifications acknowledgements status messages etc. Conversion system is able to translate these additional communications in a similar manner as described above. illustrate conversion of communications that carry status information for text message delivery. There may be additional communications sent to exchange the status information between web application and packet switched network than those described in . More detailed message diagrams are provided in .

When packet switched network receives a SIP send request for a MT text message see step of packet switched network attempts to deliver the MT text message to UE . If delivery of the MT text message is successful or fails packet switched network generates a SIP status message that includes status information for the delivery of the MT text message. The SIP status message may comprise another SIP MESSAGE a SIP NOTIFY or a SIP response such as a SIP 7xx message. Packet switched network then transmits the SIP status message to conversion system .

For a MO text message delivery see step of web application is able to generate status information for delivery of the MO text message. If delivery of the MO text message is successful or fails web application generates a status command that includes the status information. The status command may comprise a NotifySmsDeliveryReceipt command that encapsulates the status information. Web application then transmits the status command to conversion system .

Conversion system as described above allows for web based text messaging to be implemented in evolving packet switched networks that use SIP. For example conversion system may be used to implement web based text messaging in IMS networks and LTE networks. This can advantageously increase revenues for IMS and LTE service providers.

In response to the SendSms command conversion system converts the SendSms command to a SIP MESSAGE that encapsulates the SMS message. More particularly the SMS message is embedded in the RP DATA e.g. RP User Data field of the SIP MESSAGE. In order to translate the Parlay X command to a SIP request conversion system may use mapping tables. Table 1 illustrates one mapping table that relates Parlay X commands or methods to SIP Methods.

When the RP User Data field includes an SMS DELIVER TPDU for MT SMS messages see 3GPP TS 23.040 the RP User Data may have the parameters illustrated in Table 3.

The SIP MESSAGE sent to UE includes an embedded delivery status request in TP SRI see Table 3 . Because the SIP MESSAGE was successfully received UE sends a SIP MESSAGE to conversion system that includes the status information for the original SIP MESSAGE that carried the SMS message see arrows . More particularly the status information is embedded in the RP ACK of the SIP MESSAGE. Conversion system replies back to UE with a SIP 200 OK see arrows .

In response to the SIP MESSAGE that includes the status information for the SIP MESSAGE conversion system converts the SIP MESSAGE into a Parlay X NotifySmsReception command that encapsulates the status information. Conversion system then transmits the NotifySmsReception command to web application see arrow . Web application replies back to conversion system with a NotifySmsReception return see arrow .

In addition to providing status information for the SIP MESSAGE UE is able to determine whether the MT SMS message itself was successfully delivered. Even though a SIP MESSAGE that encapsulates the MT SMS message was successfully received in UE the MT SMS message itself may be corrupted in some manner so that it cannot be processed and displayed to an end user. Therefore UE is able to determine whether the MT SMS message was processed and provided to the end user and to generate status information for delivery of the MT SMS message.

UE transmits another SIP MESSAGE to conversion system that includes the status information for the SMS message see arrows . The status information is embedded in the RP DATA Status of the SIP MESSAGE. Conversion system replies back to UE with a SIP 200 OK see arrows .

In response to the SIP MESSAGE that includes the status information for the SMS message conversion system converts the SIP MESSAGE into a Parlay X NotifySmsDeliveryReceipt command that encapsulates the status information. Conversion system then transmits the NotifySmsDeliveryReceipt command to web application see arrow . Web application replies to conversion system with a NotifySmsDeliveryReceipt return see arrow . There may be additional messaging that is used to deliver the MT SMS message and its associated status information as gives an overview of the messaging used in the SMS delivery.

UE determines the delivery status of the SIP MESSAGE that encapsulated the MT SMS message and generates status information for the SIP MESSAGE. Because the SIP MESSAGE was successfully received UE sends a SIP MESSAGE to conversion system that includes the status information for the SIP MESSAGE embedded in the RP ACK of the SIP MESSAGE see arrows . Conversion system replies back to UE with a SIP 200 OK see arrows . Conversion system then converts the SIP MESSAGE into a Parlay X NotifySmsReception command that encapsulates the status information for the SIP MESSAGE. Conversion system transmits the NotifySmsReception command to web application see arrow . Web application replies to conversion system with a NotifySmsReception return see arrow . Web application may then process the status information for the original SIP MESSAGE as desired.

UE also determines whether the MT SMS message was successfully delivered and generates status information for the MT SMS message. UE sends a SIP NOTIFY to conversion system that includes the status information for the MT SMS message see arrows . Conversion system replies back to UE with a SIP 200 OK see arrows .

In response to the SIP NOTIFY that includes the status information for the MT SMS message conversion system converts the SIP NOTIFY into a Parlay X NotifySmsDeliveryReceipt command that encapsulates the status information. Conversion system then transmits the NotifySmsDeliveryReceipt command to web application see arrow . Web application replies to conversion system with a NotifySmsDeliveryReceipt return see arrow . There may be additional messaging that is used to deliver the MT SMS message and its associated status information as gives an overview of the messaging used in the SMS delivery.

Conversion system converts the SIP MESSAGE to a Parlay X NotifySmsReception command that encapsulates the MO SMS message. The NotifySmsReception command is a function call operation or command in Parlay X for receiving an MO SMS message in web application when the user is online. Conversion system then transmits the NotifySmsReception command to web application see arrow . Web application responds back to conversion system with a NotifySmsReception return see arrow .

In order to translate the SIP MESSAGE into a Parlay X command conversion system may use the mappings described in Tables 1 2. When the RP User Data field includes an SMS SUBMIT TPDU for MO SMS messages see 3GPP TS 23.040 the RP User Data may have the parameters illustrated in Table 4.

The original SIP MESSAGE from UE included an embedded delivery status request in TP SRR see Table 4 . Therefore conversion system sends a GetSmsDeliveryStatus command to web application to request status information on the delivery of the MO SMS message see arrow . Web application responds back to conversion system with a GetSmsDeliveryStatus return that includes the status information see arrow .

As in the other examples the delivery status request from UE is for the SIP MESSAGE and the MO SMS message. Conversion system is able to provide the status information for the SIP MESSAGE that encapsulated the MO SMS message. Because the SIP MESSAGE was successfully received based on the GetSmsDeliveryStatus return conversion system converts the GetSmsDeliveryStatus return to a SIP MESSAGE that includes the status information for the SIP MESSAGE embedded in the RP ACK of the SIP MESSAGE . Conversion system then sends the SIP MESSAGE with the status information to UE see arrows . UE replies back to conversion system with a SIP 200 OK see arrows .

Additionally web application determines whether the MO SMS message was successfully delivered to the user and generates status information for the MO SMS message. Web application then sends a Parlay X NotifySmsDeliveryReceipt command to conversion system that encapsulates the status information see arrow . Conversion system replies to web application with a NotifySmsDeliveryReceipt return see arrow .

Conversion system converts the NotifySmsDeliveryReceipt command to a SIP MESSAGE that includes the status information for the MO SMS message embedded in the RP DATA Status of the SIP MESSAGE . Conversion system then sends the SIP MESSAGE to UE see arrows . UE replies back to conversion system with a SIP 200 OK see arrows . IMS network and or UE may then process the status information as desired. There may be additional messaging that is used to deliver the MO SMS message and its associated status information as gives an overview of the messaging used in the SMS delivery.

Any of the various elements shown in the figures or described herein may be implemented as hardware software firmware or some combination of these. For example an element may be implemented as dedicated hardware. Dedicated hardware elements may be referred to as processors controllers or some similar terminology. When provided by a processor the functions may be provided by a single dedicated processor by a single shared processor or by a plurality of individual processors some of which may be shared. Moreover explicit use of the term processor or controller should not be construed to refer exclusively to hardware capable of executing software and may implicitly include without limitation digital signal processor DSP hardware a network processor application specific integrated circuit ASIC or other circuitry field programmable gate array FPGA read only memory ROM for storing software random access memory RAM non volatile storage logic or some other physical hardware component or module.

Also an element may be implemented as instructions executable by a processor or a computer to perform the functions of the element. Some examples of instructions are software program code and firmware. The instructions are operational when executed by the processor to direct the processor to perform the functions of the element. The instructions may be stored on storage devices that are readable by the processor. Some examples of the storage devices are digital or solid state memories magnetic storage media such as a magnetic disks and magnetic tapes hard drives or optically readable digital data storage media.

Although specific embodiments were described herein the scope of the invention is not limited to those specific embodiments. The scope of the invention is defined by the following claims and any equivalents thereof.

