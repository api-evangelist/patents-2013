---

title: Maximizing perceptual quality and naturalness of captured images
abstract: A method, system and computer program product for improving the perceptual quality and naturalness of an image captured by an image acquisition device (e.g., digital camera). Statistical features of a scene being imaged by the image acquisition device are derived from models of natural images. These statistical features are measured and mapped onto the control parameters (e.g., exposure, ISO) of the digital acquisition device. By mapping these statistical features onto the control parameters, the perceptual quality and naturalness of the scene being imaged may be based on the values of these control parameters. As a result, these control parameters are modified to maximize the perceptual quality and naturalness of the scene being imaged. After modification of these control parameters, the image is captured by the image acquisition device. In this manner, the perceptual quality and naturalness of the image captured by the image acquisition device is improved.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09277148&OS=09277148&RS=09277148
owner: Board of Regents, The University of Texas System
number: 09277148
owner_city: Austin
owner_country: US
publication_date: 20130603
---
This application claims priority to U.S. Provisional Patent Application Ser. No. 61 656 075 Maximizing Perceptual Quality and Naturalness of Captured Images filed on Jun. 6 2012 which is incorporated by reference herein in its entirety.

The U.S. Government has certain rights in this invention pursuant to the terms of National Science Foundation Grant No. 1116656.

The present invention relates generally to image acquisition devices and more particularly to improving the perceptual quality and naturalness of the images captured by an image acquisition device e.g. digital camera 

Currently image acquisition devices such as digital cameras may require manual tuning of at least some of the camera control parameters e.g. exposure total amount of light allowed to fall on the image sensor gain contrast and ISO International Standards Organization measure of the sensitivity of the image sensor that control the capturing of images and the perceptual quality or naturalness of these captured images. The naturalness of an image refers to how the image is viewed when captured with little or minimal distortion. As a result image acquisition devices seek to capture an image that is most similar to the image being viewed by the user in the physical world and or an image that has the highest perceptual visual quality.

Unfortunately image acquisition devices such as digital cameras are limited in their ability to maximize the perceptual quality or naturalness of the captured images due to the fact that the camera parameters that are used to control the perceptual quality or naturalness of the captured image may require manual tuning by the users. Furthermore digital cameras are limited in their ability to maximize the perceptual quality or naturalness of the captured images due to the limited number of parameters that are currently used to control image capture as well as the fact that almost all of these parameters have to be optimized manually based on a tuning engineer s perception of quality.

In one embodiment of the present invention a method for improving a perceptual quality and naturalness of an image captured by an image acquisition device comprises detecting a scene being imaged. The method further comprises deriving statistical features of the scene being imaged from a model of natural images. Furthermore the method comprises measuring the statistical features from the scene being imaged. Additionally the method comprises mapping the statistical features onto one or more control parameters of the image acquisition device. In addition the method comprises modifying by a processor the one or more control parameters of the image acquisition device to maximize the perceptual quality and naturalness of the scene being imaged.

Other forms of the embodiment of the method described above are in a system and in a computer program product.

The foregoing has outlined rather generally the features and technical advantages of one or more embodiments of the present invention in order that the detailed description of the present invention that follows may be better understood. Additional features and advantages of the present invention will be described hereinafter which may form the subject of the claims of the present invention.

The present invention comprises a method system and computer program product for improving the perceptual quality and naturalness of an image captured by an image acquisition device e.g. digital camera . In one embodiment of the present invention statistical features of a scene being imaged by the image acquisition device are derived from models of natural images. These statistical features are measured and mapped onto the control parameters e.g. exposure gain ISO of the digital acquisition device. By mapping these statistical features onto the control parameters of the image acquisition device the perceptual quality and naturalness of the scene being imaged may be based on the values of these control parameters. As a result these control parameters are modified to maximize the perceptual quality and naturalness of the scene being imaged. After modification of these control parameters the image is captured by the image acquisition device. In this manner the perceptual quality and naturalness of the image captured by the image acquisition device is improved.

While the following discusses the present invention in connection with digital cameras the principles of the present invention may be applied to any type of image acquisition device such as a radiographic system a lung x ray system a digital camera on a mobile device a mammogram medical imaging modalities using ultrasound magnetic resonance imaging positron emission tomography an imaging system coupled with a digital camera such as a light microscope etc. Embodiments covering such permutations would fall within the scope of the present invention.

Furthermore while the following discusses the present invention in connection with automated camera control the principles of the present invention may be applied to image repair of damaged images. Embodiments covering such permutations would fall within the scope of the present invention.

In the following description numerous specific details are set forth to provide a thorough understanding of the present invention. However it will be apparent to those skilled in the art that the present invention may be practiced without such specific details. In other instances well known circuits have been shown in block diagram form in order not to obscure the present invention in unnecessary detail. For the most part details considering timing considerations and the like have been omitted inasmuch as such details are not necessary to obtain a complete understanding of the present invention and are within the skills of persons of ordinary skill in the relevant art.

Referring now to the Figures in detail illustrates a digital camera for practicing the principles of the present invention in accordance with an embodiment of the present invention. Digital camera may generally include any number of features commonly found on such current art devices including those incorporated into phones and other hand held devices. Among such features is an image collection system e.g. a lens electronic sensor for converting physical image data into electronic image data i.e. an image . Also included is a user interface which generally comprises an electronic view finder that provides a live preview for displaying real time electronic image data. Electronic view finder allows a user to view and frame a picture prior to actually taking the picture. User interface may also include other features such as touch screen capabilities a picture capture button informational displays manual buttons and controls zooming features autofocus menu selections etc. In general operation of digital camera involves user pointing the digital camera lens at some physical image data which then appears as a live preview on electronic view finder . When the image is framed in an acceptable manner user snaps the picture by depressing a picture capture button which stores an electronic image of the picture in a photo memory .

Digital camera may further include a buffer used to store the image that is displayed to user on electronic view finder prior to the image being captured by digital camera . That is while the image is being framed by user such an image may be stored in buffer prior to the image being captured. While the image is buffered in buffer control parameters of digital camera e.g. exposure gain ISO white balance color saturation contrast sharpness etc. may be modified to maximize the perceptual quality and naturalness of the image being framed using the principles of the present invention as discussed further below. Once the camera parameters have been modified to maximize the perceptual quality and naturalness of the image being framed the image may then be captured and stored in photo memory .

In one embodiment digital camera includes a computer system for maximizing the perceptual quality and naturalness of the image captured by digital camera . Such a computing device generally includes a processor an input output I O a memory and a bus . Processor may comprise a single processing unit or be distributed across one or more processing units. Memory may comprise any known type of data storage including magnetic media optical media random access memory RAM read only memory ROM a data cache a data object etc. Moreover memory may reside at a single physical location comprising one or more types of data storage or be distributed across a plurality of physical systems in various forms.

I O may comprise any system for exchanging information to from an external resource. External devices resources may comprise any known type of external device including a monitor display speakers storage another computer system a hand held device keyboard voice recognition system speech output system etc. Bus provides a communication link between each of the components in the computing device and likewise may comprise any known type of transmission link including electrical optical wireless etc. Although not shown additional components such as cache memory communication systems system software etc. may be incorporated.

As will be appreciated by one skilled in the art aspects of the present invention may be embodied as a system method or computer program product. Accordingly aspects of the present invention may take the form of an entirely hardware embodiment an entirely software embodiment including firmware resident software micro code etc. or an embodiment combining software and hardware aspects that may all generally be referred to herein as a circuit module or system. Furthermore aspects of the present invention may take the form of a computer program product embodied in one or more computer readable medium s having computer readable program code embodied thereon.

Any combination of one or more computer readable medium s may be utilized. The computer readable medium may be a computer readable signal medium or a computer readable storage medium. A computer readable storage medium may be for example but not limited to an electronic magnetic optical electromagnetic infrared or semiconductor system apparatus or device or any suitable combination of the foregoing. More specific examples a non exhaustive list of the computer readable storage medium would include the following an electrical connection having one or more wires a portable computer diskette a hard disk a random access memory RAM a read only memory ROM an erasable programmable read only memory EPROM or flash memory a portable compact disc read only memory CD ROM an optical storage device a magnetic storage device or any suitable combination of the foregoing. In the context of this document a computer readable storage medium may be any tangible medium that can contain or store a program for use by or in connection with an instruction execution system apparatus or device.

A computer readable signal medium may include a propagated data signal with computer readable program code embodied therein for example in baseband or as part of a carrier wave. Such a propagated signal may take any of a variety of forms including but not limited to electro magnetic optical or any suitable combination thereof. A computer readable signal medium may be any computer readable medium that is not a computer readable storage medium and that can communicate propagate or transport a program for use by or in connection with an instruction execution system apparatus or device.

Program code embodied on a computer readable medium may be transmitted using any appropriate medium including but not limited to wireless wireline optical fiber cable RF etc. or any suitable combination of the foregoing.

Computer program code for carrying out operations for aspects of the present invention may be written in any combination of one or more programming languages including an object oriented programming language such as Java Smalltalk C or the like and conventional procedural programming languages such as the C programming language or similar programming languages. The program code may execute entirely on the user s computer partly on the user s computer as a stand alone software package partly on the user s computer and partly on a remote computer or entirely on the remote computer or server. In the latter scenario the remote computer may be connected to the user s computer through any type of network including a local area network LAN or a wide area network WAN or the connection may be made to an external computer for example through the Internet using an Internet Service Provider .

Aspects of the present invention are described below with reference to flowchart illustrations and or block diagrams of methods apparatus systems and computer program products according to embodiments of the present invention. It will be understood that each block of the flowchart illustrations and or block diagrams and combinations of blocks in the flowchart illustrations and or block diagrams can be implemented by computer program instructions. These computer program instructions may be provided to a processor of a general purpose computer special purpose computer or other programmable data processing apparatus to produce a machine such that the instructions which execute via the processor of the computer or other programmable data processing apparatus create means for implementing the function acts specified in the flowchart and or block diagram block or blocks.

These computer program instructions may also be stored in a computer readable medium that can direct a computer other programmable data processing apparatus or other devices to function in a particular manner such that the instructions stored in the computer readable medium produce an article of manufacture including instructions which implement the function act specified in the flowchart and or block diagram block or blocks.

The computer program instructions may also be loaded onto a computer other programmable data processing apparatus or other devices to cause a series of operational steps to be performed on the computer other programmable apparatus or other devices to produce a computer implemented process such that the instructions which execute on the computer or other programmable apparatus provide processes for implementing the function acts specified in the flowchart and or block diagram block or blocks.

As stated in the Background section currently image acquisition devices such as digital cameras may require manual tuning of almost all of the camera control parameters e.g. exposure total amount of light allowed to fall on the image sensor gain modulate the response of the image sensor ISO International Standards Organization measure the sensitivity of the image sensor sharpness measure the local edge strength color saturation measure of colorfulness contrast measure of how washed out an image is white balance model of ambient light on scene being imaged and focus measure of lens position which controls sharpness of the image that control the capturing of images and the perceptual quality or naturalness of these captured images. The naturalness of an image refers to how the image is viewed when captured with little or minimal distortion. As a result image acquisition devices seek to capture an image that is most similar to the image being viewed by the user in the physical world and or an image that has the highest perceptual visual quality. Unfortunately image acquisition devices such as digital cameras are limited in their ability to maximize the perceptual quality or naturalness of the captured images due to the fact that the camera parameters that are used to control the perceptual quality or naturalness of the captured image may require manual tuning by the users. Furthermore digital cameras are limited in their ability to maximize the perceptual quality or naturalness of the captured images due to the limited number of parameters that are currently used to control image capture as well as the fact that almost all of these parameters have to be optimized manually based on a tuning engineer s perception of quality.

The principles of the present invention provide a means for maximizing the perceptual quality and naturalness of the images captured by the image acquisition device e.g. digital camera as discussed further below in connection with . is a flowchart of a method for maximizing the perceptual quality and naturalness of the images captured by the image acquisition device. illustrates the various paired products computed in order to quantify neighboring statistical relationships. is a flowchart of the sub steps for modifying camera control parameters to maximize the perceptual quality and naturalness of the framed image.

Referring now to is a flowchart of a method for maximizing the perceptual quality and naturalness of the images captured by the image acquisition device such as digital camera in accordance with an embodiment of the present invention. While the following discusses method in connection with maximizing the perceptual quality and naturalness of the images captured by camera the principles of the present invention may apply to any image acquisition device such as a radiographic system a lung x ray system a mammogram medical imaging modalities using ultrasound magnetic resonance imaging positron emission tomography an imaging system coupled with a digital camera such as a light microscope etc.

Referring to in conjunction with in step digital camera detects a scene being imaged in electronic view finder . In one embodiment such an image is said to be framed and stored in buffer . While the framed image is stored in buffer the image may be analyzed for distortions based on natural statistical image models whose distortions are repaired or corrected by modifying the camera parameters e.g. exposure gain ISO so as to maximize the perceptual quality and naturalness of the image that will be captured by digital camera as discussed further below.

In step digital camera derives the statistical features of the scene being imaged from models of natural images i.e. from natural statistical image models . In one embodiment a no reference image quality assessment is performed in the spatial domain as discussed further below. While the following discusses the model being expressed in the spatial domain it may be expressed in other transform domains such as the wavelet domain or the discrete cosine transform domain. Prior to discussing the no reference image quality assessment process a brief discussion of the basis of such an approach is deemed appropriate.

The approach to no reference image quality assessment is based on the principle that natural images possess certain regular statistical properties that are measurably modified by the presence of distortions. Deviations from the regularity of natural statistics when quantified appropriately enable algorithms capable of assessing the perceptual quality of an image without the need for any reference image. By quantifying natural image statistics and refraining from an explicit characterization of distortions the no reference image quality assessment approach is not limited by the type of distortions that afflict the image.

The no reference image quality assessment approach uses the Blind Referenceless Image Spatial QUality Evaluator BRISQUE which utilizes a natural scene statistic model based framework of locally normalized luminance coefficients and quantifies naturalness using the parameters of the model. BRISQUE introduces a model of the statistics of pair wise products of neighboring locally normalized luminance values. The parameters of this model further quantify the naturalness of the image. Characterizing locally normalized luminance coefficients in this way is sufficient not only to quantify naturalness but also to quantify quality in the presence of distortion.

The details of the statistical model of locally normalized luminance coefficients in the spatial domain as well as the model for pairwise products of these coefficients will be discussed further below. Furthermore the statistical features that are extracted from the model are discussed further below.

The spatial approach to no reference image quality assessment can be summarized as follows. Given a possibly distorted image first compute locally normalized luminances via local mean subtraction and divisive normalization. It has been observed that applying a local non linear operation to log contrast luminances to remove local mean displacements from zero log contrast and to normalize the local variance of the log contrast has a decorrelating effect. Such an operation may be applied to a given intensity image I i j to produce 

It has been observed that these normalized luminance values EQ 1 of natural images strongly tend towards a unit normal Gaussian probabilistic characteristic. Such an operation can be used to model the decorrelation and contrast gain masking processes in early human vision. The pre processing model EQ 1 is utilized in the quality assessment model development and refer to the transformed luminances I i j as Mean Subtracted Contrast Normalized MSCN coefficients. A histogram of MSCN coefficients for a natural undistorted image appears Gaussian like where the Gaussian like appearance becomes modified for various distorted versions of the image. For example blur creates a more Laplacian appearance while white noise distortion appears to reduce the weight of the tail of the histogram. Furthermore there is high correlation between surrounding pixels because images functions are piecewise smooth followed by edge discontinuities. However normalization procedures greatly reduce dependencies between neighboring coefficients.

It is hypothesized that the MSCN coefficients have characteristic statistical properties that are changed by the presence of distortion and that quantifying these changes i.e. measuring statistical features from the scene being imaged will make it possible to predict the type of distortion affecting an image as well as its perceptual quality.

The statistical relationships between neighboring pixels are also modeled. While MSCN coefficients are definitely more homogenous for pristine images the signs of adjacent coefficients also exhibit a regular structure. This structure gets disturbed in the presence of distortion. This structure is modeled using distribution of pairwise products of neighboring MSCN coefficients along four orientations horizontal H vertical V main diagonal D1 and secondary diagonal D2 as illustrated in . illustrates the various paired products computed in order to quantify neighboring statistical relationships in accordance with an embodiment of the present invention. Referring to pairwise products are computed along four orientations horizontal vertical main diagonal and secondary diagonal at a distance of 1 pixel with respect to the central pixel . Specifically 1 EQ 4 1 EQ 5 1 11 EQ 6 2 11 EQ 7 for i 1 2 . . . M and j 1 2 . . . N.

Under the Gaussian coefficient model and assuming the MSCN coefficients are zero mean and unit variance these products resemble the following distribution in the absence of distortion 

To be clear the pairwise products of neighboring MSCN coefficients do not have a Gaussian distribution. These have a symmetric distribution that resemble the ideal equation EQ 8 if not distorted but are typically asymmetric and do not resemble equation EQ 8 if distorted. The Asymmetric Generalized Gaussian Distribution AGGD is used to test these conditions as an approximation to both the symmetric case equation EQ 8 for undistorted and to the distorted case of asymmetry.

In another embodiment the statistical features of the scene being imaged from models of natural images are derived by identifying distortion categories for the image where the quality of the image is determined based on these distortion categories using BRISQUE. The quality of the image may also be determined based on these distortion categories as discussed in U.S. Patent Application Publication No. 2011 0274361 which is hereby incorporated herein in its entirety.

Referring to in conjunction with in step digital camera measures the statistical features from the scene being imaged. For example in step digital camera uses scene statistics of locally normalized luminance coefficients to quantify possible losses of naturalness in the image due to the presence of distortions as discussed above in connection with the BRISQUE approach.

In step digital camera maps the statistical features onto the control parameters e.g. exposure gain ISO of digital camera . For example by mapping the statistical features onto the control parameters of digital camera the variation of the perceptual quality and naturalness of the framed image based on the values of the particular control parameter e.g. ISO in question may be expressed such as in a generalized Gaussian function. In this manner the appropriate value for that control parameter may be selected that maximizes the perceptual quality and naturalness of the framed image. That is the variations in the control parameters are observed to change the perceptual quality and naturalness of the scene being imaged where the variations are measured against a statistical natural scene model. As a result a value for a control parameter may be modified to correspond to a best fit of the statistical features of the image to the statistical natural scene model which corresponds to a maximum perceptual quality and naturalness of the scene being imaged.

In step digital camera modifies the camera control parameters to maximize the perceptual quality and naturalness of the framed image. For example as discussed above the variation of the perceptual quality and naturalness of the framed image based on the values of the particular control parameter e.g. ISO in question may be expressed as a Gaussian function. As a result the value of the control parameter that corresponds to the peak of the curve of the Gaussian function may be selected as it corresponds to the maximum perceptual quality and naturalness of the framed image for that particular control parameter.

A detailed description of the sub steps of step for modifying the camera control parameters to maximize the perceptual quality and naturalness of the image are discussed below in connection with .

Referring to in conjunction with in step digital camera assesses the perceptual quality naturalness of the framed image referring to the image that is currently being stored in buffer such as using the BRISQUE approach as discussed above.

In step a determination is made by digital camera as to whether the perceptual quality naturalness of the framed image is below a threshold. If the perceptual quality naturalness of the framed image is not below a threshold then in step digital camera does not provide any modification to the framed image.

If however the quality naturalness of the framed image is below a threshold then in step digital camera identifies the most significant distortion present in the framed image e.g. significant blur at the bottom right hand of the framed image being displayed on electronic view finder .

In step digital camera modifies the relevant control parameter s accordingly that caused the distortion identified in step . For example the control parameters of ISO and exposure may have caused a loss of quality such as poor contrast or poor color reproduction of the framed image and therefore will be adjusted so that the values of these control parameters correspond to the maximum perceptual quality and naturalness of the framed image using a Gaussian function as discussed above in connection with step . In this manner by modifying the camera control parameters to maximize the perceptual quality and naturalness of the framed image the perceptual quality and naturalness of the image to be captured by digital camera will be improved.

In step a determination is made by digital camera as to whether a stopping criterion is triggered. For example digital camera may perform the sub steps of step for a limited number of iterations i.e. a threshold number of iterations where the threshold may be based on the level of acceptable quality where the quality may be computed using an algorithm such as BRISQUE . After reaching the threshold number of iterations it may be deemed that the image is too distorted to be corrected.

If however the stopping criterion has not been triggered then digital camera reassesses the perceptual quality naturalness of the framed image in step after modification of the camera control parameter s .

Returning to in conjunction with in step digital camera captures the framed image after the camera control parameter s have been modified if necessary and the perceptual quality naturalness of the framed image exceeds a threshold level of quality naturalness. The captured image is then stored in photo memory .

In some implementations method may include other and or additional steps that for clarity are not depicted. Further in some implementations method may be executed in a different order presented and that the order presented in the discussion of is illustrative. Additionally in some implementations certain steps in method may be executed in a substantially simultaneous manner or may be omitted.

The descriptions of the various embodiments of the present invention have been presented for purposes of illustration but are not intended to be exhaustive or limited to the embodiments disclosed. Many modifications and variations will be apparent to those of ordinary skill in the art without departing from the scope and spirit of the described embodiments. The terminology used herein was chosen to best explain the principles of the embodiments the practical application or technical improvement over technologies found in the marketplace or to enable others of ordinary skill in the art to understand the embodiments disclosed herein.

