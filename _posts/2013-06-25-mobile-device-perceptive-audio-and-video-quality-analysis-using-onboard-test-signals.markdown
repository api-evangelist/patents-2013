---

title: Mobile device perceptive audio and video quality analysis using onboard test signals
abstract: Techniques described herein may use perceptual quality measurement techniques to test and/or evaluate communication sessions between mobile devices. A method may include receiving, by a mobile device and as part of an audio or video call with a second mobile device, a streamed version of a reference audio or video file; and reading a version of the reference audio or video file that was previously stored locally to the mobile device. The method may further include calculating, based on a comparison of the streamed version of the reference audio or video file to the version of the reference audio video file that was stored locally, a perceptual quality score for the streamed version of the reference audio or video file.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09491219&OS=09491219&RS=09491219
owner: Cellco Partnership
number: 09491219
owner_city: Basking Ridge
owner_country: US
publication_date: 20130625
---
The quality of audio and video data may be measured in a number of ways. One technique for measuring the quality of audio and video is based on the goal of predicting the perceptual quality of the audio and or video signal as if the audio and or video signal is being evaluated perceived by a human. Ideally the predictions of these objective measures should come as close as possible to subjective quality scores that are obtained in subjective listening tests.

Perceptual Objective Listening Quality Assessment POLQA is one technique to perceptually predict quality of speech. Similarly Perceptual Evaluation of Video Quality PEVQ is another technique to perceptually predict quality of video. The POLQA and PEVQ techniques in general may compare an original version of a reference signal e.g. an audio or video signal and a received version i.e. potentially noisy or corrupted version of the reference signal. Based on the comparison the POLQA and PEVQ techniques may determine a quality score for the received version of the signal. For example the POLQA and PEVQ techniques may determine a Mean Opinion Score MOS for the received signal which may range in value from one poor quality to five excellent quality .

Perceptual quality measurement techniques such as POLQA and PEVQ may be useful when evaluating tuning and or provisioning a communication network such as a wireless network. It is desirable to use perceptual quality measurement techniques in a manner that is as efficient and cost effective as possible.

The following detailed description refers to the accompanying drawings. The same reference numbers in different drawings may identify the same or similar elements.

Techniques described herein may use perceptual quality measurement techniques such as POLQA and PEVQ to test and or evaluate a communication network. The network may include a wireless network such as a cellular wireless network. Mobile devices such as mobile phones in the communication network may internally store audio and video reference files. Additionally the mobile devices may include application programming interfaces APIs through which an onboard diagnostic monitor OBDM application may control the transmission of the audio and video reference files in place of standard audio e.g. audio received through a speaker of the mobile device or video e.g. video received through a camera of the mobile device . Perceptual quality measurement techniques may be applied based on transmitting receiving and comparing the reference files to received versions of the reference files without additional equipment that may otherwise be required e.g. such as an external device or dedicated device that is used to inject the audio and video reference files into the network .

Mobile device and mobile device may each include a reference audio video file . The reference audio video file may be identical at each mobile device and . Mobile device may transmit reference audio video file over network . The received version of the reference audio video file file as received by mobile device may also be stored. Transmission of audio and video through network may be noisy and the amount of noise may depend on a number of factors such as network congestion the encoding decoding schemes used to transmit the audio and video and the quality of the radio links between the mobile devices and network . Accordingly the received version of reference audio video file may not be identical to reference audio video file .

Mobile device may compare received version of reference audio video file to reference audio video file using a perceptual quality comparison technique to generate a quality score such as a MOS. The quality score may be provided to network analysis server which may perform analysis and or aggregation functions relating to quality scores for network . In some implementations mobile device instead of generating a quality score may transmit using a lossless file transmission technique e.g. non streaming via ftp file transfer the received version of reference audio video file to a network element such as network analysis server which may then generate the quality score.

As shown in environment may include one or more mobile devices and base stations . In an LTE environment base stations may take the form of evolved node Bs eNodeBs and mobile devices may be referred to as user equipment UE . Environment may further include serving gateway SGW mobile management entity MME packet data network gateway PGW policy charging and rules function PCRF a packet data network PDN and a network analysis server . The IMS portion of environment may include call session control function CSCF and application App server .

Mobile devices may include any computation and communication device such as a wireless mobile communication device that is capable of communicating with base stations over a radio i.e. wireless interface. For example a mobile device may include a radiotelephone a personal communications system PCS terminal e.g. a device that combines a cellular radiotelephone with data processing and data communications capabilities a personal digital assistant PDA e.g. that can include a radiotelephone a pager Internet intranet access etc. a smart phone a laptop computer a tablet computer a camera a personal gaming system or another type of mobile computation and communication device.

Base stations may include one or more network devices that receive process and or transmit traffic such as calls audio video text and or other data destined for and or received from mobile device . Base stations and mobile devices may communicate over radio interfaces to form a radio access network RAN for environment . Base stations may receive traffic from and or send traffic to PDN via SGW and PGW .

Base stations may be physically located to provide cellular coverage to mobile devices such that a mobile device may seamlessly move out of range of one base station and into range of another base station . Each base station may simultaneously provide radio connectivity to multiple mobile devices .

SGW may include one or more computation and communication devices that route and forward user data packets. SGW may route and forward user packets and also act as a mobility anchor during inter base station handoffs.

MME may include one or more computation and communication devices that perform signaling in environment . MME may for example be responsible for authenticating mobile devices maintaining location information for mobile devices and selecting a PGW to service a particular mobile device . MME may also operate to establish bearer channels associated with a session with mobile device to hand off mobile device from the EPS to another network to hand off mobile device from the other network to the EPS and or to perform other operations. MME may perform policing operations on traffic destined for and or received from mobile device .

PGW may include one or more network devices or other types of computation and communication devices that gather process search store and or provide information in a manner described herein. For instance PGW may aggregate traffic received from one or more SGWs etc. and may send the aggregated traffic to PDN and or to another network. PGW may also or alternatively receive traffic from PDN and or another network and may send the traffic toward mobile device via SGW and or base station . PGW may also act as an interface for the IMS portion of environment .

PCRF may include one or more server devices or other types of devices that aggregate information to and from the EPS network and or other sources. PCRF may receive information regarding policies and or subscriptions from one or more sources such as subscriber databases and or from one or more users such as for example an administrator associated with PCRF .

PDN may include one or more wired and or wireless networks. For example PDN may include an Internet Protocol IP based PDN. PDN may include for example a wide area network such as the Internet or one or more other networks. Mobile device may connect through PGW to data servers application servers or to other servers applications that are coupled to PDN .

Network analysis server may represent one or more computing devices that may perform analysis aggregation and or optimization functions relating to environment . For example network analysis server may receive perceptual quality measurements from one or more user devices . Network analysis server may use the received perceptual quality measurements to perform analysis monitoring and or optimization functions. For example a network administrator may use the perceptual quality measurements to adjust parameters in base station SGW MME and or PGW . In some implementations instead of or in addition to receiving perceptual quality measurements from mobile devices network analysis server may receive a copy of the received version of a reference audio video file and then may calculate the perceptual quality measurements.

CSCF may include one or more computation and communication devices that process session initiation protocol SIP signaling in environment for IMS related services such as VoLTE video services or other services. CSCF may represent functionality associated with a proxy CSCF P CSCF and or a serving CSCF S CSCF . With respect to the functionality of the P CSCF CSCF may act as a SIP proxy that is the first point of contact for an IMS communication and may include a Policy Decision Function PDF which may authorize media plane resources e.g. quality of service QoS over the media plane. With respect to the functionality of the S CSCF CSCF may act as the central node of the signaling plane for IMS services. CSCF may provide routing services and determine to which application servers particular SIP messages will be forwarded.

Application server may include one or more computation and communication devices that provide support for VoLTE and Rich Communication Services RCS related services. In addition to support for VoLTE calls application server may for instance provide support for an instant messaging chat video sharing file transfer and image transfer.

The quantity of devices and or networks illustrated in is provided for explanatory purposes only. In practice there may be additional devices and or networks fewer devices and or networks different devices and or networks or differently arranged devices and or networks than illustrated in . Alternatively or additionally one or more of the devices of environment may perform one or more functions described as being performed by another one or more of the devices of environment . Devices of environment may interconnect via wired connections wireless connections or a combination of wired and wireless connections. Additionally although an LTE based network is particularly illustrated and discussed with reference to in other implementations other network technologies may alternatively be used.

As illustrated application portion may include on board diagnostic monitor OBDM IMS client reference audio video file s and received audio video file s . OBDM may include an application to provide diagnostic and or monitoring services for mobile device . OBDM may for example monitor the operation of one or more other applications and or communication sessions that are provided by mobile device . OBDM may store results of the operation of the one or more other applications and or communication sessions and may potentially transmit the results to network analysis server .

IMS client may include an application that provides the IMS related functionality of mobile device . IMS client may for example perform the client side functionality for the IMS based services that are offered by mobile device . IMS client may for example handle IMS signaling audio calls e.g via VoLTE video calls messaging chat and presence. Consistent with aspects described herein IMS client may include APIs that may be accessible by OBDM and may be used to direct IMS client to use reference audio video file s e.g. in place of a normal audio or video input stream when implementing an audio or video call with another device e.g. another mobile device .

Reference audio video files may include the audio and video files that are to be used to perform perceptual quality measurements. Reference audio video files may be unencoded raw audio video files that will be encoded by speech codec for audio or video codec for video before being transmitted from mobile device . Reference audio video files may be stored locally at mobile device . For example reference audio video files may be downloaded from network analysis server installed during manufacture of mobile device and or installed during a software update to mobile device .

Received audio video files may include audio and or video files that have been received such as from another mobile device as part of perceptual quality measurements. The received audio video files may be stored as a corresponding audio or video stream that is received by device . As previously mentioned the audio or video streams received by device may include noise that is introduced into the stream during the transcoding or transmission of the audio or video stream. Accordingly received audio video files may not be identical to the version of the audio video file that is transmitted by the sending mobile device.

As is further illustrated in baseband portion may include speech codec video codec protocol component radio frequency RF component audio front end and video front end . Speech codec may include logic to implement a speech coding decoding technique. For example speech codec may implement a wideband speech coding using for example the adaptive multi rate wideband AMR WB technique. In other implementations other audio codecs may alternatively or additionally be used.

Video codec may include logic to implement a video coding decoding technique. For example video codec may implement the H.264 MPEG 4 standard. In other implementations other video codecs may alternatively or additionally be used.

Protocol component may implement one or more network protocols relating to the transmission of audio or video data over a network. Protocol component may for example from a transmitting perspective operate to transmit the audio video streams as a series of packets using RF component . In the context of the receiving of an audio video stream protocol component may receive packets from RF component extract a stream of audio video data from the received packets and transmit the stream to speech codec or video codec . Protocol component may implement protocols such as the IP real time transport protocol RTP and user datagram protocol UDP .

Audio front end may include logic to receive audio from or provide audio to the user of mobile device . Audio front end may include for example a speaker a microphone and circuitry to provide an electrical interface with the speaker and or microphone. Video front end may similarly include logic to receive video from or transmit video to the user of mobile device . Video front end may include for example a camera and circuitry to provide an electrical interface with the camera.

Although illustrates example components of mobile device in other implementations mobile device may contain fewer components different components differently arranged components or additional components than those depicted. Alternatively or additionally one or more components of mobile device may perform one or more other tasks described as being performed by one or more other components of mobile device .

Process may include receiving reference audio video files block . For example reference audio video files may be downloaded by mobile device from network analysis server installed during manufacture of mobile device and or installed during a software update to mobile device . In one implementation the reference audio video files may be files that are to be tested using the POLQA or PEVQ perceptual quality testing techniques.

Process may further include receiving an indication to perform an audio video perceptual quality test block . For example a user such as a network administrator or technician may transport mobile device to an area that is to be tested as an endpoint for a perceptual quality test e.g. within a coverage area of a particular base station . Through an interface associated with mobile device such as a graphical interface presented by mobile device the user may indicate that a perceptual quality test is to performed e.g. the user may initiate the perceptual quality test . The user may also enter information e.g. a telephone number identifying the other endpoint e.g. the receiving mobile device that is to be part of the perceptual quality test.

Process may further include placing a call to a destination mobile device block . The call may be placed in response to the indication to perform the audio video perceptual quality tests. The call may be for example a streaming audio or video call.

Process may further include streaming the reference audio video file using software and or hardware associated with the mobile device that would normally be used to transport an audio video stream block . For example for a reference audio file mobile device may read the locally stored reference audio file and transmit the file by encoding the file with speech codec before transmitting the file as an audio stream via RF component . The internal processing by mobile device to transmit the reference audio file may be generally identical to processing performed when transmitting an audio call from a user except that instead of receiving the audio information through audio front end the audio information is read from the reference audio file. Similarly for a reference video file mobile device may read the locally stored reference video file and transmit the file by encoding the video part of the file with video codec and the audio portion with audio codec before transmitting the file as a stream or multiple streams via RF component . The internal processing by mobile device to transmit the reference video file may be generally identical to processing performed when transmitting a video call from a user except that instead of receiving the video information through video front end the video information is read from the reference video file.

In one implementation to stream the reference audio video file using the software hardware that would normally be used to transport audio video stream OBDM may initiate the streaming via calls to multimedia APIs that are implemented by IMS client . The calls may cause IMS client to use one of reference audio video files as a source file instead of a normal audio video stream.

Process may include receiving the reference audio video files. Reference audio video files may be received similarly to the reception of the audio video files in block . For example reference audio video files may be downloaded by mobile device from network analysis server installed during manufacture of mobile device and or installed during a software update to mobile device .

Process may further include receiving a request to initiate a call to perform perceptive audio video quality test block . In one implementation the received call may be a call from another mobile device such as a call initiated pursuant to block and . A user such as a network technician may have indicated such as to OBDM that an audio video quality test is about to be initiated. Alternatively or additionally signaling information associated with the incoming call may indicate that the call is one in which an audio video quality test is to be performed. In this situation the signaling may also indicate the particular reference audio or video file that is to be transmitted as part of the test. In some implementations the receiving mobile device may initiate the call with the mobile device that uploads the audio video reference files.

Process may further include receiving the streaming version of the reference audio video file block . The received signal may be stored block such as by storing the streamed information as received audio video file . The incoming audio video stream may be processed using software and or hardware associated with the mobile device that would normally be used to receive an audio video stream however instead of or in addition to outputting the stream to a speaker and or display the stream may be stored as received audio video file .

Process may further include calculating the quality score based on the reference version of the audio video file and the received version block . The quality score may be a perceptual based quality score such as one calculated using the POLQA or PEVQ techniques. The quality score may generally be calculated using these techniques based on a comparison of the reference version of the audio video file to the received version. The quality score may be output as a numerical value such as a value between one poor quality and five excellent quality .

Process may further include transmitting the quality score to network analysis server block . In some implementations in addition to the quality score other information such as information identifying the endpoints of the call or other information relating to the network over which the call was placed may also be transmitted to network analysis server . As will be discussed more detail below network analysis server may store results relating to a number of perceptual quality tests. The results may be analyzed in order to provision optimize and or otherwise adjust the network over which calls are transmitted.

As illustrated data structure may include a number of fields including endpoint field endpoint field date field and score . Each record in data structure corresponding to one set of fields may represent the result of one perceptual quality test. The fields shown for data structure are examples. In alternative possible implementations different fewer or additional fields may be implemented.

Endpoint field and endpoint field may each include one or more values that identify the respective endpoints of the voice or video call that was tested. In one implementation endpoints fields and may include geographic information representing a location of the devices e.g. the mobile devices that participated in the test. Alternatively or additionally endpoint fields and may include information that identifies network elements involved in the voice or video call that was tested. In yet another possible medication endpoint fields and may include telephone numbers of the mobile devices that participated in the test and or other identification information corresponding to the mobile devices that participated in the test e.g. an International Mobile Station Equipment Identity IMEI value .

Date field may include an indication of the date and or time at which the test was performed. Score field may store the quality score generated as a result of each perceptual quality test. For a perceptual based MOS score for example score field store a value between one poor quality and five excellent quality .

Three example records corresponding to three perceptual quality tests are particularly illustrated in . The first record record may correspond to a perceptual quality test between a mobile device attached to a first base station field labeled as base station A and a second base station field labeled as base station B. The perceptual quality test may have been performed on Jun. 10 2013 at 10 01 am field and resulted in a quality score of POLQA 3 field which may indicate that the perceptual quality test may have been an audio only test and resulted in a POLQA score of 3. Record may similarly indicate a quality test between mobile devices attached to base station A and base station B performed on Jun. 10 2013 at 11 00 am and which resulted in quality scores of POLQA 3 and PEVQ 2 e.g. indicating that the perceptual quality tests may have been an audio test score 3 and a video test score 2 . Record may similarly indicate a quality test between mobile devices attached to base station C and base station D performed on Jun. 15 2013 at 11 00 am and which resulted in the quality score of PEVQ 4 e.g. indicating that the perceptual quality test may have been a video test with a score 4 . Record may similarly indicate a quality test between mobile devices such as two mobile devices identified by the corresponding IMEI values. In record instead of identifying particular base stations or mobile devices for a test a test may be identified by the geographic locations corresponding to the endpoints.

As shown in to initiate a quality test OBDM may make a call to multimedia APIs signal indicating that reference audio video file should be used as the source of media transmission instead of the camera or microphone of the mobile device. As an example the call to multimedia APIs may include an indication of the particular reference files that are to be used for the quality test. If the file is a video file that includes both audio and video the audio and video contents may be separately extracted and encoded by speech codec and video codec respectively.

IMS client may access the reference audio video files signal . IMS client may also disable audio front end e.g. the microphone of mobile device and video front and e.g. the camera of mobile device . The reference audio video files can be used as inputs to speech codec and video codec respectively signal .

During downlink operation e.g. when receiving audio video during a quality test the received audio video files may be recorded on the mobile device signal . OBDM may use the recorded audio video files for comparison with reference audio video files to determine the quality scores.

As described above mobile devices may implement perceptual quality measurement techniques such as POLQA and PEVQ to test and or evaluate a communication network without requiring additional devices to inject reference audio video information through the network. Accordingly the cost and ease with which network tests may be conducted may be increased.

Bus may include one or more communication paths that permit communication among the components of device . Processor may include a processor microprocessor or processing logic that may interpret and execute instructions. Memory may include any type of dynamic storage device that may store information and instructions for execution by processor and or any type of non volatile storage device that may store information for use by processor .

Input component may include a mechanism that permits an operator to input information to device such as a keyboard a keypad a button a switch etc. Output component may include a mechanism that outputs information to the operator such as a display a speaker one or more light emitting diodes LEDs etc.

Communication interface may include any transceiver like mechanism that enables device to communicate with other devices and or systems. For example communication interface may include an Ethernet interface an optical interface a coaxial interface or the like. Communication interface may include a wireless communication device such as an infrared IR receiver a Bluetooth radio or the like. The wireless communication device may be coupled to an external device such as a remote control a wireless keyboard a mobile telephone etc. In some embodiments device may include more than one communication interface . For instance device may include an optical interface and an Ethernet interface.

Device may perform certain operations described above. Device may perform these operations in response to processor executing software instructions stored in a computer readable medium such as memory . A computer readable medium may be defined as a non transitory memory device. A memory device may include space within a single physical memory device or spread across multiple physical memory devices. The software instructions may be read into memory from another computer readable medium or from another device. The software instructions stored in memory may cause processor to perform processes described herein. Alternatively hardwired circuitry may be used in place of or in combination with software instructions to implement processes described herein. Thus implementations described herein are not limited to any specific combination of hardware circuitry and software.

In the preceding specification various preferred embodiments have been described with reference to the accompanying drawings. It will however be evident that various modifications and changes may be made thereto and additional embodiments may be implemented without departing from the broader scope of the invention as set forth in the claims that follow. The specification and drawings are accordingly to be regarded in an illustrative rather than restrictive sense.

For example while a series of blocks has been described with regard to the order of the blocks may be modified in other implementations. Further non dependent blocks may be performed in parallel.

It will be apparent that example aspects as described above may be implemented in many different forms of software firmware and hardware in the implementations illustrated in the figures. The actual software code or specialized control hardware used to implement these aspects should not be construed as limiting. Thus the operation and behavior of the aspects were described without reference to the specific software code it being understood that software and control hardware could be designed to implement the aspects based on the description herein.

Further certain portions of the invention may be implemented as logic that performs one or more functions. This logic may include hardware such as an ASIC or a FPGA or a combination of hardware and software.

Even though particular combinations of features are recited in the claims and or disclosed in the specification these combinations are not intended to limit the invention. In fact many of these features may be combined in ways not specifically recited in the claims and or disclosed in the specification.

No element act or instruction used in the present application should be construed as critical or essential to the invention unless explicitly described as such. Further the phrase based on is intended to mean based at least in part on unless explicitly stated otherwise.

