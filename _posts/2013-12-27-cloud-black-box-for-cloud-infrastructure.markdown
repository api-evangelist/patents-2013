---

title: Cloud black box for cloud infrastructure
abstract: A cloud black box (CBB) subsystem in a cloud computing infrastructure includes CBB storage and computer processing circuitry executing a CBB application having first and second operating modes. In a depository mode information messages are continually received from hardware computing devices during normal operation and device information from the messages is stored into the CBB storage. The information messages are generated by CBB agents executing on the hardware computing devices, which continually collect the device information and generate the information messages according to a common information transfer protocol. In a retrieval mode, device information in the CBB storage is provided to a requestor such as a data analysis application, which may be part of or external to the CBB subsystem. The CBB subsystem operates independently and remains available upon failure of hardware or software components in the cloud infrastructure, providing a centralized source of information for diagnosis or other analysis.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09307015&OS=09307015&RS=09307015
owner: EMC Corporation
number: 09307015
owner_city: Hopkinton
owner_country: US
publication_date: 20131227
---
The present invention is related to the field of monitoring operation and logging information for computing devices such as host computers storage arrays etc. in a cloud infrastructure.

Cloud infrastructure generally refers to a collection of discrete heterogeneous computing devices configured and co operating to provide a computing environment for one or more distributed application programs applications . The cloud infrastructure may be hosted by a service provider company or organization and thus provide a level of abstraction and separation from a user organization responsible for and making business use of the applications. In one arrangement a cloud infrastructure includes host computers hosts storage arrays and network switches all interconnected by communications links.

It has been known to perform operation monitoring and information logging in cloud devices. Typically each different type of device includes or operates with its own associated logging service and each logging service may be tailored for the given device type and thus operate and store information in a device specific manner. Thus the collection of information for the cloud infrastructure is both heterogeneous different parts of the data are formatted and organized differently and is distributed across different devices rather than being centralized.

The use of separate logging services on different cloud device types has certain shortcomings. There may be no centralized location to obtain all information needed to find single issues and root causes in a cloud infrastructure employing heterogeneous computing devices. The separate logging services may also use different formats and or have different levels of information making correlation among different pieces of information difficult or impossible. Additionally if a logging service is part of or otherwise depends on operation of a monitored device e.g. a service running on a host that also executes an application for a service provided by the cloud infrastructure then there is a risk that logged information may not be available when needed failure of the host makes the local logging service inoperable making it impossible to get information that is needed for root cause analysis

To address the above shortcomings of known systems a cloud black box subsystem is disclosed that can be used in a cloud computing infrastructure having a set of network connected hardware computing devices including host computers storage arrays and network switches where the host computers execute one or more applications of a cloud infrastructure user the applications engaging in application data storage accesses with the storage arrays and engaging in application network data transfers via the network switches.

The cloud black box subsystem includes cloud black box storage and computer processing circuitry executing a cloud black box application having first and second operating modes. The first operating mode is a depository mode in which information messages are continually received from the hardware computing devices during normal operation of the cloud computing infrastructure and device information from the information messages is stored into the cloud black box storage. The information messages are generated by respective cloud black box agents executing on the hardware computing devices continually operative to collect the device information during operation of the respective hardware computing devices and to generate the information messages containing the device information according to a common information transfer protocol. The second operating mode is a retrieval mode in which the device information in the cloud black box storage is provided to a data analysis application.

The use of a cloud black box subsystem and common information transfer protocol overcomes the issues of decentralized and disorganized data. The cloud black box subsystem also operates relatively independently of the applications and hardware computing devices so as to be functional in the retrieval mode in the event of the failure or disruption of any of the applications and hardware computing devices.

Associated with the cloud infrastructure is a cloud black box subsystem . In this is shown as part of the cloud infrastructure but in other arrangements it may be more separated from it. The cloud black box subsystem continually collects various device information generated and provided by the hardware computing devices and and stores this device information in cloud black box storage described more below. As shown the devices and send device information to the cloud black box subsystem using device information messages that all use a common protocol or application programming interface API . The device information stored in the cloud black box subsystem is made available to cloud black box users .

As mentioned the hosts execute cloud based applications used by the cloud infrastructure users and these applications engage in application data storage accesses with the storage arrays and engage in application network data transfers via the network switches . The hardware computing devices execute respective cloud black box agents not shown in that continually collect device information generated during operation of the respective hardware computing devices and generate the information messages to send collected device information to the cloud black box subsystem . The cloud black box subsystem preferably operates as independently of the applications and hardware computing devices as possible so as to be functional even in the event of the failure or disruption of any of the applications and hardware computing devices.

The cloud black box subsystem serves a purpose analogous to the black box in aviation when a critical event occurs the cloud black box subsystem can be used to reconstruct what happened leading up the event. Examples of such critical events include 

Generally each type of device or includes native monitoring and or logging functionality that captures information about the structure configuration and operation of the device. A host for example may maintain a registry with a large collection of information about its hardware and software components and may further execute one or more utilities that continually monitor aspects of operation and generate local log entries. As but one example a network activity monitor might generate log entries for all network related events such as the creation use and termination of network sessions logins etc. In another example a process manager might generate log entries for all user and system processes and their pertinent characteristics and activities such as memory usage etc. The arrays and network switches include analogous native monitoring logging functionality . In some cases the native monitoring logging functionality of a given device may provide information to a separate entity such as a management client accessing the device via a management server resident on the device. However these interfaces are generally heterogeneous and device specific. A distributed management application for a host for example does not obtain or process information from an array or switch . Hence the term native the native monitoring logging is typically device type specific.

Each device and also includes a cloud black box CBB agent that serves as a bridge between the native monitoring logging and the cloud black box subsystem . The CBB agent gathers device information in whatever form it is maintained by the native monitoring logging functionality and sends the information to the cloud black box subsystem using a common information delivery protocol. That is within a given device type an agent has a device specific interface to the local monitoring logging functionality but across all device types the agents provide the information to the cloud black box subsystem using a single generic or common information delivery protocol in support of the system wide logging function of the cloud black box subsystem .

In one type of use the two operating modes and may be non concurrent. The cloud black box subsystem operates in the depository mode essentially indefinitely and may only transition into the retrieval mode based on some significant event such as failure of some significant part of the cloud infrastructure. This transition may be automatic or it may be initiated externally such as by an administrative cloud black box user commanding the transition. In other uses the two modes may be partly or wholly concurrent such that the cloud black box subsystem can continue to receive logging messages and store new device information in the cloud black box storage while at the same time providing stored information to cloud black box users .

Additionally the data analysis application that receives information retrieved from the cloud black box storage may be executing on a separate computer or it may be executing in the computer s of the cloud black box subsystem . In the former case the cloud black box subsystem provides a data retrieval API which may be a so called RESTful API of the general type known in the art. In the latter case the data analysis application may provide a graphical or command line user interface to the external cloud black box users .

Returning to the depository mode the cloud black box subsystem whether implemented as physical or virtualized entity is reachable via an API that is accessible by all systems and devices in the cloud . The API enables at a minimum the following functions 

Specification of logging includes log patterns and log API and messages may specify things such as severity level message catalogs as desired high level and detailed log information etc.

This can be anything the entity using the API needs to store. This can include configuration information packages data for further analysis etc.

This API can be realized in one or multiple ways such as a RESTful API or through C or Java language bindings. The API can be supported by a service to get an address a lockbox in the cloud black box subsystem for storing critical information

A protocol is established that sets guidelines on what information the cloud entities should log to the black box service. This includes the following 

The cloud black box subsystem may apply filtering to improve the efficiency of information storage. For example it may look for patterns of what the cloud entities want to log and filter out noisy loggers.

To support a large volume of writes the cloud black box subsystem can be implemented using tiered storage and automatically relocate old cold logs to low performing disks while keeping newer logs and hot actively accessed data on high performing disks such as flash drives to support real time analysis.

While various embodiments of the invention have been particularly shown and described it will be understood by those skilled in the art that various changes in form and details may be made therein without departing from the spirit and scope of the invention as defined by the appended claims.

