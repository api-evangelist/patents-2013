---

title: Power distribution, management, and monitoring systems and methods
abstract: Managing electrical power usage in a power distribution system. Power usage data indicative of electrical current flow through electrical outlets in the system are collected and displayed for a user. The user may select an outlet and issue a command to control current flow through that outlet. Environmental data may also be collected and displayed. Outlets in different Cabinet Power Distribution Units (CDUs) in different locations may be clustered for reporting and control. A database structure provides a “system” table for data descriptive of the system, a “tower” table for data descriptive of outlets and other elements in the system, an “infeed” table for data descriptive of input electrical power, and an “outlet” table for data descriptive of electrical power flowing through the outlets.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09142971&OS=09142971&RS=09142971
owner: Server Technology, Inc.
number: 09142971
owner_city: Reno
owner_country: US
publication_date: 20130723
---
This application is a divisional application of U.S. patent application Ser. No. 12 344 419 filed Dec. 26 2008 entitled Power Distribution Management and Monitoring Systems and Methods which will issue under U.S. Pat. No. 8 494 661. This application claims priority to 1 U.S. Provisional Patent Application No. 61 017 511 filed Dec. 28 2007 entitled Power Distribution Unit with Input and Output Power Monitoring 2 U.S. Provisional Patent Application No. 61 017 495 filed Dec. 28 2007 entitled Power Distribution Unit with Output Current Sensing Capability 3 U.S. Provisional Patent Application No. 61 009 463 filed Dec. 28 2007 entitled Remote Power Manager and 4 U.S. Provisional Patent Application No. 61 207 853 filed Dec. 2 2008 entitled Power Distribution Management and Monitoring Systems. This application is also related to U.S. Pat. No. 5 949 974 U.S. Pat. No. 6 711 613 and U.S. patent application Ser. No. 11 370 489 filed Mar. 7 2006 and published as U.S. Patent Application Publication No. 2007 0016664. These applications and patents are incorporated herein by reference in their entirety.

The present disclosure is directed to power distribution management and monitoring systems and more particularly to systems having capability to monitor and manage power as related to one or more loads that receive power from power distribution unit s including loads that receive power from multiple or different power distribution units.

Power distribution units have long been utilized to supply power to electronic equipment. A conventional power distribution unit PDU is an assembly of multiple electrical outlets also called receptacles that receive electrical power from a source and distribute the electrical power via the outlets to one or more separate electronic equipment units having respective power cords plugged into respective outlets of the PDU. PDUs can also have power cords hard wired to a power source instead of or in addition to outlets. PDUs can be used in any of various applications and settings such as for example in or on electronic equipment racks among other applications. A PDU located in a cabinet may be connected to other PDUs or to other devices such as environmental monitors for example temperature and humidity sensors fuse modules communications modules and the like. Such a PDU and any other PDUs and other devices to which it is connected are commonly enclosed within an equipment rack or equipment cabinet and collectively referred to as a Cabinet Power Distribution Unit CDU .

Electronic equipment racks such as standard RETMA racks commonly comprise rectangular or box shaped housings sometimes referred to as a cabinet or a rack and associated components for mounting equipment associated communications cables and associated power distribution cables. Electronic equipment is commonly mountable in such racks so that the various electronic devices are aligned vertically one on top of the other in the rack. Often multiple such racks are oriented side by side with each containing numerous electronic components and having substantial quantities of associated component wiring located both within and outside of the area occupied by the racks. Such racks commonly support equipment that is used in a computing network for an enterprise referred to as an enterprise network.

Enterprise networks exist to support large world wide organizations and depend on a combination of technologies e.g. data communications inter networking equipment frame relay controllers asynchronous transfer mode ATM switches routers integrated services digital network ISDN controllers application servers and network management application software. Such enterprise networks can be used to support a large company s branch offices or campuses throughout the world and as such these networks have become mission critical to the functioning of such organizations. Masses of information are routinely expected to be exchanged and such information exchanges are necessary to carry on the daily business of modern organizations. For example some international banks have thousands of branch offices placed throughout Europe Asia and North America that each critically depend on their ability to communicate banking transactions quickly and efficiently with one another and with their respective headquarters.

A typical enterprise network uses building blocks of router and frame relay network appliances mounted in equipment racks. Such equipment racks are distributed to remote point of presence POP locations in the particular network. Each equipment rack can include frame relay controllers routers ISDN controllers servers and modems etc. each of which are connected to one or more power sources. The value of POP equipment can range from 200 000 to 500 000 and the number of individual devices can exceed a thousand.

A relatively large number of equipment racks are located in one or more data centers that act as hubs for data communications for an enterprise. Conventional network management technologies provide relatively little information related to the electrical power consumption and or status of data centers various equipment racks within data centers or of particular components associated with equipment racks. Energy consumption of data centers can be a source of significant costs for an enterprise and increasing energy efficiency of data centers could provide a significant cost savings for an enterprise.

In various embodiments systems and methods are provided that sense and output the power used by various different components and or applications including monitoring both the input power of a power distribution unit PDU and or cabinet distribution unit CDU and the power output to various components powered one or more PDUs CDUs. For example to determine total IT Equipment Power Watts power for each component may be combined. The sum of all the power cord Watts measures the IT Equipment Power consumed by the IT assets assuming all IT assets are plugged into a PDUs CDUs having the ability to measure Watts .

In an aspect of the present disclosure provided is a power management system comprising i a communications interface that sends receives communications to from at least two cabinet distribution units CDUs the communications received from the CDUs including power usage data for each of two or more electrical outputs within each CDU ii a memory that stores information related to electrical components that receive power from one or more of the electrical outputs and iii a controller interconnected to the communications interface and memory that receives the power usage data from the CDUs determines power that is consumed by one or more of the electrical components outputs information related to power that is consumed by one or more of the electrical components and communicates with the CDUs through the communications interface to control current flow through one or more selected outlets.

The communications interface in one embodiment sends receives communications to from the CDUs through TCP IP with a unique IP address for each CDU. In an aspect the memory comprises information related to at least a first electrical component that receives power from at least a first and a second electrical output the first output located at a first CDU and the second output located at a second CDU. The controller in such an aspect determines power that is consumed by the first electrical component by combining power usage data for the first and second outputs of the first and second CDUs. The memory may also include information related to at least a first application that runs on a plurality of electrical components that receive power from a plurality of different CDUs and the controller determines power that is consumed by the plurality of electrical components that are running the first application by combining power usage data for the power outputs of the plurality of electrical components.

The memory in various embodiments comprises i a system table structured for data descriptive of a power distribution system ii a tower table structured for data descriptive of outputs CDUs and other elements in the power distribution system iii an infeed table structured for data descriptive of electrical power provided to the CDUs and iv an outlet table structured for data descriptive of electrical power flowing through various outputs. In other embodiments the communications interface receives communications related to one or more environmental sensors located in one or more CDUs and the memory further comprises an environmental table structured for data descriptive of environmental parameters associated with the environmental sensors. In other embodiments the memory further comprises a clusters table structured for data descriptive of output clusters that include outputs located in two or more different CDUs that provide power to one electrical component or one application. The clusters table may comprise a table structured for cluster identifiers and a table structured for data correlating outlets with clusters.

Another aspect of the disclosure provides a method of managing electrical power usage in a power distribution system that includes a plurality of electrical outlets the method comprising i collecting power usage data indicative of electrical current flow through each of a plurality of the electrical outlets in the system ii correlating the power usage data with electrical components that receive power from each of the plurality of electrical outlets iii outputting power usage data for each of the electrical components iv receiving a command to control current flow through a selected outlet and v controlling current flow through the selected outlet responsive to the command. Controlling current flow through an outlet may be accomplished by turning the outlet on or off. The method may also include receiving a user initiated command to reboot control circuitry associated with an electrical component that receives power from one or more of the outlets and rebooting the control circuitry responsive to the command. In some embodiments the method includes collecting environmental data indicative of environmental conditions of the electrical outlets and outputting the environmental data. The environmental data may comprise temperature and humidity. In other embodiments the method further comprises generating a report descriptive of a power usage trend. In still further embodiments the method further comprises assigning each outlet in any one location to a cabinet distribution unit CDU in that location associating at least one unique IP address with each location having one or more CDUs and collecting power usage data respecting an outlet by communicating via the Internet with the IP address associated with the CDU containing that outlet. The method may also comprise assigning a plurality of outlets in a CDU having one IP address and a plurality of outlets in a CDU having another IP address to a cluster displaying a status of the cluster receiving a user initiated command to control current flow through all outlets in a cluster selected by the user and controlling current flow through all outlets in the user selected cluster responsive to the command.

Also described herein are several exemplary embodiments of power outlet modules and methods for distributing power to one or more electronic components such as electronic components mounted within an electronic equipment rack. The power outlet modules can include outlets which may include plug type outlets to which power cords of electronic equipment can be coupled and through which power is transmitted from the power outlet modules to the electronic equipment. As used herein the terms outlet and receptacle may be used interchangeably. In some embodiments the power outlet modules include power monitoring components located at one or more outlets. The power monitoring components may report the power that is delivered to individual electronic components through the attached power cord at a respective outlet. In other embodiments the power outlet modules include power monitoring components at the input power source and at one or more outlets.

The power monitoring components in various embodiments include toroids interconnected with one or more outlets of a power distribution unit. The toroids provide information related to the current that is being conducted through a particular outlet. The current information along with voltage and phase information may be used to determine the power this is being consumed through the output. In some embodiments each toroid in a power distribution unit is interconnected with a power reporting circuit that is interconnected to a power distribution unit. The power reporting circuit may however be included in a power outlet module. In any event the controller may provide power consumption information related to one or more of the outlets of the power outlet module to other external components and systems.

It is to be understood that the foregoing is a brief description of various aspects of various embodiments. It is therefore also to be understood that the scope of the invention is to be determined by the claims as issued and not by whether given subject matter includes any or all such features or advantages or addresses any or all of the issues noted herein.

In addition there are other advantages and varying novel features and aspects of differing embodiments. The foregoing and other features and advantages will become more apparent from the following detailed description which proceeds with reference to the accompanying figures.

Embodiments of power distribution monitoring and management systems are described herein. Embodiments of such systems include a power distribution plugstrip power distribution unit PDU and cabinet distribution unit CDU with power determination and monitoring capability. The present disclosure recognizes that capability to determine the power being delivered to a power distribution apparatus and to determine the power being delivered from the power distribution apparatus to one or more electrical loads can enable efficient determination of power usage for various different components that are associated with a facility and therefore provide ability to manage power to the various different components. In many cases numerous PDUs and or CDUs may be located in a facility with each supplying power to several different electrical loads. Knowledge of power being delivered to various equipment in a facility may be used to evaluate improve and manage power consumption in a facility and across multiple facilities such as data centers.

Such management of power may improve efficiency of power consumption at data centers as measured by one or more power usage metrics. One available measure of power usage efficiency for data centers is provided through a metric known as Power Usage Effectiveness PUE and Data Center Efficiency DCE . Such metrics enable data center operators to estimate the energy efficiency of their data centers compare the results against other data centers and determine if any energy efficiency improvements may be desirable.

Data center power and cooling are two significant issues facing IT organizations and many entities desire to control these costs while enabling future expansion. With more energy efficient data centers enterprises and or IT organizations can better manage increased computing network and storage demands lower energy costs and reduce total cost of ownership TCO .

As mentioned above metrics may be used to determine information related to data center power usage including PUE and DCE. Both of these metrics provide a relationship between equipment power and total facility power. Total facility power is used to refer to the total power that is consumed by a data center. In the event that a data center is housed in a building that houses other functions addition to a data center or that houses more than one data center the total facility power is the power that is used by the data center that is of interest rather than the power consumed by other uses than the data center of interest. illustrates computing equipment that may contribute to total facility power. The PUE is defined as follows PUE Total Facility Power Computing Equipment Power The DCE is the reciprocal of the PUE and is defines as follows DCE Computing Equipment Power Total Facility Power 

With continuing reference to the computing equipment power is the power required to operate the data center equipment that is used to manage process store and or route data within a data center. This includes the load associated with equipment such as computer storage and network equipment along with supplemental equipment such as KVM switches monitors and workstations used to monitor or otherwise control the data center. Total facility power is used to refer to everything that supports the data center equipment load such as power delivery components cooling system components computer nodes network nodes and storage nodes and other component loads such as data center lighting and other ancillary equipment. Power delivery components include various components such as UPS switch gear generators PDUs batteries and distribution losses external to the IT equipment. Cooling system components can also include various components such as chillers computer room air conditioning units CRACs direct expansion air handler DX units pumps and cooling towers.

The PUE and DCE metrics provide a way to determine opportunities to improve data center operational efficiency how a particular data center compares with other data centers and opportunities to repurpose energy for additional computing equipment to name but a few. While both of these metrics are related they can be used to illustrate the energy allocation in a data center differently. For example if a PUE is determined to be 3.0 this indicates that the data center demand is three times greater than the energy necessary to power the computing equipment located within the data center. In addition the ratio can be used as a multiplier for calculating the real impact of power demands. For example if a server demands 500 watts and the PUE for the datacenter is 3.0 then the power from the utility grid needed to deliver 500 watts to the server is 1500 watts. The DCE in comparison may provide a different aspect of this information a DCE value of 0.33 equivalent to a PUE of 3.0 suggesting that the computing equipment consumes 33 of the power in the data center. As will be readily observed PUE can range from 1.0 to infinity with a PUE value of 1.0 indicating 100 efficiency i.e. all power used by computing equipment only and a large PUE indicating that computing equipment uses a relatively small amount of the total power entering the data center.

In total facility power is measured at or near the facility utility meter s to accurately reflect the power entering the data center. This represents the total power for which the utility charges consumed in the data center. In order to obtain accurate and meaningful power information the data center power is either measured or otherwise calculated because power not intended to be consumed in the data center would result in inaccurate PUE and DCE metrics. For example if a data center resides in an office building total power drawn from the utility will be the sum of the total facility power for the data center and the total power consumed by the non data center offices. In some situations the total facility power for a particular data center is required to be estimated or measured in another manner than through a utility power meter. Computing equipment power should be measured after all power conversion switching and conditioning is completed and before the computing equipment itself in order to gain meaningful information. In various embodiments disclosed herein power delivered to computing equipment is measured at the output of the computer room power distribution units PDUs .

Within a data center it also may be desirable to measure data center performance. One metric that may be used to measure data center performance is referred to as Data Center Performance Efficiency DCPE . The DCPE is defined as DCPE Useful Work Total Facility Power This metric effectively defines the data center as a box and a net amount of useful work is done by the box.

Additionally additional granularity may be desired related to power usage within a data center. For example a PUE metric may be broken down into the following PUE Cooling Load Factor CLF Power Load Factor PLF 1.0. All factors are ratios that are divided by the computing equipment load and 1.0 represents the normalized computing equipment load. Cooling Load Factor CLF is the total power consumed by chillers cooling towers computer room air conditioners CRACs pumps etc. normalized by the computing equipment load. The Power Load Factor PLF is the total power dissipated by switch gear uninterruptible power supplies UPSs power distribution units PDUs etc. normalized by the computing equipment Load.

Individual components may be measured in order to determine various information related to power efficiency metrics. In various embodiments described herein equipment power is determined for various individual components and this information provided to determine power usage related to that equipment. In various embodiments a PDU is provided that senses and outputs the power used by various different components including monitoring both the input power of the PDU and the power output to various components powered by the PDU. For example to determine total computing equipment power Power is Volts Amperes or Watts a PDU may measure Watts for each input cord to the PDU s or the input power at various subcomponents that provide power to one or more pieces of computing equipment. The sum of all the power output to pieces of equipment measures the total computing equipment power consumed by the computing equipment assuming all computing equipment assets are plugged into a PDU having the ability to measure power.

In other embodiments an individual piece of computing equipment efficiency is determined according to MIPS Watts. MIPS as is well known is Million Instructions Per Second and is a measure of the speed of execution of a processor. Thus a performance efficiency for a server for example may be measured and a cumulative efficiency calculated for all equipment in a data center. In embodiments that provide such metrics each outlet measures power that is delivered from the outlet. The MIPS value may be read for example from the BIOS for the specific asset and provide a measure of performance efficiency. The sum of all the per outlet Watts on a PDU may be used to measure the PDU s efficiency when compared to the input cord power to the PDU. In some embodiments an individual piece of equipment may receive operating power from multiple power supplies. In such embodiments the outlets that provide power to the piece of equipment are grouped with power from each outlet summed to provide the corresponding power measurement for the specific asset that is acquiring it power from multiple PDUs or multiple power supplies. Other embodiments provide the ability for an expense charge for the power consumed by each specific asset and each outlet may record the amount of power used Watts hours in the same manner as a utility meter.

With reference now to a block diagram of an exemplary system of an embodiment is now described. A power distribution unit PDU is provided that supplies power to one or more associated computing assets. The PDU may be a stand alone device or incorporated with other components or modules to form a cabinet distribution unit CDU which includes for example fuse modules environmental monitors communications modules other PDUs etc. The PDU is useable in a computer network and may communicate over the computer network with a network power manager application . In cases where the PDU is included in a CDU communication with network power manager is conducted through a communications module within the CDU. The network power manager may reside in a workstation or other device that is used in the management of a data center or other enterprise management and issues network commands over a network communications connection. The PDU of this embodiment includes a power supply a network interface card NIC that has application firmware and hardware that interfaces to network the PDU with other modules within a CDU and in this embodiment includes a power manager agent application . The PDU includes a plurality of power outlets arranged in a power distribution plugstrip and an intelligent power module IPM . The IPM NIC and power manager agent are connected to the computer network . The intelligent power module controls the application of power from the input power to a corresponding power outlet among the power outlets and is in communication with the power manager agent application to provide power and power cycling on off for one or more of the corresponding power outlets. The IPM may also provide power state sensing and or load sensing with respect to the corresponding power outlet in response to one or more commands. The IPM in this embodiment includes a microprocessor used to control the power applied to a corresponding power outlet. The microprocessor also is connected to a voltage sensing device and a current sensing device to sense the voltage and current at corresponding individual power outlet s . The microprocessor uses this information to determine the power supplied to an outlet as will be described in more detail below. The microprocessor also receives a power measurement from the input power supply through an input voltage sensing device and an input current sensing device .

The network power manager of communicates with the power manager agent and IPM . The network power manager may receive information from and provide instructions to the IPM and power manager agent . The network power manager may also receive related power measurements from the IPM and report power information related to the PDU and related to one or more individual outlets and thus power information for individual assets powered by the outlet of the PDU . is an illustration of a CDU that includes PDUs along with a communications module that provides communications functions an environmental monitor and an input power cord with associated plug . The PDUs each include eight outlets that supply power to assets that may be mounted into an equipment rack. Such equipment racks are well known and often include several individual assets that are used in operation of a data center. The CDU as illustrated in is configured to be vertically mounted in an equipment rack. As is well known numerous equipment racks may be included in a data center and in various embodiments each asset in each equipment rack may be monitored for power usage through one or more associated PDUs .

With reference now to a block diagram illustration of an input power sensing system is described for an exemplary embodiment. An input power source can be either single or polyphase with a polyphase three phase power input illustrated in . Toroidal transformers are located such that a power lead L1 L2 and L3 from each of the three phases is routed through a toroidal transformer and provide current sensing to output a present current level for the associated power lead L1 L2 and L3. These toroidal transformers are electrically attached at voltage taps between the phases that are connected to an power measurement circuit . The voltage taps include a resistor divider and an amplifier to determine a line voltage for the particular phase that is provided to the power measurement circuit . The power measurement circuit in an exemplary embodiment includes a serial output that is in optical isolated communication with a microcontroller that will communicate power information from the power measurement circuit via a communications bus to a network communications board within the IPM. The IPM then makes this information available to a remote or local user via a network power manager. In one embodiment isolation is required between the energy measurement chip that is referenced to line voltage and the microcontroller that is required to be referenced to non hazardous voltage. In this embodiment a high side power supply and a low side power supply supply power to respective sides of the isolation and are isolated from each other.

Referring now to another exemplary embodiment of an input power monitor is described. This embodiment provides a discrete digitized solution. A power source can be either single or polyphase with a three phase polyphase power supply illustrated. A torroidal transformer is located such that a power lead L1 L2 and L3 from each of the three phases is routed through the toroidal transformer and provide current sensing. These torroidal transformers along with voltage taps between the phases are connected to a single microcontroller that performs the power calculation operations. In the illustrated embodiment isolation of the line side high voltage sensing circuits from the low voltage microcontroller is provided such that user accessible communications ports do not have high voltages present. This isolation is provided by the isolation amplifiers within voltage taps . A first high side power supply and a second high side power supply supply power to respective components on the line side of the isolation.

With reference now to a block diagram illustration of output power reporting components is now described for an exemplary embodiment. In this embodiment the PDU includes a power outlet plugstrip also referred to as a power outlet module that includes eight power outlets . Each outlet is connected to power lines L1 and L2 and to power source . In this embodiment the power line L1 from power source is connected to line power in the power source and the power line L2 is connected to neutral in the power source . Each outlet is also interconnected to a ground in the power source although this line connection from the outlets is not illustrated in . Each outlet in this embodiment has an associated torroidal transformer that is used to sense the current that is flowing through the line L1 for each respective outlet . The line L1 interconnected to each outlet is wired through the respective toroid . The torroidal transformers each have a current reporting line that provides instantaneous current information related to the respective toroidal transformer to microcontroller . The microcontroller receives this current information related to each respective outlet . The power outlet module also includes a line voltage detector that includes a voltage dropping resistor network and an opto isolated operational amplifier and provides in indication of instantaneous line voltage for the power source . The line voltage detector in other embodiments includes a voltage sense transformer that provides isolation and allows voltage to be determined based on the voltage across the transformer and the turns ratio of the transformer. The microcontroller uses the current information related to each of the respective outlets along with the line voltage to calculate the power being consumed through the individual outlets . This information may be communicated to the IPM and or other components through communications link through for example a communications bus.

In one embodiment the power outlet module includes eight outlets each of NEMA 5 20R type contained in a housing. It will be understood that this embodiment and other embodiments described herein as having NEMA 5 20R type outlets are exemplary only and that any of various other types of outlets alternatively can be used. For example the outlets can be other NEMA types e.g. NEMA 5 15R NEMA 6 20R NEMA 6 30R or NEMA 6 50R or any of various IEC types e.g. IEC C13 . It also will be understood that all the outlets in a particular power outlet module or other module outlet described herein need not be identical. It also will be understood that the outlets are not limited to three prong receptacles alternatively one or more of the outlets can be configured for two or more than three prongs in the mating male connector. It also will be understood that the outlets are not limited to having female prong receptacles. In any outlet one or more of the prong receptacles can be male instead of female connection elements as conditions or needs indicate. In general as used herein female and male prong receptacles are termed power connection elements. Furthermore the principles described herein also are applicable to devices that may be hard wired into an outlet module. While outlet module of this embodiment includes eight outlets it will be understood that this is but one example and that an outlet module may include a different number of outlets.

The housing for an outlet module may be any suitable housing for such a device as is known to one of skill in the art and illustrated for example in . Such a housing generally includes a front portion and a rear portion the front portion is substantially planar and the rear portion is substantially planar and parallel to the front portion. The housing also includes longitudinally extending side portions and transverse end portions. The front portion rear portion side portions and end portions are generally orthogonal to each other in a generally rectangular or box type configuration. The housing can be made of any suitable typically rigid material including for example a rigid polymeric plastic material. In at least certain embodiments the front and rear portions are made from an electrically insulative material. The side portions and the end portions may be integrally formed optionally along with the front portion or the rear portion. Furthermore while the outlet module described in this embodiment includes a housing other embodiments may include an outlet module that does not include a housing. For example an outlet module may include a number of outlets coupled together with no exterior housing that may then be installed into another piece of equipment.

Each outlet is interconnected to the power source through any of a number of well known connection schemes such as spade lug plug connectors screw connectors or other suitable type of connector. Furthermore if desired one or more of these electrical connectors can be located inside the housing or outside the housing in embodiments where the power outlet module includes a housing.

The microcontroller in an embodiment receives information for each outlet along with voltage information and calculates power output per outlet with this information reported through the communications link . The power per outlet is determined by multiplying the instantaneous voltage by the instantaneous current for a particular outlet and integrating this product against time to give energy used kilowatt hours etc. In an embodiment the microcontroller computes the RMS watts for each respective outlet by multiplying the RMS voltage by the RMS current. RMS current and voltage in an embodiment are calculated per AC cycle. In this embodiment the microcontroller includes eight current input channels one per outlet which are electrically connected to the toroidal transformers. In this embodiment the microcontroller includes ADC inputs that digitize the analog signal from toroidal transformers . The microcontroller then performs power computations based on the ADC input for a particular output and the voltage information.

With reference now to a block diagram illustration of a power outlet module with associated power reporting components is now described for another exemplary embodiment. Similarly as in the embodiment of the power outlet module of the embodiment of includes eight power outlets . Each outlet is connected to power lines L1 and L2 and to power source . Power source may be for example a standard 120V power feed or may be a particular phase of a polyphase power source. In one embodiment the power line L1 from power source is connected to line power in the power source and the power line L2 is connected to neutral in the power source . Each outlet is also interconnected to a ground in the power source although this line connection from the outlets is not illustrated in . Each outlet in this embodiment has an associated toroidal inductor that is used to sense the current that is flowing through the line L1 for each respective outlet . The line L1 interconnected to each outlet is wired through the respective toroidal inductor . The toroidal inductors each have a current reporting line that provides instantaneous current information related to the respective toroidal inductor to metering integrated circuit . The metering integrated circuit receives this current information related to each respective outlet . The power outlet module also includes a line voltage detector that includes a voltage dropping resistor network and an opto isolated operational amplifier and provides in indication of instantaneous line voltage for the power source to the metering integrated circuit . Similarly as described above the line voltage detector in other embodiments includes a voltage sense transformer that provides isolation and allows voltage to be determined based on the voltage across the transformer and the turns ratio of the transformer. The metering integrated circuit uses the current information related to each of the respective outlets along with the line voltage to calculate the power being consumed through the individual outlets . This information is transferred to a microcontroller which may communicate with other external components through communications link through for example a communications bus. Each of the outlets similarly as in the embodiment of may be connected to the power source through electromechanical relays with each operable to monitor and or control the power transmitted to a respective individual outlet.

In the embodiment of a metering integrated circuit is connected to each of the toroidal inductors and the voltage dropping resistor network and operational amplifier . The metering integrated circuit performs various power calculations for each outlet based on RMS current and voltage values. The metering integrated circuit provides this information in the form of RMS power information to microcontroller . In this manner discrete components are used for determining power consumption of each outlet and for providing this information to various external components. Such an embodiment may be desirable in applications where specific metering requirements are desired and a metering integrated circuit that is specifically designed for power metering provides such requirements. For example the power outlet module may be installed into a PDU system that provides power to a number of different electronic components that are used in a computing network. In some applications for example the cost for providing power to a specific component may be billed to an entity. In such applications it may be desirable to have a dedicated metering integrated circuit to provide power consumption data. It also may be desirable for computing network managers such as information technology IT personnel to monitor the power used by various different individual components and the described power outlet modules may provide such reporting functionality.

The metering integrated circuit in this embodiment receives information for each outlet along with voltage information and calculates power output per outlet with this information reported to the microcontroller . The microcontroller receives this information and through the communications link provides the power consumption information for the specific outlets. The metering integrated circuit may determine power per outlet according to one of a number of different algorithms. For example power may be determined as the product of the instantaneous voltage and the instantaneous current integrated against time for a particular outlet or power may be computed using a compensation scheme that corrects for phase differences in received signals.

With reference now to a block diagram illustration of a power outlet module with associated power reporting components is now described for yet another exemplary embodiment. In this embodiment similarly as in the embodiments of the power outlet module includes eight power outlets . Each outlet is connected to power lines L1 and L2 and to power source . Power source may be for example a standard 120V power feed or may be a particular phase of a polyphase power source. In one embodiment the power line L1 from power source is connected to line power in the power source and the power line L2 is connected to neutral in the power source . Each outlet is also interconnected to a ground in the power source although this line connection from the outlets is not illustrated in . Each outlet in this embodiment has an associated toroidal inductor that is used to sense the current that is flowing through the line L1 to each respective outlet . The line L1 interconnected to each outlet is wired through the respective toroidal inductor . The toroidal inductors each have a current reporting line that provides instantaneous current information related to the respective toroidal inductor to a multiplexer . The multiplexer receives this current information related to each respective outlet and provides information from one of the outlets to a metering integrated circuit . A microcontroller provides a multiplexer control signal to the multiplexer that determines which of the outlets the multiplexer outputs and the metering integrated circuit receives the current information for the outlet selected by the microcontroller . The power outlet module also includes a line voltage detector that includes a voltage dropping resistor network and an opto isolated operational amplifier and provides in indication of instantaneous line voltage for the power source . The metering integrated circuit uses the current information related to the outlet that is being output by the multiplexer along with the line voltage to calculate the power being consumed through the selected outlet . This information is communicated to the microcontroller that then may report the information to other external components through a communications line to a communications bus. Each of the outlets while not illustrated in may be connected to the power source through electromechanical relays with each operable to monitor and or control the power transmitted to a respective individual outlet.

The power outlet module may be installed into a PDU system that provides power to a number of different electronic components that are used in a computing network. It may be desirable for computing network managers such as information technology IT personnel to monitor the power used by various different individual components and the described power outlet modules may provide such reporting functionality. The power per for the selected outlet is determined by multiplying the instantaneous voltage by the instantaneous current for a particular outlet and integrating this product against time to give energy used kilowatt hours etc. In an embodiment the microcontroller computes the RMS watts for each respective outlet by multiplying the RMS voltage by the RMS current.

With reference now to schematic diagrams of another exemplary embodiment are now discussed. In this embodiment various different components of an outlet module may be assembled onto separate circuit boards that are then assembled into a power outlet module. In such a manner component boards may be assembled to include features that are ordered by a particular customer or user of a PDU in which the outlet module will be used. Furthermore a user or customer may desire some but not all of the outlets in a PDU to have the capability of reporting power usage related to individual outlets and thus different outlet modules or subsets of outlets in a outlet module may be assembled with the additional component boards to provide such capability.

In one embodiment an outlet module includes eight 8 individual outlets that are organized into logical groups of four outlets each. Illustrated in is a schematic illustration of an outlet circuit for such an embodiment. In this embodiment eight outlets are assembled to be included in an outlet module. In this embodiment outlet and are IEC C19 type connectors and outlets are each IEC C13 type connectors although it will be readily recognized that outlets may be any suitable outlet type as required for a particular application. The outlet circuit includes a ground input that is electrically connected to a ground connection in each respective outlet . A neutral line may be electrically connected to each outlet through a neutral input that is provided for the four outlets with a neutral line electrically connected to each outlet through a second neutral input . Alternatively if all eight outlets are to be connected to a single power source the neutral line for each set of four outlets may be connected through jumper connection with neutral inputs provided to electrically connect the neutral for each outlet . As will be readily understood a line voltage may be provided in place of a neutral connection in applications requiring higher voltages for the outlets . With continuing reference to this embodiment provides a visual indicator at each outlet that power is present at the outlet . The visual indicator is provided through a LED that is interconnected between line power and neutral for each outlet . Line power for each outlet in this embodiment is provided through line inputs . Each line input may be connected through a switch to line power from a power source as will be described in more detail below. In such a manner when a respective switch is configured to supply power to an outlet the LED associated with the outlet will illuminate thus providing a visual indicator that power is being provided to a particular outlet . The LED in this embodiment is electrically connected between the line input and neutral through a current limiting diode and resistors . In other embodiments such a visual indicator may not be desired and in such embodiments the components related to the visual indicator may be omitted. As mentioned line power is provided through separate line inputs for each respective outlet . In some embodiments the line inputs are electrically connected to switches to provide switched electrical outputs and in other embodiments some or all of the line inputs may be connected in an unswitched configuration to a line power input to provide unswitched outputs.

As mentioned in some embodiments switched outputs are provided. With reference now to provided in this embodiment is a relay circuit . The relay circuit may be provided on a separate printed circuit board that is sized and configured to couple with the outlet circuit . In such a manner if switched outlets are required for an outlet module the relay circuit may be assembled with the outlet module to provide such functionality. The relay circuit includes relays that provide line power to each outlet respectively. The output of each relay is provided to line power outputs that when coupled to outlet circuit and connected to line inputs respectively. Line power is provided to the relay circuit through line power input when all eight outlets receive power form one line power input and through power inputs and when a line power input is provided for each set of four outlets and respectively. Each relay is connected to a relay driver circuit respectively that provide signals to switch the relays . The relay driver circuits are electrically connected to a relay control through connections respectively and or through electrical connector that is connected to a relay control circuit. Relay driver circuits are connected to line power through the respective relay and to the neutral input through inputs and . In the event that a single neutral is provided for all of the outlets a jumper connects neutral lines for each set of four relay controls. and respectively.

With reference now to current sensing is described for this embodiment. A current sensing circuit in this embodiment is included as a separate printed circuit board that can be assembled into a power outlet module when it is desired to have the capability to provide current information related to each individual outlet in an outlet module. Such a circuit board may be used in conjunction with other circuit boards such as the relay circuit of . Such a configuration is illustrated in in which the circuitry of is contained on the lower printed circuit board the circuitry of are contained on the middle circuit board and the circuitry of is contained on the upper circuit board. The electrical connections of each of the circuit boards may be designed such that the boards may be assembled with related inputs outputs and connections that are aligned so as to provide for efficient modular assembly of power outlet modules that incorporate some or all of the features described herein through the addition of one or more related printed circuit boards. As illustrated in current transformers CTs are provided that sense current flowing in an associated conductor that is routed through the individual CT . The current transformers in this embodiment are toroidal inductors that each have two output lines the output proportional to the magnitude of the current that is flowing through the conductor associated with the CT. In this embodiment the line power conductor for each outlet is routed through a corresponding CT . The respective CT outputs a signal that corresponds to the magnitude of the current which in this embodiment is output on two output leads. In the embodiment of the outputs are connected to related smoothing circuitry that includes resistors and capacitors to provide current sense outputs through for each outlet. The current sense outputs are provided to a power sensor for use in determining the power that is being provided to a particular outlet. Also provided to the power sensor is information related to the line voltage that is present on each outlet so as to provide voltage and current information for use in determining power. In this embodiment as will be described in more detail below the power sensor is a processor that includes inputs for the current sense outputs through as well as voltage sense inputs for line voltage.

Line voltage measurements are provided in this embodiment through a voltage sensor circuit that is illustrated in . The voltage sensor circuit includes a voltage dropping resistor circuit that is connected to line power source at a first end and connected to the neutral input at a second end . The voltage dropping resistor network is tapped between resistors and at the neutral input with the taps provided to positive and negative Voltage inputs to an opto isolated amplifying circuit . Similarly as described above a voltage sense transformer may be used instead of a voltage dropping resistor network. The output of the opto isolated amplifying circuit is provided as a voltage sense signal . In the embodiment of an optocoupler is connected to the line input and provides a frequency sense signal to indicate that AC line voltage is present. In embodiments where all of the outlets of an outlet module are powered by a single power source a single voltage sensor circuit is used and in embodiments where different outlets in the outlet module are supplied power from different power sources a second voltage sensor circuit is provided for the second power input to the outlet module. As discussed above this embodiment may be implemented using printed circuit boards that provide circuitry for various features described. In this embodiment the voltage sensor circuit s are provided on the same printed circuit board as the current sensor circuit although it will be readily recognized that other configurations may be implemented.

Referring now to a power sensor and control circuit is described for an embodiment. The power sensor and control circuit in this embodiment is included in the same printed circuit board as the current and voltage sensor circuits although other implementations will be readily recognized. The power sensor and control circuit includes a microcontroller that receives all of the current sense signals through are receives voltage sense signal s . These signals are received and processed to determine the power being provided to each outlet in the outlet module. The microcontroller is interconnected to an addressable latch that provides control signals to the relays if present. The microcontroller also includes communications inputs that may be coupled to a communications bus to receive and transmit data from to the bus. In this embodiment the microcontroller has 16 current input channels two per outlet which are electrically connected to the current sense outputs through . The microcontroller includes ADC inputs that digitize the current and voltage sense signals. Relative to the current sense signals the ADC includes a differential ADC input based on the two inputs for each outlet. In this embodiment the microcontroller filters the current and voltage sense signals to reduce noise that may be present. The digitized current sense signals are scaled for 16 Amps with a 3.0 crest factor in this embodiment. The voltage sense signals s are received on up to two voltage input channels one per branch with a single ended ADC input and a digitized output scaled for 390 volt peaks. The frequency sense signals is also provided to the microcontroller which is used for frequency determination and timing of cycle sampling auto adjusted every second to compensate for microcontroller RC clock temperature drift. The microcontroller in this embodiment also provides for calibrations to account for system phase error and provide near zero to near full span voltage and near zero to near full span current digitization.

Power information is generated from the microcontroller in this embodiment by sampling the current sense signals from an outlet along with the voltage sense signal for that outlet branch if more than one voltage sense signal is provided over a full AC cycle. The sampling is followed by processing time to determine the power related to the outlet for the cycle. This process is then repeated for the next outlet and so on. Sampling in this embodiment is done at a rate of 120 samples per cycle or each three degrees which is four times the Nyquist rate for the 14th harmonic at 50 or 60 Hz. Sampling may be delayed between voltage and current sense signals to correct for phase error introduced by the system through for example the current transformer toroid filters etc. For each AC cycle the microcontroller calculates RMS Voltage square root of the sum of the squares of the difference of each data point from the mean of all the data points and RMS Current square root of the sum of the squares of the difference of each data point from the mean of all the data points . A pseudo running average mean of the most recent eight AC cycles is computed which provides a less varying DC offset of the differential current ADC input channel i.e. a low pass filter approach . The microcontroller in this embodiment also computes Apparent Power as the product of the RMS Voltage and the RMS Current and Active Power as an integration of the product of instantaneous voltage and current data points with the mean removed from each and sign preserved. A Power Factor is also computed as the inverse cosine of the quotient of active power divided by apparent power. As discussed above the microcontroller is interconnected to a communications bus such as an I2C bus or SMBus . The microcontroller reports over the bus for each outlet channel a Voltage RMS Vrms the pseudo running average of the eight most recent Vrms values reported to a tenth volt b Current RMS Irms the pseudo running average of the eight most recent Irms values reported to a hundredth Ampere c Apparent Power VA the pseudo running average of the eight most recent VA values reported to in whole volt amps d Active Power W the pseudo running average of the eight most recent active power values reported in whole watts and e Power Factor pF the pseudo running average of the eight most recent pF values reported to a tenth. This data may be received by an external system that collects the data and related outlet for which the data is provided and used to determine metrics or provide information such as described above.

The daemon service or the RPM itself may communicate with a simple network management protocol SNMP service and an SNMP trap service . The SNMP service in turn communicates with one or more power distribution units PDUs and .

The PDUs may comprise for example PDUs as described above and distributed by Server Technology Inc. STI of Reno Nev. A PDU may be monitored and controlled by an electronic control system of which one example is the Mt. Rose controller board distributed by STI. Each PDU may include one or more electrical outlets and sensors that indicate voltage present at the outlets and current flow through each outlet.

Data obtained from the PDUs may be retrieved through the SNMP service and stored in the database. Similarly data stored in the database may be used to configure or control the PDUs via the SNMP service. Communication protocols other than SNMP could also be used.

Messages spawned proactively or reactively by the PDUs may be sent to the daemon service through the SNMP trap service. Or the PDUs may communicate directly with the RMP by a TCP IP communication protocol or another communication channel or protocol.

The method may include receiving a user initiated command to reboot control circuitry associated with one or more of the outlets and rebooting the control circuitry responsive to the command.

The method may include collecting environmental data indicative of environmental conditions of the electrical outlets and displaying the environmental data to the user. The environmental data may include temperature or humidity or both or other environmental factors as desired.

A report descriptive of a power usage trend may be generated automatically or responsive to a user request. A log of events may be generated . A message may be automatically sent to a user if a user defined event occurs. Such an event may be for example sensing of any of a predetermined temperature a predetermined humidity or a predetermined amount of electrical power usage by one or more outlets. The user may specify the parameters of an event for a one time report or a report may be sent automatically each time the event occurs. Or an SNMP trap may be used when an event occurs.

The method may include assigning each outlet in any one location to a cabinet distribution unit CDU in that location. At least one unique IP address may be associated with each location having one or more CDUs. If there are several CDUs at a given location each may get a separate IP address or a single IP address may be used for some or all of the CDUs at that location. Collecting power usage data respecting an outlet may be accomplished by communicating via the Internet with the IP address associated with the CDU containing that outlet.

Displaying information to the user may include displaying the status of one or more CDUs. The status of a CDU may be any of critical changed normal no data maintenance or snooze. Critical denotes a condition that may require immediate corrective action. Changed denotes that a parameter has changed since a previous report or display. Normal denotes all parameters are within limits that the user may specify or that may have been predetermined at some prior time. No data indicates a communication failure between the CDU in question and the power manager. Maintenance indicates that the CDU in question is being maintained and will remain in that status until manually changed. Snooze indicates that the CDU in question is temporarily off line but will return to on line status at a predetermined future time.

The method may include displaying a graphical representation of locations of CDUs in the power distribution system. This graphical representation may take the form of a world map with indicators such as icons placed over CDU locations. Maps drawn to various scales may be provided for example a map of the United States may indicate all CDU locations in that country a map of Nevada may indicate all CDU locations in Nevada and a map of Reno may indicate all CDU locations there.

The method may include displaying an amount of electrical power available to a CDU. This may be for example the capacity of the electrical feed at a given location or into the CDU cabinet or into a particular CDU.

The method may include clustering a plurality of outlets. This includes assigning a plurality of outlets in a CDU having one IP address and a plurality of outlets in a CDU having another IP address to a cluster. Once this has been done various ones of the above described steps may conveniently be applied to all outlets in the cluster. For example the status of the cluster may be displayed a user initiated command to control current flow through all outlets in a cluster selected by the user may be received and current flow through all outlets in the user selected cluster may be controlled responsive to the command.

Typically every outlet has its own current sensor and every outlet or every bank of outlets connected to a single electrical supply line has a voltage sensor. Data gathered by these sensors may be used locally for example to calculate power consumption of each outlet which information is thereupon transmitted to the RPM see or the sensor data may be transmitted directly to the RPM.

Tables that may be used in embodiments of the invention will now be described. These tables may include for example SYSTEM tables TOWER tables INFEED tables OUTLET tables ENVMON tables TEMPHUMID tables CONTACTCLOSURE tables STATUS LOOKUP tables SNMP OID LOOKUP tables OUTLET CLUSTER tables TRENDING tables USERS tables DISCOVERY tables GRAPHICAL DISPLAY tables ALERT tables and REPORT tables.

A SYSTEM table may represent the highest level in a hierarchy. This table may contain system wide information such as the name and IP address of an entire system. Table 1 is an exemplary system table 

Note that most of the fields in this table may be populated via SNMP GETs. For the fields that can be either SNMP specified or user specified the RPM may attempt to get the value via SNMP when the device is discovered. If unable no value or a user specified value can be used. When the user specifies a value an attempt will be made to set the new value on the actual system but the value in the table is the overriding value if the value on the system differs from the value on the device. Values that are retrieved only via an SNMP GET are not settable by the user since they are hardware configuration values from the system. The values that are retrieved via an SNMP Poll are dynamic values that may change as the system is used. The polling operations may occur as the data is required by the RPM e.g. as the data is required by a graphical user interface GUI of the RPM and the polling data may or may not be saved in the database the labels may remain in the database for OID table lookup reasons . Much of the data retrieved via SNMP Poll operations may be stored in a TREND table for purposes of a trending feature. That is data may be stored in a TREND table for the purpose of monitoring data trends viewing or printing reports or taking appropriate action based on a trend.

The SYSTEM table may have a one to many relationship with the TOWER ENVIRONMENTAL MONITOR CONTACT CLOSURE TEMPERATURE HUMIDITY PROBE INFEED and OUTLET tables devices in the system. In one embodiment all of the children tables of a SYSTEM table contain the primary key of their SYSTEM table. This characteristic may be true of the tables in several portions of the database including the SYSTEM tables TOWER tables INFEED tables OUTLET tables and ENVMON tables. As a result the entire system may be described by queries that request the parent s primary key. The SNMP public and private access strings may be included in the system table. These values can be set by the user and may correspond to strings in the controller board firmware. The DISCOVERY tables may contain the strings to use and these fields may be initially set from these values.

Additional fields may be added to a SYSTEM table to support GUI functions such as the display of custom graphics e.g. icons schematics or photos representing managed devices or device groups .

An exemplary TOWER table will now be described. A tower may be a PDU or other device having a processor such as an ARM processor. One or a plurality of towers may exist within a system. Table 2 shows an exemplary TOWER table.

As with the SYSTEM table most of the fields in the TOWER table may be populated via SNMP. For the fields that can be either SNMP specified or user specified the RPM may attempt to get the value via SNMP when the device is discovered. If unable no value or a user specified value may be used. When the user specifies a value an attempt may be made to set the new value on the actual tower but the value in the table may override the value if the value in the TOWER table differs from the value on the tower. The values that are only retrieved via an SNMP GET are not settable by the user since they are hardware configuration values from the tower. The values that are retrieved via an SNMP Poll are dynamic values that may change as the system is used. The polling operations will occur as the data is required by the RPM or its GUI and the polling data may or may not be saved in the database the labels may remain in the database for OID table lookup reasons . Much of the data retrieved via SNMP Poll operations may be stored in a TREND table for use with a trending feature.

A TOWER table has a one to one relationship with a SYSTEM table. The primary key of the associated SYSTEM table may be held in the TOWER table. A TOWER table may have a one to may relationship with INFEED and OUTLET tables devices. The INFEEDS associated with a TOWER can be retrieved with a query of the INFEED table using the TOWERID primary key as the search key. Additional fields may be added to a TOWER table to support GUI functions such as the display of custom graphics.

An infeed is a power input such as a connection to a power source. A tower may have one or multiple infeeds. Table 3 provides an example of an INFEED table.

As with the previously described tables most of the fields in this table may be populated via SNMP. For the fields that can be either SNMP specified or user specified the RDCM may attempt to get the value via SNMP when the device is discovered. If unable no value or a user specified value may be used. When the user specifies a value an attempt may be made to set the new value on the actual infeed. If the value to be set is the MRINFEED LOAD HIGH THRESH the value must be successfully set on the infeed in order for it to take affect. This is because this value is an SNMP threshold for traps that are recognized and generated by the device firmware. Other values in the table may override the firmware values if the value in the INFEED table differs from the value on the actual infeed. The values that are only retrieved via an SNMP GET are not settable by the user since they are hardware configuration values from an infeed. The values that are retrieved via an SNMP Poll are dynamic values that may change as the system is used. The polling operations may occur as the data is required by the RPM or its GUI and the polling data may or may not be saved in the database the labels may remain in the database for OID table lookup reasons . Much of the data retrieved via SNMP Poll operations may be stored in a TREND table for use with a trending feature.

An INFEED table has a one to one relationship with a SYSTEM table and a TOWER table. The primary keys of the associated SYSTEM table and TOWER table may be held in the INFEED table. An INFEED table may have a one to may relationship with OUTLET tables or devices. The OUTLETS associated with an INFEED can be retrieved with a query of the OUTLET table using the INFEED primary key as the search key. Additional fields may be added to an INFEED table to support GUI functions such as the display of custom graphics. An outlet is a power output such as a connection to a powered or unpowered device. A tower may have one or multiple outlets. Table 4 presents an exemplary description of an OUTLET table.

As with the previous tables most of the fields in the OUTLET table may be populated via SNMP. For the fields that can be either SNMP specified or user specified the RPM may attempt to get the value via SNMP when the device is discovered. If unable no value or a user specified value may be used. When the user specifies a value an attempt may be made to set the new value on the actual outlet device firmware. If the value to be set is the MROUTLET LOAD HIGH THRESH or MROUTLET LOADLOW THRESH the value must be successfully set on the outlet device firmware in order for it to take effect. This is because these values are SNMP thresholds for traps that are recognized and generated by the device firmware. Other values in the table may override the firmware values if the value in the OUTLET table differs from the value on the actual outlet. The values that are only retrieved via an SNMP GET are not settable by the user since they are hardware configuration values from the OUTLET. The values that are retrieved via an SNMP Poll are dynamic values that may change as the system is used. The polling operations may occur as the data is required by the RPM or its GUI and the polling data may or may not be saved in the database the labels may remain in the database for OID table lookup reasons . Much of the data retrieved via SNMP Poll operations may be stored in a TREND table for use with a trending feature.

An OUTLET table has a one to one relationship with a SYSTEM table a TOWER table and an INFEED table. The primary keys of the associated SYSTEM table TOWER table and INFEED table may be held in the OUTLET table. Additional fields may be added to an OUTLET table to support GUI functions such as the display of custom graphics.

An ENVMON table may be used for monitor and control of environmental monitoring or control devices in a system such as a temperature sensor humidity sensor water sensor etc. Table 5 is an exemplary ENVMON table.

As with the previous tables most of the fields in the ENVMON table may be populated via SNMP. For the fields that can be either SNMP specified or user specified the RPM may attempt to get the value via SNMP when the device is discovered. If unable no value or a user specified value may be used. When the user specifies a value an attempt may be made to set the new value on the actual device firmware. If the value to be set is one of the SNMP trap thresholds the value must be successfully set on the outlet device firmware in order for it to take affect. This is because these values are SNMP thresholds for traps that are recognized and generated by the device firmware. Other values in the table may override the firmware values if the value in the table differs from the value on the actual hardware. The values that are only retrieved via an SNMP GET are not settable by the user since they are hardware configuration values from the Mt. Rose system. The values that are retrieved via an SNMP Poll are dynamic values that may change as the system is used. The polling operations may occur as the data is required by the RPM or its GUI and the polling data may or may not be saved in the database the labels may remain in the database for OID table lookup reasons . Much of the data retrieved via SNMP Poll operations may be stored in a TREND table for use with a trending feature.

An ENVMON table has a one to one relationship with a SYSTEM table. The primary key of the associated SYSTEM table may be held in the ENVMON table. An ENVMON table may have a one to may relationship with TEMPHUMID and CONTACTCLOSURE tables devices in a system. The monitors associated with an ENVMON table can be retrieved with a query of the associated tables using the ENVMONID primary key as the search key. Additional fields may be added to an ENVMON table to support GUI functions such as the display of custom graphics.

As with the previous tables most of the fields in a TEMPHUMID table are populated via SNMP. For the fields that can be either SNMP specified or user specified the RPM may attempt to get the value via SNMP when the device is discovered. If unable no value or a user specified value may be used. When the user specifies a value an attempt may be made to set the new value on the actual device firmware. If the value to be set is one of the SNMP trap thresholds the value must be successfully set on the outlet device firmware in order for it to take effect. Other values in the table may override the firmware values if the value in the table differs from the value on the actual hardware. The values that are only retrieved via an SNMP GET are not settable by the user since they are hardware configuration values from the system. The values that are retrieved via an SNMP Poll are dynamic values that may change as the system is used. The polling operations may occur as the data is required by the RPM or its GUI and the polling data may or may not be saved in the database the labels may remain in the database for OID table lookup reasons . Much of the data retrieved via SNMP POLL operations may be stored in a TREND table for use with a trending feature.

A TEMPHUMID monitor table has a one to one relationship with a SYSTEM table and ENVMON table. The primary keys of the associated SYSTEM table and ENVMON table may be held in the TEMPHUMID table. Additional fields may be added to a TEMPHUMID table to support GUI functions such as the display of custom graphics.

Table 7 provides an exemplary CONTACTCLOSURE monitor table which may be used for the monitor and control of contact closures such as cabinet closures water contact sensors or other devices.

A series of database tables may serve as STATUS LOOKUP tables. These tables allow the RPM application to easily determine the meaning of status returned for devices via SNMP polling. These tables use the status value returned as an index into a table with the corresponding table record containing a text message icon or other status indicator associated with the obtained status.

To facilitate SNMP processing an OID LOOKUP TABLE may be created in the SQL SERVER database. This table may have as one field the label of the field in a table for which the value is retrieved via SNMP. A second field in the table entry may be the SNMP OID that is used to retrieve the value for the field corresponding to the label. For example one entry in the MR SNMP OID LOOKUP table may have a DATA LABEL field of MRSYSTEM AREA. That value is a label in the MRSYSTEM table that contains the area controlled by the system. The second field in the MR SNMP OID LOOKUP table the SNMP OID field may contain for example the value 0.1.3.6.1.4.1.1718.3.1.7 which would be the SNMP OID that is used to retrieve this value from the controller board firmware.

An outlet cluster is a group of outlets that can be assigned a name which name can be used by an administrator to assign a user access to several outlets in one operation. This feature is implemented in one embodiment using three tables. The first table is the OUTLET CLUSTER table as shown in Table 8.

The OUTLET CLUSTER table contains the name s of user defined outlet clusters. Entries to this table are made when an administrator creates an outlet cluster.

The second table is the USER OUTLETCLUSTER ACCESS LINK table as shown in Table 9. This table may be used to determine which users have access to which outlet clusters.

The third table is the OUTCLUSTERS table of which Table 10 is exemplary. This table may be used to determine which outlets are in which clusters.

TRENDING tables may be used to log historical SNMP polling data. In this manner a user may monitor data trends view or print reports or take appropriate action based on a trend. A user may provide configuration information in some cases via an initialization or .ini file to specify how often SNMP polling should occur.

USERS tables may be used to specify what users have what authorizations to access data in other tables or change device parameters.

DISCOVERY tables may contain specific IP addresses IP address ranges or other information that enables an RPM application to discover systems towers infeeds outlets or other devices.

GRAPHICAL DISPLAY tables may contain graphics or formatting information that are used to convey e.g. display any or all of the data contained in the tables to a user.

ALERT tables may contain information such as thresholds at which a user should be alerted that a parameter has changed. ALERT tables may also specify actions to be taken when an alert needs to be generated.

REPORT tables may contain formatting information for generating reports. The reports may be based on any or all of the parameters contained in other tables. Some or all of the reports may be configurable.

As described above a graphical user interface may include one or more depictions of geographical locations to show the locations of various CDUs in a given power distribution system. The interface may further provide photographs of these various locations in whatever degree of detail may be desired by users of the power management system. Such photographs may depict one or more equipment racks including icons to indicate rack status. Both a geographic location and a depiction of a rack may be color coded or may include a color coded icon based on status.

Information from one or more tables for example the SYSTEM TOWER INFEED and OUTLET tables may be used to provide a listing of towers or other PDUs infeeds and outlets associated with a selected rack. For each infeed and outlet a status is provided. Load voltage and power readings are provided for an infeed. Hyperlinks for turning each outlet ON or OFF and for REBOOTing are also provided. The tower infeed and outlets may each be configured with a custom name as specified by a user.

A user may view a summary of statuses of various devices in a system. For example an alarms listing may be generated from the tables to show which elements of the system are not in a normal status and to describe the nature of the abnormality. In similar fashion a user may be provided with a listing of environmental conditions at various ones of the CDUs.

A user may also view a listing of clusters together with any desired information about each cluster. As with other listings a cluster listing may give the user various command options such as Turn On all outlets in the cluster Turn Off all outlets in the cluster or Reboot .

Information from the tables for example the TREND table may be used to illustrate trends between starting and ending dates and times of interest. The user may select the type of trend data to be viewed such as temperature humidity infeed load infeed voltage infeed power system watts per unit area of a location or a cabinet or total system power usage.

The embodiments described above may be implemented using various software and hardware resources. Typically however a power manager such as the RPM and database will be implemented by means of computer readable program code stored on computer readable media. The computer readable media may include for example any number or mixture of fixed or removable media such as one or more fixed disks random access memories RAMs read only memories ROMs or compact discs at either a single location or distributed over a network. The computer readable code will typically comprise software but could also comprise firmware or a programmed circuit.

Those of skill will appreciate that the various illustrative logical blocks modules circuits and algorithm steps described in connection with the embodiments disclosed herein may be implemented as electronic hardware computer software firmware or combinations thereof. To clearly illustrate this interchangeability various illustrative components blocks modules circuits and steps have been described above generally in terms of their functionality. Whether such functionality is implemented as hardware software and or firmware depends upon the particular application and design constraints imposed on the overall system. Skilled artisans may implement the described functionality in varying ways for each particular application but such implementation decisions should not be interpreted as causing a departure from the scope of the present invention.

For a hardware implementation the processing units may be implemented within one or more application specific integrated circuits ASICs digital signal processors DSPs digital signal processing devices DSPDs programmable logic devices PLDs field programmable gate arrays FPGAs processors controllers micro controllers microprocessors electronic devices other electronic units designed to perform the functions described herein or a combination thereof. For a firmware and or software implementation the methodologies may be implemented with modules e.g. procedures functions and so on that perform the functions described herein.

Processor generally represents any type or form of processing unit capable of processing data or interpreting and executing instructions. In certain embodiments processor may receive instructions from a software application or module. These instructions may cause processor to perform the functions of one or more of the exemplary embodiments described and or illustrated herein. For example processor may perform and or be a means for performing either alone or in combination with other elements one or more of the identifying transmitting receiving determining selecting and using steps described herein. Processor may also perform and or be a means for performing any other steps methods or processes described and or illustrated herein.

System memory generally represents any type or form of volatile or non volatile storage device or medium capable of storing data and or other computer readable instructions. Examples of system memory include without limitation random access memory RAM read only memory ROM flash memory or any other suitable memory device. Although not required in certain embodiments computing system may comprise both a volatile memory unit such as for example system memory and a non volatile storage device such as for example primary storage device as described in detail below .

In certain embodiments exemplary computing system may also comprise one or more components or elements in addition to processor and system memory . For example computing system may comprise a memory controller an Input Output I O controller and a communication interface each of which may be interconnected via a communication infrastructure . Communication infrastructure generally represents any type or form of infrastructure capable of facilitating communication between one or more components of a computing device. Examples of communication infrastructure include without limitation a communication bus such as an ISA PCI PCIe or similar bus and a network.

Memory controller generally represents any type or form of device capable of handling memory or data or controlling communication between one or more components of computing system . For example in certain embodiments memory controller may control communication between processor system memory and I O controller via communication infrastructure . In certain embodiments memory controller may perform and or be a means for performing either alone or in combination with other elements one or more of the steps or features described and or illustrated herein such as identifying transmitting receiving determining selecting and using.

I O controller generally represents any type or form of module capable of coordinating and or controlling the input and output functions of a computing device. For example in certain embodiments I O controller may control or facilitate transfer of data between one or more elements of computing system such as processor system memory communication interface display adapter input interface and storage interface . I O controller may be used for example to perform and or be a means for performing either alone or in combination with other elements one or more of the identifying transmitting receiving determining selecting and using steps described herein. I O controller may also be used to perform and or be a means for performing other steps and features set forth in the instant disclosure.

Communication interface broadly represents any type or form of communication device or adapter capable of facilitating communication between exemplary computing system and one or more additional devices. For example in certain embodiments communication interface may facilitate communication between computing system and a private or public network comprising additional computing systems. Examples of communication interface include without limitation a wired network interface such as a network interface card a wireless network interface such as a wireless network interface card a modem and any other suitable interface. In at least one embodiment communication interface may provide a direct connection to a remote server via a direct link to a network such as the Internet. Communication interface may also indirectly provide such a connection through for example a local area network such as an Ethernet network a personal area network a telephone or cable network a cellular telephone connection a satellite data connection or any other suitable connection.

In certain embodiments communication interface may also represent a host adapter configured to facilitate communication between computing system and one or more additional network or storage devices via an external bus or communications channel. Examples of host adapters include without limitation SCSI host adapters USB host adapters IEEE 1694 host adapters SATA and eSATA host adapters ATA and PATA host adapters Fibre Channel interface adapters Ethernet adapters or the like. Communication interface may also allow computing system to engage in distributed or remote computing. For example communication interface may receive instructions from a remote device or send instructions to a remote device for execution. In certain embodiments communication interface may perform and or be a means for performing either alone or in combination with other elements one or more of the identifying transmitting receiving determining selecting and using steps disclosed herein. Communication interface may also be used to perform and or be a means for performing other steps and features set forth in the instant disclosure.

Computing system may also comprise at least one display device coupled to communication infrastructure via a display adapter . Display device generally represents any type or form of device capable of visually displaying information forwarded by display adapter . Similarly display adapter generally represents any type or form of device configured to forward graphics text and other data from communication infrastructure or from a frame buffer as known in the art for display on display device .

Exemplary computing system may also comprise at least one input device coupled to communication infrastructure via an input interface . Input device generally represents any type or form of input device capable of providing input either computer or human generated to exemplary computing system . Examples of input device include without limitation a keyboard a pointing device a speech recognition device or any other input device. In at least one embodiment input device may perform and or be a means for performing either alone or in combination with other elements one or more of the identifying transmitting receiving determining selecting and using steps disclosed herein. Input device may also be used to perform and or be a means for performing other steps and features set forth in the instant disclosure.

Exemplary computing system may also comprise a primary storage device and a backup storage device coupled to communication infrastructure via a storage interface . Storage devices and generally represent any type or form of storage device or medium capable of storing data and or other computer readable instructions. For example storage devices and may be a magnetic disk drive e.g. a so called hard drive a floppy disk drive a magnetic tape drive an optical disk drive a flash drive or the like. Storage interface generally represents any type or form of interface or device for transferring data between storage devices and and other components of computing system .

In certain embodiments storage devices and may be configured to read from and or write to a removable storage unit configured to store computer software data or other computer readable information. Examples of suitable removable storage units include without limitation a floppy disk a magnetic tape an optical disk a flash memory device or the like. Storage devices and may also comprise other similar structures or devices for allowing computer software data or other computer readable instructions to be loaded into computing system . For example storage devices and may be configured to read and write software data or other computer readable information. Storage devices and may also be a part of computing system or may be a separate device accessed through other interface systems.

In certain embodiments the exemplary file systems disclosed herein may be stored on primary storage device while the exemplary file system backups disclosed herein may be stored on backup storage device . Storage devices and may also be used for example to perform and or be a means for performing either alone or in combination with other elements one or more of the identifying transmitting receiving determining selecting and using steps disclosed herein. Storage devices and may also be used to perform and or be a means for performing other steps and features set forth in the instant disclosure.

Many other devices or subsystems may be connected to computing system . Conversely all of the components and devices illustrated need not be present to practice the embodiments described and or illustrated herein. The devices and subsystems referenced above may also be interconnected in different ways from that shown. Computing system may also employ any number of software firmware and or hardware configurations. For example one or more of the exemplary embodiments disclosed herein may be encoded as a computer program also referred to as computer software software applications computer readable instructions or computer control logic on a computer readable medium. The phrase computer readable medium generally refers to any form of device carrier or medium capable of storing or carrying computer readable instructions. Examples of computer readable media include without limitation transmission type media such as carrier waves and physical media such as magnetic storage media e.g. hard disk drives and floppy disks optical storage media e.g. CD or DVD ROMs electronic storage media e.g. solid state drives and flash media and other distribution systems.

The computer readable medium containing the computer program may be loaded into computing system . All or a portion of the computer program stored on the computer readable medium may then be stored in system memory and or various portions of storage devices and . When executed by processor a computer program loaded into computing system may cause processor to perform and or be a means for performing the functions of one or more of the exemplary embodiments described and or illustrated herein. Additionally or alternatively one or more of the exemplary embodiments described and or illustrated herein may be implemented in firmware and or hardware. For example computing system may be configured as an application specific integrated circuit ASIC adapted to implement one or more of the exemplary embodiments disclosed herein.

As illustrated one or more storage devices N may be directly attached to server . Similarly one or more storage devices N may be directly attached to server . Storage devices N and storage devices N generally represent any type or form of storage device or medium capable of storing data and or other computer readable instructions. In certain embodiments storage devices N and storage devices N may represent network attached storage NAS devices configured to communicate with servers and using various protocols such as NFS SMB or CIFS.

Servers and may also be connected to a storage area network SAN fabric . SAN fabric generally represents any type or form of computer network or architecture capable of facilitating communication between a plurality of storage devices. SAN fabric may facilitate communication between servers and and a plurality of storage devices N and or an intelligent storage array . SAN fabric may also facilitate via network and servers and communication between client systems and and storage devices N and or intelligent storage array in such a manner that devices N and array appear as locally attached devices to client systems and . As with storage devices N and storage devices N storage devices N and intelligent storage array generally represent any type or form of storage device or medium capable of storing data and or other computer readable instructions.

In certain embodiments and with reference to exemplary computing system a communication interface such as communication interface may be used to provide connectivity between each client system and and network . Client systems and may be able to access information on server or using for example a web browser or other client software. Such software may allow client systems and to access data hosted by server server storage devices N storage devices N storage devices N or intelligent storage array . Although the figure depicts the use of a network such as the Internet for exchanging data the embodiments described and illustrated herein are not limited to the Internet or any particular network based environment.

In at least one embodiment all or a portion of one or more of the exemplary embodiments disclosed herein may be encoded as a computer program and loaded onto and executed by server server storage devices N storage devices N storage devices N intelligent storage array or any combination thereof. All or a portion of one or more of the exemplary embodiments disclosed herein may also be encoded as a computer program stored in server run by server and distributed to client systems and over network . Accordingly network architecture may perform and or be a means for performing either alone or in combination with other elements one or more of the identifying transmitting receiving determining selecting and using steps disclosed herein. Network architecture may also be used to perform and or be a means for performing other steps and features set forth in the instant disclosure.

As detailed above computing system and or one or more of the components of network architecture may perform and or be a means for performing either alone or in combination with other elements one or more steps of the exemplary methods described and or illustrated herein. For example a computer implemented method for determining a file set may comprise identifying a file set. The method may also comprise identifying a key file for the file set. A first computing system may comprise the file set. The method may further comprise transmitting a key file identifier to a second computing system the key file identifier identifying the key file. The first computing system may receive the first and second file identifiers from the second computing system. The first file identifier may be associated with a first file identifier set. The second file identifier may be associated with a second file identifier set. The key file identifier may be associated with both the first file identifier set and the second file identifier set. The method may comprise determining whether the file set comprises a file identified by the first file identifier and whether the file set comprises a file identified by the second file identifier. The first computing system may transmit a result of the determination to the second computing system.

In certain embodiments identifying a file set may comprise selecting a file directory selecting a group of files within a directory selecting files associated with a computer program and selecting a plurality of files contained on a file storage device. In an additional embodiment the key file may be a randomly selected file within the file set.

In at least one embodiment determining a file set may further comprise identifying a set of key files from the file set. The first computing system may comprise the file set. Determining a file set may further comprise transmitting a set of key file identifiers to the second computing system wherein each key file identifier in the set of key file identifiers identifies a file in the set of key files. The method may also comprise receiving a plurality of file identifiers from the second computing system wherein each file identifier in the plurality of file identifiers is associated with a different file identifier set. The first computing system may determine which files identified by the plurality of file identifiers are contained within the file set.

In certain embodiments the key file identifier may comprise at least one of a file name of the key file a version number of the key file and a hash of the key file. The key file identifier may also comprise a file size of the key file a name of a directory where the key file is stored on the first computing system and a system identifier for the first computing system.

In additional embodiments wherein each of receiving the first and second file identifiers determining whether the file set comprises the files identified by the first and second identifiers and transmitting the result of the determination may be repeated. The aforementioned steps are repeated until the result provides the second computing system with enough information to identify the file set or the first computing system receives an unknown file set indication. In a further embodiment the result of the determination may comprise a system identifier for the first computing system the key file identifier the first file identifier and or the second file identifier.

A computer implemented method for determining a file set may comprise receiving a key file identifier from a first computing system the key file identifier identifying a key file associated with the file set. The second computing system may also identify first and second file identifier sets associated with the key file. The method further comprises identifying a first file identifier in the first file identifier set and identifying a second file identifier in the second file identifier set. The second computing system may transmit the first and second file identifiers to the first computing system. The method also comprises receiving a result from the first computing system the result being based on a comparison of the first and second file identifiers with the file set. The second computing system may use the result to identify the file set.

In an additional embodiment a computer implemented method for determining a file set may comprise a file set database. The file set database may comprise at least one of a table of file names a table of file versions a table of file hashes a table of file directories a table of file sets a table of associations of files to file sets. In certain embodiments identifying a first and second file identifier for the first and second file identifier set may comprise determining that the first file identifier is not in the second file identifier set and determining that the second file identifier is not in the first file identifier set.

In certain embodiments a computer implemented method for determining a file set may further comprise receiving a set of key file identifiers from the first computing system. The method may also comprise identifying a plurality of file identifier sets associated with the set of key files and identifying file identifiers associated with the plurality of file sets. In a further embodiment an identifier for the key file may comprise at least one of a file name of the key file a version number of the key file a hash of the key file a file size of the key file a name of a directory where the key file is stored on the first computing system. In an additional embodiment the result may comprise a system identifier for the first computing system the key file identifier the first file identifier the second file identifier.

In certain embodiments wherein identifying the first and second file identifiers for the first and second file set transmitting the first and second file to the first computing system and receiving a result is repeated. The aforementioned method is repeated until the result contains enough information to identify the file set or the result contains data that exceeds a file set identifier threshold. In a further embodiment the file set identifier threshold may comprise a ratio of the number of total file identifiers transmitted to the first computing system. The file set identifier threshold may also comprise the number of file sets associated with the key file and a number of transmissions between the first computing system and the second computing system where the transmissions contain information to identify the file set. In an additional embodiment an unknown file set indication is transmitted to the first computing system.

In an additional embodiment the key file identifier is transmitted to the first computing system. In a further embodiment identifying the file set from the result may comprise identifying a file identifier set containing the identifier for the key file and identifying a file identifier set containing a file identifier transmitted in the result.

In certain embodiments a computer readable medium may comprise one or more computer executable instructions that when executed by a computing system cause the computing system to identify a file set identify a key file for the file set a first computing system comprising the file set transmit a key file identifier to a second computing system the key file identifier identifying the key file receive first and second file identifiers from the second computing system a first file identifier being associated with a first file identifier set a second file identifier being associated with a second file identifier set and the key file identifier being associated with both the first file identifier set and the second file identifier set determine at least one of whether the file set comprises a file identified by the first file identifier and whether the file set comprises a file identified by the second file identifier transmit a result of the determination to the second computing system 

In an additional embodiment one or more computer executable instructions when executed by the computing device further cause the computing device to identify a set of key files from the file set the first computing system comprising the file set transmit a set of key file identifiers to the second computing system wherein each key file identifier in the set of key file identifiers identifies a file in the set of key files receive a plurality of file identifiers from the second computing system wherein each file identifier in the plurality of file identifiers is associated with a different file identifier set determine which files identified by the plurality of file identifiers are contained within the file set.

While the foregoing disclosure sets forth various embodiments using specific block diagrams flowcharts and examples each block diagram component flowchart step operation and or component described and or illustrated herein may be implemented individually and or collectively using a wide range of hardware software or firmware or any combination thereof configurations. In addition any disclosure of components contained within other components should be considered exemplary in nature since many other architectures can be implemented to achieve the same functionality.

The process parameters and sequence of steps described and or illustrated herein are given by way of example only and can be varied as desired. For example while the steps illustrated and or described herein may be shown or discussed in a particular order these steps do not necessarily need to be performed in the order illustrated or discussed. The various exemplary methods described and or illustrated herein may also omit one or more of the steps described or illustrated herein or include additional steps in addition to those disclosed.

Furthermore while various embodiments have been described and illustrated herein in the context of fully functional computing systems one or more of these exemplary embodiments may be distributed as a program product in a variety of forms regardless of the particular type of computer readable media used to actually carry out the distribution. The embodiments disclosed herein may also be implemented using software modules that perform certain tasks. These software modules may include script batch or other executable files that may be stored on a computer readable storage medium or in a computing system. In some embodiments these software modules may configure a computing system to perform one or more of the exemplary embodiments disclosed herein.

The preceding description has been provided to enable others skilled in the art to best utilize various aspects of the exemplary embodiments disclosed herein. This exemplary description is not intended to be exhaustive or to be limited to any precise form disclosed. Many modifications and variations are possible without departing from the spirit and scope of the instant disclosure. The embodiments disclosed herein should be considered in all respects illustrative and not restrictive. Reference should be made to the appended claims and their equivalents in determining the scope of the instant disclosure.

Unless otherwise noted the terms a or an as used in the specification and claims are to be construed as meaning at least one of. In addition for ease of use the words including and having as used in the specification and claims are interchangeable with and have the same meaning as the word comprising. 

A system architecture that embodies the principles of the invention makes possible the collection of power information at the individual outlet CDU group and cluster level and the placing of this information into a database.

Power for example in kilowatts and power consumption for example in kilowatt hours can be provided in many different ways including for example per cabinet per row of cabinets per multiple rows of cabinets per data center or multiple data centers per device or application or even per outlet. This information is collected over a network and stored within a database for example as described above. The collection period may be defined by a user. The information can made the subject of a trend analysis a log a report a billing invoice or the like. The information can be exported to a building management system BMS or any other system in a data center environment.

The information and control provided by embodiments of the invention can be used for example by a data center operator to associate and allocate or trend power data to individual users departments or applications. Billing can be accomplished per data center per server owner per application or even according to the time of day. In an enterprise data center an individual department for example the accounting department can be billed for the cost of their application running within their own datacenter. In a co location facility customers call be billed for the power usage of just their devices within a shared rack. An enterprise data center can schedule work according to the cost per kW depending on the time of day.

A business entity can measure energy efficiency to meet requirements that may be imposed by government agencies for example as discussed in Appendices B through G.

Monitoring and logging outlet power data can identify abnormal power supply behavior so the affected IT assets can be identified for preventive maintenance actions to reduce downtime. For example a large spike in current draw could be used to inform a user that a power supply has failed or is about to fail.

It has been estimated that as many as 20 of all installed servers are under utilized or not performing active work embodiments of the invention enables a user to identify these IT assets and turn them off improving data center utilization and reducing energy costs. Also the ability to reclaim under utilized assets has the potential to defer the requirement to construct new data center facilities significantly reducing capital expenditures. Virtualization applications such as VM Ware allow applications to be moved to under utilized servers allowing servers to be powered off in off peak hours.

Efficiency can also be improved by using power consumption data to operate each server at its optimal efficiency this is sometimes called the sweet spot . Current drawn by a server can also indicate that a reboot is required.

IT asset information power environmental etc. can be exported to a building manager or building management system. In a typical data center there are two primary consumers of power the infrastructure that provides cooling generators uninterruptible power and the like and the IT assets such as servers routers network storage and the like. To achieve maximum efficiency power data are needed respecting both of these consumers. By collecting and logging all outlet power data and writing this information to the power manager database this information can be exported to the building management system using BMS networks such as MODBUS BACnet or the like.

As shown in two Power Distribution Units PDUs and may be grouped under a single IP address. In the embodiment shown this is accomplished by a cable between the two PDUs. In other embodiments more than two PDUs may be grouped under a single IP address. One group can encompass for example a plurality of outlets serving one device or one application several devices or a cabinet particularly if only two PDUs are installed in the cabinet.

As shown in a first plurality of PDUs and are grouped together to form a group under a single IP address. Similarly a second plurality of PDUs and form a group under a single IP address a third plurality and form a group and a fourth plurality and form a group . Two or more of these groups and in turn can form a cluster. Outlets can be clustered in many ways for example within a cabinet across several cabinets or several rows of cabinets in a single data center across multiple data centers for one device or application or a plurality of applications.

A screen shot as shown in illustrates an embodiment of the invention. A screen frame generally encloses a window area on the top and left sides. The frame includes a horizontal bar across the top of the screen and a vertical bar along the left side of the screen.

The horizontal bar includes a tab for selecting a Cabinet Distribution Unit CDU a tab for Reports a tab for Configuration a tab for Help and a tab for Views.

The vertical bar along the left side of the screen indicates the status and access level of a user which are admin and administrator respectively in the depicted screen shot. Next is a status indicator window showing how many monitored locations are in each possible state for example critical warning unreachable normal and maintenance. In the depicted screen shot one location is in critical status three are in warning status none are unreachable six are in normal status and none are in maintenance.

A select a view control enables a user to bring up a view of desired data for example power load in amps per outlet location CDU cabinet or the like power load in watts temperature or humidity including current highest or lowest readings power capacity indicating how much power is being used compared with how much is available and whether another server or other device can be powered in the same cabinet.

Below the status indicator window is a search window into which a user can enter a search criterion. At the bottom of the bar is a logout button and a home view button for displaying a previously selected background image.

The window area depicts a world map generally with a location of a power distribution unit being monitored by a power management system embodying the principles of the invention. In the figure the indicated location is in the United States but it will be apparent that other locations could be depicted. A location control allows a choice of a map of the entire world a region of the world a country a state or province a locality or the like as desired. The selected map will then display locations of any system PDUs within the region depicted by the map.

Below the world map is a color legend indicating which colors are associated with each state. For example one color could be used to depict critical status another to depict warning status and other colors for unreachable normal or maintenance status. A symbols legend includes a circle to indicate a location a triangle to indicate a cabinet and a rectangle to indicate a CDU. Thus a triangle in red might indicate a cabinet in critical status whereas a rectangle in green might indicate a CDU in normal status.

The Views tab provides at a glance monitoring of data center locations CDUs and cabinets using colored icons. The CDU tab allows editing of CDUs outlets environmental monitors and groups and clusters. The Reports tab allows generation of user defined trend and log reports. The Configuration tab which may also be titled setup and configuration provides custom configuration of the overall power management system including discovery of networked CDUs. The Help tab gives various kinds of information such as contact information links to a vendor website updates of software keys etc.

The user can select various tables or other information for viewing in the window area. For example in the screen shot shown in a table is displayed in the window area . The table depicts what could be either a group or a cluster named Motors and having an IP address 66.214.208.94. Motors has three outlets Device2 Device3 and Device4. For each outlet the load power status system name and system IP address are given. In this instance all three outlets are off so they have N A load and power. All three are identified with the same system name and IP address. At the lower left of the window is a user operable control that enables the user to turn all the outlets on or off or to reboot. At the lower right of the window is a user operable control to apply or cancel whatever changes have been made to the table .

name IP address status location cabinet and NIC serial number for each item having a status indication a user can set or remove maintenance mode for any item 

status load power voltage control state and the like for each CDU or enclosure together with a control for a user to initiate action with respect to any or all outlets 

a list of CDU names with IP addresses SNMP Get and Set for example public or private cabinet names locations and similar information 

a list of outlets CDUs cabinets clusters or locations with provision for a user to testreboot testreg or testview for any or all listed items 

for a selected outlet or outlets the outlet name identification status control state capacity in amps load in amps voltage active power in watts apparent power in volt amps crest factor and power factor. Each listing can have a details tab by which a user can request more details respecting a particular outlet 

power monitoring of input feeds for example separately for each CDU or PDU including status of the input feed input load input voltage and input power being drawn. The input load and power may be cumulative for example by phase or branch 

power monitoring of a facility by area expressed as total power consumed for an area or as power consumer per unit of area such as per square meter and

graphical displays of trends such as a graph indicating any of temperature humidity other environmental indicators power usage and any other data being monitored by the power management system such graphical displays may be used to correlate amongst the plotted quantities.

a Configure LDAP Options workspace with user inputs for LDAP primary host secondary host port whether to use TLS SSL bind type search bind DN search bind password user search base DN user search filter group membership attribute group membership value type authentication order and the like.

an Add New Location workspace with user inputs for name and filename together with a list of location names and images and a provision for enabling or deleting each entry 

an Add New User or Change Password workspace with user inputs for name and password and group identification of a new user and a list of user names together with their respective groups and a provision for deleting any 

a Configure E Mail Delivery of Selected SPM Logs workspace with user inputs for SMTP Host Name or IP address SMPT port e mail From address primary and secondary e mail To addresses and selections of log categories to send via e mail such as discovery status user logons user actions and alarm status 

a Setup a Discovery workspace with user inputs for discovery starting and ending IP addresses SNMP Get and Set community strings FTP user name and password and Initiate and Cancel CDU Discovery control buttons 

a first Add New Cabinet workspace with user inputs for name area and location provision for a list of cabinets and an option to delete any of them and a second Add New Cabinet workspace with user inputs for IP address SNMP Get and Set community strings FTP user name and password and an Add CDU control button 

an Add New Group or Change Type workspace with user inputs for name and type such as regular user admin user view only user and reboot only user and a list of existing groups with provisions for changing type or deleting any of them 

a Enter Report Parameters workspace with user inputs for report type billing level location being reported on any or all start and end dates and format and a generate report control 

a View Trends workspace with user inputs for start and end dates and trend type and a view trends control button 

a workspace that includes a system host name entry for each of a plurality of network ports an IP address a subnet mask a gateway and a selection of obtaining an IP address automatically or by manual entry or disabling the port adapter and a web port entry and

a workspace that enables a user to set load thresholds per outlet per PDU per CDU etc. and to request an automatic alert by SNMP trap or e mail if a threshold is exceeded.

In the window area a user can display a report. The user can select a date or a range of dates. The report can display a list of user names and for each an IP address an event time giving date hour minute and second and a description of what happened. Some examples of event descriptions include 

discovery process completed for IP addresses X through Y systems discovered and successfully added 2 systems discovered but already in the system zero systems discovered but not added successfully.

Under the reports tab a user can select for example billing reports trends or logs . Logs in turn could be for example discovery user login user actions and alarm status .

A power management system embodying principles of the invention includes one or more Cabinet Distribution Units CDUs each having a plurality of outlets having monitoring circuitry and facilities as described above. Thus one or more Power Distribution Units PDUs located in one equipment rack are together considered as a CDU. This configuration enables rack level power management input and outlet power monitoring grouping of outlets environmental monitoring and generation of alarms. The CDUs communicate via the Internet with a power management appliance for example a computer server with a database. The server may in turn communicate with a Building Management System BMS . Through an Internet based interface the power management system provides enterprise cabinet power management reports and trends device monitoring grouping and clustering of outlets alarms kilowatt readings for billing and auto discovery of CDUs.

There may be one or many equipment racks in a given physical location. Typically the PDUs in each rack might be assigned to one CDU although a CDU might also include PDUs in more than one rack or more than one CDU might be associated with a single rack. The CDUs in one physical location might be given one or several IP addresses.

A server in a rack might be designed to draw power from two different power supplies. Two PDUs might be used and the server might connect to one or more outlets in each PDU for its power. Each PDU might contain temperature and humidity sensors an IP connection and a serial connection either of which might be used for outlet control and a link port.

IP access can be accomplished by web interface SSL SSH Telnet SNMP RS 232 access 10 100 Base T Ethernet SSLv3 TLSv1 SNMPv2 TACACS LDAP LDAPS RADIUS DHCP SMTP Email Syslog and the like.

A power management system embodying aspects of the invention is illustrated in . A first equipment cabinet houses components and . Also in the cabinet are a first CDU and a second CDU . The CDUs are shown outside of and larger than the cabinet for convenience. Each CDU is similar to the CDU depicted in . The component is shown both installed within and outside of the cabinet. The component draws power from both CDUs as indicated by a cord connecting the component to an outlet in the first CDU and a cord connecting the component to an outlet in the second CDU . Others of the components may be connected to one or both of the CDUs as desired.

Similarly a second equipment cabinet houses various components and one or more CDUs that provide power to these components. The system may include other equipment cabinets having more or fewer components or CDUs than depicted in the drawing.

The CDUs in the various cabinets communicate for example through an Ethernet pipeline or through the Internet or some other suitable medium with a server . The server includes a database which may be stored in a memory or on a magnetic disk or other medium. The database may be located in one place or distributed as desired. In some embodiments the server communicates with another system such as a Building Management System .

Various views of the system and various reports from individual outlet level to overall system level as described above may be generated and displayed for example in a window area enclosed by a frame similar to those described above and illustrated in .

As discussed previously various electrical parameters respecting one or more of the outlets may be measured and used in managing power throughout the system. Current flow through each outlet voltage present at the outlets power factor phase power line frequency and the like may all be measured and the measurements communicated to the server for presentation to a user or for preparing reports generating messages providing trends and the like.

Attached hereto as Appendices B through G are reports illustrating application for which embodiments of the invention can be adapted there is no Appendix A . Appendix B is a report by the Environmental Protection Agency titled EPA Report on Server and Data Center Energy Efficiency . Appendix C is a Report to Congress on Server and Data Center Energy Efficiency by the Environmental Protection Agency. Appendix D is a report titled Four Metrics Define Data Center Greenness . Appendix E is a report titled Existing Metrics Guidelines and Programs Affecting Data Center and IT Energy Efficiency . Appendix F is a report titled The Green Grid Metrics Data Center Infrastructure Efficiency DCIE Detailed Analysis . Appendix G is a report titled Qualitative Analysis of Power Distribution Configurations for Data Centers .

The foregoing subject matter including the content of some of the appendices address the concept of Power Usage measurements for a data center as a whole. There may be granularity divided between cooling and power load . However these broad metrics do not allow the data center operator to dig below the surface.

The data center operator requires an ability to collect power data Power Usage measurement in a very granular manner. For example by equipment cabinet by application by user department by business unit and so on. Once this data is available in a granular form the data center operator can provide reports that may change behavior within department within business units etc.

Power Usage measurements have been provided by equipment cabinet. Grouping of this data written to the SPM Database as set forth above allows Power Usage report to be generated by groups of servers within a cabinet. Clustering allows this Power Usage data to consolidated by groups of servers across multiple cabinets. And it allows Power Usage to be measured by groups of servers installed in multiple data centers. For example an email service of a large enterprise may embody multiple servers installed in multiple data centers across the United States or even across the world.

The ability to group or cluster Power Usage measurements in the SPM data base provides the data center operator a new level of granularity to measure the Department that owns the email service and to point out through trending and logging how Power Usage can be reduced.

PIPS POPs and SPM are the instrumentation monitoring tools and recording tools that will permit a data center operator to improve effectiveness at the cabinet level at the dedicated client server level at the organization level and at the business unit level.

The phrase Per Outlet Power Sensing POPS refers to the concept of monitoring power consumption at each outlet as discussed above. With an Internet interface monitoring power consumption at each outlet provides detailed power information and allows grouping of outlets to determine kilowatt consumption per device group of devices CDU or cabinet. Power consumption can also be determined per rack rows of racks an entire data center or the like by clustering outlet information across multiple IP addresses and CDUs as discussed above. This can provide consolidated CDU information within a data center or across multiple locations a centralized location to view power and environmental status capacity planning reports and trends multiple views auto discovery of all CDU devices alarm details an ability to manage CDUs global or individual outlet control and logging.

The invention includes many unique aspects and points of novelty as disclosed in the foregoing specification and drawings. A partial list of these points of novelty includes the following. However this list is not all inclusive. Other points of novelty also exist. This list is not intended to limit the scope of the invention in any way. The invention is limited only by the claims. This list does not qualify or limit the claims in any way.

1 A CDU with power sensing circuitry including current transformer toroids that sense the AC current flowing through a conductor to each outlet of the CDU a voltage sense circuit that senses line voltage and a processor that receives signals from the toroids and voltage sense circuit to compute apparent power RMS power power factor and or other power related information.

2 A CDU comprising two or more printed circuit boards with aligned contacts that each provide separate functionality the CDU assembled with PCBs selected based on the desired functionality. The PCBs are assembled such that the appropriate contacts are lined up to provide a the desired functionality when fewer than all of the PCBs are required for a particular CDU functionality.

3 A CDU having an intelligent power module with a microprocessor and a circuit that senses line frequency of the power input. Clock drift in the microprocessor clock due to temperature fluctuations is corrected using the input power frequency sense.

4 A CDU having functional circuitry associated with each of a plurality of outputs the functional circuitry included on a printed circuit board that is oriented at about 90 degrees relative to the plane of the exterior side of the plurality of outputs.

5 A system comprising a power manager and a cabinet distribution unit CDU the CDU comprising a a plurality of outputs each comprising a current sense circuit b a voltage sense circuit and c a power reporting circuit that provides power related information for each output of the PDU to the power manager the power manager receiving the power related information and adjusting the power consumption of one or more components that receive power from the PDU.

6 A system comprising a power manager and a CDU the CDU comprising a a plurality of outputs and b a power reporting circuit that provides power related information for each output of the CDU to the power manager the power manager receiving power related information from at least two outputs at two different CDUs related to one component that receives power from the at least two outputs and compiling the power related information to determine power related information for the component.

7 A system comprising a power manager and a CDU the CDU comprising a a plurality of outputs and b a power reporting circuit that provides power related information for each output of the CDU to the power manager the power manager receiving power related information from at least two outputs at two different CDUs related to one component that receives power from the at least two outputs and compiling the power related information to determine power related information for the component.

8 A system comprising a power manager and a CDU the CDU comprising a a plurality of outputs and b a power reporting circuit that provides power related information for each output of the CDU to the power manager the power manager receiving power related information from at least two outputs from two or more CDUs related to an application that is running on two or more components that receive power from the at least two outputs and compiling the power related information to determine power related information for the application.

9 A power management system that provides assigning each outlet in any one location to a cabinet distribution unit in that location. At least one unique IP address may be associated with each location having one or more CDUs. If there are several CDUs at a given location each may get a separate IP address or a single IP address may be used for some or all of the CDUs at that location. Collecting power usage data respecting an outlet may be accomplished by communicating via the Internet with the IP address associated with the CDU containing that outlet.

10 A power management system with the ability to collect and provide trends related to components that receive power from one or more outputs trends including power temperature humidity and the ability to set triggers if limit thresholds are exceeded.

11 System that provides billing for power consumption for one or more discreet power consuming components within a data center.

12 Power management system that identifies low utilization or non utilized servers and initiates the shut down of these servers.

13 Power management system that identifies an optimal operating condition for a discrete component such as a server that receives power from a CDU and identifies one or more components that are less than optimal.

14 A method of managing electrical power including collecting power usage data indicative of electrical current flow through each of a plurality of electrical outlets displaying the power usage data to a user receiving a user initiated command to control current flow through any outlet selected by the user and controlling current flow through the selected outlet responsive to the command. Controlling current flow through an outlet may mean turning the outlet on or off. The user may initiate a command to reboot control circuitry associated with one or more of the outlets. Data indicative of environmental conditions such as temperature and humidity of the electrical outlets may be collected and displayed. A log of events and a report descriptive of a power usage trend may be generated. Outlets may be assigned to CDUs and an IP address may be associated with one or more CDUs. A CDU status for example critical changed normal no data maintenance or snooze may be displayed as may a graphical depiction of locations of CDUs. Available infeed power may be displayed. A message may be sent automatically if a defined event for example a temperature or humidity level is reached a set amount of electrical power is used at a location or by one or more CDUs or even a single outlet.

15 Outlets in different CDUs having different IP addresses may be clustered thereby allowing a user to view the status of and to control all outlets in the cluster.

17 Power and power consumption data can be provided per cabinet per row of cabinets per multiple rows of cabinets per data center or multiple data centers per device or application per outlet or in any other desired manner. This information can be used for trend analyses logs reports billing invoices or the like. The information can be exported to a building management system BMS or any other system in a data center environment.

18 A data center operator can associate and allocate or trend power data to individual users departments or applications. Billing can be accomplished per data center per server owner per application or time of day. An individual department can be billed for the cost of their application. Customers can be billed for the power usage of just their devices within a shared rack. Work can be scheduled according to the cost per kW depending on the time of day.

19 A business entity can measure energy efficiency to meet requirements that may be imposed by government agencies.

21 Applications can be moved to under utilized servers. Virtualization applications such as VM Ware allow servers to be powered off in off peak hours. IT assets not being used can be identified and turned off. The ability to reclaim under utilized assets can avoid or defer construction of new data center facilities.

22 Power consumption data can also be used to help operate each server at its optimal efficiency and reboot if needed.

23 IT asset information power environmental etc. can be exported to a building manager or building management system enabling assets to be managed more efficiently by collecting and logging all outlet power data and writing this information to the power manager database. Power management information can be exported to the building management system using BMS networks such as MODBUS BACnet or the like 

The previous description of the disclosed embodiments is provided to enable any person skilled in the art to make or use the present invention. Various modifications to these embodiments will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other embodiments without departing from the spirit or scope of the invention. Thus the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

