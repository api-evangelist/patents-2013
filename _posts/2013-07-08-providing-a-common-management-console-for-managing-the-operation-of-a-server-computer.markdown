---

title: Providing a common management console for managing the operation of a server computer
abstract: A method, system, apparatus, and computer-readable medium for providing a common management console for managing the pre- and post-operating system operation of a computer system are provided. The method includes: receiving, at a management appliance, first and second requests from one or more remote management consoles to manage first and second server computers, respectively; receiving first and second remote console data formatted according to first and second remote console protocols from the first and second server computers, respectively; converting, at the management appliance, the received first and second remote console data to first and second converted remote console data, respectively, in a common format in accordance with a common protocol capable of expressing the first and second remote console protocols; and transmitting the first and second converted remote console data in the common format to the remote management console for display.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08966048&OS=08966048&RS=08966048
owner: American Megatrends, Inc.
number: 08966048
owner_city: Norcross
owner_country: US
publication_date: 20130708
---
This application is a continuation of U.S. patent application Ser. No. 11 473 669 filed on Jun. 23 2006. The disclosure of the above application is incorporated herein by reference in its entirety.

A keyboard video mouse KVM switch is a hardware device that allows a single keyboard video monitor and mouse input device to control more than one computer. KVM switches are typically connected to each of the computers to be controlled using a keyboard cable a video cable and a mouse cable. In traditional installations a local computer is also connected to the KVM switch with a keyboard cable a video cable and a mouse cable. Through the local computer a user can control any of the other computers connected to the KVM switch. The KVM switch provides functionality for specifying which of the connected computers are controlled by the local computer. KVM switches are commonplace in server installations where it is only necessary to periodically access each separate server computer at a time. In this manner none of the server computers are required to have their own dedicated keyboard video monitor or mouse.

More advanced KVM switches connect to a local or wide area network WAN rather than to a local computer. Through the network connection the user of a remote computer can connect to the KVM switch and control any of the connected computers. These types of KVM switches are referred to as KVM over internet protocol KVMoIP switches. KVMoIP switches generally include a dedicated microcontroller and video capture hardware to capture the video signals generated by the controlled computer to compress and packetize the video signals and to send the compressed data over the network to the remote computer. The video data is then decompressed and displayed at the remote computer. Keyboard and mouse signals are transferred to the KVMoIP switch from the remote computer in a similar manner.

The main benefit of KVMoIP switches is that they allow access to the computers connected to the KVMoIP switch even before the computers have booted an operating system. For instance through a KVMoIP switch the power on self test POST and basic input output system BIOS of a connected computer may be viewed accessed and controlled. Because KVMoIP switches do not require any software or special hardware on the connected computers they are referred to as out of band solutions.

Although KVMoIP switches do provide several benefits over traditional KVM switches these switches are not without their drawbacks. The first drawback stems from the fact that it is necessary for a separate keyboard cable video cable and mouse cable to be utilized between the KVMoIP switch and every connected computer. These cables are expensive and in large server installations add to already complex wiring. The second problem with KVMoIP switches stems from the fact that these devices must capture compress and transmit the video output of the connected computers. In many cases the computers are connected to the KVMoIP switch through an analog video signal. In this configuration it is especially difficult to meaningfully compress an analog video signal that typically contains noise and other artifacts. Even where the video signal is digital the compression process still requires considerable processing capacity within the KVMoIP switch which can be expensive and also generates undesirable heat.

One alternative to KVMoIP switches for remotely controlling the operation of computer systems are remote graphical console software packages. These solutions utilize server software executing on the controlled computer to capture video screen application programming interface API calls and to transmit them to a client application executing on the remote computer. The client application then replays the API calls so that the display is shown at the remote computer. Remote graphical console software packages also transmit keyboard and mouse data between the controlled computer and the remote computer so that a user can interact with the controlled computer as if she was located proximately to the controlled computer. Because remote graphical console software packages do require the installation and execution of software on the controlled computer these solutions are referred to as in band solutions.

While in band solutions do not require the costly cables or hardware of out of band solutions these solutions are also not without their drawbacks. In particular the main problem with in band solutions is that they do not allow access to or control of the connected computers prior to the loading of the operating system and the remote graphical console server software. This is because software based remote graphical console applications require the operating system to boot and to load a driver before video can be redirected. This means that access to POST and BIOS screens of the connected computers is not possible using out of band solutions. This is a significant limitation for system administrators responsible for managing installations of server computers.

It is with respect to these considerations and others that the various embodiments described below have been made.

Certain aspects of the present disclosure are directed to a method for providing a common management console for managing the pre and post operating system operation of server computers. The method includes receiving at a management appliance first and second requests from one or more remote management consoles to manage first and second server computers respectively establishing a network connection between the management appliance and the first and second server computers respectively receiving first and second remote console data from the first and second server computers via the network connections respectively wherein the first and second remote console data are formatted according to first and second remote console protocols respectively wherein the first and second remote console protocols are different from each other converting at the management appliance the received first and second remote console data to first and second converted remote console data respectively in a common format in accordance with a common protocol capable of expressing the first and second remote console protocols and transmitting the first and second converted remote console data in the common format to the remote management console for display.

In certain embodiments the first remote console protocol is the remote desktop protocol RDP . In certain embodiments the second remote console protocol is the virtual network computing protocol VNC . In certain embodiments the method further includes receiving at the management appliance third remote console data in accordance with the serial over local area network text protocol from a third server computer and converting the third remote console data to third converted remote console data in the common format.

Certain aspects of the present disclosure are directed to a computer readable medium having computer executable instructions stored thereon which when executed by a computer cause the computer to perform the above methods.

Certain aspects of the present disclosure are directed to a computer controlled apparatus capable of performing the above methods.

Certain aspects of present disclosure are directed to an apparatus for providing a common management console for managing the pre and post operating system operation of server computers. The apparatus includes a processor a network port and a non volatile memory storing program code when executed by the processor causing the apparatus to establish network connections to first and second server computers via the network port receive first and second remote console data from the first and second server computers via the network connections respectively. The first and second remote console data are formatted according to first and second remote console protocols respectively. The first and second remote console protocols are different from each other. The program code further causes the apparatus to convert the received first and second remote console data to first and second converted remote console data respectively in a common format in accordance with a common protocol capable of expressing the first and second remote console protocols and transmit the first and second converted remote console data in the common format to a remote management console for display.

In certain embodiments the first remote console protocol is the remote desktop protocol RDP . In certain embodiments the second remote console protocol is the virtual network computing protocol VNC . In certain embodiments the program code when executed by the processor further causes the apparatus to receive at the management appliance third remote console data in accordance with the serial over local area network text protocol from a third server computer and convert the third remote console data to third converted remote console data in the common format.

In certain embodiments the remote management console comprises a computer system operative to execute a remote management software application. The remote management software application is operative to receive the converted remote console data formatted according to the common protocol to decode the converted remote console data and to display the remote console data in a single graphical user interface window.

In certain embodiments the program code when executed by the processor further causes the apparatus to discover server computers including the first second and third server computers and capable of being managed through the apparatus and to provide information identifying the discovered server computers to the remote management console.

In certain embodiments the third server computer comprises a baseboard management controller operative to format the third remote console data using the serial over local area network text protocol and to transmit the third remote console data to the apparatus.

Certain aspects of the present disclosure are directed to a system for providing a common management console for managing the pre and post operating system operation of server computers. The system includes a management appliance comprising a processor a network port and a non volatile memory storing program code when executed by the processor causing the appliance to establish network connections to first and second server computers via the network port receive first and second remote console data from the first and second server computers via the network connections respectively. The first and second remote console data are formatted according to first and second remote console protocols respectively. The first and second remote console protocols are different from each other. The program code further causes the appliance to convert the received first and second remote console data to first and second converted remote console data respectively in a common format in accordance with a common protocol capable of expressing the first and second remote console protocols and transmit the first and second converted remote console data in the common format to one or more remote management consoles for display and a remote console application configured to receive the first and second converted remote console data from the management appliance decode the first and second converted remote console data and display the decoded remote console data in a single graphical user interface window.

In certain embodiments the program code when executed by the processor further causes the apparatus to receive at the management appliance third remote console data in accordance with the serial over local area network text protocol from a third server computer and convert the third remote console data to third converted remote console data in the common format.

The subject matter described herein may also be implemented as an apparatus a computer process a computing system or as an article of manufacture such as a computer program product or computer readable medium. The computer program product may be a computer storage media readable by a computer system and encoding a computer program of instructions for executing a computer process. The computer program product may also be a propagated signal on a carrier readable by a computing system and encoding a computer program of instructions for executing a computer process.

These and various other features as well as advantages will be apparent from a reading of the following detailed description and a review of the associated drawings.

Methods systems apparatuses and computer readable media are provided herein for managing both the pre and post operating system operation of a computer through a common management console. In the following detailed description references are made to the accompanying drawings that form a part hereof and in which are shown by way of illustration specific embodiments or examples. Referring now to the drawings in which like numerals represent like elements throughout the several figures aspects of the various implementations provided herein and an exemplary operating environment will be described.

Generally program modules include routines programs components data structures and other types of structures that perform particular tasks or implement particular abstract data types. Moreover those skilled in the art will appreciate that the embodiments described herein may be practiced with other computer system configurations including hand held devices multiprocessor systems microprocessor based or programmable consumer electronics minicomputers mainframe computers and the like. The embodiments described herein may also be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network. In a distributed computing environment program modules may be located in both local and remote memory storage devices.

Referring now to an illustrative operating environment for the embodiments presented herein will be described. As shown in a management appliance is provided herein that is operative to connect to one or more server computers A B through a network switch . The management appliance may also connect to a blade server that includes a multitude of individual server blades within a single housing. It should be appreciated that the management appliance is described herein as being utilized in conjunction with server computers but may also be utilized with virtually any type of computer system. It should be appreciated that the management appliance also includes capabilities for discovering and identifying the server computers connected to the switch . Additional details regarding the configuration and operation of the server computers A B will be provided in greater detail below.

As also shown in a remote management console computer is operative to connect to the management appliance through the network . The network may comprise a local or wide area network including the internet. As will be described in greater detail below the remote management console comprises a standard laptop or desktop computer operative to execute an operating system and a remote management application program . The remote management application program may take the form of a stand alone application. Alternatively the functionality of the remote management application program may be incorporated into a remote management browser plug in that can be executed in a standard web browser program like INTERNET EXPLORER from MICROSOFT CORPORATION of Redmond Wash.

According to aspects of the embodiments presented herein the remote management application is utilized to establish a network connection between the remote management console and the management appliance . Through the network connection the management appliance can provide to the remote management console a list of the servers A B and that are manageable from the remote management console . In response to receiving a selection of one of the listed servers the management appliance is operable to establish a network connection to the selected server. For instance the management appliance may connect to the server A.

Through the network connection the management appliance receives remote console data from the connected server A. The remote console data may be formatted according to any one of a multitude of protocols for transmitting remote console data. For instance according to one embodiment the server A may be equipped with a baseboard management controller BMC operative to transmit remote console data formatted using a text protocol such as the serial over LAN protocol. Such a protocol is utilized to transmit pre operating system text remote console data such as POST and BIOS display screens. Such text remote console data may be transmitted prior to the loading of an operating system on the server computer A. Additionally such serial text output may be transmitted even after an operating system has been loaded such as when a UNIX based operating system is utilized at the server A.

According to other aspects the server A may also be equipped with an in band remote graphical console server application that generates remote console data once an operating system has been loaded on the server computer A. For instance servers executing the LINUX operating system may utilize the virtual network computing VNC graphical remote console protocol. Servers executing the MICROSOFT WINDOWS operating system may utilize the remote desktop protocol RDP . Other graphical remote console protocols may also be utilized.

As will be described in greater detail below the management appliance is further operative to detect the remote console protocol being utilized by the server A to format the remote console data. Once the protocol has been detected the management appliance converts the received remote console data regardless of protocol into a common format capable of encapsulating each of the possible protocols. The converted console data in the common format is then transmitted to the remote management application .

The remote console application receives the converted data in the common format from the management appliance . The remote console application then decodes the remote console data from the common format and utilizes the decoded data to display the remote console data on a display screen of the remote management console .

In one embodiment a single graphical user interface window called a common management console is displayed by the remote console application to display both text and graphical remote console data. In this manner a common window is provided for viewing and interacting with the text remote console data provided by the server computer A prior to booting an operating system and the graphical remote console data provided by the server computer A after the operating system has been loaded. Moreover the common window may be displayed regardless of the console server application or graphical remote console protocol that is utilized by the server computer A.

Mouse and keyboard input provided at the remote management console is also transmitted to the management appliance via the remote management application . The input is provided to the server computer A by the management appliance . In this manner the remote management application can be utilized to view text and graphical remote console data from the server A and to control the operation of the server A. Additional details regarding the server computer A the management appliance and the remote management console and remote management application will be provided below with respect to .

Turning now to an illustrative computer architecture for a server computer utilized in the embodiments described herein will be provided. It should be appreciated that although the embodiments described herein are discussed in the context of managing a conventional server computer virtually any type of computing device may be utilized. shows an illustrative computer architecture for a server computer that may be remotely managed utilizing the implementations described herein. It should be appreciated that the architecture shown in is applicable to the server computers A B and the blade server . The remote management console may also utilize some or all of the conventional computing components illustrated in and described with reference to .

The server computer includes a baseboard or motherboard which is a printed circuit board to which a multitude of components or devices may be connected by way of a system bus or other electrical communication path. In one illustrative embodiment a CPU operates in conjunction with a chipset . The CPU is a standard central processor that performs arithmetic and logical operations necessary for the operation of the computer. The server computer may include a multitude of CPUs .

The chipset includes a north bridge and a south bridge . The north bridge provides an interface between the CPU and the remainder of the computer . The north bridge also provides an interface to a random access memory RAM used as the main memory in the computer and possibly to an on board graphics adapter . The north bridge may also include functionality for providing networking functionality through a gigabit Ethernet adapter . The gigabit Ethernet adapter is capable of connecting the computer to another computer via a network. Connections which may be made by the network adapter may include LAN or WAN connections. LAN and WAN networking environments are commonplace in offices enterprise wide computer networks intranets and the internet. The north bridge is connected to the south bridge .

The south bridge is responsible for controlling many of the input output functions of the computer . In particular the south bridge may provide one or more universal serial bus USB ports a sound adapter an Ethernet controller and one or more general purpose input output GPIO pins . The south bridge may also provide a bus for interfacing peripheral card devices such as a graphics adapter . In one embodiment the bus comprises a peripheral component interconnect PCI bus. The south bridge may also provide a system management bus for use in managing the various components of the computer . Additional details regarding the operation of the system management bus and its connected components are provided below.

The south bridge is also operative to provide one or more interfaces for connecting mass storage devices to the computer . For instance according to an embodiment the south bridge includes a serial advanced technology attachment SATA adapter for providing one or more serial ATA ports and an ATA adapter for providing one or more ATA ports . The serial ATA ports and the ATA ports may be in turn connected to one or more mass storage devices storing an operating system and application programs such as the SATA disk drive . As known to those skilled in the art an operating system comprises a set of programs that control operations of a computer and allocation of resources. An application program is software that runs on top of the operating system software or other runtime environment and uses computer resources to perform application specific tasks desired by the user. As will be described in greater detail below a remote console server application is stored on the drive and executed by the computer to redirect the text or graphical display of the computer once the operating system and remote console server application have been loaded.

According to one embodiment of the invention the operating system comprises the LINUX operating system and the remote console server application comprises remote server application compatible with the VNC protocol. According to another embodiment of the invention the operating system comprises the WINDOWS SERVER operating system from MICROSOFT CORPORATION and the remote console server application comprises a remote desktop application compatible with the RDP protocol. According to another embodiment the operating system comprises the UNIX or SOLARIS operating system. In this embodiment the remote console server comprises a server compatible with the serial desktop protocol for provided a redirect text display. It should be appreciated that other types of remote desktop servers compatible with other types of remote desktop protocols may also be utilized.

The mass storage devices connected to the south bridge and their associated computer readable media provide non volatile storage for the computer . Although the description of computer readable media contained herein refers to a mass storage device such as a hard disk or CD ROM drive it should be appreciated by those skilled in the art that computer readable media can be any available media that can be accessed by the computer . By way of example and not limitation computer readable media may comprise computer storage media and communication media. Computer storage media includes volatile and non volatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Computer storage media includes but is not limited to RAM ROM EPROM EEPROM flash memory or other solid state memory technology CD ROM DVD HD DVD BLU RAY or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store the desired information and which can be accessed by the computer.

A low pin count LPC interface may also be provided by the south bridge for connecting a Super I O device . The Super I O device is responsible for providing a number of input output ports including a keyboard port a mouse port a serial interface a parallel port and other types of input output ports. The LPC interface may also connect a computer storage media such as a ROM or a flash memory such as a NVRAM for storing the firmware that includes program code containing the basic routines that help to start up the computer and to transfer information between elements within the computer . It should be appreciated that during the execution of the BIOS and POST portions for the firmware the text screen displays of the computer may be provided via the serial ports or via the Ethernet controller using the serial over LAN protocol.

As described briefly above the south bridge may include a system management bus . The system management bus may include a BMC . In general the BMC is a microcontroller that monitors operation of the computer system . In a more specific embodiment the BMC monitors health related aspects associated with the computer system such as but not limited to the temperature of one or more components of the computer system speed of rotational components e.g. spindle motor CPU Fan etc. within the system the voltage across or applied to one or more components within the system and the available or used capacity of memory devices within the system . To accomplish these monitoring functions the BMC is communicatively connected to one or more components by way of the management bus . In an embodiment these components include sensor devices for measuring various operating and performance related parameters within the computer system . The sensor devices may be either hardware or software based components configured or programmed to measure or detect one or more of the various operating and performance related parameters. The BMC functions as the master on the management bus in most circumstances but may also function as either a master or a slave in other circumstances. Each of the various components communicatively connected to the BMC by way of the management bus is addressed using a slave address.

The management bus is used by the BMC to request and or receive various operating and performance related parameters from one or more components which are also communicatively connected to the management bus . For instance in one embodiment the management bus may communicatively connects the BMC to a CPU temperature sensor and a CPU fan not shown in thereby providing a means for the BMC to monitor and or control operation of these components. The BMC may also include sensors connected directly thereto. For instance the sensors may include without limitation tachometers heat sensors voltage meters amp meters and digital and analog sensors. It should be appreciated that the management bus may include components other than those explicitly shown in . In an embodiment the management bus is an IC bus which is manufactured BY PHILLIPS SEMICONDUCTORS and described in detail in the IC bus Specification version 2.1 January 2000 .

It should be appreciated that several physical interfaces exist for communicating with the BMC in additional to the management bus . In particular the serial ports and the Ethernet controller may be utilized to establish a connection with the BMC . Through these interfaces a connection can be established with the BMC for obtaining health and management data regarding the operation of the computer .

According to one embodiment the firmware of the BMC adheres to the Intelligent Platform Management Interface IPMI industry standard for system monitoring and event recovery. The IPMI specification provides a common message based interface for accessing all of the manageable features in the computer . IPMI includes a rich set of predefined commands for reading temperature voltage fan speed chassis intrusion and other parameters. System event logs hardware watchdogs and power control can also be accessed through IPMI. In this manner IPMI defines protocols for accessing the various parameters collected by the BMC through the operating system or through an external connection such as through a network or serial connection. Additional details regarding the operation of the computer in conjunction with the management appliance and the remote management console will be provided below with respect to .

It should be appreciated that the computer may comprise other types of computing devices including hand held computers embedded computer systems personal digital assistants and other types of computing devices known to those skilled in the art. It is also contemplated that the computer may not include all of the components shown in may include other components that are not explicitly shown in or may utilize an architecture completely different than that shown in .

Referring now to details regarding an illustrative hardware architecture for implementing the management appliance will be described. As shown in the management appliance includes a CPU a RAM and a NVRAM . The NVRAM stores a firmware for controlling the operation of the management appliance . Additional details regarding the operation of the firmware will be provided below with respect to .

As also shown in the management appliance includes network adaptors A B. The network adaptors A B are utilized to enable network connections to the remote management console and the server computers A B and . According to one embodiment the management device may also include an input output I O hub for providing various I O ports. For instance in one embodiment one or more USB ports may be provided by the management appliance . Other types of I O ports may also be provided in a similar manner. As shown in the management appliance also includes a bus for interconnecting the various hardware components described herein. Additional details regarding the operation of the management appliance will be provided below with respect to .

Referring now to several illustrative routines and will be described in detail illustrating the operation of the server computer the management appliance and the remote management console respectively. The logical operations of the various implementations presented herein are implemented 1 as a sequence of computer implemented acts or program modules running on a computing system and or 2 as interconnected machine logic circuits or circuit modules within the computing system. The implementation is a matter of choice dependent on the performance requirements of the computing system on which the embodiments described herein are implemented. Accordingly the logical operations making up the implementations described herein are referred to variously as operations structural devices acts or modules. It will be recognized by one skilled in the art that these operations structural devices acts and modules may be implemented in software in firmware in special purpose digital logic and any combination thereof without deviating from the spirit and scope of the present invention as recited within the claims attached hereto.

The routine begins at operation where the management appliance discovers the connected server computers A B and . At operation the remote management console receives a request from a user to establish a connection to the management appliance . In response to such a request a connection is established between the management appliance and the remote management console at operations and . Once a connection has been established the management appliance provides a list of the available server computers to the remote management console at operation and . This list may be displayed to a user by the remote management application . In response thereto a user may select one of the server computers to be managed. A request is then transmitted to the management appliance to manage the selected server computer at operations and .

In response to receiving a request to manage one of the server computers the management appliance connects to the requested server at operations and . The management appliance then receives from the server computer remote console data at operations and . The remote console data may be formatted according to one of a multitude of protocols. As discussed above the remote console data may be formatted using the VNC protocol the RDP protocol or the serial over LAN protocol.

At operation the management appliance detects the protocol utilized by the server to format the received remote console data. Once the protocol has been detected the management appliance converts the remote console data into a common format. The common format comprises a format capable of encapsulating each of the possible remote console protocols. In this manner remote console data expressed in RDP VNC or serial over LAN can be recomposed into a common format for transmission to the remote management console .

At operation the management appliance transmits the converted data to the remote management application executing on the remote management console . The remote management application receives the converted data at operation . At operation the remote management application decodes the converted data and at operation the application displays the decoded remote console data. In this manner the console of the server is redirect to and displayed at the remote management console .

In one embodiment the remote management console is operative to display the remote console data in a single graphical user interface UI window regardless of whether the remote console data is text such as serial console data or whether the remote console data is graphical console data. For instance as shown in a single window may be displayed by the remote management application to display both graphical console data and text console data . In this manner the text data provided by the server before the operating system has been loaded and the graphical console data provided by the remote console server can be displayed and interacted with into a common management console UI window.

Referring again to a determination is made at the remote management application as to whether input has been received that is directed to the remotely managed server. If not the routine returns back to operation where additional converted remote console data is received from the management appliance and displayed in the manner described above. If input is detected at operation the routine continues to operation where the input is transmitted to the management appliance . At operation the management appliance receives the input and passes the input to the server computer at operation . At operation the server A processes the input as if it were received locally. In this manner a user of the remote management console can control the operation of the server computer A.

From operation the routine branches back to operation where remote console data is again transmitted to the management appliance . From operation the routine returns back to operation where the management appliance receives and converts the remote management data to a common format and transmits the converted data to the remote management console . From operation the routine returns back to operation where additional converted remote console data is received from the management appliance and displayed in the manner described above. It should be appreciated that these operations continue until such time as the operator of the remote management console requests that console redirection be discontinued. At such time the connection between the management appliance and the server A is stopped and the processing of remote console data is discontinued.

Based on the foregoing it should be appreciated that embodiments described herein provide methods systems apparatuses and computer readable media for managing both the pre and post operating system operation of a computer through a common management console. Moreover although the embodiments described herein have been described in language specific to computer structural features methodological acts and by computer readable media it is to be understood that the invention defined in the appended claims is not necessarily limited to the specific structures acts or media described. Therefore the specific structural features acts and mediums are disclosed as exemplary embodiments implementing the claimed invention.

The various embodiments described above are provided by way of illustration only and should not be construed to limit the invention. Those skilled in the art will readily recognize various modifications and changes that may be made to the present invention without following the example embodiments and applications illustrated and described herein and without departing from the true spirit and scope of the present invention which is set forth in the following claims.

