---

title: Infusion pump assembly
abstract: A wearable infusion pump assembly includes a reservoir for receiving an infusible fluid, and an external infusion set configured to deliver the infusible fluid to a user. A fluid delivery system is configured to deliver the infusible fluid from the reservoir to the external infusion set. The fluid delivery system includes a volume sensor assembly, and a pump assembly for extracting a quantity of infusible fluid from the reservoir and providing the quantity of infusible fluid to the volume sensor assembly. The volume sensor assembly is configured to determine the volume of at least a portion of the quantity of fluid. The fluid delivery system further includes at least one optical sensor assembly configured to sense the movement of the pump assembly, a first valve assembly configured to selectively isolate the pump assembly from the reservoir, and a second valve assembly configured to selectively isolate the volume sensor assembly from the external infusion set.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09649433&OS=09649433&RS=09649433
owner: DEKA Products Limited Partnership
number: 09649433
owner_city: Manchester
owner_country: US
publication_date: 20131108
---
The present application is a Continuation of U.S. patent application Ser. No. 12 981 283 filed Dec. 29 2010 and entitled Infusion Pump Assembly now U.S. Pat. No. 8 579 884 issued Nov. 12 2013 which is a Non Provisional application which claims priority from U.S. Provisional Patent Application Ser. No. 61 291 641 filed Dec. 31 2009 and entitled Method and System for Start Up Integrity Verification for a Medical Device and U.S. Provisional Patent Application Ser. No. 61 291 733 filed Dec. 31 2009 and entitled Infusion Pump Apparatus Method and System all of which are hereby incorporated herein by reference in their entireties.

U.S. Pat. No. 8 579 884 is also a Continuation in Part of U.S. patent application Ser. No. 12 347 981 filed Dec. 31 2008 now U.S. Publication No. US 2009 0275896 A1 published Nov. 5 2009 and entitled Infusion Pump Assembly which is hereby incorporated herein by reference in its entirety which application also claims priority from the following U.S. Provisional Patent Applications all of which are hereby incorporated herein by reference in their entireties 

U.S. Provisional Patent Application Ser. No. 61 018 054 filed Dec. 31 2007 and entitled Patch Pump with Shape Memory Wire Pump Actuator 

U.S. Provisional Patent Application Ser. No. 61 018 042 filed Dec. 31 2007 and entitled Patch Pump with External Infusion Set 

U.S. Provisional Patent Application Ser. No. 61 017 989 filed Dec. 31 2007 and entitled Wearable Infusion Pump with Disposable Base 

U.S. Provisional Patent Application Ser. No. 61 018 002 filed Dec. 31 2007 and entitled Patch Pump with Rotational Engagement Assembly 

U.S. Provisional Patent Application Ser. No. 61 018 339 filed Dec. 31 2007 and entitled System and Method for Controlling a Shape Memory Actuator 

U.S. Provisional Patent Application Ser. No. 61 023 645 filed Jan. 25 2008 and entitled Infusion Pump with Bolus Button 

U.S. Provisional Patent Application Ser. No. 61 101 053 filed Sep. 29 2008 and entitled Infusion Pump Assembly with a Switch Assembly 

U.S. Provisional Patent Application Ser. No. 61 101 077 filed Sep. 29 2008 and entitled Infusion Pump Assembly with a Tubing Storage U.S. Provisional Patent Application Ser. No. 61 101 105 filed Sep. 29 2008 and entitled Improved Infusion Pump Assembly and

U.S. Provisional Patent Application Ser. No. 61 101 115 filed Sep. 29 2008 and entitled Filling Apparatus and Methods for an Infusion Pump Assembly.

U.S. patent application Ser. No. 12 347 981 is also a Continuation In Part Application of each of the following applications 

U.S. patent application Ser. No. 11 704 899 filed Feb. 9 2007 now Publication No. US 2007 0228071 A1 published Oct. 4 2007 and entitled Fluid Delivery Systems and Method 

U.S. patent application Ser. No. 11 704 896 filed Feb. 9 2007 now U.S. Patent Application Publication No. US 2007 0219496 A1 published Sep. 20 2007 and entitled Pumping Fluid Delivery Systems and Methods Using Force Application Assembly 

U.S. patent application Ser. No. 11 704 886 filed Feb. 9 2007 now U.S. Patent Application Publication No. US 2007 0219480 A1 published Sep. 20 2007 and entitled Patch Sized Fluid Delivery Systems and Methods and

U.S. patent application Ser. No. 11 704 897 filed Feb. 9 2007 now U.S. Patent Application Publication No. US 2007 0219597 A1 published Sep. 20 2007 and entitled Adhesive and Peripheral Systems and Methods for Medical Devices all of which claim priority from the following U.S. Provisional Patent Applications and all of which are hereby incorporated herein by reference in their entireties 

U.S. Provisional Patent Application Ser. No. 60 772 313 filed Feb. 9 2006 and entitled Portable Injection System 

U.S. Provisional Patent Application Ser. No. 60 789 243 filed Apr. 5 2006 and entitled Method of Volume Measurement for Flow Control and

U.S. Provisional Patent Application Ser. No. 60 793 188 filed Apr. 19 2006 and entitled Portable Injection and Adhesive System all of which are hereby incorporated herein by reference in their entireties.

U.S. patent application Ser. No. 11 704 899 filed Feb. 9 2007 now Publication No. US 2007 0228071 A1 published Oct. 4 2007 and entitled Fluid Delivery Systems and Method U.S. patent application Ser. No. 12 347 981 filed Feb. 9 2007 now U.S. Patent Application Publication No. US 2007 0219496 A1 published Sep. 20 2007 and entitled Pumping Fluid Delivery Systems and Methods Using Force Application Assembly U.S. patent application Ser. No. 11 704 886 filed Feb. 9 2007 now U.S. Patent Application Publication No. US 2007 0219480 A1 published Sep. 20 2007 and entitled Patch Sized Fluid Delivery Systems and Methods and U.S. patent application Ser. No. 11 704 897 filed Feb. 9 2007 now U.S. Patent Application Publication No. US 2007 0219597 A1 published Sep. 20 2007 and entitled Adhesive and Peripheral Systems and Methods for Medical Devices may all be related to one or more of each other and may also be related to 

U.S. Provisional Patent Application Ser. No. 60 889 007 filed Feb. 9 2007 and entitled Two Stage Transcutaneous Inserter which is hereby incorporated herein by reference in its entirety.

This application relates generally to fluid delivery systems and more particularly to infusion pump assemblies.

Many potentially valuable medicines or compounds including biologicals are not orally active due to poor absorption hepatic metabolism or other pharmacokinetic factors.

Additionally some therapeutic compounds although they can be orally absorbed are sometimes required to be administered so often it is difficult for a patient to maintain the desired schedule. In these cases parenteral delivery is often employed or could be employed.

Effective parenteral routes of drug delivery as well as other fluids and compounds such as subcutaneous injection intramuscular injection and intravenous IV administration include puncture of the skin with a needle or stylet. Insulin is an example of a therapeutic fluid that is self injected by millions of diabetic patients. Users of parenterally delivered drugs may benefit from a wearable device that would automatically deliver needed drugs compounds over a period of time.

To this end there have been efforts to design portable and wearable devices for the controlled release of therapeutics. Such devices are known to have a reservoir such as a cartridge syringe or bag and to be electronically controlled. These devices suffer from a number of drawbacks including the malfunction rate. Reducing the size weight and cost of these devices is also an ongoing challenge. Additionally these devices often apply to the skin and pose the challenge of frequent re location for application.

According to a first implementation a wearable infusion pump assembly includes a reservoir for receiving an infusible fluid and an external infusion set configured to deliver the infusible fluid to a user. A fluid delivery system is configured to deliver the infusible fluid from the reservoir to the external infusion set. The fluid delivery system includes a volume sensor assembly and a pump assembly for extracting a quantity of infusible fluid from the reservoir and providing the quantity of infusible fluid to the volume sensor assembly. The volume sensor assembly is configured to determine the volume of at least a portion of the quantity of fluid. The fluid delivery system also includes at least one optical sensor assembly a first valve assembly configured to selectively isolate the pump assembly from the reservoir. The fluid delivery system further includes a second valve assembly configured to selectively isolate the volume sensor assembly from the external infusion set. The at least one optical sensor assembly is configured to sense the movement of the pump assembly.

One or more of the following features may be included. The wearable infusion pump may also include a second optical sensor assembly configured to sense the movement of the second valve assembly. The wearable infusion pump assembly may also include a disposable housing assembly including the reservoir and a first portion of the fluid delivery system. The wearable infusion pump assembly may also include a reusable housing assembly including a second portion of the fluid delivery system. A first portion of the pump assembly may be positioned within the disposable housing assembly. A second portion of the pump assembly may be positioned within the reusable housing assembly. A first portion of the first valve assembly may be positioned within the disposable housing assembly. A second portion of the first valve assembly may be positioned within the reusable housing assembly. A first portion of the second valve assembly may be positioned within the disposable housing assembly. A second portion of the second valve assembly may be positioned within the reusable housing assembly. The at least one optical sensor may be positioned within the reusable housing assembly.

The external infusion set may be a detachable external infusion set that may be configured to releasably engage the fluid delivery system.

The wearable infusion pump assembly may include at least one processor and a computer readable medium coupled to the at least one processor. The computer readable medium may include a plurality of instructions stored on it. When executed by the at least one processor the instructions may cause the at least one processor to perform operations including activating the first valve assembly to isolate the pump assembly from the reservoir. The computer readable medium may also include instructions for activating the pump assembly to provide the quantity of infusible fluid to the volume sensor assembly.

The fluid delivery system may include an actuator associated with the first valve assembly. Activating the first valve assembly may include energizing the actuator. The actuator may include a shape memory actuator. The fluid delivery system may include an actuator associated with the pump assembly.

Activating the pump assembly may include energizing the actuator. The fluid delivery system may include a bell crank assembly for mechanically coupling the pump assembly to the actuator. The actuator may include a shape memory actuator.

The computer readable medium may further include instructions for activating the volume sensor assembly to determine the volume of at least a portion of the quantity of fluid provided to the volume sensor assembly from the pump assembly. The computer readable medium may also include instructions for activating the second valve assembly to fluidly couple the volume sensor assembly to the external infusion set.

The fluid delivery system may include an actuator associated with the second valve assembly and activating the second valve assembly includes energizing the actuator. The fluid delivery system may include a bell crank assembly for mechanically coupling the second valve assembly to the actuator. The actuator may include a shape memory actuator.

The fluid delivery system may further include a bracket assembly that may be configured to maintain the second valve assembly in an activated state. The computer readable medium may further include instructions for activating the bracket assembly to release the second valve assembly from the activated state. Activating the bracket assembly may include energizing a bracket actuator associated with the bracket assembly. The bracket actuator may include a shape memory actuator.

The details of one or more embodiments are set forth in the accompanying drawings and the description below. Other features and advantages will become apparent from the description the drawings and the claims.

Referring to an infusion pump assembly may include a reusable housing assembly . Reusable housing assembly may be constructed from any suitable material such as a hard or rigid plastic that will resist compression. For example use of durable materials and parts may improve quality and reduce costs by providing a reusable portion that lasts longer and is more durable providing greater protection to components disposed therein.

Reusable housing assembly may include mechanical control assembly having a pump assembly and at least one valve assembly . Reusable housing assembly may also include electrical control assembly configured to provide one or more control signals to mechanical control assembly and effectuate the basal and or bolus delivery of an infusible fluid to a user. Disposable housing assembly may include valve assembly which may be configured to control the flow of the infusible fluid through a fluid path. Reusable housing assembly may also include pump assembly which may be configured to pump the infusible fluid from the fluid path to the user.

Electrical control assembly may monitor and control the amount of infusible fluid that has been and or is being pumped. For example electrical control assembly may receive signals from volume sensor assembly and calculate the amount of infusible fluid that has just been dispensed and determine based upon the dosage required by the user whether enough infusible fluid has been dispensed. If enough infusible fluid has not been dispensed electrical control assembly may determine that more infusible fluid should be pumped. Electrical control assembly may provide the appropriate signal to mechanical control assembly so that any additional necessary dosage may be pumped or electrical control assembly may provide the appropriate signal to mechanical control assembly so that the additional dosage may be dispensed with the next dosage. Alternatively if too much infusible fluid has been dispensed electrical control assembly may provide the appropriate signal to mechanical control assembly so that less infusible fluid may be dispensed in the next dosage.

Mechanical control assembly may include at least one shape memory actuator . Pump assembly and or valve assembly of mechanical control assembly may be actuated by at least one shape memory actuator e.g. shape memory actuator which may be a shape memory wire in wire or spring configuration. Shape memory actuator may be operably connected to and activated by electrical control assembly which may control the timing and the amount of heat and or electrical energy used to actuate mechanical control assembly . Shape memory actuator may be for example a conductive shape memory alloy wire that changes shape with temperature. The temperature of shape memory actuator may be changed with a heater or more conveniently by application of electrical energy. Shape memory actuator may be a shape memory wire constructed of nickel titanium alloy such as NITINOL or FLEXINOL .

Infusion pump assembly may include a volume sensor assembly configured to monitor the amount of fluid infused by infusion pump assembly . For example volume sensor assembly may employ for example acoustic volume sensing. Acoustic volume measurement technology is the subject of U.S. Pat. Nos. 5 575 310 and 5 755 683 assigned to DEKA Products Limited Partnership as well as U.S. patent application Publication Nos. US 2007 0228071 A1 US 2007 0219496 A1 US 2007 0219480 A1 US 2007 0219597 A1 the entire disclosures of all of which are incorporated herein by reference. Other alternative techniques for measuring fluid flow may also be used for example Doppler based methods the use of Hall effect sensors in combination with a vane or flapper valve the use of a strain beam for example related to a flexible member over a fluid reservoir to sense deflection of the flexible member the use of capacitive sensing with plates or thermal time of flight methods. One such alternative technique is disclosed in U.S. patent application Ser. No. 11 704 899 filed Feb. 9 2007 now U.S. Publication No. US 2007 0228071 A1 published Oct. 4 2007 and entitled Fluid Delivery Systems and Methods the entire disclosure of which is incorporated herein by reference. Infusion pump assembly may be configured so that the volume measurements produced by volume sensor assembly may be used to control through a feedback loop the amount of infusible fluid that is infused into the user.

Infusion pump assembly may further include a disposable housing assembly . For example disposable housing assembly may be configured for a single use or for use for a specified period of time e.g. three days or any other amount of time. Disposable housing assembly may be configured such that any components in infusion pump assembly that come in contact with the infusible fluid are disposed on and or within disposable housing assembly . For example a fluid path or channel including a reservoir may be positioned within disposable housing assembly and may be configured for a single use or for a specified number of uses before disposal. The disposable nature of disposable housing assembly may improve sanitation of infusion pump assembly .

Referring also to disposable housing assembly may be configured to releasably engage reusable housing assembly and includes a cavity that has a reservoir for receiving an infusible fluid not shown e.g. insulin. Such releasable engagement may be accomplished by a screw on a twist lock or a compression fit configuration for example. Disposable housing assembly and or reusable housing assembly may include an alignment assembly configured to assist in aligning disposable housing assembly and reusable housing assembly for engagement in a specific orientation. Similarly base nub and top nub may be used as indicators of alignment and complete engagement.

Cavity may be at least partially formed by and integral to disposable housing assembly . Cavity may include a membrane assembly for at least partially defining reservoir . Reservoir may be further defined by disposable housing assembly e.g. by a recess formed in base portion of disposable housing assembly . For example membrane assembly may be disposed over recess and attached to base portion thereby forming reservoir . Membrane assembly may be attached to base portion by conventional means such as gluing heat sealing and or compression fitting such that a seal is formed between membrane assembly and base portion . Membrane assembly may be flexible and the space formed between membrane assembly and recess in base portion may define reservoir . Reservoir may be non pressurized and in fluid communication with a fluid path not shown . Membrane assembly may be at least partially collapsible and cavity may include a vent assembly thereby advantageously preventing the buildup of a vacuum in reservoir as the infusible fluid is delivered from reservoir to the fluid path. In a preferred embodiment membrane assembly is fully collapsible thus allowing for the complete delivery of the infusible fluid. Cavity may be configured to provide sufficient space to ensure there is always some air space even when reservoir is filled with infusible fluid.

The membranes and reservoirs described herein may be made from materials including but not limited to silicone NITRILE butyl rubber SANTOPRENE thermal plastic elastomers TPE styrene ethylene butylene styrene SEBS and or any other material having desired resilience and properties for functioning as described herein. Additionally other structures could serve the same purpose.

The use of a partially collapsible non pressurized reservoir may advantageously prevent the buildup of air in the reservoir as the fluid in the reservoir is depleted. Air buildup in a vented reservoir could prevent fluid egress from the reservoir especially if the system is tilted so that an air pocket intervenes between the fluid contained in the reservoir and the septum of the reservoir. Tilting of the system is expected during normal operation as a wearable device.

Reservoir may be conveniently sized to hold an insulin supply sufficient for delivery over one or more days. For example reservoir may hold about 1.00 to 3.00 ml of insulin. A 3.00 ml insulin reservoir may correspond to approximately a three day supply for about 90 of potential users. In other embodiments reservoir may be any size or shape and may be adapted to hold any amount of insulin or other infusible fluid. In some embodiments the size and shape of cavity and reservoir is related to the type of infusible fluid that cavity and reservoir are adapted to hold.

Disposable housing assembly may include a support member configured to prevent accidental compression of reservoir . Compression of reservoir may result in an unintentional dosage of infusible fluid being forced through the fluid path to the user. In a preferred embodiment reusable housing assembly and disposable housing assembly may be constructed of a rigid material that is not easily compressible. However as an added precaution support member may be included within disposable housing assembly to prevent compression of infusion pump assembly and cavity therein. Support member may be a rigid projection from base portion . For example support member may be disposed within cavity and may prevent compression of reservoir .

As discussed above cavity may be configured to provide sufficient space to ensure there is always some air space even when reservoir is filled with infusible fluid. Accordingly in the event that infusion pump assembly is accidentally compressed the infusible fluid may not be forced through cannula assembly e.g. shown in .

Cavity may include a septum assembly configured to allow reservoir to be filled with the infusible fluid. Septum assembly may be a conventional septum made from rubber or plastic and have a one way fluid valve configured to allow a user to fill reservoir from a syringe or other filling device. In some embodiments septum may be located on the top of membrane assembly . In these embodiments cavity may include a support structure e.g. support member in for supporting the area about the back side of the septum so as to maintain the integrity of the septum seal when a needle is introducing infusible fluid into cavity . The support structure may be configured to support the septum while still allowing the introduction of the needle for introducing infusible fluid into cavity .

Referring also to embodiments of a top portion of the disposable housing assembly are shown. Top portion is shown in with the cross sectional view taken at B shown in . Septum assembly is shown. In some embodiments the septum assembly includes a tunnel feature which may in some embodiments serves as a feature to press a needle e.g. filling needle against while not pressing full force directly onto the septum . In some embodiments as shown in the septum may be a separately molded part attached to the disposable housing assembly portion but separate from the membrane assembly .

Referring now to another embodiment of a septum assembly part of a top portion of the disposable housing assembly is shown. In this embodiment the septum may be molded into the membrane assembly .

In some embodiments of the various embodiments of the septum assembly the septum may be at a forty five degree angle relative to the top portion . In some embodiments the septum may be made from the same material as the membrane assembly .

Infusion pump assembly may include an overfill prevention assembly not shown that may e.g. protrude into cavity and may e.g. prevent the overfilling of reservoir .

In some embodiments reservoir may be configured to be filled a plurality of times. For example reservoir may be refillable through septum assembly . As infusible fluid may be dispensed to a user electronic control assembly may monitor the fluid level of the infusible fluid in reservoir . When the fluid level reaches a low point electronic control assembly may provide a signal such as a light or a vibration to the user that reservoir needs to be refilled. A syringe or other filling device may be used to fill reservoir through septum .

Reservoir may be configured to be filled a single time. For example a refill prevention assembly not shown may be utilized to prevent the refilling of reservoir such that disposable housing assembly may only be used once. The refill prevention assembly not shown may be a mechanical device or an electro mechanical device. For example insertion of a syringe into septum assembly for filling reservoir may trigger a shutter to close over septum after a single filling thus preventing future access to septum . Similarly a sensor may indicate to electronic control assembly that reservoir has been filled once and may trigger a shutter to close over septum after a single filling thus preventing future access to septum . Other means of preventing refilling may be utilized and are considered to be within the scope of this disclosure.

As discussed above disposable housing assembly may include septum assembly that may be configured to allow reservoir to be filled with the infusible fluid. Septum assembly may be a conventional septum made from rubber or any other material that may function as a septum or in other embodiments septum assembly may be but is not limited to a plastic or other material one way fluid valve. In various embodiments including the exemplary embodiment septum assembly is configured to allow a user to fill reservoir from a syringe or other filling device. Disposable housing assembly may include a septum access assembly that may be configured to limit the number of times that the user may refill reservoir .

For example and referring also to septum access assembly may include shutter assembly that may be held in an open position by a tab assembly that is configured to fit within a slot assembly . Upon penetrating septum with filling syringe shutter assembly may be displaced downward resulting in tab assembly disengaging from slot assembly . Once disengaged spring assembly may displace shutter assembly in the direction of arrow resulting in septum no longer being accessible to the user.

Referring also to an alternative embodiment septum access assembly is shown in the open position. In a fashion similar to that of septum access assembly septum access assembly includes shutter assembly and spring assembly .

Referring also to an alternative embodiment of septum access assembly is shown in the open position where tab may engage slot . In a fashion similar to that of septum access assembly septum access assembly may include shutter assembly and spring assembly . Once shutter assembly moves to the closed position e.g. which may prevent further access of septum by the user tab may at least partially engage slot . Engagement between tab and slot may lock shutter assembly in the closed position to inhibit tampering and reopening of shutter assembly . Spring tab of shutter assembly may bias tab into engagement with slot

However in various embodiments septum access assemblies may not be actuated linearly. For example and referring also to there is shown alternative embodiment septum access assembly that includes shutter assembly that is configured to pivot about axis . When positioned in the open position as shown in septum may be accessible due to passage in shutter assembly being aligned with passage in e.g. a surface of disposable housing assembly . However in a fashion similar to septum access assemblies upon penetrating septum with filling syringe See shutter assembly may be displaced in a clockwise fashion resulting in passage in shutter assembly no longer being aligned with passage in e.g. a surface of disposable housing assembly thus preventing access to septum .

Referring also to an alternative embodiment septum access assembly is shown. In a fashion similar to that of septum access assemblies septum access assembly includes shutter assembly and spring assembly that is configured to bias shutter assembly in the direction of arrow . Filling assembly may be used to fill reservoir . Filling assembly may include shutter displacement assembly that may be configured to displace shutter assembly in the direction of arrow which in turn aligns passage in shutter assembly with septum and passage in septum access assembly thus allowing filling syringe assembly to penetrate septum and fill reservoir .

Infusion pump assembly may include a sealing assembly configured to provide a seal between reusable housing assembly and disposable housing assembly . For example when reusable housing assembly and disposable housing assembly are engaged by e.g. rotational screw on engagement twist lock engagement or compression engagement reusable housing assembly and disposable housing assembly may fit together snuggly thus forming a seal. In some embodiments it may be desirable for the seal to be more secure. Accordingly sealing assembly may include an o ring assembly not shown . Alternatively sealing assembly may include an over molded seal assembly not shown . The use of an o ring assembly or an over molded seal assembly may make the seal more secure by providing a compressible rubber or plastic layer between reusable housing assembly and disposable housing assembly when engaged thus preventing penetration by outside fluids. In some instances the o ring assembly may prevent inadvertent disengagement. For example sealing assembly may be a watertight seal assembly and thus enable a user to wear infusion pump assembly while swimming bathing or exercising.

Referring also to infusion pump assembly may include an external infusion set configured to deliver the infusible fluid to a user. External infusion set may be in fluid communication with cavity e.g. by way of the fluid path. External infusion set may be disposed adjacent to infusion pump assembly . Alternatively external infusion set may be configured for application remote from infusion pump assembly as discussed in greater detail below. External infusion set may include a cannula assembly which may include a needle or a disposable cannula and tubing assembly . Tubing assembly may be in fluid communication with reservoir for example by way of the fluid path and with cannula assembly for example either directly or by way of a cannula interface .

External infusion set may be a tethered infusion set as discussed above regarding application remote from infusion pump assembly . For example external infusion set may be in fluid communication with infusion pump assembly through tubing assembly which may be of any length desired by the user e.g. 3 18 inches . Though infusion pump assembly may be worn on the skin of a user with the use of adhesive patch the length of tubing assembly may enable the user to alternatively wear infusion pump assembly in a pocket. This may be beneficial to users whose skin is easily irritated by application of adhesive patch . Similarly wearing and or securing infusion pump assembly in a pocket may be preferable for users engaged in physical activity.

In addition to as an alternative to adhesive patch a hook and loop fastener system e.g. such as hook and loop fastener systems offered by Velcro USA Inc. of Manchester N.H. may be utilized to allow for easy attachment removal of an infusion pump assembly e.g. infusion pump assembly from the user. Accordingly adhesive patch may be attached to the skin of the user and may include an outward facing hook or loop surface. Additionally the lower surface of disposable housing assembly may include a complementary hook or loop surface. Depending upon the separation resistance of the particular type of hook and loop fastener system employed it may be possible for the strength of the hook and loop connection to be stronger than the strength of the adhesive to skin connection. Accordingly various hook and loop surface patterns may be utilized to regulate the strength of the hook and loop connection.

Referring also to five examples of such hook and loop surface patterns are shown. Assume for illustrative purposes that the entire lower surface of disposable housing assembly is covered in a loop material. Accordingly the strength of the hook and loop connection may be regulated by varying the pattern i.e. amount of the hook material present on the surface of adhesive patch . Examples of such patterns may include but are not limited to a singular outer circle of hook material as shown in a plurality of concentric circles of hook material as shown in a plurality of radial spokes of hook material as shown in a plurality of radial spokes of hook material in combination with a single outer circle of hook material as shown in and a plurality of radial spokes of hook material in combination with a plurality of concentric circles of hook material as shown in .

Additionally and referring also to in one exemplary embodiment of the above described infusion pump assembly infusion pump assembly may be configured via a remote control assembly . In this particular embodiment infusion pump assembly may include telemetry circuitry not shown that allows for communication e.g. wired or wireless between infusion pump assembly and e.g. remote control assembly thus allowing remote control assembly to remotely control infusion pump assembly . Remote control assembly which may also include telemetry circuitry not shown and may be capable of communicating with infusion pump assembly may include display assembly and input assembly . Input assembly may include slider assembly and switch assemblies . In other embodiments the input assembly may include a jog wheel a plurality of switch assemblies or the like.

Remote control assembly may include the ability to pre program basal rates bolus alarms delivery limitations and allow the user to view history and to establish user preferences. Remote control assembly may also include a glucose strip reader.

During use remote control assembly may provide instructions to infusion pump assembly via wireless communication channel established between remote control assembly and infusion pump assembly . Accordingly the user may use remote control assembly to program configure infusion pump assembly . Some or all of the communication between remote control assembly and infusion pump assembly may be encrypted to provide an enhanced level of security.

Communication between remote control assembly and infusion pump assembly may be accomplished utilizing a standardized communication protocol. Further communication between the various components included within infusion pump assembly may be accomplished using the same protocol. One example of such a communication protocol is the Packet Communication Gateway Protocol PCGP developed by DEKA Research Development of Manchester N.H. As discussed above infusion pump assembly may include electrical control assembly that may include one or more electrical components. For example electrical control assembly may include a plurality of data processors e.g. a supervisor processor and a command processor and a radio processor for allowing infusion pump assembly to communicate with remote control assembly . Further remote control assembly may include one or more electrical components examples of which may include but are not limited to a command processor and a radio processor for allowing remote control assembly to communicate with infusion pump assembly . A high level diagrammatic view of one example of such a system is shown in .

Each of these electrical components may be manufactured from a different component provider and therefore may utilize native i.e. unique communication commands. Accordingly through the use of a standardized communication protocol efficient communication between such disparate components may be accomplished.

PCGP may be a flexible extendable software module that may be used on the processors within infusion pump assembly and remote control assembly to build and route packets. PCGP may abstract the various interfaces and may provide a unified application programming interface API to the various applications being executed on each processor. PCGP may also provide an adaptable interface to the various drivers. For illustrative purposes only PCGP may have the conceptual structure illustrated in for any given processor.

PCGP may ensure data integrity by utilizing cyclic redundancy checks CRCs . PCGP may also provide guaranteed delivery status. For example all new messages should have a reply. If such a reply isn t sent back in time the message may time out and PCGP may generate a negative acknowledge reply message for the application i.e. a NACK . Accordingly the message reply protocol may let the application know whether the application should retry sending a message.

PCGP may also limit the number of messages in flight from a given node and may be coupled with a flow control mechanism at the driver level to provide a deterministic approach to message delivery and may let individual nodes have different quantities of buffers without dropping packets. As a node runs out of buffers drivers may provide back pressure to other nodes and prevent sending of new messages.

PCGP may use a shared buffer pool strategy to minimize data copies and may avoid mutual exclusions which may have a small affect on the API used to send receive messages to the application and a larger affect on the drivers. PCGP may use a Bridge base class that provides routing and buffer ownership. The main PCGP class may be sub classed from the bridge base class. Drivers may either be derived from a bridge class or talk to or own a derived bridge class.

PCGP may be designed to work in an embedded environment with or without an operating system by using a semaphore to protect shared data such that some calls can be re entrant and run on a multiple threads. One illustrative example of such an implementation is shown in . PCGP may operate the same way in both environments but there may be versions of the call for specific processor types e.g. the ARM 9 OS version . So while the functionality may be the same there may be an operating system abstraction layer with slightly different calls tailored for e.g. the ARM 9 Nucleus OS environment.

Each software object may ask the buffer manager for the next buffer to use and may then give that buffer to another object. Buffers may pass from one exclusive owner to another autonomicly and queues may occur automatically by ordering buffers by sequence number. When a buffer is no longer in use the buffer may be recycled e.g. object attempts to give the buffer to itself or frees it for the buffer manager to re allocate later . Accordingly data generally doesn t need to be copied and routing simply writes over the buffer ownership byte.

Such an implementation of PCGP may provide various benefits examples of which may include but are not limited to 

As shown in when a message needs to be sent the PCGP may build the packet quickly and may insert it into the buffer management system. Once in the buffer management system a call to packetProcessor may apply protocol rules and may give the messages to the drivers application.

Referring also to PCGP may work by doing all of the main work on one thread to avoid mutual exclusions and to avoid doing considerable work on the send reply or driver calls. The packetProcessor call may have to apply protocol rules to replies new sent messages and received messages. Reply messages may simply get routed but new messages and received messages may have rules for routing the messages. In each case the software may loop while a message of the right type is available to apply protocol rules until it cannot process the packets.

The communication system may have a limited number of buffers. When PCGP runs out of buffers drivers may stop receiving new packets and the application may be told that the application cannot send new packets. To avoid this and maintain optimal performance the application may try to perform one or more procedures examples of which may include but are not limited to 

As shown in at some point the RX driver may be asked to receive a message from the other side of the interface. To ensure a message does not get dropped the RX driver may ask the buffer manager if there is an available buffer for storing a new message. The driver may then ask for a buffer pointer and may start filling the buffer with received data. When a complete message is received the RX driver may call a function to route the packet. The route function may examine the destination byte in the packet header and may change the owner to either the other driver or the application or may detect that the packet is bad and may drop the packet by freeing the buffer.

PCGP RX overhead may consist of asking for the next available buffer and calling the route function. An example of code that performs such a function is as follows 

A driver may perform a TX by asking the buffer manager for the pointer to the next buffer to send. The TX driver may then ask the other side of the interface if it can accept a packet. If the other side denies the packet the TX driver may do nothing to the buffer as its status has not changed. Otherwise the driver may send the packet and may recycle free the buffer. An example of code that performs such a function is as follows 

To avoid forwarding packets that are past the maximum message system timeout time asking for the nextBuffer may call the BufferManager first uint8 owner function that may scan for buffers to free. Accordingly full TX buffers with no hope of making a timeout may be freed on the thread that owns the buffer. A bridge that is doing TX i.e. while looking for the next TX buffer may free all of the TX buffers that are expired before receiving the next TX buffer for processing.

As shown in during the buffer allocation process buffers marked free may be transferred to the drivers to receive new packets or to PCGP to receive new payloads for TX. Allocation from free may be done by the packetProcessor function. The number of sends and receives between packetProcessor calls may dictate how many LT Driver RX GT Driver RX and PCGP Free buffers need to be allocated. LT Driver may represent drivers that handle addresses that are less than the node address. GT Driver may represent drivers that handle addresses that are greater than the node address.

When a driver receives a packet the driver may put the data into an RX buffer that gets handed to the router. The router may then reassign the buffer to PCGP Receive or to the other driver s TX not shown . If the buffer contains obviously invalid data the buffer may transition to free.

After a router marks a buffer for TX the driver may discover the buffer is TX and may send the message. After sending the message the buffer may immediately become an RX buffer if the driver was low in RX buffers or the buffer may be freed for re allocation.

During the packetProcessor call PCGP may process all buffers that the router marked as PCGP Receive. At this point data may be acted upon so the CRC and other data items may be checked. If the data is corrupted a statistic may be incremented and the buffer may be freed. Otherwise the buffer may be marked as owned by the application. Buffers marked as owned by the application may be either recycled for the use of PCGP or freed for reallocation by the buffer manager.

When the application wants to send a new message it may be done in a re entrant friendly mutual exclusion manner. If the buffer may be allocated PCGP may mark the buffer as busy. Once marked busy no other thread calling the send or reply functions may grab this buffer as it is owned by this function call s invocation. The remainder of the process of error checking and building the message may be done outside the isolated race condition mutual exclusion guarded code. The buffer may either transition to free or may become a valid filled CRC checked buffer and passed to the router. These buffers may not be routed immediately and may be queued so that messages can be sent later assuming that protocol rules allow . Reply messages may be marked differently than new send messages because reply messages may be routed with a higher priority than regular send messages and reply messages may have no rules limiting how many when they can be sent.

PCGP was designed to work with flow control and flow control may negotiate the transfer of messages from one node to another node so that a buffer is never dropped because the other side of an interface lacks a buffer which may cause back pressure on the sending node .

Flow control may be apart of the shared buffer format. The first two bytes may be reserved for the driver so that the driver never needs to shift the packet bytes. Two bytes may be used so that one byte is the DMA length 1 and the second byte is to control the flow of messages. These same two bytes may be synchronizing bytes if a PCGP message is transmitted over RS232.

When a packet is in flight the packet may be in the process of being sent by a driver on the way to its destination being processed by the destination or being sent back as a response.

PCGP may use two different times set at initialization for all timeouts one for when the RF link is in fast heartbeat mode and another for when the RF link is in slow mode. If a message is in flight and the link status changes from fast to slow the timeout may be adjusted and the difference between fast and slow may be added to the time to live counter for the packet. No additional transitions back and forth may affect the time to live time for the message.

There is a second timeout that may be twice as long as the slow timeout that is used to monitor buffer allocation inside PCGP. Accordingly if a message is stuck inside a driver and hasn t been sent due to e.g. flow control or hardware damage the buffer may be freed by the buffer manager resulting in the buffer being dropped. For a new message this may mean that the packet already timed out and the application was already given a reply saying the message wasn t delivered resulting in the buffer being freed. Since the driver polls the buffer manager for buffers that need to be sent the buffer is freed up so that a message that could be sent is handed to the driver the next time that it unblocks. For a reply message the reply may simply get dropped and the sending node may time out.

The PCGP messaging system may pass messages that contain header information and payload. Outside of PCGP the header may be a set of data items in a call signature. However internal to PCGP there may be a consistent driver friendly byte layout. Drivers may insert bytes either into the PCGP packet or before the PCGP packet such 

There may be several advantages to this methodology examples of which may include but are not limited to 

PCGP may not be an event driven software design but may be used in event driven architectures by how the sub classes are written. Data may be exchanged between the classes conceptually as shown in .

Some event model in the driver may wake the driver may receive a message and may pass the message through the bridge into the buffer manager that routes the message to new owner of the new message through a bridge to either a driver or PCGP .

The following illustrative example shows how the PCGP event model may work with Nucleus to wakeup the PCGP task after every message send reply or decTimeout that generated a NACK 

The following is a pseudo code driver that is event based illustrating how driver events work. The Driver subclasses Bridge and overrides hasMessagesToSend and flowControlTurnedOff to schedule the TX and RX functions to run if they aren t already running.

PCGP may be designed to run in multiple processing environments. Most parameters may be run time configured because it facilitates testing and any run time fine tuning for performance. Other parameters may be compile time e.g. anything that alters memory allocation must be done statically at compile time.

The CRC may be used to ensure data integrity. If a CRC is invalid it may not be delivered to the application and the CRC error may be tracked. The message may eventually timeout and may be retried by the originator.

Likewise if the messaging system informs the application that a message was delivered when it was not this may be a hazard to the system. The Stop Bolus Command is an example of such a command. This may be mitigated by the Request Action sequence of messages which may be required by the application to change therapy. The Controller may receive a matching command from the Pump application to consider the message delivered.

DEKA may provide a reference way of interfacing PCGP into the Nucleus OS system on the ARM 9 as shown in .

As shown in the pcgpOS.cpp file may instantiate a PCGP node instance Pcgp a Bridge etc. and may provide through pcgpOS.h a C linkable set of function calls that provide a C language interface to the C code. This may simplify the C code as the objects acted upon are implicit.

SPI flow control may prevent data from being sent if the receiving side does not currently have an empty buffer to place the packet. This may be accomplished by asking for permission to send and waiting for a response indicating that you have been cleared to do so. There may also be a way to tell the other side that there are currently no free buffers and the transfer should be attempted at a later time.

All transmission may begin with a length byte that indicates the number of bytes to be sent not including the length byte itself. Following the length may be a single byte indicating the command being sent.

The actual transmission of a packet may be the length of packet plus one for the command byte followed by the command byte for a message appended and finally the packet itself.

In addition to the command bytes that will be sent an additional hardware line called the FlowControl line may be added to the traditional four SPI signals. The purpose of this line is to allow the protocol to run as quickly as possible without a need for preset delays. It also allows the slave processor to tell the master processor that it has a packet waiting to be sent thus eliminating the need for the master processor to poll the slave processor for status.

As illustrated in when the slave processor has a packet to send to the master processor the slave processor may notify the master processor by asserting the FlowControl line that it has a pending packet that is waiting to be sent. Doing so may result in an IRQ on the master processor at which time the master processor may decide when to go retrieve the message from the slave processor. Retrieving the packet may be delayed at the discretion of the master processor and the master processor may even decide to attempt to send a packet to the slave processor before retrieving from the slave processor.

The master processor may begin the retrieval by sending the slave processor M CTS commands this shall be repeated until the slave processor responds by sending the S MSG APPENDED command along with the packet itself. The FlowControl line may be cleared after the packet has been sent. If a M CTS command is received by the slave processor when one is not expected the M CTS command may be ignored.

As illustrated in when the master processor has a packet to send to the slave processor the master processor may initiate the transfer by sending a M RTS command. Upon receiving the M RTS command if the slave processor currently has a send packet pending the slave processor will lower the FlowControl line so that it may be re used as a Cleared To Send signal. The slave processor may then tell the master processor that it is in the process of preparing the SPI DMA to receive the packet during which time the master processor may stop clocking bytes onto the bus and may allow the slave processor to finish preparing for the receive.

The slave processor may then indicate it is ready to receive the full packet by raising the FlowControl line which is now used as the CTS signal . Upon receiving the CTS signal the master processor may proceed to send the M MSG APPENDED command along with the packet itself.

After the completion of the transfer the slave processor may lower the FlowControl line. If a packet was pending at the start of the transfer or a send occurred on the slave processor when the packet was being received the slave processor may reassert the FlowControl line now indicating that it has a pending packet.

Referring again to infusion pump assembly may include switch assembly coupled to electrical control assembly that may allow a user not shown to perform at least one and in some embodiments a plurality of tasks. One illustrative example of such a task is the administration of a bolus dose of the infusible fluid e.g. insulin without the use of a display assembly. Remote control assembly may allow the user to enable disable configure infusion pump assembly to administer the bolus dose of insulin.

Referring also to slider assembly may be configured at least in part to enable the user to manipulate the menu based information rendered on display assembly . An example of slider assembly may include a capacitive slider assembly which may be implemented using a CY8C21434 24LFXI PSOC offered by Cypress Semiconductor of San Jose Calif. the design an operation of which are described within the CSD User Module published by Cypress Semiconductor. For example via slider assembly the user may slide their finger in the direction of arrow resulting in the highlighted portion of the information included within main menu shown in rendered on display assembly scrolling upward. Alternatively the user may slide their finger in the direction of arrow resulting in the highlighted portion of the information included within main menu rendered on display assembly scrolling downward.

Slider assembly may be configured so that the rate at which e.g. the highlighted portion of main menu scrolls upward or downward varies depending upon the displacement of the finger of the user with respect to point of origin . Therefore if the user wishes to quickly scroll upward the user may position their finger near the top of slider assembly . Likewise if the user wishes to quickly scroll downward the user may position their finger near the bottom of slider assembly . Additionally if the user wishes to slowly scroll upward the user may position their finger slightly upward with respect to point of origin . Further if the user wishes to slowly scroll downward the user may position their finger slightly downward with respect to point of origin . Once the appropriate menu item is highlighted the user may select the highlighted menu item via one or more switch assemblies .

Referring also to assume for illustrative purposes that infusion pump assembly is an insulin pump and the user wishes to configure infusion pump assembly so that when switch assembly is depressed by the user a 0.20 unit bolus dose of insulin is administered. Accordingly the user may use slider assembly to highlight Bolus within main menu rendered on display assembly . The user may then use switch assembly to select Bolus . Once selected processing logic not shown within remote control assembly may then render submenu on display assembly as shown in .

The user may then use slider assembly to highlight Manual Bolus within submenu which may be selected using switch assembly . Processing logic not shown within remote control assembly may then render submenu on display assembly as shown in .

The user may then use slider assembly to highlight Bolus 0.0 Units within submenu which may be selected using switch assembly . Processing logic not shown within remote control assembly may then render submenu on display assembly as shown in .

The user may then use slider assembly to adjust the Bolus insulin amount to 0.20 units which may be selected using switch assembly . Processing logic not shown within remote control assembly may then render submenu on display assembly as shown in .

The user may then use slider assembly to highlight Confirm which may be selected using switch assembly . Processing logic not shown within remote control assembly may then generate the appropriate signals that may be sent to the above described telemetry circuitry not shown included within remote control assembly . The telemetry circuitry not shown included within the remote control assembly may then transmit via wireless communication channel established between remote control assembly and infusion pump assembly the appropriate configuration commands to configure infusion pump assembly so that whenever switch assembly is depressed by the user a 0.20 unit bolus dose of insulin is administered.

Once the appropriate commands are successfully transmitted processing logic not shown within remote control assembly may once again render submenu on display assembly as shown in .

Specifically and once programmed via remote control assembly the user may depress switch assembly of infusion pump assembly to administer the above described 0.20 unit bolus dose of insulin. Via the above described menuing system included within remote control assembly the user may define a quantity of insulin to be administered each time that the user depresses switch assembly . While this particular example specifies that a single depression of switch assembly is equivalent to 0.20 units of insulin this is for illustrative purposes only and is not intended to be a limitation of this disclosure as other values e.g. 1.00 units of insulin per depression are equally applicable.

Assume for illustrative purposes that the user wishes to administer a 2.00 unit bolus dose of insulin. To activate the above describe bolus dose administration system the user may be required to press and hold switch assembly for a defined period of time e.g. five seconds at which point infusion pump assembly may generate an audible signal indicating to the user that infusion pump assembly is ready to administer a bolus does of insulin via switch assembly . Accordingly the user may depress switch assembly ten times i.e. 2.00 units is ten 0.20 unit doses . After each time that switch assembly is depressed infusion pump assembly may provide on audible response to the user via an internal speaker sound generation device not shown . Accordingly the user may depress switch assembly the first time and infusion pump assembly may generate a confirmation beep in response thus indicating to the user that infusion pump assembly received the command for in this particular example 0.20 units of insulin. As the desired bolus dose is 2.00 units of insulin the user may repeat this procedure nine more times in order to effectuate a bolus dose of 2.00 units wherein infusion pump assembly generates a confirmation beep after each depression of switch assembly .

While in this particular example infusion pump assemblies are described as providing one beep after each time the user depresses switch assembly this is for illustrative purposes only and is not intended to be a limitation of this disclosure. Specifically infusion pump assembly may be configured to provide a single beep for each defined quantity of insulin. As discussed above a single depression of switch assembly may be equivalent to 0.20 units of insulin. Accordingly infusion pump assembly may be configured to provide a single beep for each 0.10 units of insulin. Accordingly if infusion pump assembly is configured such that a single depression of switch assembly is equivalent to 0.20 units of insulin each time switch assembly is depressed infusion pump assembly may provide the user with two beeps i.e. one for each 0.10 units of insulin .

Once the user has depressed switch assembly on infusion pump assembly a total of ten times the user may simply wait for infusion pump assembly to acknowledge receipt of the instructions to administer a 2.00 unit bolus dose of insulin as opposed to the confirmation beep received at each depression of switch assembly . Once a defined period of time e.g. two seconds passes infusion pump assembly may provide an audible confirmation to the user concerning the quantity of units to be administered via the bolus insulin dose that the user just requested. For example as in this example infusion pump assembly was programmed by the user so that a single depression of switch assembly is equivalent to 0.20 units of insulin infusion pump assembly may beep ten times i.e. 2.00 units is ten 0.20 unit doses .

When providing feedback to the user concerning the quantity of units to be administered via the bolus insulin dose infusion pump assembly may provide a multifrequency audible confirmation. For example and continuing with the above stated example in which ten beeps are to be provided to the user infusion pump assembly may group the beeps into groups of five to facilitate easier counting by the user and the beeps within each group of five may be rendered by infusion pump assembly so that each subsequent beep has a higher frequency than the preceding beep in a manner similar to a musical scale . Accordingly and continuing with the above stated example infusion pump assembly may render a 1 000 Hz beep followed by an 1 100 Hz beep followed by a 1 200 Hz beep followed by a 1 300 Hz beep followed by a 1 400 Hz beep thus completing a group of five beeps followed by a short pause and then a 1 000 Hz beep followed by an 1 100 Hz beep followed by a 1 200 Hz beep followed by a 1 300 Hz beep followed by a 1 400 Hz beep thus completing the second group of five beeps . According to various additional alternative embodiments the multifrequency audible confirmation may utilize various numbers of tones incrementing in frequency. For example an embodiment may utilize twenty different tones incrementing in frequency. However the number of tones should not be construed as a limitation of the present disclosure as number of tones may vary according to design criteria and user need.

Once infusion pump assembly completes the rendering of the multifrequency audible confirmation i.e. the ten beeps described above the user may within a defined period of time e.g. two seconds depress switch assembly to provide a confirmation signal to infusion pump assembly indicating that the multifrequency audible confirmation was accurate and indicative of the size of the bolus dose of insulin to be administered i.e. 2.00 units . Upon receiving this confirmation signal infusion pump assembly may render a confirmation received audible tone and effectuate the delivery of in this particular example the 2.00 unit bolus dose of insulin. In the event that infusion pump assembly fails to receive the above described confirmation signal infusion pump assembly may render a confirmation failed audible tone and will not effectuate the delivery of the bolus dose of insulin. Accordingly if the multifrequency audible confirmation was not accurate indicative of the size of the bolus dose of insulin to be administered the user may simply not provide the above described confirmation signal thereby canceling the delivery of the bolus dose of insulin.

As discussed above in one exemplary embodiment of the above described infusion pump assembly infusion pump assembly may be used to communicate with a remote control assembly . When such a remote control assembly is utilized infusion pump assembly and remote control assembly may routinely contact each other to ensure that the two devices are still in communication with each other. For example infusion pump assembly may ping remote control assembly to ensure that remote control assembly is present and active. Further remote control assembly may ping infusion pump assembly to ensure that infusion pump assembly is still present and active. In the event that one of infusion pump assembly and remote control assembly fails to establish communication with the other assembly the assembly that is unable to establish communication may sound a separation alarm. For example assume that remote control assembly is left in the car of the user while infusion pump assembly is in the pocket of the user. Accordingly and after a defined period of time infusion pump assembly may begin sounding the separation alarm indicating that communication with remote control assembly cannot be established. Using switch assembly the user may acknowledge silence this separation alarm.

As the user may define and administer a bolus insulin dose via switch assembly of infusion pump assembly while remote control assembly is not in communication with infusion pump assembly infusion pump assembly may store information concerning the administered bolus insulin dose within a log file not shown stored within infusion pump assembly . This log file not shown may be stored within nonvolatile memory not shown included within infusion pump assembly . Upon communication being reestablished between infusion pump assembly and remote control assembly infusion pump assembly may provide the information concerning the administered bolus insulin dose stored within the log file not shown of infusion pump assembly to remote control assembly .

Further if the user anticipates separating remote control assembly from infusion pump assembly the user via the above described menuing system may configure infusion pump assembly and remote control assembly to be in separation mode thus eliminating the occurrence of the above described separation alarms. However the devices may continue to ping each other so that when they come back into communication with each other infusion pump assembly and remote control assembly may automatically exit separation mode.

Further if the user anticipates traveling in an airplane the user via the above described menuing system of remote control assembly may configure infusion pump assembly and remote control assembly to be in airplane mode in which each of infusion pump assembly and remote control assembly suspend any and all data transmissions. While in airplane mode infusion pump assembly and remote control assembly may or may not continue to receive data.

Switch assembly may be used to perform additional functions such as checking the battery life of reusable housing assembly pairing reusable housing assembly with remote control assembly and aborting the administration of a bolus does of infusible fluid.

Reusable housing assembly may include a rechargeable battery assembly that may be capable of powering infusion pump assembly for approximately three days when fully charged . Such a rechargeable battery assembly may have a usable life of a predetermined number of usable hours for example or years or other predetermined length of usage. However the predetermined life may depend on many factors including but not limited to one or more of the following climate daily usage and number of recharges. Whenever reusable housing assembly is disconnected from disposable housing assembly infusion pump assembly may perform a battery check on the above described rechargeable battery assembly whenever switch assembly is depressed for a defined period of time e.g. in excess of two seconds . In the event that the above described rechargeable battery assembly is determined to be charged above a desired threshold infusion pump assembly may render a battery pass tone. Alternatively in the event that the above described rechargeable battery assembly is determined to be charged below a desired threshold infusion pump assembly may render a battery fail tone. Infusion pump assembly may include components and or circuitry to determine whether reusable housing assembly is disconnected from disposable housing assembly .

As discussed above and in one exemplary embodiment of the above described infusion pump assembly infusion pump assembly may be used to communicate with remote control assembly . In order to effectuate communication between infusion pump assembly and remote control assembly a paring process may be performed. During such a pairing process one or more infusion pump assemblies e.g. infusion pump assembly may be configured to communicate with remote control assembly and conversely remote control assembly may be configured to communicate with one or more infusion pump assemblies e.g. infusion pump assembly . Specifically the serial numbers of the infusion pump assemblies e.g. infusion pump assembly may be recorded within a pairing file not shown included within remote control assembly and the serial number of remote control assembly may be recorded within a pairing file not shown included within the infusion pump assemblies e.g. infusion pump assembly .

According to an embodiment in order to effectuate such a pairing procedure the user may simultaneously hold down one or more switch assemblies on both remote control assembly and infusion pump assembly . For example the user may simultaneously hold down switch assembly included within remote control assembly and switch assembly included within infusion pump assembly for a defined period exceeding e.g. five seconds. Once this defined period is reached one or more of remote control assembly and infusion pump assembly may generate an audible signal indicating that the above described pairing procedure has been effectuated.

According to another embodiment prior to performing the pairing process the user may uncouple reusable housing assembly from disposable housing assembly . By requiring this initial step further assurance is provided that an infusion pump assembly being worn by a user may not be surreptitiously paired with a remote control assembly.

Once uncoupled the user may enter pairing mode via input assembly of remote control assembly . For example the user may enter pairing mode on remote control assembly via the above described menuing system in combination with e.g. switch assembly . The user may be prompted on display assembly of remote control assembly to depress and hold switch assembly on infusion pump assembly . Additionally remote control assembly may switch to a low power mode to e.g. avoid trying to pair with distant infusion pump assemblies. The user may then depress and hold switch assembly on infusion pump assembly so that infusion pump assembly enters a receive mode and waits for a pairing command from remote control assembly .

Remote control assembly may then transmit a pairing request to infusion pump assembly which may be acknowledged by infusion pump assembly . Infusion pump assembly may perform a security check on the pairing request received from remote control assembly and if the security check passes infusion pump assembly may activate a pump pairing signal i.e. enter active pairing mode . Remote control assembly may perform a security check on the acknowledgment received from infusion pump assembly .

The acknowledgment received from infusion pump assembly may define the serial number of infusion pump assembly and remote control assembly may display that serial number on display assembly of remote control assembly . The user may be asked if they wish to pair with the pump found. If the user declines the pairing process may be aborted. If the user agrees to the pairing process remote control assembly may prompt the user via display assembly to depress and hold switch assembly on infusion pump assembly .

The user may then depress and hold switch assembly on infusion pump assembly and depress and hold e.g. switch assembly on remote control assembly .

Remote control assembly may confirm that remote switch assembly was held which may be reported to infusion pump assembly . Infusion pump assembly may perform a security check on the confirmation received from remote control assembly to confirm the integrity of same. If the integrity of the confirmation received is not verified the pairing process is aborted. If the integrity of the confirmation received is verified any existing remote pair configuration file is overwritten to reflect newly paired remote control assembly the pump pairing completed signal is activated and the pairing process is completed.

Additionally infusion pump assembly may confirm that switch assembly was held which may be reported to remote control assembly . Remote control assembly may perform a security check on the confirmation received from infusion pump assembly to confirm the integrity of same. If the integrity of the confirmation received is not verified the pairing process is aborted. If the integrity of the confirmation received is verified a pair list file within remote control assembly may be modified to add infusion pump assembly . Typically remote control assembly may be capable of pairing with multiple infusion pump assemblies while infusion pump assembly may be capable of only pairing with a single remote control assembly. The pairing completed signal may be activated and the pairing process may be completed.

When the pairing process is completed one or more of remote control assembly and infusion pump assembly may generate an audible signal indicating that the above described pairing procedure has been successfully effectuated.

in the event that the user wishes to cancel a bolus dose of e.g. insulin being administered by infusion pump assembly the user may depress switch assembly e.g. shown in for a defined period exceeding e.g. five seconds. Once this defined period is reached infusion pump assembly may render an audible signal indicating that the above described cancellation procedure has been effectuated.

While switch assembly is shown as being positioned on the top of infusion pump assembly this is for illustrative purposes only and is not intended to be a limitation of this disclosure as other configurations are possible. For example switch assembly may be positioned about the periphery of infusion pump assembly .

Referring also to there is shown an alternative embodiment infusion pump assembly . As with pump assembly infusion pump assembly may include reusable housing assembly and disposable housing assembly .

In a fashion similar to reusable housing assembly reusable housing assembly may include a mechanical control assembly that includes at least one pump assembly and at least one valve assembly . Reusable housing assembly may also include an electrical control assembly that is configured to provide control signals to the mechanical control assembly and effectuate the delivery of an infusible fluid to a user. The valve assembly may be configured to control the flow of the infusible fluid through a fluid path and the pump assembly may be configured to pump the infusible fluid from the fluid path to the user

In a fashion similar to disposable housing assembly disposable housing assembly may be configured for a single use or for use for a specified period of time e.g. e.g. three days or any other amount of time. Disposable housing assembly may be configured such that any components in infusion pump assembly that come in contact with the infusible fluid are disposed on and or within disposable housing assembly .

In this particular embodiment of the infusion pump assembly infusion pump assembly may include switch assembly positioned about the periphery of infusion pump assembly . For example switch assembly may be positioned along a radial edge of infusion pump assembly which may allow for easier use by a user. Switch assembly may be covered with a waterproof membrane configured to prevent the infiltration of water into infusion pump assembly . Reusable housing assembly may include main body portion housing the above described mechanical and electrical control assemblies and locking ring assembly that may be configured to rotate about main body portion in the direction of arrow .

In a fashion similar to reusable housing assembly and disposable housing assembly reusable housing assembly may be configured to releasably engage disposable housing assembly . Such releasable engagement may be accomplished by a screw on a twist lock or a compression fit configuration for example. In an embodiment in which a twist lock configuration is utilized the user of infusion pump assembly may first properly position reusable housing assembly with respect to disposable housing assembly and may then rotate locking ring assembly in the direction of arrow to releasably engage reusable housing assembly with disposable housing assembly .

Through the use of locking ring assembly reusable housing assembly may be properly positioned with respect to disposable housing assembly and then releasably engaged by rotating locking ring assembly thus eliminating the need to rotate reusable housing assembly with respect to disposable housing assembly . Accordingly reusable housing assembly may be properly aligned with disposable housing assembly prior to engagement and such alignment may not be disturbed during the engagement process. Locking ring assembly may include a latching mechanism not shown that may prevent the rotation of locking ring assembly until reusable housing assembly and disposable housing assembly are properly positioned with respect to each other.

Referring also to there is shown an alternative embodiment infusion pump assembly . As with pump assembly infusion pump assembly may include reusable housing assembly and disposable housing assembly .

In a fashion similar to reusable housing assembly reusable housing assembly may include a mechanical control assembly that includes at least one pump assembly and at least one valve assembly . Reusable housing assembly may also include an electrical control assembly that is configured to provide control signals to the mechanical control assembly and effectuate the delivery of an infusible fluid to a user. The valve assembly may be configured to control the flow of the infusible fluid through a fluid path and the pump assembly may be configured to pump the infusible fluid from the fluid path to the user

In a fashion similar to disposable housing assembly disposable housing assembly may be configured for a single use or for use for a specified period of time e.g. e.g. three days or any other amount of time. Disposable housing assembly may be configured such that any components in infusion pump assembly that come in contact with the infusible fluid are disposed on and or within disposable housing assembly .

In this particular embodiment of the infusion pump assembly infusion pump assembly may include switch assembly positioned about the periphery of infusion pump assembly . For example switch assembly may be positioned along a radial edge of infusion pump assembly which may allow for easier use by a user. Switch assembly may be covered with a waterproof membrane and or an o ring or other sealing mechanism may be included on the stem of the switch assembly configured to prevent the infiltration of water into infusion pump assembly . However in some embodiments switch assembly may include an overmolded rubber button thus providing functionality as a waterproof seal without the use of a waterproof membrane or an o ring. However in still other embodiments the overmolded rubber button may additionally be covered by a waterproof membrane and or include an o ring. Reusable housing assembly may include main body portion housing the above described mechanical and electrical control assemblies and locking ring assembly that may be configured to rotate about main body portion in the direction of arrow .

In a fashion similar to reusable housing assembly and disposable housing assembly reusable housing assembly may be configured to releasably engage disposable housing assembly . Such releasable engagement may be accomplished by a screw on a twist lock or a compression fit configuration for example. In an embodiment in which a twist lock configuration is utilized the user of infusion pump assembly may first properly position reusable housing assembly with respect to disposable housing assembly and may then rotate locking ring assembly in the direction of arrow to releasably engage reusable housing assembly with disposable housing assembly .

As locking ring assembly included within infusion pump assembly may be taller i.e. as indicated by arrow than locking ring assembly locking ring assembly may include a passage through which button may pass. Accordingly when assembling reusable housing assembly locking ring assembly may be installed onto main body portion in the direction of arrow . Once locking ring assembly is installed onto main body portion one or more locking tabs not shown may prevent locking ring assembly from being removed from main body portion . The portion of switch assembly that protrudes through passage may then be pressed into main body portion in the direction of arrow thus completing the installation of switch assembly .

Although button is shown in various locations on infusion pump assembly button in other embodiments may be located anywhere desirable on infusion pump assembly .

Through the use of locking ring assembly reusable housing assembly may be properly positioned with respect to disposable housing assembly and then releasably engaged by rotating locking ring assembly thus eliminating the need to rotate reusable housing assembly with respect to disposable housing assembly . Accordingly reusable housing assembly may be properly aligned with disposable housing assembly prior to engagement and such alignment may not be disturbed during the engagement process. Locking ring assembly may include a latching mechanism not shown that prevents the rotation of locking ring assembly until reusable housing assembly and disposable housing assembly are properly positioned with respect to each other. Passage may be elongated to allow for the movement of locking ring about switch assembly .

Referring also to there are shown various views of infusion pump assembly which is shown to include reusable housing assembly switch assembly and main body portion . As discussed above main body portion may include a plurality of components examples of which may include but are not limited to volume sensor assembly printed circuit board vibration motor assembly shape memory actuator anchor switch assembly battery antenna assembly pump assembly measurement valve assembly volume sensor valve assembly and reservoir valve assembly . To enhance clarity printed circuit board has been removed from to allow for viewing of the various components positioned beneath printed circuit board .

The various electrical components that may be electrically coupled with printed circuit board may utilize spring biased terminals that allow for electrical coupling without the need for soldering the connections. For example vibration motor assembly may utilize a pair of spring biased terminals one positive terminal and one negative terminal that are configured to press against corresponding conductive pads on printed circuit board when vibration motor assembly is positioned on printed circuit board . However in the exemplary embodiment vibration motor assembly is soldered directly to the printed circuit board.

As discussed above volume sensor assembly may be configured to monitor the amount of fluid infused by infusion pump assembly . For example volume sensor assembly may employ acoustic volume sensing which is the subject of U.S. Pat. Nos. 5 575 310 and 5 755 683 assigned to DEKA Products Limited Partnership as well as the U.S. Patent Application Publication Nos. US 2007 0228071 A1 US 2007 0219496 A1 US 2007 0219480 A1 US 2007 0219597 A1 the entire disclosures of all of which are incorporated herein by reference.

Vibration motor assembly may be configured to provide a vibration based signal to the user of infusion pump assembly . For example in the event that the voltage of battery which powers infusion pump assembly is below the minimum acceptable voltage vibration motor assembly may vibrate infusion pump assembly to provide a vibration based signal to the user of infusion pump assembly . Shape memory actuator anchor may provide a mounting point for the above described shape memory actuator e.g. shape memory actuator . As discussed above shape memory actuator may be for example a conductive shape memory alloy wire that changes shape with temperature. The temperature of shape memory actuator may be changed with a heater or more conveniently by application of electrical energy. Accordingly one end of shape memory actuator may be rigidly affixed i.e. anchored to shape memory actuator anchor and the other end of shape memory actuator may be applied to e.g. a valve assembly and or a pump actuator. Therefore by applying electrical energy to shape memory actuator the length of shape memory actuator may be controlled and therefore the valve assembly and or the pump actuator to which it is attached may be manipulated.

Antenna assembly may be configured to allow for wireless communication between e.g. infusion pump assembly and remote control assembly . As discussed above remote control assembly may allow the user to program infusion pump assembly and e.g. configure bolus infusion events. As discussed above infusion pump assembly may include one or more valve assemblies configured to control the flow of the infusible fluid through a fluid path within infusion pump assembly and pump assembly may be configured to pump the infusible fluid from the fluid path to the user. In this particular embodiment of infusion pump assembly infusion pump assembly is shown to include three valve assemblies namely measurement valve assembly volume sensor valve assembly and reservoir valve assembly .

As discussed above and referring also to the infusible fluid may be stored within reservoir . In order to effectuate the delivery of the infusible fluid to the user the processing logic not shown included within infusion pump assembly may energize shape memory actuator which may be anchored on one end using shape memory actuator anchor . Referring also to shape memory actuator may result in the activation of pump assembly and reservoir valve assembly . Reservoir valve assembly may include reservoir valve actuator A and reservoir valve B and the activation of reservoir valve assembly may result in the downward displacement of reservoir valve actuator A and the closing of reservoir valve B resulting in the effective isolation of reservoir . Further pump assembly may include pump plunger A and pump chamber B and the activation of pump assembly may result in pump plunger A being displaced in a downward fashion into pump chamber B and the displacement of the infusible fluid in the direction of arrow .

Volume sensor valve assembly may include volume sensor valve actuator A and volume sensor valve B. Referring also to volume sensor valve actuator A may be closed via a spring assembly that provides mechanical force to seal volume sensor valve B. However when pump assembly is activated if the displaced infusible fluid is of sufficient pressure to overcome the mechanical sealing force of volume sensor valve assembly the displacement of the infusible fluid occurs in the direction of arrow . This may result in the filling of volume sensor chamber included within volume sensor assembly . Through the use of speaker assembly port assembly reference microphone spring diaphragm invariable volume microphone volume sensor assembly may determine the volume of infusible fluid included within volume sensor chamber .

Referring also to once the volume of infusible fluid included within volume sensor chamber is calculated shape memory actuator may be energized resulting in the activation of measurement valve assembly which may include measurement valve actuator A and measurement valve B. Once activated and due to the mechanical energy asserted on the infusible fluid within volume sensor chamber by spring diaphragm the infusible fluid within volume sensor chamber may be displaced in the direction of arrow through disposable cannula and into the body of the user.

Referring also to there is shown an exploded view of infusion pump assembly . Shape memory actuator may be anchored on a first end to shape memory actuator anchor . Additionally the other end of shape memory actuator may be used to provide mechanical energy to valve assembly which may activate measurement valve assembly . Volume sensor assembly spring retainer may properly position volume sensor assembly with respect to the various other components of infusion pump assembly . Valve assembly may be used in conjunction with shape memory actuator to activate pump plunger A. Measurement valve B volume sensor valve B and or reservoir valve B may be self contained valves that are configured to allow for installation during assembly of infusion pump assembly by pressing the valves upward into the lower surface of main body portion .

Referring also to there is shown a more detailed view of pump assembly . Pump actuator assembly may include pump actuator support structure bias spring and lever assembly .

Referring also to there is shown a more detailed view of measurement valve assembly . As discussed above valve assembly may activate measurement valve assembly .

Referring also to infusion pump assembly may include measurement valve assembly . As discussed above valve assembly may be activated via shape memory actuator and actuator assembly . Accordingly to infuse the quantity of infusible fluid stored within volume sensor chamber shape memory actuator may need to activate valve assembly for a considerable period of time e.g. one minute or more . As this would consume a considerable amount of power from battery measurement valve assembly may allow for the temporary activation of valve assembly at which point measurement valve latch may prevent valve assembly from returning to its non activated position. Shape memory actuator may be anchored on a first end using electrical contact . The other end of shape memory actuator may be connected to a valve latch . When shape memory actuator is activated shape memory actuator may pull valve latch forward and release valve assembly . As such measurement valve assembly may be activated via shape memory actuator . Once measurement valve assembly has been activated valve latch may automatically latch valve assembly in the activated position. Actuating shape memory actuator may pull valve latch forward and release valve assembly . Assuming shape memory actuator is no longer activated measurement valve assembly may move to a de activated state once valve latch has released valve assembly . Accordingly through the use of measurement valve assembly shape memory actuator does not need to be activated during the entire time that it takes to infuse the quantity of infusible fluid stored within volume sensor chamber .

As discussed above the above described infusion pump assemblies e.g. infusion pumps assemblies may include an external infusion set configured to deliver the infusible fluid to a user. External infusion set may include a cannula assembly which may include a needle or a disposable cannula and tubing assembly which may be also referred to as a tubing set. Tubing assembly may be in fluid communication with reservoir for example by way of the fluid path and with cannula assembly for example either directly or by way of a cannula interface .

Referring also to there is shown an alternative embodiment infusion pump assembly that is configured to store a portion of tubing assembly . Specifically infusion pump assembly may include peripheral tubing storage assembly that is configured to allow the user to wind a portion of tubing assembly about the periphery of infusion pump assembly in a manner similar to that of a yoyo . Peripheral tubing storage assembly may be positioned about the periphery of infusion pump assembly . Peripheral tubing storage assembly may be configured as an open trough into which a portion of tubing assembly may be wound. Alternatively peripheral tubing storage assembly may include one or more divider portions that form a plurality of narrower troughs that may be sized to generate an interference fit between the walls of the narrower trough and the exterior surface of the portion of tubing . When peripheral tubing storage assembly includes plurality of divider portions the resulting narrower troughs may be wound in a spiral fashion about the periphery of infusion pump assembly in a manner similar to the thread of a screw .

Referring also to there is shown an alternative embodiment infusion pump assembly that is configured to store a portion of tubing assembly . Specifically infusion pump assembly may include peripheral tubing storage assembly that is configured to allow the user to wind a portion of tubing assembly about the periphery of infusion pump assembly again in a manner similar to that of a yoyo . Peripheral tubing storage assembly may be positioned about the periphery of infusion pump assembly . Peripheral tubing storage assembly may be configured as an open trough into which a portion of tubing assembly is wound. Alternatively peripheral tubing storage assembly may include one or more divider portions that form a plurality of narrower troughs that may be sized to generate an interference fit between the walls of the narrower trough and the exterior surface of the portion of tubing . When peripheral tubing storage assembly includes plurality of divider portions the resulting narrower trough may be wound in a spiral fashion about the periphery of infusion pump assembly again in a manner similar to the thread of a screw .

Infusion pump assembly may include tubing retainer assembly . Tubing retainer assembly may be configured to releasably secure tubing assembly so as to prevent tubing assembly from unraveling from around infusion pump assembly . In one embodiment of tubing retainer assembly tubing retainer assembly may include downward facing pin assembly positioned above upward facing pin assembly . The combination of pin assemblies may define a pinch point through which tubing assembly may be pushed. Accordingly the user may wrap tubing assembly around the periphery of infusion pump assembly wherein each loop of tubing assembly is secured within peripheral tubing storage assembly via tubing retainer assembly . In the event that the user wishes to lengthen the unsecured portion of tubing assembly the user may release one loop of tubing assembly from tubing retainer assembly . Conversely in the event that the user wishes to shorten the unsecured portion of tubing assembly the user may secure one additional loop of tubing assembly within tubing retainer assembly .

Referring also to there is shown an exemplary embodiment of infusion pump assembly . As with infusion pump assemblies and infusion pump assembly may include reusable housing assembly and disposable housing assembly .

With reference also to in a fashion similar to infusion pump assembly reusable housing assembly may be configured to releasably engage disposable housing assembly . Such releasable engagement may be effectuated by a screw on twist lock or compression fit configuration for example. Infusion pump assembly may include locking ring assembly . For example reusable housing assembly may be properly positioned relative to disposable housing assembly and locking ring assembly may be rotated to releasable engage reusable housing assembly and disposable housing assembly .

Locking ring assembly may include nub that may facilitate rotation of locking ring assembly . Additionally the position of nub e.g. relative to tab of disposable housing assembly may provide verification that reusable housing assembly is fully engaged with disposable housing assembly . For example as shown in when reusable housing assembly is properly aligned with disposable housing assembly nub may be aligned in a first position relative to tab . Upon achieving a fully engaged condition by rotation locking ring assembly nub may be aligned in a second position relative to tab as shown in .

Referring also to and in a fashion similar to reusable housing assembly reusable housing assembly may include mechanical control assembly e.g. which may include valve assembly shown in including one or more valves and one or more pumps for pumping and controlling the flow of the infusible fluid . Reusable housing assembly may also include an electrical control assembly that may be configured to provide control signals to the mechanical control assembly to effectuate the delivery of an infusible fluid to the user. Valve assembly may be configured to control the flow of the infusible fluid through a fluid path and the pump assembly may be configured to pump the infusible fluid from the fluid path to the user.

Mechanical control assembly and electrical control assembly may be contained within a housing defined by base plate body . In some embodiments one or more of base plate and body may provide electromagnetic shielding. In such an embodiment the electromagnetic shielding may prevent and or reduce electromagnetic interference received by electrical control assembly and or created by electrical control assembly . Additionally alternatively EMI shield may be included as shown in and . EMI shield may provide shielding against generated and or received electromagnetic interference.

Reusable housing assembly may include a switch assembly that may be configured to receive user commands e.g. for bolus delivery pairing with a remote control assembly or the like . The switch assembly may include button that may be disposed in opening of body . As shown e.g. in locking ring assembly may include radial slot that may be configured to allow locking ring assembly to be rotated relative to body while still providing facile access to button .

Referring also to electrical control assembly may include printed circuit board as well as battery . Printed circuit board may include the various control electronics for monitoring and controlling the amount of infusible fluid that has been and or is being pumped. For example electrical control assembly may measure the amount of infusible fluid that has just been dispensed and determine based upon the dosage required by the user whether enough infusible fluid has been dispensed. If not enough infusible fluid has been dispensed electrical control assembly may determine that more infusible fluid should be pumped. Electrical control assembly may provide the appropriate signal to mechanical control assembly so that any additional necessary dosage may be pumped or electrical control assembly may provide the appropriate signal to mechanical control assembly so that the additional dosage may be dispensed with the next dosage. Alternatively if too much infusible fluid has been dispensed electrical control assembly may provide the appropriate signal to mechanical control assembly so that less infusible fluid may be dispensed in the next dosage. Electrical control assembly may include one or more microprocessors. In an exemplary embodiment electrical control assembly may include three microprocessors. One processor e.g. which may include but is not limited to a CC2510 microcontroller RF transceiver available from Chipcon AS of Oslo Norway may be dedicated to radio communication e.g. for communicating with a remote control assembly. Two additional microprocessors example of which may include but is not limited to an MSP430 microcontroller available from Texas Instruments Inc. of Dallas Tex. may be dedicated to issuing and carrying out commands e.g. to dispense a dosage of infusible fluid process feedback signals from a volume measurement device and the like .

As shown in base plate may provide access to electrical contacts e.g. which may be electrically coupled to electrical control assembly for recharging battery . Base plate may include one or more features e.g. openings which may be configured to facilitate proper alignment with disposable housing assembly by way of cooperating features e.g. tabs of disposable housing assembly . Additionally as shown in base plate may include various features for mounting valve assembly and electrical control assembly as well as providing access to disposable housing assembly by valve assembly .

Locking ring assembly may include grip inserts e.g. which may include an elastomeric or textured material that may facilitate gripping and twisting locking ring assembly e.g. for engaging disengaging reusable housing assembly and disposable housing assembly . Additionally locking ring assembly may include a sensing component e.g. magnet that may interact with a component of reusable housing assembly e.g. a Hall Effect sensor e.g. to provide an indication of the nature of a mating component e.g. which in some embodiments may include but is not limited to one or more of disposable housing assembly a charging station or a filling station and or of whether reusable housing assembly is properly engaged with the mating component. In the exemplary embodiment a Hall Effect sensor not shown may be located on the pump printed circuit board. The Hall Effect sensor may detect when the locking ring has been rotated to a closed position. Thus the Hall Effect sensor together with magnet may provide a system for determining whether the locking ring has been rotated to a closed position.

The sensing component magnet together with the reusable housing assembly components i.e. in the exemplary embodiment the Hall Effect sensor may work to provide for a determination of whether the reusable housing assembly is properly attached to the intended component or device. Locking ring assembly may not turn without being attached to a component i.e. disposable housing assembly a dust cover or a charger. Thus the sensing component together with the reusable housing assembly component may function to provide many advantageous safety features to the infusion pump system. These features may include but are not limited to one or more of the following. Where the system does not detect being attached to a disposable assembly a dust cover or a charger the system may notify alert or alarm the user as the reusable portion e.g. the valves and pumping components may be vulnerable to contamination or destruction which may compromise the integrity of the reusable assembly. Thus the system may provide for an integrity alarm to alert the user of potential reusable integrity threats. Also where the system senses the reusable assembly is attached to a dust cover the system may power off or reduce power to conserve power. This may provide for more efficient use of power where the reusable assembly is not connecting to a component in which it needs to interact.

Referring also now to in some embodiments in addition to the sensing component a mechanical audible or click indication may indicate that the reusable housing assembly is fully attached to the disposable housing assembly . In some embodiments the latching mechanism shown and described above for example with respect to may include a spring actuated tab assembly. In some embodiments the tab includes the sensing component which in some embodiments may be a magnetic . Referring now also to a cross section view at A is shown of the reusable housing assembly above the disposable housing assembly in the unlocked position. In some embodiments the locked and unlocked position may also be visually indicated to a user patient using icons that may be molded etched and or printed on the disposable housing assembly indicating whether the reusable housing assembly or in some embodiments a fill adapter is in a locked or unlocked relationship with the disposable housing assembly or in some embodiments the same or similar icons may appear on the dust cover . In various embodiments the icons may be any form that may indicate locked and unlocked or a similar indication to aid in the user patient s understanding of the orientation position between the reusable housing assembly and the disposable housing assembly or the dust cover . As shown the reusable housing assembly is aligned about the disposable housing assembly in an unlocked orientation. Referring now also to a cross section view at A is shown of the reusable housing assembly attached to the disposable housing assembly in the unlocked orientation position is shown. The tab is in the unlocked position. Referring now to a cross section view at A is shown of the reusable housing assembly attached to the disposable housing assembly in the locked orientation position is shown. As may be seen the tab has moved towards the disposable housing assembly leaving a space above the tab in the reusable housing assembly . When the tab moves from the unlocked position shown in to the locked position shown in in some embodiments an audible click sound and tactile click may be detected by the user patient. This may be beneficial for many reasons including that the user patient may only hear the audible click sound if the reusable housing assembly and the disposable housing assembly or the dust cover or charger in various embodiments are in the correct orientation and fully locked arrangement. This may ensure the user patient that the infusion pump assembly is in the correct and fully locked position. Thus in various embodiments where an audible click may be heard upon the disposable housing assembly and reusable housing assembly being attached the infusion pump assembly will include two safety checks that they are fully locked 1 the sensing component described and discussed above and 2 the audible click mechanical component. In various embodiments the disposable housing assembly may include a ramp feature that the tab assembly rides on as the reusable housing assembly is rotated from an unlocked to a locked position with respect to the disposable housing assembly . At the end of the ramp in some embodiments an indentation or relief in the disposable housing assembly allows the tab actuated by the spring to click into the indentation relief. Other embodiments allowing for an audible and or tactile indication to the user patient may be used in various embodiments.

Reusable housing assembly may attach to a number of different components including but not limited to a disposable housing assembly a dust cover or a battery charger battery charging station. In each case the Hall Effect sensor may detect that the locking ring is in the closed position and therefore that reusable housing assembly is releasably engaged to a disposable housing assembly a dust cover or a battery charger battery charging station or another component . The infusion pump system may determine the component to which it is attached by using the AVS system which may also be referred to as the volume measurement sensor described in more detail below or by an electronic contact. Referring now also to one embodiment of a dust cover e.g. dust cover is shown. In the exemplary embodiment dust cover may include features such that the locking ring of reusable housing assembly may releasably engage dust cover . In addition dust cover may further include recess region for accommodating the valving and pumping features of reusable housing assembly . Referring also to in some embodiments various embodiments of the dust cover may include a sealing assembly that may be over molded to provide for a complete seal of the dust cover to the reusable housing assembly . As shown in where a cut away cross sectional view of section D in the sealing assembly is over molded. Additionally as may be seen in in some embodiments of the dust cover the dust cover may include icons . As discussed above the icons may be molded etched and or printed onto the dust cover and may be any form that may indicate locked and unlocked or a similar indication to aid in the user patient s understanding of the orientation position between the reusable housing assembly and the dust cover and or indicating whether the reusable housing assembly is in a locked or unlocked position with respect to the dust cover . For example with respect to the dust cover the AVS system may determine that a dust cover and not a disposable housing assembly is connected to the reusable housing assembly. The AVS system may distinguish using a look up table or other comparative data and comparing the measurement data with characteristic dust cover or empty disposable housing assembly data. With respect to the battery charger the battery charger in the exemplary embodiments may include electric contacts. When the reusable housing assembly is attached to the battery charger the infusion pump assembly electronic system may sense that the contacts have been made and will thus indicate that the reusable housing assembly is attached to a battery charger.

Referring also to and an embodiment of valve assembly which may include one or more valves and one or more pumps is shown. As with infusion pump assemblies and valve assembly may generally include reservoir valve plunger pump volume sensor valve and measurement valve . Similar to the previous description reservoir valve and plunger pump may be actuated by shape memory actuator which may be anchored on a first end to shape memory actuator anchor . Additionally measurement valve may be actuated via valve actuator by shape memory actuator which may be anchored on a first end to shape memory actuator anchor . In a similar manner as discussed above measurement valve may be maintained in an open position via measurement valve latch assembly . Measurement valve may be released via actuation of shape memory actuator which may be anchored on a first end by shape memory actuator anchor . In some embodiments shape memory actuator anchor may be potted onto the reusable housing assembly. Using this process during manufacture ensures shape memory length actuator is installed and maintains the desired length and tension strain.

Referring also to and shape memory actuator e.g. which may include one or more shape memory wires may actuate plunger pump via actuator assembly . Actuator assembly may include bias spring and lever assembly . Actuator assembly may actuate both plunger pump and measurement valve .

Referring also to measurement valve may be actuated by shape memory actuator via valve actuator and lever assembly . Once actuated measurement valve latch assembly may maintain measurement valve in an open position. Measurement valve latch assembly actuated by shape memory actuator to release measurement valve allowing it to return to a closed position.

Disposable housing assembly may be configured for a single use or for use for a specified period of time e.g. e.g. three days or any other amount of time. Disposable housing assembly may be configured such that any of the component of infusion pump assembly that come in contact with the infusible fluid may be disposed on and or within disposable housing assembly . As such the risk of contaminating the infusible fluid may be reduced.

Referring also to and disposable housing assembly may include base portion membrane assembly and top portion . Base portion may include recess that together with membrane assembly defines reservoir for receiving an infusible fluid not shown e.g. insulin. Referring also to recess may be at least partially formed by and integral with base portion . Membrane assembly may be sealingly engaged with base portion e.g. by being compressively pinched between base portion and top portion . Top portion may be attached to base portion by conventional means such as gluing heat sealing ultrasonic welding and compression fitting. Additionally alternatively membrane assembly may be attached to base portion e.g. via gluing ultrasonic welding heat sealing and the like to provide a seal between membrane assembly and base portion .

Referring also to an embodiment of the disposable housing assembly is shown without the top portion or membrane assembly. Referring to a magnified cut away view of the pump chamber B as indicated by B in is shown. In some embodiments a groove is included on the wall of the pump chamber. In some embodiments the groove may allow fluid to flow while the pump plunger A is fully actuated thus preventing the pump plunger A from sealing flow out of the pump chamber B.

Referring also to in some embodiments of the disposable housing assembly the disposable housing assembly may include at least one vent which in some embodiments may include a filter which may in some embodiments be a hydrophobic filter which may be in some embodiments be a 10 micron filter made from POREX PM 1020 MUPOR micro porous PTFE membrane however in other embodiments may be a different sized or type of filter for example a 5 micron 15 microns filter and or a GORTEX filter.

Still referring to recess in the exemplary embodiment includes raised portion which includes area about fluid openings leading to the fluid line. Raised portion in the exemplary embodiment extends about the perimeter of recess . However in other embodiments raised portion may not extend the entire perimeter but may be partially about the perimeter. Area about fluid openings may be shaped as shown in the exemplary embodiment including an angled portion which in some embodiments includes 45 degree angles however in other embodiments the angle may be greater or lesser. In some embodiments the pump may not generate a sufficient enough vacuum to collapse the reservoir so as to eliminate the entire volume of fluid that may be stored in the reservoir. Raised portion may act to minimize wasted fluid.

Fluid openings which in the exemplary embodiment may include three openings however in other embodiments may include more openings or fewer openings may be surrounded by area of the raised portion. In the exemplary embodiment fluid openings may be narrow in the center thus creating a surface tension that may prevent the air from being drawn into the opening. In the exemplary embodiment this area may be designed to encourage any air that is present in the reservoir to be drawn above one of fluid openings rather than be pulled through fluid openings and into the fluid line. Additionally because there may be more than one fluid opening where an air bubble is caught above one the air may not prevent fluid from flowing through the other two openings.

Referring also to another embodiment of the disposable housing assembly is shown. In these embodiments and as may be seen in showing a magnified sectional view of section B as indicated in and as may be seen in showing a magnified sectional view of section D as indicated in and is an illustration of the bubble trap a bubble trap and raised area as well as a radius and a relief for the septum are included in the reservoir . In this embodiment the bubble trap is located about the perimeter of the reservoir wall and the radius . However in the area of the raised area the bubble trap includes an outlet section. In the non outlet section of the perimeter of the reservoir the bubble trap includes essentially two portions a taper portion which tapers to a bottom portion . In the outlet section the taper portion ends shown as the end of the taper portion and the bottom portion continues in an upward ramp portion to the reservoir outlet . The reservoir includes a membrane not shown which forms together with the raised area and the upward ramp portion essentially a tunnel between the membrane and the fluid outlet.

As the fluid in the reservoir is pumped out of the reservoir the membrane not shown moves towards the reservoir wall . In the embodiments shown in the fluid tends to congregate in bottom portion of the bubble trap and air bubbles do not. Rather to the extent air is present air bubbles tend to congregate in taper portion of the bubble trap . At the raised area where the taper portion of the bubble trap ends at the end of the taper portion bubbles to the extent present will not likely enter into the upward ramp portion and thus will not likely be pumped through the exit of the reservoir .

Thus as the fluid is pumped through the exit of the reservoir air is not pulled through the exit of the reservoir . The embodiments shown in may be beneficial for many reasons including but not limited to decreasing air that is pumped from the reservoir and into the fluid path in the disposable housing assembly . As air bubbles have a greater surface tension than fluid the bubbles will not tend to congregate in the bottom portion of the bubble trap and further will not tend to flow passed the end of the taper portion and onto the upward ramp portion and through the exit of the reservoir .

Referring also to disposable housing assembly may also include fluid pathway cover . Fluid pathway cover may be received in cavity formed on within base portion . Fluid pathway cover may in some embodiments include at least a portion of one or more channels e.g. channel . The channels included in fluid pathway cover may fluidly couple one or more volcano valve features e.g. volcano valves included on base portion . Volcano valves may include a protrusion having an opening extending through it. Additionally fluid pathway cover and base portion may each define a portion of recess e.g. recess portions included in base portion and fluid pathway cover respectively for fluidly coupling to an infusion set e.g. including cannula . Cannula may be coupled to disposable housing assembly by conventional means e.g. gluing heat sealing compression fit or the like . The fluid pathways defined by fluid pathway cover and the volcano valves e.g. volcano valves of base portion may define a fluid pathway between reservoir and cannula for the delivery of the infusible fluid to the user via the infusion set. However in some embodiments fluid path cover may include at least a portion of the fluid path and in some embodiments fluid path cover may not include at least a portion of the fluid path. In the exemplary embodiment fluid pathway cover may be laser welded to base portion . However in other embodiments fluid pathway cover may also be connected to base portion by conventional means e.g. gluing heat sealing ultrasonic welding compression fit or the like to achieve a generally fluid tight seal between fluid pathway cover and base portion .

With reference also to disposable housing assembly may further include valve membrane cover . Valve membrane cover may be at least partially disposed over the volcano valves e.g. volcano valve and pumping recess included on within base portion . Valve membrane cover may include a flexible material e.g. which may be selectively engaged against the volcano valves by reservoir valve volume sensor valve and measurement valve of reusable housing assembly e.g. for controlling the flow of the infusible fluid. Additionally valve membrane cover may be resiliently deformed into pumping recess by plunger pump to effectuate pumping of the infusible fluid. Valve membrane cover may be engaged between base portion and top portion of disposable housing assembly to form seal between valve membrane cover and base portion . For example in the exemplary embodiment valve membrane cover may be overmolded onto base portion . In other embodiment valve membrane cover may be compressively pinched between base portion and top portion to form seal . Additionally alternatively valve membrane insert may be connected to one or more of base portion and top portion e.g. by gluing heat sealing or the like.

Referring also to top portion may include alignment tabs that may be configured to be at least partially received in openings of base plate of reusable housing assembly to ensure proper alignment between reusable housing assembly and disposable housing assembly . Additionally top portion may include one or more radial tabs configured to be engaged by cooperating tabs of locking ring assembly . The one or more radial tabs e.g. radial tab may include stops e.g. alignment tab stop which may be used for welding it s the tab that fits in the recess to locate and ultrasonically weld e.g. which may prevent further rotation of locking ring assembly once reusable housing assembly and disposable housing assembly are fully engaged.

As discussed above valve membrane insert may allow for pumping and flow of the infusible fluid by reservoir valve plunger pump volume sensor valve and measurement valve . Accordingly top portion may include one or more openings e.g. openings that may expose at least a portion of valve membrane insert for actuation by reservoir valve plunger pump volume sensor valve and measurement valve . Additionally top portion may include one or more openings which may be configured to allow the fill volume to be controlled during filling of reservoir as will be discussed in greater detail below. Reservoir assembly may include ribs e.g. as shown in which may be at least partially received in respective openings . As will be described in greater detail below a force may be applied to one or more of ribs to at least temporarily reduce the volume of reservoir .

In some embodiments it may be desirable to provide a seal between reusable housing assembly and disposable housing assembly . Accordingly disposable housing assembly may include sealing assembly . Sealing assembly may include for example an elastomeric member that may provide a compressible rubber or plastic layer between reusable housing assembly and disposable housing assembly when engaged thus preventing inadvertent disengagement and penetration by outside fluids. For example sealing assembly may be a watertight seal assembly and thus enable a user to wear infusion pump assembly while swimming bathing or exercising.

In a fashion similar to e.g. disposable housing assembly disposable housing assembly may in some embodiments be configured to have reservoir filled a plurality of times. However in some embodiments disposable housing assembly may be configured such that reservoir may not be refilled. Referring also to fill adapter may be configured to be coupled to disposable housing assembly for refilling reservoir using a syringe not shown . Fill adapter may include locking tabs that may be configured to engage radial tabs of disposable housing assembly in a manner generally similar to tabs of locking ring assembly . Accordingly fill adapter may be releasably engaged with disposable housing assembly by aligning fill adapter with disposable housing assembly and rotating fill adapter and disposable housing assembly relative to one another to releasably engage locking tabs with radial tabs .

Fill adapter may further include filling aid which may include guide passage e.g. which may be configured to guide a needle of a syringe not shown to a septum of disposable housing assembly to allow reservoir of disposable housing assembly to be filled by the syringe. In some embodiments guide passage may be an angled bevel or other gradual angled bevel to further guide a syringe to a septum. Fill adapter may facilitate filling reservoir by providing a relatively large insertion area e.g. at the distal opening of guide passage . Guide passage may generally taper to a smaller proximal opening that may be properly aligned with the septum of disposable housing assembly when fill adapter is engaged with disposable housing assembly . Accordingly fill adapter may reduce the dexterity and aim necessary to properly insert a needle through the septum of disposable housing assembly for the purpose of filling reservoir .

As discussed above disposable housing assembly may configured to facilitate controlling the quantity of infusible fluid delivered to reservoir during filling. For example membrane assembly of disposable housing assembly may include ribs that may be depressed and at least partially displaced into reservoir thereby reducing the volume of reservoir . Accordingly when infusible fluid is delivered to reservoir the volume of fluid that may be accommodated by reservoir may be correspondingly reduced. Ribs may be accessible via openings in top portion of disposable housing assembly .

Fill adapter may include one or more button assemblies e.g. button assemblies corresponding to ribs . That is when fill adapter is releasably engaged with disposable housing assembly buttons may be aligned with ribs . Button assemblies may be for example cantilever members capable of being depressed. When fill adapter is releasably engaged with disposable housing assembly one or more of button assemblies may be depressed and may correspondingly displace a respective one of ribs into reservoir causing an attendant reduction in the volume of reservoir .

For example assume for illustrative purposes that reservoir has a maximum capacity of 3.00 mL. Further assume that button assembly is configured to displace rib into disposable housing assembly resulting in a 0.5 mL reduction in the 3.00 mL capacity of disposable housing assembly . Further assume that button assembly is configured to displace rib into disposable housing assembly also resulting in a 0.5 mL reduction in the 3.00 mL capacity of disposable housing assembly . Further assume that button assembly is configured to displace slot assembly into disposable housing assembly also resulting in a 0.5 mL reduction in the 3.00 mL capacity of disposable housing assembly . Therefore if the user wishes to fill reservoir within disposable housing assembly with 2.00 mL of infusible fluid in some embodiments the user may first fill the reservoir to the 3.00 mL capacity and then depresses button assemblies and resulting in the displacement of rib into disposable housing assembly effectively reducing the 3.00 mL capacity of reservoir within disposable housing assembly to 2.00 mL. In some embodiments the user may first depress a respective number of button assemblies effectively reducing the capacity of reservoir and then fill reservoir . Although a particular number of button assemblies are shown representing the exemplary embodiment in other embodiments the number of button assemblies may vary from a minimum of 1 to as many as is desired. Additionally although for descriptive purposes and in the exemplary embodiment each button assembly may displace 0.5 mL in other embodiments the volume of displacement per button may vary. Additionally the reservoir may be in various embodiments include a larger or smaller volume than described in the exemplary embodiment.

According to the above described configuration the button assemblies e.g. button assemblies may employed at least in part to control the fill volume of reservoir . By not depressing any of the button assemblies the greatest fill volume of reservoir may be achieved. Depressing one button assembly e.g. button assembly may allow the second greatest fill volume to be achieved. Depressing two button assemblies e.g. button assemblies may achieve the third greatest fill volume. Depressing all three button assemblies e.g. button assemblies may allow the smallest fill volume to be achieve.

Further in an embodiment button assemblies may be utilized at least in part to facilitate filling of reservoir . For example once a filling needle e.g. which may be fluidly coupled to a vial of infusible fluid has been inserted into reservoir button assemblies may be depressed to pump at least a portion of any air that may be contained within reservoir into the vial of infusible fluid. Button assemblies may subsequently be released to allow infusible fluid to flow from the vial into reservoir . Once reservoir has been filled with the infusible fluid one or more button assemblies e.g. one or more of button assemblies may be depressed thereby squeezing at least a portion of the infusible fluid from reservoir e.g. via a needle used to fill reservoir and back into the vial of infusible fluid . As discussed above the volume of infusible fluid contained within reservoir may be controlled e.g. depending upon how many button assemblies are depressed e.g. which may control how much infusible fluid is squeezed back into the vial of infusible fluid .

With particular reference to filling aid may be pivotally coupled to fill adapter base plate . For example filling aid may include pivot members that may be configured to be received in pivot supports thereby allowing filling aid to pivot between an open position e.g. as shown in and a closed position e.g. as shown in . The closed position may be suitable e.g. for packaging fill adapter storage of fill adapter or the like. In order to ensure that filling aid is properly oriented for filling reservoir fill adapter may include support member . To properly orient filling aid a user may pivot filling aid to a fully open position wherein filling aid may contact support member .

According to an alternative embodiment and referring also to fill adapter may be configured to releasably engage disposable housing assembly via a plurality of locking tabs e.g. locking tabs . Additionally fill adapter may include a plurality of button assemblies e.g. button assemblies that may interact with ribs of disposable housing assembly to adjust a fill volume of reservoir . Fill adapter may further include filling aid having guide passage configured to align a needle of a syringe with the septum of disposable housing e.g. for accessing reservoir for the purpose of filling reservoir with an infusible fluid. Filling aid may be connected to base plate e.g. as an integral component therewith by gluing heat sealing compression fit or the like.

Referring also to vial fill adapter may be configured to facilitate filling reservoir of disposable housing assembly directly from a vial. Similar to fill adapter vial fill adapter may include locking tabs that may be configured to engage radial tabs of disposable housing assembly in a manner generally similar to tabs of locking ring assembly . Accordingly vial fill adapter may be releasably engaged with disposable housing assembly by aligning vial fill adapter with disposable housing assembly and rotating vial fill adapter and disposable housing assembly relative to one another to releasably engage locking tabs with radial tabs .

As discussed above disposable housing assembly may be configured to facilitate controlling the quantity of infusible fluid delivered to reservoir during filling. For example membrane assembly of disposable housing assembly may include ribs that may be depressed and at least partially displaced into reservoir thereby reducing the volume of reservoir . Accordingly when infusible fluid is delivered to reservoir the volume of fluid that may be accommodated by reservoir may be correspondingly reduced. Ribs may be accessible via openings in top portion of disposable housing assembly .

Vial fill adapter may include one or more button assemblies e.g. button assemblies corresponding to ribs e.g. shown in . That is when vial fill adapter is releasably engaged with disposable housing assembly buttons may be aligned with ribs . Button assemblies may be for example cantilever members capable of being depressed. When vial fill adapter is releasably engaged with disposable housing assembly one or more of button assemblies may be depressed and may correspondingly displace a respective one of ribs into reservoir thereby reducing the volume of reservoir .

For example assume for illustrative purposes that reservoir has a maximum capacity of 3.00 mL. Further assume that button assembly is configured to displace rib into disposable housing assembly resulting in a 0.5 mL reduction in the 3.00 mL capacity of disposable housing assembly . Further assume that button assembly is configured to displace rib into disposable housing assembly also resulting in a 0.5 mL reduction in the 3.00 mL capacity of disposable housing assembly . Further assume that button assembly is configured to displace rib into disposable housing assembly also resulting in a 0.50 mL reduction in the 3.00 mL capacity of disposable housing assembly . Therefore if the user wishes to fill reservoir within disposable housing assembly with 2.00 mL of infusible fluid the user may depress button assemblies and resulting in the displacement of ribs and into disposable housing assembly effectively reducing the 3.00 mL capacity of reservoir within disposable housing assembly to 2.0 mL.

Vial fill adapter may further include vial filling aid assembly that may be configured to fluidly couple a vial of infusible fluid to reservoir of disposable housing assembly via a septum. With particular reference to vial filling aid assembly may include double ended needle assembly . Double ended needle assembly may include first needle end configured to penetrate the septum of a vial not shown and second needle end configured to penetrate the septum of disposable housing assembly . As such the vial and reservoir may be fluidly coupled allowing infusible fluid to be transferred from the vial to reservoir . Double ended needle assembly may include vial engagement portion adjacent first end . Vial engagement arms may be configured to releasably engage e.g. a vial cap to assist in maintaining the fluid connection between double ended needle assembly and the vial. Additionally double ended needle assembly may include body that may be slidably received in opening of vial filling aid body . Vial filling aid body may include stabilizer arms e.g. which may be configured to stabilize the vial during filling of disposable housing assembly . In one embodiment the vial may be engaged with double ended needle assembly e.g. such that first end may penetrate the septum of the vial and the cap of the vial may be engaged by engagement arms . Body may be slidably inserted into opening such that second end of double ended needle assembly may penetrate the septum of disposable body assembly .

Similar to fill adapter vial filling aid assembly may be configured to be pivotally coupled to vial fill adapter base plate . For example vial filling aid may include pivot members that may be configured to be received in pivot supports e.g. shown in thereby allowing vial filling aid to pivot between an open position e.g. as shown in and a closed position e.g. as shown in . The closed position may be suitable e.g. for packaging vial fill adapter storage of vial fill adapter or the like. In order to ensure that vial filling aid is properly oriented for filling reservoir vial fill adapter may include support member . To properly orient vial filling aid a user may pivot vial filling aid to a fully open position wherein vial filling aid may contact support member . Additionally vial fill adapter base plate may include one or more locking features e.g. locking tabs that may engage vial filing aid and may maintain vial filling aid in the closed position. Vial fill adapter base plate may also include features e.g. tabs that may be configured to assist in retaining double ended needle assembly e.g. by preventing slidable separation of double ended needle assembly from vial filling aid body .

As shown in filling aid assembly is in a closed position. In this configuration support member may additionally function as a needle guard. When removing filling aid assembly from disposable housing assembly support member may function to safely allow a user to squeeze the ends and rotate filling aid assembly for removal. As shown in in the open position support member may function as a stop to maintain proper orientation.

Referring again to the exemplary embodiments of the fill adapter include a grip feature e.g. in . Grip feature may provide a grip interface for removal of the fill adapter from disposable housing assembly . Although shown in one configuration in these figures in other embodiments the configuration may vary. In still other embodiments a grip feature may not be included.

According to one embodiment fill adapter base plate and vial fill adapter base plate may be interchangeable components. Accordingly a single base plate e.g. either fill adapter base plate or vial fill adapter base plate may be used with either filling aid or vial filling aid . Accordingly the number of distinct components that are required for both filling adapters may be reduced and a user may have the ability to select the filling adapter that may be the most suitable for a given filling scenario.

The various embodiments of the fill adapters may provide many safely benefits including but not limited to providing a system for filling the reservoir without handling a needle protecting the reservoir from unintentional contact with the needle i.e. destruction of the integrity of the reservoir through unintentional puncture designed to be ambidextrous in some embodiments may provide a system for maintaining air in the reservoir.

As discussed above reusable housing assembly may include battery e.g. which may include a rechargeable battery. Referring also to battery charger may be configured to recharge battery . Battery charger may include housing having top plate . Top plate may include one or more electrical contacts generally configured to be electrically coupled to electrical contacts of reusable housing assembly . Electrical contacts may include but are not limited to electrical contact pads spring biased electrical contact members or the like. Additionally top plate may include alignment tabs which may be configured to mate with openings in base plate of reusable housing assembly e.g. as shown in . The cooperation of alignment tabs and openings may ensure that reusable housing assembly is aligned with battery charger such that electrical contacts of battery charger may electrically couple with electrical contacts of reusable housing assembly .

With reference also to battery charger may be configured to releasably engage reusable housing assembly . For example in a similar manner as disposable housing assembly battery charger may include one or more locking tabs e.g. locking tabs shown in . The locking tabs e.g. locking tabs may be engaged by tabs of locking ring assembly . As such reusable housing assembly may be aligned with battery charger via alignment tabs with locking ring in a first unlocked position as shown in . Locking ring may be rotated relative to battery charger in the direction of arrow to releasably engage tabs of locking ring with the locking tabs e.g. locking tabs of battery charger as shown in .

In an embodiment battery charger may include recessed region e.g. which may in the exemplary embodiments provide clearance to accommodate reusable housing assembly pumping and valving components. Referring also to battery charger may provide electrical current to electrical contacts and thereby to reusable housing assembly via electrical contacts for recharging battery of reusable housing assembly . In some embodiments when a signal indicative of a fully engaged reusable housing is not provided current may not be provided to electrical contacts . According to such an embodiment the risk associated with an electrical short circuit e.g. resulting from foreign objects contacting electrical contacts and damage to reusable housing assembly e.g. resulting from improper initial alignment between electrical contacts and electrical contacts may be reduced. Additionally battery charger may not unnecessarily draw current when battery charger is not charging reusable housing assembly .

Still referring to battery charger may include a lower housing portion and top plate . Printed circuit board e.g. which may include electrical contacts may be disposed within a cavity included between top plate and lower housing portion .

Referring also to various embodiments of battery charger docking stations are shown. depicts desktop charger including recess configured to mate with and recharge a reusable housing assembly e.g. reusable housing assembly . The reusable housing assembly may rest in recess and or may be releasably engaged in recess in a similar manner as discussed above. Additionally desktop charger may include recess configured to mate with a remote control assembly e.g. remote control assembly . Recess may include a USB plug e.g. which may be configured to couple with the remote control assembly when the remote control assembly is disposed within recess . USB plug may allow for data transfer to from the remote control assembly as well as charging of remote control assembly. Desktop charger may also include USB port e.g. which may include a mini USB port allowing desktop charger to receive power e.g. for charging the reusable housing assembly and or the remote control assembly . Additionally alternatively USB port may be configured for data transfer to from remote control assembly and or reusable housing assembly e.g. by connection to a computer not shown .

Referring to similar to the previous embodiment desktop charger may include recess for mating with a reusable housing assembly e.g. reusable housing assembly . Desktop charger may also include recess configured to receive a remote control assembly e.g. remote control assembly . One or more of recess may include electrical and or data connections configure to charge and or transfer data to from reusable housing assembly and or remote control assembly respectively.

Referring to another embodiment of a desktop charger is shown. Similar to desktop charger desktop charger may include recesses not shown for respectively mating with reusable housing assembly and remote control assembly . As shown desktop charger may hold reusable housing assembly and remote control assembly in a side by side configuration. Desktop charger may include various electrical and data connection configured to charge and or transfer data to from reusable housing assembly and or remote control assembly as described in various embodiments above.

Referring to collapsible charger may include recess for receiving reusable housing assembly and remote control assembly . Collapsible charger may include various electrical and data connection configured to charge and or transfer data to from reusable housing assembly and or remote control assembly as described in various embodiments above. Additionally as shown in collapsible charger may include pivotable cover . Pivotable cover may be configured to pivot between an open position e.g. as shown in in which reusable housing assembly and remote control assembly may be docked in collapsible charger and a closed position e.g. as shown in in which recess may be covered by pivotable cover . In the closed position recess as well as any electrical and or data connections disposed therein may be protected from damage.

Referring to wall charger may include recess configured to receive reusable housing assembly . Additionally wall charger may include recess configured to receive remote control assembly . Reusable housing assembly and remote control assembly may be positioned in a stacked configuration e.g. thereby providing a relatively slim profile. A rear portion of wall charger may include an electrical plug configured to allow wall charger to be plugged into an electrical receptacle. As such wall charger while plugged into the electrical receptacle may achieve a wall mounted configuration. Additionally while plugged into the electrical receptacle wall charger may be provided with power for charging reusable housing assembly and or remote control assembly .

Referring to wall charger may include recess configured to receive remote control assembly . Additionally wall charger may include a recess not shown configured to receive reusable housing assembly . Wall charger may be configured to position remote control assembly and reusable housing assembly in a back to back configuration which may provide a relatively thin profile. Additionally wall charger may include an electrical plug configured to be plugged into an electrical receptacle. Electrical plug may include a stowable configuration in which electrical plug may be pivotable between a deployed position e.g. as shown and a stowed position. In the deployed position electrical plug may be oriented to be plugged into an electrical receptacle. In the stowed position electrical plug may be disposed within recess which may protect electrical plug from damage and or from damaging other items.

Referring to charger may include recess configured to receive reusable housing assembly . Charger may additionally include a recess not shown configured to receive remote control assembly . Charger may additionally include cover . Cover may be configured to pivot between an open position as shown and a closed position. When cover is in the open position reusable housing assembly and remote control assembly may be accessible e.g. allowing a user to remove install reusable housing assembly and or remote control assembly from into charger . When cover is in the closed position cover and charger body may substantially enclose reusable housing assembly and or remote control assembly and or recess and the recess configured to receive remote control assembly thereby providing damage and or tamper protection for reusable housing assembly remote control assembly and or any electrical and or data connection associated with charger .

Referring to wall charger may include recess configured to receive remote control assembly . Wall charger may also include recess configured to receive reusable housing assembly . Wall charger may be configured to position remote control assembly and reusable housing assembly in a generally side by side configuration thereby providing a relatively slim profile. Charger may additionally include electrical plug e.g. which may be configured to be plugged into an electrical receptacle. Electrical plug may include a stowable configuration in which electrical plug may be pivotable between a deployed position e.g. as shown and a stowed position. In the deployed position electrical plug may be oriented to be plugged into an electrical receptacle. In the stowed position electrical plug may be disposed within recess which may protect electrical plug from damage and or from damaging other items.

Infusion pump therapy may include volume and time specifications. The amount of fluid dispensed together with the dispense timing may be two critical factors of infusion pump therapy. As discussed in detail below the infusion pump apparatus and systems described herein may provide for a method of dispensing fluid together with a device system and method for measuring the amount of fluid dispensed. However in a circumstance where the calibration and precision of the measurement device calibration is critical there may be advantages to determining any compromise in the precision of the measurement device as soon as possible. Thus there are advantages to off board verification of volume and pumping.

As discussed above infusion pump assembly may include volume sensor assembly configured to monitor the amount of fluid infused by infusion pump assembly . Further and as discussed above infusion pump assembly may be configured so that the volume measurements produced by volume sensor assembly may be used to control through a feedback loop the amount of infusible fluid that is infused into the user.

Referring also to there is shown one diagrammatic view and two cross sectional views of volume sensor assembly . Referring also to there is shown various isometric and diagrammatic views of volume sensor assembly which is shown to include upper housing . Referring also to there is shown various isometric and diagrammatic views of volume sensor assembly with upper housing removed exposing speaker assembly reference microphone and printed circuit board assembly . Referring also to there is shown various isometric and diagrammatic views of volume sensor assembly with printed circuit board assembly removed exposing port assembly . Referring also to there is shown various isometric and diagrammatic cross sectional views of volume sensor assembly with printed circuit board assembly removed exposing port assembly . Referring also to there are shown an exploded view of volume sensor assembly exposing upper housing speaker assembly reference microphone seal assembly lower housing port assembly spring diaphragm and retaining ring assembly .

The following discussion concerns the design and operation of volume sensor assembly which is shown in a simplified form in . For the following discussion the following nomenclature may be used 

EQ 1 may be written in terms of a mean pressure P and volume V and a small time dependent perturbation on top of those pressures p t v t as follows EQ 2 

If the acoustic pressure levels are much less than the ambient pressure the equation may be further simplified to 

A very loud acoustic signal 120 dB may correspond to pressure sine wave with amplitude of roughly 20 Pascal. Assuming air at atmospheric conditions 1.4 P 101325 Pa the resulting error is 0.03 . The conversion from dB to Pa is as follows 

The acoustic port may be modeled assuming that all of the fluid in the port essentially moves as a rigid cylinder reciprocating in the axial direction. All of the fluid in the channel is assumed to travel at the same velocity the channel is assumed to be of constant cross section and the end effects resulting from the fluid entering and leaving the channel are neglected.

If we assume laminar flow friction of the form p f dot over v the friction force acting on the mass of fluid in the channel may be written as follows EQ 12 

A second order differential equation may then be written for the dynamics of the fluid in the channel EQ 13 

Using the volume and port dynamics defined above volume sensor assembly may be described by the following system of equations k speaker r resonator 

The relationship between the speaker volume and the variable volume may be referred to as the Cross System transfer function. This transfer function may be derived from the above equations and is as follows 

The difficulty of this relationship is that the complex poles depend on both the variable volume V and the reference volume V. Any change in the mean position of the speaker may result in an error in the estimated volume.

The relationship between the two volumes on each side of the acoustic port may be referred to as the Cross Port transfer function. This relationship is as follows 

This relationship has the advantage that the poles are only dependent on the variable volume and not on the reference volume. It does however have the difficulty that the resonant peak is actually due to the inversion of the zero in the response of the reference volume pressure. Accordingly the pressure measurement in the reference chamber will have a low amplitude in the vicinity of the resonance potentially increasing the noise in the measurement.

The pressures may also be measured on each side of the speaker. This is referred to as the cross speaker transfer function 

The quality of the resonance is the ratio of the energy stored to the power loss multiplied by the resonant frequency. For a pure second order system the quality factor may be expressed as a function of the damping ratio 

The ratio of the peak response to the low frequency response may also be written as a function of the damping ratio 

The variable volume i.e. within volume sensor chamber may also be estimated using the cross port phase. The transfer function for the pressure ratio across the resonant port may be as follows 

The resonant frequency may be found on the physical system using a number of methods. A phase lock loop may be employed to find the 90 phase point this frequency may correspond to the natural frequency of the system. Alternatively the resonant frequency may be calculated using the phase at any two frequencies 

Accordingly the ratio of the phases at two different frequencies and can be used to compute the natural frequency of the system 

For computational efficiency the actual phase does not need to be calculated. All that is needed is the ratio of the real and imaginary parts of the response tan .

The resonant frequency of the system may be estimated using swept sine system identification. In this method the response of the system to a sinusoidal pressure variation may be found at a number of different frequencies. This frequency response data may then used to estimate the system transfer function using linear regression.

The transfer function for the system may be expressed as a rational function of s. The general case is expressed below for a transfer function with an norder numerator and an morder denominator. N and D are the coefficients for the numerator and denominator respectively. The equation has been normalized such that the leading coefficient in the denominator is 1.

where k is the number of data points collected in the swept sine. To simplify the notation this equation may be summarized using the vectors EQ 39 

where y is k by 1 x is k by m n 1 and c is m n 1 by 1. The coefficients may then be found using a least square approach. The error function may be written as follows EQ 40 

The function to be minimized is the weighted square of the error function W is a k k diagonal matrix. EQ 41 EQ 42 

It may be necessary to use the complex transpose in all of these cases. This approach may result in complex coefficients but the process may be modified to ensure that all the coefficients are real. The least square minimization may be modified to give only real coefficients if the error function is changed to be EQ 46 

For a system with a 0order numerator and a second order denominator as shown in the transfer function 

The coefficients in this transfer function may be found based on the expression found in the previous section 49 where 

To find an expression for D in terms of the complex response vector G and the natural frequency s j X may be split into its real and imaginary parts 

Combining these terms results in the final expression for the D matrix which may contain only real values.

The same approach may be taken to find an expression for the b vector in terms of G and . The real and imaginary parts of y are as follows 

The next step is to invert the D matrix. The matrix is symmetric and positive definite so the number of computations needed to find the inverse will be reduced from the general 3 3 case. The general expression for a matrix inverse is 

The Determinant may then be computed in terms of the adjugate matrix values taking advantage of the zero elements in the original array det EQ 63 

This may be expressed in terms of the D matrix and the b and c vectors as follows 2 EQ 68 where EQ 69 

For a system with a 0order numerator and a second order denominator as shown in the transfer function 

The coefficients in this transfer function may be found based on the expression found in the previous section EQ 76 where

To find an expression for D in terms of the complex response vector G and the natural frequency s j split X may be split into its real and imaginary parts 

Combining these terms results in the final expression for the D matrix which may contain only real values.

The same approach may be taken to find an expression for the b vector in terms of G and . The real and imaginary parts of y areas follows 

To implement volume sensor assembly volume sensor assembly should determine the relative response of reference microphone and invariable volume microphone to the acoustic wave set up by speaker assembly . This may be accomplished by driving speaker assembly with a sinusoidal output at a known frequency the complex response of microphones may then be found at that driving frequency. Finally the relative response of microphones may be found and corrected for alternating sampling by e.g. an analog to digital convertor i.e. ADC . Additionally the total signal variance may be computed and compared to the variance of pure tone extracted using the discrete Fourier transform i.e. DFT . This may result in a measure of how much of the signal power comes from noise sources or distortion. This value may then be used to reject and repeat bad measurements.

The signal from the microphone may be sampled synchronously with the output to speaker assembly such that a fixed number of points N are taken per wavelength. The measured signal at each point in the wavelength may be summed over an integer number of wavelengths M and stored in an array x by the ISR for processing after all the data for that frequency has been collected.

A DFT may be performed on the data at the integer value corresponding to the driven frequency of the speaker. The general expression for the first harmonic of a DFT is as follows 

The product MN may be the total number of points and the factor of two may be added such that the resulting real and imaginary portions of the answer match the amplitude of the sine wave 

We may take advantage of the symmetry of the cosine function to reduce the number of computations needed to compute the DFT. The expression above may be equivalent to 

The maximum possible value of the real and imaginary portions of x may be 2 which corresponds to half the AD range. The maximum value of the tone variance may be 2 half the square of the AD range.

The result may be in the units of AD counts squared. It may only be the pseudo variance because the signal has been averaged over M periods before the variance is calculated over the N samples in the averaged period. This may be a useful metric however for finding if the averaged signal looks like a sinusoid at the expected frequency. This may be done by comparing the total signal variance to that of the sinusoid found in the discrete Fourier transform.

The relative response G of microphones may be computed from the complex response of the individual microphones 

The denominator of either expression may be expressed in terms of the reference tone variance computed in the previous section as follows 2 EQ 99 

The signals from microphones may not be sampled simultaneously the A D ISR alternates between microphones taking a total of N samples per wavelength for each of microphones . The result may be a phase offset between two microphones of

Leakage through the seals e.g. seal assembly of volume sensor chamber may be modeled as a second resonant port e.g. port connected to an external volume e.g. external volume .

the frequency response of which may be represented graphically in the Bode diagram shown in and which may also be written in transfer function form 

A bubble underneath the diaphragm material in the variable volume will follow the same dynamic equations as a leakage path. In this case the diaphragm material may act as the resonant mass rather than the leakage port. Accordingly the equation may be as follows EQ 109 

wherein m is the mass of the diaphragm A is the cross sectional area of the diaphragm that can resonate and bis the mechanical damping. EQ 106 may be written in terms of the volume flow rate 

wherein the volume of the air bubble is V. If the bubble volume is substantially smaller than the acoustic volume V

The volume sensor assembly equations derived above assume that the pressure is the same everywhere in the acoustic volume. This is only an approximation as there are time delays associated with the propagation of the sound waves through the volume. This situation may look like a time delay or a time advance based on the relative position of the microphone and speakers.

which makes for a non linear set of equations. However a first order Pade approximation of the time delay may be used as follows 

Volume sensor assembly may also be configured using a third reference volume e.g. reference volume connected with a separate resonant port e.g. port . This configuration may allow for temperature independent volume estimation.

Using these equations and solving for the transfer function across each of the resonant ports results in the following 

The volume of volume sensor chamber may be estimated using the ratio of the natural frequency of the two resonant ports as follows 

EQ 120 illustrates that the volume of volume sensor chamber may be proportional to reference volume . The ratio of these two volumes in the ideal model may only depend on the geometry of the resonant port e.g. port and has no dependence upon temperature.

Assuming a fixed input flow rate from the pump chamber the volume of volume sensor chamber is based upon the following differential equation 

The model fit allows the resonant frequency of the port to be extracted from the sine sweep data. The next step is to relate this value to the delivered volume. The ideal relationship between the resonant frequency and the delivered volume to be expressed as follows 

The speed of sound will vary with temperature so it may be useful to split out the temperature effects.

The volume may then be expressed as a function of the measured resonant frequency and the temperature 

The air resonating in the port e.g. port assembly may extend out into the acoustic volumes at the end of each oscillation. The distance the air extends may be estimated based on the fundamental volume sensor assembly equations. For any given acoustic volume the distance the air extends into the volume may be expressed as a function of the pressure and port cross sectional area 

Sizing V e.g. fixed volume may require trading off acoustic volume with the relative position of the poles and zeros in the transfer function. The transfer function for both Vand V e.g. variable volume are shown below relative to the volume displacement of speaker assembly .

As Vis increased the gain may decrease and the speaker may be driven at a higher amplitude to get the same sound pressure level. However increasing Vmay also have the benefit of moving the complex zeros in the ptransfer function toward the complex poles. In the limiting case where V 1 and you have pole zero cancellation and a flat response. Increasing V therefore may have the benefit of reducing both the resonance and the notch in the ptransfer function and moving the ppoles toward resulting in a lower sensitivity to measurement error when calculating the p ptransfer function.

Higher frequencies may alias down to the frequency of interest wherein the aliased frequency may be expressed as follows EQ 143 

where fis the sampling frequency fis the frequency of the noise source n is a positive integer and f is the aliased frequency of the noise source.

The demodulation routine may effectively filter out noise except at the specific frequency of the demodulation. If the sample frequency is set dynamically to be a fixed multiple of the demodulation frequency then the frequency of the noise that can alias down to the demodulation frequency may be a fixed set of harmonics of that fundamental frequency.

For example if the sampling frequency is eight times the demodulation frequency then the noise frequencies that can alias down to that frequency are as follows 

The sensitivity to temperature may be split into a gain change and a noise change. If the temperature is off by a factor of dT the resulting gain error may be 

Accordingly if the same temperature is used for both sine sweeps any error in the temperature measurement may look like a gain change to the system.

Therefore for a 1 K. temperature error the resulting volume error may be 0.3 at 298 K. This error may include both the error in the temperature sensor and the difference between the sensor temperature and the temperature of the air within volume sensor assembly .

The measurement however may be more susceptible to noise in the temperature measurement. A temperature change during the differential sine sweeps may result in an error that looks more like an offset rather than a gain change 

Accordingly if the measurement varies by 0.1 K during the two measurement sine sweeps the difference may be 0.012 uL. Therefore it may be better to use a consistent temperature estimate for each delivery rather than taking a separate temperature measurement for each sine sweep as shown in .

The LM73 temperature sensor has a published accuracy of 1 C. and a resolution of 0.03 C. Further the LM73 temperature sensor seems to consistently have a startup transient of about 0.3 C. that takes about five sine sweeps to level out as shown in .

Since the above described infusion pump assemblies e.g. infusion pump assembly provides discrete deliveries of infusible fluid the above described infusion pump assemblies may be modeled entirely in the discrete domain in the manner shown in which may be reduced to the following 

The AVS system described above works by comparing the acoustic response in fixed volume and variable volume to a speaker driven input and extracting the volume of the variable volume . As such there is a microphone in contact with each of these separate volumes e.g. microphones . The response of variable volume microphone may also be used in a more gross manner to detect the presence or absence of disposable housing assembly . Specifically if disposable housing assembly is not attached to i.e. positioned proximate variable volume essentially no acoustic response to the speaker driven input should be sensed. The response of fixed volume however should remain tied to the speaker input. Thus the microphone data may be used to determine whether disposable housing assembly by simply ensuring that both microphones exhibit an acoustic response. In the event that microphone i.e. the microphone positioned proximate fixed volume exhibits an acoustic response and microphone i.e. the microphone positioned proximate variable volume does not exhibit an acoustic response it may be reasonably concluded that disposable housing assembly is not attached to reusable housing assembly . It should be noted that a failure of variable volume microphone may also appear to be indicative of disposable housing assembly not being attached as the failure of variable volume microphone may result in a mid range reading that is nearly indistinguishable from the microphone response expected when disposable housing assembly is not attached.

As part of the demodulation routine employed in each frequency response calculation the minimum and maximum readings of both fixed volume microphone and variable volume microphone may be calculated. The sum of these maximum and minimum values may be calculated over the entire sine sweep as discussed above for both microphone and microphone as follows.

While may be divided by the number of sine sweeps to get the average minimum maximum difference for the sine sweep which is then compared to a threshold the threshold may equivalently be multiplied by N for computational efficiency. Accordingly the basic disposable detection algorithm may be defined as follows 

The additional condition that the maximum minimum difference be greater than the threshold is a check performed to ensure that a failed speaker is not the cause of the acoustic response received. This algorithm may be repeated for any sine sweep thus allowing a detachment of disposable housing assembly to be sensed within e.g. at most two consecutive sweeps i.e. in the worst case scenario in which disposable housing assembly is removed during the second half of an in progress sine sweep .

Thresholding for the above described algorithm may be based entirely on numerical evidence. For example examination of typical minimum maximum response differences may show that no individual difference is ever less than five hundred ADC counts. Accordingly all data examined while disposable housing assembly is detached from reusable housing assembly may show that all minimum maximum response differences as being well under five hundred ADC counts. Thus the threshold for 8 may be set at T 500.

While volume sensor assembly is described above as being utilized within an infusion pump assembly e.g. infusion pump assembly this is for illustrative purposes only and is not intended to be a limitation of this disclosure as other configurations are possible and are considered to be within the scope of this disclosure. For example volume sensor assembly may be used within a process control environment for e.g. controlling the quantity of chemicals mixed together. Alternatively volume sensor assembly may be used within a beverage dispensing system to control e.g. the quantity of ingredients mixed together.

While volume sensor assembly is described above as utilizing a port e.g. port assembly as a resonator this is for illustrative purposes only as other configurations are possible and are considered to be within the scope of this disclosure. For example a solid mass not shown may be suspended within port assembly and may function as a resonator for volume sensor assembly . Specifically the mass not shown for the resonator may be suspended on a diaphragm not shown spanning port assembly . Alternatively the diaphragm itself not shown may act as the mass for the resonator. The natural frequency of volume sensor assembly may be a function of the volume of variable volume . Accordingly if the natural frequency of volume sensor assembly can be measured the volume of variable volume may be calculated.

The natural frequency of volume sensor assembly may be measured in a number of different ways. For example a time varying force may be applied to the diaphragm not shown and the relationship between that force and the motion of the diaphragm not shown may be used to estimate the natural frequency of volume sensor assembly . Alternately the mass not shown may be perturbed and then allowed to oscillate. The unforced motion of the mass not shown may then be used to calculate the natural frequency of volume sensor assembly .

The force applied to the resonant mass not shown may be accomplished in various ways examples of which may include but are not limited to 

The force applied to the resonant mass may be measured in various ways examples of which may include but are not limited to 

Similarly the displacement of the resonant mass not shown may be estimated by measuring the pressure in the variable volume or measured directly in various ways examples of which may include but are not limited to 

Further the resonant mass not shown may be integral to either the force or displacement type sensor i.e. the resonant mass not shown may be made of piezoelectric material .

The application of force and measurement of displacement may be accomplished by a single device. For example a piezoelectric material may be used for the resonant mass not shown and a time varying voltage current may be applied to the piezoelectric material to create a time varying force. The resulting voltage current applied to the piezoelectric material may be measured and the transfer function between the two used to estimate the natural frequency of volume sensor assembly .

As discussed above the resonant frequency of volume sensor assembly may be estimated using swept sine system identification. Specifically the above described model fit may allow the resonant frequency of the port assembly to be extracted from the sine sweep data which may then be used to determine the delivered volume. The ideal relationship between the resonant frequency and the delivered volume may be expressed as follows 

The speed of sound will vary with temperature so it may be useful to split out the temperature effects.

The volume may then be expressed as a function of the measured resonant frequency and the temperature 

Infusion pump assembly may then compare this calculated volume V i.e. representative of the actual volume of infusible fluid delivered to the user to the target volume i.e. representative of the quantity of fluid that was supposed to be delivered to the user . For example assume that infusion pump assembly was to deliver a 0.100 unit basal dose of infusible fluid to the user every thirty minutes. Further assume that upon effectuating such a delivery volume sensor assembly indicates a calculated volume V i.e. representative of the actual volume of infusible fluid delivered to the user of 0.095 units of infusible fluid.

When calculating volume V infusion pump assembly may first determine the volume of fluid within volume sensor chamber prior to the administration of the dose of infusible fluid and may subsequently determine the volume of fluid within volume sensor chamber after the administration of the dose of infusible fluid wherein the difference of those two measurements is indicative of V i.e. the actual volume of infusible fluid delivered to the user . Accordingly Vis a differential measurement.

V2 may be the total air space over the diaphragm in the variable volume chamber. The actual fluid delivery to the patient may be the difference in V2 from when the chamber was full to after the measurement valve was opened and the chamber was emptied. V2 may not directly be the delivered volume. For example the air volume may be measured and a series of differential measurements may be taken. For occlusion an empty measurement may be taken the chamber may be filed a full measurement may be taken and then a final measurement may be taken after the exit valve is open. Accordingly the difference between the first and second measurement may be the amount pumped and the difference between the second and third is the amount delivered to the patient.

Accordingly electrical control assembly may determine that the infusible fluid delivered is 0.005 units under what was called for. In response to this determination electrical control assembly may provide the appropriate signal to mechanical control assembly so that any additional necessary dosage may be pumped. Alternatively electrical control assembly may provide the appropriate signal to mechanical control assembly so that the additional dosage may be dispensed with the next dosage. Accordingly during administration of the next 0.100 unit dose of the infusible fluid the output command for the pump may be modified based on the difference between the target and amount delivered.

Referring also to there is shown one particular implementation of a control system for controlling the quantity of infusible fluid currently being infused based at least in part on the quantity of infusible fluid previously administered. Specifically and continuing with the above stated example assume for illustrative purposes that electrical control assembly calls for the delivery of a 0.100 unit dose of the infusible fluid to the user. Accordingly electrical control assembly may provide a target differential volume signal which identifies a partial basal dose of 0.010 units of infusible fluid per cycle of shape memory actuator to volume controller . Accordingly and in this particular example shape memory actuator may need to be cycled ten times in order to achieve the desired basal dose of 0.100 units of infusible fluid i.e. 10 cycles 0.010 units per cycle 0.100 units . Volume controller in turn may provide on time signal to SMA i.e. shape memory actuator controller . Also provided to SMA controller is battery voltage signal .

Specifically shape memory actuator may be controlled by varying the amount of thermal energy e.g. joules applied to shape memory actuator . Accordingly if the voltage level of battery is reduced the quantity of joules applied to shape memory actuator may also be reduced for a defined period of time. Conversely if the voltage level of battery is increased the quantity of joules applied to shape memory actuator may also be increased for a defined period of time. Therefore by monitoring the voltage level of battery via battery voltage signal the type of signal applied to shape memory actuator may be varied to ensure that the appropriate quantity of thermal energy is applied to shape memory actuator regardless of the battery voltage level.

SMA controller may process on time signal and battery voltage signal to determine the appropriate SMA drive signal to apply to shape memory actuator . One example of SMA drive signal may be a series of binary pulses in which the amplitude of SMA drive signal essentially controls the stroke length of shape memory actuator and therefore pump assembly and the duty cycle of SMA drive signal essentially controls the stroke rate of shape memory actuator and therefore pump assembly . Further since SMA drive signal is indicative of a differential volume i.e. the volume infused during each cycle of shape memory actuator SMA drive signal may be integrated by discrete time integrator to generate volume signal which may be indicative of the total quantity of infusible fluid infused during a plurality of cycles of shape memory actuator . For example since as discussed above it may take ten cycles of shape memory actuator at 0.010 units per cycle to infuse 0.100 units of infusible fluid discrete time integrator may integrate SMA drive signal over these ten cycles to determine the total quantity infused of infusible fluid as represented by volume signal .

SMA drive signal may actuate pump assembly for e.g. one cycle resulting in the filling of volume sensor chamber included within volume sensor assembly . Infusion pump assembly may then make a first measurement of the quantity of fluid included within volume sensor chamber as discussed above . Further and as discussed above measurement valve assembly may be subsequently energized resulting in all or a portion of the fluid within volume sensor chamber being delivered to the user. Infusion pump assembly may then make a measurement of the quantity of fluid included within volume sensor chamber as described above and use those two measurements to determine V i.e. the actual volume of infusible fluid delivered to the user during the current cycle of shape memory actuator . Once determined V i.e. as represented by signal may be provided i.e. fed back to volume controller for comparison to the earlier received target differential volume.

Continuing with the above stated example in which the differential target volume was 0.010 units of infusible fluid assume that V i.e. as represented by signal identifies 0.009 units of infusible fluid as having been delivered to the user. Accordingly infusion pump assembly may increase the next differential target volume to 0.011 units to offset the earlier 0.001 unit shortage. Accordingly and as discussed above the amplitude and or duty cycle of SMA drive signal may be increased when delivering the next basal dose of the infusible fluid to the user. This process may be repeated for the remaining nine cycles of shape memory actuator as discussed above and discrete time integrator may continue to integrate SMA drive signal to generate volume signal which may define the total quantity of infusible fluid delivered to the user.

Referring also to there is shown one possible embodiment of volume controller . In this particular implementation volume controller may include PI proportional integrator controller . Volume controller may include feed forward controller for setting an initial guess concerning on time signal . For example for the situation described above in which target differential volume signal identifies a partial basal dose of 0.010 units of infusible fluid per cycle of shape memory actuator feed forward controller may define an initial on time of e.g. one millisecond. Feed forward controller may include e.g. a lookup table that define an initial on time that is based at least in part upon target differential volume signal . Volume controller may further include discrete time integrator for integrating target differential volume signal and discrete time integrator for integrating V i.e. as represented by signal .

Referring also to there is shown one possible embodiment of feed forward controller . In this particular implementation feed forward controller may define a constant value signal and may include amplifier e.g. a unity gain amplifier the output of which may be summed with constant value signal at summing node . The resulting summed signal i.e. signal may be provided to as an input signal to e.g. lookup table which may be processed to generate the output signal of feed forward controller .

As discussed above pump assembly may be controlled by shape memory actuator . Further and as discussed above SMA controller may process on time signal and battery voltage signal to determine the appropriate SMA drive signal to apply to shape memory actuator .

Referring also to there is shown one particular implementation of SMA controller . As discussed above SMA controller may be responsive to on time signal and battery voltage signal and may provide SMA drive signal to shape memory actuator . SMA controller may include a feedback loop including unit delay the output of which may be multiplied with battery voltage signal at multiplier . The output of multiplier may be amplified with e.g. unity gain amplifier . The output of amplifier may be applied to the negative input of summing node to which on time signal is applied . The output of summing node may be amplified via e.g. unity gain amplifier . SMA controller may also include feed forward controller to provide an initial value for SMA drive signal in a fashion similar to feed forward controller of volume controller See . The output of feed forward controller may be summed at summing node with the output of amplifier and an integrated representation i.e. signal of the output of amplifier to form SMA drive signal .

SMA drive signal may be provided to control circuitry that effectuates the application of power to shape memory actuator . For example SMA drive signal may be applied to switching assembly that may selectively apply current signal supplied from battery and or fixed signal to shape memory actuator. For example SMA drive signal may effectuate the application of energy supplied from battery via current signal via switching assembly in a manner that achieves the duty cycle defined by SMA drive signal . Unit delay may generate a delayed version of the signal applied to shape memory actuator to form battery voltage signal which may be applied to SMA controller .

When applying power to shape memory actuator voltage may be applied for a fixed amount of time and a at a fixed duty cycle with an unregulated voltage b at a fixed duty cycle with a regulated voltage c at a variable duty cycle based upon a measured current value d at a variable duty cycle based upon a measured voltage value and e at a variable duty cycle based upon the square of a measured voltage value. Alternatively voltage may be applied to shape memory actuator for a variable amount of time based upon a measured impedance.

When applying an unregulated voltage for a fixed amount of time at a fixed duty cycle inner loop feedback may not be used and shape memory actuator may be driven at a fixed duty cycle and with an on time determined by the outer volume loop.

When applying a regulated voltage for a fixed amount of time at a fixed duty cycle inner loop feedback may not be used and shape memory actuator may be driven at a fixed duty cycle and with an on time determined by the outer volume loop.

When applying an unregulated voltage at a variable duty cycle based upon a measured current value the actual current applied to shape memory actuator may be measured and the duty cycle may be adjusted during the actuation of shape memory actuator to maintain the correct mean current.

When applying an unregulated voltage at a variable duty cycle based upon a measured voltage value the actual voltage applied to shape memory actuator may be measured and the duty cycle may be adjusted during the actuation of shape memory actuator to maintain the correct mean voltage.

When applying an unregulated voltage at a variable duty cycle based upon the square of a measured voltage value the actual voltage applied to shape memory actuator may be measured and the duty cycle may be adjusted during the actuation of shape memory actuator to maintain the square of the voltage at a level required to provide the desired level of power to shape memory actuator based upon the impedance of shape memory actuator .

Referring also to there is shown other implementations of SMA controller . Specifically is an electrical schematic that includes a microprocessor and various control loops that may be configured to provide a PWM signal that may open and close the switch assembly. The switch assembly may control the current that is allowed to flow through the shape memory actuator. The battery may provide the current to the shape memory actuator. Further B discloses a volume controller and an inner shape memory actuator controller. The shape memory actuator controller may provide a PWM signal to the pump which may be modified based on the battery voltage. This may occur for a fixed ontime the result being a volume that may be measured by volume sensor assembly and fed back into the volume controller.

In our preferred embodiment we vary the duty cycle based on the measured battery voltage to give you approximately consistent power. We adjust the duty cycle to compensate for a lower battery voltage. Battery voltage may change for two reasons 1 as batteries are discharged the voltage slowly decreases and 2 when you apply a load to a battery it has an internal impedance so its voltage dips. This is something that happens in any type of system and we compensate for that by adjusting the duty cycle thus mitigating the lower or varying battery voltage. Battery voltage may be measured by the microprocessor. In other systems 1 voltage may be regulated put a regulator to maintain the voltage at a steady voltage 2 feedback based on something else i.e. speed or position of a motor not necessarily measuring the battery voltage .

Other configurations may be utilized to control the shape memory actuator. For example A the shape memory actuator may be controlled at fixed duty cycle with unregulated voltage. As voltage varies the repeatability of heating the shape memory actuator is reduced. B a fixed duty cycle regulated voltage may be utilized which compensate for changes in battery voltage. However regulate the voltage down is less efficient due to energy of energy. C the duty cycle may be varied based on changes in current which may required more complicated measurement circuitry. D The duty cycle may be varied based on measured voltage. E The duty cycle may be varied based upon the square of the current or the square of the voltage divided by resistance. F the voltage may be applied for a variable amount of time based on the measured impedance e.g. may measure impedance using Wheatstone gauge not shown . The impedance of the shape memory actuator may be correlated to strain i.e. may correlate how much the SMA moves based on its impedance .

Referring also to and as discussed above to enhance the safety of infusion pump assembly electrical control assembly may include two separate and distinct microprocessors namely supervisor processor and command processor . Specifically command processor may perform the functions discussed above e.g. generating SMA drive signal and may control relay switch assemblies that control the functionality of in this example shape memory actuators respectively . Command processor may receive feedback from signal conditioner concerning the condition e.g. voltage level of the voltage signal applied to shape memory actuators . Command processor may control relay switch assembly independently of relay switch assemblies . Accordingly when an infusion event is desired both of supervisor processor and command processor must agree that the infusion event is proper and must both actuate their respective relays switches. In the event that either of supervisor processor and command processor fails to actuate their respective relays switches the infusion event will not occur. Accordingly through the use of supervisor processor and command processor and the cooperation and concurrence that must occur the safety of infusion pump assembly is enhanced.

The supervisor processor may prevent the command processor from delivering when it is not supposed and also may alarm if the command processor does not deliver when it should be delivering. The supervisor processor may deactivate the relay switch assembly if the command processor actuates the wrong switch or if the command processor it tries to apply power for too long.

The supervisor processor may redundantly doing calculations for how much insulin should be delivered i.e. double checking the calculations of the command processor . Command processor may decide the delivery schedule and the supervisor processor may redundantly check those calculations.

Supervisor also redundantly holds the profiles delivery profiles in RAM so the command processor may be doing the correct calculations but if is has bad RAM would cause the command to come up with the wrong result. The Supervisor uses its local copy of the basal profile etc. to double check.

Supervisor can double check AVS measurements looks at the AVS calculations and applies safety checks. Every time AVS measurement is taken it double checks.

Referring also to one or more of supervisor processor and command processor may perform diagnostics on various portions of infusion pump assembly .

For example voltage dividers may be configured to monitor the voltages V1 V2 respectively sensed at distal ends of e.g. shape memory actuator . The value of voltages V1 V2 in combination with the knowledge of the signals applied to relay switch assemblies may allow for diagnostics to be performed on various components of the circuit shown in in a manner similar to that shown in illustrative diagnostic table .

As discussed above and as illustrated in to enhance the safety of infusion pump assembly electrical control assembly may include a plurality of microprocessors e.g. supervisor processor and command processor each of which may be required to interact and concur in order to effectuate the delivery of a dose of the infusible fluid. In the event that the microprocessors fail to interact concur the delivery of the dose of infusible fluid may fail and one or more alarms may be triggered thus enhancing the safety and reliability of infusion pump assembly .

A master alarm may be utilized that tracks the volume error over time. Accordingly if the sum of the errors becomes too large the master alarm may be initiated indicating that something may be wrong with the system. Accordingly the master alarm may be indicative of a total volume comparison being performed and a discrepancy being noticed. A typical value of the discrepancy required to initiate the master alarm may be 1.00 milliliters. The master alarm may monitor the sum in a leaky fashion i.e. Inaccuracies have a time horizon .

Referring also to there is shown one such illustrative example of such interaction amongst multiple microprocessors during the delivery of a dose of the infusible fluid. Specifically command processor may first determine the initial volume of infusible fluid within volume sensor chamber . Command processor may then provide a pump power request message to supervisor processor . Upon receiving the pump power request message supervisor processor may e.g. energize relay switch thus energizing shape memory actuator and may send a pump power on message to command processor . Upon receiving the pump power on message command processor may actuate e.g. pump assembly by energizing relay switch during which time supervisor processor may monitor the actuation of e.g. pump assembly .

Once actuation of pump assembly is complete command processor may provide a pump power off message to supervisor processor . Upon receiving the pump power off message supervisor processor may deenergize relay switch and provide a pump power off message to command processor . Upon receiving the pump power off message command processor may measure the quantity of infusible fluid pumped by pump assembly . This may be accomplished by measuring the current quantity of fluid within volume sensor chamber and comparing it with the quantity determined above in step . Once determined command processor may provide a valve open power request message to supervisor processor . Upon receiving the valve open power request message supervisor processor may energize relay switch thus energizing shape memory actuator and may send a valve open power on message to command processor . Upon receiving the valve open power on message command processor may actuate e.g. measurement valve assembly by energizing relay switch during which time supervisor processor may monitor the actuation of e.g. measurement valve assembly .

Once actuation of measurement valve assembly is complete command processor may provide a valve power off message to supervisor processor . Upon receiving the valve power off message supervisor processor may deenergize relay switch and provide a valve power off message to command processor .

Upon receiving the valve power off message command processor may provide a valve close power request message to supervisor processor . Upon receiving the valve close power request message supervisor processor may energize relay switch thus energizing shape memory actuator and may send a power on message to command processor . Upon receiving the power on message command processor may actuate an energizing relay switch not shown that is configured to energize shape memory actuator during which time supervisor processor may monitor the actuation of e.g. shape memory actuator .

As discussed above and referring temporarily to shape memory actuator may be anchored on a first end using electrical contact . The other end of shape memory actuator may be connected to bracket assembly . When shape memory actuator is activated shape memory actuator may pull bracket assembly forward and release valve assembly . As such measurement valve assembly may be activated via shape memory actuator . Once measurement valve assembly has been activated bracket assembly may automatically latch valve assembly in the activated position. Actuating shape memory actuator may pull bracket assembly forward and release valve assembly . Assuming shape memory actuator is no longer activated measurement valve assembly may move to a de activated state once bracket assembly has released valve assembly . Accordingly by actuating shape memory actuator measurement valve assembly may be deactivated.

Once actuation of shape memory actuator is complete command processor may provide a power off message to supervisor processor . Upon receiving the power off message supervisor processor may deenergize relay switch and may provide a power off message to command processor . Upon receiving the power off message command processor may determine the quantity of infusible fluid within volume sensor chamber thus allowing command processor to compare this measured quantity to the quantity determined above in step to determine the quantity of infusible fluid delivered to the user.

In the event that the quantity of infusible fluid delivered to the user is less than the quantity of infusible fluid specified for the basal bolus infusion event the above described procedure may be repeated via loop .

Referring also to there is shown another illustrative example of the interaction amongst processors this time during the scheduling of a dose of infusible fluid. Command processor may monitor for the receipt of a basal scheduling message or a bolus request message respectively . Upon receipt of either of these messages command processor may set the desired delivery volume and may provide a delivery request message to supervisor processor . Upon receiving the delivery request message supervisor processor may verify the volume defined by command processor . Once verified supervisor processor may provide a delivery accepted message to command processor . Upon receipt of the delivery accepted message command processor may update the controller e.g. the controller discussed above and illustrated in and execute delivery of the basal bolus dose of infusible fluid. Command processor may monitor and update the total quantity of infusible fluid delivered to the user as discussed above and illustrated in . Once the appropriate quantity of infusible fluid is delivered to the user command processor may provide a delivery done message to supervisor processor . Upon receipt of the delivery done message supervisor processor may update the total quantity of infusible fluid delivered to the user. In the event that the total quantity of infusible fluid delivered to the user is less than the quantity defined above in step the infusion process discussed above may be repeated via loop .

Referring also to there is shown an example of the manner in which supervisor processor and command processor may interact while effectuating a volume measurements via volume sensor assembly as described above .

Specifically command processor may initialize volume sensor assembly and begin collecting data from volume sensor assembly the process of which may be repeated for each frequency utilized in the above described sine sweep. Each time that data is collected for a particular sweep frequency a data point message may be provided from command processor which may be received by supervisor processor .

Once data collection is completed for the entire sine sweep command processor may estimate the volume of infusible fluid delivered by infusion pump assembly . Command processor may provide a volume estimate message to supervisor processor . Upon receiving this volume estimate message supervisor processor may check i.e. confirm the volume estimate message. Once checked i.e. confirmed supervisor processor may provide a verification message to command processor . Once received from supervisor processor command processor may set the measurement status for the dose of infusible fluid delivered by volume sensor assembly .

As discussed above and referring temporarily to the various embodiments of the infusion pump assembly e.g. infusion pump assembly discussed above may be configured via a remote control assembly . When configurable via remote control assembly the infusion pump assembly may include telemetry circuitry not shown that allows for communication e.g. wired or wireless between the infusion pump assembly and e.g. remote control assembly thus allowing remote control assembly to remotely control the infusion pump assembly. Remote control assembly which may also include telemetry circuitry not shown and may be capable of communicating with the infusion pump assembly may include display assembly and input assembly . Input assembly may include slider assembly and switch assemblies . In other embodiments the input assembly may include a jog wheel a plurality of switch assemblies or the like. Remote control assembly may allow the user to program basal and bolus delivery events.

Remote control assembly may include two processors one processor e.g. which may include but is not limited to a CC2510 microcontroller RF transceiver available from Chipcon AS of Oslo Norway may be dedicated to radio communication e.g. for communicating with infusion pump assembly . The second processor included within remote control assembly which may include but are not limited to an ARM920T and an ARM922T manufactured by ARM Holdings PLC of the United Kingdom may be a command processor and may perform data processing tasks associated with e.g. configuring infusion pump assembly .

Further and as discussed above one embodiment of electrical control assembly may include three microprocessors. One processor e.g. which may include but is not limited to a CC2510 microcontroller RF transceiver available from Chipcon AS of Oslo Norway may be dedicated to radio communication e.g. for communicating with a remote control assembly . Two additional microprocessors e.g. supervisor processor and command processor may effectuate the delivery of the infusible fluid as discussed above . Examples of supervisor processor and command processor may include but is not limited to an MSP430 microcontroller available from Texas Instruments Inc. of Dallas Tex.

The OS may be a non preemptive scheduling system in that all tasks may run to completion before the next task is allowed to run regardless of priority. Additionally context switches may not be performed. When a task completes executing the highest priority task that is currently scheduled to run may then be executed. If no tasks are scheduled to execute the OS may place the processor e.g. supervisor processor and or command processor into a low power sleep mode and may wake when the next task is scheduled. The OS may only be used to manage main loop code and may leave interrupt based functionality unaffected.

The OS may be written to take advantage of the C language. Inheritance as well as virtual functions may be key elements of the design allowing for easy creation scheduling and managing of tasks.

At the base of the OS infrastructure may be the ability to keep track of system time and controlling the ability to place the processor in Low Power Mode LPM also known as sleep mode . This functionality along with the control and configuration of all system clocks may be encapsulated by the SysClocks class.

The SysClocks class may contain the functionality to place the processor e.g. supervisor processor and or command processor into LPM to reduce energy consumption. While in LPM the slow real time clock may continue to run while the fast system clock that runs the CPU core and most peripherals may be disabled.

Placing the processor into LPM may always be done by the provided SysClocks function. This function may contain all required power down and power up sequences resulting in consistency whenever entering or exiting LPM. Waking from LPM may be initiated by any interrupts based on the slow clock.

The OS may keep track of three aspects of time seconds milliseconds and the time of day. Concerning seconds SysClocks may count seconds starting when the processor comes out of reset. The second counter may be based on the slow system clocks and therefore may increment regardless of whether the processor is in LPM or at full power. As a result it is the boundary at which the processor may wake from sleep to execute previously scheduled tasks. If a task is scheduled to run immediately from an interrupt service routine ISR the ISR may wake the processor from LPM on exit and the task may be executed immediately. Concerning milliseconds in addition to counting the seconds since power on SysClocks may also count milliseconds while the processor is in full power mode. Since the fast clock is stopped during LPM the millisecond counter may not increment. Accordingly whenever a task is scheduled to execute based on milliseconds the processor may not enter LPM. Concerning time of day the time of day may be represented within SysClocks as seconds since a particular point time e.g. seconds since 1 Jan. 2004 .

The SysClocks class may provide useful functionality to be used throughout the Command and Supervisor project code base. The code delays may be necessary to allow hardware to settle or actions to be completed. SysClocks may provide two forms of delays a delay based on seconds or a delay based on milliseconds. When a delay is used the processor may simply wait until the desired time has passed before continue with its current code path. Only ISRs may be executed during this time. SysClocks may provide all of the required functionality to set or retrieve the current time of day.

The word task may be associated with more complex scheduling systems therefore within the OS task may be represented by and referred to as Managed Functions. The ManagedFunc class may be an abstract base class that provides all the necessary control members and functionality to manage and schedule the desired functionality.

The ManagedFunc base class may have five control members two scheduling manipulation member functions and one pure virtual execute function that may contain the managed functionality. All of the ManagedFunc control members may be hidden from the derived class and may only be directly set by the derived class during creation thus simplifying the use and enhancing the safety of infusion pump assembly .

The Function ID may be set at the time of creation and may never be changed. All Function IDs may be defined within a single .h file and the base ManagedFunc constructor may strongly enforce that the same ID may not be used for more than one managed function. The ID may also define the priority of a function with respect to other functions based upon the function ID assigned wherein higher priority functions are assigned lower function IDs. The highest priority task that is currently scheduled to execute may execute before lower priority tasks.

All other control members may be used to represent the function s current scheduled state when it should be executed and if upon execution the function should be rescheduled to execute in a previously set amount of time. Manipulation of these controls and states may be allowed but only through the public member functions thus enforcing safety controls on all settings .

To control the scheduling of a managed function the set start and set repeat functions may be used. Each of these member functions may be a simple interface allowing the ability to configure or disable repeat settings as well as control whether a managed function is inactive scheduled by seconds milliseconds or time of day.

Through inheritance creating a Managed Function may be done by creating a derived class and defining the pure virtual execute function containing the code that needs to be under scheduling control. The ManagedFunc base class constructor may be based upon the unique ID of a function but may also be used to set default control values to be used at start up.

For example to create a function that runs thirty seconds after start up and every 15 seconds thereafter the desired code is placed into the virtual execute function and the function ID scheduled by second state thirty second start time and repeat setting of fifteen seconds is provided to the constructor.

The following is an illustrative code example concerning the creation of a managed function. In this particular example a heartbeat function is created that is scheduled to execute for the first time one second after startup of infusion pump assembly and execute every ten seconds thereafter 

The actual execution of the Managed Functions may be controlled and performed by the SleepManager class. The SleepManager may contain the actual prioritized list of managed functions. This prioritized list of functions may automatically be populated by the managed function creation process and may ensure that each function is created properly and has a unique ID.

The main role of the SleepManager class may be to have its manage function called repeatedly from the processors main loop and or from a endless while loop. Upon each call of manage the SleepManager may execute all functions that are scheduled to run until the SleepManager has exhausted all scheduled functions at which time the SleepManager may place the processor in LPM. Once the processor wakes from LPM the manage function may be reentered until the processor is again ready to enter LPM this process may be repeated until stopped e.g. by a user or by the system .

If the processor has to be kept in full power mode for an extended period of time e.g. while an analog to digital conversion is being sampled the SleepManager may provide functionality to disable entering LPM. While LPM is disabled the manage function may continuously search for a scheduled task.

The SleepManager may also provide an interface to manipulate the scheduling and repeat settings of any managed function through the use of the unique ID of the function which may allow any section of code to perform any required scheduling without having direct access to or unnecessary knowledge of the desired ManagedFunc object.

Radio circuitry included within each of infusion pump assembly and remote control assembly may effectuate wireless communication between remote control assembly and infusion pump assembly . A 2.4 GHz radio communications chip e.g. a Texas Instruments CC2510 radio transceiver with an internal 8051 microcontroller may be used for radio communications.

Concerning link availability remote control assembly may provide the primary means for controlling the infusion pump assembly and may provide detailed feedback to the user via the graphical user interface GUI of remote control assembly . Concerning latency the communications system may be designed to provide for low latency to deliver data from remote control assembly to the infusion pump assembly and vice versa . Concerning energy both remote control assembly and infusion pump assembly may have a maximum energy expenditure for radio communications.

The radio link may support half duplex communications. Remote control assembly may be the master of the radio link initiating all communications. Infusion pump assembly may only respond to communications and may never initiate communications. The use of such a radio communication system may provide various benefits such as increased security a simplified design e.g. for airplane use and coordinated control of the radio link.

Referring also to there is shown one illustrative example of the various software layers of the radio communication system discussed above.

The radio processors included within remote control assembly and infusion pump assembly may transfer messaging packets between an SPI port and a 2.4 GHz radio link and vice versa . The radio may always be the SPI slave. On infusion pump assembly radio processor PRP See may service two additional nodes over the SPI port that are upstream namely command processor and supervisor processor . In some embodiments on remote control assembly the radio processor CRP may service at least one additional node over the SPI port that may be either upstream or down stream for example in some embodiments the above described remote control processor UI and the Continuous Glucose Engine CGE .

A messaging system may allow for communication of messages between various nodes in the network. The UI processor of remote control assembly and e.g. supervisor processor may use the messaging system to configure and initiate some of the mode switching on the two system radios. It may be also used by the radios to convey radio and link status information to other nodes in the network.

When the radio of remote control assembly wishes to gather channel statistics from the infusion pump assembly or update the master channel list of the radio of infusion pump assembly the radio of remote control assembly may use system messages. Synchronization for putting the new updated list into effect may use indicators in the heartbeat messages to remove timing uncertainty.

The radio communication system may be written in C to be compatible with the messaging software. A four byte radio serial number may be used to address each radio node. A hash table may be used to provide a one to one translation between the device readable serial number string and the radio serial number. The hash table may provide a more randomized 8 bit logical address so that pumps e.g. infusion pump assembly or controllers with similar readable serial numbers are more likely to have unique logical addresses. Radio serial numbers may not have to be unique between pumps e.g. infusion pump assembly and controllers due to the unique roles each has in the radio protocol.

The radio serial number of remote control assembly and the radio serial number of infusion pump assembly may be included in all radio packets except for the RF Pairing Request message that may only include the radio serial number of remote control assembly thus ensuring that only occur with the remote control assembly infusion pump assembly to which it is paired. The CC2510 may support a one byte logical node address and it may be advantageous to use one byte of the radio serial number as the logical node address to provide a level of filtering for incoming packets.

The Quiet Radio signal may be used by the UI processor of remote control assembly to prevent noise interference on the board of remote control assembly by other systems on the board. When Quiet Radio is asserted the radio application of remote control assembly may send a message to the radio of infusion pump assembly asserting Radio Quiet Mode for a pre determined period of time. The Quiet Radio feature may not be required based on noise interference levels measured on the PC board of remote control assembly . During this period of time the radio of remote control assembly may stay in Sleep Mode 2 for up to a maximum of 100 ms. The radio of remote control assembly may come out of Sleep Mode 2 when the Quiet Radio signal is de asserted or the maximum time period has expired. The UI processor of remote control assembly may assert Quiet Radio at least one radio communication s interval before the event needs to be asserted. The radio of remote control assembly may inform the radio of infusion pump assembly that communications will be shutdown during this quiet period. The periodic radio link protocol may have status bits bytes that accommodate the Quiet Radio feature unless Quiet Radio is not required.

The radio software may integrate with the messaging system and radio bootloader on the same processor and may be verified using a throughput test. The radio software may integrate with the messaging system SPI Driver using DMA and radio bootloader all on the same processor e.g. the TI CC2510 .

The radio of remote control assembly may be configured to consume no more than 32 mAh in three days assuming one hundred minutes of fast heartbeat mode communications per day . The radio of infusion pump assembly may be configured to consume no more than 25 mAh in three days assuming one hundred minutes of fast heartbeat mode communications per day .

The radio of remote control assembly may set the heartbeat period for both radios. The period may be selectable in order to optimize power and link latency depending on activity. The desired heartbeat period may be communicated in each heartbeat from the radio of remote control assembly to the radio of infusion pump assembly . This may not exclusively establish the heartbeat rate of infusion pump assembly due to other conditions that determine what mode to be in. When in fast heartbeat mode the radio of remote control assembly may set the heartbeat period to 20 ms if data packets are available to send or receive thus providing low link latency communications when data is actively being exchanged.

When in fast heartbeat mode the radio of remote control assembly may set the heartbeat period to 60 ms four heartbeats after a data packet was last exchanged in either direction on the radio. Keeping the radio heartbeat period short after a data packet has been sent or received may assure that any data response packet may be also serviced using a low link latency. When in slow heartbeat mode the heartbeat rate may be 2.00 seconds or 6.00 second depending upon online or offline status respectively.

The infusion pump assembly may use the heartbeat rate set by the radio of remote control assembly . The radio of remote control assembly may support the following mode requests via the messaging system 

The radio of infusion pump assembly may support the following mode requests via the messaging system 

The radio may use a system message to obtain the local radio serial number. On remote control assembly the radio may get the serial number from the UI processor of remote control assembly . The radio may use a system message to store the paired radio serial number.

Remote control assembly and the radio of infusion pump assembly may issue a status message using the messaging system to the UI processor of remote control assembly and command processor whenever the following status changes 

The radio configuration message may be used to configure the number of radio retries. This message may be sent over the messaging system. The UI processor of remote control assembly will send this command to both the radio of remote control assembly and the radio of infusion pump assembly to configure these radio settings.

There may be two parameters in the radio configuration message namely the number of RF retries e.g. the value may be from 0 to 10 and the radio offline parameters e.g. the value may be from 1 to 100 in percent of bandwidth .

The radio application on both the remote control assembly and infusion pump assembly may have an API that allows the messaging system to configure the number of RF retries and radio offline parameters.

Forward Error Correction FEC may or may not be utilized. Although Forward Error Correction FEC may be used to increase the effective signal dynamic range by approximately 3 dB FEC requires fixed packet sizes and doubles the number of over the air bits for the same fixed size message.

The radio may function within 1.83 meters distance under nominal operating conditions except in pairing mode . It may be a goal that the radio function within 7.32 meters distance under nominal operating conditions. The transmit power level may be 0 dBm except in pairing mode and the transmit power level in pairing mode may be 22 dBm. Since the desired radio node address of infusion pump assembly may be not known by the remote control assembly in pairing mode both infusion pump assembly and remote control assembly may use a lower transmit power to reduce the likelihood of inadvertently pairing with another infusion pump assembly.

Instruments CC2510 radio transceiver includes this functionality. If AES encryption is used fixed keys may be utilized as fixed keys provide a quick way to enable encryption without passing keys. However key exchange may be provided for in future versions of infusion pump assembly . The fixed keys may be contained in one separate header source file with no other variables but the fixed keys data thus allowing for easier management of read access of the file.

Pairing may be the process of exchanging radio serial numbers between remote control assembly and infusion pump assembly . Remote control assembly may be paired with infusion pump assembly when infusion pump assembly knows its serial number. Infusion pump assembly may be paired with remote control assembly when remote control assembly knows its serial number.

Pairing mode which is graphically depicted in may require that four messages to be exchanged over the RF link 

Additionally remote control assembly may cancel the pairing process at any time via the RF pairing abort message from remote control assembly to infusion pump assembly . Pairing mode may not support messaging system data transfers.

The radio of infusion pump assembly may enter pairing mode upon receiving a pairing mode request message. It may be the responsibility of supervisor processor on infusion pump assembly to request the radio to enter pairing mode if there is no disposable attached to infusion pump assembly and the user has pressed the button of infusion pump assembly for six seconds. The radio of infusion pump assembly may set the appropriate transmit power level for pairing mode. Infusion pump assembly may only be paired with one remote control assembly at a time.

Upon receiving the first valid RF pairing request message while in pairing mode the radio of infusion pump assembly may use the serial number of remote control assembly for the duration of pairing mode and respond with an RF pairing acknowledge message containing the radio serial number infusion pump assembly .

The radio of infusion pump assembly may timeout of pairing mode automatically after 2.0 0.2 seconds if no RF pairing request is received. The radio of infusion pump assembly may issue a pairing request received message after transmitting the RF pairing acknowledge. This message to supervisor processors will allow feedback to the user during the pairing confirm process. The radio of infusion pump assembly may automatically timeout of pairing mode in 1.0 0.1 minutes after sending an RF pairing acknowledge unless an RF pairing confirm request is received. The radio of infusion pump assembly may issue a store paired radio serial number message if an RF pairing confirm request message is received after receiving a RF pairing request message. This action may store the radio serial number of remote control assembly in the non volatile memory of infusion pump assembly and may overwrite the existing pairing data for the infusion pump assembly .

The radio of infusion pump assembly may transmit an RF pairing confirm acknowledge and exit pairing mode after the acknowledgment from the store paired radio serial number message is received. This may be the normal exit of pairing mode on infusion pump assembly and may result in infusion pump assembly powering down until connection mode or paring mode entered by the user.

If the radio of infusion pump assembly exits pairing mode upon successfully receiving a pairing confirm request message then the radio of infusion pump assembly may revert to the newly paired remote control assembly and may send a pairing completion success message to command processor . The radio of infusion pump assembly may exit pairing mode upon receiving an RF pairing abort message. The radio of infusion pump assembly may exit pairing mode upon receiving a pairing abort request message addressed to it. This may allow command processor or supervisor processor to abort the pairing process locally on the infusion pump assembly .

The radio of remote control assembly may enter pairing mode upon receiving a pairing mode request message. It may be the responsibility of the UI processor of remote control assembly to request that the radio enter pairing mode under the appropriate conditions. The radio of remote control assembly may set the appropriate transmit power level for pairing mode. The radio of remote control assembly may transmit RF pairing requests until an RF pairing acknowledge is received or pairing is aborted.

The radio of remote control assembly may automatically abort pairing mode if the RF pairing acknowledge message is not received within 30.0 1.0 seconds after entering pairing mode. Upon receiving the first valid RF pairing acknowledge message while in pairing mode the radio of remote control assembly may send a pairing success message to the UI processor of remote control assembly that includes the serial number of infusion pump assembly and may use that serial number for the duration of pairing mode. This message may provide a means for the UI processor of remote control assembly to have the user confirm the serial number of the desired infusion pump assembly . If the radio of remote control assembly receives multiple responses concerning a single pairing request from infusion pump assembly the first valid one may be used.

The Radio of remote control assembly may only accept an RF pairing confirm acknowledge messages after an RF pairing acknowledge is received while in pairing mode. The radio of remote control assembly may transmit the RF pairing confirm message upon receiving a pair confirm request message from the UI processor of remote control assembly .

The radio of remote control assembly may check that infusion pump assembly confirms the pairing before adding infusion pump assembly to the pairing list. The radio of remote control assembly may issue a store paired radio serial number message if an RF pairing complete message is received. This action may allow the UI processor of remote control assembly to store the new serial number of infusion pump assembly and provide user feedback of a successful pairing. It may be the responsibility of the UI processor of remote control assembly to manage the list of paired infusion pump assemblies.

The radio of remote control assembly may send an RF pairing abort message and exit pairing mode upon receiving a pairing abort request message. This may allow the UI processor of the remote control assembly to abort the pairing process on both the remote control assembly and acknowledged infusion pump assembly .

In connection request mode the radio of remote control assembly may attempt to acquire each infusion pump assembly in its paired infusion pump assembly list and retrieve its connection ready status. The connection process which is graphically depicted in may allow remote control assembly to quickly identify one of its paired infusion pump assemblies that may be ready to be used. The radio of remote control assembly may be capable of performing the connection request mode with up to six paired infusion pump assemblies. Connection request mode may be only supported on remote control assembly and may be a special form of acquisition mode. In connection request mode remote control assembly may connect with the first infusion pump assembly to respond. However each message may be directed to a specific infusion pump assembly serial number.

The radio of remote control assembly may obtain the latest paired infusion pump assembly serial number list upon entering connection mode. The radio of remote control assembly may enter connection mode upon receiving a connection mode request message. It may be the responsibility of the UI processor of remote control assembly to request that the radio enter connection mode when it desires communications with a paired infusion pump assembly. The radio of remote control assembly may issue a connection assessment message to the UI processor of remote control assembly containing the radio serial number of the first infusion pump assembly if any that is connection ready . The radio of remote control assembly may generate the connection assessment message within thirty seconds of entering connection request mode. The radio of remote control assembly may exit connection request mode upon receipt of the connection assessment acknowledgement and transition to fast heartbeat mode. The radio of remote control assembly may exit connection request mode upon receipt of a connection request abort message from the UI processor of remote control assembly .

On remote control assembly acquisition mode may be used to find a particular paired infusion pump assembly. The radio of remote control assembly may send RF RUT aRe yoU There packets to the desired paired infusion pump assembly. If the infusion pump assembly receives the RF RUT message it may respond to the radio of remote control assembly . Multiple channels may be used in the acquisition mode algorithm to improve the opportunity for the radio of remote control assembly to find the paired infusion pump assembly.

The radio of remote control assembly may enter acquisition mode upon receiving an acquisition mode request or fast heartbeat mode request message while in RF Off Mode. The radio of remote control assembly may enter sync ed acquisition mode upon receiving an acquisition mode request or fast heartbeat mode request message while in search sync mode. It may be the responsibility of the UI processor of remote control assembly to request that the radio enter acquisition mode when the RF link is off line and remote control assembly desires communications with infusion pump assembly .

The radio of remote control assembly may only communicate with one paired infusion pump assembly except in pairing and connection modes . When communications are lost the UI processor of remote control assembly may use acquisition mode at some periodic rate limited by the power budget to attempt to restore communications.

Upon entering acquisition mode the radio of infusion pump assembly may obtain the serial number of the last stored paired remote control assembly . The radio of infusion pump assembly may only communicate with the remote control assembly to which it has been paired except while in the pairing request mode . The radio of infusion pump assembly may transition from acquisition mode to fast heartbeat mode upon successfully acquiring synchronization with the remote control assembly . The acquisition mode of infusion pump assembly may be capable of acquiring synchronization within 6.1 seconds which may implies that the infusion pump assembly may always be listening at least every 6 seconds when in acquisition mode.

Data packets may be sent between two paired devices when the two devices are in sync mode and online. The two devices may sync via a heartbeat packet before data packets are exchanged. Each radio may send data packets at known time intervals after the heartbeat exchange. The infusion pump assembly may adjust its timing to anticipate reception of a packet. The radio may support one data packet in each direction on each heartbeat. The radio may provide a negative response to a fast heartbeat mode request if the radio if offline. The radio of remote control assembly may change to fast heartbeat mode if a system request for fast heartbeat mode is received while in slow heartbeat mode and the radio is online.

Upon transitioning to fast heartbeat mode from acquisition mode the radio of remote control assembly may send the master channel list message. The master channel list may be built by the radio of remote control assembly and sent to the radio of infusion pump assembly to allow a selection of frequency hopping channels based on historical performance. When in fast heartbeat mode or slow heartbeat mode periodic heartbeat messages may be exchanged between the radio of remote control assembly and the radio of infusion pump assembly . The periodicity of these messages may be at the heartbeat rate. The heartbeat messages may allow data packet transfers to take place and may also exchange status information. The two radios may exchange the following status information Quiet Mode data availability buffer availability heartbeat rate and prior channel performance. It may be a goal to keep the packet size of the heartbeat messages small in order to conserve power. The radio may provide for a maximum data packet size of eighty two bytes when in Sync Mode. The messaging system may be designed to support packet payload sizes up to sixty four bytes. This maximum size was selected as an optimal trade off between minimum messages types and non fragmented messages. The eighty two bytes may be the maximum packet size of the messaging system including packet overhead.

The messaging system has an API that may allow the radio protocol to send an incoming radio packet to it. The messaging system may also have an API that allows the radio protocol to get a packet for transmission over the radio network. The messaging system may be responsible for packet routing between the radio protocol and the SPI port. Data packets may be given to the messaging system for processing. The messaging system may have an API that allows the radio protocol to obtain a count of the number of data packets waiting to be sent over the radio network. The radio protocol may query the messaging system on each heartbeat to determine if data packets are available to send over the radio network. It may be desirable for the software to check the availability of a message just before the heartbeat is sent to minimize round trip message latency.

The radio protocol may be capable of buffering one incoming radio data packet and passing the packet to the messaging system. The radio protocol may send the data packet to the messaging system upon receipt of the data packet. The message system may be responsible for routing radio data packets to the proper destination node. The radio protocol may be capable of buffering one packet from the messaging system.

The radio protocol may be responsible for acknowledging receipt of valid data packets over the RF link via an RF ACK reply packet to the sending radio. The RF ACK packet may contain the source and destination radio serial numbers RF ACK command identification and sequence number of the data packet being acknowledged.

The radio transmitting a radio data packet may retransmit that radio data packet on the next heartbeat with the same sequence number if an RF ACK is not received and the retry count is within the maximum RF retries allowed. It may be expected that from time to time interference will corrupt a transmission on a particular frequency. An RF retry allows the same packet to be retransmitted at the next opportunity at a different frequency. The sequence number provides a means of uniquely identifying the packet over a short time window. The number of radio packet retries may be configurable using the radio configuration command. Allowing more retries may increase the probability of a packet being exchanged but introduces more latency for a round trip messages. The default number of radio retries at power up may be ten i.e. the maximum transmission attempts before dropping the message .

A one byte modulo 256 radio sequence number may be included in all radio data packets over the RF link. Since the radio may be responsible for retrying data packet transmission if not acknowledged the sequence number may provide a way for the two radios to know if a data packet is a duplicate. The transmitted sequence number may be incremented for each new radio data packet and may be allowed to rollover. When a data packet is successfully received with the same sequence number as the previous successfully received data packet and in the same direction the data packet may be ACK d and the received data packet discarded. This may remove duplicate packets generated by the RF protocol before they are introduced into the network. Note that it may be possible that multiple data packets in a row may need to be dropped with the same sequence number under extreme situations.

If a heartbeat is missed the radio of remote control assembly and the radio of infusion pump assembly may attempt to send and listen respectively for subsequent heartbeats. The radio of remote control assembly and the radio of infusion pump assembly may automatically change from fast heartbeat mode or slow heartbeat mode to search sync mode if heartbeats are missed for two seconds. This may minimize power consumption when the link is lost by allowing the radios to continue to use their synchronization information as two seconds allows sufficient time to hop through all channels.

as these are the only conditions where messaging system traffic may be exchanged. All other conditions may be considered offline.

The radio may initialize to radio off mode at the start of code execution from reset. When code first executes on the radio processor the initial state may be the radio off mode to allow other processors to perform self tests before requesting the radio to be active. This requirement does not intend to define the mode when waking from sleep mode. The radio may cease RF communications when set to radio off mode. On remote control assembly this mode may be intended for use on an airplane to suppress RF emissions. Since infusion pump assembly only responds to transmissions from remote control assembly which will have ceased transmitting in airplane mode radio off mode may only be used on infusion pump assembly when charging.

Command processor may be informed of airplane mode and that therefore the RF was intentionally turned off on remote control assembly so that it does not generate walk away alerts. However this may be completely hidden from the radio of infusion pump assembly .

The radio of remote control assembly and the radio of infusion pump assembly may periodically attempt to exchange heartbeats in order to reestablish data bandwidth while in search sync mode. The radio of remote control assembly may transition to radio off mode after twenty minutes of search sync mode with no heartbeats successfully exchanged.

The radio of infusion pump assembly may transition to acquisition mode after twenty minutes of search sync mode with no heartbeats successfully exchanged. Listening during pre agreed time slots may be the most efficient use of power for infusion pump assembly to re establish the RF link. After a loss of communications the crystal tolerance and temperature drift may make it necessary to expand the receive window of infusion pump assembly over time. Staying in search sync mode for extended periods e.g. 5 20 minutes after communications loss may cause the instantaneous power consumed to exceed the average power budgeted for the radio of infusion pump assembly . The radio of remote control assembly may not be forced to expand its window so staying in search sync mode may be very power efficient. Acquisition mode may consume more power for remote control assembly . Twenty minutes may be used as a compromise to balance power consumption on both the radio of remote control assembly and the radio of infusion pump assembly .

The radio of remote control assembly and the radio of infusion pump assembly may transition to slow heartbeat mode if they successfully exchange three of the last five heartbeats. Approximately every six seconds a burst of five heartbeats may be attempted. If three of these are successful the bandwidth may be assumed to be sufficient to transition to slow heartbeat mode. The radio of infusion pump assembly may be acquirable while in search sync mode with a latency of 6.1 seconds. This may imply that the infusion pump assembly may always be listening at least every 6 seconds when in search sync mode.

Radio protocol performance statistics may be necessary to promote troubleshooting of the radio and to assess radio performance. The following radio performance statistics may be maintained by the radio protocol in a data structure 

A define DEBUG option compiler option may be used to gather the following additional radio performance statistics per each channel 16 bit numbers 

The debug option may be used to gather engineering only statistics. If processor performance power and memory allow it may be desirable to keep this information at runtime. The radio statistics may be made available to the messaging system.

Link quality may be intended to be used on remote control assembly to provide a bar indicator similar to a cell phone of the radio link quality. Link quality may be made available to both remote control assembly and infusion pump assembly . It may be anticipated that the link quality status will consist of a one byte indicator of the quality of the radio link.

The radio may change frequency for each heartbeat. An adaptive pseudo random frequency hopping algorithm may be used for sync mode and heartbeat attempts in search sync mode. It may be a goal to use sixty four channels for frequency hopping. An algorithm may be developed to adaptively generate a channel list on remote control assembly for frequency hopping. The radio of remote control assembly may build maintain and distribute the master channel list. Prior channel statistics and historical performance information may be obtained from the radio of infusion pump assembly by the radio of remote control assembly using the messaging system as needed to meet performance requirements. By building the channel list from the perspective of both units the radio interference environment of both units may be considered. The radios may adaptively select hopping channels to meet the round trip message latency while operating in a desirable RF environment.

Occlusions and or leaks may occur anywhere along the fluid delivery path of infusion pump assembly . For example and referring to occlusions leaks may occur in the fluid path between reservoir and reservoir valve assembly in the fluid path between reservoir valve assembly and pump assembly in the fluid path between pump assembly and volume sensor valve assembly in the fluid path between volume sensor valve assembly and volume sensor chamber in the fluid path between volume sensor chamber and measurement valve assembly and in the fluid path between measurement valve assembly and the tip of disposable cannula . Infusion pump assembly may be configured to execute one or more occlusion leak detection algorithms that detect and locate such occlusions leaks and enhance the safety reliability of infusion pump assembly .

As discussed above when administering the infusible fluid infusion pump assembly may first determine the volume of infusible fluid within volume sensor chamber prior to the administration of the dose of infusible fluid and may subsequently determine the volume of infusible fluid within volume sensor chamber after the administration of the dose of infusible fluid. By monitoring these values the occurrence of occlusions leaks may be detected.

When a total occlusion is occurring the difference between the initial measurement prior to the administration of the dose of infusible fluid and the final measurement after the administration of the dose of infusible fluid will be zero or essentially zero indicating a large residual quantity of infusible fluid within volume sensor chamber . Accordingly no fluid may be leaving volume sensor chamber .

Specifically if the tip of disposable cannula is occluded the fluid path down stream of volume sensor chamber will fill with fluid and eventually become pressurized to a level equivalent to the mechanical pressure exerted by spring diaphragm . Accordingly upon measurement valve assembly opening zero or essentially zero fluid will be dispensed and therefore the value of the initial and final measurements as made by volume sensor assembly will essentially be equal.

Upon detecting the occurrence of such a condition a total occlusion indicator may be set and infusion pump assembly may e.g. trigger an alarm thus indicating that the user needs to seek alternative means for receiving their therapy.

When a partial occlusion is occurring the difference between the initial measurement prior to the administration of the dose of infusible fluid and the final measurement after the administration of the dose of infusible fluid will indicate that less than a complete dose of infusible fluid was delivered. For example assume that at the end of a particular pumping cycle volume sensor assembly indicated that 0.10 microliters of infusible fluid were present in volume sensor chamber . Further assume that measurement value assembly is subsequently closed and pump assembly is subsequently actuated resulting in volume sensor chamber being filed with the infusible fluid. Further assume that volume sensor assembly determines that volume sensor chamber is now filled with 1.00 microliters of infusible fluid indicating a pumped volume of 0.90 microliters .

Accordingly upon the opening of measurement valve assembly the quantity of infusible fluid included within volume sensor chamber would be expected to drop to 0.10 microliters or reasonably close thereto . However in the event of a partial occlusion due to a slower than normal flow rate from volume sensor chamber the quantity of infusible fluid within volume sensor chamber may only be reduced to 0.40 microliters indicating a delivered volume of 0.60 microliters . Accordingly by monitoring the difference between the pumped volume 0.90 microliters and the delivered volume 0.60 microliters the residual volume may be defined and the occurrence of a partial occlusion may be detected.

Upon detecting the occurrence of such a condition a partial occlusion indicator may be set and infusion pump assembly may e.g. trigger an alarm thus indicating that the user needs to seek alternative means for receiving their therapy. However as this is indicative of a partial occlusion as opposed to a complete occlusion the issuance of an alarm may be delayed as the partial occlusion may clear itself.

Alternatively infusion pump assembly may calculate a pump ontime to volume delivered ratio track it through time and track by using a fast moving and a slow moving exponential average of the pump ontime. The exponential average may be tracked in a fashion similar to the leaky sum integrator. The infusion pump assembly may filter signal and look for a fast change. The rate of fluid outflow and or residual volume may be monitored. If the residual volume does not change then there may be a total occlusion. If the residual volume changed they may be a partial occlusion. Alternatively still the residual values may be summed. If the number of valve actuations or the latch time is being varied the fluid flow rate may be examined even if you build up pressure in volume sensor assembly .

When reservoir is becoming empty it will become more difficult to fill volume sensor chamber to the desired level. Typically pump assembly is capable of pumping 1.0 microliters per millisecond. For example assume that an empty condition for volume sensor chamber is 0.10 microliters and a full condition for volume sensor chamber is 1.00 microliters. However as reservoir begins to empty it may become harder for pump assembly to fill volume sensor chamber to the full condition and may consistently miss the goal. Accordingly during normal operations it may take one second for pump assembly to fill volume sensor chamber to the full condition and as reservoir empties it may take three seconds to fill volume sensor chamber to the full condition. Eventually if reservoir completely empties volume sensor chamber may never be able to achieve a full condition . Accordingly the inability of pump assembly to fill volume sensor chamber to a full condition may be indicative of reservoir being empty. Alternatively the occurrence of such a condition may be indicative of other situations e.g. the failure of pump assembly or an occlusion in the fluid path prior to volume sensor chamber . Infusion pump assembly may determine the difference between the full condition and the amount actually pumped. These differences may be summed and the made up for once the reservoir condition is addressed.

Upon detecting the occurrence of such a condition an empty indicator may be set and infusion pump assembly may e.g. trigger an alarm thus indicating that the user needs to e.g. replace disposable housing assembly .

Additionally as reservoir empties reservoir will eventually result in a vacuum condition and the ability of pump assembly to deliver fluid to volume sensor chamber may be compromised. As discussed above volume controller may include feed forward controller for setting an initial guess concerning on time signal wherein this initial guess is based upon a pump calibration curve. For example in order for pump assembly to deliver 0.010 units of infusible fluid feed forward controller may define an initial on time of e.g. one millisecond. However as reservoir begins to empty due to compromised pumping conditions it may take two milliseconds to deliver 0.010 units of infusible fluid. Further as reservoir approaches a fully empty condition it make take ten milliseconds to deliver 0.010 units of infusible fluid. Accordingly the occurrence of reservoir approaching an empty condition may be detected by monitoring the level at which the actual operation of pump assembly e.g. two milliseconds to deliver 0.010 units of infusible fluid differs from the anticipated operation of pump assembly e.g. one millisecond to deliver 0.010 units of infusible fluid .

Upon detecting the occurrence of such a condition a reserve indicator may be set and infusion pump assembly may e.g. trigger an alarm thus indicating that the user will need to e.g. replace disposable housing assembly shortly.

In the event of a leak e.g. a leaky valve or a rupture perforation within the fluid path the ability of the fluid path to retain fluid pressure may be compromised. Accordingly in order to check for leaks within the fluid path a bleed down test may be performed in which pump assembly is used to pressurize volume sensor chamber . Volume sensor assembly may then perform a first volume measurement as described above to determine the volume of infusible fluid within volume sensor chamber . Infusion pump assembly may then wait a defined period of time to allow for bleed down in the event of a leak. For example after a sixty second bleed down period volume sensor assembly may perform a second volume measurement as described above to determine the volume of infusible fluid within volume sensor chamber . If there are no leaks the two volume measurements should be essentially the same. However in the event of a leak the second measurement may be less then the first measurement. Additionally depending on the severity of the leak pump assembly may be incapable of filling volume sensor chamber . Typically a leak check may be performed as part of a delivery of infusible fluid.

In the event that the difference between the first volume measurement and the second volume measurement exceeds an acceptable threshold a leak indicator may be set and infusion pump assembly may e.g. trigger an alarm thus indicating that the user needs to seek alternative means for receiving their therapy

As discussed above infusion pump assembly may include supervisor processor command processor and radio processor . Unfortunately once assembled access to electrical control assembly within infusion pump assembly very limited. Accordingly the only means to access electrical control assembly e.g. for upgrading flash memories may be through the communication channel established between infusion pump assembly and remote control assembly or via electrical contacts used by battery charger .

Electrical contacts may be directly coupled to radio processor and may be configured to provide I2C communication capability for erasing programming any flash memory not shown included within radio processor . The process of loading a program into radio processor may provide a means for erasing programming of the flash memories in both the supervisor processor and command processor .

When programming supervisor processor or command processor the program i.e. data to be loaded into flash memory accessible by supervisor processor or command processor may be provided in a plurality of data blocks. This is because the radio processor may not have enough memory to hold the entire flash image of the software as one block.

Referring also to there is shown one illustrative example of the manner in which the various systems within infusion pump assembly may be interconnected. For example battery charger may be coupled to computing device e.g. a personal computer via bus translator which converts e.g. RS232 formatted data to e.g. I2C formatted data. Bus translator may execute a pass through program that effectuates the above described translation. Battery charger may be coupled to radio processor via electrical contacts described above . Radio processor may then be coupled to supervisor processor and command processor via e.g. an RS232 bus. Radio processor may execute an update program that allows radio processor to control orchestrate the updating of the flash memories accessible by supervisor processor and command processor . Accordingly through the use of the above described coupling software updates obtained by computing device may be uploaded to flash memory not shown accessible by supervisor processor and command processor . The above described software updates may be command line program that may be automatically invoked by a script process.

As discussed above infusion pump assembly may be configured to deliver an infusible fluid to a user. Further and as discussed above infusion pump assembly may deliver the infusible fluid via sequential multi part infusion events that may include a plurality of discrete infusion events and or one time infusion events. However in some embodiments infusion pump assembly may deliver stacking bolus infusion events. For example a user may request the delivery of a bolus e.g. 6 units. While the 6 units are in the process of being delivered to the user the user may request a second bolus e.g. 3 units. In some embodiments of infusion pump assembly may deliver the second bolus at the completion of the first bolus.

Examples of other such sequential multi part infusion events may include but are not limited to a basal infusion event and an extended bolus infusion event. As is known in the art a basal infusion event refers to the repeated injection of small e.g. 0.05 unit quantities of infusible fluid at a predefined interval e.g. every three minutes that may be repeated until stopped e.g. by a user or by the system. Further the basal infusion rates may be pre programmed and may include specified rates for pre programmed time frames e.g. a rate of 0.50 units per hour from 6 00 am 3 00 pm a rate of 0.40 units per hour from 3 00 pm 10 00 pm and a rate of 0.35 units per hour from 10 00 pm 6 00 am. However the basal rate may be 0.025 units per hour and may not change according to pre programmed time frames. The basal rates may be repeated regularly daily until otherwise changed.

Further and as is known in the art an extended bolus infusion event may refer to the repeated injection of small e.g. 0.05 unit quantities of infusible fluid at a predefined interval e.g. every three minutes that is repeated for a defined number of intervals e.g. three intervals or for a defined period of time e.g. nine minutes . An extended bolus infusion event may occur simultaneously with a basal infusion event.

If multiple infusion events conflict with each other infusion pump assembly may prioritize the infusion event in the follow manner.

Referring also to assume for illustrative purposes only that the user configures infusion pump assembly to administer a basal dose e.g. 0.05 units of infusible fluid every three minutes. The user may utilize remote control assembly to define a basal infusion event for the infusible fluid e.g. 1.00 units per hour .

Infusion pump assembly may then determine an infusion schedule based upon the basal infusion event defined. Once determined infusion pump assembly may administer the sequential multi part infusion event e.g. 0.05 units of infusible fluid every three minutes . Accordingly while administering the sequential multi part infusion event infusion pump assembly may infuse a first 0.05 unit dose of the infusible fluid at t 0 00 i.e. a first discrete infusion event may infuse a second 0.05 unit dose of the infusible fluid at t 3 00 i.e. a second discrete infusion event may infuse a third 0.05 unit dose of the infusible fluid at t 6 00 i.e. a third discrete infusion event may infuse a fourth 0.05 unit dose of the infusible fluid at t 9 00 i.e. a fourth discrete infusion event and may infuse a fifth 0.05 unit dose of the infusible fluid at t 12 00 i.e. a fifth discrete infusion event . As discussed above this pattern of infusing 0.05 unit doses of the infusible fluid every three minutes may be repeated until stopped e.g. by a user or by the system in this example as this is an illustrative example of a basal infusion event.

Further assume for illustrative purposes that the infusible fluid is insulin and sometime after the first 0.05 unit dose of infusible fluid is administered but before the second 0.05 unit dose of infusible fluid is administered the user checks their blood glucose level and realizes that their blood glucose level is running a little higher than normal. Accordingly the user may define an extended bolus infusion event via remote control assembly . An extended bolus infusion event may refer to the continuous infusion of a defined quantity of infusible fluid over a finite period of time. However as such an infusion methodology is impractical undesirable for an infusion pump assembly when administered by such an infusion pump assembly an extended bolus infusion event may refer to the infusion of additional small doses of infusible fluid over a finite period of time.

Accordingly the user may utilize remote control assembly to define an extended bolus infusion event for the infusible fluid e.g. 0.20 units over the next six minutes which may be confirmed in a manner discussed above. While in this example the extended bolus infusion event is described as 0.20 units over the next six minutes this is for illustrative purposes only and is not intended to be a limitation of this disclosure as either or both of the unit quantity and total time interval may be adjusted upward or downward. Once defined and or confirmed infusion pump assembly may determine an infusion schedule based upon the extended bolus infusion event defined and may administer the infusible fluid. For example infusion pump assembly may deliver 0.10 units of infusible fluid every three minutes for the next two interval cycles or six minutes resulting in the delivery of the extended bolus dose of infusible fluid defined by the user i.e. 0.20 units over the next six minutes .

Accordingly while administering the second sequential multi part infusion event infusion pump assembly may infuse a first 0.10 unit dose of the infusible fluid at t 3 00 e.g. after administering the second 0.05 unit dose of infusible fluid . Infusion pump assembly may also infuse a second 0.10 unit dose of the infusible fluid at t 6 00 e.g. after administering the third 0.05 unit dose of infusible fluid .

Assume for illustrative purposes only that after the user programs infusion pump assembly via remote control assembly to administer the first sequential multi part infusion event i.e. 0.05 units infused every three minute interval repeated continuously and administer the second sequential multi part infusion event i.e. 0.10 units infused every three minute interval for two intervals the user decides to eat a very large meal. Predicting that their blood glucose level might increase considerably the user may program infusion pump assembly via remote control assembly to administer a one time infusion event. An example of such a one time infusion event may include but is not limited to a normal bolus infusion event. As is known in the art a normal bolus infusion event refers to a one time infusion of the infusible fluid.

For illustrative purposes only assume that the user wishes to have infusion pump assembly administer a bolus dose of thirty six units of the infusible fluid. Infusion pump assembly may monitor the various infusion events being administered to determine whether a one time infusion event is available to be administered. If a one time infusion event is available for administration infusion pump assembly may delay the administration of at least a portion of the sequential multi part infusion event.

Continuing with the above stated example once the user completes the programming of infusion pump assembly to deliver one time infusion event i.e. the thirty six unit bolus dose of the infusible fluid upon infusion pump assembly determining that the one time infusion event is available for administration infusion pump assembly may delay the administration of each sequential multi part infusion event and administer the available one time infusion event.

Specifically and as discussed above prior to the user programming infusion pump assembly to deliver one time infusion event infusion pump assembly was administering a first sequential multi part infusion event i.e. 0.05 units infused every three minute interval repeated continuously and administering a second sequential multi part infusion event i.e. 0.10 units infused every three minute interval for two intervals .

For illustrative purposes only the first sequential multi part infusion event may be represented within as 0.05 unit dose t 0 00 0.05 unit dose t 3 00 0.05 unit dose t 6 00 0.05 unit dose t 9 00 and 0.05 unit dose t 12 00. As the first sequential multi part infusion event as described above is a basal infusion event infusion pump assembly may continue to infuse 0.05 unit doses of the infusible fluid at three minute intervals indefinitely i.e. until the procedure is cancelled by the user .

Further and for illustrative purposes only the second sequential multi part infusion event may be represented within as 0.10 unit dose t 3 00 and 0.10 unit dose t 6 00. As the second sequential multi part infusion event is described above as an extended bolus infusion event infusion pump assembly may continue to infuse 0.10 unit doses of the infusible fluid at three minute intervals for exactly two intervals i.e. the number of intervals defined by the user .

Continuing with the above stated example upon infusion pump assembly determining that the thirty six unit normal bolus dose of the infusible fluid i.e. one time infusion event is available for administration infusion pump assembly may delay the administration of each sequential multi part infusion event and may start administering one time infusion event that is available for administration.

Accordingly and for illustrative purposes only assume that upon completion of the programming of infusion pump assembly to deliver the thirty six unit normal bolus does of the infusible fluid i.e. the one time infusion event infusion pump assembly begins administering one time infusion event . Being that one time infusion event is comparatively large it may take longer than three minutes i.e. the time interval between individual infused doses of the sequential multi part infusion events and one or more of the individual infused doses of the sequential multi part infusion events may need to be delayed.

Specifically assume that it will take infusion pump assembly greater than six minutes to infuse thirty six units of the infusible fluid. Accordingly infusion pump assembly may delay 0.05 unit dose i.e. scheduled to be infused t 3 00 0.05 unit dose i.e. scheduled to be infused t 6 00 and 0.05 unit dose i.e. scheduled to be infused t 9 00 until after one time infusion event i.e. the thirty six unit normal bolus dose of the infusible fluid is completely administered. Further infusion pump assembly may delay 0.10 unit dose i.e. scheduled to be infused t 3 00 and 0.10 unit dose i.e. scheduled to be infused t 6 00 until after one time infusion event .

Once administration of one time infusion event is completed by infusion pump assembly any discrete infusion events included within the sequential multi part infusion event that were delayed may be administered by infusion pump assembly . Accordingly once one time infusion event i.e. the thirty six unit normal bolus dose of the infusible fluid is completely administered infusion pump assembly may administer 0.05 unit dose 0.05 unit dose 0.05 unit dose 0.10 unit dose and 0.10 unit dose .

While infusion pump assembly is shown to administer 0.05 unit dose then 0.10 unit dose then 0.05 unit dose then 0.10 unit dose and then 0.05 unit dose this is for illustrative purposes only and is not intended to be a limitation of this disclosure as other configurations are possible and are considered to be within the scope of this disclosure. For example upon infusion pump assembly completing the administration of one time infusion event i.e. the thirty six unit normal bolus dose of the infusible fluid infusion pump assembly may administer all of the delayed discrete infusion events associated with the first sequential multi part infusion event i.e. namely 0.05 unit dose 0.05 unit dose and 0.05 unit dose . Infusion pump assembly may then administer all of the delayed discrete infusion events associated with the second sequential multi part infusion event i.e. 0.10 unit dose and 0.10 unit dose .

While one time infusion event i.e. the thirty six unit normal bolus dose of the infusible fluid is shown as being infused beginning at t 3 00 this is for illustrative purposes only and is not intended to be a limitation of this disclosure. Specifically infusion pump assembly may not need to begin infusing one time infusion event at one of the three minute intervals e.g. t 0 00 t 3 00 t 6 00 t 9 00 or t 12 00 and may begin administering one time infusion event at any time.

While each discrete infusion event e.g. 0.05 unit dose 0.05 unit dose 0.05 unit dose 0.10 unit dose and 0.10 unit dose and one time infusion event are shown as being a single event this is for illustrative purposes only and is not intended to be a limitation of this disclosure. Specifically at least one of the plurality of discrete infusion events e.g. 0.05 unit dose 0.05 unit dose 0.05 unit dose 0.10 unit dose and 0.10 unit dose may include a plurality of discrete infusion sub events. Further one time infusion event may include a plurality of one time infusion sub events.

Referring also to and for illustrative purposes 0.05 unit dose is shown to include ten discrete infusion sub events e.g. infusion sub events wherein a 0.005 unit dose of the infusible fluid is infused during each of the ten discrete infusion sub events. Additionally 0.10 unit dose is shown to include ten discrete infusion sub events e.g. infusion sub events wherein a 0.01 unit dose of the infusible fluid is delivered during each of the ten discrete infusion sub events. Further one time infusion event may include e.g. three hundred sixty one time infusion sub events not shown wherein a 0.1 unit dose of the infusible fluid is delivered during each of the three hundred sixty one time infusion sub events. The number of sub events defined above and the quantity of the infusible fluid delivered during each sub event is solely for illustrative purposes only and is not intended to be a limitation of this disclosure as the number of sub events and or the quantity of the infusible fluid delivered during each sub event may be increased or decreased depending upon e.g. the design criteria of infusion pump assembly .

Before after or in between the above described infusion sub events infusion pump assembly may confirm the proper operation of infusion pump assembly through the use of any of the above described safety features e.g. occlusion detection methodologies and or failure detection methodologies .

In the exemplary embodiments the infusion pump assembly may be wirelessly controlled by a remote control device. In the exemplary embodiments a split ring resonator antenna may be used for wireless communication between the infusion pump assembly and the remote control device or other remote device . The term wirelessly controlled refers to any device that may receive input instructions data or other wirelessly. Further a wirelessly controlled insulin pump refers to any insulin pump that may wirelessly transmit and or receive data from another device. Thus for example an insulin pump may both receive instructions via direct input by a user and may receive instructions wirelessly from a remote controller.

Referring to and an exemplary embodiment of a split ring resonator antenna adapted for use in a wirelessly controlled medical device and is used in the exemplary embodiment of the infusion pump assembly includes at least one split ring resonator antenna hereinafter SRR antenna a wearable electric circuit such as a wirelessly controlled medical infusion apparatus hereinafter infusion apparatus capable of powering the antenna and a control unit .

In various embodiments a SRR antenna may reside on the surface of a non conducting substrate base allowing a metallic layer or layers to resonate at a predetermined frequency. The substrate base may be composed of standard printed circuit board material such as Flame Retardant 2 FR 2 FR 3 FR 4 FR 5 FR 6 G 10 CEM 1 CEM 2 CEM 3 CEM 4 CEM 5 Polyimide Teflon ceramics or flexible Mylar. The metallic resonating bodies comprising a SRR antenna may be made of two rectangular metallic layers made of for example platinum iridium copper nickel stainless steel silver or other conducting materials. In other various embodiments a SRR antenna may contain only one metallic resonating body.

In the exemplary embodiment a gold plated copper outer layer surrounds without physically contacting a gold plated copper inner ring . That is the inner ring resides in the cavity or aperture formed by the outer layer . The inner ring may contain a gap or split along its surface completely severing the material to form an incomplete ring shape. Both metallic resonating bodies may reside on the same planar surface of the substrate base . In such a configuration the outer layer may by driven via a transmission line coupled to the outer layer for example. Additionally in various other embodiments a transmission line may be coupled to the inner ring .

Antenna design software such as AWR Microwave Office capable of simulating electromagnetic geometries such as antenna performance may significantly decrease the time required to produce satisfactory dimensions compared to physically fabricating and testing antennas. Accordingly with aid of such software the SRR antenna may be designed such that the geometric dimensions of the resonant bodies facilitate an operational frequency of 2.4 GHz. depicts the exemplary dimensions of the inner ring and outer layer and the positioning of the cavity in which the inner ring resides. The distance in between the outer layer and the inner ring is a constant 0.005 inches along the perimeter of the cavity . However in other embodiments the distance between the outer layer and the inner ring may vary and in some embodiments the operational frequency may vary.

In various embodiments a SRR antenna may have dimensions such that it could be categorized as electrically small that is the greatest dimension of the antenna being far less than one wavelength at operational frequency.

In various other embodiments a SRR antenna may be composed of one or more alternatively shaped metallic outer layers such as circular pentagonal octagonal or hexagonal surrounding one or more metallic inner layers of similar shape. Further in various other embodiments one or more metallic layers of a SRR antenna may contain gaps in the material forming incomplete shapes.

Referring to a SRR antenna having the exemplary geometry exhibits acceptable return loss and frequency values when placed in contact with human skin. As shown in focusing on the band of interest denoted by markers 1 and 2 on the graph return loss prior to contact with human skin is near 15 dB while monitoring a frequency band centered around 2.44 GHz. Return loss during contact with human skin as shown in remains a suitable value near 25 dB at the same frequency yielding approximately 97 transmission power.

These results are favorable especially as compared with a non split ring resonator antenna type such as the Inverted F. Return loss of an Inverted F antenna may exhibit a difference when the antenna contacts human skin resulting in a low percentage of power transmitted outward from the antenna. By way of example as shown in and again focusing on the band of interest denoted by markers 1 and 2 on the graph return loss of an Inverted F antenna prior to contact with human skin is near 25 dB at a frequency centered around 2.44 GHz. Return loss during contact with human skin is nearly 2 dB at the same frequency yielding approximately 37 power transmission.

In the exemplary embodiment referring to and one application of a SRR antenna may be integration into a wearable infusion apparatus capable of delivering fluid medication to a user patient . In such an application the safety of the user patient is dependent on fluid operation between these electrical components thus reliable wireless transmission to and from a control unit is of great importance.

An infusion apparatus may be worn directly on the human body. By way of example such a device may be attached on or above the hip joint in direct contact with human skin placing the SRR antenna at risk of unintended dielectric loading causing a frequency shift in electrical operation. However in such an application electrical characteristics of the SRR antenna which allow it to be less sensitive to nearby parasitic objects are beneficial in reducing or eliminating degradation to the performance. A controlling component such as a control unit generally shown in may be paired with an infusion apparatus and may be designed to transmit and receive wireless signals to and from the infusion apparatus at a predetermined frequency such as 2.4 GHz. In the exemplary embodiment the control unit serves as the main user interface through which a patient or third party may manage insulin delivery. In other embodiments infusion apparatus may utilize a SRR antenna to communicate with one or more control units .

In various embodiments a number of different wireless communication protocols may be used in conjunction with the SRR antenna as the protocol and data types to be transferred are independent of the electrical characteristics of the antenna. However in the exemplary embodiment a bi directional master slave means of communication organizes the data transfer through the SRR antenna . The control unit may act as the master by periodically polling the infusion apparatus or slave for information. In the exemplary embodiment only when the slave is polled the slave may send signals to the control unit only when the slave is polled. However in other embodiments the slave may send signals before being polled. Signals sent by way of this system may include but are not limited to control alarm status patient treatment profile treatment logs channel selection and negotiation handshaking encryption and check sum. In some embodiments transmission through the SRR antenna may also be halted during certain infusion operations as an added precaution against electrical disruption of administration of insulin to the patient.

In the exemplary embodiment the SRR antenna may be coupled to electrical source circuitry via one or more pins on a transmission line . In various other embodiments a transmission line may comprise a wire pairs of wire or other controlled impedance methods providing a channel by which the SRR antenna is able to resonate at a certain frequency. The transmission line may reside on the surface of the substrate base and may be composed of the same material as the SRR antenna such as gold plated copper. Additionally a ground plane may be attached to the surface of the substrate base opposite the transmission line .

The electrical circuitry coupled to the SRR antenna may apply an RF signal to the end of the transmission line nearest the circuitry creating an electromagnetic field throughout and propagating from the SRR antenna . The electrical circuitry coupled to the SRR antenna facilitates resonance at a predetermined frequency such as 2.4 GHz. Preferably transmission line and SRR antenna both have impedances of 50 Ohms to simplify circuit simulation and characterization. However in other various embodiments the transmission line and split ring resonator antenna may have other impendence values or a different resonating frequency.

Referring to a signal processing component s such as a filter amplifier or switch may be integrated into the transmission line or at some point between the signal source connection pins and the SRR antenna . In the exemplary embodiment the signal processing component is a band pass filter to facilitate desired signal processing such as allowing only the exemplary frequency to be transmitted to the antenna and rejecting frequencies outside that range. In the exemplary embodiment a Combline band pass filter may be included in the transmission line between the antenna and the signal source. However in other embodiments any other signal processing device for example but not limited to filters amplifiers or any other signal processing devices known in the art.

In various embodiments a SRR antenna may be composed of metallic bodies capable of resonating on a flexible or rigid substrate. As shown in and the exemplary embodiment incorporates a curved SRR antenna on a flexible Polyimide substrate . Polyimide may be the exemplary material because it tends to be more flexible than alternative substrates. This configuration may allow for simplified integration into circular shaped devices such as a wirelessly controlled medical infusion apparatus devices with irregular shaped external housing or devices in which saving space is paramount.

In various embodiments both control unit and base unit may incorporate a split SRR antenna . This configuration may prove beneficial where the control unit is meant to be handheld in close proximity to human skin or is likely to be in close proximity to a varying number of materials with varying dielectric constants.

In various other embodiments a SRR antenna may be integrated into a human or animal limb replacement. As prosthetic limbs are becoming more sophisticated the electrical systems developed to control and simulate muscle movements require much more wiring and data transfer among subsystems. Wireless data transfer within a prosthetic limb may reduce weight through reduced physical wiring conserve space and allow greater freedom of movement. However common antennas in such a system may be susceptible to dielectric loading. Similar to the previously mentioned benefits of integrating a SRR antenna into a wirelessly controlled medical infusion apparatus a prosthetic limb such as a robotic arm may also come into contact with human skin or other dielectric materials and benefit from the reduction of electrical disturbances associated with such an antenna. In other various embodiments the SRR antenna may be integrated into any device comprised of the electrical components capable of powering and transmitting receiving data to an antenna and susceptible to electrical disturbances associated with proximity to dielectric materials.

In various embodiments a SRR antenna may be integrated into a configuration of medical components in which one or more implantable medical devices operating within the human body communicate wirelessly to a handheld body mounted or remote control unit. In certain embodiments both body mounted and in body wireless devices may utilize a SRR antenna for wireless communication. Additionally one or more of the components utilizing a SRR antenna may be completely surrounded by human skin tissue or other dielectric material. By way of example such a configuration may be used in conjunction with a heart monitoring control system where stability and consistency of wireless data transmission are of fundamental concern.

In various other embodiments a SRR antenna may be integrated into the embodiments of the infusion pump assembly. Configuration of medical components in which one or more electrical sensors positioned on or attached to the human body wirelessly communicate to a remote transceiving unit. By way of example a plurality of electrodes positioned on the body may be coupled to a wireless unit employing a SRR antenna for wireless transmission to a remotely located electrocardiogram machine. By way of further example a wireless temperature sensor in contact with human skin may employ SRR antenna for wireless communication to a controller unit for temperature regulation of the room in which the sensor resides.

As discussed and described above in some embodiments of the infusion pump system the SMA may control both the pump assembly including the pump assembly however in various other embodiments the SMA may also control of various embodiments of the pump assembly and the various embodiments shown and described herein of the measurement valve assembly. However in some embodiments the SMA may be controlled using at least one optical position sensor assembly optical sensor wherein the position of the pump assembly plunger pump plunger and the measurement valve plunger is measured using at least one optical position sensor and in the exemplary embodiments at least one pump assembly plunger optical sensor and at least one measurement valve plunger optical position sensor. Thus in these embodiments the command processor provides closed loop control of the pump plunger position and measurement valve plunger position by comparing the optical sensor output to a target position and then modifying the PWM of the low side field effect transistors FET . In addition voltages are measured at various positions such the SMA controller may detect various conditions of the system including but not limited to one or more of the following a broken SMA wire failed FET and or a depleted battery assembly and or power source. Thus the actual plunger position may be determined for in some embodiments both the pump plunger and the measurement valve plunger and target plunger positions may be established.

Referring now to various embodiments of the optical position sensor in the infusion pump system is shown. Some embodiments of the apparatus methods and systems will be described below with reference to an exemplary embodiment. The exemplary embodiment is described with respect to a medical infusion pump which in some embodiments may be an infusion pump which may in some embodiments be an insulin pump as shown and described herein however the optical position sensor described herein may also be used with various other infusion pumps and or medical delivery devices and or medical systems including but not limited to those described in U.S. Pat. No. 7 498 563 issued Mar. 3 2009 and entitled Optical Displacement Sensor for Infusion Devices U.S. Pat. No. 7 306 578 issued Dec. 11 2007 and entitled Loading Mechanism for Infusion Pump U.S. patent application Ser. No. 11 704 899 filed Feb. 9 2007 now U.S. Publication No. US 2007 0228071 A1 and entitled Fluid Delivery Systems and Methods U.S. patent application Ser. No. 11 704 896 filed Feb. 9 2007 now U.S. Publication No. US 2007 0219496 A1 published Sep. 20 2007 and entitled Pumping Fluid Delivery Systems and Methods Using Force Application Assembly U.S. patent application Ser. No. 11 704 886 filed Feb. 9 2007 now U.S. Publication No. US 2007 0219480 A1 published Sep. 20 2007 and entitled Patch Sized Fluid Delivery Systems and Methods U.S. patent application Ser. No. 11 704 897 filed Feb. 9 2007 now U.S. Publication No. US 2007 0219597 A1 published Sep. 20 2007 and entitled Adhesive and Peripheral Systems and Methods for Medical Devices U.S. patent application Ser. No. 12 560 106 filed Sep. 15 2009 now U.S. Publication No. US 2010 0185142 A1 published Jul. 22 2010 and entitled Systems and Methods for Fluid Delivery and U.S. patent application Ser. No. 12 649 681 filed Dec. 30 2009 now U.S. Publication No. US 2010 0198182 A1 published Aug. 5 2010 and entitled Method System and Apparatus for Verification of Volume and Pumping which are each hereby incorporated herein by reference in their entireties. Reference herein to a disposable may refer to in some embodiments the disposable housing assembly and or disposable portion and or reservoir portion of the various infusion pumps described in any of the above discussed infusion pumps.

However the apparatus systems and methods described herein may be used in any infusion pump or apparatus. Further the apparatus systems and methods described herein may be used to verify the movement of any plunger pump actuator valve and or other moveable part within any medical device to confirm that movement and or displacement occurred. Further in addition to confirmation of movement the determination of the distance of movement i.e. the total displacement may also be used in some embodiments.

Referring also to the various embodiments of the infusion pump apparatus methods and systems include the control of the pump and one or more active valves by contraction of a SMA wire which in the exemplary embodiments is NITINOL wire. The SMA wire works by applying current through the wire which induces heating the wire and causes a phase change that result in a contraction of the wire length. The change in wire length may be exploited by e.g. lever and or pulley mechanisms to actuate the pump plunger and measurement valve .

The infusion pump system drives the SMA wires which may include two as shown in the exemplary embodiment shown in directly from the battery voltage by switching the battery voltage across the wire to cause a contraction actuation of the respective component and then switches off the battery voltage to stop the contraction. The wire component starting position is in some embodiments restored by spring forces that oppose the SMA wire contraction force.

In the exemplary embodiment each of the SMA wires provides proportional control i.e. the SMA wire contracts over time and displaces the respective component over time. Despite this implementation the valve components act to occlude or un occlude fluid flow which is a discrete non proportional and binary function. However the pump piston is operated over a range of stroke lengths so proportional control of the pump plunger is a functional goal in the exemplary embodiment.

In some embodiments proportional control of the pump plunger may be achieved by monitoring the volume delivered into the volume measurement chamber and measured by the volume measurement sensor assembly system and adjusting the amount of time that the pump plunger SMA wire is activated i.e. adjusting the ontime. This may result in a closed loop control of aliquot pumping volume as a function of SMA wire activation time on a stroke by stroke basis. The controller scheme in some embodiments also includes additional control variables which may increase the accuracy of the aliquot pumping volume to converge on a given target delivery volume.

Several factors may affect SMA activation including but not limited to one or more of the following energy into the wire voltage current time ambient temperature heat sinking pre tension SMA wire variations diameter alloy composition electrical resistance and or assembly variations. Changes in physical parameters such as the ones listed above may result in an inter pump and intra pump variation in the ontime of the pump plunger SMA that may be expected to result in a given pumped volume per stroke of the pump plunger which may also be referred to as a given pump delivery volume . As a result both an offset in time and a change in the slope of the on time versus pump aliquot volume relationship may occur.

Referring now also to a graph that shows the same pump system tested over a temperature range of 18 to 38 degrees Celsius results in a SMA actuation onset time from about 180 to about 310 ms. As may be seen the slope is also aggravated at lower temperatures.

Variation in the offset and slope of ontime versus pump delivery volume may add complexity to the pump system as compensation for the variation s may be necessary to achieve accurate pump delivery volume. This phenomenon may also affect the components e.g. valves and plungers actuated by SMA wire in a similar fashion though valve function is not proportional. At least in part due to the sensitivity of SMA actuation time to multiple physical variations it may be desirable in some embodiments to directly control one or more components e.g. the pump plunger and or measurement valve actuator position. This may be beneficial for many reasons including but not limited to as the position of the pump plunger and measurement valve actuator may be a closer indication of proportional performance than SMA on time. Various embodiments of methods systems and apparatus for achieving this goal are described below.

The ability to sense the position of the pump plunger and or the measurement valve actuator in the infusion pump system may be desired. Although as has been discussed herein SMA wire may be used in the exemplary embodiments to actuate the pump plunger and the measurement valves in other embodiments various motors may be used to actuate the pump and or the valve s including but not limited to a peristaltic pump a rotary pump and a piezoelectric actuator. Thus disclosed herein irrespective of the pump actuator are methods apparatus and systems for sensing the position of various components in the infusion pump system including but not limited to sensing the position of one or more components which may include but are not limited to the pump or displacement component and one or more active valves and or passive valves. Thus in some embodiments it may be desirable to sense the position of inactive valves e.g. the reservoir valve and or the volume measurement chamber inlet valve .

There are various devices that may be used to sense the position of the pump plunger and or measurement valve actuator . These include but are not limited to one or more of the following ultrasonic optical reflective laser interferometer camera etc linear caliper magnetic mechanical contact switch infrared might measurement etc. However in the exemplary embodiment due to the small structure of the infusion pump assembly and or pump system it may be desirable to use a small component so as to utilize a small space with the sensing component s . In various embodiments the device battery life also may also be considered since the battery size may be limited by the overall size of the device and battery capacity may be a premium. Sensing distance may also be a consideration in various embodiments. For example where the displacement of the one or more components e.g. the pump plunger and or the measurement valve actuator component may be very small for example in the exemplary embodiment a full displacement of the pump plunger may be about 1 mm and a full displacement of the measurement valve actuator may be about 0.2 mm . The displacement distances are examples for some embodiments in other embodiments the displacement distances may vary.

In the exemplary embodiment a small reflective optical sensor assembly hereinafter optical sensor that fits into the exemplary embodiments of the infusion pump system hardware as shown and described for example herein may be used. In some embodiments the at least one optical sensor is located in the reusable housing assembly. However in other embodiments part of the at least one optical sensor may be located in the disposable housing assembly and another part of the at least one optical sensor may be located in the reusable housing assembly. The optical sensor in the various embodiments has a sensing range that accommodates the components for which the optical sensor may be sensing e.g. in some embodiments the pump plunger and or measurement valve actuator displacements. In the exemplary embodiment any optical sensor may be used including but not limited to a Sharp GP2S60 manufactured by Sharp Electronics Corporation which is a U.S. subsidiary of Sharp Corporation of Osaka Japan. In these embodiments this optical sensor contains an infra red emitting diode and infra red sensing detector in a single component package. Light from the emitter is unfocused and bounces off the sensing surface some of which is reflected to the detector. This results in a sensed intensity of light by the detector that varies as a function of distance angle to the reflector. Referring now to the curve illustrates the sensitivity of the optical sensor to displacement of a reflective surface.

Referring also to in various embodiments one or more optical sensors may be used in the pump system . The one or more optical sensors may be included in the pump system such that they may detect the movement and distance of movement displacement of one or more valves and or the pump plunger . With respect to the pump system represents various embodiments of the location for one or more optical sensors to sense the pump plunger as well as an embodiment of the location of an optical sensor to sense the measurement valve .

With respect to the embodiments of the location of the optical sensors to sense the pump plunger although both of these locations may sense the pump plunger the distance from the respective sensor to the component e.g. pump plunger in this example varies the sensitivity of the optical sensor . Thus it may be beneficial to use one or the other optical sensor location depending on for example but not limited to the desired data. In some embodiments the optical sensors may be placed on the underneath of the printed circuit board. The placement of the optical sensors on the underneath of the circuit board allows for independent sensing of the various components desired in the pump system for example but not limited to the pump plunger head measurement valve actuating arm and or the measurement valve .

Still referring the the embodiment shown includes three optical sensors placed in some embodiments on the bottom of the PCB not shown over both pump plunger and valve components to detect motion of the respective components. The optical sensor shown over the pump plunger and the optical sensor of the pump plunger actuator arm essentially sense the same motion i.e. the movement of the pump plunger however each of the optical sensor are a different distance from the respective component being sensed i.e. the pump plunger and thus each optical sensor may result in a different sensitivity of detection. In some embodiments one of the optical sensors e.g. may be preferred for detecting onset motion i.e. the start of the pump plunger motion towards the pump chamber due to the starting distance from the optical sensor. Both the pump plunger head and the pump plunger actuator arm in some embodiments are made from white DELRIN. Thus in these embodiments the surface is naturally reflective. In various embodiments various materials may be used to manufacture these components such that they include a naturally reflective surface. However in some embodiments coatings may be added to the surface of the various components to increase reflection if desired. In some embodiments changes to the geometry of the surfaces may also be made to modify the reflection.

In some embodiments the optical sensor positioned over the measurement valve actuator arm senses rotation. Thus the change in reflective intensity is due to a rotational change of the reflecting surface. In the some embodiments the measurement valve actuator arm may be made from a metallic MEMS part. However in other embodiments the measurement valve actuator arm and or other parts to be sensed including the tab discussed below by the optical sensor may be made from DELRIN or other materials. In other embodiments features may be added to change or modify the reflective pattern. These changes may include but are not limited to adding a tab that extends under the optical sensor . Additionally in some embodiments optical coatings or polishing of the metal surface or other treatments methods may be used to increase the refection intensity.

Referring now also to various embodiments of an optical sensor are shown. Although in various embodiments for illustration purposes the optical sensor arrangement may be shown with respect to a measurement valve actuator or a pump plunger this is for illustration purposes only other embodiments of the various embodiments of the optical sensor arrangements may include where the optical sensor arrangement is used with any component including but not limited to one or more valves and or one or more pump plungers.

Referring now to an optical sensor detector is shown with an LED and or light source and a slot wheel . In some embodiments the optical sensor detector may include one or more detectors and depending on the rotation of the slot wheel which in some embodiments may indicate the position of either a valve and or a pump plunger the LED will shine through a different slot in the slot wheel and the one of the detectors will detect the light indicating the position of the slot wheel .

Referring now to another embodiments of an optical sensor similar to the embodiments shown and described above with respect to is shown. In this embodiment the slot wheel includes a variation in the slots.

In various embodiments the optical sensors utilize infra red light thus ambient light may not be a variable. In some embodiments each optical sensor s light emitting source may be controlled independently which may be beneficial for many reasons including but not limited to so that optical cross talk between the sensors may be avoided e.g. in some embodiments raster through the sensors one at a time . Optical sensors may be sensitive to drift and temperature over time thus in some embodiments a dark sensor reading and or a temperature sensor reading in some embodiments at least one temperature sensor may be incorporated into the pump system and in some embodiments at least one temperature sensor may be included in the optical sensor system may be taken before turning on the respective emitting light source in order to compensate for offset. In some embodiments normalizing the starting reading before inducing motion may be used to compensate for a change in gain.

In various embodiments sensing the pump plunger may be used in a number of ways including but not limited to onset of motion detection and determination of pump plunger position.

Sensing when the pump plunger has started to move may be beneficial for many reasons including but not limited to one or more of the following removing the offset variation in the SMA wire activation on time in embodiments where ontime is used to control the SMA wire. Also in some embodiments the closed loop controller compensation may be less confounded because it may be compensating only for variation in slope of ontime versus volume. This may reduce the pump aliquot volume variability and result in more accurate fluid delivery versus time.

Since the pump plunger moves fluid by displacement the position of the pump plunger may be correlated with the amount volume of fluid displaced pumped. Controlling the position of the pump piston has many benefits some of which are discussed below.

Correlation of the pumped volume with the position of the pump plunger may enable the pump system infusion device to deliver a desired volume of fluid. Additionally correlation of pump volume may reduce delivery variation. A more precise infusion pump combined in some embodiments with an accurate measurement system for example various embodiments of the volume measurement sensor assembly described herein may improve volume delivery consistency.

Improved correlation of pumping volume to pump plunger position may enable more accurate transitions from low volume to high volume delivery. In some embodiments the pump controller may pump fluid as a function of SMA wire activation time. Thus pumping fluid at a fixed volume may be beneficial. However in some embodiments to temporarily increase the delivery volume the pump system may increase the aliquot delivery rate and hold the volume constant. With more accurate pumping volume the pump may temporarily aliquot higher volumes to meet e.g. a bolus delivery and return to the basal delivery which in some embodiments may be a lower pumping volume without losing accuracy of either basal rate or bolus volume in the process.

Another benefit may include where in some embodiments aliquot pumping time is a variable used to promote fixed volume aliquot delivery aliquot delivery time may be more independent and possibly speed up bolus volume delivery. Also determining the pump plunger position may also enable a direct determination of malfunction. If for example a failure occurs with the pump plunger actuator the control system having determined the position of the pump plunger may in some embodiments alert the pump system that the pump has failed e.g. failed open closed and or somewhere in between. In some embodiments this may promote safety for the user patient as the system may identify failure at a faster rate preventing over and or under delivery.

In the various embodiments where SMA wire is used for pump actuation and or active valve actuation SMA wire activation ontime may be monitored as a function of pump plunger position to determine if the SMA wire is wearing out prematurely i.e. if the SMA wire expected life is being effected. This may be determined in some embodiments by monitoring the ontime necessary to achieve a given pump position over time.

In some embodiments sensing when the pump plunger has stopped moving may impart greater certainty to the pump system regarding when the pump plunger has bottomed out and prevent over driving the pump plunger . Over driving the SMA wire may reduce the life of the SMA wire and continuing to drive either the pump or a valve after reaching the desired position is also a waste of electrical battery power. Thus identifying when the pump plunger has stopped moving and or identifying when the measurement valve actuator has reached the desired location may increase battery life and or reduce the power needs of the system and or prevent premature SMA wire failure.

Similarly as with the pump piston the various valve pistons may be optically sensed to detect motion of the valve and or the position of the valve either of which may have benefits including but not limited to one or more of the following.

In some embodiments where one or more valves is controlled by SMA wire sensing when the valve piston has started to move may remove the offset variation in the SMA wire activation ontime and may give greater certainty to when the valve starts to open and or close. Additionally sensing when the valve has stopped moving may give greater certainty to when the valve has opened closed and prevent over driving the valve actuator. As over driving the SMA wire may reduce the life of the wire and continuing to drive any actuator after the valve state is reached is a waste of electrical power. Thus identifying when a valve has stopped moving may increase battery life and or reduce the power needs of the system and or prevent premature SMA failure. Also sensing the valve position may enable the determination of a valve being stuck in an undesirable position for example but not limited to the measurement valve actuator being stuck in the open position.

Although described herein as an infusion pump system the optical sensor control of pumping may be used in various medical devices. For purposes of this description the term pump broadly refers to valves and actuators used to move fluid from the reservoir to the user.

In some embodiments the pump may be used to move the fluid from the reservoir to the volume measurement chamber and then to the user. Referring to a schematic of an embodiment of an infusion pump system is shown. In some embodiments pumping may be accomplished using a pump plunger and three separate valves where the pump plunger is controlled by an independently actuated SMA and one valve the measurement valve is controlled by an independently actuated SMA wire . As discussed herein SMA may be actuated by changing its temperature in this case by applying an electrical current which changes its crystalline structure and causes the SMA to contract. In the infusion pump system the SMA wires are attached to linkages used to move the valve and pump plungers. The positions of the pump plunger and the measurement valve are measured using optical sensors as shown and discussed above with respect to . The current applied to the SMA is modified based on the optical sensor measurements to provide proportional control of the pump plunger and measurement valve positions.

In some embodiments the pump sequence is as follows. First the pump plunger SMA is actuated which simultaneously moves the reservoir valve plunger which occludes the flow path between the pump chamber and the reservoir . The pump plunger forces the fluid in the pump chamber past the passive volume measurement sensor chamber inlet check valve and into the volume measurement sensor chamber . The fluid is held in the volume measurement sensor chamber by the measurement valve while a volume measurement taken. Once the volume measurement is completed the measurement valve SMA is actuated which opens the measurement valve and the fluid is released from the volume measurement sensor chamber to the tubing set which may in some embodiments lead to a user patient which may in some embodiments lead to the delivery of medical fluid to the user patient.

Referring now also to the actuation of each SMA wire is accomplished using two field effect transistors FET . A high side FET which in some embodiments is controlled by the supervisor processor described above and provides an on off switch between the battery supply voltage and the SMA wires . In some embodiments the high side FET is normally off and may prevent or reduce the occurrence of a single point electrical fault from actuating the pump. A low side FET which in some embodiments is pulse width modulated PWM is controlled by the command processor and provides control of the amount of current flowing through the SMA wire .

In some embodiments both the position of the pump plunger and measurement valve plunger is measured using at least two optical position sensors. However in some embodiments a single optical sensor may be used to measure both the pump plunger and the measurement valve plunger . This allows the command processor to provide closed loop control of the plunger pump and measurement valve plunger position by comparing the optical sensor output to a target position and modifying the PWM of the low side FET. In addition in some embodiments voltages are measured at various positions. This enables in some embodiments the SMA controller to detect various conditions of the system including but not limited to one or more of the following a broken SMA wire a failed FET and or a depleted battery.

A thermal model of the SMA wires and a linear model of the pump plunger is described below. As discussed below the position of the pump plunger is measured. In some embodiments the displacement of the pump plunger is measurement i.e. the distance travelled from the starting point to the ending point may be measured.

The basic heat transfer equation for a constant current going through a wire with resistance R may be as follows. This neglects any of the thermal effects of the phase change in the SMA.

Thus at time 0 the SMA temperature will be T and at t the temperature will approach a steady state value of

The internal battery impedance causes a voltage drop as the load is applied during each cycle of the PWM. In addition the battery open circuit voltage drops over the course of the actuation. Both the battery open circuit voltage and impedance will change as the battery is discharged. The net result is that the electrical power applied to the SMA for a fixed duty cycle is variable. The repeatability of the SMA actuator may be improved by in some embodiments measuring the battery voltage and adjusting the duty cycle to provide power that is more consistent. In some embodiments however the position of the measurement valve plunger and the pump plunger may be measured directly and incorporated into a feedback loop. This may minimize any effects of the battery voltage variation.

An example of a relationship between the linear displacement of the pump plunger as measured by the optical sensor and the delivered volume is shown in . In some embodiments the pump plunger may exhibit a dead zone where the pump plunger may not be in contact with the membrane covering the pump chamber . Once the pump plunger reaches the pump chamber membrane there may be a relatively linear relationship between pump plunger displacement and volume until the pump plunger contacts the bottom of the pump chamber .

A model of the pump plunger is shown in as a gain element with a dead zone and saturation limit. The idealized linear model of a pump plunger that neglects the dead zone and saturation is then a static gain element EQ 162 where v k is the change in volume during a single pump pulse which refers to one actuation of the pump plunger by the SMA the pump plunger moving from a starting point towards the pump chamber and reaching an end point then returning to a stopping point. The total volume delivered may be the sum of the individual pulses 

Referring now to during a typical actuation as shown in the FIGS. target position as a function of time and actual position as measured by the optical sensor as a function of time are shown in . shows the controlled variable the duty cycle is the duty cycle that may be changed in response to errors in following the position trajectory. It should be noted that the term ADC counts refer to the counts as read by the analog to digital converter ADC on the MSP command processor. The ADC counts are proportional to the voltage of the at least one optical sensor. Thus the output of the at least one optical sensor will be a voltage which is read by the ADC analog to digital converter .

In some embodiments and referring also to the SMA controller may use a proportional controller with a fixed feed forward to control the position of the pump plunger or measurement valve plunger . The heating of the SMA wire may be an integrating process thus uses a proportional controller for controlling the position of the plungers . In some embodiments a fixed duty cycle feed forward term may be used to provide fast initial heating of the SMA wire . The output of the controller is limited to a valid PWM range 0 to 100 where valid may be in some embodiments referring to a combination of that which the system may perform together with potential SMA stress and or strain and or saturation factors which may contribute to overall SMA wire life. In some embodiments the signal from the one or more optical sensor is low passed filtered with in some embodiments a single pole discrete filter. In some embodiments the PWM frequency is 20 kHz which moves it outside the audible range which may be beneficial for many reasons including but not limited to one or more of the following user comfort and improving the user experience while pumping as the PWM frequency is outside the audible range. In some embodiments the PWM output is updated at a frequency of 5 kHz but in other embodiments the frequency may vary.

ADC input on the MSP430. The minimum time needed to sample the voltage may be represented in EQ 165 2 k ln 2 40 pF 800 ns EQ 165 where Ris the source impedance. The minimum sampling time may therefore be 1.77 microseconds. A sampling time of 2 microseconds may be used in some embodiments however in other embodiments the sampling time may be greater than or less than 2 microseconds. In some embodiments the minimum sampling time may be less than 1.77 microseconds or greater than 1.77 microseconds depending on the value of R. In some embodiments the sampling is done synchronous with the PWM and timed to be a fixed interval from the end of the high cycle of the PWM. Referring now to in some embodiments as presented in the ontime of the PWM duty cycle cannot be should not be less than the ADC sampling time. As a result in this embodiment the voltage measurement will be higher than the actual battery voltage for duty cycles under 4 . In the exemplary embodiment the control algorithm is updated every 4PWM period to give time for the Interrupt Service Routine ISR to complete. However in various embodiments the control algorithm may be updated using intervals other than every 4PWM period. SMA Target Trajectory

In some embodiments the outer volume loop described in more detail below with respect to the volume controller provides a target final pump plunger position to the inner pump plunger position control loop. The inner pump plunger position controller in some embodiments brings the pump plunger to this target position with minimum overshoot because once fluid is moved past the measurement valve it may not be brought back to the pump chamber . Thus it may be desirable in some embodiments to minimize and or prevent overshoot and this may be desirable for many reasons including but not limited to safety to the user as it may be beneficial to prevent an overdelivery of medical fluid. In some embodiments this may be accomplished where the pump plunger position controller generates a position trajectory i.e. a series of pump plunger target positions as a function of time that may be followed by the SMA actuator. This may be compared with other embodiments including a step change in target position which may increase the incidence of overshoot in some instances.

Referring also to the pump plunger target position in some embodiments has two parts which are shown an initial flat region and a linear region. The initial flat region is where the pump plunger position is not changing to allow the SMA to reach the transition temperature. The linear region is where the pump plunger is brought to its final position over a fixed time interval. Because the time interval is fixed the target pump plunger velocity may be less for smaller actuations. In some embodiments this may be beneficial for many reasons including but not limited to improved controller accuracy for small volume deliveries.

Referring to the measurement valve plunger in some embodiments may be controlled differently from the pump plunger as described above because it is binary in its operation i.e. the measurement valve is either in an open position or a closed position. The measurement valve plunger position controller therefore in some embodiments moves the measurement valve plunger to the open position and then in some embodiments holds the measurement valve plunger in the open position which may allow the fluid ample time to fully drain from the measurement chamber . This method may be beneficial for many reasons including but not limited to adding the open and hold phase to the measurement valve plunger trajectory which may require less strain on the SMA wire which may increase the SMA wire life duration of useful usable performance for actuation. Thus adding the open and hold phase rather than in some embodiments continuing to move the measurement valve plunger may require less strain on the SMA wire thus increasing the SMA wire life .

The pump controller in various embodiments includes a number of safety checks designed to provide greater safety to the pump system operation. These including but are not limited to preventing the SMA actuator from browning out the electrical system if the battery voltage is too low and guarding against electrical failures in the SMA drive circuit. Thus the pump controller monitors and ensures that the SMA wire and the drive circuit or source of electrical energy functions so as to allow for function of the pump system .

In some embodiments these safety checks include supply voltage monitoring. In some embodiments the supply voltage is measured once during each period of the low side switch PWM and is used in the feedback controller. However in other embodiments the pump controller may measure the supply voltage more or less often. However this measurement is also checked in some embodiments to verify that the supply voltage is within the range of expected battery voltages. Where the measurement is outside this range the actuation may be stopped and in some embodiments an alarm may be posted by the command processor. The failure of this integrity check could indicate one or more but not limited to the following a failure of voltage sensing circuit a failure of the battery and or a depleted battery. Although supply voltage monitoring is not the primary mechanism for detecting a depleted battery that may also be done by the battery gauge in the event of a failure of the battery gauge supply voltage monitoring allows the pump system to terminate the high current SMA actuation before actuating same may deplete or pull down the battery voltage to a level below a threshold needed for the processor voltage regulators.

The integrity of the switches and SMA wires are also monitored during each actuation. This safety routine verifies the safety of the system which may in some embodiments may including but are not limited to one or more of the following verification that the switches are functioning correctly and verification that the measurement valve plunger and the pump plunger are not actuated simultaneously. These verifications may provide greater safety to the pump system for many reasons including but limited to actuating the pump plunger i.e. pumping fluid from the reservoir while the measurement valve plunger is in the open position thereby pumping fluid to the tubing set without holding the fluid in the measurement chamber . In some embodiments this may be desirable and beneficial e.g. in those embodiments where the volume measurement sensor includes a method for determining the volume of the fluid in the measurement chamber which includes holding the fluid in the measurement chamber during the actual volume measurement. Some embodiments of the volume measurement sensor may not require the measurement valve but for those that do the safety routine described above ensures the volume measurement sensor may perform measurements according to the method. In some embodiments to perform these safety checks the supervisor processor monitors the voltage above the low side switches using three digital inputs. Referring also to the electrical architecture is shown for a single strand of SMA wire. However in some embodiments the SMA wires share the same high side switch but have their own low side switch and voltage monitor line.

Still referring to in some embodiments the safety check routine proceeds as follows. The command processor requests SMA power from the supervisor processor . The supervisor processor receives the message and proceeds to perform the following the supervisor processor verifies that the high side SMA voltage is low. If the voltage is high the supervisor processor may indicates that the power FET has failed closed. The supervisor processor closes the SMA power switch and the supervisor processor verifies that the high side SMA voltage is high. If it is low the supervisor processor indicates that the high side FET has failed open. The supervisor processor verifies that the low side SMA voltage is high. If the voltage is low the supervisor processor indicates that the SMA wire is broken or the low side FET has failed closed. The supervisor processor then sends a message to the command Processor that the SMA power is on. The command processor receives the SMA power on message and starts the SMA actuation. At the same time the supervisor processor monitors the SMA monitor lines verifying that only the designated SMA wire is being actuated and that the low side FET has not failed open. The command processor completes the actuation and sends a SMA power off message to the supervisor processor . At this point the supervisor processor turns off the SMA power and sends a confirmation message.

In various embodiments the pump system may include additional safety checks and or the process for the above described safety checks may vary. In some embodiments in addition to the safety checks described above the supervisor processor may turn off the SMA power switch and alarm if the supervisor processor does not receive a power off request from the command processor within a fixed period of time. Thus in some embodiments if the command processor for example freezes mid SMA actuation and continues to actuate the SMA and thus does not command the SMA power switch to turn off the supervisor processor may determine that the command processor has not turned off the SMA power switch and the supervisor processor may post an alarm. This protects the pump system from command processor faults which may provide another safety layer to the pump system .

In the exemplary embodiment the command processor checks the integrity of each of the at least two optical sensors during every actuation. However as discussed above in some embodiments the pump system may include at least one optical sensor where the optical sensor is used to determine the position of the pump plunger but not the measurement valve plunger . In some embodiments the pump plunger may include at least two optical sensors determining the position of the pump plunger . Further and as discussed above in some embodiments the pump system may include additional optical sensor to determine the position of additional valves and or membrane position. Thus for purposes of the discussion the term optical sensor is not meant to be limited to a single optical sensor rather applies to the at least one optical sensor that may be included in the pump system in some embodiments. Where more than one optical sensor is included in the pump system in some embodiments the discussion below may apply to each optical sensor.

In some embodiments the command processor may check the optical sensor signal output which in some embodiments may include confirming that the optical sensor is within an expected range at the start of actuation Sensor Check range check looking at the optical sensor and if not within the expected range at the start of the actuation then it may conclude it s broken before each actuation. In some embodiments if the output of the optical sensor is outside the normal operating range the command processor may post an alarm.

The command processor may in some embodiments post an alarm if the output of the optical sensor does not change significantly during an actuation. This may be beneficial for this optical sensor output may indicate e.g. an electrical fault which may produce an optical sensor output that is in range but not related to the plunger displacement for which the optical sensor is determining. Also in some embodiments allowances may be made for optical sensor noise and or drift.

Referring also to in some embodiments to maximize the life of the SMA wire which include at least one SMA wire and in some embodiments may be more than one SMA wire it may be desirable to minimize the number of times the pump plunger measurement valve plunger and or any valve plunger that is being actuated by a SMA bottoms out at the end of its travel. When the plunger reaches the end of its travel it cannot move any further so it falls behind the target position. If the tracking error the difference between the target position and actual position exceeds a fixed threshold the plunger is assumed to have bottomed out and the power to the SMA wire is turned off. Allowances are made to prevent false detects.

If the plunger is detected to have bottomed out twice in a row the maximum allowed target position may be reduced to prevent the plunger from bottoming out again. In some embodiments the maximum target position may not be reduced the first time the plunger is detected to have bottomed out to prevent any false detections of plunger saturation from limiting the plunger travel.

The delivery controller delivers a discrete dose of fluid which in some embodiments as discussed above may be any fluid including but not limited to a medical fluid e.g. insulin each time it is commanded by the therapy layer. The delivery controller in some embodiments does not track nor control the therapy e.g. basal programs boluses or the timing of the delivery rather the therapy is controlled by the therapy layer. The delivery controller in some embodiments has a primary responsibility to deliver a dose of fluid when commanded and to measure the actual fluid delivered using the volume measurement sensor and also to adjust the pump plunger command to minimize any volume delivery error. Thus where the pump plunger target position is met the delivery controller determines whether the volume of fluid delivered is as expected and if not to adjust the pump plunger command.

In addition in some embodiments the delivery controller may confirm and process a variety of system checks including but not limited to detecting occlusions detecting an empty reservoir and or system faults that may affect the delivery of fluid to the tubing set which in some embodiments may be connected by way of a cannula to the patient user of the system. If one or more faults are detected by the delivery controller the delivery controller may and in some embodiments will always enter a failsafe state preventing further delivery until and unless the at least one detected fault is resolved. The delivery controller reports faults detected to the therapy layer. The term failsafe may refer to a state of non delivery in response to a determined failure following alerting the user patient that the system is entering a failsafe mode.

Referring also now to in some embodiments the primary function of the delivery controller may be to provide closed loop control of the delivered fluid volume. The delivery controller accomplishes this function in some embodiments by taking the measured volume change this is the difference between the AVS volume measurement sensor measurement with the AVS volume measurement sensor chamber full and the AVS measurement with the chamber empty comparing it to the target volume and setting the pump plunger target displacement accordingly. Referring also to the schematic shows the outer volume loop as well as the inner voltage loop described above.

As shown in the volume controller architecture on the total delivered volume and a feed forward term based on the target volume for the current delivery is shown. As shown in this embodiment the target volume and measured volume changes dV AVS are integrated before being passed into the feedback controller there is no direct feedback on the error from an individual delivery.

Referring now to in some embodiments the volume controller may include the architecture as shown with integrator saturation and anti windup. The discrete transfer function is shown below for the region where the integrator is active. A unit time delay is included to account for the 1 frame delay between the volume measurement and its use in the feedback loop.

The pump plunger displacement versus volume delivered transfer function input is the pump plunger position and the output is the volume delivered between total volume delivered and pump plunger may be modeled as a simple discrete integrator.

The forward path transfer function may then be written as follows. An additional unit time delay may be added to account for the fact that the AVS measurement volume measurement sensor measurement will be from the previous delivery. A corresponding unit delay was also added to the target input.

The steady state volume error for this type of controller when following an input r z is shown below 

The pump system may typically be following a ramp target volume trajectory piecewise constant delivery rate . This input may be described in the discrete domain as follows 

The steady state flowing error can then be found using the discrete final value theorem applied to the plant and controller derived above 

So a PI controller will theoretically have zero steady state error when following a ramp input in volume.

Referring also to in some embodiments to improve the trajectory following of the controller a non linear feed forward term may be added to e.g. compensate for the pulse pump dead band. In some embodiments this feed forward term provides a best guess of the pump plunger displacement for a given target volume by inverting the idealized pump plunger model described above with respect to the delivery controller. Pump system characteristics are different for different reusable housing assemblies disposable housing assemblies and reservoir fill volumes i.e. the volume of fluid in the reservoir. Thus this feed forward term may generally produce some error that may need to be corrected by the feedback controller.

The gain and offset used in the feed forward controller shown in are initialized during the start up test based on the measured pump characteristics.

The gain and offset parameters of the feed forward controller are adjusted as the pump is operating. Thus the slope and offset of the model are continuously updated based on the AVS measurements volume measurement sensor measurements to improve the accuracy of the feed forward model. The learning algorithm may be based on a linear exponentially forgetting least square recursive filter. The time constant is set such that it adapts slowly compared to the feedback controller and the two do not have significant interaction. If the feed forward term was never changed it would have no effect on the stability of the feedback controller.

The feed forward model is updated using a recursive least square estimator. The function we are fitting is as follows EQ 172 

The dependent variable x is the delivered volume and the independent variable y is the pump plunger target position displacement. In vector form this may be written 

It may be noted that xis the vector x at time step n and xis the 1element of the vector x at the time step n. The function being optimized is 

The inverse is of a scalar so no matrix inversion is required. The covariance matrix may then be updated for the next time step 

Taking advantage that the covariance matrix is symmetric the method and or algorithm may be written more computationally efficiently. This may in some embodiments be beneficial for many reasons including but not limited to efficient implementation in software.

In some embodiments the filter is only valid if the pump plunger is operating in its linear range so the value may only be updated if the measured volume is in the range of 0.1 uL to 2.1 uL for example where this range is in the linear range. In some embodiments the recursive filter may not be effective if the measurements are not sufficiently signal rich i.e. where too many deliveries are performed at a single operating point the linear fit may converge to a solution that may not be valid once the pump plunger being operation over the full range. To guard against this possible localized solution the algorithm in some embodiments may not be updated where the diagonal terms of the covariance matrix exceed a set threshold.

In addition to providing closed loop control of the volume delivered by the pump system the delivery controller in some embodiments may also detect fault conditions associated with fluid delivery. A variety of fault detection methods are described below one or more of which may be included in various embodiments of the delivery controller.

In some embodiments the delivery controller monitors amongst possible additional functions the total volume error which may be defined as the cumulative volume error of all the deliveries since the delivery controller was last reset. If the delivered volume exceeds the target volume by more than a specified amount which indicates an over delivery the delivery controller in some embodiments may post a pump fault and switch to a failsafe mode which is described above. Conversely if the target volume exceeds the measured volume by a specified amount which indicates under delivery the delivery controller in some embodiments may post a pump fault and switch the pump system to a failsafe mode which is described above. In some embodiments the under delivery tolerance may be programmable by the user patient and further in some embodiments the tolerance may include a high and low sensitivity setting.

Thus where the delivery controller determines that the cumulative volume error is such that a either an over delivery or under delivery threshold has been met which threshold may be set based on safety to the user patient the delivery controller may signal a pump fault condition and the pump system may be shut down with at least one indication to the user patient such that the pump system avoids over delivery and under delivery at unsafe levels. Thus in various embodiments the pump system includes a determination of the volume of over delivery and or under delivery and a threshold tolerance of same where when the threshold is reached the pump system may enter failsafe mode.

In some embodiments the deliver controller monitors the volume of fluid that both flows into and out of the volume measurement chamber and in some embodiments may determine whether the tubing set may be occluded. In some embodiments there are two parallel methods used for detecting an occlusion which may be termed the total occlusion method and the partial occlusion method. The total occlusion detection method monitors the flow into and out of the volume measurement chamber during a single delivery of fluid. The partial occlusion detection method monitors for a gradual build up of fluid in the volume measurement chamber .

The residual volume for an individual delivery may be defined as the difference between the volume flow into the volume measurement chamber which may be referred to as the pumped volume and the volume flowing out of the volume measurement chamber which may be referred to as the delivered volume EQ 179 

Under normal operation in some embodiments the residual volume may be close to zero at steady state. In some embodiments the residual volume may be the fundamental metric for detecting both total and partial occlusions.

In the event of a total occlusion of the fluid exit path which may also be referred to as the tubing set and the cannula as well as the fluid path in the disposable housing assembly downstream from the volume measurement chamber the residual volume in the volume measurement chamber may be approximately the same size as the volume pumped i.e. the volume of fluid pumped into the volume measurement chamber . Thus in these circumstances fluid has been pumped into the volume measurement chamber however little or no fluid may have left the volume measurement chamber . In these circumstances in some embodiments a threshold residual volume may be used as an indicator of a total occlusion. In some embodiments the total occlusion detection threshold may be set based on the cumulative pumped volume i.e. the total volume of fluid pumped. A linearized model of the fluid flow out of the volume measurement chamber may have the form 

Larger pumped volumes larger volumes of fluid pumped into the volume measurement chamber may result in larger delivered volumes for the same measurement valve open time and tubing set flow impedance. In some embodiments therefore the residual volume threshold for occlusion is therefore calculated as a fraction of the total volume pumped EQ 182 

where is a value less than one. An exemplary value for is 0.15 which means the delivery controller may detect a total occlusion if less than 85 of the fluid pumped into the volume measurement chamber is delivered pumped out of the volume measurement chamber and in some embodiments to the tubing set and to the user patient .

Where is the total occlusion detection indicator. In some embodiments the pump system may not alarm immediately after the total occlusion detection indicator has been set to 1 rather in some embodiments an alarm may be posted once the total occlusion detection indicator remains positive for a preset number of consecutive deliveries to allow time for the occlusion to clear through regular operation of the pump system which in some circumstances may be accomplished. In various embodiments the number of occluded deliveries permitted is variable and may in some embodiments be pre set preprogrammed and or may be based on a user patient configurable occlusion sensitivity setting.

In some embodiments in the event that an occlusion clears on its own the fluid may once again flow out of the volume measurement chamber . Thus in some embodiments the logic for clearing the total occlusion is related to the delivered volume vbeing greater than a given threshold. This cleared occlusion threshold may be in some embodiments calculated as a fraction of the total volume pumped for a given delivery plus the accumulated residual volume if any from previous deliveries which may be represented as follows 

In some embodiments an increase in the residual volume may be an indication that an occlusion has occurred however the residual volume returning to zero may not necessarily be an indication that an occlusion has cleared. This is because the pump plunger may in some instances only be able to pump one or two deliveries following an occlusion due to the build up of back pressure in the volume measurement chamber . Thus once the pump system has reached this condition the change in residual volume becomes close to zero thus no fluid flows into the volume measurement chamber and no fluid volume flows out of the volume measurement chamber . As a result in some embodiments the delivered volume instead of the residual volume may be used for the condition to clear a total occlusion indication.

In various embodiments partial occlusions result in an accumulation of residual volume in the volume measurement chamber but this accumulation may occur over time at a low enough rate that the total occlusion detection logic may not detect the accumulation. As a result in some embodiments a second method i.e. partial occlusion method may be used which integrates the residual volume of individual deliveries and uses this sum to detect a slow build up of volume characteristic of a partial occlusion. Additionally any volume that leaks from the volume measurement chamber between deliveries may be subtracted out of the total of the residual volume of individual deliveries so as to prevent confusing an inter delivery leak with a partial occlusion. A leaky integration as shown in EQ 187 and EQ 188 may be performed so that the cumulative effect of measurement error may be minimized.

As with the total occlusion detection and occlusion alarm a partial occlusion detection may not trigger an occlusion alarm until a minimum number of consecutive deliveries are detected determined to be occluded. This allows time for partial occlusions to clear through regular operation of the pump system which in some circumstances may be accomplished. Additionally in some embodiments the partial occlusion alarm may not be posted unless the total trajectory error exceeds a certain threshold.

In some embodiments the partial occlusion threshold may be a limit on how much fluid volume may remain in the volume measurement chamber between deliveries. If there is too much residual volume in the volume measurement chamber the pump plunger may be unable to deliver a full pump stroke due to the increased back pressure. In some embodiments this sets an upper limit for the allowed residual volume. Thus if the maximum target delivery volume for a single delivery is vand the maximum total volume of the volume measurement chamber before the pack pressure prevents further pumping is Vthen the maximum partial occlusion threshold is EQ 189 

This threshold is on the order of T 1.0 L. If a cumulative total of more than 1.0 L of volume remains in the volume measurement chamber a partial occlusion may be detected. Again an alarm may not be posted unless the under delivery and number of consecutive occluded delivery conditions have also been met.

The empty reservoir detection algorithm may in some embodiments evaluate the ability of the pump plunger to deliver fluid from the reservoir to the volume measurement chamber . The pump system in some embodiments may use two parameters for this evaluation which may include but is not limited to the pumping error and the total trajectory error. The pumping error may be the difference between the target and actual pumped volumes. An internal empty reservoir indicator which may be set if the pump is under delivering. In some embodiments if under delivery occurs two consecutive deliveries while the pump plunger is at its maximum actuation the maximum target volume may be decreased allowing pumping to continue with smaller and more frequent deliveries. If the maximum target volume is reduced by this method below a minimum threshold an empty reservoir alarm may be posted. Alternatively in some embodiments if the difference between the measured volume delivered and the total target volume requested exceeds a threshold an empty reservoir may be assumed by the pump system and an alarm may be posted. In some embodiments empty reservoir alarms may also be posted due to an up stream occlusion leak or possibly a faulty pump plunger shape memory actuator .

In some embodiments as the reservoir empties the maximum volume that the pump chamber membrane restoring force may pull from the reservoir may decrease. Consequently the maximum volume that the pump plunger may deliver to the measurement chamber and then to the tubing set may also decrease. To minimize the volume left in the reservoir when the disposable housing assembly may be discarded the delivery controller may dynamically decrease the maximum target volume as this occurs. Thus in some embodiments this may allow the pump system to continue administering fluid therapy by delivering smaller deliveries more frequently.

The basis for this empty reservoir detection maximum volume reduction in some embodiments may be the difference between the goal target volume for each delivery v and the volume pumped into the volume measurement chamber v. This difference may be defined as the pumped volume error v EQ 190 

An internal indicator may be set whenever this difference is greater than zero v 0 and the pump plunger is either saturating or at its maximum allowed value. If this occurs in two consecutive deliveries the maximum target delivery volume may be decremented and the therapy layer may be called to reschedule the next delivery. In some embodiments an exception to this method may be made during a bolus. When bolusing the target delivery volume for the entire bolus may be in some embodiments calculated at the start of the bolus. Therefore the maximum target volume may not decrement during a bolus.

In some embodiments once the maximum target volume has been reduced to the minimum delivery volume any further saturated under delivering may result in an empty reservoir alarm.

In some embodiments the pump system may alarm for an empty reservoir when either the maximum allowed target volume is reduced below a minimum by way of a dynamic reduction as described above or in some embodiments whenever the pump system is under delivering by more than a given amount threshold. The basis for the under delivery empty reservoir detection algorithm may be the difference between the total target volume V and the measured volume V. This difference may be defined as the total trajectory error V EQ 191 

In some embodiments additional conditions are not placed on this metric for alarming. The pump system may alarm in this way if the reservoir is emptying while a bolus is in progress and hence no maximum volume reduction may be possible. In some embodiments the pump system may also rather alarm in this way when the ability of the pump chamber is reduced faster than the maximum volume reduction algorithm may reduce the maximum volume.

In some embodiments of the pump system the delivery controller may include an algorithm for detecting acoustic leaks and resonant air bubbles in the volume measurement chamber . The detection algorithm may be based on the premise that the volume measurement sensor damping ratio for the second order resonance may in some embodiments remain substantially constant during all the sine sweeps of an individual delivery.

In some embodiments therefore the comparison of the model fit calculated damping ratios in the pumped and un pumped states may be used as a metric for the detection of for example gross acoustic leaks or large air bubbles. This metric may be separate from the absolute check on damping ratio performed in some embodiments as a volume measurement sensor level integrity check.

In some embodiments the method for detecting acoustic leaks and bubbles in the volume measurement chamber may include the following steps. First define the maximum and minimum damping ratios from a single set of sine sweep data max min EQ 193 

The differential damping metric may then be defined as the percent difference between these two values 

As differentiated from the occlusion and empty reservoir indicators described above a differential damping indicator may be in some embodiments sufficient to trigger an acoustic leak alarm and thus the differential damping indicator may always in some embodiments result in an acoustic leak alarm.

The thresholds for this metric may be based entirely on experimental evidence. In some embodiments a very conservative threshold of e.g. a ten percent difference between the damping ratios of any two sine sweeps from a single delivery may be set or T 5. However in various embodiments the threshold may be higher or lower.

In some embodiments the delivery controller may check for leaking fluid leaking out of the volume measurement chamber either for example but not limited to upstream past the measurement valve or downstream past the measurement valve . It may be beneficial for many reasons to perform checks and detect leaks as for example leaks may generate issues both during a delivery and between delivery if residual volume leaks out of the volume measurement chamber . Thus in some embodiments two different leak tests may be performed by the pump system including but not limited to an inter delivery leak test to check for leaks during a delivery and an intra delivery leak test to check for loss of residual volume between deliveries.

The intra delivery leak test may be performed in some embodiments when the volume measurement chamber is full of fluid. A first volume measurement may be taken after the pump plunger has been actuated. The fluid may be left in the volume measurement chamber for a fixed period of time e.g. 1 second and then a second volume measurement may be taken. In some embodiments in general these two volume measurements should be the same. Thus any difference between these measurements that is above the expected measurement noise which in some embodiments may be approximately 1 nL may generally be attributed to a leaking valve. The intra delivery leak test in some embodiments may be performed during each delivery i.e. each basal or bolus delivery however in various embodiments the intra delivery test may be performed more or less often.

The inter delivery leak test in some embodiments may be performed when the measurement chamber is empty except for the normally generally small amount of residual volume that may persist in the chamber between deliveries. For the inter delivery leak test the last volume estimate of the previous delivery is compared to the first volume estimate of the new delivery. As in the case of the intra delivery leak test these measurements should generally be the same. The expected measurement noise in some embodiments may be marginally higher than in the case of the intra delivery leak test. Still any volume change outside this expected noise floor may also generally be attributed to a leaking valve. The inter delivery leak test may be performed before each basal delivery. In some embodiments the intra delivery test may not be performed during a bolus delivery because there is a minimal delay between consecutive deliveries. However in some embodiments the intra delivery test may be performed during a bolus delivery.

A similar algorithm may be used to detect both inter and intra delivery leaks. The basis for the detection algorithms is the leaked volume defined as the difference between the consecutive volume estimates EQ 196 

This leaked volume may be integrated over consecutive deliveries using a leaky integrator. In this case the metric for leak detection S will be defined as follows. EQ 197 where 

In some embodiments the leak thresholds for the inter delivery leak algorithm may be set whereby the measured leaked volume is the volume that was over delivered in the case of a leaking measurement valve. In the case of a leaking measurement chamber inlet valve there may be no over delivery but in some embodiments the leak measurement may not differentiate between this and a measurement valve leak. In the case of an inter delivery leak in some embodiments the potential over delivery will generally be bounded by the amount of residual volume.

In some embodiments the intra leak detection threshold may be set by taking into account that the actual leaked volume may be greater than the volume measured during the leak test. In some embodiments the leak test may be performed completed over a short interval for example approximately 1 second but where the fluid is pressurized in the volume measurement chamber for a longer period of time this may allow for additional volume to leak out.

In some embodiments as described above the pump system includes a measurement valve which maintains the fluid in the measurement chamber unless and until the measurement has been completed by the volume measurement sensor. Thus in some embodiments it may be beneficial to determine if a leak is present in the measurement valve i.e. where fluid is leaking from the volume measurement chamber prior to the completion of the volume measurement thus detecting possibly inaccurate volume measurements as soon as they occur. The measurement valve fail detection metric in some embodiments compares the expected outcome of an actuation to the observed outcome. In the event of a full measurement valve failure for example the volume pumped may appear to be near zero as the fluid exits nearly as fast or as fast as it is pumped into the measurement chamber . Using a feed forward model estimate for the actuator response in some embodiments measurement valve failures may be guarded against in the following manner where slope m and offset b are the actuator model 

Thus in some embodiments following this method where the delivery controller commands an actuation that the current model predicts should result in three times the target volume pumped but where the volume observed to be pumped is less than a tenth of the targeted pumped volume then in some embodiments a measurement valve failure may be assumed and an alarm may be posted.

In some embodiments the intra leak method assumes that a leak is continuous. However discontinuous leaks i.e. where this assumption would not hold true may occur. Thus in some embodiments to detect a leak of this type the local relationship between the target pump plunger position commanded and the subsequent volume pumped may be monitored. An indication of a discontinuous leak may be that a change in the target position does not necessarily correspond to a change in the volume pumped. Thus if the relationship between the target position of the plunger and the volume pumped becomes uncorrelated a discontinuous leak may be suspected by the pump system . Referring now also to in these cases in some embodiments a double pump plunger stroke delivery may be performed. If the measurement valve is operating normally a second actuation of the pump plunger would result in additional volume measured in the measurement chamber . However if the measurement valve performs like a pressure relief valve the additional pumped volume is expected to leak discontinuously and the volume in the measurement chamber may remain substantially unchanged. In some embodiments while performing a discontinuous leak check the pump plunger position change targeted for each of the two strokes may be one that should during regular pump system function result in one half the targeted volume pumped for each stroke based on the current actuator model.

In some embodiments in addition to the various safety checks performed by the command processor there are a set of secondary checks performed by the supervisor processor . In some embodiments the supervisor processor may control the power to the pump system so the active participation of both processors is needed for the pump system to deliver fluid. The supervisor processor may provide oversight at a number of different levels and in some embodiments may not turn on power to the pump system unless all of the integrity checks pass. Some of the secondary checks performed by the supervisor processor may include but are not limited to one or more of the following.

In some embodiments a therapy monitor on the supervisor processor may determine the volume and timing of fluid delivery independent of the command processor . Thus in some embodiments the supervisor processor may prevent the command processor from delivering fluid if both the timing and volume are not in agreement.

In some embodiments the delivery monitor provides oversight of the volume measurement sensor using a redundant temperature sensor redundant storage of the calibration parameter and independent range checking of the results and back calculation of the volume measurement sensor model fit errors.

In some embodiments the delivery controller checks for failed switches open or closed and broken SMA and also guards against simultaneous or out of sequence actuation of the pump plunger and measurement valve . The delivery controller may also limit the time the power is applied to SMA. In some embodiments the delivery controller may independently track the target fluid volume and delivered fluid volume. In some embodiments the delivery controller may post an alarm and prevent further delivery if it detects a substantial over or under delivery.

Verifying the integrity of a system or device prior to use is desirable. With respect to medical devices the integrity of the system or device may be verified to for example but not limited to ensure the safety of the user patient. The detection of fault conditions is at least one method of verifying the integrity of the system or device. In many embodiments detecting fault conditions at start up is desirable to avoid downstream errors and failures while the medical device is delivering therapy or otherwise medically serving a user or patient.

Some embodiments of the infusion device methods and systems will be described below with reference to an exemplary embodiment. The exemplary embodiment is described with respect to a medical infusion pump which in some embodiments may be an insulin pump as shown and described in herein. Reference herein to a disposable may refer to in some embodiments the various embodiments of the disposable housing assembly and or reservoir portion of the infusion pump described herein.

Although the term start up test may be used herein the systems and methods described herein may be used at any time. However in many embodiments the systems and methods are used at start up as well as at various other times during the use of the medical device. These include but are not limited to when various faults are detected by the system during operation. The start up test may be beneficial for many reasons including but not limited to identifying defective or faulty disposables prior to their use in administering a medical therapy and or detecting a fault condition with a medical device that is in ongoing use. Thus the start up test may increase the safety of medical devices.

In some embodiments of the method and system the method and system may be used to determine whether a disposable housing assembly has faults prior to use for delivering therapy. Thus in some embodiments the start up test procedure method may be performed each time a disposable housing assembly is attached to a reusable housing assembly. The faults may include but are not limited to one or more of the following disposable leaks disposable valve malfunction disposable reservoir malfunction and or pump reusable disposable malfunction. In some embodiments of the systems and methods where the integrity of the disposable is not verified for two sequential disposable housing assemblies the lack of integrity of the reusable pump may be confirmed assumed. In some embodiments the system may indicate that a new pump reusable may be recommended and once another reusable is attached to a disposable the start up test may be repeated on a disposable which may include repeating the start up test on one or more previously failed disposable housing assemblies. In some embodiments this method may be used to consistently verify the integrity of the pump.

Referring now to in some embodiments after a priming function has been completed which may be performed for many reasons including but not limited to initial priming of a new disposable housing assembly and or priming after disconnect of a tubing set from a cannula. However in any case once a priming function has been completed and before a cannula is attached to administer therapeutic medications the system may in some embodiments perform a verification of the measurement valve integrity. This may be completed by actuating the pump plunger to deliver a threshold volume of fluid. This may be done by actuating the pump plunger with increasingly longer ontime taking a volume measurements sensor measurement and following determining the volume pumped and if the volume pumped is less than a threshold volume actuating the pump plunger again using an increasingly longer ontime. However where the pump system after repeating this process reaches the maximum ontime which in some embodiments is a preprogrammed time and has not reached the threshold volume i.e. pumped more than the minimum for a measurement valve failure detection but less than the minimum to pass the start up test. Thus in these circumstances in some embodiments the pump system may conclude that the pump plunger SMA actuator and the reservoir may be faulty.

With respect to measurement valve integrity there are many benefits to confirming the integrity prior to administering therapy to a user patient. These benefits include but are not limited to preventing over delivery. Thus confirming the integrity of the pump system prior to administering therapy to a user patient safety of the system may be maintained.

With respect to the increasing ontime in various embodiments using ontime to control the delivery of the medical fluid this may be performed to verify a measurement valve failure versus a pump plunger pump plunger SMA actuator failure. The maximum ontime in some embodiments may be determined using many variables including but not limited to the ontime that a reasonable pump plunger pump plunger SMA actuator requires to actuate. Thus where the system is experiencing the maximum ontime and there is no volume measured by the volume measurement sensor assembly i.e. the volume measured is less than the measurement valve failure detection threshold than it may be determined and or confirmed that the measurement valve may have failed.

In some embodiments however the pump may be functioning however is weakened. Thus in some embodiments this differentiation may be confirmed by removing the disposable housing assembly and attaching a new another disposable housing assembly. Where the same results are repeated it may be determined and or confirmed that the pump plunger and or pump plunger SMA actuator is weak and may be replaced. In some embodiments the controller may recommend the reusable housing assembly of the pump system be replaced. In some embodiments the controller may include a safety system that prevents the continued use of the reusable housing assembly that has been determined to be weak thus ensuring the potentially failed reusable housing assembly is not reused.

Additionally where the system is confirming whether the pump is weak or the disposable is faulty replacing the disposable with a new disposable may also confirm whether the reservoir in the first disposable housing assembly included a faulty reservoir which may indicate for example but not limited one or more of the following that the reservoir valve is not functioning properly e.g. is not able to be opened i.e. is stuck in the closed position and or that the reservoir is not filled enough. Thus where a fault is found with one disposable housing assembly in some embodiments the pump system may require the user patient to replace the disposable housing assembly with another disposable housing assembly. In some embodiments where a fault is found with the second disposable housing assembly the pump system in some embodiments may require another reusable housing assembly. Thus in some embodiments this system reduces the need of the system to determine whether the fault was caused by a leaking measurement valve or a faulty reservoir and or faulty reservoir valve . In either case the reusable housing assembly is replaced. However the system and methods described herein ensure that a faulty reusable housing assembly is detected and confirmed prior to continued use for providing therapy to a user patient.

In some embodiments when the threshold volume has been met as determined by the volume measurement sensor assembly in some embodiments a leak test is performed. The threshold volume may be any volume preprogrammed into the system. In the exemplary embodiment this volume may be 1 microliter however in other embodiments the volume may be less than or greater than 1 microliter. The leak test in some embodiments includes holding the volume of fluid in the volume measurement chamber for a predetermined time e.g. a number of seconds which are preprogrammed predetermined and in the exemplary embodiments may be approximately 2 to 5 seconds however in other embodiments may be less than or greater than this time. The volume measurement sensor assembly then completes another volume measurement to determine whether any volume leaked from the volume measurement chamber . Thus in some embodiments this leak test may determine and or detect a slow leak as opposed to a fast leak which may be determined detected as discussed above .

In some embodiments once the leak test is completed the pump system opens the measurement valve to empty the volume of fluid from the volume measurement chamber . In some embodiments the pump system may alert the user patient to shake the volume of fluid off the tubing set prior to connection to the cannula.

Following in some embodiments the system confirms the integrity of the battery the volume measurement sensor assembly and the temperature before signaling to the user patient that they may connect to the device i.e. connecting the tubing set to the cannula. Thus the start up test presents an opportunity for the pump system to perform a delivery conform the integrity of the disposable housing assembly and the reusable housing assembly. Additionally the pump system executes all of the standard run time integrity tests i.e. the integrity tests performed after each delivery in the normal course of the therapy providing an opportunity to detect other failures before therapy has started.

Additionally in some embodiments prior to any start up test the pump system may alert and or alarm the user patient of the start up test and that the user patient should ensure they are not connected to the medical device. In some embodiments a user interface and or controller device e.g. remote control assembly may require the user patient to verify that they are disconnected and thus this may contribute to increased safety and prevention of inadvertent and or accidental over delivery delivery.

The start up test in some embodiments may provide an initial data point for modeling the ontime versus volume delivered in embodiments where this system of pump control is used . Thus in some embodiments the final volume pumped into the volume measurement chamber may be determined and be used as an initial model data point. From this initial data point the slope and offset for the ontime may be determined or estimated. Thus although the slope and offset may be adjusted through the ongoing operation of the pump the start up test may present an initial slope and offset which is a more valuable and useful starting point for the estimator as compared with no initial data. This may improve the accuracy of the estimator and the accuracy of the initial deliveries of the pump. In various embodiments for example those described above and below where an ontime control system is not used the start up procedure and method may be used to provide the initial date point for the embodiment of the control system.

In some embodiments the infusion pump may perform a start up test each time the user changes the infusion set tubing set . In some embodiments the start up test may be performed before the user connects the infusion set tubing set to the cannula. This may be beneficial for many reasons including but not limited to detecting faults before there is any potential for over or under delivery to the user. Thus in some embodiments the start up test may have one or more of the following benefits detects measurement valve failures and may update the pump model to improve the start up transient. In addition the start up method may also execute all of the standard run time integrity tests which may provide an opportunity for the pump system to detect other failures before the fluid delivery therapy has started.

In the exemplary embodiment the start up may accomplish many tasks including but not limited to initializing the feed forward actuator model offset initializing the target measurement valve position near minimum and performing pump system integrity checks. In practice the start up method may be similar to a standard delivery but with a few key differences outlined in detail below. Referring now to a schematic of one embodiment of the start up test method is shown. The start up method may be broken into three distinct phases namely a pumping phase a leak check phase and a valving phase. The pumping phase includes collecting data for the pump plunger modeling by way of pump SMA actuator re actuation. The leak check phase includes checking pumped volumes against expected values after pumping fluid into the measurement chamber and after a delay. The valving phase includes releasing the pumped fluid from the measurement chamber and the measurement valve actuation target position is set by way of re actuation of the measurement valve SMA actuator .

Referring now also to where the pump plunger target position is plotted against the volume of fluid pumped to the volume measurement chamber during a start up the pump plunger may be re actuated multiple times without actuation of the measurement valve . At each re actuation the pump plunger target position change may be incremented. The size of this increment may vary based on the total volume that has already been pumped into the volume measurement chamber by previous re actuations.

Initially the goal of the start up procedure is to accurately set the actuator model offset. In some embodiments the target position may be initialized at a value which is low enough to ensure that the pump will not move fluid. The increment for re actuation in some embodiments is set at a small value so that when the pump plunger moves from the dead band into its linear region the first delivery will be small. In order to estimate the offset based on this single first pumped volume a default pump slope is assumed. The offset may be therefore EQ 200 

Where mis the default slope is the target position change for the first pumped volume delivery and vis the first pumped volume. The error in this estimate is directly proportional to the error in the slope and the size of v. EQ 201 

Referring to thus the smaller vis the less susceptible the offset calculation is to deviation from the average slope m used for the calculation. As such the pumped volume limit for this phase V is close to zero. Once an actuation has moved any fluid an accurate offset may be calculated. The offset may be calculated for every actuation which results in a pumped volume less than V even those which move no fluid. In the event that no non zero volumes are pumped which are less than V the last zero volume data point is used to determine the offset. This result may be within of the actual offset.

Referring now to after the first non zero volume has been pumped and the initial pump offset calculated the goal of re actuation in some embodiments is to model the slope of the actuator using the least squares estimator described above. The increment of position change in this phase is set so that multiple points may be collected for the regression analysis therefore improving the model.

Referring now to as the volume measurement chamber fills with fluid the dynamics of pumping may begin to change. Once a certain volume V has been achieved the pumped volume for a given pump plunger position change i.e. pump plunger displacement may no longer reflect the normal empty chamber actuator response. After this point the actuator model may no longer be updated. The third position change increment for re actuation is based on the normal pump controls described above. The goal of this phase in some embodiments is to fill the volume measurement chamber to the minimum hold volume V.

During the start up procedure integrity checks may also be completed in some embodiments. These may include but are not limited to one or more of the following. For example if the pump target position reaches saturation and the pumped volume remains close to zero in some embodiments the measurement valve is assumed to have failed in the open position. As may be determined from inspection this is slightly different from the regular delivery for measurement valve failure because it is based solely on saturation rather than either saturation or the pump feed forward model.

If the volume delivered to the volume measurement chamber for a pre determined pump plunger position change i.e. displacement is substantially less than the expected volume in some embodiments it may be determined that the pump is experiencing a weak pump fault.

At the conclusion of the pump plunger actuation phase of the start up test the total volume pumped into the volume measurement chamber is determined. Where the minimum threshold for alarm is not met the start up procedure may conclude that both the measurement valve and the measurement chamber inlet check valve are functioning normally.

During start up the pump system tests for inter delivery leaks using a similar procedure as performed for the run time tests. In some embodiments during the start up procedure after fluid has been pumped to the volume measurement chamber and a baseline pumped fluid measurement is taken completed a second measurement is taken after a fixed delay. If there is any volume change between these two measurements outside the measurement noise it may be concluded in some embodiments that it is likely due to fluid leaking past the measurement valve and or the measurement chamber inlet check valve . The start up test leak check procedure in some embodiments is the same as the run time leak detection however the test parameters e.g. waiting time between measurements leak alarm thresholds may be different.

In some embodiments as with the pump plunger the measurement valve SMA is re actuated multiple times during the start up test. In some embodiments following each actuation the volume in the volume measurement chamber may be compared to the volume in the volume measurement chamber before the pump plunger was actuated. In some embodiments where there is still a residual volume in the volume measurement chamber the measurement valve SMA may be re actuated. In some embodiments the measurement valve target position change may be incremented from its default value with each re actuation. When an actuation results in the residual volume dropping to near zero the re actuations may be stopped and in some embodiments the last targeted measurement valve position change becomes the new default position change for future deliveries. In some embodiments this may be beneficial for one or more reasons including by making the increment small a near minimum measurement valve target position may be achieved. This may be desirable in some embodiments for many reasons including but not limited to it reducing the strain on the measurement valve SMA for each actuation which may potentially increase the SMA time to failure shorten the life of the SMA.

In some embodiments the start up occlusion detection may be the same or similar to the run time occlusion detection as described above. However in some embodiments the start up occlusion detection may not require the occlusion detection criteria to be met for consecutive deliveries before alarming. As discussed above the occlusion detection criteria is that the volume delivered as determined by the volume measurement sensor is greater than some fraction of the volume pumped.

In some embodiments for each measurement valve re actuation of the start up test the measurement valve target position may be incremented. In some embodiments when the start up test is complete the last targeted measurement valve position may become the starting target measurement valve position for the first subsequent run time delivery.

In some embodiments rather than the infusion pump system including a volume measurement sensor assembly the pump system may include one or more optical sensors used as a feedback measurement. For example referring also to in some embodiments rather than a delivered volume determination from a volume measurement sensor assembly see the volume delivered may be presumed assumed from at least one pump plunger optical sensor input which may be correlated to a volume delivered based on a model of the pump assembly. In some embodiments the pump assembly which may be integrated into a reusable housing assembly may be calibrated at manufacture and therefore a model of pump plunger displacement versus volume of fluid pumped may be generated. In some embodiments additional modeling may be completed with respect to disposable housing assemblies thus in some embodiments each disposable housing assembly may be calibrated with a reusable housing assembly and in some embodiments each disposable housing assembly may include e.g. a calibration code for example which may either be input manually into e.g. a remote control assembly and or read by the reusable housing assembly and or remote control assembly for example using an RFID reader and writer and or a bar code scanner. In some embodiments each reusable housing assembly may include one or more disposable housing assemblies that have been calibrated with the reusable housing assembly. In some embodiments each disposable housing assembly may be calibrated at manufacture.

The code in some embodiments may indicate the model for the controller to follow. Thus variations in disposable housing assemblies may be input into the controller and pump predictive model therefore the model may be substantially accurate with respect to predicting an assumed volume delivered.

However in some embodiments of the infusion pump system a series of one or more models may be established. For example in some embodiments for each disposable housing assembly a code or indication of the model may be assigned based on a calibration procedure at manufacture. In these embodiments therefore each disposable housing assembly may not be explicitly calibrated to a specific reusable housing assembly however the calibration procedure may fit the disposable housing assembly into a category or code that most closely represents the expected performance based on the calibration procedure.

Thus in some embodiments of these embodiments of the infusion pump system the displacement of the pump plunger as discussed above may follow a trajectory. The at least one optical sensor may determine the actual displacement of the pump plunger and the volume delivered may be assumed predicted based on a model. In various embodiments the pump plunger may include one or more optical sensors to determine the displacement of the pump plunger . Examples of the optical sensors and the placement of these optical sensors may include those described above with respect to

In some embodiments variations in the disposable housing assembly for example SMA wire actuation and membrane spring back return to starting position following pump etc. may be accounted for in a predictive model. Thus in some embodiments the number of actuations of the pump plunger may translate to a variation in the feed forward term to compensate for a change in the prediction of the ADC counts to pump plunger displacement. In some embodiments the SMA wire may vary upon use and or the membrane of the pump chamber may vary upon use and therefore the assumed volume of fluid pumped from the reservoir for a pump plunge displacement may vary with the number of pump actuations. In some embodiments as the volume in the reservoir is depleted the expected volume delivered for ADC count may vary and therefore the volume in the reservoir at the start of the pump may be factored into the one or more models.

In some embodiments the actual displacement of the pump plunge upon actuation may vary from the trajectory. The volume controller may feed back the actual pump plunger displacement information sensed by the at least one optical sensor. The difference between the displacement requested and the actual displacement may be fed into one or more of the upcoming deliveries therefore compensating for a displacement error.

Thus the displacement of the pump plunger may in some embodiments essentially be translated into an assumed presumed volume delivery. Using the at least one optical sensor the actual displacement of the pump plunger for each actuation of the pump plunger may be determined. The displacement may be fed back to the target pump plunger displacement and the volume controller may determine whether and how to compensate for the actual displacement if determined necessary. In some embodiments as discussed above the pump plunger displacement and in some embodiments taken together with the number of actuations of the pump plunger for a given disposable housing assembly as well as the reservoir volume may determine the volume delivered based on a model.

In some embodiments whether and how to compensate for the determined actual displacement of the pump plunger may depend on one or more factors. These may include the size of the difference whether the difference may indicate an over delivery or an under delivery the number of consecutive actual displacement readings that may show error etc. Thus in some embodiments a threshold error may be required prior to the controller adjusting the displacement trajectory.

In some embodiments of these embodiments of the infusion pump system the system may include additional optical sensors to sense the movement of valves. For example in some embodiments the pump system may include at least one optical sensor to sense the movement of the reservoir valve and or a pump chamber exit valve which may be similar to the valves described and shown above for example with respect to . The pump chamber exit valve may function in a similar manner to the volume measurement chamber valve only the pump chamber exit valve once opened may allow fluid to flow from the pump chamber to the tubing set . Thus as discussed above in these embodiments the volume measurement sensor assembly together with the measurement valve may be removed from the pump system .

Thus in these embodiments confirmation of the valves opening and closing may confirm fluid was pumped from the reservoir and fluid was pumped out of the pump chamber and to the tubing set . Following where the optical sensors do not sense the opening and or closing of one or more valves the system may post an alarm. However as discussed above with respect to various alarms posted to the system in some embodiments the alarms may be posted after a threshold is met. For example in some embodiments an alarm may be posted if the optical sensor determines that two consecutive pump plunger actuations occurred and two consecutive errors were detected on one or more of the valves .

As discussed above with respect to the at least one optical sensor for the pump plunger in some embodiments greater than one optical sensor may be used to collect sensor input from redundant optical sensors. In some embodiments for example as shown in the two optical sensors for the pump plunger may be located in two different locations in the pump system thereby collecting sensor data from two different angles which may provide in some embodiments a more developed determination of the pump plunger displacement.

In some embodiments the two or more optical sensors may be used for redundancy and also to determine whether one of the optical sensors may have an error. Thus in some embodiments upon collection of optical sensor data from two or more optical sensors the system may comparing the two sets of data determine that one of the sensors may have an error as the data points vary more than a preset threshold. However in some embodiments where the optical sensor data collected by the at least one optical sensor is so far away from the expected value i.e. exceeds one or more thresholds the system may post an alarm and conclude the at least one optical sensor has failed and or is in error.

A number of embodiments have been described. Nevertheless it will be understood that various modifications may be made. Accordingly other embodiments are within the scope of the following claims.

While the principles of the invention have been described herein it is to be understood by those skilled in the art that this description is made only by way of example and not as a limitation as to the scope of the invention. Other embodiments are contemplated within the scope of the present invention in addition to the exemplary embodiments shown and described herein. Modifications and substitutions by one of ordinary skill in the art are considered to be within the scope of the present invention.

