---

title: Method and system for searching stored data
abstract: A complete document management system is disclosed. Accordingly, systems and methods for managing data associated with a data storage component coupled to multiple computers over a network are disclosed. Systems and methods for managing data associated with a data storage component coupled to multiple computers over a network are further disclosed. Additionally, systems and methods for accessing documents available through a network, wherein the documents are stored on one or more data storage devices coupled to the network, are disclosed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09639529&OS=09639529&RS=09639529
owner: Commvault Systems, Inc.
number: 09639529
owner_city: Tinton Falls
owner_country: US
publication_date: 20131223
---
This application is a continuation of U.S. application Ser. No. 13 538 862 filed Jun. 29 2012 now U.S. Pat. No. 8 615 523 which is a continuation application of U.S. application Ser. No. 13 076 634 filed Mar. 31 2011 now U.S. Pat. No. 8 234 249 which is a continuation application of U.S. application Ser. No. 12 058 589 filed Mar. 28 2008 now U.S. Pat. No. 7 937 365 which is a continuation application of U.S. application Ser. No. 11 931 034 filed Oct. 31 2007 which claims priority to U.S. Provisional Application No. 60 871 735 filed Dec. 22 2006 each of which is herein incorporated by reference in its entirety.

Data protection systems contain large amounts of data. This data includes personal data such as financial data customer client patient contact data audio visual data and much more. Corporate computer systems often contain word processing documents engineering diagrams spreadsheets business strategy presentations and so on. With the proliferation of computer systems and the ease of creating content the amount of content in an organization has expanded rapidly. Even small offices often have more information stored than any single employee can know about or locate.

Some data protection applications provide functions for actively searching for files within the organization based on a previously created index of the information available in each file. A user can then search for and retrieve documents based on a topic. Typical search software operates on a single index of keywords derived from the data that has been copied for protection purposes. It is typical for an organization to maintain many secondary copies of its data and the various copies are typically stored in multiple formats in multiple devices. For example when current copy of data is made previous copies are often maintained so that an historical archive is created. Thus if the most recent copy does not have the desired data for a restore operation an older copy may be used. With the existence of multiple copies on multiple devices spanning weeks months and even years a search over this data can be complex and time consuming. A search over such a large amount of data can require separately searching content indices of all of the computer systems within an organization. This can put an unexpected load on already burdened systems and can require significant time on the part of a system operator.

Typical search systems also create problems when retrieval of the desired data is attempted. First typical systems require that retrieval of the identified data be performed as a restore operation. The typical restore operation first identifies a secondary copy of the data in question on a secondary volume and copies the identified copy of the data back onto a production server or other primary or working volume and overwrites the existing data files. This can be inconvenient if it is desired to maintain the production copy or if it is merely desired to inspect the contents of a secondary data store. Second typical systems are blind to the security rights of users and database operators. Typical systems do not have an integrated data rights security control that identifies the security privileges of the operator or user for whom the data is being restored and allows or denies the restore accordingly. Additionally typical systems do not allow a user to promote and reapply search criteria throughout the data management system.

In the drawings the same reference numbers and acronyms identify elements or acts with the same or similar functionality for ease of understanding and convenience.

The invention will now be described with respect to various examples. The following description provides specific details for a thorough understanding of and enabling description for these examples of the invention. However one skilled in the art will understand that the invention may be practiced without these details. In other instances well known structures and functions have not been shown or described in detail to avoid unnecessarily obscuring the description of the examples of the invention.

The terminology used in the description presented below is intended to be interpreted in its broadest reasonable manner even though it is being used in conjunction with a detailed description of certain specific examples of the invention. Certain terms may even be emphasized below however any terminology intended to be interpreted in any restricted manner will be overtly and specifically defined as such in this Detailed Description section.

Referring to a block diagram illustrating a hierarchical data storage system comprises two levels a storage operations level and a global level . The global level may contain a global operations cell which may contain a global manager and a database . The storage operations level may contain storage operations cells such as cells and . Cells and may perform specified data storage operations or may perform varied data storage operations that depend on the needs of the system.

Cell contains components used in data storage operations such as a storage manager a database a client and a primary storage database . Cell may contain similar components such as storage manager a database a client and a primary storage database . In this example cell also contains media agent and secondary database . Both cells and communicate with global manager providing information related to the data storage operations of their respective cells.

Referring to a block diagram illustrating components of a storage operations cell is shown. Storage operations cells such as cells or of may contain some or all of the following components depending on the use of the cell and the needs of the system. For example cell contains a storage manager clients multiple media agents and multiple storage devices . Storage manager controls media agents which are responsible at least in part for transferring data to storage devices . Storage manager includes a jobs agent a management agent a database and an interface module . Storage manager communicates with client . Client accesses data to be stored by the system from database via a data agent . The system uses media agents which contain databases to transfer and store data into storage devices .

Cells may include software and or hardware components and modules used in data storage operations. The cells may be transfer cells that function to transfer data during data store operations. The cells may perform other storage operations in addition to operations used in data transfers. For example cells may perform creating storing retrieving and or migrating primary and secondary data copies. The data copies may include snapshot copies secondary copies hierarchical storage manager copies archive copies and so on. The cells may also perform storage management functions that may push information to higher level cells including global manager cells.

In some embodiments the system can be configured to perform a storage operation based on one or more storage policies. A storage policy may be for example a data structure that includes a set of preferences or other criteria considered during storage operations. The storage policy may determine or define a storage location a relationship between components network pathways accessible datapipes retention schemes compression or encryption requirements preferred components preferred storage devices or media and so on. Storage policies may be stored in storage manager or may be stored in global manager as discussed above.

Additionally or alternatively the system may implement or utilize schedule policies. A schedule policy may specify when to perform storage operations how often to perform storage operations and so on. The schedule policy may also define the use of sub clients where one type of data such as email data is stored using one sub client and another type of data such as database data is stored using another sub client. In these cases storage operations related to specific data types email database and so on may be distributed between cells.

Referring to a block diagram illustrating interaction between the global cell and data storage cells is shown. Global server which may contain global load components global filter components and other components configured to determine actions based on received data storage information may communicate with a database and a user interface . Database may store storage policies schedule policies received sample data other storage operation information and so on. User interface may display system information to a user. Further details with respect to the user interface display are discussed below.

Global server may push data to a management server . Server communicates with a database and clients and or . Data storage servers push data to the global server and contain data agents and can communicate with databases . These servers may communicate with clients and or .

Global server can be configured to perform actions such as redistributing storage operations and apply these actions to the data storage system via a management server. Global server receives information used to determine the actions from the storage servers . In this example the global server acts as a hub in the data storage system by sending information to modify data storage operations and monitoring the data storage operations to determine how to improve the operations.

The hierarchical storage system described herein can be used for searching multiple indices of content retrieving the identified data in accordance with integrated data security policies and applying the search criteria as a data management policy. Some or all of these functions can be performed via a simple interface accessed e.g. from a web browser.

The content indices searched can be created by a content indexing system. Indices of this data can be created using any known technique including those described in the assignee s co pending application Ser. No. 11 694 869 filed Mar. 30 2007 entitled Method and System for Offline Indexing of Content and Classifying Stored Data the contents of which are herein incorporated by reference.

The content indexing system can create an index of an organization s content by examining files generated from routine secondary copy operations performed by the organization. The content indexing system can index content from current secondary copies of the system as well as older copies that contain data that may no longer be available on the organization s network. For example the organization may have secondary copies dating back several years that contain older data that is no longer available but may still be relevant to the organization. The content indexing system may associate additional properties with data that are not part of traditional indexing of content such as the time the content was last available or user attributes associated with the content. For example user attributes such as a project name with which a data file is associated may be stored.

Members of the organization can search the created index to locate content on a secondary storage device that is no longer online. For example a user can search for content related to a project that was cancelled a year ago. In this way content indexing is not affected by the availability of the system that is the original source of the content and users can find additional organization data that is not available in traditional content indexing systems.

In some embodiments members of the organization can search for content within the organization independent of the content s source through a single unified user interface which may be available thorough a web browser. For example members may search for content that originated on a variety of computer systems within the organization. Members may also search through any copy of the content including any primary secondary and or tertiary or auxiliary copies of the content.

In some embodiments the content indexing system searches for content based on availability information related to the content. For example a user may search for content available during a specified time period such as email received during a particular month. A user may also search specifically for content that is no longer available such as searching for files deleted from the user s primary computer system. The user may perform a search based on the attributes described above such as a search based on the time an item was deleted or based on a project with which the item was associated. A user may also search based on keywords associated with user attributes such as searching for files that only an executive of the organization would have access to or searching for files tagged as confidential.

In step the component searches the content index to identify matching content items that are added to a set of search results. For example the component may identify documents containing specified keywords or other criteria and add these to a list of search results. In step the component selects a first or next search result. In decision step if the search results indicate that the identified content is offline then the component continues at step else the component continues at step . For example the content may be offline because it is on a tape that has been sent to an offsite storage location. In step the component retrieves the archived content. Additionally or alternatively the component may provide an estimate of the time required to retrieve the archived content and add this information to the selected search result. In step the component provides the search results in response to the search query. For example the user may receive the search results through a web browser interface that lists the search results or the search results may be provided to another component for additional processing through an application programming interface API . After step these steps conclude.

The search described herein can include indices of data where the data is a snapshot primary copy secondary copy auxiliary copy and so on. An organization may have several copies of data available on different types of media. Data may be available on for example a tape on a secondary copy server or through network attached storage.

The search capability can be extended to handle an end user based search via a web interface a user based search e.g. all files that can belong to Bob or that can be viewed by Bob search results across several application types e.g. file copies Microsoft Exchange mailbox copies Microsoft Exchange data agents Microsoft Exchange public folders etc. and search results across multiple computers.

Using a graphical user interface search criteria can be provided to specify data that is stored on any number and type of volumes and any type of data. An interface such as the interface illustrated in can be used to specify a search term and one or more clients or volumes to search. As illustrated in a list of available clients can be presented. A set of controls can be used to select one or more of the available clients. Selected clients can be displayed in region . Variations on this embodiment of the interface can be used to allow a user to select various volumes for the search. For example the interface can allow a user to specify that the search is to be over the original copy a primary secondary copy and secondary or auxiliary copies of the content. The interface can also be configured to allow the user to specify that the search is to include file contents. An exemplary interface for allowing this option and receiving additional related parameters from a user can include an enabling check box for searching in files a search by field a file name field and a folder path field.

The search criteria can also specify that the data be from any of multiple applications or of any type. An example of an interface for receiving additional search parameters is shown in . The search interface can include fields for a search term file name file size folder modification date email subject email sender email recipient folder date of receipt and various advanced options such as client iDA owner accessibility sample indexing time and time zone .

Through the same interface or a separate interface the user can also select the various types of application data to be searched. The graphical interface for performing the search can provide an efficient means for a user to enter search terms and perform that search over multiple volumes and data types. For example the interface can provide check boxes or other population routines for identifying hardware or resources and display the list whereby a user can select specific volumes by name or address or whereby a user can select volumes by type or classification. Similarly a user may be prompted to specify data types or classes.

In some embodiments the search performed over multiple secondary copies and physical devices will be made with reference to metadata stored in one or more metabases or other forms of databases. A data collection agent may traverse a network file system and obtain certain characteristics and other attributes of data in the system. In some embodiments such a database may be a collection of metadata and or other information regarding the network data and may be referred to herein as a metabase. Generally metadata refers to data or information about data and may include for example data relating to storage operations or storage management such as data locations storage management components associated with data storage devices used in performing storage operations index data data application type or other data. Operations can be performed on this data using any known technique including those described in the assignee s co pending application Ser. No. 11 564 119 filed Nov. 28 2006 now U.S. Pat. No. 7 668 884 entitled Systems and Methods for Classifying and Transferring Information in a Storage Network the contents of which are herein incorporated by reference.

With this arrangement when a search over multiple secondary copies is to be performed a system administrator or system process may simply consult the metabase for such information rather than iteratively access and analyze each data item in the network. This approach significantly reduces the amount of time required to obtain data object information by substantially reducing or eliminating the need to obtain information from the source data and furthermore reduces or minimizes the involvement of network resources in this process thereby reducing the processing burden on the host system.

In some embodiments a query may be received by the system for certain information. This request may be processed and analyzed by a manager module or other system process that determines or otherwise identifies which metabase or metabases within the system likely include at least some of the requested information. For example the query itself may suggest which metabases to search and or the management module may consult an index that contains information regarding metabase content within the system. The identification process may include searching and identifying multiple computing devices within an enterprise or network that may contain information satisfying search criteria.

A processor can be configured to search metabases or other indices corresponding to multiple volumes and data stores to identify an appropriate data set that may potentially have information related to the query. This may involve performing iterative searches that examine results generated by previous searches and subsequently searching additional previously unidentified metabases to find responsive information that may not have been found during the initial search. Thus the initial metabase search may serve as a starting point for searching tasks that may be expanded based on returned or collected results. The returned results may be optionally analyzed for relevance arranged and placed in a format suitable for subsequent use e.g. with another application or suitable for viewing by a user and reported.

Once a search has been performed and at least one document or other discrete data item identified a list of the identified documents or data items can be provided. An example interface for displaying the results of an email search is illustrated in . The interface can include a summary area with summary information as well as a search results section .

In some further embodiments the one or more identified documents can be retrieved without performing a restore of the data back to the production volume. Such a transfer may involve copying data objects and metadata from one data store and metabase to another or in some embodiments may involve migrating the data from its original location to a second location and leaving a pointer or other reference to the second location so the moved information may be quickly located from information present at the original location.

In some embodiments a preview pane can be provided so that a user can view at least a portion of the contents of the identified file. One such preview pane is illustrated in . This preview can be provided before any restore or retrieve operation is executed. In some embodiments the preview can be generated by reading the identified file from the original data store and displaying the contents on the screen. In other embodiments the identified file can be copied to a local disk and the preview generated based on file as it resides on a local disk. In some embodiments the interface can display a portion of content from the data file returned by the search query and in some further embodiments prompt a user to refine the search. Data retrieval can also be performed using any known technique including those described in the assignee s co pending application Ser. No. 11 694 890 filed Mar. 30 2007 now U.S. Pat. No. 7 734 669 entitled System and Method for Data Retrieval Including Secondary Copy Precedence Optimizations the contents of which are herein incorporated by reference.

In some embodiments the search criteria provided by a user as part of a search can later be applied as a data management policy. For example a user could develop search terms that identify a certain set of data files. These search terms can then be stored as a data management policy which can then be applied at any other point in the data storage system. A data management policy created in this manner can be a data structure or other information source that includes a set of preferences and other storage criteria associated with performing a storage operation. The data management policy created based on a user supplied search criteria can also be used as part of a schedule policy.

A schedule policy may specify when to perform storage operations and how often and may also specify performing certain storage operations on sub clients of data and how to treat those sub clients. A sub client may represent static or dynamic associations of portions of data of a volume and are typically mutually exclusive. Thus a portion of data may be given a label and the association is stored as a static entity in an index database or other storage location used by the system. Sub clients may also be used as an effective administrative scheme of organizing data according to data type department within the enterprise storage preferences etc. The search criteria provided by a user can be used as a file selector in connection with any schedule policy.

In some embodiments the data management policy can include various storage preferences for example those expressed by a user preference or storage policy. As non limiting examples the data management policy can specify a storage location relationships between system components network pathway to utilize retention policies data characteristics compression or encryption requirements preferred system components to utilize in a storage operation and other criteria relating to a storage operation. Thus a storage policy may indicate that certain data is to be stored in a specific storage device retained for a specified period of time before being aged to another tier of secondary storage copied to secondary storage using a specified number of streams etc. A storage policy and or a schedule policy may be stored in a storage manager database or in other locations or components of the system.

Some organizations may have multiple levels of security according to which some users can access certain files while others cannot. For example a high security user group can be defined and this group can be granted access to all documents created by the organization a medium security group can be granted access to only certain classes of documents a low security group can be granted access only to certain predefined documents.

The search interface described herein can be configured to be accessible by any type of user including a secondary copy administrator an end user who does not have any administrative privileges or a user of any security clearance. Additionally the data files stored in the data management system can tagged with security information. This information tag can be stored in a metabase or any other form of content index and can be used to leverage existing security schema. In embodiments in which a search is performed on one or more context indices corresponding security tag information can be stored therein. Security information can include identification of various classes of users who are granted rights to access the document as well as identification of classes of users who are denied access rights.

In some embodiments security information can be stored in the form of user tags. User tags are further described in the assignee s co pending application Ser. No. 11 694 784 filed Mar. 30 2007 entitled System and Method Regarding Security And Permissions the contents of which are herein incorporated by reference.

In some further embodiments the search results can be filtered based on the user s security clearance or access privileges. After a user enters search parameters data files matching those parameters may be identified and a list of the identified files displayed to the user. If the user does not have the required security clearance or access privileges the interface can be configured not to display the file.

It is possible that a secondary copy administrator may not have sufficient security clearance to inspect a file that is being restored or retrieved. In such a circumstance the administrator will not be allowed to preview the file or otherwise inspect the contents of it during the search process. The interface providing results may be configured to not display a preview of such a file. If a secondary copy administrator had sufficient security clearance then a preview may be provided or the administrator may be allowed to make a local copy of the file.

If the secondary copy administrator does not have sufficient security clearance for a specific file or group or class of files an interface may be provided through which the administrator may initiate a copy of that file directly from the secondary copy device to a directory or disk associated with a user who has sufficient security clearance. In some instances the user associated with the file may be the owner of the file. If the secondary copy administrator or other user executing a search query has sufficient security clearance to inspect the contents of the one or more files identified in the search a preview of the data file may be displayed.

The following discussion provides a brief general description of a suitable computing environment in which the invention can be implemented. Although not required aspects of the invention are described in the general context of computer executable instructions such as routines executed by a general purpose computer e.g. a server computer wireless device or personal computer. Those skilled in the relevant art will appreciate that the invention can be practiced with other communications data processing or computer system configurations including Internet appliances hand held devices including personal digital assistants PDAs wearable computers all manner of cellular or mobile phones multi processor systems microprocessor based or programmable consumer electronics set top boxes network PCs mini computers mainframe computers and the like. Indeed the terms computer host and host computer are generally used interchangeably herein and refer to any of the above devices and systems as well as any data processor.

Aspects of the invention can be embodied in a special purpose computer or data processor that is specifically programmed configured or constructed to perform one or more of the computer executable instructions explained in detail herein. Aspects of the invention can also be practiced in distributed computing environments where tasks or modules are performed by remote processing devices which are linked through a communications network such as a Local Area Network LAN Wide Area Network WAN or the Internet. In a distributed computing environment program modules may be located in both local and remote memory storage devices.

Aspects of the invention may be stored or distributed on computer readable media including magnetically or optically readable computer discs hard wired or preprogrammed chips e.g. EEPROM semiconductor chips nanotechnology memory biological memory or other data storage media. Indeed computer implemented instructions data structures screen displays and other data under aspects of the invention may be distributed over the Internet or over other networks including wireless networks on a propagated signal on a propagation medium e.g. an electromagnetic wave s a sound wave etc. over a period of time or they may be provided on any analog or digital network packet switched circuit switched or other scheme . Those skilled in the relevant art will recognize that portions of the invention reside on a server computer while corresponding portions reside on a client computer such as a mobile or portable device and thus while certain hardware platforms are described herein aspects of the invention are equally applicable to nodes on a network.

From the foregoing it will be appreciated that specific embodiments of the system have been described herein for purposes of illustration but that various modifications may be made without deviating from the spirit and scope of the invention. For example although files have been described other types of content such as user settings application data emails and other data objects can all be indexed by the system. Accordingly the invention is not limited except as by the appended claims.

Unless the context clearly requires otherwise throughout the description and the claims the words comprise comprising and the like are to be construed in an inclusive sense as opposed to an exclusive or exhaustive sense that is to say in the sense of including but not limited to. The word coupled as generally used herein refers to two or more elements that may be either directly connected or connected by way of one or more intermediate elements. Additionally the words herein above below and words of similar import when used in this application shall refer to this application as a whole and not to any particular portions of this application. Where the context permits words in the above Detailed Description using the singular or plural number may also include the plural or singular number respectively. The word or in reference to a list of two or more items that word covers all of the following interpretations of the word any of the items in the list all of the items in the list and any combination of the items in the list.

The above detailed description of embodiments of the invention is not intended to be exhaustive or to limit the invention to the precise form disclosed above. While specific embodiments of and examples for the invention are described above for illustrative purposes various equivalent modifications are possible within the scope of the invention as those skilled in the relevant art will recognize. For example while processes or blocks are presented in a given order alternative embodiments may perform routines having steps or employ systems having blocks in a different order and some processes or blocks may be deleted moved added subdivided combined and or modified. Each of these processes or blocks may be implemented in a variety of different ways. Also while processes or blocks are at times shown as being performed in series these processes or blocks may instead be performed in parallel or may be performed at different times.

The teachings of the invention provided herein can be applied to other systems not necessarily the system described above. The elements and acts of the various embodiments described above can be combined to provide further embodiments.

These and other changes can be made to the invention in light of the above Detailed Description. While the above description details certain embodiments of the invention and describes the best mode contemplated no matter how detailed the above appears in text the invention can be practiced in many ways. Details of the system may vary considerably in implementation details while still being encompassed by the invention disclosed herein. As noted above particular terminology used when describing certain features or aspects of the invention should not be taken to imply that the terminology is being redefined herein to be restricted to any specific characteristics features or aspects of the invention with which that terminology is associated. In general the terms used in the following claims should not be construed to limit the invention to the specific embodiments disclosed in the specification unless the above Detailed Description section explicitly defines such terms. Accordingly the actual scope of the invention encompasses not only the disclosed embodiments but also all equivalent ways of practicing or implementing the invention under the claims.

While certain aspects of the invention are presented below in certain claim forms the inventors contemplate the various aspects of the invention in any number of claim forms. For example while only one aspect of the invention is recited as embodied in a computer readable medium other aspects may likewise be embodied in a computer readable medium. Accordingly the inventors reserve the right to add additional claims after filing the application to pursue such additional claim forms for other aspects of the invention.

