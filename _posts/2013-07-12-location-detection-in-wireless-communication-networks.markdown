---

title: Location detection in wireless communication networks
abstract: Location detection of a mobile device is achieved by initiating an API call at an application program. The API call directs an operating system of the mobile device to initiate a scan of wireless access points within wireless communication range of the mobile device. The scanning performed by the mobile device is detected by the network via one or more of the wireless access points. A location of the mobile device is estimated by the network based on detection of the mobile device via the one or more wireless access points. Location-based services are provided to the mobile device by the network based on the estimated location of the mobile device. The location-based services may be transmitted to the mobile device via a different wireless access point and/or wireless communication protocol than used during scanning and/or detection of the mobile device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09301098&OS=09301098&RS=09301098
owner: ARUBA NETWORKS, INC.
number: 09301098
owner_city: Sunnyvale
owner_country: US
publication_date: 20130712
---
This application claims the benefit of priority on U.S. Patent Application No. 61 675 991 filed Jul. 26 2012 the entire contents of which are incorporated by reference.

A wireless mobile computing device i.e. mobile device may estimate its location within a wireless communication network through triangulation and or measurement of wireless signal strengths received from wireless access points located within wireless communication range of the mobile device. An access point typically supports a bi directional communication link with the mobile device in which the mobile device can access information resources from the network. In this context the access point serves as a gateway to a broader communication network. In other contexts an access point may not support communications between a mobile device and a broader communication network for the purpose of accessing information resources from the network but instead the access point may transmit wireless signals that may be received by the mobile device for the purpose of location estimation. Location estimation by the mobile device takes advantage of network operation in which wireless access points maintain an excited state and or availability of their wireless receivers and or transmitters thereby enabling detection and measurement by the mobile device according to any suitable schedule.

On the network side wireless access points may also detect the presence of mobile devices within wireless communication range by triangulation and or measurement of wireless signal strengths received from the mobile devices. However mobile devices often limit excitation of their wireless receivers and or transmitters to reduce energy consumption and or reduce congestion of the wireless network. Unfortunately wireless access points are able to detect mobile devices that are within wireless communication range only when those mobile devices are also exciting their wireless receivers and or transmitters. Accordingly there are substantial periods during which the network cannot estimate the location of the mobile devices.

Improved location detection of a mobile device within wireless communication networks is achieved by initiating an application programming interface API call at an application program of the mobile device. The API call is received by and directs an operating system of the mobile device to initiate a scan of wireless access points and or beacons within wireless communication range of the mobile device. Such a scan of the wireless access points and or beacons may be performed according to a schedule defined by the application program and or user of the mobile device.

The scanning performed by the mobile device is detected at a network device via one or more of the wireless access points. A location of the mobile device is estimated by the network such as at the network device or a separate server system based on information obtained through detection of the mobile device via the one or more wireless access points. Network side estimation of location may provide enhanced or improved location estimates during some scenarios such as for example when the mobile device is located indoors or within a region where GPS location data and or far field cellular triangulation provide poor location estimates if calculated by the mobile device. Information resources in the form of location based services are provided to the mobile device by the network device or server system based on the estimated location of the mobile device. In some examples the location based services may be transmitted to the mobile device via a different wireless access point and or wireless communication protocol than was used during scanning and or detection of the mobile device.

As mobile device moves within or relative to venue the mobile device may enter and or leave wireless communication range of one or more wireless access points such as wireless access points etc. Additionally the wireless signal strength between the mobile device and each wireless access point may change as the mobile device moves relative to these wireless access points within venue . As mobile device continues to move relative to the venue and these wireless access points such as e.g. to location the mobile device may for example leave wireless communication range of wireless access point and enter wireless communication range of wireless access point .

As described in greater detail with reference to mobile device may from time to time initiate a scan of wireless access points within wireless communication range of mobile device . Wireless access points located within wireless communication range of mobile device at the time of the scan may detect mobile device .

In at least some implementations a network device may aggregate store and update log data responsive to mobile devices being detected via one or more wireless access points. As one example each entry in log data may include one or more of 1 a wireless access point identifier that identifies a wireless access point 2 a mobile device identifier that identifies a mobile device detected via that wireless access point 3 a timestamp that indicates a time and or time dependent sequence that the mobile device was detected via the wireless access point 4 a wireless signal strength at the time of detection that exists between the mobile device and wireless access point 5 an estimated location of the mobile device calculated by network device or other suitable information. A mobile device identifier may take the form of a MAC address a hardware identifier an operating system identifier an application program identifier a user account identity e.g. a user name and or password or hashed value thereof or other suitable identifier. The various identifiers described herein may include or take the form of a global unique identifier or other suitable identifier that enables two or more entities to be distinguished from each other within a particular domain.

In at least some implementations log data may be communicated to a server system or other suitable network device over communications network where the log data may be stored aggregated and updated from time to time at location register . Communications network may include one or more of a wide area network e.g. the Internet and or core network infrastructure a local area network e.g. Intranet or other suitable network type.

Location register may include may be based on or may be otherwise derived from log data obtained from one two or more venues and or network devices. For example location register may include may be based on or may be otherwise derived from log data received from network device for mobile devices located within or proximate to venue . Location register may additionally include may be based on or may be otherwise derived from log data received from network device for mobile devices located within or proximate to venue that is associated with a wireless access point . In some implementations functionality performed by server system including maintenance of location register may be performed in whole or in part by network device . In this implementation location register may reside at network device or log data may include one or more of the information elements of location register .

Location register may be created from log data obtained from any suitable number of network devices for mobile devices detected via any suitable number of wireless access points. In at least some implementations server system may process log data to create location register . As one example location register may include or indicate an estimated location for each mobile device. As one example each entry in location register may include one or more of 1 raw or pre processed log data obtained from another source 2 a mobile device identifier that identifies a mobile device detected 3 an estimated location of the mobile device 4 a timestamp that indicates a time and or time dependent sequence of that location estimate or other suitable information.

It will be understood that an individual venue may include one two or more network devices that maintain log data and report log data to a server system. Network device may reside on premises at venue where it may be operated and or controlled by a venue operator or owner. Alternatively network device may be located at location that is remote from venue . A remotely located network device may be owned or operated by the venue operator owner or may be owned or operated by a third party entity.

Non limiting examples of network device include the CISCO brand of network device referred to as the MOBILITY SERVICES ENGINE or the EKAHAU brand of network devices referred to as the LOCATION SERVICES CONTROLLER. However network device may take other suitable forms. It will be understood that network device and or server system may estimate location of a mobile device using any suitable technique including triangulation proximity to one or more wireless access points and or receiving geo location assistance data from the mobile device or from third parties concerning the mobile device location.

Server system may include one or more server devices. These server devices may reside at common location or may be distributed across multiple locations. Accordingly two or more servers of server system may communicate with each other over communications network in at least some implementations. Individual servers of server system may be owned or operated by a common entity or a plurality of different entities. In some examples a venue owner or operator may own or operate one or more servers of server system . However one or more servers of server system may be owned or operated by one or more third party entities other than a venue owner or operator.

Server system may further host information resources that may be served to mobile devices. Information resources may be requested received and used by an application program and or operating system of a mobile device. For example a particular information resource served to a mobile device may be selected by server system based at least in part on the estimated location identified for that mobile device. As a non limiting example an information resource served to a mobile device may indicate an estimated location of that mobile device and or information concerning physical objects services landmarks etc. located in the vicinity of the estimated location of that mobile device. Such information may take the form of location based services that is based at least in part on the estimated location of the mobile device.

In at least some implementations information resources may be communicated to a mobile device via one or more of the same wireless access points that detected the mobile device and upon which the information resources may be based. However in other implementations information resources may be communicated to a mobile device via a different wireless access point and or via a different wireless communication protocol. For example in mobile device may receive information resources via a wireless access point . Wireless access point in may take the form of a cellular communications access point e.g. base station tower eNode etc. offering a far field wireless communication protocol such as CDMA UMTS LTE Wi Max etc. while wireless access points etc. may take the form of a wireless router or node offering a near field communications protocol such as Wi Fi Bluetooth RFID etc. Wireless access point may not be owned or operated by an owner or operator of venue and or access points . Wireless access point may be configured to provide geographically broad wireless connectivity that covers the venue and other unrelated venues or geographic regions and may instead form a public or general purpose wireless access point in contrast to wireless access points etc. which may be specifically purposed for use within or in proximity to venue or may be configured to provide wireless connectivity primarily to venue .

Server system may further host an application program that may be downloaded by mobile devices from server system . However in some implementations an application program may reside at the mobile device a priori and may take the form of a general purpose browser application for example. An application program such as e.g. application program upon being executed at a mobile device may initiate API calls to an operating system of the mobile device. One example API call may direct the operating system to initiate a scan at the mobile device of wireless access points within wireless communication range of the mobile device. Scans conducted by mobile devices in addition to communication links established between mobile devices and wireless access points may be detected via the wireless access points and may be contributed to the log data.

In at least some implementations the location register application program and or information resources may reside at different server devices that are controlled or operated by different entities. Furthermore functionality and or information residing at server system may instead reside at network device . Accordingly it is understood that the configuration of computing system depicted in is merely one example of a computing system in which location estimation may be implemented and that other configurations may be suitable.

At the method includes initiating an API call at an application program of a mobile device. The API call may direct the operating system of the mobile device to initiate or otherwise conduct a scan for wireless access points. In the context of the Apple brand of mobile operating system iOS for example the API call make include or take the form of CLLocationManager. CLLocationManager manifests itself by having an object running on the operating system that causes the mobile device to scan for wireless access points. The API call take the form of a public API call that is published by the operating system developer for the purpose of enabling application developers to scan for wireless access points to estimate location at the mobile device. However this API call also has the side effect of making the mobile device visible to the network as a result of the scan. While the method at is described in the context of an application programming initiating an API call. In other implementations scanning may be initiated by the operating system. Furthermore scanning may be initiated by the application program and or operating system responsive to a user interaction with the mobile device such as opening an application program performing a selection or moving within an environment as detected by an on board inertial sensor.

At the method includes scanning at the mobile device for wireless access points. The method at may be performed by the operating system of the mobile device responsive to the API call initiated by the application program and received by the operating system. Scanning of the wireless access points may be performed by the mobile device according to a schedule defined by the application program and or by the user. Scanning may be performed by exciting the wireless network using protocol specific calls requests and or responses. More frequent continuous or periodic scanning by the mobile device enables the wireless network to more accurately track the mobile device. This is in contrast to typical mobile device operation in which the wireless transmitter and or receiver are operated in an un excited or less excited state to conserve energy and or reduce network congestion. Estimated location provided by the network may be used to supplant augment or be combined with a location estimated by the mobile device.

At the method includes detecting the scan performed by the mobile device via one or more wireless access points. As one example the scan may be detected at a network device such as previously described network device of .

At the method includes updating log data for the mobile device at the network device communicating with the one or more wireless access points responsive to detecting the scan. Alternatively log data may be updated at a server system such as previously described server system . Log data may take the form of log data of .

At the method includes receiving a request for an information resource initiated by the application program of the mobile device. Alternatively or additionally the request for an information resource may be initiated by an operating system of the mobile device or a different application program of the mobile device from the application program that initiated the API call at . The request may be initiated responsive to a user action in some examples such as opening an application program performing a selection or moving within an environment as detected by an on board inertial sensor.

At the method includes obtaining the information resource based at least in part on the updated log data for the mobile device. The method at may be performed by the server system and or the network device depending on implementation. As one example obtaining the information resource may include retrieving the information resource form a data store and or calculating or generating the information resource. In some implementations the request may include or indicate an identifier of the mobile device enabling retrieval of the appropriate information resource for that mobile device based on its current estimated location. As previously discussed the information resource may include or indicate the estimated location of the mobile device and or may include or indicate location based services.

At the method includes transmitting the information resource to the mobile device via the one or more wireless access points or via a different wireless access point. The different wireless access point may communicate with the mobile device via a different wireless communications protocol than the one or more wireless access points detected by the scan. For example a different wireless access point may be used in scenarios where the mobile device is not accessing a wide area communications network via the one or more wireless access points that originally detected the mobile device.

The method at may be performed by the server system and or network device depending on implementation. The information resource such as estimated location and or location services may be presented to the user via an output device such as a graphical display for example. In some examples such as a with an information push delivery implementation a request may not be initiated at in order to cause retrieval and delivery of information resources to the mobile device at .

Computing device may include a logic subsystem and a storage subsystem . Logic subsystem may include one or more processors and or logic machines. Storage subsystem includes a physical tangible storage medium for storing or otherwise holding information such as instructions and or data store .

Instructions may be executable by logic subsystem to perform the operations functions processes or methods described herein. Instructions may include software and or firmware. In the context of a personal computer or a mobile device for example instructions may take the form of an operating system and one or more application programs that communicate with the operating system via an application programming interface API . The API may be defined by and supported by the operating system in a manner that enables an application program to transmit an API call to the operating system responsive to which the operating system may perform an operation communicate information to the application program another program or device via an API response or message.

Data store may have or include any suitable information such as previously described log data location register information resource identifiers etc.

Computing device may include an input output subsystem that includes or otherwise interfaces with one or more input devices and or output devices. Examples of input devices include a keyboard keypad computer mouse physical button or switch pointer device controller device microphone or touch screen display. Examples of output devices include a graphical display an audio speaker or a haptic feedback e.g. vibration device.

Computing device may include a communications subsystem that enables computing device to communicate or otherwise interface with one or more other computing devices over a communications network. Communications subsystem may support one two or more communications protocols including wired and or wireless communications protocols. As one example communications subsystem may support one two or more of the wireless communication protocols such as CDMA UMTS LTE Wi Fi Wi Max Bluetooth RFID etc. among other suitable wireless communications protocols. Accordingly it will be understood that communications subsystem may include suitable transmitters receivers transceivers amplifiers filters etc. to enable wired and or wireless communications between computing device and one or more other computing devices.

The various features functionality processes methods configurations and or techniques described herein are exemplary in nature. Disclosed implementations embodiments or examples are not to be considered in a limiting sense because numerous variations are possible. The methods and or processes described herein may represent one or more of any suitable number of processing strategies. The various methods and or processes that have been described and or depicted may be performed in the disclosed sequence in other sequences in parallel or in some cases omitted. The subject matter of the present disclosure includes all novel and nonobvious combinations and sub combinations of the various configurations and techniques and other features functions acts and or properties disclosed herein as well as any and all equivalents thereof.

