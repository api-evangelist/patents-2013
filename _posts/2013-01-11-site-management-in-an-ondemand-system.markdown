---

title: Site management in an on-demand system
abstract: Methods and systems are provided for managing environmental conditions and energy usage associated with a site. One exemplary method of regulating an environment condition at a site involves a server receiving environmental measurement data from a monitoring system at the site via a network, determining an action for an electrical appliance at the site based at least in part on the environmental measurement data and one or more monitoring rules associated with the site, and providing an indication of the action to an actuator for the electrical appliance.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09397521&OS=09397521&RS=09397521
owner: salesforce.com, inc.
number: 09397521
owner_city: San Francisco
owner_country: US
publication_date: 20130111
---
This application claims the benefit of U.S. provisional patent application Ser. No. 61 589 178 filed Jan. 20 2012 the entire content of which is incorporated by reference herein.

Embodiments of the subject matter described herein relate generally to computer systems and more particularly embodiments of the subject matter relate to methods and systems for monitoring and regulating environmental conditions and the corresponding energy usage at a site using an on demand system.

Rising energy costs and the depletion of natural resources have motivated individuals and organizations to use energy more efficiently. Accordingly utility companies have developed and deployed improved means for monitoring energy usage e.g. smart meters or the like and or providing better feedback to users with the goal of facilitating more efficient energy consumption. However in many existing systems monitoring energy usage at a particular location determining how electrical appliances at that location should be operated based on the energy usage and effectuating that operation of those electrical appliances in real time still requires a relatively high level of manual intervention that has prevented widespread real time energy management.

Embodiments of the subject matter described herein generally relate to managing regulating or otherwise controlling environmental conditions and corresponding energy consumption at a site in a substantially autonomous manner with little or no manual intervention. As described in greater detail below in the context of in exemplary embodiments a tenant supported by the on demand application platform may establish an association with a site to be managed and define one or more monitoring rules for governing the environmental conditions and or energy consumption at the site. In exemplary embodiments sensor devices deployed at the site automatically initiate communications with the on demand application platform upon deployment thereby allowing the on demand application platform to establish an association between the site and thereby the tenant based on the position e.g. location and or altitude of the sensor devices and provide to the sensor devices information used by the sensor devices to automatically configure themselves for operation in accordance with the monitoring rules for the site. Thereafter the sensor devices operate autonomously in accordance with the information provided by the on demand application platform to sense detect or otherwise measure environmental conditions at the site and provide the environmental measurement data to the on demand application platform wherein the on demand application platform compares the received environmental measurement data to the monitoring rules for the site to determine what if any actions need to be taken to modify environmental conditions at the site.

When the on demand application platform determines an action should be undertaken to modify an environmental condition at the site the on demand application platform signals or otherwise indicates the action to an actuator for an electrical appliance at the site that influences that environmental condition. The actuator in turn automatically operates the electrical appliance to consume energy or alternatively cease consuming energy and thereby influence the environmental condition at the site. In this manner environmental conditions at the site may be monitored and adjusted without manual interaction. In exemplary embodiments the on demand application platform stores or otherwise maintains the environmental measurement data for the site along with information pertaining to the status of the environmental appliances at the site in association with the site s tenant in a multi tenant database thereby allowing the on demand application platform to generate or otherwise provide graphical user interface GUI displays depicting the environmental conditions at the site and or the state of the electrical appliances at the site to a user associated with that tenant.

In exemplary embodiments the sensor devices communicate with the on demand application platform via a hub device deployed at the site which establishes a wireless mesh network for transmitting data to and or receiving data from the individual sensor devices. The hub device includes a network interface used to communicatively couple the hub device directly to another network e.g. different than the wireless mesh network that the on demand application platform is also communicatively coupled to. As described in greater detail below in the context of in exemplary embodiments upon deployment at the site the hub device automatically initiates communications with the on demand application platform and requests communication configuration information for subsequent communications with the on demand application platform such as for example a frequency or rate at which the hub device should upload environmental measurement data from the sensor devices to the on demand application platform. In some embodiments the on demand application platform determines the communication configuration information based on the monitoring rules for the site or other rules privileges permissions or the like associated with the site s tenant. The hub device automatically configures itself for subsequent operation in accordance with the received communication configuration information and thereafter the hub device autonomously batches environmental measurement data received from the sensor devices via the wireless mesh networks and transmits or otherwise provides the batched environmental measurement data to the on demand application platform via the other network with the desired upload frequency.

Turning now to an exemplary on demand energy management system includes an application server that includes or otherwise implements an application platform capable of generating instances of virtual applications at run time or on demand based upon data stored or otherwise maintained by a database that is communicatively coupled to the application server for example via a communications network such as a wired and or wireless computer network a cellular network a mobile broadband network a radio network or the like. The on demand application platform communicates with an environment monitoring system located at a site via the network to receive measurements for one or more environmental conditions at the site and regulate or otherwise manage those environmental conditions at the site as described in greater detail below. In exemplary embodiments the application platform provides an instance of the virtual application to a client device via the network and generates one or more GUI displays based on the environmental measurement data received from the monitoring system . The GUI displays are integrated into the virtual application provided to the client device to present a graphical representation of the environmental conditions at the site to a user associated with the tenant associated with the site .

In the illustrated embodiment the site generally represents a physically distinct region that is associated with or otherwise corresponds to a tenant e.g. a business organization or another entity supported by the on demand application platform and or database such as for example a building or a portion thereof a venue a place of business a factory or another facility or point of interest. In accordance with one or more embodiments the site has a fixed position and information pertaining to the position of the site e.g. the latitude and longitude of the site and or the altitude of the site is stored or otherwise maintained by the database in association with its tenant as described in greater detail below.

In exemplary embodiments the monitoring system includes a plurality of devices that are located at the site or are otherwise positioned within the confines of the site . The illustrated monitoring system includes a first device that is communicatively coupled to the network and functions as a router or communications hub that facilitates communications between the remaining devices of the monitoring system and the application server and or application platform via the network . Accordingly for convenience device may alternatively be referred to herein as the hub device. As described below the hub device creates establishes or otherwise provides a wireless mesh network which is utilized to communicatively couple the remaining devices to the hub device and thereby the network . For example the devices may be communicatively coupled over a wireless mesh network in accordance with the ZigBee protocol the IEEE 802.15 protocol or a variant thereof. In this manner the remaining devices at the site are indirectly coupled to the network via the hub device . In accordance with one or more embodiments each device includes a global positioning system GPS receiver or another suitable means for determining its own position and automatically transmits or otherwise provides its location to the application platform upon that device being installed enabled powered on or otherwise initialized at the site wherein the application platform utilizes the received position of a respective device to establish an association between the respective device and the site and or site tenant as described in greater detail below. In alternative embodiments the application platform may utilize the location of the hub device on the network to establish an association between the respective device communicating via the hub device and the site and or site tenant associated with the hub device . In yet other embodiments the user may manually establish the association by manually defining the position of the respective device within the site e.g. conference room kitchen bathroom living room etc. for example when the device will have a fixed location at the site .

Still referring to in exemplary embodiments the monitoring system includes one or more sensor devices wherein each respective sensor device includes one or more auxiliary sensing elements adapted to sense detect or otherwise measure one or more environmental conditions at the site in the vicinity of that respective sensor device . In this regard an environmental condition is a quantifiable characteristic of the ambient environment proximate a respective sensor device such as for example temperature humidity luminance motion vibration an electromagnetic characteristic e.g. an electric and or magnetic field or the like. Accordingly the auxiliary sensing elements associated with a respective sensor device may be realized as one or more of the following a light or luminance sensing element e.g. a photosensor or photodetector a temperature sensing element e.g. a thermometer a humidity sensing element e.g. a hygrometer a magnetic sensing element e.g. a magnometer a motion sensing element or motion detector and or a tilt sensor e.g. an accelerometer a gyroscope or the like . After quantifying or otherwise obtaining measurements for the environmental condition s in its vicinity each sensor device transmits communicates or otherwise provides the obtained environmental measurement data to the hub device which in turn transmits communicates or otherwise provides the environmental measurement data for the site to the application server and or application platform via the network . In exemplary embodiments the hub device temporarily stores caches buffers or otherwise batches the environmental measurement data received from the various sensor devices before transmission so that the hub device transmits environmental measurement data from multiple sensor devices across the site to the application server and or application platform at a single instance in time. In this manner environmental measurement data from individual sensor devices may not be continuously and or asynchronously sent to the application server and or application platform . The hub device may maintain an association between received environmental measurement data and its corresponding sensor device and provide indication of the association to the application platform so that the application platform may determine or otherwise identify the locations within the site the environmental measurement data corresponds to.

In the illustrated embodiment the monitoring system also includes an actuator device coupled to an electrical appliance at the site and the electrical appliance is capable of influencing changing modifying or otherwise adjusting one or more environmental conditions at or within the vicinity of the electrical appliance . For example the electrical appliance may be realized as a heating element e.g. a heater or heating system or the like a ventilation element e.g. a fan or the like a cooling element e.g. an air conditioner or air conditioning system or the like a lighting element e.g. a lamp a light bulb or the like a humidity regulating element e.g. a humidifier a dehumidifier or the like or another suitable device capable of influencing an environmental condition at the site . The actuator device includes or is otherwise coupled to an actuating element that controls operation of the electrical appliance and thereby regulates or otherwise controls the consumption of energy or power by the electrical appliance from an energy source associated with the site . For example the energy source may be realized as the mains electrical system or grid power at the site and the actuator device may include a relay that is coupled between the electrical appliance and the energy source to thereby control whether electrical energy from the grid is provided to the electrical appliance . As described in greater detail below in exemplary embodiments the hub device receives from the application server and or application platform via the network signals commands instructions or another indication of how or whether the electrical appliance should be operated. In turn the hub device signals commands or otherwise instructs the actuator device via the wireless mesh network to activate and or deactivate its associated actuating element and thereby operate the electrical appliance in the manner indicated by the application server and or application platform .

Still referring to in exemplary embodiments the database is realized as a relational multi tenant database that is communicatively coupled to the application server as part of an on demand multi tenant database system . In this regard the database is shared between multiple tenants supported by the application server and or application platform that is the database may store or otherwise maintain data associated with a number of different tenants as described in greater detail below in the context of . In this regard information pertaining to the site and the devices of the monitoring system and the environmental measurement data received therefrom may be associated with or otherwise assigned the unique tenant identifier for a tenant such that that information is maintained in association with that tenant thereby indicating that tenant is associated with that site e.g. the site is the tenant s place of business . The application server generally represents a computing system or another combination of processing logic circuitry hardware and or other components of the multi tenant system that is coupled to the network and configured to support the various tasks operations functions and processes described in greater detail below. In this regard the application server may include a processing system e.g. a processor controller or the like that includes or otherwise accesses a memory or another non transitory computer readable medium of storing programming instructions for execution by the processing system that when read and executed by the processing system cause the application server and or application platform to generate or otherwise provide one or more application programming interfaces APIs that interface with the monitoring system the client device and the database and perform the tasks operations functions and processes described herein.

The client device generally represents an electronic device coupled to the network that is utilized by a user associated with or belonging to the tenant associated with the site to access the application platform and or virtual application on the application server . In practice the client device can be realized as any sort of personal computer mobile telephone tablet or other network enabled electronic device that includes a display device such as a monitor screen or another conventional electronic display capable of graphically presenting data and or information provided by the application platform and or the virtual application along with a user input device such as a keyboard a mouse a touchscreen or the like capable of receiving input data and or other information from the user of the client device . In the illustrated embodiment the user manipulates the client device to execute a client application such as a web browser application and contact the application server and or application platform using a networking protocol such as the hypertext transport protocol HTTP or the like. The application platform authenticates or otherwise identifies the user and generates the virtual application at run time based upon information and or data associated with the user and or the user s tenant that is maintained by the database . In this regard the virtual application includes code data and or other dynamic web content provided to the client device that can be parsed executed or otherwise presented by the client application running on the client device .

In accordance with one or more embodiments the virtual application provides GUI displays that include GUI elements adapted to allow the user to create define or otherwise modify one or more monitoring rules for environmental conditions at the site . In this regard a monitoring rule is a set of one or more criteria for measurements of one or more environmental conditions from one or more sensor devices at a site that dictate or otherwise govern the manner in which an electrical appliance at that site should be operated to influence or otherwise modify an environmental condition at the site e.g. when the electrical appliance should be activated and or deactivated . Based on the association between the user s tenant and the monitoring system at the site maintained by the database the application platform may obtain information pertaining to the devices and electrical appliances at the site from the database and update the virtual application to provide information pertaining to the number and type of sensor devices actuator devices and electrical appliances at the site along with GUI elements adapted to allow the user to define one or more monitoring rules such as for example which environmental conditions are to be measured which locations or sensor devices at the site should make those measurements how frequently those environmental conditions should be measured and how the electrical appliances at the site should be operated based on the environmental measurement data for those environmental conditions at those locations at the site and the like. As described in greater detail below based on the monitoring rules defined by the user and or tenant and the environmental measurement data received from the monitoring system at the site the application server and or application platform automatically determines how a particular electrical appliance at the site should be operated and instructs the appropriate actuator device to effectuate that operation of that electrical appliance . In this manner the application server and or application platform is capable of autonomously monitoring and regulating environmental conditions at the site substantially in real time and thereby controlling the consumption of energy from the energy source substantially in real time without manual intervention.

It should be understood that is merely one simplified representation of the on demand energy management system provided for purposes of explanation and is not intended to limit the subject matter described herein in any way. In this regard although depicts the use of an actuator device communicatively coupled to the application server and or application platform via the wireless mesh network of the monitoring system in other embodiments the on demand energy management system may utilize an actuator that is communicatively coupled to the application server and or application platform via the network independently of the monitoring system as described in greater detail below in the context of . Furthermore the individual devices of the monitoring system are not limited to functioning solely as a hub device a sensor device or an actuator device and in practice an individual device may function as both a hub device and a sensor device a sensor device and an actuator device or a hub device a sensor device and an actuator device. For example the hub device may also include one or more auxiliary sensing elements so that the hub device may also function as a sensor device that obtains environmental measurement data for environmental conditions in its vicinity or a sensor device may include an auxiliary actuating element to control operation of an electrical appliance in its vicinity.

In an exemplary embodiment the site management process begins by identifying a site to be managed by the on demand system establishing an association between the site and a tenant supported by the on demand system and establishing an association between a monitoring system and the site tasks . In accordance with one embodiment the association between a tenant and a site to be managed may be indicated by a user associated with that tenant. For example a user of the client device may manipulate client application to contact the application server and or application platform which in turn generates an instance of the virtual application within the client application on the client device based on data and or information associated with the user and or the user s tenant obtained from the database . The generated instance of the virtual application may include GUI elements adapted to allow the user to input or otherwise provide information identifying a site to be monitored such as for example the street address of the site the latitude and or longitude of the site or other GPS coordinates for the site the altitude of the site e.g. the particular floors of a building or the like. After the site is defined the application platform stores or otherwise maintains the positional information and or other identifying information that defines the site in the database in association with the user s tenant e.g. using that tenant s unique identifier . In another embodiment the association between a tenant and a site may be automatically identified by the application platform in response to identifying the monitoring system and or devices as being positioned at a known location associated with the tenant. For example the database may store positional information pertaining to the location of a principal place of business of the tenant or another location associated with the tenant wherein the application platform identifies that location as the site to be monitored in response to identifying the monitoring system and or devices as being positioned at that location.

In exemplary embodiments the application platform establishes an association between the site and the monitoring system and or devices after determining or otherwise identifying that the devices are positioned at the site . For example in exemplary embodiments when the hub device is initially powered on or installed at the site and communicatively coupled to the network the hub device obtains its position e.g. using its associated GPS receiver and provides its position to the application platform via the network . In response the application platform automatically identifies the hub device as being located at the site for example by comparing the position of the hub device with positional information for known locations of tenants maintained by the database and identifying the location of the site as being the nearest to the position of the hub device or identifying when the position of the hub device is within a threshold distance of the site . In some embodiments after determining the hub device is located at the site the application platform may obtain the tenant identifier for the tenant associated with that site location and implement a table or another data structure that maintains an association between the tenant identifier for that site s tenant and an identifier associated with the hub device e.g. an address of the hub device on the network so that data and or information received from the hub device is mapped to that tenant and associated with that tenant in the database . In this manner the application platform may maintain an association between the hub device of the monitoring system and the tenant associated with the site . When the tenant is associated with multiple different sites the application platform and or database may also maintain an association between the hub device and that particular site using a unique site identifier associated with the site . In a similar manner when remaining devices initially establish communications with the hub device via the wireless mesh network each of the respective devices may obtain its position and provide its position to the application platform via the network for association with the site and or site tenant. In alternative embodiments the association between the monitoring system and a tenant may be established manually for example by a user associated with the tenant utilizing the virtual application and manipulating the client device to input or otherwise provide information identifying the various devices that are or will be installed at the site .

In an exemplary embodiment the site management process continues by identifying obtaining or otherwise establishing one or more monitoring rules for the site being managed task . As discussed above a monitoring rule is a set of one or more criteria for one or more environmental conditions at the site that governs how one or more electrical appliances at a site should be operated to regulate environmental conditions at the site and thereby governs the corresponding energy usage associated with the site. For example if the electrical appliance is a heater a monitoring rule for the site may indicate that the heater should be powered or otherwise operated via the actuator device when a temperature measurement obtained by one of the sensor devices falls below a threshold value or conversely that the heater should be powered off or otherwise deactivated via the actuator device when a temperature measurement from one of the sensor devices exceeds another threshold value. As another example when the electrical appliance is a lamp proximate a particular sensor device a monitoring rule may indicate that the lamp should be turned on via the actuator device when that sensor device detects motion or conversely that the lamp should be turned off when the sensor device does not detect motion over a prescribed time period. It will be appreciated that there are numerous possible combinations of sensor devices actuator devices and electrical appliances which in turn results in numerous possible monitoring rules that may be defined for a particular site. In addition to measurement criteria for environmental conditions a monitoring rule may also include various timing criteria that dictate a duration over which the measurement criteria should be satisfied or violated before undertaking any action. For example a monitoring rule may include timing criteria that indicates a temperature measurement should fall below a threshold value for a specified duration of time before the heater at the site is operated.

In a similar manner as described above in exemplary embodiments the application platform generates or otherwise provides GUI elements within the virtual application that are adapted to allow the user to define measurement criteria timing criteria and corresponding actions for the various monitoring rules to be associated with the site . For example the application platform may access the database to obtain information pertaining to the types of sensor devices actuator devices and or electrical appliances at the site and or their respective positions within the site and generate GUI elements adapted to allow the user to define measurement criteria e.g. threshold values and the like for measurements of environmental condition s obtained from the sensor devices any desired timing criteria for those measurement criteria and corresponding actions to be undertaken by the actuator devices when the measurement data from the sensor devices satisfy the specified measurement criteria and or timing criteria. After the user has defined the desired monitoring rules for the site the application platform stores or otherwise maintains information pertaining to the criteria and actions for those monitoring rules in the database in association with the user s tenant and or the site . In other embodiments the application platform may obtain default monitoring rules that are predefined by the manufacturer of a respective sensor device e.g. from the database and or via the network using an identifier associated with that respective sensor device .

In accordance with one or more embodiments the site management process continues by configuring the devices of the monitoring system for operation in accordance with the monitoring rules task . In this regard the application platform provides configuration information to the devices that is utilized by the respective devices to automatically configure themselves for operation in accordance with the monitoring rules for the site as described in greater detail below in the context of . In accordance with one or more embodiments based on the timing criteria for the monitoring rules associated with the site the application platform may automatically determine a minimum sampling frequency or rate at which the individual sensor devices should obtain measurements for different environmental conditions and or a minimum upload frequency or rate at which the hub device should transmit measurement data obtained by the sensor devices to the application platform . For example if a monitoring rule indicates a heater should be operated whenever a temperature measurement from the sensor device falls below a threshold value for 5 minutes or more the application platform may automatically determine a sampling frequency for the sensor device so that the sensor device obtains a temperature measurements at a rate greater than once every 5 minutes and also an upload frequency for the hub device so that the hub device transmits the obtained measurement data form the sensor device to the application platform at a rate greater than once every 5 minutes. In other embodiments the user may define the desired sampling frequency for the sensor devices and or the desired upload frequency for the hub device . To configure the respective devices for operation in accordance with the monitoring rules the application platform transmits code commands instructions or other indications of the desired operating frequencies and or other configuration information for the respective device to the hub device via the network along with an indication of the respective device that configuration information pertains to and in turn the hub device routes transmits or otherwise provides that information to the appropriate device via the wireless mesh network. In response to receiving configuration information each respective device automatically configures itself for operation in accordance with the received configuration information as described in greater detail below.

Still referring to the site management process continues by receiving environmental measurement data from the monitoring system at the site and determining whether an environmental condition at the site should be modified based on the monitoring rules for the site tasks . In this regard after the devices are associated with the site and configured for operation the devices operate autonomously in accordance with the received configuration information to provide environmental measurement data to the application platform . In this regard each respective sensor device automatically samples the outputs of its auxiliary sensing elements with the desired sampling frequencies to obtain measurements of environmental conditions in its vicinity and transmits or otherwise provides the obtained environmental measurement data to the hub device . In exemplary embodiments the hub device automatically stores or batches the environmental measurement data from the sensor devices before automatically uploading or otherwise transmitting the environmental measurement data from the sensor devices to the application server collectively at the desired upload frequency. After receiving the environmental measurement data from the sensor devices the application platform automatically determines whether any actions should be undertaken to modify environmental conditions at the site based on the monitoring rules for the site . For example in response to receiving environmental measurement data from the site the application platform uses the tenant identifier and or site identifier associated with the monitoring system and or devices to obtain the monitoring rules for the site from the database and compares the environmental measurement data to the measurement criteria of those monitoring rules to determine whether any actions at the site should be undertaken. In this regard the application platform automatically compares measured values for environmental conditions obtained from the sensor devices at the site with threshold values for those environmental conditions provided by the monitoring rules for the site and identifies the actions that should be undertaken or which environmental conditions should be modified. For example if the electrical appliance is a heater and a monitoring rule for the site indicates a temperature in the vicinity of the sensor device should not fall below 70 F. when the sensor device detects motion in its vicinity and the environmental measurement data from the sensor device indicates that it detected motion and the temperature is 68 F. the application platform may determine that the electrical appliance should be operated or otherwise activated to modify the temperature in the vicinity of the sensor device .

In response to determining an action should be undertaken to modify an environmental condition at a site the site management process continues by signaling or otherwise providing indication of that action to the actuator for the environmental appliance at the site that influences that environmental condition task . In this manner the application platform effectuates the desired modification to the environmental condition and thereby autonomously regulates the environmental condition in accordance with the monitoring rules. For example continuing the above example where the electrical appliance is a heater the application platform transmits or otherwise provides to the hub device via the network an indication that the actuator device should operate the heater when the sensor device detects motion and a temperature less than the threshold value wherein the hub device automatically transmits the indication to the actuator device via the wireless mesh network. In response to receiving the indication from the application platform the actuator device operates the heater for example by operating a relay or switch or another auxiliary actuating element associated with the actuator device to provide power or energy from the energy source to the heater . The heater is thereby autonomously operated to generate heat and thereby increase the temperature in the vicinity of the sensor device without manual interaction.

In exemplary embodiments the site management process continues by updating the on demand database to store or otherwise maintain the received environmental measurement data for the site task . For example the application platform may store the received environmental measurement data in the database in a manner that maintains an association between the environmental measurement data and the tenant and or site e.g. using the tenant identifier for the tenant associated with the site . Additionally the application platform may store information pertaining to the current state of the actuator devices and or the electrical appliances at the site .

In accordance with one or more embodiments the site management process continues by generating or otherwise providing one or more graphical representations of the environmental data at the site task . For example the user of the client device may manipulate one or more GUI elements provided by the virtual application to indicate a desire view the environmental data or information pertaining to the site wherein in response to receiving the indication of a desire to view the environmental data for the site the application platform utilizes the tenant identifier associated with the user of the client device and or a site identifier corresponding to the site indicated by the user to retrieve from the database the environmental data for the site and generates graphical representations of the environmental data such as for example one or more tables charts graphs or the like that visually depict the measured values for environmental conditions at the site obtained by the sensor devices or the operational status of the actuator devices and or the electrical appliances at the site . In some embodiments the application platform may utilize the information pertaining to the operating state of the actuator devices and or the electrical appliances at the site to calculate or otherwise determine an estimated energy usage for the site and generate a graphical representation that visually depicts the estimated energy usage for the site .

As illustrated in in exemplary embodiments the site management process continues by periodically receiving updated environmental measurement data that is autonomously provided by the monitoring system at the site determining whether actions need to be taken to modify environmental conditions at the site based on the updated environmental measurement data providing indication of those actions to actuators for electrical appliances at the site and updating the tenant s environmental data in the on demand database and or any graphical representations thereof tasks and . For example the sensor devices may continue autonomously measuring environmental conditions at the site at the desired sampling frequency and providing that environmental measurement data via the wireless mesh network to the hub device which in turn continues automatically batching the environmental measurement data and periodically transmitting the environmental measurement data for the site to the application platform via the network with the desired upload frequency. In a similar manner as described above in response to receiving updated environmental measurement data from the sensor devices the application platform determines whether any actions should be undertaken to modify environmental conditions at the site based on the monitoring rules for the site . For example continuing the above example where the electrical appliance is a heater if a monitoring rule for the site indicates the heater should be disabled whenever the temperature exceeds 72 F. and the environmental measurement data from the sensor device indicates that the temperature is 73 F. the application platform may determine that the heater should be disabled or otherwise deactivated. In a similar manner as described above the application platform provides indication that the actuator device should cease operating the electrical appliance to the hub device via the network wherein the hub device automatically provides the indication to the actuator device via the wireless mesh network. In response the actuator device ceases operating the electrical appliance for example by operating its associated relay or another actuating element to prevent power or energy from the energy source from being provided to to the electrical appliance . As described above the application platform may update the database to store or otherwise maintain the updated environmental measurement data and the updated status of the actuator devices and or electrical appliances associated with the site . In this manner when the user of the client device subsequently indicates a desire view information pertaining to the site the application platform generates graphical representations that reflect the updated environmental data and the current status of the actuator devices and or electrical appliances at the site .

In exemplary embodiments when a hub device is subsequently powered on or installed at the site the hub device automatically creates or otherwise establishes a wireless mesh network obtains its position and communicates its position along with a request for configuration information to the application server via the network as described in greater detail below in the context of the device initialization process of . Using the position of the hub device the application platform accesses the database and determines that the hub device is located at the site based on the position of the hub device and the location information for the site maintained by the database . After determining the hub device is at the site the application platform stores information pertaining to the hub device in the database in association with the site and or the site tenant. In exemplary embodiments the application platform obtains one or more monitoring rules for the site from the database and determines configuration information for the hub device based at least in part on the one or more monitoring rules so that the hub device is operated in accordance with the monitoring rules. For example the application platform may determine communication configuration information such as a frequency or rate at which the hub device should provide batches of environmental measurement data to the application server based on the timing criteria associated with the monitoring rules for the site . In exemplary embodiments the application platform responds to the hub device by providing a response that includes the configuration information to the hub device which in turn automatically configures itself for operation in accordance with the received configuration information as described below.

Still referring to when a sensor device is powered on or installed at the site the sensor device automatically obtains its position and communicates a request for configuration information that includes its position and identifying information pertaining to its associated auxiliary sensing elements to the hub device via the wireless mesh network as described in greater detail below in the context of . The hub device automatically communicates the sensor configuration information request to the application server via the network . The application platform stores the position and identifying information for the sensor device in the database in association with the site and or the site tenant. Based on the position and identifying information associated with the request the application platform identifies monitoring rules for the site maintained by the database that are relevant to the sensor device and identifies or otherwise determines configuration information for the sensor device so that the sensor device is operated in accordance with the monitoring rules for the site . For example the application platform may determine sampling frequencies for the various sensing elements of the sensor device based on the timing criteria defined by the monitoring rules for the site that pertain to the sensor device . The application platform transmits or otherwise provides the sensor configuration information to the hub device via the network whereby the hub device transmits routes or otherwise provides the sensor configuration information to the sensor device via the wireless mesh network. The sensor device automatically configures itself for operation in accordance with the received sensor configuration information as described in greater detail below in the context of .

Likewise in the illustrated embodiment of when the actuator device is powered on or installed at the site the actuator device automatically obtains its position and transmits or otherwise provides its position along with identifying information e.g. information pertaining to the type of actuating element and or electrical appliance associated with the actuator device and status information e.g. the current state of the actuating element and or electrical appliance to the hub device via the wireless mesh network. As described above the hub device transmits or otherwise provides the information for the actuator device to the application server via the network and the application platform stores the information pertaining to the actuator device in the database in association with the site and or the site tenant.

As described above in the context of after a sensor device at the site self configures the sensor device automatically obtains measurements of environmental conditions in its vicinity in accordance with the sensor configuration information provided by the application platform . In this regard the sensor device samples the outputs of the various sensing elements with the desired sampling frequency for that environmental condition and transmits or otherwise provides the measured values for those environmental conditions to the hub device via the wireless mesh network. The hub device may temporarily store or otherwise maintain the environmental measurement data from the sensor device for batching with additional environmental measurement data from another sensor device and or the same sensor device before collectively transmitting or otherwise providing the batched environmental measurement data for the site to the application server via the network .

After receiving the environmental measurement data from the hub device at the site using the association between the hub device and the site and or the site tenant the application platform accesses the database to retrieve the monitoring rules for the site and store the received environmental measurement data for the site in association with the site and or site tenant. In other words the application platform updates the environmental measurement data for the site maintained by the database to include the most recently received environmental measurement data. As described above in the context of the application platform determines whether any actions should be undertaken to modify environmental conditions at the site by comparing the environmental measurement data to the criteria of the monitoring rules for the site . When the application platform determines that no action is required the application platform may respond to the hub device with an indication that no action should be performed by the devices and or electrical appliances at the site . In this manner the actuator device and or electrical appliance may maintain its current state while the devices continue autonomous operation. For example if the electrical appliance is a heater and a monitoring rule for the site indicates a temperature in the vicinity of the sensor device should not fall below 70 F. when the sensor device detects motion in its vicinity and the environmental measurement data from the sensor device indicates that the temperature is 68 F. but the sensor device is not detecting motion the application platform may determine that the electrical appliance may be maintained in a deactivated or off state. In accordance with one or more embodiments the application platform may generate or otherwise provide a graphical representation of the received environmental measurement data within the virtual application presented on the client device as described in greater detail below in the context of . For example if the virtual application is currently being utilized by the user of the client device to monitor the site the application platform may automatically push the updated environmental measurement data to the client device or otherwise automatically update a GUI display presented by the virtual application on the client device to reflect the received environmental measurement data substantially in real time. In other embodiments the application platform may generate and provide the graphical representations of the tenant s environmental measurement data from the database in response to the user of the client device manipulating the client device and or client application to select or otherwise indicate a desire to view the environmental measurement data for the site .

Still referring to the sensor device at the site continues automatically obtaining measurements of environmental conditions in its vicinity and transmitting or otherwise providing the recently measured values to the hub device which automatically batches the environmental measurement data for the site and collectively transmits or otherwise provides the updated batch of environmental measurement data for the site to the application server via the network . After receiving the updated environmental measurement data the application platform accesses the database to store the updated environmental measurement data for the site in association with the site and or site tenant retrieve the monitoring rules for the site and determine whether any actions should be undertaken to modify environmental conditions at the site by comparing the updated environmental measurement data either individually or in combination with the previous environmental measurement data to the criteria of the monitoring rules for the site . When the application platform determines that an action is required to modify an environmental condition at the site the application platform identifies or otherwise determines the actuator device associated with the electrical appliance that influences or otherwise modifies that environmental condition and transmits to the hub device via the network a command instruction or another indication of how that actuator device should operate the electrical appliance to achieve the desired modification of the environmental condition. For example continuing the above example where the electrical appliance is a heater if the monitoring rule for the site indicates a temperature in the vicinity of the sensor device should not fall below 70 F. when the sensor device detects motion in its vicinity and the environmental measurement data from the sensor device indicates that the temperature is 68 F. and the sensor device detected motion the application platform may determine that the heater should be activated or otherwise operated and provide indication of the manner in which the actuator device should operate the heater to the hub device . For example if the actuator device includes a relay configured in series between the energy source and the electrical appliance the application platform may provide an indication or command to close the relay.

As described above in the context of the hub device transmits or otherwise provides the indication to the actuator device which in turn operates the electrical appliance in the desired manner for example by closing the relay to provide power from the energy source to the electrical appliance . In this manner the actuator device and or the electrical appliance may be autonomously controlled operated or otherwise regulated by the application server and or application platform based on the monitoring rules for the site and the environmental measurement data received from sensor devices the site without any manual interaction. As described above the application platform may also update the status information for the actuator device and or the electrical appliance maintained in the database to reflect the change in operational status. Additionally the application platform may generate or otherwise provide a graphical representation of the updated status of the actuator device and or the electrical appliance at the site along with one or more graphical representations of the updated environmental measurement data within the virtual application presented on the client device . For example the application platform may automatically push the updated environmental measurement data and status information to the client device or otherwise automatically update a GUI display presented on the client device to reflect the updated environmental measurement data and the status information substantially in real time. In this manner the user of the client device may view or otherwise monitor the current environmental conditions at the site along with the current status of the electrical appliances at the site . However as noted above manual interaction by the user of the client device is not required to operate the actuator devices and or the electrical appliances at the site or otherwise regulate the environmental conditions at the site .

In accordance with one embodiment the user of the client device manipulates a browser application e.g. client application to access the application platform e.g. by directing the browser application to an address on the network that is associated with the application server wherein the application platform generates the virtual application within the browser application that includes one or more GUI displays adapted to allow the user of the client device to select or otherwise indicate a desire to view or otherwise monitor information pertaining to the site being managed e.g. by selecting the ENERGY CONSOLE tab . In response the application platform retrieves or otherwise obtains from the database identifying information for the various sensor devices at the site the environmental measurement data obtained by those sensor devices and or information pertaining to the status of the actuator devices and or electrical appliances at the site and generates or otherwise provides a graphical representation of the obtained information and or data from the database in the client application on the client device . For example in the illustrated embodiment the application platform generates or otherwise provides for each sensor device a graphical representation of the identification or name of the respective sensor device e.g. Sensor and the like a graphical representation of the location of the respective sensor device within the site e.g. Conference Room and the like which may be colloquially defined by a user a graphical representation of the most recently measured value for motion in the vicinity of the respective sensor device a graphical representation of the most recently measured value for temperature in the vicinity of the respective sensor device and a graphical representation of the most recently measured value for luminance in the vicinity of the respective sensor device. As illustrated the application platform may also provide one or more selectable GUI elements e.g. buttons or the like adapted to allow a user to indicate a desire to view additional graphical representations of the environmental measurement data for a particular sensor device wherein in response to identifying selection of a GUI element the application platform generates additional graphical representations of the environmental measurement data for that sensor device such as for example charts graphs or the like depicting previously measured values for environmental conditions in the vicinity of that sensor device relative to the most recently measured values for those environmental conditions. It should be appreciated that is merely one example of a GUI display that may be presented by the application platform in conjunction with the site management process of and in practice numerous possible GUI displays may be generated based on the information pertaining to the site maintained by the database .

Turning now to in an alternative embodiment an on demand energy management system utilizes an actuator that is communicatively coupled to the application server and or application platform via the network independent of the hub device or the wireless mesh network. In a similar manner as described above the actuator is associated with the electrical appliance at the site and controls operation of the electrical appliance to regulate the amount of power or energy from the energy source that is consumed by the electrical appliance . The actuator may be a third party system such as an energy utility company or the like. In the embodiment of the application platform determines environmental condition to be modified and or the relative position of where the environmental condition should be modified within the site e.g. based on the position of the sensor device having a measured value for the environmental condition that triggered the modification and provides indication of the modification to the environmental condition and or the position within the site where that modification should occur wherein the third party actuator determines which electrical appliance at the site should be operated based on the received position and the environmental condition being modified and the manner in which that electrical appliance should be operated based on the modification indicated by the application platform .

In exemplary embodiments the auxiliary substrate is realized as a printed circuit board or another suitable electronics substrate having the auxiliary element and the data storage element affixed mounted formed or otherwise provided thereon. In exemplary embodiments the auxiliary substrate includes conductive traces or the like adapted to couple the auxiliary element and the memory to the physical interface and similarly the primary substrate includes conductive traces or the like adapted to couple the control module to the physical interface . In this manner the control module is communicatively coupled to the auxiliary element and the data storage element when the substrates are coupled via the interfaces . The data storage element represents a non transitory storage or other computer readable media such as ROM that is capable of storing identification information indicating the type of auxiliary element provided on the auxiliary substrate and or other programming instructions for execution on the control module . In this regard the identification information maintained by the memory is utilized to determine how to operate the auxiliary element as described in greater detail below.

The control module generally represents the combination of hardware circuitry and or other components that are affixed mounted formed or otherwise provided on the primary substrate and configured to support operation of the device and execute the various functions and or processing tasks described herein. In an exemplary embodiment the control module is realized as a microcontroller. However it will be appreciated that the subject matter described herein is not limited to microcontrollers and in other practical embodiments the control module may be realized as a processor a controller a microprocessor a state machine a content addressable memory an application specific integrated circuit a field programmable gate array any suitable programmable logic device discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. In exemplary embodiments the control module includes a suitable amount of memory or other non transitory computer readable storage media such as ROM that is capable of storing programming instructions that when read and executed by the control module cause the control module to initiate or otherwise perform the device initialization process of and additional tasks operations functions and or processes described herein. The wireless transceiver may be realized as a ZigBee transceiver a Bluetooth transceiver or another suitable wireless transceiver that is affixed mounted or otherwise provided on the primary substrate and communicatively coupled to the control module via conductive traces or the like fabricated on the primary substrate . In exemplary embodiments the primary electronics substrate also includes a position determining module such as a GPS receiver that is affixed mounted or otherwise provided thereon that is coupled to the control module to provide to the control module an indication of the current position e.g. longitudinal and latitudinal location and altitude of the device for purposes of associating the device with a particular site and or tenant or otherwise identifying the location of the device within a monitored site as described in greater detail below.

In an exemplary embodiment the device initialization process is performed by a device upon the device being initially powered on enabled or otherwise installed at a site. The device initialization process begins by obtaining information identifying a type of auxiliary element associated with the device task . In this regard when the control module is initially powered on or otherwise enabled the control module automatically accesses the auxiliary memory onboard the auxiliary substrate to obtain identifying information for the auxiliary element that is stored or otherwise maintained by the auxiliary memory . After obtaining the identifying information for the auxiliary element from the auxiliary memory the device initialization process continues by identifying or otherwise determining whether the auxiliary element is an interface for coupling the device to a distinct network or communications medium different than the one supported by the wireless transceiver based on the identifying information task . In this regard the control module identifies whether the device is capable of communicating over a network other than a wireless mesh network or other short range or personal area network supported by the wireless transceiver . For example the control module may determine the auxiliary element is a network interface for a distinct network different from the wireless mesh network supported by the wireless transceiver when the identifying information corresponds to a known identifier that is associated with Ethernet ports IEEE 802.11 transceivers cellular transceivers or the like.

In exemplary embodiments when the auxiliary element is a network interface to a network different than the network associated with the wireless transceiver a respective device automatically identifies itself as a hub device and automatically configures itself for subsequent operation in accordance with a site management process such as the site management process of . In this regard in response to determining the auxiliary element is a network interface the device initialization process continues by establishing communications with the on demand application platform via the network interface to receive or otherwise obtain configuration information for subsequently communicating with the on demand application platform via the network and automatically configuring itself for subsequent operation in accordance with the received communication configuration information tasks . For example using a known location e.g. an IP address a URL or the like for the application platform and or the application server on the network the control module may automatically attempt to contact the application platform over the network via the auxiliary element by transmitting a request for communication configuration information to the application platform . As described above in response to receiving the request for communication configuration information the application platform determines or otherwise identifies the tenant and or site that the hub device is associated with for example by matching the positional information for the hub device accompanying the request to a location of a site associated with the tenant. In this regard the control module may obtain its physical position from the GPS receiver and transmit or otherwise provide its physical position with the request for communication configuration information or alternatively the application platform may identify the hub device as being at the site based on the network location of the hub device on the network e.g. by identifying the source IP address associated with the request as being within the range of IP addresses on the network associated with the site . After identifying the site and or tenant the hub device is to be associated with the application platform obtains one or more monitoring rules for the site and or tenant from the database determines communication configuration information for the hub device e.g. a frequency or rate at which batched environmental measurement data should be provided to the application platform based at least in part on the monitoring rules and transmits the communication configuration information to the hub device via the network . In response to receiving the communication configuration information the control module of the hub device automatically configures itself to subsequently communicate with the application platform in the indicated manner. For example the control module may automatically configure itself to store buffer or otherwise batch an indicated amount of environmental measurement data and or to upload or otherwise transmit batched environmental measurement data with the indicated frequency or rate. In this regard the communication configuration information may include code software protocols commands or other instructions that are automatically executed by the control module upon receipt of the response that cause the control module to thereafter operate the device in the desired manner.

In exemplary embodiments for the hub device the device initialization process continues by creating or otherwise establishing a mesh network for communicating with other sensor devices and or actuator devices of the monitoring system at the site and subsequently routing or otherwise facilitating communications between the sensor devices and or actuator devices and the application platform in accordance with the received communication configuration information tasks . In this regard the control module of the hub device autonomously enables its wireless transceiver sets its address on the wireless mesh network to a particular value listens for signals from other devices at the site that include that address value in their header and routes or otherwise transmits communications to from the devices over the network in accordance with the communication configuration information. As described above in response to receiving environmental measurement data from one of the sensor devices at the site the hub device may automatically store buffer or otherwise batch the environmental measurement data with additional environmental measurement data either from the same sensor device or a different sensor device before automatically transmitting the batched environmental measurement data to the application platform via the network with the desired upload frequency. For example the individual sensor devices may be configured to obtain environmental measurement data at a first frequency or rate e.g. every 5 minutes while the communication configuration information indicates that the hub device should upload or otherwise transmit environmental measurement data at a lesser frequency or rate e.g. every 15 minutes whereby the hub device automatically batches a number of instances e.g. 3 instances of environmental measurement data from the sensor devices before transmitting the batched environmental measurement data to the application platform .

Still referring to in exemplary embodiments the device initialization process is performed by each device in a monitoring system upon initialization or installation of that respective device. In this regard when the identifying information for the auxiliary element is not indicative of it being an interface to another network the respective device automatically joins the wireless mesh network or otherwise establishes a connection to the mesh network created by the hub device at the site task . In this regard the control module automatically enables the wireless transceiver and establishes communications with the hub device at the site for example by transmitting signals that include the address value of the hub device in their respective packet headers. After establishing communications with the hub device at the site the respective device automatically transmits or otherwise provides a request for configuration information for operating the auxiliary element to the application platform via the hub device task . In this regard in exemplary embodiments the control module of a respective sensor device automatically obtains its current position from its GPS receiver and transmits or otherwise provides to the application platform via the hub device a request for sensor configuration information that includes the current position of the respective sensor device and the identifying information for the auxiliary sensing element associated with the respective sensor device . In response to receiving the request the application platform utilizes the identifying information for the auxiliary sensing element to identify the type of auxiliary sensing element associated with the respective sensor device and obtain from the database code protocols commands or other instructions for interfacing with the identified auxiliary sensing element . Additionally based on the position of the respective sensor device within the site the monitoring rules for the site and the type of auxiliary sensing element the application platform determines the frequency or rate at which environmental measurements should be obtained from the auxiliary element . The application platform transmits or otherwise provides a response message to the respective sensor device via the hub device and network that includes the code software protocols commands or other instructions that enable the control module to operate or otherwise interface with the auxiliary element along with indication of the frequency or rate at which the auxiliary element should be operated or its output sampled .

In exemplary embodiments the device initialization process continues with the respective sensor device automatically configuring itself so that it subsequently operates the auxiliary element to autonomously obtain environmental measurement data in accordance with the configuration information provided by the on demand application platform task . In this regard the control module of a respective sensor device configures itself to autonomously obtain environmental measurement data from the auxiliary element at the sampling frequency indicated by the application platform using the code protocols commands or other instructions provided by the application platform so that thereafter the control module autonomously operates its associated auxiliary element in accordance with the sensor configuration information received from the on demand application platform.

In exemplary embodiments the device initialization process may be performed for each device installed at a site and or for each auxiliary element coupled to the control module and or main electronics substrate of a respective device at a site. For example a given device may include multiple auxiliary substrates that are physically coupled to the primary substrate such that the control module is communicatively coupled to multiple auxiliary elements concurrently. Accordingly for each respective auxiliary substrate and or auxiliary element the control module may obtain identifying information from the respective auxiliary memory e.g. task obtain operating information for the respective auxiliary element from the on demand application platform e.g. task and automatically configure itself to autonomously operate the respective auxiliary element in accordance with the operating information provided by the application platform e.g. task . In this manner the devices at the site operate in conjunction with the application platform to self configure so that an individual user need not configure or otherwise provision each device with the necessary software and or other programming required to operate the respective device in accordance with the monitoring rules for the site established by the tenant.

As used herein a tenant or an organization should be understood as referring to a group of one or more users that shares access to common subset of the data within the multi tenant database . In this regard each tenant includes one or more users associated with assigned to or otherwise belonging to that respective tenant. To put it another way each respective user within the multi tenant system is associated with assigned to or otherwise belongs to a particular tenant of the plurality of tenants supported by the multi tenant system . Tenants may represent customers customer departments business or legal organizations and or any other entities that maintain data for particular sets of users within the multi tenant system . For example the application server may be associated with one tenant supported by the multi tenant system . Although multiple tenants may share access to the server and the database the particular data and services provided from the server to each tenant can be securely isolated from those provided to other tenants. The multi tenant architecture therefore allows different sets of users to share functionality and hardware resources without necessarily sharing any of the data belonging to or otherwise associated with other tenants.

The multi tenant database is any sort of repository or other data storage system capable of storing and managing the data associated with any number of tenants. The database may be implemented using any type of conventional database server hardware. In various embodiments the database shares processing hardware with the server . In other embodiments the database is implemented using separate physical and or virtual database server hardware that communicates with the server to perform the various functions described herein. In an exemplary embodiment the database includes a database management system or other equivalent software capable of determining an optimal query plan for retrieving and providing a particular subset of the data to an instance of virtual application in response to a query initiated or otherwise provided by a virtual application . The multi tenant database may alternatively be referred to herein as an on demand database in that the multi tenant database provides or is available to provide data at run time to on demand virtual applications generated by the application platform .

In practice the data may be organized and formatted in any manner to support the application platform . In various embodiments the data is suitably organized into a relatively small number of large data tables to maintain a semi amorphous heap type format. The data can then be organized as needed for a particular virtual application . In various embodiments conventional data relationships are established using any number of pivot tables that establish indexing uniqueness relationships between entities and or other aspects of conventional database organization as desired. Further data manipulation and report formatting is generally performed at run time using a variety of metadata constructs. Metadata within a universal data directory UDD for example can be used to describe any number of forms reports workflows user access privileges business logic and other constructs that are common to multiple tenants. Tenant specific formatting functions and other constructs may be maintained as tenant specific metadata for each tenant as desired. Rather than forcing the data into an inflexible global structure that is common to all tenants and applications the database is organized to be relatively amorphous with the pivot tables and the metadata providing additional structure on an as needed basis. To that end the application platform suitably uses the pivot tables and or the metadata to generate virtual components of the virtual applications to logically obtain process and present the relatively amorphous data from the database .

The server is implemented using one or more actual and or virtual computing systems that collectively provide the dynamic application platform for generating the virtual applications . For example the server may be implemented using a cluster of actual and or virtual servers operating in conjunction with each other typically in association with conventional network communications cluster management load balancing and other features as appropriate. The server operates with any sort of conventional processing hardware such as a processor memory input output features and the like. The input output features generally represent the interface s to networks e.g. to the network or any other local area wide area or other network mass storage display devices data entry devices and or the like. The processor may be implemented using any suitable processing system such as one or more processors controllers microprocessors microcontrollers processing cores and or other computing resources spread across any number of distributed or integrated systems including any number of cloud based or other virtual systems. The memory represents any non transitory short or long term storage or other computer readable media capable of storing programming instructions for execution on the processor including any sort of random access memory RAM read only memory ROM flash memory magnetic or optical mass storage and or the like. The computer executable programming instructions when read and executed by the server and or processor cause the server and or processor to create generate or otherwise facilitate the application platform and or virtual applications and perform one or more additional tasks operations functions and or processes described herein. It should be noted that the memory represents one suitable implementation of such computer readable media and alternatively or additionally the server could receive and cooperate with external computer readable media that is realized as a portable or mobile component or application platform e.g. a portable hard drive a USB flash drive an optical disc or the like.

The application platform is any sort of software application or other data processing engine that generates the virtual applications that provide data and or services to the client devices . In a typical embodiment the application platform gains access to processing resources communications interfaces and other features of the processing hardware using any sort of conventional or proprietary operating system . The virtual applications are typically generated at run time in response to input received from the client devices . For the illustrated embodiment the application platform includes a bulk data processing engine a query generator a search engine that provides text indexing and other search functionality and a runtime application generator . Each of these features may be implemented as a separate process or other module and many equivalent embodiments could include different and or additional features components or other modules as desired.

The runtime application generator dynamically builds and executes the virtual applications in response to specific requests received from the client devices . The virtual applications are typically constructed in accordance with the tenant specific metadata which describes the particular tables reports interfaces and or other features of the particular application . In various embodiments each virtual application generates dynamic web content that can be served to a browser or other client program associated with its client device as appropriate.

The runtime application generator suitably interacts with the query generator to efficiently obtain multi tenant data from the database as needed in response to input queries initiated or otherwise provided by users of the client devices . In a typical embodiment the query generator considers the identity of the user requesting a particular function along with the user s associated tenant and then builds and executes queries to the database using system wide metadata tenant specific metadata pivot tables and or any other available resources. The query generator in this example therefore maintains security of the common database by ensuring that queries are consistent with access privileges granted to the user and or tenant that initiated the request. In this manner the query generator suitably obtains requested subsets of data accessible to a user and or tenant from the database as needed to populate the tables reports or other features of the particular virtual application for that user and or tenant.

Still referring to the data processing engine performs bulk processing operations on the data such as uploads or downloads updates online transaction processing and or the like. In many embodiments less urgent bulk processing of the data can be scheduled to occur as processing resources become available thereby giving priority to more urgent data processing by the query generator the search engine the virtual applications etc.

In exemplary embodiments the application platform is utilized to create and or generate data driven virtual applications for the tenants that they support. Such virtual applications may make use of interface features such as custom or tenant specific screens standard or universal screens or the like. Any number of custom and or standard objects may also be available for integration into tenant developed virtual applications . As used herein custom should be understood as meaning that a respective object or application is tenant specific e.g. only available to users associated with a particular tenant in the multi tenant system or user specific e.g. only available to a particular subset of users within the multi tenant system whereas standard or universal applications or objects are available across multiple tenants in the multi tenant system. The data associated with each virtual application is provided to the database as appropriate and stored until it is requested or is otherwise needed along with the metadata that describes the particular features e.g. reports tables functions objects fields formulas code etc. of that particular virtual application . For example a virtual application may include a number of objects accessible to a tenant wherein for each object accessible to the tenant information pertaining to its object type along with values for various fields associated with that respective object type are maintained as metadata in the database . In this regard the object type defines the structure e.g. the formatting functions and other constructs of each respective object and the various fields associated therewith.

Still referring to the data and services provided by the server can be retrieved using any sort of personal computer mobile telephone tablet or other network enabled client device on the network . In an exemplary embodiment the client device includes a display device such as a monitor screen or another conventional electronic display capable of graphically presenting data and or information retrieved from the multi tenant database . Typically the user operates a conventional browser application or other client program executed by the client device to contact the server via the network using a networking protocol such as the hypertext transport protocol HTTP or the like. The user typically authenticates his or her identity to the server to obtain a session identifier SessionID that identifies the user in subsequent communications with the server . When the identified user requests access to a virtual application the runtime application generator suitably creates the application at run time based upon the metadata as appropriate. As noted above the virtual application may contain Java ActiveX or other content that can be presented using conventional client software running on the client device other embodiments may simply provide dynamic web or other content that can be presented and viewed by the user as desired.

Referring again to one advantage of the subject matter described herein is that environmental conditions at a site and the corresponding energy usage associated with that site may be monitored and regulated in an autonomous manner at or near real time without requiring manual interaction. For example a user associated with a tenant need not continuously monitor environmental conditions at the site and then manually determine what actions need to be performed to modify environmental conditions and manually control electrical appliances at the site in the corresponding manner. Additionally machine learning techniques may be utilized to dynamically adapt monitoring rules and or the corresponding actions to further improve efficiency.

The foregoing description is merely illustrative in nature and is not intended to limit the embodiments of the subject matter or the application and uses of such embodiments. Furthermore there is no intention to be bound by any expressed or implied theory presented in the technical field background or the detailed description. As used herein the word exemplary means serving as an example instance or illustration. Any implementation described herein as exemplary is not necessarily to be construed as preferred or advantageous over other implementations and the exemplary embodiments described herein are not intended to limit the scope or applicability of the subject matter in any way.

For the sake of brevity conventional techniques related to networking sensing monitoring signaling and other functional aspects of the systems and the individual operating components of the systems may not be described in detail herein. In addition those skilled in the art will appreciate that embodiments may be practiced in conjunction with any number of system and or network architectures data transmission protocols and device configurations and that the system described herein is merely one suitable example. Furthermore certain terminology may be used herein for the purpose of reference only and thus is not intended to be limiting. For example the terms first second and other such numerical terms do not imply a sequence or order unless clearly indicated by the context.

Embodiments of the subject matter may be described herein in terms of functional and or logical block components and with reference to symbolic representations of operations processing tasks and functions that may be performed by various computing components or devices. Such operations tasks and functions are sometimes referred to as being computer executed computerized software implemented or computer implemented. In practice one or more processing systems or devices can carry out the described operations tasks and functions by manipulating electrical signals representing data bits at accessible memory locations as well as other processing of signals. The memory locations where data bits are maintained are physical locations that have particular electrical magnetic optical or organic properties corresponding to the data bits. It should be appreciated that the various block components shown in the figures may be realized by any number of hardware software and or firmware components configured to perform the specified functions. For example an embodiment of a system or a component may employ various integrated circuit components e.g. memory elements digital signal processing elements logic elements look up tables or the like which may carry out a variety of functions under the control of one or more microprocessors or other control devices. When implemented in software or firmware various elements of the systems described herein are essentially the code segments or instructions that perform the various tasks. The program or code segments can be stored in a processor readable medium or transmitted by a computer data signal embodied in a carrier wave over a transmission medium or communication path. The processor readable medium or machine readable medium may include any non transitory medium that can store or transfer information. Examples of the processor readable medium include an electronic circuit a semiconductor memory device a ROM a flash memory an erasable ROM EROM a floppy diskette a CD ROM an optical disk a hard disk a fiber optic medium a radio frequency RF link or the like. The code segments may be downloaded via computer networks such as the Internet an intranet a LAN or the like. In this regard the subject matter described herein can be implemented in the context of any computer implemented system and or in connection with two or more separate and distinct computer implemented systems that cooperate and communicate with one another. In one or more exemplary embodiments the subject matter described herein is implemented in conjunction with a virtual customer relationship management CRM application in a multi tenant environment.

While at least one exemplary embodiment has been presented in the foregoing detailed description it should be appreciated that a vast number of variations exist. It should also be appreciated that the exemplary embodiment or embodiments described herein are not intended to limit the scope applicability or configuration of the claimed subject matter in any way. Rather the foregoing detailed description will provide those skilled in the art with a convenient road map for implementing the described embodiment or embodiments. It should be understood that various changes can be made in the function and arrangement of elements without departing from the scope defined by the claims which includes known equivalents and foreseeable equivalents at the time of filing this patent application. Accordingly details of the exemplary embodiments or other limitations described above should not be read into the claims absent a clear intention to the contrary.

