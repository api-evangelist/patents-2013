---

title: System and method for rapid dissemination of image products
abstract: A system and method for rapid dissemination of image products. In the system, a data consumer display device sends a geospatial request for a map image of a specific area of interest to a rapid image distribution system (RIDS), which forwards the request to a sensor ground station. The sensor ground station processes data received from a sensor platform and sends the processed data to a georectification processor. The georectification processor creates georectified data and sends the georectified data to the RIDS, which further processes the data, exposing it to data consumers using network optimized data services (e.g., KML/KMZ, TMS, GeoRSS, image chipper) based on geographic coordinates provided in the query that is a smaller subset of the sensor data. The RIDS sends the image product to the data consumer display device for display.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09106715&OS=09106715&RS=09106715
owner: The United States of America, as represented by the Secretary of the Army
number: 09106715
owner_city: Washington
owner_country: US
publication_date: 20130315
---
This application is related to and claims the benefit of priority to U.S. Provisional Patent Application No. 61 637 890 filed Apr. 25 2012 U.S. Provisional Patent Application No. 61 637 485 filed Apr. 24 2012 and Provisional Patent Application No. 61 620 647 filed Apr. 5 2012 the contents of which are incorporated herein by reference in their entireties.

The invention described herein may be manufactured used and licensed by or for the U.S. Government for governmental purposes without payment of any royalties thereon.

When natural disasters strike such as hurricanes tornadoes floods and fires emergency first responders need rapid and timely access to space based and aerial imagery to aid in mitigation planning allocation of resources search and rescue and recovery efforts. Having delayed access to space based products creates a sub optimal situational awareness environment. In fact access to near real time information with timely updates can make the difference between life and death.

However delivering large imagery files to the field has taken too long required delivery by manually transporting external media to the field or required increasing communications bandwidth which is costly. Responders have been left trying to make plans using outdated imagery information. Thus a need exists to improve the dissemination of large imagery files to first responders in the field.

Described herein is a system and method that mitigates the need for larger bandwidth networks not by purchasing more costly bandwidth but by optimizing the information on those networks and reducing the transmission time and size requirements of images while maintaining the precision and fidelity of the information. This leads to enhanced situational awareness through timely accurate and network friendly information.

The invention manipulates large space based and aerial imagery and radar products into small manageable sizes to facilitate rapid low bandwidth dissemination to end users to view on their organic geographic information system GIS and visual display devices. The invention accomplishes this by disseminating only the portions of the imagery that are needed rather than the entire image. This allows dissemination of the large files to users in the field via web based services with the bandwidth already available to them for viewing on their organic computers laptops tablets and smart phones using geospatial information services such as the Google Earth Enterprise Environment ARC Explorer Bing Yahoo and others. The invention also provides the capability to disseminate satellite imagery and radar products in a matter of minutes after the satellite has collected the information allowing for timely and accurate operational support to first responders.

The imagery radar sensor then transmits the sensor data to the sensor ground station using a proprietary binary format modulated to transmit via radio frequencies. The sensor ground station processes the sensor data into a non proprietary raw format. A georectification processor system rectifies the image using telemetry data from the sensor platform and the imagery radar sensor to create georectified broad area coverage TIFF or NITF formatted data. The georectified imagery radar data are then sent to the RIDS via a web based service. The RIDS processes the imagery radar data and produces various image products and services e.g. KML KMZ TMS GeoRSS image chipper that are provided to the data consumer such as emergency first responders through their web browsers and geographic information system GIS applications .

The RIDS is further illustrated in . A RIDS remote server e.g. any desktop computer server or laptop capable of operating an Apache HTTP server a Red Hat Enterprise Linux RHEL server or a SUSE Linux Enterprise Server SLES receives the georectified data from the sensor ground station . The RIDS remote server processes the data into network optimized image products and stores both the optimized and original image in its local metadata database e.g. MySQL PostgreSQL etc. . The RIDS remote server then exposes the various services e.g. KML KMZ TMS GeoRSS image chipper to the data consumer over a low bandwidth rapid dissemination path via a RIDS proxy server . The RIDS proxy server brokers all service requests from the data consumer to the RIDS remote server and to a RIDS enterprise server . When an initial request is made the proxy server stores a copy of the response in its cache and services any subsequent identical requests with this copy. This reduces processing and network resources for the RIDS remote server and the RIDS enterprise server . Once the RIDS remote server completes processing a compressed copy of the original georectified data and the corresponding records in the local metadata database are pushed to the RIDS enterprise server over a low bandwidth connection . The RIDS enterprise server stores georectified data and associated files on a network attached storage device NAS . The RIDS enterprise server processes the georectified data into identical products and services as available from the RIDS remote server . The RIDS proxy server detects the available services from the RIDS enterprise server and switches the RIDS enterprise server to the primary servicing server and places the RIDS remote server as a secondary source effectively eliminating bandwidth requirements through the low bandwidth rapid dissemination path for the specific georectified image.

The file format of the source files stored at is standardized at . If the image product files received and stored were received archived file compressed then the file archive is unarchived. If the files received were not archived then a file archive containing the image product and associated files is created. Both the archived and unarchived files are stored in the metadata database. The metadata database is updated indicating that the image product is ready for further processing and a job is created at to store the geographic extents and centroid of the scene image in the metadata database and to determine the number of bits per band.

The majority of multi spectral imagery contains greater than three bands Red Green Blue and or bands for wavelengths falling outside the visible spectrum. In the case of radar imagery each image band typically contains radar sensor data of differing polarizations. Due to this the image bands are reordered rebanded at if needed. The image is reprojected and an alpha mask is generated at . Then at a pyramid of image tiles commonly known as an imagery pyramid is generated along with associated KML Keyhole Markup Language files and a web path is also generated. Steps and are discussed in more detail below.

A thumbnail of the entire image scene is generated at for the data consumer to preview by downsampling the rebanded and reprojected image. The thumbnail image is stored in the web path created at . An exemplary thumbnail is illustrated in .

After the thumbnail is generated the metadata database is updated and jobs are created to create a KMZ Keyhole Markup Language Zipped archive for offline viewing at generate a KML and KMZ footprint of all images in the system for on line viewing at generate an XML footprint for GeoRSS viewing at generate any required access control files at and copy the image chipper service to the web path at . These steps are executed in parallel since each is independent of one another.

The complete image pyramid and associated KML files generated at are archived at into a KMZ file for offline viewing. This enables the data consumer to download the entire optimized file for offline viewing on their GIS application . The file archive received at or created at is copied to the web path for the data consumer to view as the original data as received from the georectification processor .

To create the KML KMZ footprint at a KML of all currently available processed images in the metadata database is created. The footprint includes a center point centroid and polygon feature for each processed image using the geographic extents and centroids stored in the database at along with the metadata stored in the database at . This footprint KML is then stored in the web root as a catalog for the data consumer to view available data in the RIDS . A KMZ of the footprint is generated to reduce the size of the file and the per request bandwidth used by the data consumer . After completion of this process the scene is viewable by the data consumer on the KML KMZ footprint service. An example of the catalog is shown in .

The XML footprint is generated at . An XML file adhering to a GeoRSS schema of all processed images in the metadata database is created first. This includes creating a point and polygon feature for each processed image using the geographic extents and centroids stored in the database at along with the metadata stored in the database at . This footprint XML is then stored in the web root as a catalog for the data consumers to view available data in the system.

The data in the metadata database is evaluated at to determine a license type. If the license type is a restricted type that requires access controls .htaccess files are generated and configured with the access permissions determined by the license type. The .htaccess files are placed in the web path location and recursively into each subdirectory. If it is determined that no access restrictions are required .htaccess file generation is bypassed.

Image chipper service PHP Hypertext Preprocessor and Python scripts are copied to the web path at . This PHP script allows the data consumer to send a geospatial query with the metadata identification database key of the image being processed via a web based interface. An example interface is illustrated in . The geospatial query includes a geospatially defined region e.g. latitude and longitude extents or bounds of the query window of the specific area of interest a resolution and a temporal window. Once received the PHP script passes this information off to the Python script. The Python script then retrieves the metadata information from the metadata database and uses a Geospatial Data Abstraction Library GDAL to create a subset of the original image based on the geographic coordinates passed from the PHP script. This single file chipped image is then returned to the data consumer via a web based file download.

The determination at of the geographic extents and centroid of the image and the number of bits per band is discussed in more detail in reference to . Whether the image has been georectified is determined at . If the image has not been georectified a job is added to the job stack to generate a georectified image at . If the image has been georectified then whether the stored image files are 8 bits per band is determined at . If the image file is not 8 bits per band a job is added to the job stack to perform band normalization at . The band normalization resamples the n bit bands in the image file to an 8 bits per band image. Band normalization is performed because not all GIS applications can access image files containing bands having more than 8 bits. When the image file is 8 bits per band the geographic extents and centroids of the stored GIS files are determined at using the GDAL software library and this information is stored in the metadata database. When the georectified image file is 8 bits per band and the geographic extents and centroid are determined the metadata database is updated and a job is created to reorder the image bands also known as rebanding at .

The reordering rebanding of the image bands at is discussed in more detail in reference to . Whether any rebanded images exist from a previously processed scene is determined at . If rebanded images exist they are removed at and the image bands are reordered. The type of image is determined at . If the metadata indicates that the image is panchromatic PAN the GDAL library is used to create at a new image containing a single band from a specified band of the image file. Thus a multi banded image may be displayed as a PAN image if desired. If the image is a radar product the GDAL library is used to create at a new image containing a single band from the specified band of the image file. If the metadata indicates that the image is a multispectral image MSI the GDAL library is used to create at a new image containing 3 bands R G B from bands R G B of the source image defined by the sensor ground station and recorded in the metadata database at . All images produced are 8 bits per band regardless of the number of bands. After the image bands are reordered the metadata database is updated and a job is created to reproject the image and generate an alpha mask at .

Reprojecting the image and generating an alpha mask at is discussed in more detail in reference to . Whether any reprojected images exist is determined at . Any reprojected images that already exist in the database are removed at . The rebanded images are reprojected at to WGS84 World Geodetic System 1984 Geographic Coordinate System projection using a resampling method such as nearest neighbor. An alpha mask is generated at to add transparent fill pixels where needed to maintain a rectangular pixel array. After the rebanded image is reprojected and the alpha mask is generated the metadata database is updated and a job is created to generate tiles and KML files and the web path at .

The generation at of the pyramid and tiles the KML files and the web path is discussed in more detail in reference to . Whether a web path exists for the output files is determined at . If the output path already exists due to a previously processed image any existing output directory is removed at to eliminate any trace of the previously generated files for the output of the current image. If the web path does not exist one is created at .

The super overlay imagery pyramids and tiles which are based upon the Tile Map Service TMS Specification and associated metadata are generated at for the web based mapping services viewable by data consumers using web browsers with services such as Google Maps and GIS applications by calling a GDAL utility gdal2tiles.py . Once the pyramids and associated XML HTML and KML files have been created the files are compressed and zipped by creating a KMZ at of the document root KML with the name of the image scene so that the scene name is visible when importing into the data consumer s GIS system such as Google Earth. The super overlay created includes symbology e.g. symbols denoting PAN MSI radar etc. based on metadata records. Then the metadata database is updated and a job is created to generate a thumbnail for the scene image at .

The generation of a georectified image at is discussed further in reference to . First the archive of the original image file and associated files is renamed at to indicate that it does not contain georectified imagery. The GDAL libraries are used to generate a georectified image from the original image at . An archive of the georectified image and associated files is created at . The new geographic extents and centroid of the georectified image are determined at and the metadata database is updated to reflect the changes. A job is then created to either sample the image bands at or determine the extents of the image and centroid in . The image bands are then reordered if needed in .

The critical section is controlled using a global thread lock so that only a single thread may enter the critical section. This section prevents contention when accessing the job stack. Once setting the thread lock the thread establishes a connection to the metadata database at . Then the thread evaluates the job stack at . If the stack is empty then the thread searches the database at for new jobs that have been added adding the new jobs to the job stack at . Once all new jobs from the database have been added to the job stack the thread unlocks the thread lock and disconnects from the database at and returns to the thread queue at .

When there is a job in the job stack the thread pops a job from the stack at i.e. reads the last job entered in the stack and then removes it from the stack and unlocks the thread lock. Next the thread evaluates at which function to execute based on the location in the processing flow of . The function updates the database at and if additional jobs are required for processing at adds the new jobs to the job stack at . Once the function has completed the thread disconnects from the database at and returns to the thread queue at .

To conclude the invention described herein is used to facilitate the tasking of sensor resources and process web optimize and share geospatial imagery and radar information with federal state and local emergency managers in a timely bandwidth efficient manner. The invention eliminates long delays in dissemination of imagery to the field which improves situational awareness and allows emergency responders to better perform their tasks. For example pre incident imagery can be compared with post incident imagery to identify changes and determine location of damaged areas and damage to critical infrastructure. For example the imagery can be used to direct rescue crews to areas needing assistance and to identify routes into these areas so that the crews are not sent to unaffected areas or to areas where crews have already arrived which saves valuable time and resources. Also the images can be used to focus resources where they are needed and to alert and prepare crews on what to expect before arriving. For example the expected path of a tornado can be plotted and a resulting map given to responders to establish search rescue and recovery efforts.

The invention has been described with respect to rapidly disseminating imagery to civilian emergency first responders. In addition the invention can be used to improve situational awareness for warfighters. For example this system could be installed on an airborne imaging platform directly and disseminate geospatial data through localized data networks to ground forces allowing those forces to develop detailed plans for time critical operations with the most up to date imagery intelligence. This system can also be used by UAS Unmanned Aircraft Systems ground stations to disseminate geospatial imagery and radar products from their remote locations to forward forces using low bandwidth communications such as satellite communications SATCOM . Also a video mosaicing technology can be incorporated to create georectified full motion video FMV mosaics of the earth from altitude generating a larger high fidelity coverage of the earth in an efficient manner for time critical intelligence collections.

The invention described herein has also been described as pertaining to applications for information sharing between systems hosted on compartmentalized networks. These compartmentalized networks require data to flow in one direction for replication on the adjacent network. The RIDS enterprise server can subsequently be used to push data to a subsequent RIDS enterprise server located on another network enclave in a different geographic location for use in globally distributed geographic information systems GIS warehouses. This process can happen serially or in parallel and can support numerous horizontally or vertically integrated server structures. In parallel the replication of data occurs on a geometric progression based on the concurrency of data pushes. The invention can also support numerous RIDS remote servers pushing data to either a single or numerous RIDS enterprise servers.

Thus it will be appreciated by those skilled in the art that modifications and variations of the present invention are possible without departing from the principles and spirit of the invention the scope of which is defined in the appended claims and their equivalents.

