---

title: Systems and methods for implementing haptics for pressure sensitive keyboards
abstract: Systems and methods are employed for implementing haptics for pressure sensitive keyboards, such as the type of keyboards having keys that produce alternating digital open/short signals that emulate actuation of conventional “momentary on” digital keys. The disclosed systems and methods may be implemented to provide haptics for both touch typing and variable pressure sensitive operation of a pressure sensitive keyboard. Users of a variable pressure keyboard may be provided with a variable pressure haptics effect, e.g., to enable the user to intuitively understand from the haptics vibration produced by the key how much pressure they are applying to a given key at any given time. Vibration characteristics (e.g., vibration rate, vibration waveform pattern, etc.) of a given pressed key may be varied in real time in coordination with, or in response to, corresponding changes in user pressure applied to the same given key.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09342149&OS=09342149&RS=09342149
owner: Dell Products LP
number: 09342149
owner_city: Round Rock
owner_country: US
publication_date: 20131002
---
This application is a continuation of pending U.S. patent application Ser. No. 12 930 125 filed on Dec. 29 2010 and entitled Systems And Methods For Implementing Haptics For Pressure Sensitive Keyboards which itself is a continuation in part of U.S. patent application Ser. No. 12 802 468 titled Systems And Methods For Implementing Pressure Sensitive Keyboards by Mark A. Casparian et al. filed on Jun. 8 2010 which itself is a continuation in part of U.S. patent application Ser. No. 12 316 703 titled Keyboard With User Configurable Granularity Scales For Pressure Sensitive Keys by Mark A. Casparian et al. filed on Dec. 16 2008 the entire disclosure of each of the foregoing applications being incorporated herein by reference.

The techniques described herein relate to systems and methods for keyboards and more particularly for implementing haptics for variable pressure sensitive keyboards.

As the value and use of information continues to increase individuals and businesses seek additional ways to process and store information. One option available to users is information handling systems. An information handling system generally processes compiles stores and or communicates information or data for business personal or other purposes thereby allowing users to take advantage of the value of the information. Because technology and information handling needs and requirements vary between different users or applications information handling systems may also vary regarding what information is handled how the information is handled how much information is processed stored or communicated and how quickly and efficiently the information may be processed stored or communicated. The variations in information handling systems allow for information handling systems to be general or configured for a specific user or specific use such as financial transaction processing airline reservations enterprise data storage or global communications. In addition information handling systems may include a variety of hardware and software components that may be configured to process store and communicate information and may include one or more computer systems data storage systems and networking systems.

Many information handling systems use keyboards to obtain user input. Some prior keyboard solutions have provided pressure sensitive keys. The most common technique to provide pressure sensitive keys is to use variable resistance sensing techniques to provide an indication of the pressure applied by a user to a key. Variable capacitance sensing has also been utilized in some prior art products such as console gamepad controllers.

Haptics of conventional keyboards rely on the collapse of a rubber dome to provide the physical click sensation felt during the make connection. This is what keyboard users are accustomed to feeling using conventional standard keyboards while touch typing. Conventional variable pressure sensitive keyboards have also employed a standard rubber dome style key mechanism that incorporates the conventional touch type of haptics. Once a user provides enough finger force to provide the make connection or collapse of the rubber dome the finger is bottomed out against the back surface of the keyboard housing. At this point as the user provides additional finger pressure the circuitry reacts accordingly by auto typing at a speed corresponding to the amount of force applied.

A full size USB peripheral keyboard has been developed that employs the use of a standard rubber dome style key mechanism. This keyboard incorporates the touch typing haptics provided by conventional rubber dome keyboard solutions. Once a user provides enough finger force to provide the make connection or collapse of the rubber dome the bottom side of the rubber dome is pressed against the back surface of the keyboard housing. At this point as the user provides additional finger pressure the circuitry reacts accordingly by auto typing at a variable speed corresponding to the amount of force applied.

Force feedback game controllers on the market today incorporate feedback via piezo motors that have an off center weight attached to the spindle. When the piezo motor is spinning this offset weight produces a vibration that shakes the entire game controller device. Touch screens such as found on some conventional cellphones and smartphones employ the use of piezo transducers to vibrate the entire screen of the device to provide the user feedback as to when they are touching. Haptics controllers are available that provide the ability to store multiple vibration waveforms and allow a user to select and output any one waveform at a time.

Systems and methods are disclosed herein for implementing haptics for variable pressure sensitive keyboards such as the type of keyboards having variable pressure sensitive keys that produce alternating digital open short signals that emulate actuation of conventional momentary on digital keys. The disclosed systems and methods may be implemented to provide haptics for both touch typing and variable pressure sensitive operation of a variable pressure sensitive keyboard. In one embodiment the disclosed systems and methods may be implemented to provide users of a variable pressure keyboard with a variable pressure haptics effect e.g. to enable the user to intuitively understand from the haptics vibration produced by the key how much pressure they are applying to a given key at any given time. For example vibration characteristics e.g. vibration rate vibration waveform pattern etc. of a given pressed key may be varied in real time in coordination with or in response to corresponding changes in user pressure applied to the same given key. In one embodiment each haptics enabled key of the keyboard may be provided with a respective haptics actuator e.g. piezo transducer that is configured to independently impart a haptics motion e.g. vibration only to the corresponding single key without imparting a user detectable haptics motion to any other keys including adjacent keys of the keyboard or to the remainder of the keyboard itself. In one embodiment a variable intensity haptics motion may be imparted to a pressed key of a variable pressure sensitive keyboard such that the pressed key moves e.g. vibrates with a subtle ticking of the keycap felt by the finger with a relative intensity that corresponds to the amount of pressure applied by the user s finger to the particular pressed key.

In another embodiment the disclosed systems and methods may be implemented to provide a keyboard that includes both momentary on e.g. digital keys and variable pressure sensing e.g. analog keys in a manner such that both the momentary on keys and the variable pressure sensing keys feel the same when pressed by a user i.e. both types of keys have the same force displacement curve . In such an embodiment a mixed keyboard of momentary on and variable pressure sensing keys may be implemented that provides a traditional touch typing feel to users across the keys of the keyboard. In yet another embodiment signal processing for haptics and pressure sensitive key toggling may be performed in parallel paths to reduce the latency from finger press to resulting key vibration and toggling i.e. resulting letters typed on computer display . Further the haptics waveform address may be written to require a reduced number of clock cycles than otherwise required e.g. such as when using I2C based communications. The disclosed systems and methods may be implemented both for full size external peripheral keyboards and for notebook keyboard arrays which are focused on thin profiles minimal Z height .

In one embodiment the disclosed systems and methods may be implemented to provide haptics for one or more individual variable pressure sensitive keys of keyboards that are implemented using variable capacitance variable conductance variable resistance or other suitable pressure sensitive measurement methodology to generate an alternating open short digital signal representative of the amount of pressure applied to a given key at any given time. In the implementation of such keyboards the open short digital signal may be supplied as a signal representative of applied key pressure to a legacy keyboard controller or other processing device of an information handling system that is configured to measure keyboard input based on momentary on signals. In one exemplary embodiment the disclosed systems and methods may be advantageously implemented to provide a drop in replacement keyboard for a standard type momentary on keyboard of an information handling system e.g. portable information handling system such as a notebook computer that employs a conventional keyboard controller configured to receive momentary on digital key signals and no analog keyboard signals. Other examples of portable information handling system include but are not limited to MP3 players portable data assistants cellular phones tablet computers etc.

The disclosed systems and methods may be implemented in one exemplary embodiment to achieve fast response time and or for interfacing with a legacy keyboard controller. In this regard pressure sensing digital output circuitry haptics actuation circuitry e.g. piezo transducer circuitry and related haptics control circuitry e.g. including controller microcontroller or other processing device s may be implemented in a manner that supports any number of pressure sensitive keys is compatible with a legacy keyboard controller and device drivers and using little additional power.

In one exemplary embodiment falling edge triggered digital interrupt inputs may be provided to a processing device of pressure sensing digital output circuitry rather than feeding analog signals to an ADC. This advantageously allows improved response time to a user s input e.g. finger pressure . Further circuitry may be provided in another exemplary embodiment to interface any number of variable pressure sensitive keys to a legacy keyboard e.g. 8 bit microcontroller and 24 bit interface to a legacy keyboard matrix . Low power capability may be provided by using pressure sensing digital output circuitry that processes code in an interrupt service routine ISR whenever an interrupt due to application of pressure on a pressure sensitive key is sensed on any of the digital inputs of the circuitry and then goes to sleep i.e. low power state while it continues to actively monitor its interrupt digital inputs for any other event. Haptics controller circuitry may also be provided that remains in low power sleep mode between variable key press events. Thus the pressure sensing digital output circuitry and haptics controller circuitry only monitor trigger events run code when trigger events are detected and then go back to sleep again until another trigger event is detected. This translates into ultra low power consumption for this embodiment which is advantageous for drop in replacement keyboard arrays that are capable of operating on an existing information handling system power supply.

Advantageously the disclosed systems and methods may be implemented in another embodiment to provide a drop in replacement of a current production keyboard array for an information handling system such as a notebook computer e.g. for build to order specification after market replacement in an existing previously built information handling system updated production run etc. without requiring any mechanical electrical device driver or operating system OS changes to the existing information handling system. In such an embodiment the pressure sensitive keys pressure sensing digital output circuitry haptics actuation circuitry and haptics control circuitry may be integrated into a replacement keyboard assembly that is mechanically and electrically compatible with the information handling system host equipment e.g. including legacy keyboard controller and using native OS keyboard drivers to operate the keyboard. The disclosed systems and methods may also advantageously be implemented in one embodiment to provide variable pressure sensitive and haptics key capability for use with older games that only accept user key toggling because no special code patches are required to allow applications running on a host information handling system to understand keyboard input from the variable pressure sensitive keys of the disclosed keyboard systems i.e. the keyboard input to the game is understood by the game as input from a legacy USB keyboard.

The disclosed variable pressure sensitive keyboard measurement methods and systems may be optionally implemented in one exemplary embodiment with user configurable haptics enabled variable pressure sensitive keys and techniques for controlling these keys for keyboards. In such an embodiment user configuration information including information for user configurable granularity scales and or haptics vibration waveforms can be communicated from a host system to the keyboard and stored for later use by a keyboard controller or other processing device associated with the keyboard to control the operation of the pressure sensitive keys. Alternatively such user configuration information may be employed by a software application operating on the host system that communicates with a keyboard controller to control the operation of the pressure sensitive keys. Either way greater control of the pressure sensitive keys and or haptics vibration of these keys can be provided. This configurability is of particular use for applications such as where the keyboard is being used for gaming by a user running a gaming application on an information handling system. In particular the user can configure the granularity scale and or haptics waveforms for each pressure sensitive key so that each key can provide a desired gaming response. In addition different configuration files can be stored so that a user can select and use different configurations for different games and or different users can select and use different configurations based upon their personal preferences.

In one respect disclosed herein is a keyboard system including one or more pressure sensitive keys configured to provide analog output signals corresponding to each given one of the pressure sensitive keys that is representative of the level of pressure applied to the given key pressure sensing interface circuitry coupled to receive the analog output signal from each given one of the pressure sensitive keys the pressure sensing digital output circuitry being configured to provide key pressure indication signals representative of at least two respective different levels of pressure applied to the corresponding given one of the pressure sensitive keys the at least two different levels of pressure including at least first and second different levels of pressure and haptics actuation circuitry coupled and configured to impart a variable haptics motion characteristic independently to each given one of the pressure sensitive keys based at least in part on the key pressure indication signals provided by the pressure sensing interface circuitry corresponding to the pressure level applied to the corresponding given one of the pressure sensitive keys such that a first haptics motion is imparted to a given one of the pressure sensitive keys at the first pressure level applied to the given one of the pressure sensitive keys that is different than a second haptics motion that is imparted to the given one of the pressure sensitive keys at the second pressure level applied to the given one of the pressure sensitive keys.

In another respect disclosed herein is a method of imparting haptics motion including providing one or more pressure sensitive keys producing an analog output signal for each given one of the pressure sensitive keys when depressed by a user the analog output signals being representative of the level of pressure applied to the given pressure sensitive key by the user providing one or more key pressure indication signals based upon the analog output signal the one or more key pressure indication signals being representative of at least two respective different levels of pressure applied to the given pressure sensitive key by the user the at least two different levels of pressure including at least first and second different levels of pressure and imparting a variable haptics motion characteristic independently to each given one of the pressure sensitive keys based at least in part on a provided key pressure indication signal that is representative of pressure applied to the given pressure sensitive key by the user such that a first haptics motion is imparted to the given one of the pressure sensitive keys at the first pressure level applied to the given one of the pressure sensitive keys that is different than a second haptics motion that is imparted to the given one of the pressure sensitive keys at the second pressure level applied to the given one of the pressure sensitive keys.

For purposes of this disclosure an information handling system may include any instrumentality or aggregate of instrumentalities operable to compute classify process transmit receive retrieve originate switch store display manifest detect record reproduce handle or utilize any form of information intelligence or data for business scientific control or other purposes. For example an information handling system may be a personal computer a server computer system a network storage device or any other suitable device and may vary in size shape performance functionality and price. The information handling system may include random access memory RAM one or more processing resources such as a central processing unit CPU or hardware or software control logic ROM and or other types of nonvolatile memory. Additional components of the information handling system may include one or more disk drives one or more network ports for communicating with external devices as well as various input and output I O devices such as a keyboard a mouse and a video display. The information handling system may also include one or more buses operable to transmit communications between the various hardware components.

As described herein systems and methods are provided to implement haptics for one or more individual keys of an information handling system keyboard e.g. such as a variable pressure sensitive keyboard using haptics actuation circuitry e.g. such as piezo transducer circuitry that is controlled by haptics control circuitry. For example the solutions described herein may be employed to enable haptics for keyboard keys including those keys used in variable pressure sensitive keyboards such as described in U.S. patent application Ser. No. 12 316 703 filed Dec. 16 2008 and U.S. patent application Ser. No. 12 802 468 filed Jun. 8 2010 each of which is incorporated herein by reference in its entirety for all purposes. Such variable pressure sensitive keyboards may be employed for example in gaming applications and information handling systems that are specifically designed for gaming applications. However the disclosed systems and methods are useful for any other keyboard applications in which variable pressure sensitive keys may be employed.

As further described herein haptics may be provided for pressure sensitive keys that produce a digital open short signal that is representative of the amount of pressure applied to a given key at a given time. Conventional keyboards typically use rubber dome based keys that provide a momentary on switch contact via a make or break contact with two layers of flex PCB printed circuit board with a raw exposed conductor pad on both layers that come into contact with one another upon a key press. In gaming applications gamers typically use the W A S and D keys for travel movements forward left backward right respectively Q and E keys are typically used for strafing left and right respectively and the spacebar key is used for jumping although gaming keys are not restricted to these particular keys or functions. Rather than tapping a button a few times to make a gradual turn or several rapid taps to make a sharp turn it is more natural for a user to apply more pressure on the A or D keys to pull a tighter turn and or turn with gradual or sharpness of turn desired proportionally to the amount of finger pressure applied to the respective keyboard key. Such capability is not only more intuitive but allows the user easier granular control over game play input such as gradually turning sharp turn variable speed of travel movement slow walk spring the rate of fire of a gun variable degree of the amount of strafing to the left or right but not limited to these examples. The advantageous solutions described herein enable haptics to be employed in one embodiment with variable capacitance measurement for implementing pressure sensitive keys and may be optionally implemented with user configurable granularity scales for these pressure sensitive keys to allow enhanced user control of how keys respond in a gaming application and or any other desired application. Further information on the use of user configuration information such as user configurable granularity scales may be found in U.S. patent application Ser. No. 12 316 703 filed Dec. 16 2008 which is incorporated herein by reference in its entirety.

There are many kinds of game genres. The features and ways to utilize variable pressure control vary from game to game or from genre to genre. For example in a first person shooter FPS game a particular variable pressure button may be used to control the speed of fire single shot multiple shots faster multiple shots machine gun rapid fire . For real time strategy games the variable finger pressure sensitivity of the key may mean something completely different. With a variety of game genres and even within a particular genre there are many game titles where the user will want to save their keyboard s pressure sensitive button definitions and or haptics waveform motion characteristics in a profile for the game even with the ability to categorize by game genre. It is also desirable to allow the user to configure how the pressure sensitive button and haptics waveform motion should work. For example the user may want the full range of gradual variable control. In another instance the user may want this button to act like a momentary on off switch button. In still another instance the user may want the button to operate as four 4 possible positions e.g. slow walk fast walk jog sprint depending on the amount of pressure applied by the finger. This user configuration information and this user configurable granularity control in particular as described below can be communicated to and stored by the keyboard to provide the user this capability of configuring how the keyboard pressure sensitive keys and or haptics waveform motion for individual keys will operate.

The keyboard embodiments described herein may have from one to all of their keys controlled via pressure sensitive sensors e.g. such as variable impedance or variable capacitance sensors and or may be provided with corresponding haptics control circuitry and haptics actuation circuitry for one or more of the individual variable pressure sensitive keys of the keyboard. As described in more detail below an injection molded rubber dome sheet and flex circuitry can be used in one exemplary embodiment to accommodate both pressure sensitive keys and traditional momentary on switch based keys and any one or more of which keys may also include haptics actuation circuitry.

For example using the disclosed systems and methods a typical 24 bit digital pathway can be used from the keyboard array to the keyboard s microcontroller for any momentary on keys. Typically a keyboard microcontroller has three dedicated 8 bit digital input ports to take in this data though it need not be limited to this. Current keyboards use rubber dome momentary on switches. The keycap has a rod or chimney stack on its bottom side. There is also a nipple or actuator on the bottom side of the rubber dome. As the user presses down on the keycap the chimney stack presses down on the rubber dome which in turn presses the nipple actuator down on the flex circuitry beneath it. This pressing motion brings flex circuitry from one signal layer in direct contact with flex circuitry in a second signal layer. As a result the two connections make contact signaling to the microcontroller that the key has been pressed the momentary on signal . These rubber dome momentary on switches can be used for the non pressure sensitive keys for the keyboards described herein.

In one exemplary embodiment pressure sensitive keys may be configured to use rubber dome keys with conductive half spheres or half domes located on the underside of the rubber domes. In such an embodiment the following principle may be employed as the conductive sphere is pressed harder against a printed circuit board PCB or flexible PCB underneath it the conductive sphere s surface area contact increases with pressure thus increasing the capacitance of that contact in relationship with a nearby charged trace. The capacitance can be measured and sent to a keyboard controller as alternating open short alternating off on digital signals representative of the measured capacitance value without the need for further analog to digital signal conversion. The embodiments disclosed herein therefore can use analog based variable pressure keys and incorporate them with digitally based momentary on switches of typical keyboards to make a keyboard that supports both regular make break keys and keys with variable finger pressure sensitivity and at the same time that is compatible with legacy momentary on measurement keyboard controllers such as are typically found in information handling systems such as notebook and desktop computers. This variable finger pressure sensitivity is particularly useful for gaming applications where there is a consistent need for more intuitive gaming interfaces.

For keyboards with both types of keys signal inputs from both types of keys can be provided in one embodiment to a keyboard controller via a digital input block. For example digital input can be provided directly to the keyboard controller by the typical keyboard array of momentary on switches. These are the keys that operate as either switch on or off essentially providing a digital 1 or 0 back to the microcontroller. Capacitive sensing or other key pressure sensing circuitry can also be present for providing alternating open short digital input signals for the keyboard controller that are representative of the amount of pressure applied to a given pressure sensitive key at any given time. At the same time the keyboard controller can also support any number of digitally based momentary on switch based keys. The capacitive sensing or other key pressure sensing circuitry may also provide key pressure indication signals e.g. as a digital output signals or other suitable signal type to haptics control circuitry that are representative of the amount of pressure applied to a given pressure sensitive key. The haptics control circuitry may be configured to in turn produce a haptics control signal that corresponds to the pressure level i.e. amount of force applied to the given pressure sensitive key e.g. as a vibration waveform having a vibration intensity corresponding to the pressure level . The haptics control circuitry may provide the haptics control signal to haptics actuation circuitry that will be described further herein.

In the practice of the disclosed systems and methods pressure sensing measurement circuitry e.g. such as capacitive sensing digital output circuitry and corresponding haptics control circuitry may be for example embedded or integrated within a keyboard controller though it may also be located external to the microcontroller as well. In the latter case a drop in keyboard having both conventional momentary on and pressure sensitive keys as well as haptics control circuitry and associated haptics actuation circuitry e.g. including piezo transducers for one or more of the keys may be provided that has digital outputs for both momentary on and pressure sensitive types of keys that are compatible with a legacy digital keyboard controller. This capability may be advantageously employed for example to enable a build to order methodology in which either type of keyboard i.e. traditional keyboard with only momentary on keys or gaming keyboard with at least some pressure sensitive and haptics enabled keys may be selectively assembled to a common information handling system notebook chassis or common desktop keyboard chassis having a legacy keyboard controller e.g. based on details of a specific customer order.

In one embodiment for example the pressure sensitive keys may be variable capacitance pads that are coupled to provide an analog signal input to capacitive sensing digital output circuitry available from Texas Instruments of Dallas Texas and having part number MSP430F2111. However any other type of suitable capacitive sensing digital output circuitry may be employed including for example any circuitry that uses RC discharge time to measure sensor capacitance as described in U.S. Pat. No. 3 936 674 which is incorporated herein by reference in its entirety. The capacitive sensing digital output circuitry may be further optionally provided integrally or separately with signal switching circuitry e.g. switch circuitry configured to interface with the legacy keyboard matrix array e.g. 16 columns 8 rows which require current sinking capability as well as to provide for capability of providing pressure sensitivity to all keys in a keyboard.

Examples of suitable signal switching circuitry for interfacing with a legacy keyboard controller include but are not limited to optoisolators or MOSFET switches that interface with the keyboard controller in a manner as will be described further herein. The momentary on switch based keys input when present can be sent via for example a 24 bit digital path to the digital I O of the keyboard controller e.g. legacy 8051 based microcontroller available from sources such as Intel Infineon Technologies NXP Silicon Laboratories etc. The keyboard controller can also have an optional embedded I2C master slave block used to talk to peripheral ICs integrated circuits for additional functionality. A serial EEPROM can also be optionally provided as part of the keyboard to communicate with the keyboard controller for example to provide the VID vendor identification and DID device identification information to the microcontroller via the I2C bus.

It is further noted that for an electronic lighting control embodiment where aspects of key lighting are implemented for the keyboard a combination pulse width modulator PWM and LED light emitting diode driver integrated circuit can be used such as part number MAX6964AEG available from Maxim. Such integrated circuits for example can receive commands from a host system such as a personal computer through the keyboard controller to drive RGB red green blue LEDs for keyboard lighting as instructed by the host system. The personal computer or host system for example can be configured to communicate with the keyboard controller through a USB connection and the keyboard controller can be configured to convert these commands into a serial I2C stream provided to the PWM and LED driver integrated circuit which can in turn pulse width modulate the correct amount of light dimming and color to be provided for the keyboard lighting.

The haptics control circuitry may be for example a MAX11835 Rev. 2 chip available from Maxim Integrated Products Inc. of Sunnyvale Calif. that is capable of storing up to 16 different vibration waveforms and which may be coupled to receive key pressure indication signals e.g. as high low digital signals from the pressure sensing digital output circuitry e.g. TI MSP430F2111 controller . The haptics control circuitry may in turn provide haptics control signals e.g. in the form of selected vibration waveforms having a vibration intensity corresponding to the pressed key pressure level to haptics actuation circuitry of the pressed key. The haptics actuation circuitry provided for each key may be for example a piezo transducer such as KBS 20DA 3AN available from Kyocera Corporation of Kyoto Japan or may be another type of piezo transducer e.g. available from sources such as CUI Inc. of Tualatin Oreg. or Murata Manufacturing Company Ltd. of Kyoto Japan .

As described further below a common injection molded silicon rubber sheet can be used with built in rubber domes and a common flex circuitry to support both digital momentary on switches and pressure sensitive sensors e.g. variable resistance or variable capacitance . For variable capacitance sensing as the user s finger applies pressure to the plastic keycap it can be configured to press on the depressible rubber dome which has a conductive spherical shaped actuator on the bottom side. As the keycap is pressed the conductive spherical shaped actuator comes into contact with one plate of a capacitor. An insulating layer is located above a second plate for the capacitor so that it is isolated from the first plate. Thus the conductive actuator does not contact the second plate and a capacitance develops between the two plates. As the user puts more pressure onto the keycap more surface area of the conductive material from the conductive actuator will lie over first plate thereby increasing the capacitance between the two plates.

Haptics actuation circuitry may be provided for one or more keys of a variable pressure sensitive keyboard using any suitable methodology. For example a piezo transducer may be mounted to the bottom keyboard housing in position beneath the bottom second capacitor plate of a variable capacitive sensing keyboard such as of the type described above. Alternatively a piezo transducer may be molded into a keycap or mounted on the underside of the keycap e.g. in a manner that does not interfere with transmittal of light for backlighting the individual keys.

In operation of one embodiment of the keyboard the amount of finger pressure applied by a user to a given key is sensed by the pressure sensing e.g. variable capacitance sensing digital output circuitry and is digitally provided to the keyboard controller via switching circuitry e.g. optoisolator MOSFET etc. that provides alternating open short signal current pull down signals to the keyboard controller in a manner that emulates toggling of a conventional momentary off on digital key. The pressure sensing digital output circuitry may also simultaneously provide a digital signal e.g. high low digital signal representative of user applied finger pressure to the haptics control circuitry which in turn provides a haptics control signal representing a haptics motion e.g. vibration intensity corresponding to the amount of user pressure applied to the pressed key.

In an optional embodiment configuration information provided by a user may be employed to adjust the operation of the pressure sensitive keys e.g. via the pressure sensing circuitry other processing device or software executing on a host system to which the keyboard is coupled. This user configuration information for example can optionally adjust the sensitivity and output levels generated by the Pressure Sensing Interface Circuitry based upon the pressure sensitive signals received with respect to the pressure sensitive keys as described in U.S. patent application Ser. No. 12 316 703 filed Dec. 16 2008 which is incorporated herein by reference in its entirety. The keyboard controller can then in turn provide output signals to the host system that indicate pressure amounts. The host computer can then use these keyboard output signals with respect to particular software application functions being operated by the host computer. For gaming applications such pressure sensitive functions may include the variability in the speed of travel slow walk trot run etc. the amount of turning slow fast etc. the amount of strafing for a first person shoot game the amount of braking for a vehicle race game the degree of the rate of fire the height of one s jump and or any other desired variable gaming feature.

When an analog key is depressed an indication of the force or extent to which it is depressed is provided to pressure sensing interface circuitry that in the illustrated embodiment includes pressure sensing digital output circuitry and switching circuitry . Pressure sensing interface circuitry in turn provides a key pressure indication signal that indicates the force or extent to which the key is depressed to haptics control circuitry which is coupled to actuate haptics motion to the pressed analog key by a haptics control signal . Also illustrated in is optional haptics controller that may be present in haptics control circuitry in some embodiments and which is further described herein. Pressure sensing interface circuitry and or haptics control circuitry may each be provided in one exemplary embodiment as part of the keyboard device body. However digital input block and one or more components of pressure sensing interface circuitry and or haptics control circuitry may alternatively be integrated within a microcontroller that is operating as the keyboard controller and or as part of the host system to which the keyboard is connected if desired. The digital input block and one or more of the components of pressure sensing interface circuitry and or haptics control circuitry could also be implemented with external circuitry as well.

Still referring to the pressure sensing digital output circuitry includes a pressure sensing block that receives an analog signal representative of the pressure applied to each of analog keys and then outputs an alternating key pressure indication signal in the form of a high and low high low digital output bit stream signal having a frequency that is representative of this pressure being applied to each of analog keys to a corresponding switching element of switching circuitry e.g. optoisolator transistor such as MOSFETs etc. . Each switching element of switching circuitry responds to a digital signal corresponding to a given analog key by providing a toggled key pressure indication signal in the form of alternating open short off on digital signal to a corresponding intersection point in the 16 8 key matrix which corresponds to that analog key in a manner as described further herein. Pressure sensing block also outputs an alternating high and low high low digital output bit stream signal as a key pressure indication signal carrying a bit stream that is representative of this pressure being applied to the analog key to haptics control circuitry . It will be understood that any type of signal e.g. signals and that is representative of pressure applied to a given key may be characterized as a key pressure indication signal.

It will be understood that the particular embodiments illustrated herein are exemplary only and that the components and function of pressure sensing interface circuitry may be implemented using any one or more circuitry components suitable for receiving analog signals representative of key pressure from pressure sensitive keys and providing corresponding alternating open short digital output signals having a toggled frequency that is representative of key pressure from pressure sensitive keys that is suitable for example for digital input to a legacy keyboard controller and for also providing a signal representative of key pressure from pressure sensitive keys to haptics control circuitry . Further the components and function of haptics control circuitry may be implemented using any one or more circuitry components suitable for receiving signals representative of key pressure from pressure sensing interface circuitry and for providing a haptics control signal to cause haptics actuation circuitry of analog keys to produce a variable haptics motion characteristic corresponding to the pressure level applied to the given pressure sensitive key e.g. as a vibration waveform having a particular vibration intensity and or frequency that corresponds to the currently applied real time key pressure level . It will also be understood that one or more pressure sensitive keys may be haptics enabled using haptics actuation circuitry that is configured to impart haptics motion to the respective one or more pressure sensitive keys based on key pressure indication signals received from any suitable circuitry configuration e.g. received from either haptics control circuitry or alternatively received directly from pressure sensing digital output circuitry e.g. as signals and or without requiring the presence of haptics control circuitry .

The control circuitry within the keyboard controller is coupled to receive on off signals from the digital input block . The control circuitry processes this key information and is connected to an output communication interface so that this key information can be communicated to external devices such as host components of an information handling system through communication path . In addition external devices can optionally communicate control and or other configuration information to the keyboard controller through this same output communication interface through communication path . Examples of possible information handling system components may be found described in U.S. patent application Ser. No. 12 586 676 filed Sep. 25 2009 which is incorporated herein by reference in its entirety.

It is noted that the output communication interface and communication path can take a variety of forms. The communication path can be a wired communication path or a wireless communication path as desired. With respect to personal computer systems such as desktop computers and laptop computers the output communication interface will often be a Bluetooth interface if a wireless interface is desired and will often be a USB universal serial bus interface if a wired interface is desired. However it is again noted that any desired communication interface can be utilized. It is further noted that the keyboard controller and the control circuitry can be implemented as a microcontroller e.g. legacy 8051 based microcontroller or custom microcontroller that runs firmware stored on a memory device associated with the keyboard controller and or control circuitry .

It is also noted that the user configuration information can be optionally stored in random access memory RAM or other memory storage that is associated with pressure sensing circuitry either internally or externally . Thus the configurable analog key control parameters can be stored for example on a RAM device in the keyboard or on the host system e.g. on a hard drive and can provide a wide variety of configurable parameters that can be adjusted by a user through an application programming interface API to a software utility application that for example has a graphic user interface GUI to allow a user to edit the parameters through the software utility. For example the user configuration information may be stored for example in nonvolatile or volatile memory on board the keyboard system . Alternatively the user configuration information may be stored on the host system or other device that is coupled by communication path to output interface off keyboard controller. Either way single and or multiple different user configuration files and or multiple game or application configuration files may be stored allowing a user to select the applicable or desired keyboard configuration file depending on the game or application being used by the user and or depending upon the particular user using the keyboard at the time in a manner as described in U.S. patent application Ser. No. 12 316 703 filed Dec. 16 2008 which is incorporated herein by reference in its entirety.

As shown in base may be configured in this embodiment to contain the corresponding separate haptics actuation circuitry of each separate key structure in a manner described further below. In such a configuration each haptics enabled key structure may be characterized as a separately acutatable independent mechanical key structure mechanism with corresponding separate key output circuitry and or haptics actuation circuitry i.e. that is not implemented using membrane key output elements of a multi key membrane style keyboard. However it will be understood that it is possible that in other embodiments multi membrane style keys may alternatively by employed.

In the layered structure of base represents the bottom of the layered structure and can be made of a material that can support the key structure such as a hard plastic material that may also serve as the bottom keyboard housing material. A flexible PCB printed circuit board is then provided on top of the base . The PCB includes circuit traces or connections that provide for electrical signals to be generated and communicated when keys are depressed. For example circuit connection is used to provide digital output and circuit connection pads and are used to provide the analog output . The next layer is flexible insulator such as a flexible PCB without circuit connections. The next layer is another flexible PCB that can include circuit traces or connections that work in conjunction with the connections on PCB to provide for electrical signals to be generated and communicated when keys are depressed. For example circuit connection is used to provide the digital output . A relatively thin flexible layer can then be provided above PCB and can be made from an injection molded silicon rubber sheet. This flexible layer is configured to have a molded flexible rubber dome for each key. For example flexible dome is provided for analog keycap and flexible dome is provided for digital keycap . In one exemplary embodiment flexible dome may be co molded to the rubber dome sheet .

Still referring to the exemplary embodiment of haptics actuation circuitry in the form of a piezo transducer may be mounted to and optionally within base e.g. which may be a bottom plastic keyboard housing material structure . In this embodiment piezo transducer includes a metal plate for signal and ceramic capped electrode for ground . An example of such a piezo transducer is KBS 20DA 3AN available from Kyocera Corporation. As shown in piezo transducer may be mounted underneath the bottom most layer of flex circuitry yet on the upper or top side surface of base of the keyboard. In this embodiment piezo transducer is mounted on a raised piezo support structure that is protrudes upward within a cavity of the base e.g. such that the raised support structure is surrounded by a depression or valley area. In this embodiment raised piezo support structure is provided as a circular rib having a diameter that is less than the outer diameter of the metal plate of piezo transducer in a manner such that the outer diameter of the circular rib does not exceed the diameter of the inner circle ceramic capped electrode of piezo transducer . This allows the outer diameter structure of the piezo transducer e.g. metal plate with a varying electrical input pulse applied to it to flex e.g. contract expand or flap up and down without restriction in order to produce a vibration haptics motion for the key. In this embodiment the haptics vibration is up and down e.g. in a direction parallel to the up and down key travel direction of key cap that is illustrated in .

A raised piezo support structure may alternatively be provided in the form of a boss or combination of a boss and a rib. Further as shown in optional support ribs may be provided to ensure adequate support for the piezo transducer and to ensure that when the key is pressed that the flexible half dome structure presses against a flat bottom with adequate pressure distribution due to the ribs. This in turn may increase the reliability of piezo transducer by making it less prone to mechanical damage due to inadequate mechanical support from underneath. Optional support ribs may be shaped in such a way so as to provide mechanical support under ceramic capped electrode so that ceramic capped electrode substantially does not mechanically flex when pressed upon by flexible half dome structure . In one embodiment the diameter of raised piezo support structure may be equal or greater than the diameter of flexible half dome structure when pressed with maximal force so as to ensure substantially no physical damage to piezo transducer when pressed on by flexible half dome structure with a lot of force. In any case the raised piezo support structure is shaped and dimensioned to provide sufficient mechanical support to the piezo transducer to ensure no flexion when pressed upon by the overlying key structure while at the same time providing a solid bottom or base for the rubber dome key to press against to make the electrical connection i.e. to indicate a key press .

Piezo transducer may be mounted to raised piezo support structure using any suitable methodology e.g. adhesives such as epoxy or silicon mechanical mounting such as by press molding etc. In one embodiment piezo transducer may be mounted to raised piezo support structure using a dampening mounting structure e.g. such as 1 32 inch thick 3M Double Coated Polyethylene Foam Tape model 4492W having a conformable closed cell foam with a high strength acrylic adhesive that provides high adhesion strength to a wide variety of surface materials. In one particular exemplary embodiment a dampening mounting structure may be a 35 55 mil thick inch diameter double sided adhesive rubberized Glue Dot such as GlueDot model no. XD32 402 available from Glue Dots International an Ellsworth Adhesives Company Germantown Wis. Such a Glue Dot may be manufactured to have a high tack strength adhesive for industrial applications. It will be understood that such Glue Dot double sided adhesive products may be selected to have varying tack strength levels varying thicknesses from 12 mils to 100 mils and or custom made to meet specific mechanical needs of a given application. When employed a rubberized or dampening consistency of a mounting structure may be selected in order to dampen transmittal of the vibration of the piezo transducer through the piezo support structure to the base while at the same time allowing transmittal of the piezo transducer vibration through layers flexible half dome structure and flexible dome to the keycap and the user s finger when the keycap is pressed down by the user in the manner shown in to cause downward key travel of key cap relative to base . It will be understood that the thicknesses of dampening mounting structure may be varied to fine tune the degree of dampening required to obtain the desired degree of vibration in the key cap and or while dampening any vibration from entering back into the keyboard housing via base .

As shown in the height of the circular rib is less than the height of the top surface of base by a distance x that is equivalent to the combined thickness of piezo transducer and dampening mounting structure such that the top surface of piezo transducer is coplanar disposed in the same plane or parallel to top surface of base when piezo transducer and dampening mounting structure are assembled to piezo support structure as shown by dashed lines in . Such a configuration may be employed to ensure that all keycaps press downward against a surface which is disposed along a common plane for each keycap . As shown flex layer may be utilized to route piezo signals and via flex trace to haptics actuation circuitry .

For the digital key of an actuator is also provided underneath the dome that causes circuit trace to be engaged with circuit trace when the digital keycap is depressed. When circuit trace touches the circuit trace a signal is now active indicating the key was pressed causing a digital output to be generated. This digital output can be configured to provide a momentary on indication of whether or not the key has been depressed. The digital keycap can be made from hard plastic.

For the analog key the conductive and flexible half dome is provided to flex when depressed as described in more detail below to vary the capacitance associated between circuit pad and circuit pad when analog keycap is depressed. At the same time flexible half dome flexes to contact circuit pad through which haptics vibration motion is transmitted from piezo transducer when keycap is depressed. shows assembled keyboard embodiment with keycap so depressed. Notice that as pressure is applied to the key flexible half dome structure not only comes into contact with circuit pad but its surface area on insulator layer starts to increase due to the pressure. With a maximum pressure the half dome contact diameter of half dome on surface of insulator layer approaches that of the diameter of pad . As the contact surface area of the half dome on surface of insulator layer increases so does the capacitance as measured at signal . Flexible half dome may be resilient so as to return the depressed keycap to its unpressed condition when the keycap is no longer depressed.

Essentially pad and pad are the two plates of a capacitor. The variable capacitance between these two plates are measured from signal trace by sending this trace to capacitance reading circuitry. As stated below pad can be coupled to ground. It is noted that the conductive and flexible half dome can be made for example from a conductive rubber material that is conductive flexible and capable of reforming its shape after being depressed and released. Examples of suitable materials are discussed above. Further prior art techniques have made this material from a carbon impregnated rubber.

It will be understood that one or more keys of a keyboard assembly may be provided with haptics circuitry in a variety of alternative ways with key output circuitry implemented between a keycap and underlying haptics actuation circuitry that is mounted to and optionally within base in a manner described elsewhere herein. Furthermore different types of keyboard assemblies may be provide with haptics capability including both desktop information handling system keyboards and keyboards for portable information handling systems such as notebook computers. For portable information handling system keyboard assemblies the mounting of a piezo transducer or other haptics actuation circuitry to the keyboard base under the flex layers or other key output circuitry as described in relation to may not be a desirable option due to a different key structure that is often employed to maintain a low Z height profile for portable information handling system keyboards. Further for any type of under key lighted information handling system keyboard the haptics circuitry needs to be mounted in such a way that intervening opaque materials e.g. layers don t obstruct the light produced under the key used for backlighting the key.

As shown in a single layer disc type piezo transducer is mounted on the underside of keycap such that the larger diameter metal plate of the transducer is mounted against the keycap within a complementarily dimensioned recessed area e.g. adhered to and or mechanically mounted by sliding into grooves provided in the sides of recess as shown by the arrows in and with the smaller diameter ceramic electrode portion of the transducer facing downward toward a transparent or translucent flexible rubber dome structure which extends through an opening provided in a top flex circuit layer . A conductive and flexible half dome structure is provided to flex when depressed as previously described to vary the capacitance associated between circuit pad and circuit pad when analog keycap is depressed.

Still referring to a two wire flex circuit may be provided as shown to electrically connect the piezo transducer e.g. Kyocera Corporation Model No. KBS 20DA 3AN piezo transducer to the top flex circuit layer . Top flex circuit layer is typically printed with black ink and used in non haptics enabled keyboard assemblies only for purposes of blocking light from an underneath backlight element e.g. RGB LED single color LED etc. from bleeding through at locations between openings between backlit keys. In this embodiment the backlight element shines thru the side of a polycarbonate sheet which acts as a backlight light spreader to spread the backlight under many keys. However in the illustrated embodiment of this existing layer of flex circuit may be used to route signals between the haptics circuitry e.g. piezo transducer and haptics control circuitry which is described further herein.

As previously described and illustrated in piezo transducer or other type of haptics circuitry may be mounted into a recessed area that is molded into the bottom side of a keycap . This particular configuration allows for easier assembly in manufacturing provides protection to the piezo transducer from flexion and helps improve the reliability of the rubber dome by preventing it from getting accidentally punctured from any sharp edges on the piezo e.g. such as by solder connection to the wires or flex circuitry . However haptics circuitry may be mounted to the bottom side of a keycap using any other suitable methodology e.g. using double sided adhesive foam tape or an adhesive Glue Dot such as described in relation to . Further flex cable may be routed from the side of the key where the dual lever scissor action key switch pivots from connection between levers and to help avoid flex cable from getting accidentally pinched by the action of dual levers and when keycap is pressed by a user. In one embodiment an opening complementary to the outer dimensions of rubber dome may be formed in both levers and through which rubber dome upwardly extends such that the top surface of the rubber dome rests upon the bottom surface of ceramic electrode of piezo transducer . When a backlit keyboard is desired and an opaque piezo transducer is employed a light pipe may be optionally added to keycap to transfer backlight light as it shines through flex circuitry where there s no blank ink acting as an aperture control.

In the exemplary embodiment of a piezo transducer or other haptics circuitry may be molded as part of a multi piece keycap structure that is assembled together at the factory. As shown piezo transducer is mounted within a recessed area of keycap that is then molded to chimney stack which is in turn received within a complementary aperture of key guide . Piezo transducer is thus configured in a position in which it is allowed to flex or vibrate underneath the keycap lid once keycap is applied and sealed to the chimney stack with piezo transducer positioned therebetween. As shown flex circuit connects piezo transducer to underlying piezo control circuitry through access opening that is defined in a surface of the keyboard assembly through which key guide with chimney stack key guide downwardly extends to key activation circuitry that senses when each keycap is depressed downward with its respective chimney stack . In this regard each chimney stack spring loaded via a rubber dome located inside circular opening whereby cylindrical shaped chimney stack presses against the top surface of the rubber dome to return to a raised position when downward user key pressure is removed.

In the exemplary embodiment of a piezo transducer may be mounted within a recessed area of a chimney stack that is then molded to keycap with piezo transducer positioned therebetween. Chimney stack is in turn received as shown within a complementary aperture of key guide . Piezo transducer is thus configured in a position in which it is allowed to flex or vibrate underneath the keycap lid once keycap is applied and sealed to the chimney stack with piezo transducer positioned therebetween. As with the embodiment of flex circuit connects piezo transducer to underlying piezo control circuitry through access opening that is defined in a surface of the keyboard assembly through which key guide with chimney stack key guide downwardly extends to key activation circuitry that senses when each keycap is depressed downward with its respective chimney stack . In this regard each chimney stack is spring loaded via a rubber dome located inside square shaped opening whereby rectangular shaped chimney stack presses against the top surface of the rubber dome to return to a raised position when downward user key pressure is removed.

Referring to the exemplary key output circuitry embodiment of to measure the capacitance change plate two may be connected to ground and plate one may have a trace connected to it that is routed to an I O pin on pressure sensing digital output circuitry e.g. TI MSP430 controller . The conductive material for the capacitive actuator may either be impregnated into the rubber dome material or may be an external piece of material that is attached to the rubber dome via co molding mechanical snap in means via adhesive or a hot fusing method. Other methods for providing a conductive and flexible actuator can also be used.

As shown in more detail with respect to described below electrical pad is shaped like a donut with an insulative material in the middle. Circuit trace connects to the circuit pad through a via within the insulative material with the conductive pad being located in the middle of the insulative center of the donut area. Pad may be attached to a signal trace but the preferred method of embodiment has pad being coupled to a given charge such as being attached to ground. Due to insulator layer the conductive half dome may only make contact to circuit pad through the hole in the insulator .

As described further below as the conductive and flexible half dome makes contact with circuit pad and is deformed by pressure from the analog keycap the capacitance between pad and pad increases. As more pressure is applied to the analog keycap the half dome gradually deforms and flattens out on top of the insulator causing a larger conductive surface area to run parallel to pad . Effectively there are two parallel plates provided by pads and with a fixed thickness insulator dielectric between them. Pad has a fixed surface area as it is printed onto the PCB . However pad has a variable surface area or is a variable sized parallel plate due to the action of half dome as it is depressed. As the surface area of pad gradually increases due to action of half dome as greater force is applied to the analog keycap the capacitance between plates and gradually increases as well. This variable capacitance can be sensed measured and used as an indication of the pressure being applied to the analog keycap . When implemented using variable capacitance methodology the sensor may be implemented on the PCB directly. However it will be understood that haptics enabled keys may be implemented with other types of pressure sensitive keys e.g. via the use of force sensitive resistors or the conductive flexible half dome material both of which employ materials that change their electrical impedance with applied pressure using haptics circuitry and or haptics control circuitry described herein. Further it will be understood that conventional digital keys may be provided with haptics capability using systems apparatus and or methods described herein.

In one embodiment disclosed herein pressure sensitive capacitive keys may be configured to generate a variable indication of how hard a key has been depressed. In this regard is a diagram for different depressed states for the conductive and flexible half dome structure of . In its initial state the bottom edge of the half dome structure has a bottom edge position indicated by Line . As the key is depressed the half dome structure will move through the gap in the Flex PCB layer see and down towards insulator and connection pad on PCB . Line represents the bottom edge of half dome structure when it has been depressed some distance. Line represents the bottom edge of half dome structure when it has been depressed far enough to touch connection pad through the gap in insulator . It is also noted that bottom edge will have flattened out slightly due to this contact as shown with respect to Line . Line shows that the bottom edge of half dome structure will continue to flatten as it is depressed. And Line is a further indication of this flattening of the half dome structure . As stated above as the half dome structure is moved closer to connection pad half dome structure will touch connection pad and will then flatten out causing a larger surface area for electrical plate relative to electrical plate . As the surface area of the plate increases due to increased pressure on analog keycap the capacitance between pad and pad correspondingly increases. This change in capacitance C can be used as an indicator of the pressure that has been used to depress the key associated with the half dome structure . Connection pad can be coupled to pressure sensing block of pressure sensing digital output circuitry that operates to sense and measure the electrical information provided from connection pad .

In this exemplary embodiment pressure sensing digital output circuitry employs RC capacitive measurement methodology with falling edge event driven interrupt performed on a per pin basis. Information on RC capacitive measurement may be found for example in U.S. Pat. No. 3 936 674 which is incorporated herein by reference in its entirety. Using this methodology each capacitive pad through is charged and discharged via traces one at a time and the amount of time for the discharge of each corresponding pad is measured using a timer operating at a high speed e.g. timer operating at about 16 MHz or other suitable speed . Using this methodology the higher the capacitance the longer the discharge time thus providing a higher digital count output from the timer of digital output circuitry . In this regard as the depressible half sphere on the bottom side of the keycap of each capacitive pad is depressed by applied finger pressure the amount of surface area in contact increases thus resulting in an increased capacitance on the pad. According to the capacitance relationship as a plate surface area increases its capacitance increases.

In one exemplary embodiment pressure sensing digital output circuitry may be implemented by a TI MSP430F2111 microcontroller or other suitable circuitry that employs RC discharge time to measure the variable capacitance of each analog key as follows. In this exemplary embodiment each signal lines acts as a single input output I O line between a given falling edge triggered interrupt digital port P.X of pressure sensing digital output circuitry and a corresponding given analog key . The capacitive plate of each analog key is also coupled to ground through a resistor e.g. 6 M or other resistor value selected to provide sufficiently slow RC discharge time to provide the desired measurement resolution for the given application . In this configuration each signal line is employed to charge discharge and produce an interrupt when the voltage of the capacitor of analog key crosses a low voltage threshold. For example a given port P.X of a given I O line may be set to output high to charge e.g. with 500 nA charging current the capacitive plate of a corresponding analog key to near V and a free running timer of the pressure sensing digital output circuitry read to mark the start time. Then the given port P.X is set to input with negative edge interrupt enabled and the resistor coupled to the capacitive plate of the corresponding analog key discharges the capacitive plate of the analog key to ground during which pressure sensing digital output circuitry may go into low power mode to save power. When the voltage of the capacitive plate crosses an interrupt voltage Vdue to this discharge to ground an interrupt is generated which causes the free running timer to be read again and the elapsed time for discharge of the capacitive plate of the analog key from near Vto Vis calculated. Pressure sensing digital output circuitry may then return to high power mode. The discharge timer count of the capacitive plate of each analog key is proportional to its present capacitance which depends on the amount of pressure currently applied to the key . In one exemplary implementation multiple capacitor readings of a given analog key may be averaged to filter out common mode noise e.g. by using a charge cycle followed immediately by a discharge cycle and averaging the two values.

Still referring to the exemplary embodiment of pressure sensing digital output circuitry provides a corresponding digital output for each capacitive pad and its input . Each digital output signal P. corresponds to a respective capacitive pad input P. . In this embodiment each digital output signal is produced in an intermittent alternating high low manner with a frequency that emulates the action of a user s finger toggling away at a conventional digital momentary on digital key at a variable speed that is based on the amount of pressure being applied to the corresponding pressure sensitive analog key . Thus open short mechanical user toggling control may be advantageously replaced by electrical control based on the key pressure applied by a user to provide a similar intermittent alternating high low signal output without requiring a user to toggle the keys. It will be understood that although the exemplary microcontroller of pressure sensing digital output circuitry of employs 8 digital falling edge triggered interrupt inputs Port P. and 8 digital outputs Ports P. it is possible to select a different chip s to support more pressure sensitive keys.

In addition to digital outputs pressure sensing digital output circuitry also provides a signal corresponding to each capacitive pad that indicates the force or extent to which the key is depressed to haptics control circuitry . In one embodiment each signal is a digital signal similar to the corresponding digital output signal produced by pressure sensing digital output circuitry i.e. being produced in an intermittent alternating high low manner at a variable speed that is based on the amount of pressure being applied to the corresponding pressure sensitive analog key . However a pressure indication signal may be any other type of signal suitable for indicating pressure applied to a corresponding pressure sensitive analog key . Haptics control circuitry in turn produces a corresponding haptics control signal to actuate the haptics circuitry that corresponds to e.g. is mechanically coupled to or otherwise associated with the particular pressed key . In one exemplary embodiment haptics control signal may be operable to cause haptics circuitry to produce a vibration or other type of movement for the pressed key that is proportional or otherwise variable relative to the amount of pressure currently being applied to the corresponding pressed key .

In the illustrated embodiment of haptics control circuitry may include at least one haptics controller as shown. Although one haptics controller receiving multiple pressure indication signals and producing multiple corresponding haptics control signals is illustrated in it will be understood that haptics control circuitry may include more than one haptics controller e.g. with one haptics controller being provided for independently actuating haptics circuitry of each separate pressure sensitive key . In this regard additional embodiments are illustrated further herein that show just a few of the different circuit configurations that are possible in the implementation of the disclosed systems and methods.

In the exemplary embodiment of keyboard system is implemented to be interchangeable with a legacy USB keyboard for interconnection with standard 8 bit keyboard controller via a standard 16 8 key matrix with 16 columns 8 rows and native device drivers. However it will be understood that one or more features of the disclosed systems and methods may be implemented in non legacy or customized keyboard systems and in any arrangement of one or more circuitry components as may be suitable for a given application.

In the exemplary embodiment of legacy keyboard controller has a standard keyboard matrix open short input provided for the 104 keys on a standard keyboard that is arranged as 16 columns by 8 rows so that only 24 signals interface with the keyboard controller rather than a signal line per key which would require over signals to the keyboard controller . The keyboard controller operates by initially selecting a single row and applying a logic level 1 to it. There are 16 keys in a column with only one of those keys intersecting with the particular row that s at logic 1. To detect if a key is pressed in a row each column is sequentially grounded. If a key is pressed it shorts the column to the row thus causing the row voltage to drop or go low. When the keyboard controller detects the low voltage on the selected row the pressed key can be determined by the column row intersection that was electrically shorted. Once all columns have been queried in a single row the keyboard controller sequences to the next row and so on until all rows have been queried thus sampling the logic level for every key.

In summary though a low voltage sense is used to detect a key press in normal keyboard microcontroller operation an electrical short is required at each intersection of the keyboard key matrix to indicate the press of a key. Thus a direct alternating high low digital output signal from a microcontroller such as IT MSP430F2111 is incompatible with the inputs to such a legacy keyboard controller . However in the illustrated embodiment switching circuitry may be provided as an interface between pressure sensing digital circuitry and legacy keyboard controller for analog keys . The purpose of the switching circuitry is to convert a high low digital output stream into a stream of opens shorts. For example as shown in a separate optoisolator has been provided for each corresponding analog key switch location. Examples of such optoisolators include but are not limited to AVAGO 4N35 or ACPL 227 optocouplers available from Avago Technologies of San Jose Calif.

In the exemplary embodiment of each optoisolator provides an electrical control over the make or break short or open circuit connection at a given column row intersection location of keyboard matrix open short input for that particular key. This advantageously allows analog keys to be implemented with a conventional keyboard matrix arrangement and legacy keyboard controller along with its firmware and device driver . Further the implementation of this embodiment of switching circuitry allows any key and or any number of keys of a conventional keyboard matrix to be provided with pressure sensing capability.

As shown in haptics controller may include or otherwise access memory e.g. RAM or any other suitable non volatile or volatile memory that stores one or more vibration waveforms. For example memory of a MAX11835 controller may store up to 16 different vibration waveforms that are selected to correspond to different pressure force levels applied to a variable pressure sensitive key . Each of the vibration waveforms may be assigned a corresponding waveform address in memory of the controller. In operation of PATH haptics path of pressure sensing digital output circuitry may output a pressure indication signal as a falling edge trigger event to haptics controller . The pressure indication signal may include the selected waveform address e.g. 4 bit waveform address that corresponds to the desired vibration waveform and current pressure level applied to a given key . The haptics controller may then retrieve the selected particular waveform from memory according to the waveform address and then output this selected waveform as low voltage waveform signal to flyback circuit . Duration of signal may be of any selected and suitable time but in one embodiment may be a short duration waveform signal e.g. of about 45 milliseconds that loops or repeats over and over for a period corresponding to a polling period of pressure sensing digital output circuitry e.g. for a period of about second or other greater or lesser time value .

Still referring to PATH toggle path is implemented by the illustrated components as follows. After the 4 bit waveform of PATH is loaded key toggling is initiated by pressure sensing digital output circuitry by providing digital signal to keyboard key matrix and keyboard controller via optoisolator of output switching circuitry in a manner as described elsewhere herein. The rate of the key toggling of digital signal is dictated by the applied pressure level and toggling occurs for a period corresponding to a polling period of pressure sensing digital output circuitry e.g. for a period of about second or other greater or lesser time value . In this regard PATHS and may operate in parallel although PATH may be started first due to the latency of loading in the waveform address via signal .

In the exemplary embodiment of only a single haptics control signal is generated for controlling any given one of the multiple haptics transducers corresponding to multiple analog keys . In this regard pressure sensing digital output circuitry controls actuation of only the appropriate haptics transducer that corresponds to the currently pressed analog key by generating an appropriate haptics enable signal to switch on the respective haptics control switch e.g. MOSFET such as SiA456DJS available from Vishay of Shelton Conn. corresponding to the haptics transducer of the appropriate pressed key . Since only one haptics control switch is switched on at any given time by pressure sensing digital output circuitry haptics motion is only provided by the haptics control signal to the transducer of the key being currently pressed. further illustrates that pressure sensing digital output circuitry is also configured to provide a separate alternating high and low high low digital output bit stream signal for each variable pressure sensing key for output switching circuitry in a manner as described elsewhere herein. It will be understood that pressure sensing digital output circuitry may be configured as desired or needed to arbitrate between multiple analog keys that are pressed simultaneously in a system configured according to the exemplary embodiment of e.g. so that the hardest pressed analog key at any given time is provided with haptics motion so that the most lightly pressed analog key at any given time is provided with haptics motion so that the analog key continuously pressed for the longest duration is provided with haptics motion i.e. the first pressed analog key of simultaneously pressed analog keys is provided with haptics motion etc.

In one embodiment upon host boot up a measurement of each of the analog keys may be performed sequentially scanning process as labeled in step . This scanning process may be performed multiple times e.g. 100 times in order to allow the master clock and PCB conditions to stabilize.

Though not required for some applications it may be advisable to provide additional filtering of the count measurement to remove any residual noise and further increase sensitivity of the capacitive pads as capacitive pad measurements are often noisy due to a number of factors such as temperature humidity voltage drift component tolerances and 50 60 Hz mains. In step a base capacitance is established and tracked as the base capacitance of the capacitive pad can change due to environmental conditions such as temperature humidity voltage drift and or component tolerances. Note that this is a slow type of change as changes occur in minutes not microseconds. A baseline capacitance is established as the capacitance of each pad during the open state when no finger is pressing on the key . As any of the above mentioned environmental factors changes the base capacitance for each pad is updated and stored. If a decrease in capacitance is detected the software must adjust the base capacitance rapidly since this is not a function of the sensor excitation. We can do this be re averaging with the current count result. If an increase in capacitance is detected the base capacitance may be adjusted very slowly as this may be due to a finger hovering over a key and not because of an environmental drift effect. For example the base capacitance may be adjusted by 1 with each measurement but only if no keys are pressed. Additionally an optional low pass filter e.g. implemented in firmware software or otherwise may also help to eliminate the presence of any 50 60 Hz main power noise that may be coupled onto the capacitive pads. For example in one exemplary embodiment the low pass noise filter may be implemented as a software based IIR infinite impulse response filter or essentially as a DC tracking filter.

Finally in step sensing for user pressure on each of analog keys is started. The endless loop of this sensing process is described further below in relation to and .

Still referring to the degree of applied pressure to a presently pressed key is next determined e.g. in a binning operation by comparing the filtered count value to a pre determined scale of counts per resolution in step based on the stored adjusted capacitance value or filtered count value of step .

For example in one exemplary embodiment four levels of different toggle output resolution i.e. alternating toggle rate frequency may be pre defined for measured timer counts of a pressed key . As an example a maximum toggle rate may be defined to correspond to a maximum timer count level of 200 with four decreasingly lower toggle rate levels defined for timer counts of 180 160 140 and 120 and anything less than or equal to 120 being disregarded as noise e.g. toggle rate frequency of 20 times second for timer count range of anything greater than 180 up to 200 toggle rate frequency of 16 times second for timer count range of anything greater than 160 up to 180 toggle rate frequency of 10 times second for timer count range of anything greater than 140 up to 160 toggle rate frequency of 8 times second for timer count range of anything greater than 120 up to 140 and no toggling for timer count range of less than or equal to 120. This example toggle output scheme may be expressed as follows 

However it will be understood that this particular number of timer count levels and corresponding timer count values is exemplary only and that greater or fewer numbers of timer count levels and or different timer count values may be employed in other embodiments.

It will be understood that step described above is optional and only may be employed when the number of analog keys exceeds the number of output lines . Alternatively methodology may pause the round robin measurements whenever a pressed key is identified as exceeding the threshold adjusted capacitance value determine the degree of applied pressure to pressed key based on its capacitance and toggle the output signal of the pressed key . The count value of the identified pressed key may be monitored and reevaluated for as long as it remains pressed by reevaluating the pressed key s timer count by rerunning it through the binning operation to see if the pressure is changed and outputting an updated digital bit stream signal based thereon. Once it is determined that the identified key is no longer being pressed then the round robin procedure may resume to the next key and inquire of its count value for this round robin cycle. Either way the round robin cycle continues for as long as the keyboard system is powered up. After shut down the pressure sensing digital output circuitry may be reset on next power up all keys reinitialized e.g. per and the round robin key capacitance measurement routine initialized again.

In steps to of methodology the haptics vibration waveform and toggle rate is selected based on the determined key pressure of step which is sensed by pressure sensing digital output circuitry based on the key capacitance value e.g. each variable pressure key generates a variable capacitance with the capacitance value increasing as a user applies greater finger pressure to the key . As described elsewhere herein pressure sensing digital output circuitry generates a digital count value that increases with increased capacitance and a value that identifies which key is currently being pressed. Thus at the start of the binning operation the digital count and the pressed key identifier values are known.

Once the pressed key identifier value has been processed the digital count value is then sorted in steps to of to determine the amount of pressure applied e.g. on a scale of 1 to 10 1 to 4 or any other acceptable or selected range of pressure resolution that has been programmed . In one exemplary embodiment this pressure resolution value range may be programmable by the user using a software graphical user interface GUI utility. In the exemplary embodiment of methodology for a pressure scale of 1 to 4 is illustrated where pressure level is associated with light finger pressure and pressure level is associated with max finger pressure. A digital count value of less than 120 is taken to indicate that the respective key has not been pressed hard enough to make an electrical make connection while a digital count value greater than 180 indicates maximum finger pressure has been applied to the respective key . The separate pressure levels of and are defined in this embodiment by four equal 25 increments between the minimum and maximum pressure levels to define four levels of finger pressure it being understood that equal increments are not required.

Still referring to if the measured timer counts of a pressed key is determined to exceed in step then methodology proceeds to step where pressure sensing digital output circuitry applies a falling edge trigger and writes to haptics controller an address pointer corresponding to the appropriate haptics vibration waveform e.g. waveform previously stored in RAM upon power up corresponding to pressure level on Haptics Trigger output signal for respective pressed key . Also in step the pressure sensing digital output circuitry enables the respective Key Haptics Enable output signal to turn on the respective output MOSFET to enable vibration on the respective piezo transducer for the analog key that s being pressed on. In such an example methodology then proceeds to step where a low active toggle output of pressure sensing digital output circuitry is toggled that corresponds to the identity of the presently pressed key e.g. output P. is toggled for corresponding input P. . This toggled signal mimics or emulates the action of a user repeatedly pressing a conventional digital key for a number of times that is proportional or otherwise relative to the strength of the desired input i.e. greater pressure on analog key corresponds to more rapid user repeat rate on digital key . Thereafter once the Haptics controller notifies the Pressure Sensing Binning Controller that it s done outputting the vibration waveform from RAM controller deactivates the Haptics Trigger output the respective Key Haptics Enable output and the Toggle output . This assures no possible race condition or condition where controller is accidentally deactivating vibration activity to the key prematurely. Controller then resamples the latest key pressure level and identity of currently pressed key output at step and re evaluates the degree of pressure applied again in steps to .

If the measured timer counts of a pressed key is determined not to exceed in step then methodology proceeds to step where pressure sensing digital output circuitry determines if the number of measured timer counts of pressed key is between 160 and 180. If so then methodology proceeds to step where circuitry generates a falling edge trigger for haptics controller and also writes to haptics controller on Haptics Trigger output an address pointer corresponding to the appropriate haptics vibration waveform e.g. waveform previously stored in RAM upon power up corresponding to pressure level for this count range enables the respective Key Haptics Enable output and toggles low active output of pressure sensing digital output circuitry to the identity of the presently pressed key using a toggle signal that is proportional or otherwise relative to the strength of the desired input before resetting toggle line and repeating back to step in a manner similar to steps to . A similar methodology is implemented by each of steps and for respective measured timer count ranges of greater than 140 up to 160 and greater than 120 up to 140 corresponding to pressure levels and as shown. If measured timer count is less than 120 interpreted in this embodiment as being no applied pressure in step then methodology returns to step as shown.

Next haptics controller begins steps to . In step haptics controller receives a falling edge trigger and waveform address from Haptics Trigger output signal from step of pressure sensing digital output circuitry . The falling edge trigger along with some preset registers in the haptics controller notifies the haptics controller that it needs to grab a particular vibration waveform from RAM that corresponds to the pressure level determined in step and output the waveform e.g. waveform to the flyback circuit which is then outputted with a high voltage to the piezo transducer . The output of step ensures that the Key Haptics Enable signal is active which activates output MOSFET to ensure the respective piezo transducer receives the high voltage output signal from the flyback circuit . In one exemplary embodiment the waveform stored in RAM may last about 45 milliseconds. In such a case in step the selected waveform is looped and repeated for a selected duration e.g. for about 0.5 seconds . It will be understood that this duration may be smaller or larger as the user chooses. In one exemplary embodiment the vibration waveform loop repeat time duration in Step may be selected to be smaller than that of the toggling time duration in step in order to prevent a possible race condition. In this regard it is desirable that that step is met vibration completed before step takes effect in order to ensure that the vibration and MOSFET selection switch does not turn off prematurely.

Step occurs at a stage where the waveform output of 0.5 second duration has been completed. In step the Haptics Controller enters a low power or sleep mode and waits for the next trigger from step . In parallel step verifies that step is completed and has the pressure sensing controller deactivate or reset the Haptics Trigger output the Key Haptics Enable and the Toggle output . Methodology then returns to step where the next falling edge trigger and waveform address pointer is received from pressure sensing digital output circuitry . Thus in this exemplary embodiment both the haptics vibration and key toggling occur for a particular finger pressure for a period of 0.5 second before the keys are resampled evaluated and the count and pressure level are redetermined before changing to a new vibration and toggling to occur in the next 0.5 seconds. Again the period may be reduced to something less than 0.5 seconds to be more responsive less latency to changes in finger pressure on the analog key .

Thus illustrate how two actions may be performed in parallel once a key pressure level match is made by pressure sensing digital output circuitry . The first action is that the haptics vibration waveform is output from pressure sensing digital output circuitry to the haptics circuitry e.g. piezo transducer coupled to e.g. mounted under the pressed key at a vibration intensity that corresponds to the pressure level. This is accomplished by sending a falling edge trigger to the haptics controller to wake it up from sleep and by writing the waveform address for the given pressure level to the haptics controller . Then the applicable output MOSFET is activated so the applicable piezo transducer can receive the waveform in order to vibrate. The haptics controller immediately outputs the waveform to the haptics circuitry e.g. continuously for seconds or any other selected suitable duration. Once the duration of the haptics vibration waveform output is completed the haptics controller goes back to low power mode and the pressure sensing digital output circuitry resets the trigger line the key haptics enable line and the toggle line so the haptics controller is ready to receive the next falling edge trigger event.

The waveform address write operation may be performed using any suitable methodology including using I2C bus signals. However in one exemplary embodiment the address write may be performed in as few clock cycles as possible to reduce the latency from the applied finger pressure to the resulting key vibration. For example where a Maxim MAX11835 Rev. 2 chip is employed as haptics controller a feature of this chip called multi wave mode may be utilized to directly write the 4 bit waveform address serially from the pressure sensing digital output circuitry to the haptics controller chip in a fraction of the time required by I2C bus communications.

The second action performed in parallel is that circuitry associated with the pressed key is electronically toggled at a rate that corresponds to the pressure level applied to the pressed key . In one embodiment once the waveform address has been written to the haptics controller the pressed key s signal line is toggled at a rate corresponding to the particular pressure level. In this way key toggling action and its respective key vibration action operate in parallel to provide a user the feeling that both are operating in synchronization with each other. At the completion of the key toggling action the falling edge trigger signal the output MOSFET enable line and toggle line are set to an inactive state. The latest digital count and key identifier values from the pressure sensing digital output circuitry are then re sampled to determine if there have been any changes in key pressure status and if so to execute vibration and toggling actions based on the updated key pressure status. The resulting effect is that the vibration intensity of a given key and its corresponding key toggling speed will vary according to real time applied finger pressure to the particular key .

It will be understood that methodologies and of are exemplary only and that methodologies employing additional fewer and or alternative steps may be employed that are suitable for implementing one or more of the features described herein.

The following example represent illustrative and exemplary piezo input haptics vibration waveforms that may be sent to the piezo transducer s to provide a progressive increase in intensity as a user presses harder on a variable pressure sensitive key it being understood that alternative piezo input waveforms and or number of separate waveforms may be employed.

The waveforms of this example may be used with a variable pressure keyboard supporting four levels of sensitivity. In this example each key pressure level has a unique toggle output as well as a unique piezo vibration waveform. Four vibration waveforms are provided one for each pressure level to vibrate a pressed key progressively from a light vibration to a rough intense vibration.

A commonality may be seen with respect to the four waveforms of this example their period is always 64 ms the sawtooth pulse lasts 10 msec and the amplitude of the sawtooth pulse remains the same regardless of intensity level. What varies is how many sawtooth pulses are outputted within the 64 ms window. As the number of sawtooth pulses outputting in rapid succession is increased the intensity of the vibration increases.

It will be understood that one or more of the tasks functions or methodologies described herein may be implemented for example as firmware or other computer program of instructions embodied in a non transitory tangible computer readable medium that is executed by a CPU controller microcontroller processor microprocessor FPGA ASIC or other suitable processing device.

Further modifications and alternative embodiments of the techniques described herein will be apparent to those skilled in the art in view of this description. It will be recognized therefore that the techniques described herein are not limited by these example arrangements. Accordingly this description is to be construed as illustrative only and is for the purpose of teaching those skilled in the art the manner of carrying out the techniques described herein. It is to be understood that the forms of the techniques described herein shown and described are to be taken as the presently preferred embodiments. Various changes may be made in the implementations and architectures. For example equivalent elements may be substituted for those illustrated and described herein and certain features of the techniques described herein may be utilized independently of the use of other features all as would be apparent to one skilled in the art after having the benefit of this description of the techniques.

