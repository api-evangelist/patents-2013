---

title: Messaging service in a wireless communications network
abstract: This invention concerns a messaging service in a wireless communications network. In a first aspect, the invention is a method for providing a messaging service on a wireless device in a wireless communications network; the method comprising the steps of: Retrieving the destination address of an outgoing message on the device. Verifying whether the destination address is capable of receiving the message via a packet-switched bearer. If verification is affirmative, then automatically sending the message to the destination address via a packet-switched bearer, but otherwise, automatically sending the message to the destination address via an SMS bearer. In another aspect, the invention is a mobile device programmed to perform the method. In a further aspect, the invention is a software program to implement the method.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08996047&OS=08996047&RS=08996047
owner: Rembrandt Messaging Technologies, LP
number: 08996047
owner_city: Bala Cynwyd
owner_country: US
publication_date: 20130325
---
This Application is a continuation in part of and claims priority under 35 USC 120 to U.S. patent application Ser. No. 13 762 347 filed on Feb. 7 2013 and entitled Messaging Service In A Wireless Communications Network which is in turn a continuation and claims priority under 35 USC 120 to U.S. patent application Ser. No. 12 452 883 filed on Jul. 7 2010 and entitled Messaging Service In A Wireless Communications Network which in turn claims priority to PCT Patent Application No. PCT AU2008 001043 filed Jul. 18 2008 and entitled Messaging Service In A Wireless Communications Network that in turn claims priority to Australian Patent Application No. 2007903979 filed Jul. 24 2007 titled MESSAGING SERVICE IN A WIRELESS COMMUNICATIONS NETWORK and Australian Patent Application No. 2007906230 filed Nov. 13 2007 titled MESSAGING SERVICE IN A WIRELESS COMMUNICATIONS NETWORK the entirety of which all of which are incorporated herein by reference.

Short Messaging Service SMS is a technology for sending and receiving short text messages between mobile users. It was first introduced in the Global System for Mobile Communications GSM standards in the 1990s but was subsequently included in other wireless standards such as Code Division Multiple Access Systems CDMA . Although SMS is extremely popular one of its biggest drawbacks is that an SMS message can only carry a small amount of data due to limitations imposed by the Mobile Application Part MAP protocol of SS7. An SMS message can only contain up to 160 8 bit alphanumeric or binary characters and any message longer than 160 characters is usually sent in multiple messages.

A Short Messaging Service Centre SMSC is responsible for handling the delivery of SMS messages in a wireless communications network. An SMS message sent by a mobile user is first delivered to the user s network SMSC before being routed to the recipient. If the recipient s network is operated by a different provider or employs a different wireless standards the message may pass more through more than one SMSC or SMSC gateway before reaching its final destination. Signalling System 7 SS7 provides the transport mechanism for SMS traffic.

There are several messaging services that provide an extension to SMS. Enhanced Messaging Service EMS which uses existing SMS infrastructure allows up to 255 SMS messages to be packaged as one EMS message having richer content such as animation pictures sounds and formatted text. Unlike SMS and EMS Multimedia Messaging Service MMS messages are delivered using a mobile packet data network. MMS was first introduced in 2.5 generation networks such as GPRS which provides an Internet Protocol IP overlay to the existing GSM networks. A multimedia message may contain images audio clips and videos.

On the other hand Mobile Instant Messaging MIM technology enables mobile devices to engage in real time instant messaging via an IP data network. Users need to register a user name tag or handle with an instant messaging service provider to send and receive messages. Many current MIM services also require users to maintain a persistent connection with the Internet during a chat session.

In a first aspect the invention is a method for providing a messaging service on a wireless device in a wireless communications network the method comprising the steps of 

Verifying whether the destination address is capable of receiving the message via a packet switched bearer.

If verification is affirmative then automatically sending the message to the destination address via a packet switched bearer but otherwise automatically sending the message to the destination address via an SMS bearer.

Unlike conventional SMS EMS and MIM clients the invention combines existing messaging solutions to offer a single interface for sending and receiving both text and multimedia messages. The automatic bearer selection enables the user to have the widest range of messaging options including text voice video picture based on knowledge of the status and capability of the recipient s device.

The SMS bearer may be a conventional GSM SS7 signalling channel. The packet switched bearer may be a HSDPA WCDMA CDMA2000 GPRS or similar data bearer. The packet switched bearer may also supported by other wireless technologies such as Bluetooth WiFi WiMax. Further the packet switched bearer may be operated by a sender s mobile operator or an independent mobile Internet service provider. Compared with an SMS bearer a packet switched data bearer is able to send a message with unlimited size at a higher speed.

The destination address may be a mobile phone number or a numeric shortcode or alias representing one or more or a combination of phone numbers email addresses instant messaging user handles and IP addresses. Therefore for all users of the messaging service and unlike conventional MIM clients the invention utilises a user s mobile phone number as the identifier of the user and does not require the user to register a user name tag or handle thus providing a single number for message sending.

A message client running on the device may programmatically and dynamically construct an outgoing message in the correct syntax given the user s preferences and given the dynamic requirements of the message server for a particular service.

The message client may interpret incoming SMS or incoming messages from the message server that are identified in their contents as being requirements for the dynamic construction of a message when the user views the message.

Alternatively the message client may interpret incoming SMS or incoming messages from the message server that are identified in their contents as being requirements for the dynamic construction of a message and store the requirements for the dynamic construction of a message such that they may be invoked by selecting a dynamic menu option.

The requirements may be set out in a structured format using XML such that the message client shall when a user opens a message containing requirements for the dynamic construction of a message or when a user selects a dynamic menu 

The method may further comprise the step of connecting to a message server before verifying the destination address. If connection to the message server is not available the invention may support several configuration methods in order to configure the mobile device so as to be able to establish a connection to the message server.

Firstly the method may comprise the step of retrieving connection parameters and displaying the retrieved parameters on the mobile device if connection to a message server is not available. A mobile user may then use the retrieved parameters to manually configure the handset before retrying to connect to the message server.

Besides manual configuration the invention may support manual and automatic over the air OTA programming. The method may further comprise the step of displaying a link for a sender to request an OTA configuration message if connection to the message server is not available. For example a user may then access a website to request a configuration message to be sent to the user s mobile device.

The method may further comprise the step of retrieving connection parameters automatically creating an OTA configuration message based on the retrieved parameters and sending the generated configuration message from the mobile device to the same mobile device. Using such automatic OTA configuration users do not have to manually change the settings on their mobile device to establish a connection with the message server. The OTA configuration message may be a binary SMS.

The step of verifying the destination address may involve sending an address verification request to a message server and then receiving a notification from the message server specifying whether the destination address is capable of receiving the message via a packet switched bearer.

The destination address may be capable of receiving the message via a packet switched bearer if the address is on a subscriber address list. The subscriber address list may be a list of destination addresses that subscribes to the messaging service. The subscriber address list may be maintained by the message server.

The destination address may be capable of receiving the message using a packet switched bearer if the address is on the subscriber address list and has an active status. For example the recipient is inactive if the length of the message queue of the destination address exceeds a maximum allowable length.

The method may further comprise the step of automatically providing options to add one or more attachments to the outgoing message before sending the message if a packet switched bearer is selected. The attachment may be a text voice video or picture file. On the other hand an outgoing message that is sent using an SMS bearer can only be either an SMS or EMS message and not have attachments.

Using the invention a sender may optimally add attachments to an outgoing message depending on the capability of a recipient s mobile device. For example a user may attach a voice or video message a text message if the recipient is able to receive and play the attachment. Further the invention uses a push model to deliver a voicemail to a mobile user without the need of retrieval.

The method may further comprise the step of formatting the outgoing message according to the mode of delivery before sending the message. If the message is sent via a packet switched data bearer the message may be formatted as an XML ASCII string.

The method may further comprise the step of appending a system message to the outgoing message if an SMS bearer is selected.

The system message may comprise an invitation to add the destination address to a subscriber address list if the destination address is not on the list. Otherwise if the destination address is on the subscriber address list but has an inactive status the system message may comprise an invitation to retrieve messages in the message queue of the destination address.

By sending an invitation to non subscribers to add their destination address to the subscriber address list new users may subscribe to the messaging service without having to actively source how to obtain the service. This viral peer to peer invitation method also does not require central monitoring nor generate additional traffic since an invitation is appended to an outgoing message.

The method may further comprise the step of notifying the recipient if the recipient is on the subscriber list when either a message has been received if the recipient is connected to the message server or when a message is queued but not yet delivered if the recipient is not connected to the message server . The notification method may be a single ring to the recipient s mobile device. A notification message may also be sent to the sender of the message.

The method may further comprise queuing an outgoing message for later delivery if the message is undelivered. For example a message cannot be delivered if the destination address is on the subscriber address list but the recipient is not at the time of sending connected to the message server by a packet switched bearer.

In another aspect the invention is a mobile device programmed to perform the method. In a further aspect the invention is a software program to implement the method.

Referring first to the messaging system comprises a message server in communication with network users and via the Internet and base stations and . Base stations and are typical based stations in a GSM CDMA 3G 3.5G or similar network that supports a HSDPA WCDMA CDMA2000 GPRS or similar data bearer and are connected to an SMSC via Core Network .

Network users and may be part of a wireless personal area network WPAN a wireless local area network WLAN or a wireless wide area network WWAN . Base stations and are wireless Internet base stations operated by an independent wireless service provider. For example the users may access the wireless Internet using technologies such as Bluetooth ZigBee or mesh networking in a WPAN WiFi in a WLAN or WiMax in a WWAN.

In this example it is assumed that a first user the sender is sending a message to a second user the recipient . The message contains the phrase Hi there as well as a photo and a voicemail as attachments. Referring now to a message client runs on the mobile device and is responsible for choosing the mode of delivery of an outgoing message.

To use the invention the message client needs to be activated by the sender . However the message client may be also activated automatically when the handset is switched on if such feature is supported by the handset s operating system. Having activated the message client the sender then selects or enters a destination number. The message client then decides on how the message can be sent.

The recipient may be on a network operated by the same or a different service provider. The sender and the recipient are each associated with an address. The destination address is either a mobile phone number or a numeric shortcode or channel which is an alias representing one or more phone number email address or instant message handle. For example certain number ranges may be controlled by the messaging server e.g. 1 800 xxxxxx some under users control as destinations as aliases for a group of numbers and addresses e.g. 1 801 xxxxxx and some for accessing content services e.g. 1 900 xxxxxx . Shortcodes are unique and private to a user hence the same numeric shortcode may be used by multiple users.

Shortcodes are created by users and maintained by message server . For example a user creates a shortcode by sending a message with the following content to the message server 

The shortcode 20 is an alias for a group comprising two email addresses one mobile number and an instant message handle. For example to send a message to the shortcode created the destination address will be set to 1801 20.

The syntax of messages in the example above is strict however the user is not limited in their use of services by limits in their own knowledge of the message syntax.

The message client is able to programmatically and dynamically construct an outgoing message in the correct syntax given the user s preferences and given the dynamic requirements of the message server for a particular service.

The message client interprets incoming SMS or incoming messages from the message server that are identified in their contents as being requirements for the dynamic construction of a message. The interpretation can occur either when the user views the message for example a message titled Click to create a Channel and or the message client may interpret the incoming SMS or incoming messages from the message server and store the requirements for the dynamic construction of a message such that they may be invoked by selecting a dynamic menu option.

The requirements are set out in a structured format using XML such that the message client shall either when a user opens a message containing requirements for the dynamic construction of a message or selects a dynamic menu 

Construct a message of the correct syntax based on the user s choices and input. If the message contained requirements for the dynamic construction of a message where those requirements are by way of example set out as 

The message client would present the user with a message titled Shortcode where the message client would 

Thus enabling the benefit to the user of the use of a service where they otherwise may have been unfamiliar with or unwilling to input the strict syntax of the message required for the service.

When a message is sent to a shortcode the message can be sent either as a conventional SMS or EMS message using a conventional SMS bearer or a packet switched data bearer. If a SMS bearer is used the message will be sent via a GSM or GPRS signalling channel to Core Network SMSC base station before finally reaching recipient . If an SMS bearer is used the attachments such as the photo and voicemail will not be sent.

If a packet switched data bearer is used the message client has a choice of sending the message using a packet switched bearer supported by the mobile operator s or a third party s network. For example in a GSM system with General Packet Radio Service GPRS overlay an SMS bearer may be an SS7 signalling channel while a packet switched data bearer may be a shared transmission channel that combines multiple timeslots in a GSM TDMA frame. The packet switched data bearer may also be a Bluetooth WiFi WiMax or any other WPAN WLAN or WWAN wireless data transfer protocol.

Referring now to the client first checks whether the sender is connected to the Internet and message server see step . As shown in the sender may be connected to the message server via a mobile operator s data network base stations or a network provided by an independent mobile Internet service provider base station .

The step of connecting to the message server step will now be explained with reference to . The client first checks whether connection to the message server is available. If the connection is not available the client displays options for the sender to configure the handset such that connection to the message server can be established see step .

The client supports three configuration methods. Firstly manual configuration may be used see steps and . In this case the client first retrieves information specific to the handset and the mobile Internet service provider. As mentioned the mobile Internet service provider may be a mobile operator or an independent provider. The client then displays the retrieved information such that the sender can configure the handset manually step .

Alternatively if the sender s mobile device is capable of receiving and processing OTA messages the client may provide a link to a website that solicits OTA configuration requests steps and . The website may be operated by the message server or a third party and accessed via a PC WAP connection from the sender s mobile device or other means. Upon receiving the OTA configuration message the sender s mobile device will ask the sender to accept the changes to its mobile Internet access settings according to the configuration message step . If the changes are accepted the client then retries to connect to the message server step .

Besides manual configuration and manual OTA configuration requests the client is capable of performing self configuration see steps and . Assuming that the client is aware of the specific parameters necessary to configure the sender s mobile device to access the mobile Internet the client first creates an OTA configuration message based on the parameters. The client then sends the OTA message to the sender s handset same device . For example the message may be sent as an OTA binary SMS. Upon receiving the OTA configuration message the sender s mobile device asks the sender to accept the changes to its mobile Internet access settings according to the configuration message step . Similarly the client then retries to connect to the message server when under the new settings step .

The above configuration steps may be repeated until either the message server is connected or the user has abandoned the configuration in step . In this case that is the connection to the message server is not available the client will select an SMS bearer as the mode of delivering the outgoing message and proceeds to format the message in step . Note that besides configuring the mobile Internet access settings of a mobile device the client may generate OTA messages to configure other settings such as email WAP MMS and video streaming.

If the sender has access to the message server the client then retrieves from the message without reference to the message server the destination address of the outgoing message see step . Alternatively the system and method may retrieve the destination address from a contact list or address book of the sender that may be resident on the sender s computing device or on the message server .

The client then sends a verification request to the message server via base station or and the Internet step . Upon receiving an address verification request the message server performs the method shown in . The message server first checks whether the destination address is on a list of subscribing addresses step . If the destination address is not known to the message server the mode of delivery will be set to an SMS bearer step .

If the destination is on the list of subscribing addresses the message server proceeds to check the status of the recipient that is whether the destination message queue length has exceeded a predetermined maximum length . If the recipient has a long inactive queue the message server will notify the message client to send the message using an SMS bearer see step . Otherwise the mode of delivery is set to a packet switched bearer see step in .

Referring to again the message client at the sender provides options for format and attachment of the outgoing message based on the mode of delivery steps and . The mode of delivery using information about the recipient s handset stored in the message server provides an indication of the capabilities of the recipient s handset and the type of message that can be received by the recipient s . If the recipient is an active user the full range of the recipient s capabilities is assumed. However if the recipient is an inactive or past subscriber the message server s knowledge of the recipient s capabilities may be outdated if the recipient has changed its handset. The recipient may then be invited to update its information.

The message client then intelligently advises the sender whether the recipient is able to read attachments or non text messages. For example if the mode of delivery is a packet switched bearer the sender is offered with the ATTACH option to add voice picture or video attachments to the message see and steps and in .

If the mode of delivery is an SMS bearer the ATTACH option will be disabled. Further depending on configurable settings on the sender s mobile device the client also appends a system message to the outgoing message in step . If the destination address is not on the list of subscribing addresses an invitation to download the client will be added to the outgoing SMS or EMS. For example the invitation may read 

The message client can then be downloaded to the recipient s mobile device . Then upon starting the message client the message client will generate a unique authentication identifier either randomly or derived from the mobile devices hardware identification or generated by the message server. The message client will then initiate a connection to the message server and communicate the authentication identifier. The message client will in parallel send a SMS containing the authentication identifier to a SMS gateway service. The SMS gateway service then sends the message including the originating phone number and the body of the message containing the authentication identifier to the message server via HTPP SMTP SMPP or a similar protocol.

Upon receipt of the details of a SMS the message server will determine the originating phone number of the mobile device from the details of the SMS and hence add the new address originating phone number to the list of subscribing addresses. By matching the authentication identifier either the message server will send the message client confirmation that the mobile device and user has been authenticated or the message client will initiate the action and request the same confirmation from the message server. This authentication method allows new users to be authenticated and to subscribe to the messaging service via one SMS without requiring any registration or data entry.

If the destination address is on the list of subscribing addresses but the recipient is inactive a message to remind the recipient to connect to the message server will be appended to the outgoing SMS or EMS. For example the system message may read 

 You have 50 unread messages on . Returning to the sending mobile device if the mode of delivery is a packet switched bearer the message client manages the delivery of the message similar to a MIM client such as Jabber. An exemplary architecture of the message client is shown in where the message client may be a Java 2 Mobile Edition J2ME program installed on a mobile device. The formatted message is sent as an XML ASCII string via a TCP IP socket to the message server or a HTTP post an example of which is shown in . The message contains a text phrase Hi there in the body and two attachments. A photo attachment is defined between and and a voicemail is defined between and .

The sending of the message using SMS bearer or a packet switched bearer as shown in and described above is one example of how the message may be sent to the recipient. The system and method may also send the message in other ways. For example the message to be sent may be stored in a database or other storage device and then the recipient can retrieve the message from the database or other storage device. The system may also have a mechanism that notifies the recipient when a message is waiting and as part of such notification delivers the message such as an alert using push notification and the like. Furthermore a message to be sent may be sent using a keep alive connection used for notifications. As another example the message may be stored in the cloud using cloud computing resources and the recipient may retrieve the message by making an application programming interface API call or a function call on a server. Furthermore the system may use other services that would allow the recipient to get the message from the sender. As another example the message be sent and received using a well known peer to peer connection between the sender device and the recipient device.

Furthermore as an alternative to sending the message to the recipient using an SMS bearer the system may also allow the sender to send an invitation to the recipient via SMS. The invitation may be to download and or install the messaging client to be able to receive the message over a packet switched bearer or connect to a service that allows the recipient to retrieve the message.

If the destination address is a shortcode steps and in are repeated for each phone number email address and user name tag represented by the shortcode. If not all addresses in the shortcode are capable of receiving the message via a packet switched data bearer the reply by message server may be an array of binary answers. For example if a shortcode represents three addresses and only the first has installed the message client the mode of delivery is set to mmm 100 where 1 represents a packet switched bearer and 0 represents an SMS bearer.

A delivery confirmation message may also be sent to the sender by the message if the message is sent using a packet switched bearer. The message client maintains a copy of recent messages sent by a user for example for a limited time. If a message is unsuccessfully delivered it will be queued for later delivery. For example a message cannot be delivered if the recipient is not connected to the message server when the message is sent. In this case the recipient may receive a notification that a message is queued for later delivery. The notification may be a single ring of the recipient s mobile device generated by the message server but using a different originating number from that used for the notification when the message has been delivered so as to enable the user to optionally utilise mobile device features such as distinct ringtones mapped to sending numbers.

A sender and a recipient may send and receive multiple messages during a chat session. The user interface may be similar to that of a desktop instant messaging program. For example an exemplary user interface of sender is shown in . A left arrow indicates a message sent by the sender while a right arrow represents a received message. Depending on configurable user preferences the recipient with phone number may choose to have his or her presence known to the sender see in . Using the presence information the sender may then stop sending new messages to the recipient if the latter has gone offline.

Besides performing address verification the message server also maintains user authentication. Authentication is simple and does not require a user to create a user name tag like existing MIM servers. Instead the user s mobile phone number is the default identifier. Authentication adds the mobile phone number to the subscriber address list.

Referring to again the message server receives each message that is sent using a packet switched bearer. Each message is in an XML format. and the message server parses the message to determine the destination address.

The message server is also in communication with third party content providers over the Internet . When the message server identifies a destination address corresponding to a third party content provider it automatically sends the message to the third party. The third party may for example depending on the presence of keywords send additional information related to the keywords to the sender . However a user may disable this feature.

For example if the message contains the name of a certain brand BUYME information concerning where to buy the product or its latest promotion will be retrieved from the third party content provider in communication with the message server. In this case depending on the capability of the recipient s mobile device the information may be sent as a conventional SMS or as a text message via a packet switched bearer with optionally one or more attachments.

User privacy may be protected by not revealing a user s phone number to a third party without the consent of the user. For example a user may send a query to a third party content provider to ask about the weather forecast in a particular location via the message server . To hide a user s identity the message server may dynamically create a random number that maps to the user s actual mobile number and passes the query to the third party content provider . Further this mapping may be dynamic not static to ensure that the third party is not able to determine information about the general behaviour of the users.

Similar to user to user messages the type of advertising and marketing message that is sent to a user also depends on the capabilities of the user s handset. Therefore since the message server is aware of the capabilities of user s handsets as user handsets are upgraded the message server is able to target those users with enhanced multimedia message content.

It will be appreciated by persons skilled in the art that numerous variations and or modifications may be made to the invention as shown in the specific embodiments without departing from the spirit or scope of the invention as broadly described. For instance the current application outlines how a user when using a message client will be prompted to use an SMS if the recipient is not a user of the message service. The existing context of this is that the user is initiating the message. The functionality can be extended to the situation where a message is sent using the message client with the goal of prompting the user to send a response SMS. This can be useful in generating SMS traffic from third parties by sending one message that prompted the recipients to select one or more voting buttons each of which causes an SMS to be sent to a specific premium number.

Conversely the same concept works well for a community of users of a message client who do not wish to use premium numbers. The entire community can be polled. Each receives an indication to select a voting button and the selections each cause a message with predetermined text to be sent to a predetermined recipient. This minimises the event of false responses that cannot be counted.

The present embodiments are therefore to be considered in all respects as illustrative and not restrictive.

