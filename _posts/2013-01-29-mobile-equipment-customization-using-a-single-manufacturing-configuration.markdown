---

title: Mobile equipment customization using a single manufacturing configuration
abstract: Personalization of a mobile device, including receiving at the mobile device a unique code; selecting, from a plurality of personalization policies stored on the mobile device a personalization policy that corresponds to the unique code; and storing the selected personalization policy in a persistent protected storage element of the mobile device. Customizing a mobile device, including determining at the mobile device a unique code; selecting, from a plurality of customized data sets stored on the mobile device a data set that corresponds to the unique code; and activating the selected data set on the mobile device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08892086&OS=08892086&RS=08892086
owner: 2236008 Ontario Inc.
number: 08892086
owner_city: Waterloo
owner_country: CA
publication_date: 20130129
---
A mobile device manufacturer will frequently provide the same type of device to service providers such as network operators and carriers. The devices are personalized or otherwise customized for each service provider which can for example include personalizing mobile devices to so that they can only be used with that particular service provider.

The Third Generation Partnership Project 3GPP has generated technical specifications in respect of personalization of Mobile Equipment ME as set out for example in 3GPP TS 22.022 version 11.0.0 Release 11. The personalization of ME MEP standard provides specifications for various personalization categories including service provider personalization network personalization network subset personalization corporate personalization and SIM Subscriber Identity Module or USIM User Services Identity Module the equivalent of the SIM card for 3G UMTS mobile devices personalization. Any combination of these personalization categories may be activated or deactivated on a mobile device as they operate independently of each other and any one personalization category may have more than one personalization code configured e.g. configuring a mobile device to be operable on more than one service provider s network . Some codes require other codes to be activated as well defining a code group. For instance service provider personalization requires activation of both service provider and network codes.

The use of a mobile device is limited based on the activated personalization categories the personalization codes of which are compared against values stored on the inserted SIM USIM card whenever the mobile device is powered on or a SIM USIM is inserted. If the check fails the mobile device is placed into a limited service mode in which only emergency calls are possible. If a match is found with any of the code groups stored in the mobile device the check is passed for that category and the mobile device enters normal operation albeit restricted in its use to a personalization policy determined by the activated personalization codes e.g. the mobile device may only be operable in normal operation mode on the network of service provider C .

As noted above specifications such as 3GPP TS 22.022 provide for the personalization of Mobile Equipment MEP . MEP requirements can present challenges for organizations such as manufacturers who provide mobile devices to multiple service providers as the device provider must ensure that each mobile device is pre configured with the correct service provider SP personalization policy for the service provider that the device will ultimately be supported by. Pre configuring a mobile device can involve burning the SP personalization policy into a persistent protected memory of the mobile device effectively locking the mobile device to a specific network provider a process referred to herein as MEP locking . MEP locking can for example be performed at an assembly location for the mobile device. However in order to maintain flexibility in the mobile device distribution chain it is desirable to delay MEP locking of a mobile device to later points in the distribution chain.

Accordingly example embodiments are described herein which allow MEP locking of mobile devices to be performed post assembly in the mobile device distribution chain.

One example embodiment relates to personalization of a mobile device including receiving at the mobile device a unique code selecting from a plurality of personalization policies stored on the mobile device a personalization policy that corresponds to the unique code and storing the selected personalization policy in a persistent protected storage element of the mobile device.

Another example embodiment related to customizing a mobile device including determining at the mobile device a unique code selecting from a plurality of customized data sets stored on the mobile device a data set that corresponds to the unique code and activating the selected data set on the mobile device. According to one example embodiment there is provided a method for customizing a mobile device. The method includes receiving at the mobile device information providing a service provider identity selecting from a plurality of customized data sets stored on the mobile device a data set that corresponds to the service provider identity and activating the selected data set on the mobile device.

According to another example embodiment there is provided a mobile device configured to automatically customize for a service provider. The device includes a controller for controlling the operation of the device a communication subsystem connected to the controller configured for at least data communication with a wireless network and a first storage element having stored thereon a plurality of customized data sets each customized data set being indexed by a unique service provider identity. The controller being configured for receiving service provider identity information selecting from the plurality of customized data sets a data set indexed by the unique service provider identity that corresponds to the received service provider identity information and activating the selected data set on the mobile device.

Reference will now be made to the accompanying drawings. For simplicity and clarity of illustration reference numerals may be repeated among the Figures to indicate corresponding or analogous elements. Numerous details are set forth to provide an understanding of the example embodiments described herein. The example embodiments may be practised without some of these details. In other instances well known methods procedures and components have not been described in detail to avoid obscuring the example embodiments described. The description is not to be considered as limited to the scope of the example embodiments described herein.

Reference is first made to which shows in block diagram form a communication system in which example embodiments of the present disclosure can be applied. The communication system comprises a number of mobile communication devices mobile devices which may be connected to the remainder of system in any of several different ways. Accordingly several instances of mobile communication devices are depicted in employing different example ways of connecting to system . Mobile communication devices are connected to a wireless communication network which may comprise one or more of a Wireless Wide Area Network WWAN and a Wireless Local Area Network WLAN or other suitable network arrangements. In some embodiments the mobile communication devices are configured to communicate over both the WWAN and WLAN and to roam between these networks. In some embodiments the wireless network may comprise multiple WWANs and WLANs .

The WWAN may be implemented as any suitable wireless access network technology. By way of example but not limitation the WWAN may be implemented as a wireless network that includes a number of transceiver base stations one of which is shown in where each of the base stations provides wireless Radio Frequency RF coverage to a corresponding area or cell. The WWAN is typically operated by a mobile network service provider that provides subscription packages to users of the mobile communication devices . In some embodiments the WWAN conforms to one or more of the following wireless network types Mobitex Radio Network DataTAC GSM Global System for Mobile Communication GPRS General Packet Radio System TDMA Time Division Multiple Access CDMA Code Division Multiple Access CDPD Cellular Digital Packet Data iDEN integrated Digital Enhanced Network EvDO Evolution Data Optimized CDMA2000 EDGE Enhanced Data rates for GSM Evolution UMTS Universal Mobile Telecommunication Systems HSDPA High Speed Downlink Packet Access IEEE 802.16e also referred to as Worldwide Interoperability for Microwave Access or WiMAX or various other networks. Although WWAN is described as a Wide Area network that term is intended herein also to incorporate wireless Metropolitan Area Networks WMAN and other similar technologies for providing coordinated service wirelessly over an area larger than that covered by typical WLANs.

The WWAN may further comprise a wireless network gateway which connects the mobile communication devices to transport facilities and through the transport facilities to a wireless connector system . Transport facilities may include one or more private networks or lines the public internet a virtual private network or any other suitable network. The wireless connector system may be operated for example by an organization or enterprise such as a corporation university or governmental department which allows access to a network such as an internal or enterprise network and its resources or the wireless connector system may be operated by a mobile network provider. In some embodiments the network may be realised using the Internet rather than an internal or enterprise network.

The wireless network gateway provides an interface between the wireless connector system and the WWAN which facilitates communication between the mobile communication devices and other devices not shown connected directly or indirectly to the WWAN . Accordingly communications sent via the mobile communication devices are transported via the WWAN and the wireless network gateway through transport facilities to the wireless connector system . Communications sent from the wireless connector system are received by the wireless network gateway and transported via the WWAN to the mobile communication devices .

The WLAN comprises a wireless network which in some embodiments conforms to IEEE 802.11x standards sometimes referred to as Wi Fi such as for example the IEEE 802.11a 802.11b and or 802.11g standard. Other communication protocols may be used for the WLAN in other embodiments such as for example IEEE 802.11n IEEE 802.16e also referred to as Worldwide Interoperability for Microwave Access or WiMAX or IEEE 802.20 also referred to as Mobile Wireless Broadband Access . The WLAN includes one or more wireless RF Access Points AP one of which is shown in that collectively provide a WLAN coverage area.

The WLAN may be a personal network of the user an enterprise network or a hotspot offered by an internet service provider ISP a mobile network provider or a property owner in a public or semi public area for example. The access points are connected to an access point AP interface which may connect to the wireless connector system directly for example if the access point is part of an enterprise WLAN in which the wireless connector system resides or indirectly via the transport facilities if the access point is a personal Wi Fi network or Wi Fi hotspot in which case a mechanism for securely connecting to the wireless connector system such as a virtual private network VPN may be required . The AP interface provides translation and routing services between the access points and the wireless connector system to facilitate communication directly or indirectly with the wireless connector system .

The wireless connector system may be implemented as one or more servers and is typically located behind a firewall . The wireless connector system manages communications including email messages to and from a set of managed mobile communication devices . The wireless connector system also provides administrative control and management capabilities over users and mobile communication devices which may connect to the wireless connector system .

The wireless connector system allows the mobile communication devices to access the network and connected resources and services such as a messaging server for example a Microsoft Exchange IBM Lotus Domino or Novell GroupWise email messaging server and optionally other servers . The other servers may comprise a content server for providing content such as internet content or content from an organization s internal servers to the mobile communication devices in the wireless network and an application server for implementing server based applications such as instant messaging IM applications. The other servers may be connected to databases required by the other servers to carry out certain functions of the other servers .

The wireless connector system typically provides a secure exchange of data e.g. email messages personal information manager PIM data and IM data with the mobile communication devices . In some embodiments communications between the wireless connector system and the mobile communication devices are encrypted. In some embodiments communications are encrypted using a symmetric encryption key implemented using Advanced Encryption Standard AES or Triple Data Encryption Standard Triple DES encryption. Private encryption keys are generated in a secure two way authenticated environment and are used for both encryption and decryption of data.

The wireless network gateway is adapted to send data packets received from the mobile device over the WWAN to the wireless connector system . The wireless connector system then sends the data packets to the appropriate connection point such as the messaging server content server or application servers . Conversely the wireless connector system sends data packets received for example from the messaging server content server or application servers to the wireless network gateway which then transmit the data packets to the destination mobile device . The AP interfaces of the WLAN provide similar sending functions between the mobile device the wireless connector system and network connection point such as the messaging server content server and application server .

The network may comprise a private local area network metropolitan area network wide area network the public Internet or combinations thereof and may include virtual networks constructed using any of these alone or in combination.

A mobile device may alternatively connect to the wireless connector system using a computer such as desktop or notebook computer via the network . A link may be provided for exchanging information between the mobile device and computer connected to the wireless connector system . The link may comprise one or both of a physical interface and short range wireless communication interface. The physical interface may comprise one or combinations of an Ethernet connection Universal Serial Bus USB connection Firewire also known as an IEEE 1394 interface connection or other serial data connection via respective ports or interfaces of the mobile device and computer . The short range wireless communication interface may be a personal area network PAN interface. A personal area network is a wireless point to point connection meaning no physical cables are required to connect the two end points. The short range wireless communication interface may comprise one or a combination of an infrared IR connection such as an Infrared Data Association IrDA connection a short range radio frequency RF connection such as one specified by IEEE 802.15.1 or the Bluetooth special interest group or IEEE 802.15.3a also referred to as UltraWideband UWB or other PAN connection.

It will be appreciated that the above described communication system is provided for the purpose of illustration only and that the above described communication system comprises one possible communication network configuration of a multitude of possible configurations for use with the mobile communication devices . The teachings of the present disclosure may be employed in connection with any other type of network and associated devices that are effective in implementing or facilitating wireless communication. Suitable variations of the communication system will be understood to a person of skill in the art and are intended to fall within the scope of the present disclosure.

Reference is now made to which illustrates a mobile device in which example embodiments described in the present disclosure can be applied. The mobile device is a two way communication device having data and voice communication capabilities and the capability to communicate with other computer systems for example via the Internet. Depending on the functionality provided by the mobile device in various embodiments the device may be a multiple mode communication device configured for both data and voice communication a smartphone a mobile telephone a PDA personal digital assistant enabled for wireless communication or a computer system with a wireless modem.

The mobile device includes a rigid case not shown housing the components of the device . The internal components of the device are constructed on a printed circuit board PCB . The mobile device includes a controller comprising at least one processor such as a microprocessor which controls the overall operation of the device . The processor interacts with device subsystems such as a wireless communication subsystem for exchanging radio frequency signals with the wireless network to perform communication functions. The processor interacts with additional device subsystems including a display screen such as a liquid crystal display LCD screen input devices such as a keyboard and control buttons flash memory random access memory RAM non volatile random access memory NVRAM read only memory ROM auxiliary input output I O subsystems data port such as a serial data port such as a Universal Serial Bus USB data port speaker microphone short range wireless communication subsystem and other device subsystems generally designated as . Some of the subsystems shown in perform communication related functions whereas other subsystems may provide resident or on device functions.

The device may comprise a touchscreen display in some embodiments. The touchscreen display may be constructed using a touch sensitive input surface connected to an electronic controller and which overlays the display screen . The touch sensitive overlay and the electronic controller provide a touch sensitive input device and the processor interacts with the touch sensitive overlay via the electronic controller.

The communication subsystem includes a receiver a transmitter and associated components such as one or more antenna elements and local oscillators LOs and a processing module such as a digital signal processor DSP . The antenna elements and may be embedded or internal to the mobile device and a single antenna may be shared by both receiver and transmitter as is known in the art. As will be apparent to those skilled in the field of communication the particular design of the wireless communication subsystem depends on the wireless network in which mobile device is intended to operate.

The mobile device may communicate with any one of a plurality of fixed transceiver base stations of the wireless network within its geographic coverage area. The mobile device may send and receive communication signals over the wireless network after the required network registration or activation procedures have been completed. Signals received by the antenna through the wireless network are input to the receiver which may perform such common receiver functions as signal amplification frequency down conversion filtering channel selection etc. as well as analog to digital A D conversion. A D conversion of a received signal allows more complex communication functions such as demodulation and decoding to be performed in the DSP . In a similar manner signals to be transmitted are processed including modulation and encoding for example by the DSP . These DSP processed signals are input to the transmitter for digital to analog D A conversion frequency up conversion filtering amplification and transmission to the wireless network via the antenna . The DSP not only processes communication signals but may also provide for receiver and transmitter control. For example the gains applied to communication signals in the receiver and the transmitter may be adaptively controlled through automatic gain control algorithms implemented in the DSP .

The processor operates under stored program control and executes software modules stored in memory such as persistent memory for example in the flash memory . As illustrated in the software modules comprise operating system software and software applications . Those skilled in the art will appreciate that the software modules or parts thereof may be temporarily loaded into volatile memory such as the RAM . The RAM is used for storing runtime data variables and other types of data or information as will be apparent to those skilled in the art. Although specific functions are described for various types of memory this is merely one example and those skilled in the art will appreciate that a different assignment of functions to types of memory could also be used.

The software applications may include a range of applications including for example an email messaging application address book calendar application notepad application Internet browser application voice communication i.e. telephony application mapping application or a media player application or any combination thereof. Each of the software applications may include layout information defining the placement of particular fields and graphic elements e.g. text fields input fields icons etc. in the user interface i.e. the display screen according to the application. Data for use by applications can also be stored on flash memory .

In some embodiments the auxiliary input output I O subsystems may comprise an external communication link or interface for example an Ethernet connection. The mobile device may comprise other wireless communication interfaces for communicating with other types of wireless networks for example a wireless network such as an orthogonal frequency division multiplexed OFDM network or a GPS Global Positioning System subsystem comprising a GPS transceiver for communicating with a GPS satellite network not shown . The auxiliary I O subsystems may comprise a pointing or navigational tool input device such as a clickable trackball or scroll wheel or thumbwheel or a vibrator for providing vibratory notifications in response to various events on the device such as receipt of an electronic message or incoming phone call or for other purposes such as haptic feedback touch feedback .

In some embodiments the mobile device also includes a removable memory card typically comprising flash memory and a memory card interface that controls network access. Network access typically associated with a subscriber or user of the mobile device via the memory card which may be a Subscriber Identity Module SIM card for use in a GSM network or other type of memory card such as a User Services Identity Module USIM card for use in the relevant wireless network type. The memory card is inserted in or connected to the memory card interface of the mobile device in order to operate in conjunction with the wireless network .

The mobile device also stores other data in an erasable persistent memory which in one example embodiment is the flash memory . In various embodiments the data includes service data comprising information required by the mobile device to establish and maintain communication with the wireless network . The data may also include user application data such as email messages address book and contact information calendar and schedule information notepad documents image files and other commonly stored user information stored on the mobile device by its user and other data. The data stored in the persistent memory e.g. flash memory of the mobile device may be organized at least partially into a number of databases each containing data items of the same data type or associated with the same application. For example email messages contact records and task items may be stored in individual databases within the device memory. Other data such as records of mobile equipment personalization codes may be stored in the data and contained in the flash memory .

The serial data port may be used for synchronization with a user s host computer system not shown . The serial data port enables a user to set preferences through an external device or software application and extends the capabilities of the mobile device by providing for information or software downloads to the mobile device other than through the wireless network . The alternate download path may for example be used to load an encryption key onto the mobile device through a direct reliable and trusted connection to thereby provide secure device communication.

In some embodiments the mobile device is provided with a service routing application programming interface API which provides an application with the ability to route traffic through a serial data e.g. USB or short range peer to peer wireless e.g. Bluetooth connection to the host computer system using standard connectivity protocols. When a user connects their mobile device to the host computer system via for example a USB cable or Bluetooth connection traffic that was destined for the wireless network is automatically routed to the mobile device using the USB cable or Bluetooth connection. Similarly any traffic destined for the wireless network is automatically sent over the USB cable or Bluetooth connection to the host computer system for processing.

The mobile device also includes a battery as a power source which is typically one or more rechargeable batteries that may be charged for example through charging circuitry coupled to a battery interface such as the serial data port . The battery provides electrical power to at least some of the electrical circuitry in the mobile device and the battery interface provides a mechanical and electrical connection for the battery . The battery interface is coupled to a regulator not shown which provides power V to the circuitry of the mobile device .

The short range communication subsystem is an additional optional component which provides for communication between the mobile device and different systems or devices which need not necessarily be similar devices. For example the subsystem may include an infrared device and associated circuits and components or a wireless bus protocol compliant communication mechanism such as a Bluetooth communication module to provide for communication with similarly enabled systems and devices.

A predetermined set of applications that control basic device operations including data and possibly voice communication applications will normally be installed on the mobile device during or after manufacture. Additional applications and or upgrades to the operating system or software applications may also be loaded onto the mobile device through the wireless network the auxiliary I O subsystem the serial port the short range communication subsystem or other suitable subsystem . The downloaded programs or code modules may be permanently installed for example written into the program memory i.e. the flash memory the NVRAM or written into and executed from the RAM for execution by the processor at runtime. Such flexibility in application installation increases the functionality of the mobile device and may provide enhanced on device functions communication related functions or both. For example secure communication applications may enable electronic commerce functions and other such financial transactions to be performed using the mobile device .

The mobile device may provide two principal modes of communication a data communication mode and an optional voice communication mode. In the data communication mode a received data signal such as a text message an email message or Web page download will be processed by the communication subsystem and input to the processor for further processing. For example a downloaded Web page may be further processed by a browser application or an email message may be processed by the email messaging application and output to the display . A user of the mobile device may also compose data items such as email messages for example using the input devices in conjunction with the display screen . These composed items may be transmitted through the communication subsystem over the wireless network .

In the voice communication mode the mobile device provides telephony functions and operates as a typical cellular phone. The overall operation is similar except that the received signals would be output to the speaker and signals for transmission would be generated by a transducer such as the microphone . The telephony functions are provided by a combination of software firmware i.e. the voice communication module and hardware i.e. the microphone the speaker and input devices . Alternative voice or audio I O subsystems such as a voice message recording subsystem may also be implemented on the mobile device . Although voice or audio signal output is typically accomplished primarily through the speaker the display screen may also be used to provide an indication of the identity of a calling party duration of a voice call or other voice call related information.

As noted above example embodiments are described herein which allow MEP locking of a mobile device to be performed post assembly in the mobile device distribution chain. In this regard the applications stored on a mobile device include a MEP policy manager module . In one example the MEP policy manager module is part of a set of instructions associated with a boot up manager BM resident on the mobile device .

Referring now to an example embodiment of implementing SP personalization is described. At action a manufacturer of mobile devices configures all mobile devices with service provider specific data sets in the form of the SP personalization policies for all of the service providers which the mobile devices may ultimately end up being allocated to. In one example embodiment Action is carried out as part of the basic software build for a mobile device for example when operating system is provided on mobile device . Action could for example be carried out at the same facility at which the mobile device is finally assembled or could be at a component facility at which the circuit board for the mobile device is assembled. Referring to in an example embodiment the SP personalization polices are stored in a SP policy database as part of data stored in erasable flash memory of the mobile device although the SP personalization policies could be stored in other persistent memory on the mobile device .

Each SP personalization policy stored in SP policy database is indexed or otherwise associated with a unique service provider identifier such as an equipment carrier identifier ECID code and each SP personalization policy includes the codes or instructions required to lock the mobile device to the associated service provider and in at least some examples a specific service provider network.

In some example embodiments only a subset of SP personalization policies are stored in the SP policy database . For example where it is known that one physical group of mobile devices are destined for a first geographical region and another physical group of mobile devices are destined for another second geographical region only the SP personalization policies for service providers in the first geographical region are stored on the first group of devices and only the SP personalization policies for the service providers in the second geographical region are stored on the second group of devices.

Accordingly in example embodiments once Action has been performed the mobile device is generically provisioned with the SP personalization policies for all service providers to whom the mobile device could logically be provided. The generically provisioned mobile device can then be personalized at some point further down the supply chain for a specific service provider as indicated in Actions and .

Action occurs once a distribution decision has been made to provide a particular mobile device to a particular service provider. By way of example Action could occur at a packaging and distribution facility where batches of mobile devices are provisioned and packaged for specific service providers. At Action the ECID code for the service provider to which the mobile device is to be locked is provided to and stored on the mobile device. By way of example schematically represents a workstation at which an ECID code is inserted into mobile device according to action . In the mobile device is connected by a communication link which could for example includes a wired link such as a USB cable to a configuration terminal that is configured to write the ECID code to the mobile device . The configuration terminal could for example be set up by an operator to write a specified ID code to a batch of predetermined quantity of mobile devices that are connected to the configuration terminal which at the same time obtains from and records unique identifiers from each of the mobile devices . In an example embodiment the ECID code is written to a predetermined memory location on the mobile device for example to a predetermined location of flash memory . In some example embodiments the predetermined ECID code memory location is pre populated during the original device software build in Action with a place holder value that signifies that the mobile device has not yet been provisioned with a specified ECID code for example a value of 0 or 999999 or other predetermined place holder could be written to the memory location to signify that the device has not yet been assigned to a specific service provider.

Upon completion of Action the mobile device has stored on it an SP policy database that includes the service provider personalization policies for multiple service providers as well as an ECID code that identifies the specific service provider for the specific mobile device . In at least some example embodiments the ECID code memory location is in re writable persistent memory so that the opportunity remains to re provision the mobile device for a different service provider in the event that a decision is made that requires that the device be routed to a different service provider. However in alternative embodiments the ECID code memory location is in protected non volatile RAM NVRAM such that the ECID code cannot be varied by unauthorized parties once it has been written to the mobile device .

Upon completion of Action the mobile device is ready to be placed in the distribution network of the service provider whose ECID code is stored in ECID code memory location . The final MEP locking of mobile device occurs in Action . In particular the mobile device is configured to detect when the initial boot up of the device occurs subsequent to Action and at that time select from the SP policy database the specific SP personalization policy associated with the ECID code stored at ECID code memory location . The selected SP personalization policy is then written to a protected persistent storage element on the mobile device such as NVRAM . Any future network use of the mobile device requires that the SP personalization policy stored in protected persistent storage NVRAM is consistent with any SIM USIM module that is inserted in memory interface thus locking the mobile device to the specific service provider. In example embodiments NVRAM is protected in that the data it contains cannot be erased by unauthorized parties. In one example in order to remove a SP personalization policy once it is stored in NVRAM requires one or more of specialized access tools or codes that are controlled by the device manufacturer and its authorized agents.

In some applications an initial boot cycle after action may for example occur when a SIM USIM card is inserted into the mobile device at delivery to an end user and the mobile device is first powered on. In an example embodiment the boot up manager for the mobile device is configured to determine if the boot cycle is the initial boot cycle and if so then activate the MEP policy manager . The MEP policy manager is configured to determine if step has been completed and if so then perform the MEP locking as described above in respect of step . In one example embodiment the MEP policy manager is configured to determine if step has been completed by checking the ECID code memory location to determine if an ECID code has been stored to the mobile device instead of a pre determined place holder code. In some example embodiments the MEP policy manager may also be configured to check NVRAM to determine if the mobile device is ready for MEP locking for example the presence of an ECID code at memory location combined with the absence of a corresponding SP personalization policy in NVRAM indicates that Action has occurred but Action needs to be performed.

It will be appreciated that process delays the need to assign a mobile device to a specific service provider to further in the distribution system than the software build manufacturing stage. Additionally even once a carrier specific ECID code is provided to the device at Action the option still exists to assign a different ECID code and thus re direct the device to a different carrier up until the initial boot occurs after which the device and its end user are locked to a specified service provider. As noted above in some example embodiments the protected storage in which the SP Policy is stored may in some examples be erased by an authorized entity allowing restricted parties to re provision a mobile device to a different service provider in some circumstances.

A variation on the MEP locking process described above will now be described with reference to . The MEP locking process of which can also be applied to mobile device is similar to that described above with the exception of differences that will be apparent from the following description. In one example embodiment process allows a mobile device to be personalized for a specific service provider over the air once the device reaches an end user providing enhanced supply chain flexibility.

MEP locking process begins the same as process with Action carried out as part of the basic software build for a mobile device . As described above a SP policy database is stored on the flash memory of mobile device which includes the SP personalization polices for all service providers that the mobile device could be allocated to and each SP personalization policy stored in SP policy database is indexed or otherwise associated with a unique service provider identifier such as an ECID code.

Once Action has occurred in process the mobile device can be allocated to a service provider and placed in the service provider s distribution chain. In process a Web accessible centralized database see is updated to map a unique identifier for the mobile device for example the device s International Mobile Equipment Identity IMEI number to the service provider identifier for example the ECID code . The centralized database could for example be maintained and updated by a manufacturer of the mobile devices with input from collaborating parties in the mobile device supply chain. The centralized database allows mobile devices to be dynamically allocated to respective service providers and reallocated as necessary right up until an initial device boot up without requiring any changes to the SP personalization policies stored on the devices.

Upon completion of Action the mobile device is ready to be provided to an end user. As indicated in Action the mobile device is configured to detect when an initial boot up of the mobile device occurs for example when the mobile device is first turned on with a SIM USIM card inserted. When initial boot up is detected the MEP policy manger causes the device to automatically perform a wireless transaction through wireless communications network to access Internet accessible centralized database . At the time that Action is performed the mobile device has only restricted access to wireless network but such access is sufficient to allow the MEP policy manager to access a predetermined Internet address associated with the database and provide a unique identifier for the mobile device for example its IMEI number to database . In reply the database provides to the mobile device the service provider identifier for example the ECID code for the service provider that the mobile device is mapped to in database .

As indicated in Action immediately after the ECID code is obtained from database the MEP policy manager selects from the SP policy database the specific SP personalization policy associated with the received ECID code. The selected SP personalization policy is then written to protected persistent storage element on the mobile device such as NVRAM . Any future network use of the mobile device requires that the SP personalization policy stored in protected persistent storage NVRAM is consistent with any SIM USIM module that is inserted in memory interface thus locking the mobile device to the specific service provider.

In some example embodiments as part of Action or the mobile device stores the ECID code in local storage such as flash memory in a set or predetermined memory location and overwrites a known place holder value providing a marker that Actions and have already been carried out in respect of the mobile device . In some example embodiments Action could be carried out using a physical connection between the mobile device and the Internet.

It would be appreciated by someone of skill in the art that database can be updated with new ECID information at any time before the execution of either of steps and . As noted above database may be maintained by the manufacturer or an entity other than the manufacturer downstream in the distribution chain of the device from the manufacturer such as a company or other entity responsible for the logistics of distributing the mobile devices to their respective destinations e.g. to different service providers .

In some embodiments the configuration terminal used in Action of process could be configured to obtain the ECID code for a particular mobile device by accessing a database such as database on which device identifiers are mapped to ECID codes.

In addition to MEP locking in some example embodiments the mobile device is configured to allow for additional or alternative Service Provider SP customizations. In this regard in addition to MEP policy manager module the applications stored on a mobile device can also include a Service Provider SP customization manager module . In some embodiments the MEP policy manager module may be a sub module of Service Provider SP customization manager module . Service Provider SP customization manager module may be part of a boot up manager BM resident on the mobile device .

Service providers such as carriers may have carrier specific branding device configurations and error messages that they would like to have supported by mobile devices used by their customers. For example branding can include among other things default wallpaper splashscreens ringtones icons and logos device configuration can specify whether various device features are enabled or disabled or restricted and other device parameters including for example parameters relating to Access Point Name APN Multimedia Messaging Service MMS APN and restrictions on mobile hotspot Near Field Communication NFC or WiFi usage. Error messages can include error codes and text visual audible or physical messages associated with various error codes which may for example result from network or device errors.

The number of unique messages and configuration parameters per service provider could be in the hundreds or greater. Delaying device customization to as late as possible in the distribution chain while at the same time limiting the amount of data that needs to be loaded onto a device at initial end user boot up is desired. Accordingly an example embodiment is presented herein in which a mobile device manufacturer or provider pre configures each mobile device with carrier specific message and configuration data for all service providers that the device could ultimately be provided to. Upon initial boot up by an end user the device activates the set of messages and configuration data that are associated with the service provider that it is activated with.

Referring now to an example embodiment of implementing SP customization is described. At action a manufacturer of mobile devices maintains a customization database that stores for each service provider on whose network the mobile device may be activated on a unique service provider SP custom data set. The SP custom data set includes for each service provider one or more of the following 1 An SP branding data set that includes all branding data that the service provider wants presented on mobile devices it supports including one or more files including one or more of image data text data sound data audio data physical vibration data and device light activation data 2 An SP error message data set that includes all error messages that the service provider wants presented on mobile devices it supports including one or more of image data text data sound data audio data physical vibration data and device light activation data and 3 An SP device configuration data set that includes configuration data that the service provider wants applied to the mobile devices it supports including for example parameters relating to APN MMS APN and restrictions on mobile hotspot NFC or WiFi usage among other things. At least some of the messages in the SP branding data set and the SP error message set are indexed by corresponding numerical message codes.

Each SP custom data set is mapped to a respective service provider SP identifier which could for example be a Carrier identity CID which in turn could be mapped to other carrier identifying information such as but not limited to one or more of the following as appropriate Mobile Country Code MCC network subset code service provider code Mobile Network Code MNC Elementary File Group Identifier EFGID ICCID ECID International Mobile Equipment Identity IMEI or MSISDN. In one example embodiment the device provider allows each service provider to have access to the customization database for example through an Internet interface so that individual service providers can each provide the data required for their respective custom data sets. In some examples the data as provided by the respective service providers may be modified re formatted or compressed as desired for inclusion as SP data sets in the database. In some examples SP data sets stored in the custom database are device specific device software version specific or specific to a geographic region. By way of example geographic region could be determined in accordance with one or more of device IP address region of first device activation home country in which a subscriber agreement or warranty was established for a device among other things. The custom database could for example be implemented at database .

As indicated at action all mobile devices are each provided with the SP data sets for all of the service providers that the mobile devices may ultimately end up being allocated to. In one example embodiment Action is carried out as part of the basic software build for a mobile device for example when operating system is provided on mobile device . Action could for example be carried out at the same facility at which the mobile device is finally assembled or could be at a component facility at which the circuit board for the mobile device is assembled. Referring to in an example embodiment the SP data sets are stored as part of data stored in erasable flash memory of the mobile device for example as part of the SP policy database although the SP data sets could be stored in other persistent memory on the mobile device .

As noted above each SP data set stored in SP policy database is indexed or otherwise associated with a unique SP identifier and each SP data set includes one or more of the branding data set and error message code data set and configuration parameter data set for the specific service provider.

In some example embodiments only a subset of SP data sets from the custom database are stored in the SP policy database . Filtering could for example be formed based on device type or geographical destination.

Accordingly in example embodiments once action has been performed the mobile device is generically provisioned with the SP data sets for all service providers to whom the mobile device could logically be provided. The generically provisioned mobile device can then be customized with a specific SP data set for a specific service provider as indicated in action .

Regarding Action in an example embodiment a boot up manager on the mobile device is configured to detect when the mobile device goes through boot up for the first time subsequent to a new SIM or USIM card being inserted thereby activating the device on a specific service provider s network. When the boot up manager detects such a boot up the mobile device is configured to predict the carrier ID CID for the specific service provider the mobile device is being activated with based on information included on the newly inserted SIM USIM card. Fore example the CID could be predicted based on one or more of Mobile Country Code MCC network subset code service provider code Mobile Network Code MNC or Elementary File Group Identifier EFGID . The predicted CID is then used by the SP customization manager to select and extract the corresponding SP data set from the multiple message sets that are stored in the SP Policy Database and the device is configured to use the selected SP data set as its default SP data set going forward. In some example embodiments the selected data set is re saved on the mobile device in a different memory location or different format to mark it as the SP data set for future default use. For example the multiple SP data sets stored in SP policy database could have been stored in a compressed format during the device software build with the extracted SP data set being unpacked and re stored in a usable format in flash memory once the actual service provider is determined in Action . In some embodiments the SP data set could be broken up into multiple service provider data sets stored on the mobile device including for example an SP branding data set an SP error message data set and an SP configuration data set. In some example embodiments any device parameters for which SP configuration data is included in the Data Set are immediately set to the values specified in the SP configuration data.

In one example the mobile device includes default generic branding error message and configuration data sets pre stored in data and Action includes overwriting default values in the default data sets with corresponding values from the extracted SP data set . In some example embodiments if a service provider cannot be predicted in Action the default data set is left as is.

Accordingly in some example embodiments once Action is completed the mobile device is configured to operate using carrier specific parameters and to present carrier specific branding messages or error messages as specified in the activated SP data set By way of example when an application or other software running on the mobile device encounters a message code the message code is cross referenced to the selected SP data set and the text or image or audio prompt or physical prompt or lighting prompt or combinations thereof that corresponds to the message code is displayed or otherwise activated.

In some example embodiments the mobile device is configured to repeat action whenever a boot cycle occurs after a new SIM USIM card is inserted enabling the selected service provider specific data set to be re configured to the appropriate SP data set for the service provider associated with the new SIM USIM card. In some example embodiments the mobile device is configured to repeat action whenever any boot cycle occurs for any reason.

In some example embodiments the service provider identifier used in Action can be determined without referencing a SIM USIM card. For example the SP data sets stored in the SP policy database could be indexed by ECID codes the same way as the SP personalization policies are described above in respect of . In such example embodiments the SP identity could be determined for the mobile device as described in respect of Actions or above to determine an appropriate ECID code and the corresponding SP data set then activated.

It will thus be provided that customization process permits a mobile device to be generically pre loaded with one or more of messages branding data and configuration data for several carriers early in the device supply chain with one or more of the messages branding data or configuration data for a specific carrier being activated at or near the end of the supply chain. In some examples very specific configuration data can be included in the SP configuration data set including but not limited to parameters specific to a vehicle phone integration method or parameters specific to a mobile office setup.

In some example embodiments it is possible that by the time that mobile device boots up with a new SIM USIM card installed in Action the information included for a service provider in the factory installed SP data sets i.e. the SP data sets stored on the mobile device in Action is out of date. Additionally it may be possible in some embodiments that during Action an incorrect SP identity was predicted or not predicted at all from the data contained on the SIM USIM card. In this regard in some example embodiments process includes verification actions and that occur subsequent to SP data set extraction action .

In an example embodiment as indicated in verification action the mobile device is configured to do an over the air check on network to confirm that the service provider it has been activated with is indeed the service provider that the mobile device predicted in Action . If the actual service provider does not correspond to the service provider CID predicted in Action the mobile device can correct the predicted CID to match the actual CID derived from network and then extract and activate the appropriate SP data set from the multiple SP data sets stored on the mobile device . It is possible that the SP data sets stored on the mobile device do not include an SP data set for the actual service provider CID derived from network in which case the mobile device is configured to access a known database for example database through network to download and install the complete custom SP data set for the service provider.

In an example embodiment as indicated in verification action the mobile device is configured to do an over the air check through network or a check through communications link to confirm that the extracted SP data set is up to date. In one example embodiment the extracted SP data set includes a version number and mobile device transmits the version number to a remote location for example database through network or link to verify that the version on the mobile device is the most recent SP data set version. In the event that an updated version exists the remote location responds with a diff file or patch that the mobile device can use to update the out of date portions of extracted SP data set . As can be appreciated the use of a diff file or patch that includes only the subset of updated data can greatly reduce network and device resources over sending the entire SP data set to the mobile device . In some example embodiments SP data set version numbers can be provided to the mobile device on device activation or during periodic updates and the mobile device can be configured to request an update for example in the form of a diff file or patch from the custom SP data set database such as database if the mobile device determines that it does not have the most recent versions. Alternative verification checks could also be performed including checksums and the like in Action .

It is generally desirable that a correct time zone be automatically selected for a mobile device when the mobile device is first activated on its home network or on the first boot up of the mobile device after a new SIM USIM card has been installed. Accordingly in one example embodiment the SP configuration data sets provided to a mobile device as part of Action will include a default time zone to use for the specific service provider. During action the default home network time zone for the mobile device will be set to the time zone specified in the extracted SP data set . In an example embodiment the mobile device may be configured to automatically after activation compare the default time zone information with Network Information and Time Zone NITZ information if available on the service provider network and update the default time zone to the NITZ value if there is conflict between the NITZ specified time and the time zone specified in the extracted SP data set .

Referring to Service providers may have certain applications that they want to be loaded onto mobile devices that are activated on their networks. In one example embodiment one or more of the other servers is a Internet accessible software loading server A that may for example be maintained by a manufacturer or provider of mobile devices . The software loading server A implements or has access to a software database A that has stored on it all possible applications that all service providers who support mobile devices desire to have downloaded to mobile devices when they are activated on their respective networks. In an example embodiment the software applications present on database A are each indexed or classified by one or more of the following carrier identifier CID hardware ID and geographic or country ID and an optional or mandatory flag.

Turning again to the device SP customization process described above in respect of the custom data set for each service provider and in particular the data included in the SP device configuration data set for each service provider in the centralized SP database that is created in Action also includes a SP application flag or field which may for example be a binary field that indicates whether the service provider has software applications that must be loaded onto the mobile device before it is used in the service provider s network. The flag for each service provider is downloaded to each mobile device as part of Action .

After Action is completed and the custom configuration data set for a specific service provider is extracted and selected for default use on the mobile device as part of initial boot up after a new SIM USIM card install as indicated in Action the mobile device is configured to check the SP application flag to determine if the flag has been set to indicate a mandatory software download is required. If the flag indicates such a download is required the mobile device is configured to initiate a download session with software loading server A OTA through network or through a communication link in some embodiments . In at least some example embodiments the mobile device provides the software loading server A with one or more of a hardware ID a carrier identity and a geographic location such as a country code. Based on such information received from the mobile device the software loading server A determines which applications in SP applications database A need to be provided to the mobile device and returns a list of the applications to the mobile device along with an indication of whether the applications are optional or mandatory. In an example embodiment the mobile device is configured for example by the boot up manager to display a user interface that informs the device user of application downloads that are mandatory or optional to proceed further. Once the user feedback is received indicating that the user desires to proceed with the application install and which optional applications are to be installed the mobile device proceeds to download and install from SP applications database A the mandatory applications and any selected optional applications.

Accordingly the user Out of Box Experience is affected by a carrier specific flag pre loaded onto the mobile device during the original software load onto the device. In particular the carrier specific flag indicates once the device is associated with a carrier if the device needs to access the software loading server A for any carrier specific application software downloads before the mobile device can be used on the service provider s network. In some embodiments the mobile device is configured to check the flag for its new SP data set that is extracted whenever a new SIM USIM is inserted so that any required applications for the new service provider network will be downloaded to the device. In some examples the mobile device is configured to check the flag after a device wipe.

In some environments service provider specific applications resident on a mobile device including both applications downloaded through the software loading server A and from other sources may require access to sensitive data stored on the mobile device . In order to mitigate fraudulent use of such applications it is desirable to provide an added level of device security in which access permissions for service provider specific third party applications on the mobile device are tied to whether the SIM USIM card in the device corresponds to the service provider that is associated with the requesting application. In one example embodiment a trusted access permission module is installed on the mobile device to control access permissions granted to service provider specific applications. Access permission module could for example be a standalone application or part of the boot manager or other application or operating system software installed on the mobile device during the original software build. Alternatively access permission module could be downloaded from SP applications database A as a mandatory download during Action .

In an example embodiment when mobile device is first turned on once a new SIM USIM card is inserted as part of the boot up process the access permission module sets access permissions for any service provider specific applications that are installed on the mobile device by confirming that the service provider identified based on data on the SIM USM card corresponds to the service provider associated with the requesting applications. This verification matching process could include one or more of the following verification actions 1 the access permission module may compare a service provider ID received by the mobile device through a source other than the SIM USIM card for example by way of an ECID code provided to the mobile device as detailed above in respect of Action or Action in the context of MEP locking and then compare the ECID code to see if it corresponds to service provider information derived from the SIM USIM card 2 the access permission module may acquire a service provider ID received by the mobile device over the air through a network source and then compare that ID to see if it corresponds to service provider information derived from the SIM USIM card 3 the access permission module may compare identification information contained in the SP configuration data set loaded onto the device in Actions or to see if it corresponds to service provider information derived from the SIM USIM card or 4 the access permission module may compare SP identification information embedded or included with applications downloaded to the device for example from software loading server A to see if it corresponds to service provider information derived from the SIM USIM card. In the event that one or more of the verification procedures executed by the access permission module indicate a service provider mismatch access permissions will not be set for the SP application to access the restricted data. In an example embodiment an access permissions record is maintained on the device that identifies which SP applications have current access permission. In an example embodiment the access permissions are erased once the SIM USIM card that triggered the granting of the access permissions is subsequently removed. Subsequent insertion of a new SIM USIM card will cause the access permission module to create a new set of access permissions based on the service provider associated with the new SIM USIM card.

Accordingly in such an embodiment in order to provide improved security of restricted data an additional level of security is provided which ties the access permissions needed by the carrier specific applications to whether or not the designated carrier s SIM USIM is in the device and enabled. These access permissions are dynamically granted only by a trusted and privileged application based on SIM insertion and are revoked based on SIM removal.

The actions and or operations in the flowcharts and drawings described herein are for purposes of example only. There may be many variations to these actions and or operations without departing from the teachings of the present disclosure. For instance the actions may be performed in a differing order or actions may be added deleted or modified.

While the present disclosure is described at least in part in terms of methods a person of ordinary skill in the art will understand that the present disclosure is also directed to the various components for performing at least some of the aspects and features of the described methods be it by way of hardware components software or any combination of the two or in any other manner.

The present disclosure may be embodied in other specific forms without departing from the subject matter of the claims. The described example embodiments are to be considered in all respects as being only illustrative and not restrictive. The present disclosure intends to cover and embrace all suitable changes in technology. The scope of the present disclosure is therefore described by the appended claims rather than by the foregoing description.

