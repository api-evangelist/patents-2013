---

title: Forwarding multicast packets over different layer-2 segments
abstract: Embodiments of the disclosure are directed to forwarding multicast packets among disparate Virtual Local Area Networks (VLANs). An embodiment receives a multicast packet matching registration criteria of one or more ports and forwards the multicast packet to the one or more ports, wherein the one or more ports are in a different VLAN than a port from which the multicast packet was received.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09397929&OS=09397929&RS=09397929
owner: Ciena Corporation
number: 09397929
owner_city: Hanover
owner_country: US
publication_date: 20130422
---
Embodiments of the disclosure are directed to forwarding multicast packets over different layer 2 segments.

In computer networking a single layer 2 i.e. data link layer network may be partitioned or segmented to create multiple distinct broadcast domains. Such a domain is referred to as a Virtual Local Area Network VLAN . These broadcast domains are mutually isolated so that packets can only pass between them via one or more routers.

Currently there is no mechanism to forward multicast packets over different VLANs. This is a disadvantage in cloud computing data centers which are often designed as different layer 2 domains. As such fault notifications from one data center will not be propagated to another since they are in different VLANs. However applications running across different data centers should have the ability to know about fault notifications at other data centers. Currently this must be done manually or by an automated mechanism at the application level.

Accordingly there is a need for a mechanism to propagate multicast packets across multiple VLANs. Such a mechanism would save time over manual monitoring and would allow application programmers to write more efficient algorithms for fault notification across multiple data centers.

Embodiments of the disclosure are directed to forwarding multicast packets among disparate Virtual Local Area Networks VLANs . A method for forwarding multicast packets among disparate VLANs includes receiving a multicast packet matching registration criteria of one or more ports and forwarding the multicast packet to the one or more ports wherein the one or more ports are in a different VLAN than a port from which the multicast packet was received.

An apparatus for forwarding multicast packets among disparate VLANs includes logic configured to receive a multicast packet matching registration criteria of one or more ports and logic configured to forward the multicast packet to the one or more ports wherein the one or more ports are in a different VLAN than a port from which the multicast packet was received.

An apparatus for forwarding multicast packets among disparate VLANs includes means for receiving a multicast packet matching registration criteria of one or more ports and means for forwarding the multicast packet to the one or more ports wherein the one or more ports are in a different VLAN than a port from which the multicast packet was received.

A non transitory computer readable medium for forwarding multicast packets among disparate VLANs includes at least one instruction to receive a multicast packet matching registration criteria of one or more ports and at least one instruction to forward the multicast packet to the one or more ports wherein the one or more ports are in a different VLAN than a port from which the multicast packet was received.

Various aspects are disclosed in the following description and related drawings. Alternate aspects may be devised without departing from the scope of the disclosure. Additionally well known elements of the disclosure will not be described in detail or will be omitted so as not to obscure the relevant details of the disclosure.

The words exemplary and or example are used herein to mean serving as an example instance or illustration. Any aspect described herein as exemplary and or example is not necessarily to be construed as preferred or advantageous over other aspects. Likewise the term aspects of the disclosure does not require that all aspects of the disclosure include the discussed feature advantage or mode of operation.

Further many aspects are described in terms of sequences of actions to be performed by for example elements of a computing device. It will be recognized that various actions described herein can be performed by specific circuits e.g. application specific integrated circuits ASICs by program instructions being executed by one or more processors or by a combination of both. Additionally these sequence of actions described herein can be considered to be embodied entirely within any form of computer readable storage medium having stored therein a corresponding set of computer instructions that upon execution would cause an associated processor to perform the functionality described herein. Thus the various aspects of the disclosure may be embodied in a number of different forms all of which have been contemplated to be within the scope of the claimed subject matter. In addition for each of the aspects described herein the corresponding form of any such aspects may be described herein as for example logic configured to perform the described action.

Data communication networks may include various computers servers nodes routers switches bridges hubs proxies and other network devices coupled to and configured to pass data to one another. These devices are referred to herein as network elements or network devices. Data is communicated through the data communication network by passing protocol data units such as Internet Protocol IP packets Ethernet Frames data cells segments or other logical associations of bits bytes of data between the network elements by utilizing one or more communication links between the network elements. A particular protocol data unit may be handled by multiple network elements and cross multiple communication links as it travels between its source and its destination over the network.

In computer networking a single layer 2 the data link layer network may be partitioned or segmented to create multiple distinct broadcast domains. Such a domain is referred to as a Virtual Local Area Network VLAN . These broadcast domains are mutually isolated so that data packets can only pass between them via one or more routers. As such when a device in one VLAN transmits a multicast packet it is only delivered to the other devices in that VLAN. It is not transmitted to any of the other devices connected to the same switch but that are not part of the originating VLAN.

In the network contains a switch the ports of which are partitioned into VLANs and . The VLAN includes computers and . The VLAN includes computers and . VLANs and correspond to individual computers and may be referred to interchangeably as computers and . The switch may be a physical or virtual switch and the connections between the switch and the computers and may be wired or wireless.

Computers and can correspond to virtual machines or physical systems. A virtual machine is a simulation of an abstract or real world machine that typically differs from the target machine upon which it is being simulated. Where one or more of computers and correspond to physical systems the physical computers and or may correspond to any type of wired or wireless physical computers such as laptop computers desktop computers tablet computers and so on.

Currently there is no mechanism to forward multicast packets among different VLANs connected to the same switch. This means that switch only transmits multicast packets to the computers in the VLAN that includes the computer from which the packet was received here VLAN . This is one of the main disadvantages of data centers. Most data centers are designed as different layer 2 domains or VLANs so multicast packets such as fault notifications from one data center cannot be automatically propagated to another data center since the data centers are in different VLANs. A data center administrator must manually monitor for such multicast packets and trigger the appropriate operations in applications running across both data centers. Thus if the multicast packets illustrated in should be propagated to one or more of VLANs or an administrator will have to manually propagate them at the application layer.

While the internal components of the network element can be embodied with different hardware configurations an exemplary high level configuration for various internal hardware components is shown in . The network element can receive and execute software applications data and or commands received from a user another network element a remote server etc. The network element can also independently execute locally stored applications. The network element can include a communication interface operably coupled to an application specific integrated circuit ASIC or other processor microprocessor logic circuit or other data processing device. The ASIC or other processor executes the application programming interface API layer that interfaces with any resident programs in the memory of the network element . The memory can be comprised of read only memory ROM or random access memory RAM electrically erasable programmable ROM EEPROM flash cards or any memory common to computer platforms. The network element also can include a local database that can store applications not actively used in memory as well as other data. The local database is typically a flash memory cell but can be any secondary storage device as known in the art such as magnetic media EEPROM optical media tape soft or hard disk or the like.

Communication interface may be any communication interface operable to receive and transmit data. For example the communication interface may be a wireless communications interface e.g. Bluetooth WiFi 2G CDMA W CDMA 3G 4G LTE etc. such as a wireless transceiver and associated hardware e.g. an RF antenna a MODEM a modulator and or demodulator etc. . The communication interface may alternatively or additionally be a wired communications interface e.g. a serial connection a USB or Firewire connection an Ethernet connection etc. and associated hardware. The communication interface may alternatively or additionally be a user interface configured to receive input from a user. Accordingly the communication interface may be a wireless communication interface a wired communication interface and or a user interface.

The network element optionally includes a display and a keypad . A user may use the display and the keypad to provide input to or receive output from the network element .

Accordingly an aspect of the disclosure can include a network element such as network element including the ability to perform the functions described herein. As will be appreciated by those skilled in the art the various logic elements can be embodied in discrete elements software modules executed on a processor or any combination of software and hardware to achieve the functionality disclosed herein. For example ASIC API memory and local database may all be used cooperatively to load store and execute the various functions disclosed herein and thus the logic to perform these functions may be distributed over various elements. Alternatively the functionality could be incorporated into one discrete component. Therefore the features of the network element are to be considered merely illustrative and the disclosure is not limited to the illustrated features or arrangement.

Referring to the communication device includes logic configured to receive and or transmit information . In an example if the communication device corresponds to a wireless communications device the logic configured to receive and or transmit information can include a wireless communications interface e.g. Bluetooth WiFi 2G CDMA W CDMA 3G 4G LTE etc. such as a wireless transceiver and associated hardware e.g. an RF antenna a MODEM a modulator and or demodulator etc. . In another example the logic configured to receive and or transmit information can correspond to a wired communications interface e.g. a serial connection a USB or Firewire connection an Ethernet connection etc. . Thus if the communication device corresponds to some type of network element such as network element the logic configured to receive and or transmit information can correspond to an Ethernet card in an example that connects the network element to other communication entities via an Ethernet protocol. The logic configured to receive and or transmit information can include logic configured to receive a multicast packet matching registration criteria of one or more ports and logic configured to forward the multicast packet to the one or more ports wherein the one or more ports are in a different VLAN than a port from which the multicast packet was received. The logic configured to receive and or transmit information can also include software that when executed permits the associated hardware of the logic configured to receive and or transmit information to perform its reception and or transmission function s . However the logic configured to receive and or transmit information does not correspond to software alone and the logic configured to receive and or transmit information relies at least in part upon hardware to achieve its functionality.

Referring to the communication device further includes logic configured to process information . In an example the logic configured to process information can include at least a processor. Example implementations of the type of processing that can be performed by the logic configured to process information includes but is not limited to performing determinations establishing connections making selections between different information options performing evaluations related to data interacting with sensors coupled to the communication device to perform measurement operations converting information from one format to another e.g. between different protocols such as .wmv to .avi etc. and so on. For example the processor included in the logic configured to process information can correspond to a general purpose processor a digital signal processor DSP an ASIC a field programmable gate array FPGA or other programmable logic device discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. A general purpose processor may be a microprocessor but in the alternative the processor may be any conventional processor controller microcontroller or state machine. A processor may also be implemented as a combination of computing devices e.g. a combination of a DSP and a microprocessor a plurality of microprocessors one or more microprocessors in conjunction with a DSP core or any other such configuration. The logic configured to process information can also include software that when executed permits the associated hardware of the logic configured to process information to perform its processing function s . However the logic configured to process information does not correspond to software alone and the logic configured to process information relies at least in part upon hardware to achieve its functionality.

Referring to the communication device further includes logic configured to store information . In an example the logic configured to store information can include at least a non transitory memory and associated hardware e.g. a memory controller etc. . For example the non transitory memory included in the logic configured to store information can correspond to RAM flash memory ROM erasable programmable ROM EPROM EEPROM registers hard disk a removable disk a CD ROM or any other form of storage medium known in the art. The logic configured to store information can also include software that when executed permits the associated hardware of the logic configured to store information to perform its storage function s . However the logic configured to store information does not correspond to software alone and the logic configured to store information relies at least in part upon hardware to achieve its functionality.

Referring to the communication device further optionally includes logic configured to present information . In an example the logic configured to present information can include at least an output device and associated hardware. For example the output device can include a video output device e.g. a display screen a port that can carry video information such as USB HDMI etc. an audio output device e.g. speakers a port that can carry audio information such as a microphone jack USB HDMI etc. a vibration device and or any other device by which information can be formatted for output or actually outputted by a user or operator of the communication device . For example if the communication device corresponds to the network element as shown in the logic configured to present information can include the display of network element . In a further example the logic configured to present information can be omitted for certain communication devices such as network communication devices that do not have a local user e.g. network switches or routers remote servers etc. . The logic configured to present information can also include software that when executed permits the associated hardware of the logic configured to present information to perform its presentation function s . However the logic configured to present information does not correspond to software alone and the logic configured to present information relies at least in part upon hardware to achieve its functionality.

Referring to the communication device further optionally includes logic configured to receive local user input . In an example the logic configured to receive local user input can include at least a user input device and associated hardware. For example the user input device can include buttons a touchscreen display a keyboard a camera an audio input device e.g. a microphone or a port that can carry audio information such as a microphone jack etc. and or any other device by which information can be received from a user or operator of the communication device . For example if the communication device corresponds to the network element as shown in the logic configured to receive local user input can include the keypad . In a further example the logic configured to receive local user input can be omitted for certain communication devices such as network communication devices that do not have a local user e.g. network switches or routers remote servers etc. . The logic configured to receive local user input can also include software that when executed permits the associated hardware of the logic configured to receive local user input to perform its input reception function s . However the logic configured to receive local user input does not correspond to software alone and the logic configured to receive local user input relies at least in part upon hardware to achieve its functionality.

Referring to while the configured logics of through are shown as separate or distinct blocks in it will be appreciated that the hardware and or software by which the respective configured logic performs its functionality can overlap in part. For example any software used to facilitate the functionality of the configured logics of through can be stored in the non transitory memory associated with the logic configured to store information such that the configured logics of through each performs their functionality i.e. in this case software execution based in part upon the operation of software stored by the logic configured to store information . Likewise hardware that is directly associated with one of the configured logics can be borrowed or used by other configured logics from time to time. For example the processor of the logic configured to process information can format data into an appropriate format before being transmitted by the logic configured to receive and or transmit information such that the logic configured to receive and or transmit information performs its functionality i.e. in this case transmission of data based in part upon the operation of hardware i.e. the processor associated with the logic configured to process information .

Generally unless stated otherwise explicitly the phrase logic configured to as used throughout this disclosure is intended to invoke an aspect that is at least partially implemented with hardware and is not intended to map to software only implementations that are independent of hardware. Also it will be appreciated that the configured logic or logic configured to in the various blocks are not limited to specific logic gates or elements but generally refer to the ability to perform the functionality described herein either via hardware or a combination of hardware and software . Thus the configured logics or logic configured to as illustrated in the various blocks are not necessarily implemented as logic gates or logic elements despite sharing the word logic. Other interactions or cooperation between the logic in the various blocks will become clear to one of ordinary skill in the art from a review of the aspects described below in more detail.

The disclosure provides a mechanism for forwarding multicast packets such as fault notifications across disparate VLANs at the data link layer i.e. layer 2 . The mechanism may be implemented at a switch such as switch . Most data centers are designed as different layer 2 segments or VLANs but in cloud computing an application may run across multiple data centers. The disclosed mechanism allows multicast packets to be propagated across different data centers even though they are separated as different VLANs.

The multicast forwarding mechanism forwards a particular multicast packet to a list of registered ports even though the ports may belong to different VLANs. In order to receive the packet each port or module must register for the multicast packet. A port requests a multicast packet by registering with the multicast forwarding mechanism.

More specifically the mechanism waits for modules or ports to register themselves for particular multicast packets. The registration information includes criteria for the types of multicast packets that should be forwarded to the registered ports. When a multicast packet is received it is compared to the registered criteria of each registered port. If the packet information matches the criteria for any of the registered ports the packet is forwarded to that port even if that port belongs to a different VLAN than the VLAN from which the packet originated. Any VLAN translation necessary can be performed before delivering the packet to the corresponding port which prevents the requesting port from dropping the packet based on its VLAN classification. When a port or module removes its registration any matching multicast packets will no longer be transmitted to that port.

The packet processing and forwarding can be handled in the hardware by using an access control list ACL for example. Further while the mechanism can propagate the multicast packet across different VLANs it only delivers the packet to the ports within a given VLAN that requested the packet.

When a multicast packet is received on any port such as port in the example of it can be processed in the regular packet processing plane in the hardware of switch . The multicast packet includes an identifier of the VLAN to which it belongs here VLAN . By default the packet is forwarded to the ports and corresponding to the identified VLAN .

In the example of three ports and belonging to VLAN s other than VLAN are registered to receive multicast packets with parameters matching the parameters of multicast packet . Upon determining that the parameters of multicast packet match the criteria registered by ports and the module makes a copy of the multicast packet for each requesting port and and uses one or more ACLs to translate the VLAN specified in the multicast packet to the VLAN corresponding to each of the requesting ports and . The module then forwards the copies of the multicast packet to the matching ports and .

As illustrated in the example of not every port of the VLANs that include the requesting ports and receive a copy of the multicast packet . Rather the multicast packet is only forwarded to the specific ports that requested the multicast packet . For example only ports and in VLANs and respectively receive packet . This reduces the amount of data the switch must process.

When a port removes its registration i.e. its request for the multicast packet the corresponding entries in the ACL can be removed and multicast packets matching the previously registered criteria will not be delivered to those ports.

The forwarding mechanism can be extended to multiple switches by exchanging protocol data units PDUs and multicast membership information. The exchange mechanism can be generic and similar to the Generic Attribute Registration Protocol GARP Multicast Registration Protocol GMRP . However the exchange mechanism cannot use the GMRP exactly because it is limited to multicast forwarding within a single VLAN.

At the switch generates an ACL or modifies an existing ACL for the parameters of a multicast packet that correspond to the criteria obtained from the registrations such as for example VLAN port number multicast Media Access Control MAC address etc. . That is the registration information specifies certain criteria that the parameters of a multicast packet should match and if the parameters of a received multicast packet match these registered criteria the received multicast packet should be forwarded to the registered port.

At the switch receives a multicast packet with parameter values that match the criteria specified in the registration information and generated ACL. The switch forwards the packet to each port in the VLAN that includes the port from which the multicast packet was received as is done whether or not the parameters of a received packet match any of the registered criteria.

At the switch makes copies of the received multicast packet for each registered port that registered criteria matching the parameters of the packet. The switch uses the ACL to replace the original VLAN specified in the received packet with the VLAN corresponding to the matching port s . The switch then forwards the modified copy of the packet to each matching port s .

At the switch receives a request from one or more ports to de register from the registration list. The switch removes the port from the registration list and any further packets matching the previously registered criteria and ACL will not be forwarded to that port.

Those of skill in the art will appreciate that information and signals may be represented using any of a variety of different technologies and techniques. For example data instructions commands information signals bits symbols and chips that may be referenced throughout the above description may be represented by voltages currents electromagnetic waves magnetic fields or particles optical fields or particles or any combination thereof.

Further those of skill in the art will appreciate that the various illustrative logical blocks modules circuits and algorithm steps described in connection with the aspects disclosed herein may be implemented as electronic hardware computer software or combinations of both. To clearly illustrate this interchangeability of hardware and software various illustrative components blocks modules circuits and steps have been described above generally in terms of their functionality. Whether such functionality is implemented as hardware or software depends upon the particular application and design constraints imposed on the overall system. Skilled artisans may implement the described functionality in varying ways for each particular application but such implementation decisions should not be interpreted as causing a departure from the scope of the present disclosure.

The various illustrative logical blocks modules and circuits described in connection with the aspects disclosed herein may be implemented or performed with a general purpose processor a digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or other programmable logic device discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. A general purpose processor may be a microprocessor but in the alternative the processor may be any conventional processor controller microcontroller or state machine. A processor may also be implemented as a combination of computing devices e.g. a combination of a DSP and a microprocessor a plurality of microprocessors one or more microprocessors in conjunction with a DSP core or any other such configuration.

The methods sequences and or algorithms described in connection with the aspects disclosed herein may be embodied directly in hardware in a software module executed by a processor or in a combination of the two. A software module may reside in RAM flash memory ROM EPROM EEPROM registers hard disk a removable disk a CD ROM or any other form of storage medium known in the art. An exemplary storage medium is coupled to the processor such that the processor can read information from and write information to the storage medium. In the alternative the storage medium may be integral to the processor. The processor and the storage medium may reside in an ASIC. The ASIC may reside in a user terminal e.g. UE . In the alternative the processor and the storage medium may reside as discrete components in a user terminal.

In one or more exemplary aspects the functions described may be implemented in hardware software firmware or any combination thereof. If implemented in software the functions may be stored on or transmitted over as one or more instructions or code on a computer readable medium. Computer readable media includes both computer storage media and communication media including any medium that facilitates transfer of a computer program from one place to another. A storage media may be any available media that can be accessed by a computer. By way of example and not limitation such computer readable media can comprise RAM ROM EEPROM CD ROM or other optical disk storage magnetic disk storage or other magnetic storage devices or any other medium that can be used to carry or store desired program code in the form of instructions or data structures and that can be accessed by a computer. Also any connection is properly termed a computer readable medium. For example if the software is transmitted from a website server or other remote source using a coaxial cable fiber optic cable twisted pair digital subscriber line DSL or wireless technologies such as infrared radio and microwave then the coaxial cable fiber optic cable twisted pair DSL or wireless technologies such as infrared radio and microwave are included in the definition of medium. Disk and disc as used herein includes compact disc CD laser disc optical disc digital versatile disc DVD floppy disk and blu ray disc where disks usually reproduce data magnetically while discs reproduce data optically with lasers. Combinations of the above should also be included within the scope of computer readable media.

While the foregoing disclosure shows illustrative aspects of the disclosure it should be noted that various changes and modifications could be made herein without departing from the scope of the disclosure as defined by the appended claims. The functions steps and or actions of the method claims in accordance with the aspects of the disclosure described herein need not be performed in any particular order. Furthermore although elements of the disclosure may be described or claimed in the singular the plural is contemplated unless limitation to the singular is explicitly stated.

