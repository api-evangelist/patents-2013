---

title: QR data proxy and protocol gateway
abstract: A quick response (QR) proxy and protocol gateway for interfacing with a carrier network, a QR-equipped device, and a contact center and contact center database is disclosed. A data link is connected to a carrier network to receive QR codes and other data. Additional data links are connected to a contact center database and a QR-equipped device to obtain information used in determining routing and tagging instructions. A user interface is connected to the gateway to accept configurable conditions for determining routing instructions. There is a text conversion function and speech conversion function for each target enterprise contact center. Synchronization between stored user preferences to automated or semi-automated customer service routes is provided by a consumer preference template system.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09280541&OS=09280541&RS=09280541
owner: Five9, Inc.
number: 09280541
owner_city: San Ramon
owner_country: US
publication_date: 20130108
---
This application relates to and claims the benefit of U.S. Provisional Application No. 61 584 575 filed Jan. 9 2012 and entitled QR DATA PROXY AND PROTOCOL GATEWAY the entire content of which is wholly incorporated by reference herein.

The present disclosure relates generally to telecommunications systems and more particularly to a gateway that converts Quick Response QR scans into actionable routing and personal preference templates that can be used for product selection and purchases customer service and other transactional routing instructions dealing with consumer preferences.

Originating from industrial uses involving the tracking of manufactured components QR quick response codes now find commercial applications in advertising. As will be recognized QR codes are comprised of a pattern of square dots arranged to represent some information as opposed to the simple sequence of thin and thick lines of the common bar code. Typically QR codes are printed on advertising material and upon being scanned by a user of a communications device such as a Smartphone is operative to direct the user to a website associated with the advertising material. There are other standardized barcode type modalities known in the art developed in competition with QR codes such as Microsoft Tag Data Matrix Code JAGTAG and so forth. Along these lines various vendors such as ShareSquare JagTag Esponce and Liqueo produce reading and encoding solutions that are widely used by advertisers and consumers alike.

The conventional application of QR codes involves the aforementioned advertisement to webpage redirection as well as to those associated with traditional barcodes such as inventory tracking shopping fare transportation tracking. Accordingly there is a need in the art to enhance such standard modalities of QR scanning by matching consumer preferences privacy information vendor specific preferences and other highly personal data. There is also a need in the art for running stored programs and associated scripts of a customer service nature based upon QR code input.

The present disclosure contemplates a QR data proxy and protocol gateway that has input ports to receive QR scans and user data and output ports to facilitate highly personalized and preference based transactions on behalf of the consumer. Such transactions may include automated purchases credits shipping instructions personal preference information such as color and size of a product shipping information and customer service profile information that can be used in the establishment of real time and non real time sessions between the consumer and a customer service agent.

Besides standardized QR codes other similar coding schemes such as data matrix and JAGTAG may be used. QR codes or equivalent scans submitted by applications running on SmartPhones digital cameras or other capable end user devices may be deciphered. Once deciphered the QR code scan can relate to one or more elements of user data collected by directly querying the end user and or by passing data collected automatically by an application that is resident on the end user device.

There is also contemplated a service creation environment that uses templates for creating customer service oriented automated scripts and for obtaining user data and passing user and QR code related data back and forth between the consumer and the enterprise. The enterprise can thus configure conditional rules to determine what action should be taken based on the receipt of a particular QR code scan with or without an associated set of user data. These rules can be designed to accommodate a variety of business environments and can be flexibly adjusted over time as needed.

The service creation environment can also dynamically generate QR codes. This process allows the enterprise to create QR codes with unique attributes based on collected data and or conditional rules that have been established. These dynamic QR codes can be distributed to a variety of applications and when scanned by an end user can be recognized by the QR data proxy and protocol gateway to have associated contact center routing scripts.

The gateway also includes a set of output ports that can be used to connect to an enterprise contact center resource including interactive voice response IVR automatic contact distributor ACD and intelligent routing systems. A separate set of output ports can be used to connect to end users via addressable methods such as phone numbers or IP addresses. In this manner customer service sessions as dictated by the contact center routing scripts can be automatically established. Once the customer service session is established the QR data proxy and protocol gateway may remain connected to perform service control functions quality monitoring transfers etc. or may disconnect and allow for a direct session between the contact center and the end user.

The QR data proxy and protocol gateway may employ a media server function that can assist in executing the contact center routing scripts by presenting audio signals to the contact center resource and or back to the end user device. These audio signals can simulate call progress tones menu selections DTMF sounds or voice output music on hold announcements or other call related functions.

In accordance with commonly available protocols and devices that may act as proxies for those protocols the QR data proxy and protocol gateway may be utilized to convert automated customer service oriented scripts into proprietary data instructions SMS transmissions chat sessions emails or telephone based communications. The QR data proxy and protocol gateway may be utilized as a shared network device such that each gateway holds and executes customer service oriented scripts on behalf of a plurality of enterprise contact center resources. The QR data proxy and protocol gateway can be deployed also as a dedicated device where it is co located with the enterprise contact center resource s . The functions of the QR data proxy and protocol gateway may be divided among multiple physical devices thus accommodating geographical diversity redundancy and or allowing third party devices to perform certain functions in lieu of the gateway itself.

The present invention will be best understood by reference to the following detailed description when read in conjunction with the accompanying drawings.

Common reference numerals are used throughout the drawings and the detailed description to indicate the same elements.

The detailed description set forth below in connection with the appended drawings is intended as a description of the presently preferred embodiment of a QR data proxy and protocol gateway. and is not intended to represent the only form in which the present method may be developed or utilized. The description sets forth the functions and the sequence of steps for developing and operating the invention in connection with the illustrated embodiment. It is to be understood however that the same or equivalent functions and sequences may be accomplished by different embodiments that are also intended to be encompassed within the spirit and scope of the invention. It is further understood that the use of relational terms such as first second and the like are used solely to distinguish one from another entity without necessarily requiring or implying any actual such relationship or order between such entities. The present disclosure relates to U.S. patent application Ser. No. 12 767 544 entitled Secure Customer Service Proxy Portal filed Apr. 26 2010 U.S. patent application Ser. No. 12 772 894 entitled Trust Based Personalized Offer Portal filed May 3 2010 U.S. patent application Ser. No. 13 594 356 entitled Network Predictive Customer Service Queue Management filed Aug. 24 2012 and U.S. patent application Ser. No. 13 604 929 entitled Social Proxy and Protocol Gateway filed Sep. 6 2012 the entire contents of each disclosure of which are hereby wholly incorporated by reference herein.

With reference to the block diagram of a quick response QR data proxy and protocol gateway interacts with a plurality of QR Tags QR enabled devices and a plurality of enterprises. In particular the gateway is comprised of a QR proxy an application server a QR database a text conversion processor a speech conversion processor a data transfer proxy a native proxy a short message service SMS proxy a chat proxy and email proxy a telephony proxy and an outgoing data access point . The gateway has input ports to receive QR scans and user data and output ports to facilitate highly personalized and preference based transactions on behalf of the consumer. Such transactions may include automated purchases credits shipping instructions personal preference information such as color and size of a product shipping information and customer service profile information that can be used in the establishment of real time and non real time sessions between the consumer and a customer service agent.

Accordingly a QR code A and a QR equipped device A connect to the QR data proxy over communications channels and respectively. Likewise the gateway can process a plurality of QR codes and connect to a plurality of QR equipped devices including but not limited to a QR code B and a QR Equipped device B also connected to the QR data proxy over communications channels and respectively. In a preferred embodiment of the invention such communications facilities will be internet IP or cellular based and will convey information over HTTP or HTTPS. In an alternate embodiment such facilities may be proprietary in nature bearing information conveyed over private networks.

QR codes which are established as an ISO IEC18004 standard and similar bar codes such as produced by ShareSquare JagTag Esponce and Liqueo may be interpreted by associated devices and applications by converting the visual data into computer actionable text that can be used to instruct downstream devices. Such devices are typically agent consoles in which agents are able to view customer service based information that has been filtered by automated software. In this scenario The QR data proxy captures the stream of data from QR Code A via the QR equipped device over data communications channels and .

A program running in the QR equipped device may be used to pre process both the QR code and consumer specific data before reaching the QR data proxy . Alternatively the QR code data may be passed to the QR data proxy by the QR equipped device with a simple consumer identifier such as a phone number or customer code such that the application server and the QR database can be used to synchronize the QR code data with consumer preferences and personal data downstream.

Such consumer data may have information embedded therein such as routing tags consumer preference tags consumer private data or other attributes that may be useful in processing customer service related information for further processing or disposition. Here the QR data proxy is used to parse inject and format consumer related data based on information supplied by templates that are pre defined in the QR database . The application server is used to decide what templates and what subsequent actions are taken depending on the incoming QR data and consumer related streams.

The QR equipped devices A and B may convey consumer specific information that is embedded inside of proprietary software such as smartphone devices private enterprise web sites or other proprietary devices. Such devices can be programmed to transmit consumer preference and privacy information including consumer sentiment which can be filtered and tagged by the QR equipped devices A B . In this scenario the QR data proxy captures the stream so it may be associated with pre stored templates and consumer specific preferences.

Again such data may have embedded therein information such as routing tags consumer preference tags product tags or other attributes that may be useful in processing customer service specific data for further processing or disposition. The QR data proxy is used to parse inject and format consumer specific data based on information supplied by templates that are pre defined in the QR database . The application server is used to decide what templates and what subsequent actions are taken depending on the incoming QR data and consumer specific data streams.

The application server is connected to the QR data proxy over a communication channel . This may be an IP communication channel or a proprietary channel. Likewise the application server is connected to the QR database over a communications channel . Typically this may be implemented as a JDBC access method SQL Query Stored Procedure Call or a variety of proprietary methods for database communications. Such a QR database may be local or remote in a various embodiments of the invention.

The application server is also connected to the data transfer proxy over a communication channel . Such a communication channel can be an IP connection HTTP Hyper Text Transfer Protocol REST Representational State Transfer or other means to send signals and data. The application server is also connected to the text conversion processor and media server over a communication channel . Similarly such a communication channel can be an IP connection HTTP REST or other means to send signals and data. Furthermore the application server is connected to the speech conversion processor and media server over a communication channel . Such a communication channel can be an IP connection HTTP REST or other means to send signals and data.

Moreover the application server is connected to the service creation and administration interface over a communications channel which is used to set up scripts and templates associate QR codes with consumers associate scripts and templates with enterprise customer service systems run reports define preferences for generating native QR codes and related associations and for general administration of the system. In a preferred embodiment of the invention the interface will be a web based interface using HTTP Java and other languages protocols and programming languages that are commonly available to those having ordinary skill in the art.

The QR database stores a variety of information relating to text or speech conversion protocols social attribute tag data routing and destination data timing threshold information consumer preference privacy and other attributes stored in templates and other data that aid in the processing and disposition of QR data and consumer preference data. Templates are stored in the QR database that define pre determined routines for processing consumer specific media streams. User interfaces may be represented on web pages and subsequently allow for storage of user typed data to be stored in templates inside of a database. Such templates can be created by the network provider of the gateway or with the proper security by enterprise A users or enterprise N users . The application server can be used to govern the communications with the QR database in the case of its access being allowed for enterprise users.

The text conversion processor and media server receives incoming QR code data and consumer information and re formats the same into a standard text payload. Those having ordinary skill in the art will recognize email header and addressing information. Assuming the routing and destination data in a stored template in the QR database calls for the QR code data to be converted into an email the text conversion processor and media server will parse the data create a MIME Multipurpose Internet Mail Extensions header and embed all of the requisite addressing information into the item. In a preferred embodiment the sender address may be spoofed in such a way as to use the telephone number of the QR equipped device A or B or the identifier of the application as the originating user. Preferably such an identifier will be matched with data in the QR database and translated into an originating email address.

Likewise if a response back to the consumer is required the text conversion processor and media server may be used in reverse so as to dis assemble an email and re construct a HTTP or REST based stream of data suitable for transmitting back to the QR equipped device A or B in the same format as the original incoming data stream from those devices.

The text conversion processor and media server can convert media streams into any text based format. For example in the case of a chat conversion the original media stream can be parsed much like an email but instead of a MIME address conversion the text conversion processor and media server will instead put the media into the form of a chat request. Such a chat request can be directed to an enterprise chat server using SMPP Short Message Peer to Peer or other common protocols. Likewise and SMS conversion can spoof destination addresses with an SMS short code and routing information that is suitable for reading by an SMS gateway.

The speech conversion processor and media server receives the incoming media stream information and re formats the same into a standard speech payload. Text to speech conversion utilities such as those available from Nuance Communications are known in the art. Such utilities are able to read text and synthesize a spoken word equivalent.

In an alternate embodiment the routing and destination data in a stored template in the QR database calls for the originating data stream from the QR equipped device A or B to be converted into speech. Here the speech conversion processor and media server will parse the data create a SIP Session Initiation Protocol header and embed the requisite addressing information into the item. In a preferred embodiment the sender address may be spoofed in such a way as to speak the handle or pseudo name of the consumer as the caller. Alternately if the QR equipped device A or B is part of a SmartPhone the phone number can be used as the originating address. Likewise if a response back to the consumer is required the speech conversion processor may be used in reverse so as to take the spoken word of an enterprise agent and re construct it into a text stream in a format suitable for rendering onto the QR equipped device A or B .

The speech conversion processor and media server is connected to the telephony proxy over a communications channel . In a preferred embodiment such the communication channel may be in the form of a SIP based communication using an MRCP Media Resource Control Protocol protocol to control the text to speech or speech to text conversion. Likewise an RTP Real Time Protocol communication channel and a separate SIP channel for control may be used for the speech conversion processor and media server to communicate to the telephony proxy .

Commonly available tools such as FreeSwitch and the SOPHIA SIP Stack can be used along with commonly available hardware from Dialogic Corporation or Sangoma Corporation to build the telephony proxy . It is contemplated that the telephony proxy receives the SIP header information the content from the QR code and QR equipped device software and conveys each via phone call to the enterprise A or enterprise N systems over communication facilities and respectively. In addition the telephony proxy can be used to conference calls between the enterprise A or enterprise N systems and the QR equipped device A or the QR equipped device B both of which in a preferred embodiment would be co resident with a SmartPhone. Such communications facilities may be PSTN Public Switched Telephone Network or VoIP Voice over IP facilities. This is easily achieved as the telephony proxy can be equipped with PSTN VoIP conversion apparatus to serve either type of network interface. The telephone calls made by the telephony proxy are processed by the telephone answering and routing apparatus deployed by that particular enterprise i.e. the IVR ACD of enterprise A or the IVR ACD of enterprise N . The templates stored in the QR database can be used to navigate the telephony based menuing system in order to disposition the calls to the appropriate Agent.

Should agent and consumer telephone communication be required the telephone proxy will create connections between the agent interface or to the QR equipped device A or the QR equipped device B . Once routed the IVR ACD will send the calls to the agent interface or over communications channels or respectively. Such communications channels will be dependent on the IVR or ACD deployed by the enterprise. Via the telephone proxy these communication channels in the case of agent to consumer conferences will be connected to communications channels and in order to connect to the QR equipped device A or the QR equipped device B .

Contemporaneously to the calls being placed by the telephony proxy the outgoing data access point may convey coordinating signals over communication channels or to the CRM or the CRM respectively also respectively on behalf of the enterprise A or the enterprise N . Such a communication will be well known to the common practitioner of CTI Computer Telephone Integration using commonly available protocols from vendors such as AVAYA or Cisco for example. In an alternate embodiment such communications links may also be achieved without CTI per se but rather by communicating directly to a desktop software in the agent interface or .

The outgoing data access point derives its communications payload media and routing information from the data transfer proxy which is controlled by the application server . In further detail the application server is understood to use the template data stored in the QR database to instruct the data transfer proxy how to assemble coordinating routing and destination data along with any appropriate QR Code or consumer preference data such that it can assemble information in the appropriate target CTI or proprietary format for any given enterprise.

The native proxy the SMS proxy the chat proxy and the Email proxy are all similarly situated as the data transfer proxy with respect to the outgoing data access point . In some cases the relevant routing attribute payload and destination information may be embedded in the media as with an email. Emails for example have origination destination subject and body. QR Code consumer preference data and other relevant data may be stored in the subject line for downstream processing.

Likewise the QR Code consumer preference data and other relevant data may be inserted into the body of the email. Such data including the origination destination and other attributes may be enough to process the information in an enterprise email routing and distribution system. Such systems are available from Oracle and Avaya for example. In the case of a communication not having all of the relevant routing destination or other attributes available in the payload or header of the communication the data transfer proxy can be of particular utility in contemporaneously transmitting such data out of band while the message payload is delivered over a commonly available medium.

Referring now to another embodiment of the present invention directed to a method for gathering labeling and storing QR data is contemplated. At a beginning QR data is extracted from a QR code and interpreted via a QR code equipped device such as a Smartphone or other proprietary device. Then at step the QR gateway fetches both the QR code data and consumer preference and other information from the application running on the QR code equipped device . This data may be raw unfiltered data or it may be pre processed by commercially available QR code software such as software available from Esponce or Liqueo. Likewise such QR code and consumer preference and other data may be pre processed by a decisioning engine or natural language processing engine. Next in a step other data including routing information or consumer preference templates and destination information is fetched. In a step the gateway uses its data access point process to parse the text from the QR code in order to identify any routing origination tag information or intelligent attributes that may be used in its disposition.

At a decision branch gateway determines if a pre determined routing request has been logged and identified for the type of QR code data and personal preference data or other intelligence fetched. This data is stored in a template in the database of the gateway . If there is no routing data the method proceeds to step where default routing rules are used based on available data in the QR code or consumer preference templates. If routing information is available that matches with the pre defined templates the method proceeds to step where the appropriate routing labels and other data are tagged to the QR code data to determine which type of communication the QR code and personal preference data will be converted to downstream.

Following the aforementioned step the method continues with a step in which the gateway stores the QR code data by accessing the QR proxy database per step . Such data may be used as an archive or for purposes of store and forward for redundancy and recovery. In a step the gateway further queries the pre defined QR code and consumer preference template and loads that data into memory. Then at a step the application server matches the stored template data with the attributes of the QR code data.

In a decision branch the timing threshold attribute is inspected to ascertain the importance or priority of the QR code data based on attributes stored in the QR code data template. If timing thresholds are defined the QR code data is scheduled for action at step . This may be as simple as a one hour or two hour delay or a delay for several minutes depending on the preferences of the enterprise that the gateway is serving.

Continuing on at a step the gateway processes all of the relevant attributes required for destination routing of the QR code Data. Then at step the database may be queried for default routing information not stored in the template. At a step the application server determines the type of media conversion requested in the template and loads the appropriate parsing addressing and content data based on pre defined protocols . The application server hands this data off to the text conversion processor and media server and the speech conversion processor and media server as appropriate depending on the medium required by the enterprise. At a decision branch the gateway determines if telephony treatment is required. If so the process continues with a step as set forth in . If no telephony treatment is required the process continues at step as depicted in .

As indicated above the flowchart of depicts the telephony conversion routine. The method starts at a step after the gateway has determined telephony treatment is required to disposition the QR code data stream. Then at step the gateway fetches the telephony destination information required to make a phone call to the target enterprise. The database may be queried at a step for default telephony routing information. At step the gateway begins to set up a telephone call with all of the relevant origination information quasi ANI and destination information quasi DNIS . At step the system converts text to speech to prepare the content of the telephony call. At step the gateway performs an outbound call to the Enterprise IVR ACD. Contemporaneously any data that is relevant to the call may be passed to the enterprise over a data link at step .

After dialing the call at a step a connection is made to the enterprise agent based on the native routing capabilities of the IVR ACD of that enterprise. The agent will hear the transcribed QR code data in the form of the spoken word. Alternately the data can come to the agent via a CTI screen pop via the data transfer proxy. Here the agent will take appropriate action such as looking up the person in the CRM database adding comments or making an outbound communication over a customer preferred communication channel. In the case of an outbound communication the telephony proxy will connect the agent to the QR code equipped device controlled by the consumer. The information entered by the agent in response to or in recognition of the QR code data stream and consumer preferences will be stored in the database of the gateway in accordance with a step . Alternately such data may be stored in the enterprise database. Alternately such data may be stored in the database of the gateway and the enterprise database.

Referring now to a text conversion routine in accordance with various embodiments of the present disclosure will now be considered. The method starts at a step after the gateway has determined text conversion treatment is required to disposition the QR code data stream. At step the gateway fetches the QR code data destination information required to send native data or a chat or an email or an SMS to the target enterprise. The database may be queried at a step for default media routing information. Next at a step the gateway begins to set up a native send or a chat or an SMS or an email with all of the relevant origination information quasi ANI and destination information quasi DNIS . At step the system converts the QR code data stream into the appropriate text format for a native send or a chat or an SMS or an email. Then at a step the gateway pushes the preferred communication i.e. native send or a chat or an SMS or an email to the enterprise IVR ACD. Contemporaneously any data that is relevant to the call may be passed to the enterprise over a data link at a step .

Thereafter a connection is made to the enterprise agent in accordance with a step . This connection may be based on the native routing capabilities of the IVR ACD of that enterprise. The agent will see the transcribed QR code data in the form of a native send or a chat or an SMS or an email as stipulated by the template taken from the gateway database . Here the agent will take appropriate action such as looking up the person in the CRM database adding comments or making an outbound communication over a customer preferred communication channel. Such an outbound communication can be facilitated jointly by the text conversion processor and media server and the QR data proxy in the case of non speech media or by the speech conversion processor and media server and the telephony proxy in the case of speech based communication.

At a step the information entered by the agent in response to or in recognition of the QR code data stream and consumer preferences will be stored in the database of the gateway . Alternately such data may be stored in the enterprise database. Alternately such data may be stored in the database of the gateway and the enterprise database.

The particulars shown herein are by way of example only for purposes of illustrative discussion and are presented in the cause of providing what is believed to be the most useful and readily understood description of the principles and conceptual aspects of the various embodiments set forth in the present disclosure. In this regard no attempt is made to show any more detail than is necessary for a fundamental understanding of the different features of the various embodiments the description taken with the drawings making apparent to those skilled in the art how these may be implemented in practice.

