---

title: System and method for delayed device registration on a network
abstract: Systems and methods for enabling a computing device to be registered and authorized for network access, while deferring device hardware address capture until a later time. Subsequently, when the computing device connects to a network location at which the hardware address can be detected registration and authorization can be fully completed. In some cases, the subsequent completion can be performed automatically and without user intervention.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09549318&OS=09549318&RS=09549318
owner: SHAW CABLESYSTEMS G.P.
number: 09549318
owner_city: Calgary, Alberta
owner_country: CA
publication_date: 20131010
---
The described embodiments relate to authenticating computing devices on a network and in particular to authenticating computing devices on a wireless network.

Computing devices such as personal computers tablets and smartphones can be configured to execute a wide variety of software applications. Increasingly these applications leverage network connectivity to the Internet for example to provide various information services and other functionality. One such application is a web browser.

Some computing devices such as smartphones may have cellular data capability that allows for network access nearly anywhere within a wide cellular coverage area. Even so the cost associated cellular data usage may spur users to use Wireless Local Area Network WLAN connectivity where it is available. Moreover many other computing devices such as personal computers and tablets may lack cellular data capability and instead rely on WLAN connectivity to access a data network. In general WLAN connections have more limited range than cellular connections. However for many users WLAN connectivity may be preferred for its lower cost despite the range restrictions.

Recognizing that not all network capable computing devices have cellular connectivity some network service providers now offer network access at one or more WLAN hotspots . Hotspots comprise WLAN access points that are generally provided at locations that may be convenient for users such as at coffee shops shopping malls airports and elsewhere. Some hotspots may be freely accessible by the public while others may require authorization. Authorization may be determined prior to connection e.g. a pre existing subscription with the network service provider or at the time of connection e.g. an on demand fee payment .

In a first broad aspect there is provided a method of hardware address based registration of a computing device on a second network from a first network the method comprising accessing a portal server via a network access device on the first network wherein a hardware address of the computing device is not determinable by the portal server on the first network receiving a registration token from the portal server the registration token generated by the portal server in response to determining that the network access device is identified in a database accessing the portal server directly via the second network wherein the hardware address of the computing device is determinable by the portal server on the second network transmitting the registration token to the portal.

The network access device may be a modem. The network access device may be recognized in the database based on a network access device hardware address.

The first network may comprise a wired network which may comprise a coaxial cable network or a public switched telephone network.

The second network may comprise a wireless network which may comprise a wireless local area network or a wireless metropolitan area network.

In another broad aspect there is provided a method of hardware address based registration of a computing device on a second network from a first network the method comprising receiving a registration request from the computing device via the first network determining that a hardware address of the computing device is not determinable on the first network detecting a hardware address associated with the registration request identifying a subscriber record based on a hardware address of a network access device used by the computing device generating a registration token associated with the subscriber record transmitting the registration token to the computing device receiving the registration token via the second network determining a hardware address of the computing device via the second network and associating the hardware address with the subscriber record.

The subscriber record may have a subscriber identifier and the registration token may comprise the subscriber identifier.

The registration token may comprise a hash message authentication code and the method may further comprise authenticating the hash message authentication code.

In another broad aspect there is provided a system for hardware address based registration of a computing device on a second network from a first network wherein the computing device is connected via a network access device to the first network the system comprising a portal server operatively coupled to the first network and configured to receive a registration request from the computing device via the first network a registration server operatively coupled to the portal server and configured to determine that a hardware address of the computing device is not determinable on the first network identify a subscriber record based on a hardware address of the network access device used by the computing device detect a hardware address associated with the registration request generate a registration token associated with the subscriber record transmit the registration token to the computing device via the registration portal an access portal operatively coupled to the registration server and to the second network and configured to receive the registration token via the second network determine a hardware address of the computing device via the second network and associate the hardware address with the subscriber record.

It will be appreciated that for simplicity and clarity of illustration where considered appropriate reference numerals may be repeated among the figures to indicate corresponding or analogous elements or steps. In addition numerous specific details are set forth in order to provide a thorough understanding of the exemplary embodiments described herein. However it will be understood by those of ordinary skill in the art that the embodiments described herein may be practiced without these specific details. In other instances well known methods procedures and components have not been described in detail since these are known to those skilled in the art. Furthermore it should be noted that this description is not intended to limit the scope of the embodiments described herein but rather as merely describing one or more exemplary implementations.

The embodiments of the systems and methods described herein may be implemented in hardware or software or a combination of both. These embodiments may be implemented in computer programs executing on programmable computers each computer including at least one processor a data storage system including volatile memory or non volatile memory or other data storage elements or a combination thereof and at least one communication interface. For example and without limitation the various programmable computers may be a server network appliance set top box embedded device computer expansion module personal computer laptop smartphone or any other computing device capable of being configured to carry out the methods described herein.

Each program may be implemented in a high level procedural or object oriented programming or scripting language or both to communicate with a computer system. However alternatively the programs may be implemented in assembly or machine language if desired. The language may be a compiled or interpreted language. Each such computer program may be stored on a non transitory computer readable storage medium e.g. read only memory magnetic disk optical disc . The storage medium so configured causes a computer to operate in a specific and predefined manner to perform the functions described herein.

While particular combinations of various functions and features are expressly described herein other combinations of these features and functions are possible that are not limited by the particular examples disclosed herein and these are expressly incorporated within the scope of the present invention.

As the term module is used in the description of the various embodiments a module includes a functional block that is implemented in hardware or software or both that performs one or more functions such as the processing of an input signal to produce an output signal. As used herein a module may contain submodules that themselves are modules.

When a network service provider deploys one or more hotspots it is generally desirable to provide a convenient way for users to authenticate against a database of authorized users. In many cases the network service provider may have a database of subscribers to one or more services which may include services other than the hotspot. For example a cable service provider may have a database of cable television and cable Internet subscribers. If the cable service provider also operates one or more hotspots these databases of existing subscribers can be leveraged to offer access to the hotspots subject to subscription rules.

Subscribers may find it inconvenient to remember their subscription account particulars such as username password account number or the like. However if a subscriber s computing device is used at a network location that is known to be associated with the subscriber the computing device may be associated with the subscriber s account such that subsequently authentication of the computing device can be simplified when an attempt is made to use a different service e.g. hotspot .

A hardware address such as a Media Access Control MAC address may be used to uniquely identify each computing device. MAC addresses are unique identifiers assigned to network interfaces for communications. However MAC addresses are generally not readily discernible across inter connected networks such as the Internet. In the context of a cable Internet network the MAC address of a device on the subscriber s local area network LAN may not be discernible to a device located elsewhere on the network which means that data intended for each computing device can only be addressed using an Internet Protocol IP address.

In some cases devices on a LAN may only have IP addresses that are within a private address range that is not routable over the public Internet. An access point or network access device may thus employ Network Address Translation NAT to share a public IP address between a plurality of devices in the LAN.

For a subscriber to register a computing device to use another service such as wireless hotspots one common approach is to require the subscriber to manually provide the MAC address of the computing device at a website.

Still other approaches eschew authentication at all allowing open access to the network which can pose a security hazard.

Each of these conventional approaches can be unreliable and difficult or inconvenient for subscribers.

The described embodiments enable a computing device to be registered and authorized for network access while deferring MAC address capture until a later time. Subsequently when the computing device connects to a network location at which the MAC address can be detected e.g. a hotspot operated by the service provider the registration and authorization can be fully completed. In some cases the subsequent completion can be performed automatically and without user intervention.

In at least some embodiments an initial registration action may involve navigating to a registration website using an application or web browser of the computing device. The website may be used to validate that the user and the user s computing device are eligible for deferred registration and authentication. Eligibility can be determined at any network location for example using a subscriber username and password.

Alternatively eligibility can be determined when the subscriber is connected via a network connection to a network operated by the service provider e.g. to a cable modem on a cable provider s network . In this case the subscriber s account information can be determined by performing a lookup based on an intermediate device used to connect to the network e.g. cable modem .

Once initial validation is complete a token may be generated and provided to the computing device. The token can be a browser cookie for example. The token contains information usable to complete deferred registration which may be encrypted or signed. The computing device subsequently stores the token until it is required to complete registration.

When the computing device subsequently attempts to connect at a different network location operated by the service provider e.g. hotspot the device may be forwarded to a registration interface e.g. captive portal . The registration interface requests a previously provided token which is verified. If the verification is successful the registration interface can determine the MAC address of the computing device and complete registration. On subsequent connections to the network the device s MAC address can be used to automatically authenticate the computer device.

Referring now to there is illustrated a block diagram of a token registration system . Token registration system generally has a network on which the MAC address of a computing device is not discernible by another device due to the presence of an intermediate device such as a WLAN access point or network access device . In at least some embodiments token registration system may be part of a cable service provider data network or a digital subscriber line DSL service provider data network.

Token registration system includes a WLAN access point a network access device a data network a portal server a registration server an identity management IDM server an address mapping server and a customer database server . In some embodiments one or more elements of token registration system may be further subdivided or combined. For example the functions of address mapping server and customer database server may be integrated such that only a single physical server performs both functions.

Computing device generally has a processor memory both volatile and non volatile communications interface display and one or more input devices such as a keyboard or touchpad. Examples of computing device include a personal computer tablet computer smartphone and the like. The communications interface of computing device may be a wireless communications interface such as that used for the IEEE 802.11 family of protocols. Optionally the communications interface may be used for other wireless communications interfaces e.g. WiMAX .

Access point may be a WLAN access point which is configured to relay data packets between one or more wirelessly connected computing devices and another wired network device such as network access device . Network access device is generally configured to convert data from one protocol to another in order to accommodate different physical interfaces. For example network access device may be a cable modem configured to relay data packets between an Ethernet LAN and a cable network that uses the Data Over Cable Service Interface Specification DOCSIS standards for data communication.

In some embodiments access point and network access device may be integrated in one unit while in other embodiments network access device may be omitted.

Network is a data communications network such as the Internet. It will be appreciated that network may be comprised of two or more other interconnected wired or wireless networks such as a public switched telephone network or cable network including the network service provider plant and backbone network.

Portal server is a computer server that generally has a processor memory and a communications interface. Portal server may be configured to provide a Hypertext Transfer Protocol HTTP server or preferably a Hypertext Transfer Protocol Secure HTTPS server either of which may be used to provide an initial registration service as described herein.

Registration server is also a computer server and may be analogous to portal server . Registration server may be configured to provide access to one or more registration functions through a predefined Application Programming Interface API . The API may define an expected format for supported requests and responses to the registration server e.g. eXtensible Markup Language XML keys and values .

Registration server generally provides access to one or more backend services provided by IDM server address mapping server and customer database server .

In some embodiments one or more functions of portal server registration server IDM server address mapping server and customer database server may be integrated in a single server or further subdivided among additional servers.

IDM server is generally a computer server configured to respond to authentication requests. IDM server maintains or has access to a database of subscriber credentials e.g. username password etc. along with respective authorization or authentication levels and provides a secure interface for authentication requests.

Address mapping server is a computer server or database that stores a mapping of Internet Protocol IP addresses to MAC addresses of devices known or authorized to access a service provider network. For example in a cable data network the MAC address of each cable modem i.e. network access device active on the service provider network may be stored by address mapping server and correlated with a current IP address assigned to the respective cable modem e.g. by a Dynamic Host Configuration Protocol DHCP server not shown .

Customer database server is a computer server or database that stores subscriber records such as address information billing information subscription information and the like. In general customer database server does not store authentication information which is instead maintained by IDM server . However subscriber records in customer database server may be linked with subscriber credentials in IDM server using a unique key or identifier for example.

Referring now to there is illustrated a block diagram of a device registration system . Device registration system generally has a network on which the MAC address of a computing device is discernible by access point .

Device registration system includes computing device WLAN access point network Policy Charging and Rules Function PCRF server a portal server IDM server Subscriber Data Management SDM server and provisioning server . In some embodiments one or more of IDM server SDM server and provisioning server may be integrated into a single server.

Generally when connected to device registration system computing device is no longer connected to a network as in system . This may occur when a user physically relocates computing device for example by leaving home and travelling elsewhere.

Computing device is wirelessly connected to WLAN access point which is configured to relay data packets between one or more wirelessly connected computing devices and a network . WLAN access point may be provided at various locations as described herein such as airports shopping centres and the like.

Portal server is a computer server that generally has a processor memory and a communications interface. In some embodiments portal server may be integrated with or be the same as portal server of system . Portal server may be configured to provide a Hypertext Transfer Protocol HTTP server which may be used to provide a captive portal service as described herein. In particular when computing device attempts to join network and use an HTTP service it may be redirected to the captive portal provided by portal server e.g. using an HTTP Redirect .

Portal server may be in communication with a PCRF server operated by the network service provider. PCRF server can be configured to aggregate information from network and portal server and make policy decisions for each computing device connected to network . Policy decisions may include whether to allow access to the network whether to allow access to certain services quality of service QoS levels and charging functions. PCRF server may also communicate or integrate with other service provider systems such as customer database server .

Portal server is also in communication with IDM server and may communicate with other services such as SDM server and provisioning server .

SDM server generally may store subscriber data and in particular may store a database of subscriber device MAC addresses device limits and service eligibility.

Provisioning server generally performs device registration by recording MAC addresses in one or both of SDM server and PCRF server .

Referring now to there is illustrated a flow diagram for an example token registration process which may be carried out in a token registration system .

Token registration flow begins at when a computing device such as computing device of system connects to a first network such as network of system via an access point e.g. access point of system .

At the computing device sends a token registration request to a portal server such as portal server . The token registration request may be generated by a web browser of the computing device or by a dedicated application.

At the portal server receives the token registration request and refers the request to a registration server such as registration server of system . The request may be referred by for example transmitting a new request. In other embodiments the request may be referred by using an asynchronous request e.g. Ajax within a web page generated by the portal server.

At the registration server determines the IP address associated with the token registration request and sends a mapping request for a corresponding MAC address to an address mapping server such as address mapping server of system . The IP address associated with the token registration request will generally be a publicly routable IP address which is assigned to the network access device or access point through which the computing device is connected. Thus the MAC address of the network access device or access point will be retrievable by the service provider.

At the address mapping server determines if the IP address in the mapping request has a match for the access device MAC address in its database. If a matching MAC address is found this indicates that the token registration request originated from behind a known device e.g. network access device or access point .

If a matching MAC address is found it is returned to the registration server at and the registration server retrieves a subscriber record at for example by sending a record request to a customer database server such as customer database server . The record request may include the network access device or access point MAC address identified at .

If the customer record indicates that a computing device can be authorized for access to the network and optionally to other networks a registration authorization can be generated and transmitted to the portal server at which can further generate and transmit a registration token to the computing device at . In some cases the registration authorization may comprise a subscriber identifier that is uniquely associated with the subscriber record. Likewise the registration token may comprise the unique subscriber identifier. The subscriber identifier may be hashed or encrypted. In some other cases the registration authorization may be generated by computing a hash message authentication code HMAC based on one or more subscriber identifiers. For example the subscriber account number preferred device name preferred e mail address or some combination thereof can be hashed. In such cases the registration token generated in response to the registration authorization may include the HMAC.

At the computing device can store the registration token for later use. As described herein in at least some embodiments the registration token may be a web browser cookie.

Optionally if the address mapping server determines that the IP address does not map to the MAC address of a known network access device or access point the flow can continue at with the registration server returning an indication to the portal server that a known MAC address was not found.

At the portal server can instead request subscriber credentials such as a username and password associated with a subscriber account. At the computing device can obtain the subscriber credentials for example by having a user enter this information in a user interface and transmit this information the portal server.

At the portal server transmits the subscriber credentials to the registration server which verifies the subscriber credentials with an IDM server such as IDM server at .

If IDM server indicates that the subscriber credentials are invalid the portal server may be notified at and further action can be taken e.g. repeat credential gathering process . Otherwise if the subscriber credentials are valid the IDM server may notify the registration server at which may generate and transmit a registration authorization at before continuing to and .

Referring now to there is illustrated a flow diagram for an example device registration process which may be carried out in a device registration system .

Device registration flow begins at when a computing device such as computing device of system connects to a second network such as network of system via an access point e.g. access point of system .

At a web browser or application of the computing device attempts to access a service using the network. The service may be an HTTP server on the Internet for example.

At the attempted access is intercepted and the web browser or application of the computing device is redirected to a portal server such as portal server of system .

At the portal server requests a registration token from the computing device. The requested registration token is a registration token previously generated in a token registration flow such as token registration flow .

If a registration token was generated and stored at computing device then the computing device forwards the registration token to the portal server at .

At if a subscriber identifier was included in the registration token the portal server determines a subscriber identifier from the registration token. If the subscriber identifier was encrypted it may be decrypted at this stage. Alternatively if the registration token included an HMAC the HMAC may be authenticated.

At the portal server determines the MAC address of the computing device. In at least some embodiments a port bundle host key PBHK identified by an access point may be used to determine the MAC address. Since the access point is generally operated by the network service provider or an affiliate the MAC address can be determined directly.

Once the MAC address of the computing device is determined the portal server sends a registration completion request comprising the MAC address to a provisioning server such as provisioning server at . The provisioning server receives the completion request and completes registration of the computing device by recording the computing device MAC address which can be used directly for future authentication attempts.

Optionally at the portal server may contact a PCRF server such as PCRF server of system to initiate a client session for the computing device.

Optionally if a registration token was not present at or if the HMAC authentication fails the portal server can instead request subscriber credentials such as a username and password associated with a subscriber account at . The computing device can obtain the subscriber credentials for example by having a user enter this information in a user interface and transmit this information the portal server.

At the portal server transmits the subscriber credentials to an IDM server such as IDM server of system .

At the IDM server determines if the subscriber credentials are valid. If the subscriber credentials are not valid the IDM server may notify the portal server which may return to .

Otherwise if the subscriber credentials are valid the IDM server may determine and return a subscriber identifier to the portal server at .

At the portal server determines the MAC address of the computing device using a similar approach as at . For example a port bundle host key PBHK identified by an access point may be used to determine the MAC address.

At the portal server may generate and transmit an indication to the computing device requesting whether the user wishes to register the computing device.

At the portal server receives a response to the indication. If the response indicates that registration should be completed the flow proceeds to . Otherwise the flow may proceed to or .

The present invention has been described here by way of example only while numerous specific details are set forth herein in order to provide a thorough understanding of the exemplary embodiments described herein. However it will be understood by those of ordinary skill in the art that these embodiments may in some cases be practiced without these specific details. In other instances well known methods procedures and components have not been described in detail so as not to obscure the description of the embodiments. Various modification and variations may be made to these exemplary embodiments. The scope of the claims should not be limited by the described embodiments and examples but should be given the broadest interpretation consistent with the description as a whole.

