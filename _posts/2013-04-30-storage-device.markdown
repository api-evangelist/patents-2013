---

title: Storage device
abstract: To provide a storage device with low power consumption. The storage device includes a plurality of cache lines. Each of the cache lines includes a data field which stores cache data; a tag which stores address data corresponding the cache data; and a valid bit which stores valid data indicating whether the cache data stored in the data field is valid or invalid. Whether power is supplied to the tag and the data field in each of the cache lines is determined based on the valid data stored in the valid bit.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09043561&OS=09043561&RS=09043561
owner: Semiconductor Energy Laboratory Co., Ltd.
number: 09043561
owner_city: Atsugi-shi, Kanagawa-ken
owner_country: JP
publication_date: 20130430
---
Central processing units CPUs have a variety of architectures depending on their usage and an architecture called a stored program architecture is a predominant architecture of current CPUs. In a stored program CPU an instruction and data needed for carrying out the instruction are stored in a semiconductor storage device hereinafter also simply referred to as a storage device and the instruction and the data are sequentially read from the storage device whereby the instruction is carried out.

As the storage device besides a main storage device for storing data and instructions a buffer storage device called a cache which can perform data writing and data reading at high speed is given. In order to reduce access to the low speed main storage device and speed up the arithmetic processing a cache is provided in a CPU to be located between an arithmetic unit or a control unit and a main storage device. In general a static random access memory SRAM or the like is used as a cache. Patent Document 1 shown below discloses a configuration in which a volatile memory such as an SRAM and a nonvolatile memory are used in combination as a cache.

In a CPU including a cache an instruction or data which is frequently used an instruction or data which is used once and addresses where they are stored in a main storage device is copied from the main memory device and stored in the cache. Then in general an arithmetic unit or a control unit included in the CPU first determines whether a needed address exists in the cache and reads an instruction or data corresponding to the address when the address exists. However there is a possibility that a needed instruction or data is not stored in the cache. In this case in the CPU it is necessary that the instruction or data be read from an address in the low speed main storage device and the address and the content of the instruction or data be copied to be stored in the cache therefore it takes long time to carry out the instruction as compared with the case where only an access to the cache is performed. A state where an instruction or data needed for the CPU is stored in the cache is called a cache hit and a state where an instruction or data needed for the CPU is not stored in the cache is called a cache miss.

In order to reduce the frequency of the access to the low speed main storage device as much as possible it is effective to use a cache having large storage capacity in the CPU. A dynamic random access memory DRAM is advantageous in increasing the storage capacity. However a DRAM needs refresh and thus there is a limitation on an increase in the operation speed. On the other hand an SRAM can operate at high speed. However an SRAM is not suitable for increasing the capacity because it is difficult to increase the integration degree due to a large number of semiconductor elements per memory cell. Further an SRAM has problems of an increase in leakage current of a semiconductor element and an increase in power consumption of a storage device because the number of semiconductor elements per memory cell is large.

In view of the above problems an object of the disclosed invention is to provide a low power consumption storage device.

A cache includes a plurality of storage regions called cache lines each of which has a given amount of data. Each of the cache lines includes a storage region called a data field a storage region called a tag and a storage region called a valid bit. Cache data that is data or an instruction sent from a main storage device or an arithmetic unit is stored in the data field. Address data that is data of an address corresponding to the cache data is stored in the tag. Valid data that is data indicating whether the cache data stored in the data field is valid or invalid is stored in the valid bit.

In one embodiment of the disclosed invention the data field and the tag in the cache line in which valid cache data is not stored of the plurality of cache lines are off whereby low power consumption is achieved.

The cache line in which valid cache data is not stored is not used until valid cache data is written thus there is no problem even when storage regions other than the valid bit are off. Whether the storage regions other than the valid bit in the cache line is turned on or turned off is determined depending on the state of the valid bit in the cache line. When the valid bit indicates that data stored in the cache line is invalid the tag and the data field in the cache line are turned off. On the other hand the valid bit indicates that data stored in the cache line is valid the tag and the data field in the cache line are turned on.

Hereinafter a more specific configuration example will be described. In the valid bit a first memory cell including a first data storage circuit which stores valid data is provided. In each of the tag and the data field a second memory cell including a second data storage circuit which stores address data and cache data is provided.

When valid data of the valid bit is 1 a power supply potential is supplied to the second memory cell so that the power supply potential is supplied to the tag and the data field connected to the valid bit. Accordingly the tag and the data field in the cache line can be turned on.

When valid data of the valid bit is 0 a power supply potential is not supplied to the second memory cell so that the power supply potential is not supplied to the tag and the data field connected to the valid bit. Accordingly the tag and the data field in the cache line can be off.

A configuration example where a power supply potential is supplied or not supplied to the second memory cells of the tag and the data field will be more specifically described below.

To the second memory cell of each of the tag and the data field a first transistor and a second transistor are electrically connected. A high level power supply potential is supplied to one of a source and a drain of the first transistor and a low level power supply potential is supplied to one of a source and a drain of the second transistor. The second memory cell is electrically connected to the other of the source and the drain of the first transistor and the other of the source and the drain of the second transistor.

Valid data stored in the first data storage circuit in the first memory cell is output to a gate of the first transistor and a gate of the second transistor. When valid data of the valid bit is 1 the first transistor and the second transistor are turned on so that a power supply potential is supplied to a second memory cell. Consequently the tag and the data field in the cache line can be turned on.

On the other hand when valid data of the valid bit is 0 the first transistor and the second transistor are turned off so that a power supply potential is not supplied to the second memory cell. Consequently the tag and the data field in the cache line can be turned off.

As described above according to one embodiment of the disclosed invention the tag and the data field can be controlled to be turned on and off in each cache line. Thus a storage device which drives with low power consumption can be provided.

One embodiment of the disclosed invention is a storage device including a plurality of cache lines. Each of the cache lines includes a data field which stores cache data a tag which stores address data corresponding the cache data and a valid bit which stores valid data indicating whether the cache data stored in the data field is valid or invalid. When the valid data stored in the valid bit is output to the tag and data field the tag and data field in each of the plurality of cache lines are turned on or off.

Another embodiment of the disclosed invention is a storage device including a plurality of cache lines. Each of the cache lines includes a data field which stores cache data a tag which stores address data corresponding the cache data and a valid bit which stores valid data indicating whether the cache data stored in the data field is valid or invalid. The valid bit includes a first memory cell. The tag and data field each includes a first transistor a second transistor and a second memory cell. A high level power supply potential is supplied to one of a source and a drain of the first transistor. A ground potential is supplied to one of a source and a drain of the second transistor. The second memory cell is electrically connected to the other of the source and the drain of the first transistor and the other of the source and the drain of the second transistor. When the output potential of the first memory cell is supplied to a gate of the first transistor and a gate of the second transistor the high level power supply potential and the ground potential are supplied or not supplied to the second memory cell.

Another embodiment of the disclosed invention is a storage device including a first memory cell a first transistor a second transistor and a second memory cell. The first memory cell includes a first data storage circuit which stores valid data and includes a first inverter and a second inverter. The output potential of the first inverter is input to a gate of the first transistor and one of a source and a drain of the first transistor is supplied with a high level power supply potential. The output potential of the second inverter is input to a gate of the second transistor and one of a source and a drain of the second transistor is supplied with a low level power supply potential. The second memory cell includes a second data storage circuit which is electrically connected to the other of the source and the drain of the first transistor and the other of the source and the drain of the second transistor stores address data or cache data and includes a third inverter and a fourth inverter.

Another embodiment of the disclosed invention is a storage device including a first memory cell a first transistor a second transistor and a second memory cell. The first memory cell includes a first data storage circuit which stores valid data and includes a clocked inverter and a first inverter. The output potential of the first inverter is input to a gate of the first transistor and one of a source and a drain of the first transistor is supplied with a high level power supply potential. The output potential of the clocked inverter is input to a gate of the second transistor and one of a source and a drain of the second transistor is supplied with a low level power supply potential. The second memory cell includes a second data storage circuit which is electrically connected to the other of the source and the drain of the first transistor and the other of the source and the drain of the second transistor stores address data or cache data and includes a second inverter and a third inverter.

Another embodiment of the disclosed invention is a storage device including a first memory cell a first transistor a second transistor and a second memory cell. The first memory cell includes a first data storage circuit which stores valid data and includes a first clocked inverter and a first inverter. The output potential of the first inverter is input to a gate of the first transistor and one of a source and a drain of the first transistor is supplied with a high level power supply potential. The output potential of the first clocked inverter is input to a gate of the second transistor and one of a source and a drain of the second transistor is supplied with a low level power supply potential. The second memory cell includes a second data storage circuit which is electrically connected to the other of the source and the drain of the first transistor and the other of the source and the drain of the second transistor stores address data or cache data and includes a second clocked inverter and a second inverter.

Another embodiment of the disclosed invention is a storage device which includes a plurality of cache lines each including a valid bit a tag and a data field. In each cache line power is supplied to the tag and the data field in accordance with data stored in the valid bit.

Data indicating whether data stored in the data field is valid or invalid is stored in the valid bit. Thus the storage capacity of the valid bit may be 1 bit. When data indicating that data stored in the data field is invalid is stored in the valid bit power is not supplied to the tag and the data field. When data indicating that data stored in the data field is valid is stored in the valid bit power is supplied to the tag and the data field.

According to one embodiment of the disclosed invention a low power consumption storage device can be provided.

Embodiments of the invention disclosed in this specification will be hereinafter described with reference to the accompanying drawings. Note that the invention disclosed in this specification can be carried out in a variety of different modes and it is easily understood by those skilled in the art that the modes and the details of the invention disclosed in this specification can be changed in various ways without departing from the spirit and the scope thereof. Therefore the disclosed invention is not construed as being limited to description of the embodiments. Note that in the drawings hereinafter shown the same portions or portions having similar functions are denoted by common reference numerals and repeated description thereof will be omitted. Further in some cases the same hatching patterns are applied to similar portions and the similar portions are not necessarily designated by reference numerals.

Note that in the invention disclosed in this specification a semiconductor device refers to an element or a device which functions by utilizing a semiconductor and includes in its category an electric device including an electronic circuit a display device a light emitting device a storage device and the like and an electrical appliance on which the electric device is mounted.

Note that the position the size the range or the like of each component illustrated in the drawings and the like is not accurately represented in some cases for the sake of simplicity. Therefore the disclosed invention is not necessarily limited to the position the size the range or the like disclosed in the drawings and the like.

In this specification and the like ordinal numbers such as first second and third are used in order to avoid confusion among components and the terms do not mean limitation of the number of components.

Functions of a source and a drain are sometimes replaced with each other when a transistor of opposite polarity is used or when the direction of flow of current is changed in circuit operation for example. Therefore the terms source and drain can be used to denote the drain and the source respectively in this specification.

Note that in this specification and the like the expression electrically connected includes the case where components are connected through an object having any electric function . There is no particular limitation on an object having any electric function as long as electric signals can be transmitted and received between components that are connected through the object. Examples of an object having any electric function are a switching element such as a transistor a resistor an inductor a capacitor and elements with a variety of functions as well as an electrode and a wiring.

In this specification and the like the terms over and below do not necessarily mean directly on and directly under respectively in the description of a positional relation between components. For example the expression a gate electrode over a gate insulating film can mean the case where there is an additional component between the gate insulating film and the gate electrode.

A memory cell of a valid bit illustrated in includes a first transistor a second transistor a third transistor a fourth transistor a fifth transistor a sixth transistor a seventh transistor an eighth transistor a ninth transistor and a tenth transistor . The transistors except the second transistor and the fourth transistor are n channel transistors. The second transistor and the fourth transistor are p channel transistors.

To the memory cell of the valid bit illustrated in a high level power supply potential VDD and a ground potential GND 0 V as a low level power supply potential VSS are supplied. Although the ground potential GND 0 V is supplied as the low level power supply potential VSS in this embodiment the disclosed invention is not limited thereto any potential lower than the high level power supply potential VDD can be used as the low level power supply potential VSS. Note that in this specification a high level potential VH is higher than a low level potential VL. The high level power supply potential VDD may be used as the high level potential VH. The low level power supply potential VSS may be used as the low level potential VL. In this embodiment a description will be given of the case where the high level power supply potential VDD and the low level power supply potential VSS are used as the high level potential VH and the low level potential VL respectively.

To the memory cell of the valid bit illustrated in a word line WL to which a potential WL is supplied a read line RE to which a potential RE is supplied a first data line DIN to which a potential DIN is supplied a second data line DINB to which a potential DINB is supplied a first bit line BL to which a potential BL is supplied a second bit line BLN to which a potential BLN is supplied a third data line VData from which a potential VData is output and a fourth data line VDatab from which a potential VDatab is output are electrically connected.

Note that the high level potential VH or the low level potential VL is supplied to the word line WL the read line RE the first data line DIN the second data line DINB the first bit line BL the second bit line BLN the third data line VData and the fourth data line VDatab.

Different potentials selected from the high level potential VH and the low level potential VL are supplied to the first data line DIN and the second data line DINB. Specifically when the potential DIN is the high level potential VH the potential DINB is the low level potential VL whereas when the potential DIN is the low level potential VL the potential DINB is the high level potential VH.

Further different potentials selected from the high level potential VH and the low level potential VL are supplied to the third data line VData and the fourth data line VDatab. Specifically when the potential VData is the high level potential VH the potential VDatab is the low level potential VL whereas when the potential VData is the low level potential VL the potential VDatab is the high level potential VH.

A gate of the first transistor is electrically connected to the word line WL and a gate of the sixth transistor . One of a source and a drain of the first transistor is electrically connected to the first data line DIN. The other of the source and the drain of the first transistor is electrically connected to one of a source and a drain of the second transistor one of a source and a drain of the third transistor a gate of the fourth transistor a gate of the fifth transistor a gate of the tenth transistor and the fourth data line VDatab.

A gate of the second transistor is electrically connected to the third data line VData a gate of the third transistor one of a source and a drain of the fourth transistor one of a source and a drain of the fifth transistor one of a source and a drain of the sixth transistor and a gate of the eighth transistor . The one of the source and the drain of the second transistor is electrically connected to the other of the source and the drain of the first transistor the one of the source and the drain of the third transistor the gate of the fourth transistor the gate of the fifth transistor the gate of the tenth transistor and the fourth data line VDatab. The other of the source and the drain of the second transistor is supplied with the high level power supply potential VDD and electrically connected to the other of the source and the drain of the fourth transistor .

The gate of the third transistor is electrically connected to the third data line VData the gate of the second transistor the one of the source and the drain of the fourth transistor the one of the source and the drain of the fifth transistor the one of the source and the drain of the sixth transistor and the gate of the eighth transistor . The one of the source and the drain of the third transistor is electrically connected to the other of the source and the drain of the first transistor the one of the source and the drain of the second transistor the gate of the fourth transistor the gate of the fifth transistor the gate of the tenth transistor and the fourth data line VDatab. The other of the source and the drain of the third transistor is supplied with the ground potential GND and electrically connected to the other of the source and the drain of the fifth transistor one of a source and a drain of the eighth transistor and one of a source and a drain of the tenth transistor .

The gate of the fourth transistor is electrically connected to the other of the source and the drain of the first transistor the one of the source and the drain of the second transistor the one of the source and the drain of the third transistor the gate of the fifth transistor the gate of the tenth transistor and the fourth data line VDatab. The one of the source and the drain of the fourth transistor is electrically connected to the third data line VData the gate of the second transistor the gate of the third transistor the one of the source and the drain of the fifth transistor the one of the source and the drain of the sixth transistor and the gate of the eighth transistor . The other of the source and the drain of the fourth transistor is supplied with the high level power supply potential VDD and electrically connected to the other of the source and the drain of the second transistor .

The gate of the fifth transistor is electrically connected to the fourth data line VDatab the other of the source and the drain of the first transistor the one of the source and the drain of the second transistor the one of the source and the drain of the third transistor the gate of the fourth transistor and the gate of the tenth transistor . The one of the source and the drain of the fifth transistor is electrically connected to the third data line VData the gate of the second transistor the gate of the third transistor the one of the source and the drain of the fourth transistor the one of the source and the drain of the sixth transistor and the gate of the eighth transistor . The other of the source and the drain of the fifth transistor is supplied with the ground potential GND and electrically connected to the other of the source and the drain of the third transistor the one of the source and the drain of the eighth transistor and the one of the source and the drain of the tenth transistor .

The gate of the sixth transistor is electrically connected to the word line WL and the gate of the first transistor . The one of the source and the drain of the sixth transistor is electrically connected to the third data line VData the gate of the second transistor the gate of the third transistor the one of the source and the drain of the fourth transistor the one of the source and the drain of the fifth transistor and the gate of the eighth transistor . The other of the source and the drain of the sixth transistor is electrically connected to the second data line DINB.

A gate of the seventh transistor is electrically connected to the read line RE and a gate of the ninth transistor . One of a source and a drain of the seventh transistor is electrically connected to the first bit line BL. The other of the source and the drain of the seventh transistor is electrically connected to the other of the source and the drain of the eighth transistor .

The gate of the eighth transistor is electrically connected to the third data line VData the gate of the second transistor the gate of the third transistor the one of the source and the drain of the fourth transistor the one of the source and the drain of the fifth transistor and the one of the source and the drain of the sixth transistor . The one of the source and the drain of the eighth transistor is supplied with the ground potential GND and electrically connected to the other of the source and the drain of the third transistor the other of the source and the drain of the fifth transistor and the one of the source and the drain of the tenth transistor . The other of the source and the drain of the eighth transistor is electrically connected to the other of the source and the drain of the seventh transistor .

The gate of the ninth transistor is electrically connected to the read line RE and the gate of the seventh transistor . One of a source and a drain of the ninth transistor is electrically connected to the second bit line BLN. The other of the source and the drain of the ninth transistor is electrically connected to the other of the source and the drain of the tenth transistor .

The gate of the tenth transistor is electrically connected to the other of the source and the drain of the first transistor the one of the source and the drain of the second transistor the one of the source and the drain of the third transistor the gate of the fourth transistor the gate of the fifth transistor and the fourth data line VDatab. The one of the source and the drain of the tenth transistor is supplied with the ground potential GND and electrically connected to the other of the source and the drain of the third transistor the other of the source and the drain of the fifth transistor and the one of the source and the drain of the eighth transistor . The other of the source and the drain of the tenth transistor is electrically connected to the other of the source and the drain of the ninth transistor .

In the memory cell illustrated in the second transistor which is a p channel transistor and the third transistor which is an n channel transistor are included in a first inverter . The fourth transistor which is a p channel transistor and the fifth transistor which is an n channel transistor are included in a second inverter . is a circuit diagram where the first inverter and the second inverter are denoted by circuit symbols.

In the gate of the second transistor and the gate of the third transistor collectively referred to as an input terminal of the first inverter and the one of the source and the drain of the fourth transistor and the one of the source and the drain of the fifth transistor collectively referred to as an output terminal of the second inverter are electrically connected to a node M. The one of the source and the drain of the second transistor and the one of the source and the drain of the third transistor collectively referred to as an output terminal of the first inverter and the gate of the fourth transistor and the gate of the fifth transistor collectively referred to as an input terminal of the second inverter are electrically connected to a node M. The potential of the node M is the output potential of the second inverter and is the potential VData. The potential of the node M is the output potential of the first inverter and is the potential VDatab.

The first inverter and the second inverter are included in a data storage circuit . The output terminal of the first inverter is electrically connected to the input terminal the second inverter . The output terminal of the second inverter is electrically connected to the input terminal of the first inverter . Valid data input to the memory cell of the valid bit is stored in the data storage circuit .

A tag and a data field illustrated in include a plurality of memory cells . illustrates an example of the circuit configuration of a given memory cell n is a natural number of the plurality of memory cells included in the tag and the data field . The memory cell includes a first transistor a second transistor a third transistor a fourth transistor a fifth transistor a sixth transistor a seventh transistor an eighth transistor a ninth transistor and a tenth transistor . Further an eleventh transistor and a twelfth transistor are electrically connected to the memory cell . The transistors except the second transistor the fourth transistor and the eleventh transistor are n channel transistors. The second transistor the fourth transistor and the eleventh transistor are p channel transistors.

To the memory cell the high level power supply potential VDD and the ground potential GND 0 V as the low level power supply potential VSS are supplied.

A gate of the first transistor is electrically connected to the word line WL and a gate of the sixth transistor . One of a source and a drain of the first transistor is electrically connected to a first data line DINn connected to the memory cell . The other of the source and the drain of the first transistor is electrically connected to one of a source and a drain of the second transistor one of a source and a drain of the third transistor a gate of the fourth transistor a gate of the fifth transistor and a gate of the tenth transistor .

A gate of the second transistor is electrically connected to a gate of the third transistor one of a source and a drain of the fourth transistor one of a source and a drain of the fifth transistor one of a source and a drain of the sixth transistor and a gate of the eighth transistor . The one of the source and the drain of the second transistor is electrically connected to the other of the source and the drain of the first transistor the one of the source and the drain of the third transistor the gate of the fourth transistor the gate of the fifth transistor and the gate of the tenth transistor . The other of the source and the drain of the second transistor is electrically connected to the other of the source and the drain of the fourth transistor and one of a source and a drain of the eleventh transistor .

The gate of the third transistor is electrically connected to the gate of the second transistor the one of the source and the drain of the fourth transistor the one of the source and the drain of the fifth transistor the one of the source and the drain of the sixth transistor and the gate of the eighth transistor . The one of the source and the drain of the third transistor is electrically connected to the other of the source and the drain of the first transistor the one of the source and the drain of the second transistor the gate of the fourth transistor the gate of the fifth transistor and the gate of the tenth transistor . The other of the source and the drain of the third transistor is electrically connected to the other of the source and the drain of the fifth transistor one of a source and a drain of the eighth transistor one of a source and a drain of the tenth transistor and one of a source and a drain of the twelfth transistor .

The gate of the fourth transistor is electrically connected to the other of the source and the drain of the first transistor the one of the source and the drain of the second transistor the one of the source and the drain of the third transistor the gate of the fifth transistor and the gate of the tenth transistor . The one of the source and the drain of the fourth transistor is electrically connected to the gate of the second transistor the gate of the third transistor the one of the source and the drain of the fifth transistor the one of the source and the drain of the sixth transistor and the gate of the eighth transistor . The other of the source and the drain of the fourth transistor is electrically connected to the other of the source and the drain of the second transistor and the one of the source and the drain of the eleventh transistor .

The gate of the fifth transistor is electrically connected to the other of the source and the drain of the first transistor the one of the source and the drain of the second transistor the one of the source and the drain of the third transistor the gate of the fourth transistor and the gate of the tenth transistor . The one of the source and the drain of the fifth transistor is electrically connected to the gate of the second transistor the gate of the third transistor the one of the source and the drain of the fourth transistor the one of the source and the drain of the sixth transistor and the gate of the eighth transistor . The other of the source and the drain of the fifth transistor is electrically connected to the other of the source and the drain of the third transistor the one of the source and the drain of the eighth transistor the one of the source and the drain of the tenth transistor and the one of the source and the drain of the twelfth transistor .

The gate of the sixth transistor is electrically connected to the word line WL and the gate of the first transistor . The one of the source and the drain of the sixth transistor is electrically connected to the gate of the second transistor the gate of the third transistor the one of the source and the drain of the fourth transistor the one of the source and the drain of the fifth transistor and the gate of the eighth transistor . The other of the source and the drain of the sixth transistor is electrically connected to a second data line DINBn connected to the memory cell

A gate of the seventh transistor is electrically connected to the read line RE and a gate of the ninth transistor . One of a source and a drain of the seventh transistor is electrically connected to a first bit line BLn connected to the memory cell . The other of the source and the drain of the seventh transistor is electrically connected to the other of the source and the drain of the eighth transistor .

The gate of the eighth transistor is electrically connected to the gate of the second transistor the gate of the third transistor the one of the source and the drain of the fourth transistor the one of the source and the drain of the fifth transistor and the one of the source and the drain of the sixth transistor . The one of the source and the drain of the eighth transistor is electrically connected to the other of the source and the drain of the third transistor the other of the source and the drain of the fifth transistor the one of the source and the drain of the tenth transistor and the one of the source and the drain of the twelfth transistor . The other of the source and the drain of the eighth transistor is electrically connected to the other of the source and the drain of the seventh transistor . The one of the source and the drain of the eighth transistor may be grounded.

The gate of the ninth transistor is electrically connected to the read line RE and the gate of the seventh transistor . One of a source and a drain of the ninth transistor is electrically connected to a second bit line BLNn connected to the memory cell . The other of the source and the drain of the ninth transistor is electrically connected to the other of the source and the drain of the tenth transistor .

The gate of the tenth transistor is electrically connected to the other of the source and the drain of the first transistor the one of the source and the drain of the second transistor the one of the source and the drain of the third transistor the gate of the fourth transistor and the gate of the fifth transistor . The one of the source and the drain of the tenth transistor is electrically connected to the other of the source and the drain of the third transistor the other of the source and the drain of the fifth transistor the one of the source and the drain of the eighth transistor and the one of the source and the drain of the twelfth transistor . The other of the source and the drain of the tenth transistor is electrically connected to the other of the source and the drain of the ninth transistor . The one of the source and the drain of the tenth transistor may be grounded.

A gate of the eleventh transistor is electrically connected to the third data line VData. The one of the source and the drain of the eleventh transistor is electrically connected to the other of the source and the drain of the second transistor and the other of the source and the drain of the fourth transistor . The other of the source and the drain of the eleventh transistor is supplied with the high level power supply potential VDD.

A gate of the twelfth transistor is electrically connected to the fourth data line VDatab. The one of the source and the drain of the twelfth transistor is electrically connected to the other of the source and the drain of the third transistor the other of the source and the drain of the fifth transistor the one of the source and the drain of the eighth transistor and the one of the source and the drain of the tenth transistor . The other of the source and the drain of the twelfth transistor is supplied with the ground potential GND as the low level power supply potential VSS.

In the memory cell illustrated in the second transistor which is a p channel transistor and the third transistor which is an n channel transistor are included in a first inverter . The fourth transistor which is a p channel transistor and the fifth transistor which is an n channel transistor are included in a second inverter . is a circuit diagram where the first inverter and the second inverter are denoted by circuit symbols.

In the gate of the second transistor and the gate of the third transistor collectively referred to as an input terminal of the first inverter and the one of the source and the drain of the fourth transistor and the one of the source and the drain of the fifth transistor collectively referred to as an output terminal of the second inverter are electrically connected to a node M. The one of the source and the drain of the second transistor and the one of the source and the drain of the third transistor collectively referred to as an output terminal of the first inverter and the gate of the fourth transistor and the gate of the fifth transistor collectively referred to as an input terminal of the second inverter are electrically connected to a node M.

The first inverter and the second inverter are included in a data storage circuit . The output terminal of the first inverter is electrically connected to the input terminal of the second inverter . The output terminal of the second inverter is electrically connected to the input terminal of the first inverter . Data input to the memory cell of the tag or the data field is stored in the data storage circuit .

Note that although the eleventh transistor and the twelfth transistor are provided so as to be connected to the memory cell in both of the eleventh transistor and the twelfth transistor are not necessary that is at least one of them is provided.

Hereinafter a description will be given of the operation of a cache line see which includes the valid bit including the memory cell the tag including memory cells   to and the data field including memory cells to note that i j and m are natural numbers i is larger than or equal to 2 j is larger than i and m is larger than or equal to j . Although the case where a cache memory includes eight cache lines each having a 1 bit valid bit a 27 bit tag and a 32 bit data field is described in this embodiment the number of the bits is not limited thereto. It is needless to say that a necessary number of memory cells are included in the valid bit the tag and the data field . Further a necessary number of cache lines are used.

When the tag is a 27 bit tag i is 27 and the tag includes memory cells   to  . When the data field is a 32 bit data field j is 28 and m is 59 in other words the data field includes memory cells   to  .

The operations of writing and reading data to from the memory cell of the valid bit will be described below.

When the word line WL of a given cache line is selected so that the potential WL of the word line WL becomes the high level potential VH also referred to as data 1 the first transistor and the sixth transistor are turned on.

At this time the potential DIN which is the high level potential VH also referred to as data 1 is supplied to the first data line DIN and the potential DINB which is the low level potential VL also referred to as data 0 is supplied to the second data line DINB.

When the high level potential VH is supplied to the first data line DIN a potential corresponding to the high level potential VH is supplied to the node M through the source and the drain of the first transistor .

When the low level potential VL is supplied to the second data line DINB the low level potential VL data 0 is supplied to the node M through the source and the drain of the sixth transistor . In other words the ground potential GND is supplied to the input terminal of the first inverter .

When the low level potential VL is supplied to the node M the potential VData of the third data line VData becomes a low level potential VL data 0 .

Further when the low level potential VL the ground potential GND in this embodiment is supplied to the node M the second transistor is turned on and the third transistor is turned off.

When the second transistor is turned on and the third transistor is turned off the high level power supply potential VDD is supplied to the node M through the source and the drain of the second transistor . In other words the high level potential VH data 1 is output from the output terminal of the first inverter and the high level potential VH data 1 is input to the input terminal of the second inverter .

When the high level potential VH the high level power supply potential VDD in this embodiment is supplied to the node M the potential VDatab of the third data line VDatab becomes the high level potential VH data 1 .

Further when the high level potential VH is supplied to the node M the fourth transistor is turned off and the fifth transistor is turned on so that the ground potential GND is supplied to the node M through the source and the drain of the fifth transistor . In other words the low level potential VL data 0 is output from the output terminal of the second inverter and the low level potential VL data 0 is input to the input terminal of the first inverter .

Note that in this embodiment when the potential VData is the low level potential VL data 0 and the potential VDatab is the high level potential VH data 1 valid data is 1 when the potential VData is the high level potential VH data 1 and the potential VDatab is the low level potential VL data 0 valid data is 0 .

Through the above operation valid data is written to the memory cell of the valid bit . The valid data is stored in the data storage circuit including the first inverter and the second inverter .

When the potential VData output from the valid bit is the low level potential VL data 0 and the potential VDatab output from the valid bit is the high level potential VH data 1 when valid data is data 1 data stored in the cache line including the valid bit is valid.

The potential VData which is the low level potential VL data 0 is supplied to the gate of the eleventh transistor . The potential VDatab which is the high level potential VH data 1 is supplied to the gate of the twelfth transistor .

As described above the eleventh transistor and the twelfth transistor are a p channel transistor and an n channel transistor respectively. Thus when the low level potential VL data 0 is supplied to the gate of the eleventh transistor the eleventh transistor is turned on and when the high level potential VH data 1 is supplied to the gate of the twelfth transistor the twelfth transistor is turned on. Accordingly the high level power supply potential VDD and the ground potential GND are supplied through the eleventh transistor and the twelfth transistor respectively to the given memory cell of the tag or the data field so that the memory cell is turned on.

As illustrated in the tag includes the memory cells   to and the data field includes the memory cells to . The memory cells   to each having a configuration similar to that of the memory cells are sequentially connected.

As illustrated in the third data line VData is electrically connected to the eleventh transistors electrically connected to the memory cells of the tag and the data field and the fourth data line VDatab is electrically connected to the twelfth transistors electrically connected to the memory cells of the tag and the data field . Thus when the potential VData is the low level potential VL data 0 and the potential VDatab is the high level potential VH data 1 when valid data is data 1 all the memory cells   to of the corresponding cache line are turned on.

On the other hand when the potential VData output from the valid bit of the cache line is the high level potential VH data 1 and the potential VDatab output from the valid bit is the low level potential VL data 0 when valid data is data 0 data stored in the corresponding cache line is invalid.

The potential VData which is the high level potential VH data 1 is supplied to the gates of the eleventh transistors electrically connected to the memory cells   to of the tag and the memory cells to of the data field . The potential VDatab which is the low level potential VL data 0 is supplied to the gates of the twelfth transistors electrically connected to the memory cells   to of the tag and the memory cells to of the data field .

As described above the eleventh transistor and the twelfth transistor are a p channel transistor and an n channel transistor respectively. Thus when the high level potential VH data 1 is supplied to the gate of the eleventh transistor the eleventh transistor is turned off and when the low level potential VL data 0 is supplied to the gate of the twelfth transistor the twelfth transistor is turned off. Accordingly the high level power supply potential VDD is not supplied to the memory cells   to of the tag and the memory cells to of the data field . At the same time the ground potential GND is not supplied to the memory cells   to of the tag and the memory cells to of the data field . Consequently the memory cells   to are turned off.

That is to say power is not supplied to all the memory cells   to in the cache line where the potential VData output from the valid bit is the high level potential data 1 and the potential VDatab output from the valid bit is the low level potential data 0 valid data is 0 . Since power is not supplied to the cache line where valid data is 0 low power consumption of the cache memory can be achieved.

Here Table 1 shows a configuration example of the cache memory of this embodiment which includes eight cache lines each including the 1 bit valid bit the 27 bit tag and the 32 bit data field . Note that data stored in the data field shown in Table 1 is only an example and one embodiment of the present invention is not limited thereto.

As shown in Table 1 data stored in the data fields in cache lines to where valid data of valid bits is 1 are valid. On the other hand power supply potentials the high level power supply potential VDD and the ground potential GND are not supplied to cache lines 0 1 and 5 to 7 where valid data is 0 . Power supply potentials are not supplied to the cache lines where valid data is 0 whereby low power consumption of the cache memory can be achieved.

The operation of reading data stored in the data storage circuit in the memory cell will be described below.

In this embodiment when valid data stored in the valid bit is 1 data stored in the corresponding data field in the cache line is valid whereas when valid data stored in the valid bit is 0 data stored in the corresponding data field in the cache line is invalid. A CPU needs to read valid data stored in the valid bit in some cases so that whether data stored in the data field in the cache line is valid or invalid is determined.

Note that a precharge operation for the first bit line BL and the second bit line BLN is performed in a step prior to the operation of reading data from the memory cell . For example the high level potential VH data 1 is supplied to the first bit line BL and the second bit line BLN by a precharge circuit not illustrated connected to the first bit line BL and the second bit line BLN and then the first bit line BL and the second bit line BLN are made to be electrically floating in a floating state .

Next the high level potential VH is supplied to the read line RE so that the seventh transistor and the ninth transistor are turned on.

When the low level potential VL data 0 and the high level potential VH data 1 are held at the node M and the node M respectively the low level potential VL data 0 is supplied to the gate of the eighth transistor so that the eight transistor is turned off. Further the high level potential VH data 1 is supplied to the gate of the tenth transistor so that the tenth transistor is turned on.

Although the seventh transistor is on the eighth transistor is off thus the potential of the first bit line BL remains the high level potential VH data 1 precharged.

Since the tenth transistor is turned on the ground potential GND is supplied to the second bit line BLN through the ninth transistor and the tenth transistor . Consequently the potential BLN of the second bit line BLN becomes the low level potential VL data 0 .

The operations of writing and reading data to from the given memory cell of the memory cells included in the tag and the data field when the valid data is 1 will be given below.

In the memory cell to which data is written the potential VData which is the low level potential VL data 0 is supplied to the gate of the eleventh transistor to turn on the eleventh transistor in advance. Further the potential VDatab which is the high level potential VH data 1 is supplied to the gate of the twelfth transistor to turn on the twelfth transistor in advance. Accordingly the high level power supply potential VDD and the ground potential GND are supplied through the eleventh transistor and the twelfth transistor respectively to the memory cell so that the memory cell is turned on.

The operation of writing data to the given memory cell which is on supplied with power of the tag or the data field in the cache line the memory cell in which the eleventh transistor and the twelfth transistor are on will be described below.

When the potential WL which is the high level potential VH is supplied to the word line WL in the memory cell which is on as described above the first transistor and the sixth transistor are turned on.

At this time a potential DINn which is the high level potential VH data 1 is supplied to the first data line DINn and a potential DINBn which is the low level potential VL data 0 is supplied to the second data line DINBn.

When the high level potential VH is supplied to the first data line DINn a potential corresponding to the high level potential VH is supplied to the gate of the fourth transistor and the gate of the fifth transistor through the source and the drain of the first transistor . In other words a potential corresponding to the high level potential VH is supplied to the input terminal of the second inverter .

When the low level potential VL is supplied to the second data line DINBn the low level potential VL data 0 is supplied to the node M through the source and the drain of the sixth transistor . In other words the ground potential GND is supplied to the input terminal of the first inverter .

Since the low level potential VL is supplied to the node M the second transistor is turned on and the third transistor is turned off.

Thus the high level power supply potential VDD is supplied to the node M through the second transistor . In other words the high level potential VH data 1 is output from the output terminal of the first inverter .

Through the above steps address data is written to the given memory cell of the tag or cache data is written to the given memory cell of the data field . The address data or the cache data is stored in the data storage circuit including the first inverter and the second inverter .

The operation of reading data stored in the data storage circuit in the memory cell will be described below. Note that a precharge operation for the first bit line BLn and the second bit line BLNn is performed in a step prior to the reading operation as in the memory cell . By the precharge operation the high level potential VH data 1 is supplied to the first bit line BLn and the second bit line BLNn.

The high level potential VH is supplied to the read line RE whereby the seventh transistor and the ninth transistor are turned on.

When the low level potential VL data 0 is held at the node M and the high level potential VH data 1 is held at the node M the low level potential VL is supplied to the gate of the eighth transistor so that the eighth transistor is turned off. Further the high level potential VH is supplied to the gate of the tenth transistor so that the tenth transistor is turned on.

Even when the seventh transistor is on the eighth transistor is off thus the potential held at the first bit line BLn remains the high level potential VH precharged.

Since the high level potential VH data 1 is held at the node M the tenth transistor is on. Accordingly the ground potential GND is supplied to the second bit line BLNn through the ninth transistor and the tenth transistor so that a potential BLNn becomes the low level potential VL data 0 .

Note that in this embodiment when a potential BLn is the high level potential VH data 1 and the potential BLNn is the low level potential VL data 0 the data of the memory cell is 1 . When the potential BLn is the low level potential VL data 0 and the potential BLNn is the high level potential VH data 1 the data of the memory cell is 0 .

Through the above steps the address data and the cache data can be read from the tag and the data field respectively.

Note that the third data line VData and the fourth data line VDatab may each be provided with a buffer circuit. illustrates a circuit configuration example different from that in in that the third data line VData and the fourth data line VDatab are provided with a buffer circuit and a buffer circuit respectively.

The buffer circuit includes two inverters an inverter and an inverter connected in series. The buffer circuit includes two inverters an inverter and an inverter connected in series. Although the buffer circuit and the buffer circuit in each includes two inverters the number of inverters is any number as long as it is an even number larger than or equal to two.

The buffer circuit is electrically connected between the node M of the memory cell and the gate of the eleventh transistor of the memory cell . The buffer circuit is electrically connected between the node M of the memory cell and the gate of the twelfth transistor of the memory cell

When the third data line VData and the fourth data line VDatab are provided with the buffer circuits as described above they can have more excellent output characteristics.

In this embodiment the circuit configuration of a storage device having a configuration different from that of Embodiment 1 will be described. Note that the same components as those described in Embodiment 1 will be described using common reference numerals and the descriptions thereof will be omitted.

In this embodiment the configuration in which a memory cell of the valid bit additionally has a reset function will be described.

To the memory cell of the valid bit in a thirteenth transistor which is a p channel transistor and a fourteenth transistor which is an n channel transistor are electrically connected.

To a gate of the thirteenth transistor a second reset line RESTB is electrically connected and a potential RESTB of the second reset line RESTB is supplied. The other of a source and a drain of the thirteenth transistor is supplied with the high level power supply potential VDD. The other of the source and the drain of the thirteenth transistor is electrically connected to the third data line VData a gate of the second transistor a gate of the third transistor one of a source and a drain of the fourth transistor one of a source and a drain of the fifth transistor one of a source and a drain of the sixth transistor and a gate of the eighth transistor .

To a gate of the fourteenth transistor a first reset line REST is electrically connected and a potential REST of the first reset line REST is supplied. One of a source and a drain of the fourteenth transistor is supplied with the ground potential GND. The other of the source and the drain of the fourteenth transistor is electrically connected to the fourth data line VDatab the other of a source and a drain of the first transistor one of a source and a drain of the second transistor one of a source and a drain of the third transistor a gate of the fourth transistor a gate of the fifth transistor and a gate of the tenth transistor .

Further different potentials selected from the high level potential VH and the low level potential VL are supplied to the first reset line REST and the second reset line RESTB. Specifically when the potential REST is the high level potential VH the potential RESTB is the low level potential VL and when the potential REST is the low level potential VL the potential RESTB is the high level potential VH.

As described in Embodiment 1 the first inverter includes the second transistor and the third transistor and the second inverter includes the fourth transistor and the fifth transistor . The data storage circuit includes the first inverter and the second inverter see .

As soon as the power is supplied to a cache memory illustrated in data of a cache line becomes invalid. Further in the valid bit directly after the power supply the potential of the node M an output terminal of the second inverter and the potential of the node M an output terminal of the first inverter can be either the high level potential VH data 1 or the low level potential VL data 0 . That is valid data of the cache line having invalid data could be 1 . When a CPU reads and processes data of invalid data of the cache line the CPU might malfunction.

For this reason valid data 0 of the valid bit needs to be written as soon as the power is supplied to the cache memory illustrated in . As described above valid data 0 means that the potential VData is the high level potential VH data 1 and the potential VDatab is the low level potential VL data 0 .

When a potential RESET of a first reset line RESET is the high level potential VH and a potential RESETB of a second reset line RESETB is the low level potential VL the thirteenth transistor and the fourteenth transistor are turned on.

When the thirteenth transistor is turned on the potential VData of the third data line VData becomes the high level power supply potential VDD data 1 through the thirteenth transistor .

When the fourteenth transistor is turned on the potential VDatab of the fourth data line VDatab becomes the ground potential GND data 0 through the fourteenth transistor .

Note that the third data line VData and the fourth data line VDatab may each be provided with a buffer circuit as in Embodiment 1.

In this embodiment the circuit configuration of a storage device having a configuration different from those of Embodiment 1 and Embodiment 2 will be described. Note that the same components as those described in Embodiment 1 and Embodiment 2 will be described using common reference numerals and the descriptions thereof will be omitted.

In a memory cell of the valid bit illustrated in a clocked inverter and an analog switch are used instead of the first inverter and the first transistor in the memory cell in respectively.

In this embodiment when the analog switch of the memory cell is on the clocked inverter is off. When the analog switch of the memory cell is off the clocked inverter is on. With such a configuration data conflict in data writing can be prevented. The details will be described later.

The memory cell in includes an analog switch a data storage circuit the seventh transistor the eighth transistor the ninth transistor and the tenth transistor . Note that the analog switch is also referred to as a transmission gate. is a circuit diagram where the analog switch the clocked inverter and the second inverter illustrated in are denoted by circuit symbols.

In the memory cell illustrated in a first word line WL and a second word line WLB are electrically connected to each other. Note that a potential supplied to the first word line WL is referred to as the potential WL and a potential supplied to the second word line WLB is referred to as a potential WLB.

Further different potentials selected from the high level potential VH and the low level potential VL are supplied to the first word line WL and the second word line WLB. Specifically when the potential WL is the high level potential VH the potential VLB is the low level potential VL and when the potential WL is the low level potential VL the potential WLB is the high level potential VH.

The analog switch includes a fifteenth transistor which is an n channel transistor and a sixteenth transistor which is a p channel transistor.

The clocked inverter includes a seventeenth transistor and an eighteenth transistor which are p channel transistors and a nineteenth transistor and a twentieth transistor which are n channel transistors.

The second inverter includes the fourth transistor which is a p channel transistor and the fifth transistor which is an n channel transistor as in Embodiment 1.

A gate of the fifteenth transistor is electrically connected to the first word line WL and a gate of the seventeenth transistor . One of a source and a drain of the fifteenth transistor is electrically connected to the first data line DIN and one of a source and a drain of the sixteenth transistor . The other of the source and the drain of the fifteenth transistor is electrically connected to the fourth data line VDatab the other of the source and the drain of the sixteenth transistor one of a source and a drain of the eighteenth transistor one of a source and a drain of the nineteenth transistor a gate of the fourth transistor a gate of the fifth transistor and a gate of the tenth transistor .

A gate of the sixteenth transistor is electrically connected to the second word line WLB and a gate of the twentieth transistor . The one of the source and the drain of the sixteenth transistor is electrically connected to the first data line DIN and the one of the source and the drain of the fifteenth transistor . The other of the source and the drain of the sixteenth transistor is electrically connected to the fourth data line VDatab the other of the source and the drain of the fifteenth transistor the one of the source and the drain of the eighteenth transistor the one of the source and the drain of the nineteenth transistor the gate of the fourth transistor the gate of the fifth transistor and the gate of the tenth transistor .

The gate of the seventeenth transistor is electrically connected to the first word line WL and the gate of the fifteenth transistor . One of a source and a drain of the seventeenth transistor is electrically connected to the other of the source and the drain of the eighteenth transistor . The other of the source and the drain of the seventeenth transistor is supplied with the high level power supply potential VDD and electrically connected to the other of a source and a drain of the fourth transistor .

A gate of the eighteenth transistor is electrically connected to the third data line VData a gate of the nineteenth transistor one of the source and the drain of the fourth transistor one of a source and a drain of the fifth transistor and a gate of the eighth transistor . The one of the source and the drain of the eighteenth transistor is electrically connected to the fourth data line VDatab the other of the source and the drain of the fifteenth transistor the other of the source and the drain of the sixteenth transistor the one of the source and the drain of the nineteenth transistor the gate of the fourth transistor the gate of the fifth transistor and the gate of the tenth transistor . The other of the source and the drain of the eighteenth transistor is electrically connected to the other of the source and the drain of the seventeenth transistor .

The gate of the nineteenth transistor is electrically connected to the third data line VData the gate of the eighteenth transistor the one of the source and the drain of the fourth transistor the one of the source and the drain of the fifth transistor and the gate of the eighth transistor . The one of the source and the drain of the nineteenth transistor is electrically connected to the fourth data line VDatab the other of the source and the drain of the fifteenth transistor the other of the source and the drain of the sixteenth transistor the one of the source and the drain of the eighteenth transistor the gate of the fourth transistor the gate of the fifth transistor and the gate of the tenth transistor . The other of the source and the drain of the nineteenth transistor is electrically connected to one of a source and a drain of the twentieth transistor .

The gate of the twentieth transistor is electrically connected to the second word line WLB and the gate of the sixteenth transistor . The one of the source and the drain of the twentieth transistor is electrically connected to the other of the source and the drain of the nineteenth transistor . The other of the source and the drain of the twentieth transistor is supplied with the ground potential GND and electrically connected to one of a source and a drain of the eighth transistor the other of the source and the drain of the fifth transistor and one of a source and a drain of the tenth transistor .

In the gate of the eighteenth transistor and the gate of the nineteenth transistor collectively referred to as an input terminal of the clocked inverter and the one of the source and the drain of the fourth transistor and the one of the source and the drain of the fifth transistor collectively referred to as an output terminal of the second inverter are electrically connected to a node M.

The one of the source and the drain of the eighteenth transistor and the one of the source and the drain of the nineteenth transistor collectively referred to as an output terminal of the clocked inverter and the gate of the fourth transistor and the gate of the fifth transistor collectively referred to as an input terminal of the second inverter are electrically connected to a node M. The potential of the node M is the output potential of the second inverter and is the potential VData. The potential of the node M is the output potential of the clocked inverter and is the potential VDatab.

The operation of writing data to the memory cell of the valid bit will be described below with reference of .

When the potential WL of the first word line WL becomes the high level potential VH data 1 and the potential WLB of the second word line WLB becomes the low level potential VL data 0 the fifteenth transistor and the sixteenth transistor are turned on. In other words the analog switch is turned on.

When the high level potential VH data 1 is supplied to the first data line DIN the high level potential VH is supplied to the gate of the fourth transistor and the gate of the fifth transistor through the source and the drain of each of the fifteenth transistor and the sixteenth transistor . In other words the high level potential VH data 1 is supplied to the input terminal of the second inverter .

When the fifth transistor is turned on the ground potential GND data 0 is supplied to the node M through the source and the drain of the fifth transistor . In other words the ground potential GND data 0 is output from the output terminal of the second inverter .

Since the ground potential GND data 0 is supplied to the node M the potential VData of the third data line VData becomes the ground potential data 0 .

Since the high level potential VH is supplied to the gate of the fourth transistor and the gate of the fifth transistor the potential of the node M becomes the high level potential VH data 1 so that the potential VDatab of the fourth data line VDatab becomes the high level potential VH data 1 .

On the other hand the potential WL which is the high level potential VH is supplied to the gate of the seventeenth transistor so that the seventeenth transistor is turned off. The potential WLB which is the low level potential VL is supplied to the gate of the twentieth transistor so that the twentieth transistor is turned off. In other words the clocked inverter is turned off.

As described above valid data is 1 when the potential VData is the low level potential VL data 0 and the potential VDatab is the high level potential VH data 1 . Thus by the writing operation valid data 1 is written to the memory cell of the valid bit .

Through the above operations in the memory cell of the valid bit the clocked inverter of the data storage circuit is turned off and the analog switch is turned on so that valid data can be written.

When the potential WL of the first word line WL becomes the low level potential VL data 0 and the potential WLB of the second word line WLB becomes the high level potential VH data 1 the fifteenth transistor and the sixteenth transistor are turned off. In other words the analog switch is turned off.

The potential WL which is the low level potential VL is supplied to the gate of the seventeenth transistor so that the seventeenth transistor is turned on. The potential WLB which is the high level potential VH is supplied to the gate of the twentieth transistor so that the twentieth transistor is turned on.

In the writing operation the ground potential GND data 0 is supplied to the node M. That is the ground potential GND data 0 is supplied to the gate of the eighteenth transistor . Consequently the eighteenth transistor is turned on.

Since the ground potential GND data 0 is supplied to the node M the ground potential GND data 0 is supplied to the gate of the nineteenth transistor so that the nineteenth transistor remains off.

Since the seventeenth transistor and the eighteenth transistor are on the high level potential VH data 1 is supplied to the node M. The nineteenth transistor and the twentieth transistor are off. In other words the clocked inverter outputs the high level potential VH data 1 .

In the storage operation the high level potential VH data 1 is input to the second inverter and the ground potential GND data 0 is output from the second inverter so that the high level potential VH data 1 is held at the node M.

Thus the potential VData is the ground potential GND data 0 and the potential VDatab is the high level potential VH data 1 .

As described above valid data is 1 when the potential VData is the low level potential VL data 0 and the potential VDatab is the high level potential VH data 1 . Thus by the storage operation valid data 1 is held in the memory cell of the valid bit .

Through the above operations in the memory cell of the valid bit the clocked inverter of the data storage circuit is turned on and the analog switch is turned off so that valid data can be stored.

The state where two or more output terminals are connected to one node the high level potential VH is supplied from one of the output terminals and the low level potential VL is supplied from one of the other output terminals is referred to as data conflict. In the data storage circuit in Embodiment 1 which includes the first inverter and the second inverter and in which the output terminal of the first inverter is electrically connected to the input terminal of the second inverter and the output terminal of the second inverter is electrically connected to the input terminal of the first inverter data conflict might occur in data rewriting. For example when the low level potential VL is supplied from the first data line DIN through the first transistor in the state where the first inverter outputs the high level potential VH in the state where the high level potential VH is supplied to the node M the low level potential VL is supplied to the node M supplied with the high level potential VH.

In the memory cell exemplified in this embodiment the clocked inverter is turned off when the analog switch is on whereby the node M can be in the state where a potential is not supplied in a floating state . The clocked inverter is on when the analog switch of the memory cell is off whereby a potential is supplied to the node M. With such a configuration data conflict in data rewriting can be prevented.

To read valid data from the valid bit including the memory cell the data storage circuit the node M and the node M in the reading operation described in Embodiment 1 are replaced with the data storage circuit the node M and the node M respectively.

A storage device where a clocked inverter and an analog switch are provided in each of memory cells of the tag and the data field as well as in the memory cell of the valid bit illustrated in will be described below. With this configuration data conflict can be prevented also in the memory cells of the tag and the data field .

A given memory cell of the tag and the data field in includes an analog switch and a clocked inverter instead of the first transistor and the first inverter of the given memory cell of the tag and the data field in respectively.

The memory cell in includes an analog switch a data storage circuit the seventh transistor the eighth transistor the ninth transistor and the tenth transistor . The eleventh transistor and the twelfth transistor are electrically connected to the memory cell . is a circuit diagram where the analog switch the clocked inverter the second inverter the analog switch a clocked inverter and the second inverter illustrated in are denoted by circuit symbols.

In the memory cell illustrated in the first word line WL and the second word line WLB are electrically connected to each other.

The analog switch includes a fifteenth transistor which is an n channel transistor and a sixteenth transistor which is a p channel transistor.

The clocked inverter includes a seventeenth transistor and an eighteenth transistor which are p channel transistors and a nineteenth transistor and a twentieth transistor which are n channel transistors.

The second inverter includes the fourth transistor which is a p channel transistor and the fifth transistor which is an n channel transistor as in Embodiment 1.

A gate of the fifteenth transistor is electrically connected to the first word line WL and a gate of the seventeenth transistor . One of a source and a drain of the fifteenth transistor is electrically connected to the first data line DINn and one of a source and a drain of the sixteenth transistor . The other of the source and the drain of the fifteenth transistor is electrically connected to the other of the source and the drain of the sixteenth transistor one of a source and a drain of the eighteenth transistor one of a source and a drain of the nineteenth transistor a gate of the fourth transistor a gate of the fifth transistor and a gate of the tenth transistor .

A gate of the sixteenth transistor is electrically connected to the second word line WLB and a gate of the twentieth transistor . One of a source and a drain of the sixteenth transistor is electrically connected to the first data line DINn and the one of the source and the drain of fifteenth transistor . The other of the source and the drain of the sixteenth transistor is electrically connected to the other of the source and the drain of the fifteenth transistor the one of the source and the drain of the eighteenth transistor the one of the source and the drain of the nineteenth transistor the gate of the fourth transistor the gate of the fifth transistor and the gate of the tenth transistor .

The gate of the seventeenth transistor is electrically connected to the first word line WL and the gate of the fifteenth transistor . One of a source and a drain of the seventeenth transistor is electrically connected to the other of the source and the drain of the eighteenth transistor . The other of the source and the drain of the seventeenth transistor is electrically connected to the other of a source and a drain of the fourth transistor and one of a source and a drain of the eleventh transistor .

A gate of the eighteenth transistor is electrically connected to a gate of the nineteenth transistor one of the source and the drain of the fourth transistor one of a source and a drain of the fifth transistor and a gate of the eighth transistor . The one of the source and the drain of the eighteenth transistor is electrically connected to the other of the source and the drain of the fifteenth transistor the other of the source and the drain of the sixteenth transistor the one of the source and the drain of the nineteenth transistor the gate of the fourth transistor the gate of the fifth transistor and the gate of the tenth transistor . The other of the source and the drain of the eighteenth transistor is electrically connected to the one of the source and the drain of the seventeenth transistor .

The gate of the nineteenth transistor is electrically connected to the gate of the eighteenth transistor the one of the source and the drain of the fourth transistor the one of the source and the drain of the fifth transistor and the gate of the eighth transistor . The one of the source and the drain of the nineteenth transistor is electrically connected to the other of the source and the drain of the fifteenth transistor the other of the source and the drain of the sixteenth transistor the one of the source and the drain of the eighteenth transistor the gate of the fourth transistor the gate of the fifth transistor and the gate of the tenth transistor . The other of the source and the drain of the nineteenth transistor is electrically connected to one of a source and a drain of the twentieth transistor .

The gate of the twentieth transistor is electrically connected to the second word line WLB and the gate of the sixteenth transistor . The one of the source and the drain of the twentieth transistor is electrically connected to the other of the source and the drain of the nineteenth transistor . The other of the source and the drain of the twentieth transistor is electrically connected to one of a source and a drain of the eighth transistor one of a source and a drain of the tenth transistor and one of a source and a drain of the twelfth transistor .

In the gate of the eighteenth transistor and the gate of the nineteenth transistor collectively referred to as an input terminal of the clocked inverter and the one of the source and the drain of the fourth transistor and the one of the source and the drain of the fifth transistor collectively referred to as an output terminal of the second inverter are electrically connected to a node M.

The one of the source and the drain of the eighteenth transistor and the one of the source and the drain of the nineteenth transistor collectively referred to as an output terminal of the clocked inverter and the gate of the fourth transistor and the gate of the fifth transistor collectively referred to as an input terminal of the second inverter are electrically connected to a node M. The node M is supplied with a potential from the second inverter and the node M is supplied with a potential from the clocked inverter .

Note that although the eleventh transistor and the twelfth transistor are provided so as to be connected to the memory cell in both of the eleventh transistor and the twelfth transistor are not necessary that is at least one of them is provided.

The operations of writing and reading data to from the given memory cells of the memory cells included in the tag and the data field when the valid data is 1 will be given below.

In the memory cell to which data is written the potential VData which is the low level potential VL data 0 is supplied to the gate of the eleventh transistor to turn on the eleventh transistor . Further the potential VDatab which is the high level potential VH data 1 is supplied to the gate of the twelfth transistor to turn on the twelfth transistor . Accordingly the high level power supply potential VDD and the ground potential GND are supplied through the eleventh transistor and the twelfth transistor respectively to the memory cell

In the operations of writing and storing data to in the memory cell the fifteenth to twentieth transistors to the fourth transistor the fifth transistor the analog switch the clocked inverter the second inverter the node M the node M and the memory cell in the operation of writing data to the memory cell are replaced with the fifteenth to twentieth transistors to the fourth transistor the fifth transistor the analog switch the clocked inverter the second inverter the node M the node M and the memory cell respectively.

Through the above operations the address data and the cache data can be written to the tag and the data field respectively and the written data can be stored.

To read the address data and the cache data from the tag and the data field of this embodiment respectively the memory cell the data storage circuit the node M and the node M in the reading operation described in Embodiment 1 are replaced with the memory cell the data storage circuit the node M and the node M respectively.

Through the above steps the address data and the cache data can be read from the tag and the data field respectively.

Note that the precharge operation described in Embodiment 1 is performed in a step prior to the operation of reading data from the memory cell . Embodiment 1 can be referred to for the precharge operation thus the specific description thereof will be omitted.

Note that the third data line VData and the fourth data line VDatab may each be provided with a buffer circuit as in Embodiment 1.

In this embodiment a CPU including any of the storage devices described in Embodiments 1 to 3 will be described.

A CPU includes a control unit an arithmetic logic unit ALU corresponding to an arithmetic unit a data cache an instruction cache a program counter an instruction register a main storage device and a register file . In this embodiment any of the storage devices described in Embodiments 1 to 3 is used for each of the data cache and the instruction cache .

The control unit has a function of decoding and carrying out an input instruction. The ALU has a function of performing a variety of arithmetic operations such as four arithmetic operations and logic operations. The data cache is a buffer storage device which temporary stores frequently used data. The instruction cache is a buffer storage device which temporary stores frequently used instructions of instructions programs sent to the control unit . The program counter is a register which stores an address of an instruction to be carried out next. The instruction register is a register which stores an instruction to be carried out next. Data used for the arithmetic operations in the ALU and an instruction which is carried out in the control unit are stored in the main storage device . The register file includes a plurality of registers including a general purpose register and can store data which is read from the main storage device data which is obtained during the arithmetic operations in the ALU data which is obtained as a result of the arithmetic operations in the ALU and the like.

The control unit reads an instruction from an address of the instruction cache corresponding to the address of the instruction to be carried out next which is stored in the program counter and makes the instruction register store the instruction. When the instruction is not stored in the corresponding address of the instruction cache the control unit gets access to a corresponding address of the main storage device reads the instruction from the main storage device and makes the instruction register store the instruction. In this case the instruction is also stored in the instruction cache .

The control unit decodes the instruction stored in the instruction register and carries out the instruction. Specifically the control unit generates various signals for controlling the operation of the ALU in accordance with the instruction.

When the instruction to be carried out is an arithmetic instruction the control unit makes the ALU perform arithmetic operations using the data stored in the register file and stores a result of the arithmetic operations in the register file .

When the instruction to be carried out is a loading instruction the control unit first gets access to a corresponding address of the data cache and checks whether or not a corresponding data exists in the data cache . When the corresponding data exists in the data cache the data is copied from the corresponding address of the data cache to the register file . When the corresponding data does not exist in the data cache the data is copied from a corresponding address of the main storage device to the corresponding address of the data cache and then the data is copied from the corresponding address of the data cache to the register file . Note that in the case where the corresponding data does not exist since the control unit needs to get access to the low speed main storage device as described above it takes long time to carry out the instruction as compared with the case where the control unit gets access to only the buffer storage device such as the data cache . However when not only the above data but also the address of the data and data of addresses of the vicinities of the data in the main storage device are copied to the buffer storage device second and the subsequent accesses to the address of the data and the addresses of the vicinities thereof in the main storage device can be performed at high speed.

When the instruction to be carried out is a store instruction the control unit stores data of the register file in a corresponding address of the data cache . In this case the control unit first gets access to the corresponding address of the data cache and checks whether or not the corresponding data can be stored in the data cache . When the data can be stored in the data cache the data is copied from the register file to the corresponding address of the data cache . When the data cannot be stored a new corresponding address is assigned in part of the data cache and the data is copied from the register file to the corresponding address of the data cache . Note that the data may be copied to the main storage device immediately after the data is copied to the data cache . Alternatively some pieces of data may be copied to the data cache and then the pieces of data may be collectively copied to the main storage device .

Then after the control unit carries out the instruction the control unit performs the above operations of getting access to the program counter and decoding and carrying out an instruction read from the instruction register again.

In this embodiment the use of any of the storage devices described in Embodiments 1 to 3 for each of the data cache and the instruction cache allows reduction in power consumption of the CPU .

This application is based on Japanese Patent Application serial no. 2012 105466 filed with the Japan Patent Office on May 2 2012 the entire contents of which are hereby incorporated by reference.

