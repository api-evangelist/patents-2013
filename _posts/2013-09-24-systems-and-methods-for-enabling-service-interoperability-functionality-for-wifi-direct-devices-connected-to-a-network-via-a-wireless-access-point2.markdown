---

title: Systems and methods for enabling service interoperability functionality for WiFi Direct devices connected to a network via a wireless access point
abstract: Certain embodiments herein are directed to enabling service interoperability functionality for wireless fidelity (WiFi) Direct devices connected to a network via a wireless access point. A WiFi Direct device may identify various other WiFi Direct devices on a WiFi network for performing a requested service, such as printing content or displaying content to a screen. In so doing, the device may share information associated with an access point to which the device is connected with the other devices, which may also share information associated with an access point to which they are connected. In this way, WiFi Direct devices may discover their connectivity with respect to other devices to utilize a broader array of connection options for implementing a desired service, and hence, may leverage application programming interface (API) modules directed at providing service interoperability functionality between software applications and services requested by the software applications.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09538561&OS=09538561&RS=09538561
owner: Intel IP Corporation
number: 09538561
owner_city: Santa Clara
owner_country: US
publication_date: 20130924
---
The present application is a non provisional application claiming priority to U.S. Provisional Application No. 61 826 109 entitled Techniques to Extend ASP Connection Management filed on May 22 2013 which is hereby incorporated by reference in its entirety as if fully set forth herein.

The WiFi Direct communications protocol enables wireless devices to communicate directly with one another to exchange content or information among other uses. The WiFi Direct protocol struggles however to provide interoperability between software applications and services to ensure a consistent reliable exchange of content or information between devices. To address this problem standards bodies are currently developing program modes and protocols to improve service interoperability for WiFi Direct enabled devices. Such program modules and protocols and hence service interoperability however is limited to devices that communicate directly with one another using the peer to peer protocol. No such interoperability exists for WiFi Direct devices that utilize wireless access points to communicate with each other in part because the devices do not have knowledge of each other s connection capabilities.

Certain implementations will now be described more fully below with reference to the accompanying drawings in which various implementations and or aspects are shown. However various aspects may be implemented in many different forms and should not be construed as limited to the implementations set forth herein rather these implementations are provided so that this disclosure will be thorough and complete and will fully convey the scope of the disclosure to those skilled in the art. Like numbers refer to like elements throughout.

Certain embodiments herein are directed to among other things enabling service interoperability functionality for wireless fidelity WiFi Direct devices connected to a network via a wireless access point. A WiFi Direct device may identify various other WiFi Direct devices on a WiFi network for performing a requested service such as printing content or displaying content to a screen. In so doing the device may share information associated with an access point to which the device is connected with the other devices which may also share information associated with an access point to which they are connected. In this way WiFi Direct devices may discover their connectivity with respect to other devices to utilize a broader array of connection options for implementing a desired service. Effective use of the desired service may depend on application programming interface API modules that provide service interoperability functionality between the desired service and an application associated with the device that may request the service. As used herein such service interoperability functionality may enable a more consistent reliable exchange of information between a software application or program module requesting a service and the service itself. Such functionality may be referred to herein generally as application service program ASP connection management. The software application or program module involved in the ASP connection may be associated with a requester device or a device requesting performance of a service and the service may be associated with a service device or a device that performs the service as used herein.

By leveraging connectivity information WiFi Direct devices may discover that they are connected to the same access point and therefore may communicate with one another via the shared access point rather than refusing a direct peer to peer connection which may be unavailable to devices already connected to a network via a wireless access point. In this way service interoperability functionality as described above may be leveraged by WiFi Direct devices connected to the same wireless access point.

A requester device that has determined that it shares the same access point with a service device may send subsequent information requests to the service device via the shared access point or via a Tunneled Direct Link Setup TDLS . For example a request for particular information associated with a requested service may be sent via one of such connections. In certain embodiments as described further herein a requester device may also communicate with a service device via the peer to peer protocol in the absence of information that the requester device is connected to the same wireless access point as the service device. A service device may upon receiving a request to perform a service determine a particular type of connection to be used for exchanging information associated with the service to the requester device. Such a determination may be based on connection capabilities of the requester device and the service device performance indicators of the connection capabilities etc.

The above descriptions are for purposes of illustration and are not meant to be limiting. Numerous other descriptions configurations examples etc. may also exist some of which are described in detail below.

Example communications to facilitate enabling service interoperability functionality as described herein may be as follows. In one example the requester device may send a probe request to discover or identify devices that are within range on a wireless network. The probe request may be sent using the peer to peer or WiFi Direct protocol in one embodiment. The probe request may include various information such as but not limited to information identifying an access point to which the requester device is connected. In the present example the requester device can be connected to the access point as indicated by dotted line . One device that may receive the probe request may be the printer device . Upon receiving the probe request the printer device may become aware that the requester device is connected to the access point . The printer device may have been unaware of such information prior to receiving the probe request. The other printer device and the display device may also receive the probe request as indicated by lines and respectively.

Devices that receive a probe request may send a response to the probe request referred to herein as a probe response. Probe responses may also include various information such as but not limited to information associated with an access point to which a service device that received the probe request is connected. For example the printer device may send a probe response to the requester device that indicates that the printer device is also connected to the access point as indicated by dotted line . Upon the requester device becoming aware that the printer device is also connected to the access point communication between the requester device and the printer device may occur via the access point infrastructure . The requester device and the printer device may also communicate directly with one another using Tunneled Direct Link Setup TDLS since both devices are connected to a WiFi network via the access point . According to one example the requester device may send a service discovery request a request to perform a service etc. to the printer device via the access point or TDLS to receive information associated with a print request. Prior to discovering that the printer device is connected to the same access point the requester device may have attempted to establish direct communication with the printer device consistent with the WiFi Direct protocol.

In an example embodiment the printer device may be equipped with a single wireless interface and therefore may be able to communicate via either the wireless access point or via direct communication other devices but not both. According to this example embodiment the printer device may not establish a peer to peer connection with the requester device but may establish a connection via the access point or a TDLS link. Receiving an indication in the probe request that the requester device is connected to the same access point may enable the printer device to establish communication via a wireless access point or TDLS link instead of refusing connection requests from devices that request peer to peer communication but also have capability to connect via a wireless access point according to one embodiment. In this way devices that are connected to a wireless access point may leverage service interoperability functionality as described herein between themselves whereas such functionality may have otherwise been available only to devices that are directly connected to one another.

Another example communication in accordance with an embodiment may be as follows. The requester device and the printer device may also exchange information associated with their connectivity as described above. In one embodiment the printer device may include two wireless interfaces that may for example allow it to communicate via a wireless access point and via direct communication. According to one example the printer device may be currently communicating directly with the display device via the peer to peer protocol using one wireless interface and may connect to the requester device via the access point infrastructure using the second wireless interface since the two devices are connected to the same access point as indicated in the probe request and the probe response described above.

As another example the requester device and the display device may also exchange information associated with their connectivity as described above. In the present example the display device may be connected to the access point as shown by line which is different from the access point to which the requester device is connected. Because the two access points are different the requester device and the display device may not establish connectivity using a wireless access point. According to this example the requester device may establish a peer to peer connection with the display device . The computing device may include two wireless interfaces which for purposes of illustration only are represented by antennas and to facilitate communications with a printer device e.g. the printer device or and the display device .

The above examples in are for purposes of illustration and are not meant to be limiting. For example a different number of devices wireless interfaces and access points may exist. Also different types or protocols of communication may exist in other examples. Further services other than printing and displaying content may also be implemented. Any service configured to receive and or send communications between WiFi Direct devices may exist in other examples.

As used herein the term device may refer to any computing component that includes one or more processors that can be configured to execute computer readable computer implemented or computer executable instructions. Example devices can include client type devices output type devices wearable devices personal computers server computers server farms digital assistants smart phones personal digital assistants digital tablets smart cards Internet appliances application specific circuits microcontrollers minicomputers transceivers kiosks or other processor based devices. The execution of suitable computer implemented instructions by one or more processors associated with various devices may form special purpose computers or other particular machines that may implement or facilitate authentication of access to an operating system by a user using before the operating system is booted using a wireless communication token.

As used herein the term service may refer to a set of related software functionalities that may be reused for various purposes together with policies that control its usage.

The requester device may also include a radio receiver not shown . A physical layer interface in the radio receiver may include a radio frequency RF unit that may be configured to provide for reception of one or more RF signals at one or more frequencies. According to one configuration the RF unit may include an amplifier a mixer a local oscillator and so forth. The RF unit may be implemented as discrete electronic components integrated circuits software defined radio or a combination thereof according to various configurations. The requester device may further include a radio transmitter that may send one or more RF signals to one or more access points such as access points and as an example. In some configurations the requester device may include a radio transceiver that may receive and send RF signals. A transceiver or the receiver and or the transmitter may be coupled to one or more antennas e.g. antennas associated with the requester device . In one embodiment a single wireless interface may include multiple antennas that may be used to reduce the effects of multipath fading on received signals for example when signals sent from between devices are deflected off of one or more walls in the environment .

Turning to depicts a block diagram of an example computing environment for enabling service interoperability functionality for WiFi Direct devices connected to a network via a wireless access point. The one or more networks may facilitate communication between certain devices which are similar to the devices shown in . Such networks may include any number of wired or wireless networks that can enable various computing devices in the example computing environment to communicate with one another. In some embodiments other networks intranets or combinations of different types of networks may be used including but not limited to wireless fidelity WiFi networks WiFi Direct networks NFC networks Bluetooth networks the Internet intranets cable networks cellular networks landline based networks radio networks satellite networks other short range mid range or long range wireless networks or other communication mediums connecting multiple computing devices to one another.

The computing environment shown in may include but is not limited to one or more requester devices one or more service devices and one or more access points . The requester device and the service devices may send data frames between one another using various types of communication such as peer to peer via an access point or via a TDLS link as described above. As used herein a frame may refer to a data unit that encapsulates one or more packets which may include payloads or data for transmission across a network such as the WiFi WiFi Direct etc.

In some embodiments various modulation techniques may be used for modulating signals that may include information in frames distributed over the one or more networks such as Orthogonal Frequency Division Multiplexing OFDM dense wave division multiplexing DWDM phase shift keying PSK frequency shift keying FSK amplitude shift keying ASK and quadrature amplitude modulation QAM among other techniques. Each of the devices shown in may utilize such modulation techniques as well as demodulation techniques to access information from a modulated signal.

The devices and access points in may include one or more processors configured to communicate with one or more memory devices and various other components or devices. For example the requester devices may include one or more processors one or more input output I O devices storage one or more communication connections and one or more data stores . The one or more processors may be implemented as appropriate in hardware software firmware or a combination thereof. With respect to the service devices and the access points the one or more respective processors may be the same or at least similar to the processor associated with the requester devices .

The memory associated with the requester devices may store program instructions that are loadable and executable on the associated processor as well as data generated during the execution of these programs. Depending on the configuration and type of the requester device the memory may be volatile such as random access memory RAM static random access memory SRAM dynamic random access memory DRAM or non volatile such as read only memory ROM Electrically Erasable Programmable Read Only Memory EEPROM flash memory etc. With respect to the service devices and the access points the respective memories may be the same or at least similar to the memory associated with the requester devices .

The storage associated with the requester devices may include removable and or non removable storage including but not limited to magnetic storage optical disks and or tape storage. The disk drives and their associated computer readable media may provide non volatile storage of computer readable instructions data structures program modules and other data for the computing devices. With respect to the service devices and the access points the respective storage and may be the same or at least similar to the storage associated with the requester devices .

In any instance the memory and the storage both removable and non removable are all examples of computer readable storage media. For example computer readable storage media may include volatile and non volatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data.

The I O devices associated with the requester devices may enable a user to interact with the requester device to among other things select a device for performing a particular service one or more parameters associated with the service etc. The I O devices may include but are not limited to a keyboard a mouse a pen a voice input device a touch input device a gesture detection or capture device a display a camera or an imaging device speakers and or a printer. With respect to the service devices and the access points the respective I O devices and may be the same or at least similar to the I O devices associated with the requester devices .

The one or more communication connections associated with the requester devices may allow the requester device to communicate with other devices such as the service devices and the access points via the one or more wireless and or wired networks . In one embodiment the communication connections may include one or more antennas and one or more radios which may include hardware and software for sending and or receiving wireless signals over the various types of networks described above. With respect to the service devices and the access points the respective communication connections and may be the same or at least similar to the communication connections associated with the requester devices . For example the communication connections may include one or more radios and antennas that may enable the service device to receive and or send wireless signals to the requester device or to the access point which may route the wireless signals originating from the service device to the requester device .

The one or more data stores associated with the requester devices may store lists arrays databases flat files etc. In some implementations the data stores may be stored in a memory external to the requester device but may be accessible via one or more networks such as with a cloud storage service. The data stores may store information that may facilitate enabling service interoperability functionality for WiFi Direct devices connected to a network via an access point infrastructure as described herein. Such information may include but is not limited to information associated with an access point to which the requester device is connected such as a Media Access Control MAC address or a corresponding basic service set identification BSSID or service set identifier SSID a flag corresponding to a bit value indicating a current connection state of a WiFi Direct device with respect to an access point an operating class indicating a frequency band at which the access point is currently operating an indication of a channel number on which the access point is currently operating a country code in which the operating class and channel number fields are valid a time offset indicating when a WiFi Direct device connected to the access point will be available on the concurrent operating channel etc. information that may be used to generate frames for transmitting packets including data across a network such as frame size delimiters etc. and various other information that may facilitate the processes described herein.

Turning to the contents of the memory associated with the requester devices the memory may include but is not limited to an operating system one or more user applications one or more service interoperability application programming interface API modules and various program modules to implement facilitate or otherwise provide certain processes described herein such as a communication module a frame generation module and a connection determination module . Each of these modules may be implemented as individual modules that provide specific functionality associated with enabling service interoperability functionality for WiFi Direct devices connected to a network via a wireless access point infrastructure. Alternatively one or more of the modules may perform all or at least some of the functionality associated with the other modules.

The operating system associated with the memory may refer to a collection of software that manages computer hardware resources and provides common services for computer programs to enable and facilitate operation of such programs. Example operating systems may include UNIX Microsoft Windows Apple OS X etc.

The one or user applications associated with the memory may perform any number of functions including enabling a user to view and or interact with content e.g. text data video multimedia or other information . Example user applications may enable the user to utilize various services such as printing content or sharing the content with a display device e.g. the display device in and may include one or more device drivers to facilitate such functions.

The service interoperability API modules associated with the memory may include a common set of APIs and protocols directed to enabling service interoperability between the user applications and various services e.g. printing displaying and or interacting with content on a display device etc. . In one embodiment at least a portion of the service interoperability API modules may include modules developed by the WiFi Alliance to provide such service interoperability. The specifications describing the service interoperability may be defined in the WiFi Direct Service WFDS specification. In one embodiment the service interoperability API modules may be invoked by a software application or other program module such that the functionality provided by the service interoperability API modules may be utilized including enabling communication between a software application that requests a service and the requested service.

The communication module associated with the memory may enable the requester device to communicate with the service devices and the access points . For example the communication module may send a probe request to the service device using the peer to peer protocol and may receive a probe response from the service device . The probe request may include information associated with an access point to which the requester device is connected among other information. The probe response may include information associated with an access point to which the service device is connected among other information.

The communication module may also send a request for information associated with one or more services referred to herein as a discovery request and receive a response to the request that includes information associated with the requested service referred to herein as a discovery response . The discovery request and the discovery response may be sent using either a layer 2 or layer 3 protocol depending on the network connectivity of the requester device and the service device as will be described in greater detail below.

The communication module may further send connection capabilities of the requester device and a request for session information referred to herein as a session request frame among other information to the service device . The communication module may also receive a response to the request referred to herein as a session response frame . In one example the session request frame may include a file to be printed by a service device such as a printer device.

The frames sent and received by the communication module may be Ethernet frames User Datagram Protocol UDP frames or other types of frames. Examples describing the above types of requests and responses will be described in greater detail below.

The frame generation module associated with the memory may generate frames for distribution by the communication module . In so doing the frame generation module may perform various functions. One such function may include determining information that may be included in a frame. Such information may be accessed in the data store or other storage mechanism. Another function may include adding attributes to the frame for distribution over the one or more networks . An example attribute may include information associated with an access point to which the requester device is connection e.g. the access point . Another attribute may include an indication of a protocol used to distribute a frame. In one example the frame generation module may indicate a layer 3 protocol such as but not limited to Bonjour or Universal Plug and Play UPnP . Bonjour and UPnP may refer generally to a set of networking protocols that permits networked devise to discover each other s presence on a network and establish functional network services for data sharing communications and or other functions. The communication module may invoke such a protocol to distribute the frame upon reading the indication in one embodiment. A layer 3 protocol may be utilized when the requester device and the service device share the same access point in one embodiment. As another example the frame generation module may indicate a layer 2 protocol which may also be invoked by the communication module to distribute a frame directly to another device. An example layer 2 protocol may include but is not limited to peer to peer.

The connection determination module associated with the memory may determine a type of communication for sending information from the requester device such as via an access point or peer to peer as non limiting examples. In one embodiment such a determination may be made by comparing information associated with an access point to which the requester device is connected to information associated with an access point to which the service device is connected as may be identified in a probe response. If at least a portion of the information matches such as the BSSID or MAC address of the access points then one or more access points may be used for communication. The one or more access points may forward or route information between the requester device and the service device . A TDLS link may also be established in such instances in which a requester device and a service device connected to a WiFi network via an access point e.g. the same access point may establish a direct communication link with one another. If the access point information does not match then the peer to peer protocol may be used to communicate information between the requester device and the service device in one embodiment.

Turning to the contents of the memory associated with the service devices the memory may include but is not limited to firmware one or more service applications a service frame generation module and a service connection determination module . Each of these modules may be implemented as individual modules that provide specific functionality associated with enabling service interoperability functionality for WiFi Direct devices connected to a network via a wireless access point infrastructure. Alternatively one or more of the modules may perform all or at least some of the functionality associated with the other modules.

The firmware associated with memory may include program code and data stored in a persistent memory e.g. ROM flash memory etc. for controlling the operation of the service device . In one embodiment the firmware may provide various services for the service device . For example a firmware associated with a printer device may control the receipt and printing of content among other functions. As another example a firmware associated with a display device may display received content to a screen where it may be viewed by a user. Such functionality may also be provided by one or more software applications which may be loaded in RAM or other volatile memory.

The one or more service applications associated with memory may perform any number of functions to implement or facilitate one or more services provided by the service device . In one embodiment such services may include displaying options to a user receiving selections of such options reconfiguring the service device to perform functions according to the selected options subsequently performing at least a portion of the functions etc.

The service frame generation module associated with memory may generate frames for distribution to the devices in over the one or more networks . In one embodiment the service frame generation module may perform functionality that is the same or at least similar to the frame generation module associated with the requester devices . For example the service frame generation module may identify information associated with an access point to which the service device is connected the name or other identification associated with services provided by the service device configuration parameters options other details etc. A more detailed description of such information will be provided below.

The service connection determination module associated with memory may determine a type of connection for facilitating the requested service for the requester device . In one embodiment the service connection determination module may determine the type of connection by comparing connection capabilities received from a requester device to connection capabilities associated with the service device . Additional information may also be considered such as the type of service requested and network performance indicators such as latency of the connection throughput quality of the connection etc.

The service device may also have a communication module not shown that may send and or receive information from various devices in .

The access points may include various software and or program modules to facilitate the processes described herein. For example the access point may include an AP access point communication module that may configure the access point to send and or receive information from the devices shown in . The access points may route the information between such devices to facilitate one or more of the processes described herein.

The above descriptions in association with are for purposes of illustration and are not meant to be limiting. Various other embodiments configurations examples etc. may also exist. For example at least a portion of the software implemented by the requester device may be implemented by one or more other devices in . Different or additional functionality may also exist. For example the access point may send a beacon packet to the requester device that includes information identifying the access point . Such information may be stored and used in the generation of a probe request and other requests by the requester device in some embodiments.

The requester device may send a probe request to identify devices on a network e.g. a WiFi network that may provide certain services. For example probe requests and may be sent to the service device and the service device respectively. Probe requests may also be sent to various other devices not shown but that may be in range of the requester device . In one embodiment probe requests may be sent using the peer to peer protocol or various other protocols in other examples.

Each probe request may include various information such as an identification of one or more requested services. Example services may include but are not limited to printing e.g. by the printer device in outputting content to a display screen e.g. by the display device in or any function that may be implemented by a device. The identification of services in a probe request may include a hash value corresponding to the service name in one embodiment. A hash function that maps data of variable length e.g. the name of the service to data of a fixed length may be used to generate the hash value in one embodiment.

Each probe request may also include information associated with the access point such as to which the requester device such as is connected. Example access point information provided in a probe request may include a Media Access Control MAC address or a corresponding basic service set identification BSSID or service set identifier SSID a flag corresponding to a bit value indicating a current connection state of a WiFi Direct device with respect to an access point an operating class indicating a frequency band at which the access point is currently operating an indication of a channel number on which the access point is currently operating a country code in which the operating class and channel number fields are valid and a time offset indicating when a WiFi Direct device connected to the access point will be available on the concurrent operating channel.

The requester device may receive a probe response in response to sending the probe request. For example the requester device may receive a probe response from the service device and the service device as shown in communications and respectively. The probe responses and may be communicated via the peer to peer protocol in one embodiment. The probe responses and may include various information such as an identification of one or more service names. Such service names may be service names requested by the requester device in the probe request. In one example a service device e.g. the service device may determine the service name from the hash value received in the probe request. The probe responses and may also include an identification of the service such as a Transmission Control Protocol Internet Protocol TCP IP address of a device providing the requested service a port number associated with the service etc.

The probe responses and may further include information associated with an access point to which the service device and the service device respectively is connected. Because the service device is connected to the same access point as the requester device as shown by the dotted oval at least a portion of the access point information in the probe response may match at least another portion of the access point information in the probe request . For example a BSSID in the probe response may match a BSSID in the probe request which may indicate that the requester device and the service device are connected to the same access point . A BSSID in the probe response received from the service device may not match the BSSID in the probe request sent from the requester device because the service device is connected to an access point e.g. the access point as shown by the dotted oval that is different from the access point to which the requester device is connected.

As described the requester device may compare information associated with the access point to the access point information received in the probe responses. The comparison may be used to determine a type of connection for communicating with other devices. For example if the access point information in the probe request matches the access point information in the probe response then the access point infrastructure or TDLS may be used to send and receive information associated with a requested service e.g. the service indicated in the probe requests and . If a match does not exist then peer to peer communication may be used to send and receive the information in certain embodiments.

In the present example a request for information associated with a service a discovery request may be sent from the requester device to the service device and the service device as shown in communications and respectively. The discovery requests and may include one or more service names for example of services desired by the requester device and a request for information associated with the one or more services such as device settings configurations device capabilities among other information. Particular information may be requested in the service discovery requests and in one embodiment. For example in embodiments in which the service device is a printer such information may include fonts supported by the printer a type of the printer printing options etc. The information may be utilized by a user of the requester device to select a particular device for providing a service as will be described in greater detail below.

The requester device may receive a response discovery response to service discovery requests from the service device and the service device as shown in communications and respectively. A response may be received from any device to which a discovery request was sent in certain embodiments. The discovery responses may include but is not limited to a name of the service for which information was requested other identifications of the service such as a TCP IP address a port number associated with the service etc. and status information associated with the requested service such as particular information associated with the service device s settings or configurations device capabilities etc. as may be requested by the requester device.

In certain embodiments herein a certain type of communication may be used for sending discovery request information. The type of communication may be based at least in part on connectivity of WiFi Direct devices in one embodiment. For example a layer 3 protocol of the Open Systems Interconnection OSI model may be used for communicating information between devices that are connected to the same access point. Example layer 3 protocols may include but are not limited to Bonjour and UPnP. As another example a layer 2 protocol may be used for communicating information between devices that are not connected to the same access point. An example layer 2 protocol may include but is not limited to the peer to peer protocol. In the present example a layer 3 protocol may be used to communicate the discovery request and the discovery response whereas a layer 2 protocol may be used to communicate the discovery request and the discovery response . Various other types of communication may be used in other examples.

The requester device may display a list of devices providing the requested service along with corresponding service information. In one embodiment such information may be obtained from the discovery responses and . A user utilizing the requester device may select one or more devices from the list for performing the service e.g. via the one or more user applications in .

For purposes of illustration it is assumed that the user selected the service device and the service device for performing a print service. The requester device may send the request to perform the printing service to such devices based on the connectivity of the devices as identified in the probe request and the probe response as described above. In one example the requester device may send a session request frame requesting performance of the print service to the service device via the access point infrastructure as shown in communication . As described such communication may occur because the requester device and the service device are connected to the same access point which may have been discovered by the exchange of access point information in the probe request and the probe response

As another example the requester device may send a request to perform the print service to the service device using the peer to peer protocol as shown in communication . The peer to peer protocol may be used because the requester device and the service device are not connected to the same access point in the present example. The requester device may determine not to send a request to various other devices not shown for performing a print service based on analysis of discovery response information received from such devices. Such devices may not for example provide the requested service according to parameters or configurations requested by the requester device or otherwise may be unsuitable for providing the service.

The session request frames and may include various attributes such as session information and connection capabilities associated with the requester device among other information. The session information attribute may include information associated with performing a service. In the example in which a print service is requested the session information may include content for printing e.g. a file text etc. print options according to which the content should be printed etc.

The connection capabilities attribute may indicate a type of connection that may be utilized by the requester device . As described above example types of connections may include connectivity via an access point TDLS or peer to peer. In one embodiment the requester device may indicate its connection capabilities by setting certain bits in a frame segment of the session request frames and . In one example the requester device may set bit to 1 to indicate a preference for communication via the access point infrastructure link or it may set bit to 1 to indicate a preference for communication via TDLS. The requester device may set either bit or to 0 to indicate that it does not prefer to communicate via the access point infrastructure or via TDLS respectively. The requester device may further indicate a preference for communication via peer to peer by setting both bits and to 0. Various other settings may exist in other examples.

In the present example the requester device may set bit to 1 in the session request frame to indicate that access point infrastructure is preferred with the service device for example via the access point which is both shared by the requester device and the service device . The requester device may set bits and to 0 however in the session request frame sent to the service device . Peer to peer communication may be preferred for such communication since the requester device and the service device are not connected to the same access point. The present example is for purposes of illustration and is not meant to be limiting. Numerous other examples in which different bits are set to indicate a preference for different types of communication may exist.

The session response frames and may also include various attributes such as a service information attribute and a connection capabilities attribute. As shown in such information may be received by the requester device from the service device and the service device . The service information received from the service devices and may include status information associated with a requested service a confirmation associated with one or more requested options or capabilities etc.

The connection capabilities attribute in the session response frames and may be based on a determination by the service devices and respectively of which type of connection to use for the service. The service devices and may make such a determination e.g. via the service connection determination module in based on one or more of a particular service requested an approximate size of content or information associated with the service network latency reported trouble incidents other indications of the performance of a communication between devices over a network. The service devices and may also make the determination based on their connection capabilities. A service device having connection capabilities implemented by a single wireless interface that is currently connected to the access point may not for example establish a peer to peer connection with the requester device . The service device may however establish a connection with the service device via the access point infrastructure upon determining that the service device and the requester device are connected to the same access point . The determination may be made based at least in part on access point information in the probe request in one embodiment.

A service device having connection capabilities implemented by multiple wireless interfaces may establish one or more types of connections. According to one example the service device may determine a preferred connection type based at least in part on which bits are set in the connection capabilities attribute by the requester device . The service device may consider such a preference along with its connection capabilities performance indications as described above and other information in determining a type of connection to use for the service. The service device may perform the same or similar functions in one embodiment.

As shown in the service device may determine to use the access point infrastructure for facilitating a session with the service device as shown in communication the TDLS connection or the peer to peer connection . The determined connection may be indicated in a connection capabilities attribute in the session response frame or . A session information attribute including information associated with performing the requested service as described above may also be included in the session response frames and . Similarly the session response frame received from the service device may indicate a type of connection determined by the service device e.g. peer to peer and a session information attribute among other information.

The above examples are for purposes of illustration and are not meant to be limiting. For example a different number of each device types of services types of communications etc. may exist in other examples.

A probe request that includes the information associated with the access point to which the requester device is connected may be generated e.g. by the frame generation module at block . The probe request may be sent to the one or more service devices over a network using the peer to peer protocol e.g. via the communication module at block in one embodiment.

If one or more devices are identified that provide the requested service at block then one or more probe responses to the probe requests may be received from the one or more service devices e.g. via the communication module at block . The probe response may include information associated with an access point to which the one or more service devices is connected. At block processing may return to decision block in .

Returning to if a service device providing the requested service is not identified then processing may return to block where one or more service devices for performing a desired service may be identified. If at least one service device is identified then information associated with the requested service service information provided by the at least one service device may be determined at block .

The determination of the service information may be performed in accordance with in one embodiment. For example at block information associated with an access point to which the requester device is connected may be compared to information associated with an access point to which the service device s are connected e.g. via the connection determination module . If the information matches at block then a layer 3 protocol may be determined for use in sending a discovery request to the service device s via the access point connection at block . Non limiting examples of layer 3 protocols may include Bonjour and UPnP. If the access point information does not match then a layer 2 protocol may be determined for use in sending the discovery request to the service device s via a peer to peer connection at block .

At block a discovery request frame may be generated for sending a discovery request to the service device s via the determined connection type e.g. via the frame generation module . The discovery request frame may be sent to the service device s using the determined protocol at block . A response to the discovery request may be received via the determined connection type at block . The response may include information associated with settings configurations capabilities etc. of the service device s in one embodiment.

Returning to a list of the service device s and at least a portion of the determined information associated with the requested service may be displayed at block . A selection of at least one service device may be received for example by a user viewing the displayed information at block .

At block performance of the desired service by the service device s may be requested. Such a request may be performed in accordance with in one embodiment. For example a session request frame may be generated at block . The session request frame may include session information and connection capabilities associated with the requester device for facilitating the desired service. As described above setting certain bits in the session request frame e.g. by the frame generation module may indicate a particular type of connection desired by the requester device . The session request frame may be sent to the service device s via the determined connection type at block and a response may be received at block . The response may include an indication of the type of connection that will be used to perform the service in one embodiment. Such a determination may be performed by the service device e.g. via the service connection determination module as described above.

The operations and processes described and shown above may be carried out or performed in any suitable order as desired in various implementations. Additionally in certain implementations at least a portion of the operations may be carried out in parallel. Furthermore in certain implementations less than or more than the operations described may be performed.

Certain aspects of the disclosure are described above with reference to block and flow diagrams of systems methods apparatuses and or computer program products according to various implementations. It will be understood that one or more blocks of the block diagrams and flow diagrams and combinations of blocks in the block diagrams and the flow diagrams respectively can be implemented by computer executable program instructions. Likewise some blocks of the block diagrams and flow diagrams may not necessarily need to be performed in the order presented or may not necessarily need to be performed at all according to some implementations.

These computer executable program instructions may be loaded onto a special purpose computer or other particular machine a processor or other programmable data processing apparatus to produce a particular machine such that the instructions that execute on the computer processor or other programmable data processing apparatus create means for implementing one or more functions specified in the flow diagram block or blocks. These computer program instructions may also be stored in a computer readable storage media or memory that can direct a computer or other programmable data processing apparatus to function in a particular manner such that the instructions stored in the computer readable storage media produce an article of manufacture including instruction means that implement one or more functions specified in the flow diagram block or blocks.

As an example certain implementations may provide for a computer program product comprising a computer readable storage medium having a computer readable program code or program instructions implemented therein said computer readable program code adapted to be executed to implement one or more functions specified in the flow diagram block or blocks. The computer program instructions may also be loaded onto a computer or other programmable data processing apparatus to cause a series of operational elements or steps to be performed on the computer or other programmable apparatus to produce a computer implemented process such that the instructions that execute on the computer or other programmable apparatus provide elements or steps for implementing the functions specified in the flow diagram block or blocks.

Accordingly blocks of the block diagrams and flow diagrams support combinations of means for performing the specified functions combinations of elements or steps for performing the specified functions and program instruction means for performing the specified functions. It will also be understood that each block of the block diagrams and flow diagrams and combinations of blocks in the block diagrams and flow diagrams can be implemented by special purpose hardware based computer systems that perform the specified functions elements or steps or combinations of special purpose hardware and computer instructions.

Conditional language such as among others can could might or may unless specifically stated otherwise or otherwise understood within the context as used is generally intended to convey that certain implementations could include while other implementations do not include certain features elements and or operations. Thus such conditional language is not generally intended to imply that features elements and or operations are in any way required for one or more implementations or that one or more implementations necessarily include logic for deciding with or without user input or prompting whether these features elements and or operations are included or are to be performed in any particular implementation.

Many modifications and other implementations of the disclosure set forth herein will be apparent having the benefit of the teachings presented in the foregoing descriptions and the associated drawings. Therefore it is to be understood that the disclosure is not to be limited to the specific implementations disclosed and that modifications and other implementations are intended to be included within the scope of the appended claims. Although specific terms are employed herein they are used in a generic and descriptive sense only and not for purposes of limitation.

In an example embodiment there is disclosed a device that comprises one or more radios and one or more antennas. The device may also include at least one memory that stores computer executable instructions and at least one processor configured to access the at least one memory wherein the at least one processor is configured to execute the computer executable instructions to generate a probe request comprising a request for a service and first information associated with a first wireless access point to which the device is connected on a wireless fidelity WiFi network. The at least one processor may also be configured to send the probe request to one or more service devices within range of the device and receive a respective response to the probe request comprising an identification of the requested service and second information associated with a second wireless access point to which the one or more service devices are connected on the WiFi network. The probe request may be sent via the peer to peer protocol and the probe response may be received via the peer to peer protocol in one embodiment. The device and the one or more service devices may be connected to a WiFi network and each of the devices may be configured to communicate with one another using a WiFi Direct protocol.

The at least one processor may be further configured to determine a type of connection for a subsequent communication with the one or more service devices based at least in part on a comparison of at least a portion of the first information to at least a portion of the second information. The comparison may include comparing a first BSSID in the first information to a second BSSID in the second information. When the first BSSID matches the second BSSID the at least one processor may be configured to send the subsequent communication to the one or more service devices via at least one of the first wireless access point or a Tunneled Direct Link Setup TDLS link.

The at least one processor may be further configured to invoke one or more application programming interface API modules associated with the WiFi Direct protocol that provide interoperability between the requested service and a software application stored in the at least one memory that requests the service. In one embodiment providing interoperability comprises communicating information between the software application and the requested service via the determined type of connection.

In another example embodiment the at least one processor of the device may be configured to generate a session frame comprising information associated with the requested service and one or more first connection capabilities of the device the one or more first connection capabilities comprising an indication of the determined type of connection. The at least one processor may be further configured to send the session frame to the one or more service devices and receive from the one or more services devices a respective response to the session frame comprising an indication of a different type of connection to be used for performing the service.

In another example embodiment the at least one processor of the device may be further configured to determine that the first BSSID matches the second BSSID and send a discovery request comprising a request for information associated with the service to the one or more service devices using the Bonjour protocol or the Universal Plug and Play UPnP protocol.

In another example embodiment the at least one processor of the device may be further configured to determine that the first BSSID does not match the second BSSID and send a discovery request comprising a request for information associated with the service to the one or more service devices using the peer to peer protocol.

In another example embodiment there is disclosed one or more computer readable media storing computer executable instructions that when executed by at least one processor configure the at least one processor to perform various operations. The operations may include generating a probe request comprising a request for a service and first information associated with a first wireless access point to which the device is connected on a wireless fidelity WiFi network. The operations may also include sending the probe request to one or more service devices within range of the device and receive a respective response to the probe request comprising an identification of the requested service and second information associated with a second wireless access point to which the one or more service devices are connected on the WiFi network. The probe request may be sent via the peer to peer protocol and the probe response may be received via the peer to peer protocol in one embodiment. The device and the one or more service devices may be connected to a WiFi network and each of the devices may be configured to communicate with one another using a WiFi Direct protocol.

The operations may further include determining a type of connection for a subsequent communication with the one or more service devices based at least in part on a comparison of at least a portion of the first information to at least a portion of the second information. The comparison may include comparing a first BSSID in the first information to a second BSSID in the second information. When the first BSSID matches the second BSSID the at least one processor may be configured to perform the operation comprising sending the subsequent communication to the one or more service devices via at least one of the first wireless access point or a Tunneled Direct Link Setup TDLS link.

The operations may further include invoking one or more application programming interface API modules associated with the WiFi Direct protocol that provide interoperability between the requested service and a software application stored in the at least one memory that requests the service. In one embodiment providing interoperability comprises communicating information between the software application and the requested service via the determined type of connection.

In another example embodiment the operations may also include generating a session frame comprising information associated with the requested service and one or more first connection capabilities of the device the one or more first connection capabilities comprising an indication of the determined type of connection. The operations may further include sending the session frame to the one or more service devices and receiving from the one or more services devices a respective response to the session frame comprising an indication of a different type of connection to be used for performing the service.

In another example embodiment the operations may further include determining that the first BSSID matches the second BSSID and sending a discovery request comprising a request for information associated with the service to the one or more service devices using the Bonjour protocol or the Universal Plug and Play UPnP protocol.

In another example embodiment the operations may include determining that the first BSSID does not match the second BSSID and send a discovery request comprising a request for information associated with the service to the one or more service devices using the peer to peer protocol.

In another example embodiment there is disclosed an apparatus for enabling service interoperability. The apparatus may include one or more radios and one or more antennas. The apparatus may also include means for generating a probe request comprising a request for a service and first information associated with a first wireless access point to which the device is connected on a wireless fidelity WiFi network. The apparatus may also include means for sending the probe request to one or more service devices within range of the device and receive a respective response to the probe request comprising an identification of the requested service and second information associated with a second wireless access point to which the one or more service devices are connected on the WiFi network. The probe request may be sent via the peer to peer protocol and the probe response may be received via the peer to peer protocol in one embodiment. The apparatus and the one or more service devices may be connected to a WiFi network and each of the devices may be configured to communicate with one another using the WiFi Direct protocol.

The apparatus may also include means for determining a type of connection for a subsequent communication with the one or more service devices based at least in part on a comparison of at least a portion of the first information to at least a portion of the second information. The comparison may include comparing a first BSSID in the first information to a second BSSID in the second information. When the first BSSID matches the second BSSID the apparatus may further include means for sending the subsequent communication to the one or more service devices via at least one of the first wireless access point or a Tunneled Direct Link Setup TDLS link.

The apparatus may further include means for invoking one or more application programming interface API modules associated with a WiFi Direct protocol that provide interoperability between the requested service and a software application stored in the at least one memory that requests the service. In one embodiment providing interoperability may include means for communicating information between the software application and the requested service via the determined type of connection.

In another example embodiment the apparatus may further include means for generating a session frame comprising information associated with the requested service and one or more first connection capabilities of the device the one or more first connection capabilities comprising an indication of the determined type of connection. The apparatus may further include means for sending the session frame to the one or more service devices and means for receiving from the one or more services devices a respective response to the session frame comprising an indication of a different type of connection to be used for performing the service.

In another example embodiment the apparatus may further include means for determining that the first BSSID matches the second BSSID and means for sending a discovery request comprising a request for information associated with the service to the one or more service devices using the Bonjour protocol or the Universal Plug and Play UPnP protocol.

In another example embodiment the apparatus may further include means for determining that the first BSSID does not match the second BSSID and means for sending a discovery request comprising a request for information associated with the service to the one or more service devices using the peer to peer protocol.

In another example embodiment there is disclosed a method. The method includes determining by a service device one or more first connection capabilities. At least one of the first connection capabilities may be based at least in part on an access point to which the service device is connected on a wireless fidelity WiFi network. The method also includes receiving by the service device from a requester device an indication of one or more second connection capabilities of the requester device and a request for the service device to perform a service. The method further includes determining by the service device a type of connection for performing the service for the requester device and sending by the service device information associated with performing the service to the requester device using the determined type of connection. The determined type of connection may include at least one of the first access point a Tunneled Direct Link Setup TDLS link or a peer to peer connection in certain embodiments.

In another example embodiment the method may also include receiving by the service device from a software application of the requester device a request to perform the service wherein interoperability between the software application and the service is provided by an application programming interface API module associated with a WiFi Direct protocol.

In another example embodiment the access point may include a first access point and the method may also include receiving by the service device a probe request comprising an identification of a second access point to which the requester device is connected on the WiFi network wherein the probe request is received via the peer to peer protocol. The method may further include generating by the service device a probe response comprising the first access point and sending by the service device the probe response to the requester device via the peer to peer protocol.

In another example embodiment there is disclosed a system for enabling service interoperability. The system may include one or more radios and one or more antennas. The system may also include at least one memory that stores computer executable instructions and at least one processor configured to access the at least one memory wherein the at least one processor is configured to execute the computer executable instructions to determine one or more first connection capabilities. At least one of the first connection capabilities may be based at least in part on an access point to which the service device is connected on a wireless fidelity WiFi network. The at least one processor may also be configured to receive from a requester device an indication of one or more second connection capabilities of the requester device and a request for the service device to perform a service. The at least one processor may be further configured to determine a type of connection for performing the service for the requester device and send information associated with performing the service to the requester device using the determined type of connection. The determined type of connection may include at least one of the first access point a Tunneled Direct Link Setup TDLS link or a peer to peer connection in certain embodiments.

In another example embodiment the at least one processor may also be configured to receive from a software application of the requester device a request to perform the service wherein interoperability between the software application and the service may be provided by an application programming interface API module associated with a WiFi Direct protocol.

In another example embodiment the access point may include a first access point and the at least one processor may be further configured to receive a probe request comprising an identification of a second access point to which the requester device is connected on the WiFi network wherein the probe request is received via the peer to peer protocol. The at least one processor may be further configured to generate a probe response comprising the first access point and send the probe response to the requester device via the peer to peer protocol.

In another example embodiment there is disclosed a device for enabling service interoperability. The device may include one or more radios and one or more antennas. The device may also include means for determining one or more first connection capabilities. At least one of the first connection capabilities may be based at least in part on an access point to which the service device is connected on a wireless fidelity WiFi network. The device may further include means for receiving from a requester device an indication of one or more second connection capabilities of the requester device and a request for the service device to perform a service. The device may further include means for determining a type of connection for performing the service for the requester device and means for sending information associated with performing the service to the requester device using the determined type of connection. The determined type of connection may include at least one of the first access point a Tunneled Direct Link Setup TDLS link or a peer to peer connection in certain embodiments.

In another example embodiment the device may include means for receiving from a software application of the requester device a request to perform the service wherein interoperability between the software application and the service may be provided by an application programming interface API module associated with a WiFi Direct protocol.

In another example embodiment the access point may include a first access point and the device may further include means for receiving a probe request comprising an identification of a second access point to which the requester device is connected on the WiFi network wherein the probe request is received via the peer to peer protocol. The device may further include means for generating a probe response comprising the first access point and means for sending the probe response to the requester device via the peer to peer protocol.

In another example embodiment there is disclosed one or more computer readable media storing computer executable instructions that when executed by at least one processor configure the at least one processor to perform various operations. The operations may include determining one or more first connection capabilities. At least one of the first connection capabilities may be based at least in part on an access point to which the service device is connected on a wireless fidelity WiFi network. The operations may also include receiving from a requester device an indication of one or more second connection capabilities of the requester device and a request for the service device to perform a service. The operations may further include determining a type of connection for performing the service for the requester device and sending by the service device information associated with performing the service to the requester device using the determined type of connection. The determined type of connection may include at least one of the first access point a Tunneled Direct Link Setup TDLS link or a peer to peer connection in certain embodiments.

In another example embodiment the operations may also include receiving from a software application of the requester device a request to perform the service wherein interoperability between the software application and the service is provided by an application programming interface API module associated with a WiFi Direct protocol.

In another example embodiment the access point may include a first access point and the operations may also include receiving a probe request comprising an identification of a second access point to which the requester device is connected on the WiFi network wherein the probe request is received via the peer to peer protocol. The operations may further include generating a probe response comprising the first access point and sending the probe response to the requester device via the peer to peer protocol.

