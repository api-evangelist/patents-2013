---

title: Hybrid automatic repeat request-acknowledge (HARQ-ACK) codebook generation for inter-band time division duplex (TDD) carrier aggregation (CA)
abstract: Technology to determine a Hybrid Automatic Repeat reQuest-ACKnowledge (HARQ-ACK) codebook size for inter-band time division duplex (TDD) carrier aggregation (CA) is disclosed. In an example, a user equipment (UE) operable to determine a HARQ-ACK codebook size for inter-band TDD CA can include computer circuitry configured to: Determine a HARQ bundling window for inter-band TDD CA including a number of downlink (DL) subframes using HARQ-ACK feedback; divide the HARQ bundling window into a first part and a second part; and calculate the HARQ-ACK codebook size based on the first part and the second part. The first part can include DL subframes of configured serving cells that occur no later than the DL subframe where a downlink control information (DCI) transmission for uplink scheduling on a serving cell is conveyed, and the second part can include physical downlink shared channel (PDSCH) subframes occurring after the DCI transmission of the serving cells.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09362998&OS=09362998&RS=09362998
owner: INTEL CORPORATION
number: 09362998
owner_city: Santa Clara
owner_country: US
publication_date: 20130729
---
This application claims the benefit of and hereby incorporates by reference U.S. Provisional Patent Application Ser. No. 61 676 775 filed Jul. 27 2012.

Wireless mobile communication technology uses various standards and protocols to transmit data between a node e.g. a transmission station and a wireless device e.g. a mobile device . Some wireless devices communicate using orthogonal frequency division multiple access OFDMA in a downlink DL transmission and single carrier frequency division multiple access SC FDMA in an uplink UL transmission. Standards and protoCols that use orthogonal frequency division multiplexing OFDM for signal transmission include the third generation partnership project 3GPP long term evolution LTE the Institute of Electrical and Electronics Engineers IEEE 802.16 standard e.g. 802.16 e 802.16 m which is commonly known to industry groups as WiMAX Worldwide interoperability for Microwave Access and the IEEE 802.11 standard which is commonly known to industry groups as WiFi.

In 3GPP radio access network RAN LTE systems the node can be a combination of Evolved Universal Terrestrial Radio Access Network E UTRAN Node Bs also commonly denoted as evolved Node Bs enhanced Node Bs eNodeBs or eNBs and Radio Network Controllers RNCs which communicates with the wireless device known as a user equipment UE . The downlink DL transmission can be a communication from the node e.g. eNodeB to the wireless device e.g. UE and the uplink UL transmission can be a communication from the wireless device to the node.

In LTE data can be transmitted from the eNodeB to the UE via a physical downlink shared channel PDSCH . A physical uplink control channel PUCCH or physical uplink shared channel PUSCH can be used to acknowledge that data was received. Downlink and uplink channels or transmissions can use time division duplexing TDD or frequency division duplexing FDD . Time division duplexing TDD is an application of time division multiplexing TDM to separate downlink and uplink signals. In TDD downlink signals and uplink signals may be carried on a same carrier frequency i.e. shared carrier frequency where the downlink signals use a different time interval from the uplink signals so the downlink signals and the uplink signals do not generate interference for each other. TDM is a type of digital multiplexing in which two or more bit streams or signals such as a downlink or uplink are transferred apparently simultaneously as sub channels in one communication channel but are physically transmitted on different resources. In frequency division duplexing FDD an uplink transmission and a downlink transmission can operate using different frequency carriers i.e. separate carrier frequency for each transmission direction . In FDD interference can be avoided because the downlink signals use a different frequency carrier from the uplink signals.

Reference will now be made to the exemplary embodiments illustrated and specific language will be used herein to describe the same. It will nevertheless be understood that no limitation of the scope of the invention is thereby intended.

Before the present invention is disclosed and described it is to be understood that this invention is not limited to the particular structures process steps or materials disclosed herein but is extended to equivalents thereof as would be recognized by those ordinarily skilled in the relevant arts. It should also be understood that terminology employed herein is used for the purpose of describing particular examples only and is not intended to be limiting. The same reference numerals in different drawings represent the same element. Numbers provided in flow charts and processes are provided for clarity in illustrating steps and operations and do not necessarily indicate a particular order or sequence.

All tables cited herein from the 3GPP LTE standard are provided from Release 11 of the 3GPP LTE standard unless otherwise noted.

An initial overview of technology embodiments is provided below and then specific technology embodiments are described in further detail later. This initial summary is intended to aid readers in understanding the technology more quickly but is not intended to identify key features or essential features of the technology nor is it intended to limit the scope of the claimed subject matter.

An increase in the amount of wireless data transmission has created congestion in wireless networks using licensed spectrum to provide wireless communication services for wireless devices such as smart phones and tablet devices. The congestion is especially apparent in high density and high use locations such as urban locations and universities.

One technique for providing additional bandwidth capacity to wireless devices is through the use carrier aggregation of multiple smaller bandwidths to form a virtual wideband channel at a wireless device e.g. UE . In carrier aggregation CA multiple component carriers CC can be aggregated and jointly used for transmission to from a single terminal. Carriers can be signals in permitted frequency domains onto which information is placed. The amount of information that can be placed on a carrier can be determined by the aggregated carrier s bandwidth in the frequency domain. The permitted frequency domains are often limited in bandwidth. The bandwidth limitations can become more severe when a large number of users are simultaneously using the bandwidth in the permitted frequency domains.

Carrier aggregation CA enables multiple carrier signals to be simultaneously communicated between a user s wireless device and a node. Multiple different carriers can be used. In some instances the carriers may be from different permitted frequency domains. Carrier aggregation provides a broader choice to the wireless devices enabling more bandwidth to be obtained. The greater bandwidth can be used to communicate bandwidth intensive operations such as streaming video or communicating large data files.

Network symmetric or asymmetric carrier aggregation can be defined by a number of downlink DL and uplink UL component carriers offered by a network in a sector. UE symmetric or asymmetric carrier aggregation can be defined by a number of downlink DL and uplink UL component carriers configured for a UE. The number of DL CCs may be at least the number of UL CCs. A system information block type SIB can provide specific linking between the DL and the UL. illustrates a block diagram of a symmetric asymmetric carrier aggregation configuration where the carrier aggregation is symmetric between the DL and UL for the network and asymmetric between the DL and UL for the UE. illustrates a block diagram of an asymmetric symmetric carrier aggregation configuration where the carrier aggregation is asymmetric between the DL and UL for the network and symmetric between the DL and UL for the UE.

For each UE a CC can be defined as a primary cell PCell . Different UEs may not necessarily use a same CC as their PCell. The PCell can be regarded as an anchor carrier for the UE and the PCell can thus be used for control signaling functionalities such as radio link failure monitoring hybrid automatic repeat request acknowledgement HARQ ACK and PUCCH resource allocations RA . If more than one CC is configured for a UE the additional CCs can be denoted as secondary cells SCells for the UE.

A component carrier can be used to carry channel information via a radio frame structure transmitted on the physical PHY layer in a downlink transmission between a node e.g. eNodeB and the wireless device e.g. UE using a generic long term evolution LTE frame structure as illustrated in . In another example a component carrier can be used to carry channel information via a radio frame structure transmitted on the PHY layer in a uplink transmission between a node e.g. eNodeB and the wireless device e.g. UE using a generic long term evolution LTE frame structure as illustrated in . While an LTE frame structure is illustrated a frame structure for an IEEE 802.16 standard WiMax an IEEE 802.11 standard WiFi or another type of communication standard using SC FDMA or OFDMA may also be used.

Each slot for a component carrier CC used by the node and the wireless device can include multiple resource blocks RBs and based on the CC frequency bandwidth. The CC can have a carrier frequency having a bandwidth and center frequency. Each subframe of the CC can include downlink control information DCI found in the legacy PDCCH. The legacy PDCCH in the control region can include one to three columns of the first OFDM symbols in each subframe or RB when a legacy PDCCH is used. The remaining 11 to 13 OFDM symbols or 14 OFDM symbols when legacy PDCCH is not used in the subframe may be allocated to the PDSCH for data for short or normal cyclic prefix .

The control region can include physical control format indicator channel PCFICH physical hybrid automatic repeat request hybrid ARQ indicator channel PHICH and the PDCCH. The control region has a flexible control design to avoid unnecessary overhead. The number of OFDM symbols in the control region used for the PDCCH can be determined by the control channel format indicator CFI transmitted in the physical control format indicator channel PCFICH . The PCFICH can be located in the first OFDM symbol of each subframe. The PCFICH and PHICH can have priority over the PDCCH so the PCFICH and PHICH are scheduled prior to the PDCCH.

Each RB physical RB or PRB can include 12 15 kHz subcarriers on the frequency axis and 6 or 7 orthogonal frequency division multiplexing OFDM symbols on the time axis per slot. The RB can use seven OFDM symbols if a short or normal cyclic prefix CP is employed. The RB can use six OFDM symbols if an extended cyclic prefix CP is used. The resource block can be mapped to 84 resource elements REs using short or normal cyclic prefixing or the resource block can be mapped to 72 REs not shown using extended cyclic prefixing. The RE can be a unit of one OFDM symbol by one subcarrier i.e. 15 kHz .

Each RE can transmit two bits and of information in the case of quadrature phase shift keying QPSK modulation. Other types of modulation may be used such as 16 quadrature amplitude modulation QAM or 64 QAM to transmit a greater number of bits in each RE or bi phase shift keying BPSK modulation to transmit a lesser number of bits a single bit in each RE. The RB can be configured for a downlink transmission from the eNodeB to the UE or the RB can be configured for an uplink transmission from the UE to the eNodeB.

Communication of data on a physical downlink shared channel PDSCH can be controlled via a control channel referred to as a physical downlink control channel PDCCH . The PDCCH can be used for downlink DL and uplink UL resource assignments e.g. UL grants transmit power commands and paging indicators. The data carried on the PDCCH can be referred to as downlink control information DCI .

The DCI has various formats to define resource allocations. For example in LTE DCI format can be used for the transmission of uplink shared channel UL SCH allocation or assignments e.g. UL grants which can be used for scheduling of PUSCH and transmit power control TPC command for UL power control. DCI format can be used for the transmission of downlink shared channel DL SCH assignments for single antenna operation which can transmit PDSCH for single input multiple output SIMO operation. DCI format A can be used for a compact transmission of DL SCH assignments for single antenna e.g. SIMO operation allocation for SIMO operation or allocating a dedicated preample signature to a UE for random access or UL power control. DCI format B can be used for compact scheduling or resource assignment with precoding information to support multiple input multiple output MIMO closed loop CL single rank transmission with possibly contiguous resource allocation. DCI format C can be for very compact scheduling of resource allocation for PDSCH to support downlink transmission of paging random access channel RACH response and dynamic broadcast control channel BCCH scheduling. DCI format C can be similar to DCI format B with additional power offset information. DCI format can be for compact DL SCH allocation and scheduling with precoding and power offset information used to support the transmission of DL SCH assignments for MIMO operation which can be used for CL DL MIMO and UL power control. DCI format A can be for compact DL SCH allocation and scheduling with precoding and power offset information used to support the transmission of DL SCH assignments for MIMO operation which can be used for open loop OL DL MIMO and UL power control. DCI formats C and D can also be used for the transmission of DL SCH assignments for MIMO operations. DCI format can be used for the transmission of TPC commands for an uplink channel e.g. PUCCH and PUSCH with 2 bit power adjustments for multiple UEs . DCI format A can be used for the transmission of TPC commands for an uplink channel e.g. PUCCH and PUSCH with single bit power adjustments for multiple UEs . DCI formats used to grant PUSCH transmissions can be provided by DCI format and DCI format which can also be referred to as uplink DCI formats when common behavior is addressed.

The various scenarios for the downlink can also be reflected in different transmission modes TMs . For example in LTE TM can use a single transmit antenna TM can use transmit diversity TM can use open loop spatial multiplexing with cyclic delay diversity CDD TM can use closed loop spatial multiplexing TM can use multi user MIMO MU MIMO TM can use closed loop spatial multiplexing using a single transmission layer TM can use beamforming with UE specific RS TM can use single or dual layer beamforming with UE specific RS and TM can use a multilayer transmission to support closed loop single user MIMO SU MIMO or carrier aggregation. In an example TM can be used for coordinated multipoint CoMP signaling such as joint processing JP dynamic point selection DPS and or coordinated scheduling coordinated beamforming CS CB .

An uplink signal or channel can include data on a Physical Uplink Shared CHannel PUSCH or control information on a Physical Uplink Control CHannel PUCCH . In LTE the uplink physical channel PUCCH carrying uplink control information UCI can include channel state information CSI reports Hybrid Automatic Repeat reQuest HARQ ACKnowledgment Negative ACKnowledgment ACK NACK and uplink scheduling requests SR .

The wireless device e.g. UE can provide HARQ ACK feedback for a PDSCH using a PUCCH. The PUCCH can support multiple formats i.e. PUCCH format with various modulation and coding schemes MCS as shown for LTE in Table 1. Similar information to Table 1 can be shown in 3GPP LTE standard Release 11 e.g. V11.1.0 2012 12 Technical Specification TS 36.211 Table 5.4 1. For example PUCCH format can be used to convey a 48 bit HARQ ACK which can be used for carrier aggregation.

Legacy LTE TDD can support asymmetric UL DL allocations by providing seven different semi statically configured uplink downlink configurations. Table 2 illustrates seven UL DL configurations used in LTE where D represents a downlink subframe S represents a special subframe and U represents an uplink subframe. In an example the special subframe can operate or be treated as a downlink subframe. Similar information to Table 2 can be shown in 3GPP LTE TS 36.211 Table 4.2 2.

As illustrated by Table 2 UL DL configuration can include 6 uplink subframes in subframes and and downlink and special subframes in subframes and and UL DL configuration can include one uplink subframe in subframe and downlink and special subframes in subframes and . Each uplink subframe n can be associated with a downlink subframe based on the uplink downlink configuration where each uplink subframe n can have a downlink association set index K k k . . . k where M is defined as the number of elements in set K as illustrated by Table 3. Similar information to Table 3 can be shown in 3GPP LTE TS 36.213 Table 10.1.3.1 1.

The Table 3 shows examples of downlink subframe bundling in an uplink subframe handling ACK NACK feedback for certain downlink subframe s . For example in uplink downlink configuration uplink subframe subframe n handles ACK NACK feedback for downlink and special subframes which are subframes subframes k earlier than uplink subframe i.e. downlink and special subframes or downlink and special subframes n k and M equals 4. Uplink subframe subframe n handles ACK NACK feedback for downlink subframes which are subframes subframes k earlier than uplink subframe i.e. downlink subframes or downlink subframes n k and M equals 4. For uplink downlink configuration uplink subframe M equals 9. For uplink downlink configuration uplink subframe M equals one and uplink subframe M equals zero. Depending on the uplink downlink configuration one uplink subframe may be responsible for ACK NACK feedback for one or multiple downlink subframes. In certain situations even distribution between uplink subframe responsibility can be desired to reduce situations where one uplink subframe is responsible for ACK NACK feedback for a large number of downlink and special subframes.

As an underlying requirement in some examples cells of the network can change UL DL TDD configurations synchronously in order to avoid the interference. However such a requirement can constrain the traffic management capabilities in different cells of the network. The legacy LTE TDD set of configurations can provide DL subframe allocations in the range between 40 and 90 as shown in Table 2. The UL and DL subframes allocation within a radio frame can be reconfigured through system information broadcast signaling e.g. system information block SIB . Hence the UL DL allocation once configured can be expected to vary semi statically.

A property of TDD is that a number of UL and DL subframes can be different as shown in Table 2 and often the number of DL subframes can be more than the number of UL subframes for a radio frame. In configurations where more DL subframes are used than UL subframes multiple DL subframes can be associated with one single UL subframe for the transmission of a corresponding control signals. A configuration specific HARQ ACK timing relationship can be defined e.g. 3GPP LTE standard Release 11 e.g. V11.1.0 2012 12 TS 36.213 Table 10.1.3.1 1 or Table 3 . If a UE is scheduled in a multiple of DL subframes which can be associated with one UL subframe the UE can transmit multiple ACK NAK ACK NACK bits in that UL subframe. A number of DL subframes with HARQ ACK feedback on one single UL subframe can comprise one bundling window. In an example HARQ ACK bundling window may not be used for configuration with 9 DL subframes.

An advantage of a Time Division Duplex TDD system can be a flexible resource utilization through different TDD configurations to better match the uplink and downlink traffic characteristics of the cell. By configuring different TDD configurations the ratio between available UpLink UL and Downlink DL resources can range from 3UL 2DL 6UL 4DL to 1UL 9DL. In legacy LTE TDD e.g. LTE Release 10 Rel 10 specification only the aggregation of TDD Component Carriers CCs of a same UL DL configuration may be defined and supported. While the same UL DL configuration can simplify a design and operation of CC the same UL DL configuration can also impose some limitations.

In an example inter band carrier aggregation CA for a TDD system with different uplink downlink configurations on different bands can be supported. For instance more than one TDD carrier can be deployed by a single TDD operator and the carriers can be aggregated at a single base station e.g. node . Besides a separation between two carrier frequencies can be large enough to avoid UL DL interference from a same device. Some of the benefits of inter band CA with different TDD configurations on different bands can be include 1 legacy system co existence 2 heterogeneous network HetNet support 3 aggregation of traffic dependent carriers 4 flexible configuration e g. more UL subframe in lower bands for better coverage and more DL subframes in higher bands and 5 higher peak rate.

Supporting Inter band TDD Carrier Aggregation CA with different uplink downlink configurations can be used to aggregate component carriers CC with different DL UL configurations. To provide high peak data rate enhancement benefits to both full and half duplex UEs HARQ Hybrid Automatic Repeat reQuest ACK NACK feedback for downlink DL data may use a PUCCH only transmitted on Primary Cell PCell use legacy HARQ ACK timing for PCell PDSCH by following a PCell SIB type SIB UL DL configuration and use HARQ ACK timing for the PDSCH of a Secondary Cell SCell following a specific reference UL DL configuration e.g. PCell and SCell UL DL configuration as shown in Table 4 illustrated in . For example HARQ ACK timing of the PDSCH on the PCell can follow the PCell SIB legacy UL DL configuration. For the PDSCH transmitted on the SCell the HARQ timing can follow reference legacy UL DL configuration as shown in Table 4.

Interband TDD CA with different UL DL configurations in different bands can be supported. For example an SCell PDSCH HARQ reference timing can be determined from a PCell UL DL configuration and a SCell UL DL configuration as shown in Table 4 illustrated in . Table 4 i.e. illustrates the UL DL configuration number of PDSCH HARQ ACK timing reference for SCell. A HARQ ACK timing of PCell PDSCH the scheduling timing of PCell PUSCH the HARQ timing of PCell PUSCH can use the PCell SIB configuration. A UE can be configured with PUCCH format for HARQ ACK transmission and self carrier scheduling for TDD inter band carrier aggregation CA with different UL DL configurations on different bands.

In Time Division Long Term Evolution TD LTE system also referred to as LTE Time Division Duplex LTE TDD system the HARQ Acknowledgement HARQ ACK for downlink data can be either transmitted on PUCCH channel or piggybacked on uplink PUSCH data prior to discrete Fourier transform spreading DFTS in order to preserve an uplink single carrier low cubic metric property. When HARQ ACK is to be transmitted in a subframe in which the UE has been allocated transmission resources for the PUSCH HARQ ACK resources can be mapped to SC FDMA symbols by puncturing the PUSCH data resource elements RE . Such PUSCH puncturing can cause PUSCH performance degradation especially when the puncture is excessive. Therefore PUSCH performance can be improved if PUSCH REs punctured by HARQ ACK symbols is minimized. To reduce PUSCH REs puncturing by HARQ ACK symbols 2 bits Downlink Assignment Index DAI in downlink control information DCI format V can be used for TDD HARQ ACK bundling or HARQ ACK multiplexing to indicate the total number of DL assignments in a DL subframe bundling window. For example assuming the bundling window size is M as defined in Table 3 VHARQ ACK bits instead of M bits can be fedback to eNB if a PUSCH transmission is adjusted based on a detected PDCCH with an uplink DCI format e.g. DCI format or so the un needed M V HARQ ACK bits corresponding to the un scheduled DL subframes by eNB are consequently reduced. The value Vcan include all PDSCH transmission with and without corresponding PDCCH within all the subframe s n k as defined in Table 3.

In coding theory puncturing is the process of removing some of the parity bits after encoding with an error correction code. Puncturing can have the same effect as encoding with an error correction code with a higher rate e.g. modulation and coding scheme MCS or less redundancy. With puncturing a same decoder can be used regardless of how many bits have been punctured thus puncturing can considerably increase the flexibility of a system without significantly increasing the system s complexity.

The DAI is a field in the downlink resource grant signaled to a UE indicating how many subframes in a previous time window have contained transmissions to that UE. DAI can be applicable only when LTE is operated in TDD mode and can enable the UE to determine whether the UE has received all the downlink transport blocks for which the UE transmits a combined ACK NACK. For instance the TDD configuration with a dynamic 80 90 DL ratio can use a 2 bit DAI to indicate subframes and .

If carrier aggregation CA is configured for UE in a legacy TD LTE system e.g. LTE release 10 the HARQ ACK codebook size in a case of piggybacking on PUSCH can be determined by a number of configured CCs the CCs configured transmission mode and a number of downlink subframes in the bundled window. When TDD UL DL configuration is used and PUCCH format is configured for transmission of the HARQ ACK the HARK ACK codebook size in PUSCH can be represented by Equation 1 Equation 1 

where C is the number of downlink CCs configured Cis the number of downlink CCs with configured transmission mode enabling the reception of two transport blocks TB if spatial bundling is not employed otherwise C 0 Bis the number of downlink subframes for which UE needs to feedback HARQ ACK bits for the c th serving cell and c 0.

For TDD UL DL configuration and the UE can assume that Bon PUSCH subframe n is represented by Equation 2. Equation 2 may not apply to UL DL configurations and because UL DL configuration may not transmit a value W and UL DL configuration may not use a HARQ ACK bundling window with 9 DL subframes as previously discussed . Equation 2 

where Wis determined by the downlink assignment index DAI in an uplink DCI format e.g. DCI format according to Table 6 in subframe n k where k is defined in Table 5 for each serving cell. Similar information to Table 5 can be shown in 3GPP LTE TS 36.213 Table 7.3 Y. Similar information to Table 6 can be shown in 3GPP LTE TS 36.213 Table 7.3 Z.

As defined in a legacy LTE system the uplink DCI format e.g. DCI format for PUSCH scheduling can be transmitted in the last downlink subframe subframe within each bundling window as shown in . When this occurs the eNB can determine how many DL subframes have been transmitted within each serving cell c so the eNB can directly set the value of Was a maximum number of B 0 c

Inter band TDD carrier aggregation CA with different uplink downlink configurations can also be supported where component carriers CC with different DL UL configurations can be aggregated as illustrated in . For example in order to provide high peak data rate enhancement to both full and half duplex UEs Hybrid Automatic Repeat reQuest HARQ ACK NACK feedback for downlink DL data can have various constraints. For instance the PUCCH may only transmitted on Primary Cell PCell the HARQ ACK timing of the PCell PDSCH can follow the PCell s own SIB UL DL configuration or for the PDSCH of SCell the HARQ ACK timing can follow a specific reference UL DL configuration such as Table 4 .

According to the HARQ ACK timing table i.e. Table 4 for the SCell PDSCH as shown in the size of HARQ ACK bundling window can be different between the PCell and the SCell. Based on this observation if a UE configured with PUCCH format for HARQ ACK transmission the HARQ ACK transmission can follow a legacy design except for the following exception introducing Equation 3 

If the timing reference configuration is for HARQ ACK transmission in an UL subframe n and on a PUSCH adjusted by an UL grant the number of downlink subframes for which the UE can feedback HARQ ACK bits for the c th serving cell can be represented by Equation 3 min Equation 3 

where Mrepresents the total number of subframes with PDSCH transmissions and with PDCCH indicating downlink semi persistent scheduling SPS release to the corresponding UE within HARQ ACK bundling window associated with UL subframe n for the c th serving cell. Using the method implementing Equation 3 can effectively reduce the HARQ ACK overhead for inter band TDD CA in many cases. For instance illustrate an example where the UE aggregates a total of three CCs with UL DL configuration in PCell UL DL configuration in SCell and UL DL configuration in SCell. Transmission mode with two transport blocks TB enabled can be configured and spatial HARQ ACK bundling may not be applied because the HARQ ACK payload size is not greater than 20. The special subframe configuration of each CC can be configuration with normal downlink CP. The eNB can transmit the downlink subframes at subframe of PCell subframes and of Scell and subframe of SCell. Additionally the UE can receive the uplink grant for the PUSCH transmission for subframe . As a result the total HARQ ACK codebook size can be reduced from 18 to 14 as illustrated in which implies a reduction of HARQ ACK overhead of up to 23 . As a consequence the PUSCH performance and system throughput can be improved with little to no impact on HARQ ACK performance unlike puncturing . illustrate HARQ ACK codebook piggybacking on the PUSCH scheduled with transmission mode . The total HARQ ACK bit numbers or HARQ bit numbers can be represented by O or O . can be generated using Tables 5 and 6 and Equations 1 3.

From Equations 2 and 3 the HARQ ACK codebook size reduction can depend on the Wvalue. As previously stated if an uplink DCI format e.g. DCI format for PUSCH scheduling is restricted to be transmitted at the last DL subframe within each bundling window the value of Wmay be set by eNB according to the existing PDSCH scheduling information which may not be complete in some inter band TDD CA scenarios. By exploiting the timing relationship between the PUSCH scheduling and the last DL subframe within each bundling window the HARQ ACK codebook size can be minimized when the HARQ ACK feedback piggybacked e.g transmitted on the PUSCH. Unfortunately some cases of inter band TDD CA can exist when an uplink DCI format e.g. DCI format for PUSCH scheduling is transmitted in the DL subframe in the middle of bundling window as illustrated in . illustrates an example where the PCell is configured with TDD UL DL configuration and SCell is configured with TDD UL DL configuration . PCell subframe can have a DAI 1 and subframe can have a DAI 2 while SCell subframe can have a DAI 1 and subframes and can have a DAI 2 with subframe having an unknown DAI. depicts a potential issue for HARQ ACK codebook determination for inter band TDD CA. Since the PDSCH transmission in subframe in SCell may not be predicted by eNB for Wsetting of the UL grant sent in subframe of PCell i.e. Wsent in subframe of PCell a set of rules e.g. modification of the calculation of the value B can be defined and provided to UE to avoid the HARQ ACK codebook size ambiguity between UE and eNB.

For cases when PDSCH transmission in a HARQ bundling window occur after the transmission of a UL grant as shown in the HARQ ACK bit generation method as defined in Equation 3 may no longer be applicable and may not support this case. Because of the subsequent DL subframe which may or may not be transmitted which occurs after the DL subframe carrying the uplink DCI format e.g. DCI format such as subframe of SCell in the HARQ ACK codebook size can be ambiguous. Therefore the subsequent DL subframe may not be included in the Wvalue when the uplink DCI format is transmitted. The technology e.g. methods computer circuitry devices processors and UEs described herein can be used to set the Wvalue to minimize the HARQ ACK codebook size and while still avoiding the ambiguity on HARQ ACK codebook size between eNB and UE. The technology can be used for minimizing the HARQ ACK book size for various cases.

In an example a HARQ ACK codebook size can be determined under a timing triggering condition when a DL subframe occurs after the DL DCI transmission with an uplink DCI format e.g. DCI format . Such DL subframe may not be predicted in advance by the eNB therefore the subsequent PDSCH subframe may not be counted for the Wvalue setting. Consequently the Wmay not be applicable for the entire HARQ bundling window and may cause a discrepancy on the HARQ ACK codebook size between eNB and UE side since UE may generate a legacy HARQ ACK bits number solely depends on the Wvalue in the uplink grant DCI e.g. DCI format detected. illustrates a HARQ ACK feedback model for an inter band TDD CA system where the subsequent PDSCH subframe e.g. Part B occurs after an uplink grant DCI.

Equation 3 may lead to ambiguity for HARQ ACK generation and may not be applicable for the cases illustrated by . The UE can make determinations and modifications to properly utilize the Wvalue to minimize the HARQ ACK codebook size without ambiguity. For example the bundling window can be divided into two parts e.g. parts A and B as shown in . For part A the HARQ ACK codebook overhead can be properly reduced according to the Win the uplink DCI format e.g. DCI format . While for part B if existing e.g. a subsequent PDSCH subframe occurs after an uplink grant DCI the subsequent PDSCH subframe can generate HARQ ACK bits associated with each downlink subframe.

Additional details are provided of the examples related to Parts A and B. By reusing an existing HARQ ACK bundling window definition a bundling window can include a set of DL subframes associated with one UL subframe which can carry the HARQ ACK feedbacks as defined in Table 3. can illustrate HARQ ACK codebook size determination to address the issue depicted in . In the PDSCH bundling window of serving cell j which is associated with UL subframe n can be further divided into two parts part A and B according to the downlink subframe position relative to the DL subframe carrying the UL grant transmitted on serving cell i where i j. The part A within a bundling window on serving cell c can include Mnumber of DL subframes and part B within a bundling window on serving cell c if existed can include Mnumber of DL subframes and M M M. As shown in the characteristic of the DL subframe in part B can be that these subframes are transmitted later than the downlink subframe conveyed the UL grant for PUSCH scheduling on UL subframe n. In some cases Mcan be equal to zero.

where Nis the number of configured cells C 1 if transmission mode configured in the c th serving cell supports one transport block or spatial HARQ ACK bundling is applied otherwise C 2

In an example several different Bdeterminations can be used corresponding to different TDD UL DL configuration of serving cell i which can be used for the case shown in and when PUCCH format is configured.

In a first case when PUCCH format is configured for transmission of HARQ ACK HARQ ACK is transmitted on the PUSCH in the subframe n adjusted by a detected PDCCH with an uplink DCI format e.g. DCI format and the timing reference configuration of serving cell i on which UL grant is transmitted is UL DL configuration the UE can assume Bfor any one serving cell c on PUSCH subframe n as represented by Equation 5 Equation 5 

where Mis the number of elements in the set K as defined in Table 3 associated with subframe n for HARQ ACK feedback and the set K does not include a special subframe of UL DL configurations and with normal downlink CP or the set K does not include a special subframe of UL DL configurations and with extended downlink CP. Otherwise for PUCCH format is configured for transmission of HARQ ACK HARQ ACK is transmitted on the PUSCH in the subframe n adjusted by a detected PDCCH with an uplink DCI format e.g. DCI format and the timing reference configuration of serving cell i on which UL grant is transmitted is UL DL configuration . The UE can assume Bfor any one serving cell c on PUSCH subframe n as represented by Equation 6 1 Equation 6 .

In an example equation 5 and 6 can be used when an uplink DCI format does not transmit a value W e.g. UL DL configuration . Equation 5 can be used when no PDSCH or no data e.g. only PDCCH transmission are transmitted in special frames e.g. UL DL configurations and with normal downlink CP or UL DL configurations or with extended downlink CP . Equation 6 can be used when PDSCH or data are transmitted in special frames.

In a second case e.g. the timing reference configuration of serving cell i is not a UL DL configuration first option as illustrated by where the HARQ ACK transmission in an UL subframe n and on PUSCH can be adjusted by an UL grant the number of HARQ ACK codebook size on PUSCH can be determined by Equation 7 

where U denotes the maximum value of Uamong all the configured serving cells Uis the total number of received PDSCHs and PDCCH indicating downlink SPS release in subframe n k within part A on the c th serving cell k K defined in Table 3 and Wis determined by the Downlink Assignment Index DAI in an uplink DCI format e.g. DCI format of serving cell in which UCI piggybacking on PUSCH according to Table 6 in subframe n k where k is defined in Table 5.

In the second case the value of Wmay only count the DL subframes transmitted no later than the DL subframe containing the UL grant for UL subframe n. This assumption can be valid considering the eNB may not precisely determine the transmission condition of subsequent subframe in Part B of the bundling window at the instant in time that the UL grant for subframe n is transmitted.

In a second case e.g. the timing reference configuration of serving cell i is not a UL DL configuration second option the eNB can take the DL subframes of part B into consideration when determining the value of Win UL grant without a definitive determination of the subsequent PDSCH subframes in the HARQ bundling window by padding bits for the potential of additional PDSCH subframes. However second case second option can increase the HARQ ACK overhead. For instance as shown by the example in the value of Wcan be set as W 2 instead of W 1 in order to include part B. Consequently the number of HARQ ACK bits increases from 6 to 8 as illustrated in when two CCs are configured. In another example using the illustration of the number of additional HARQ ACK bits can be considerably increased as the number of configured CCs is increased.

Another example provides a method for Hybrid Automatic Repeat reQuest ACKnowledge HARQ ACK codebook size generation for inter band time division duplex TDD carrier aggregation CA at a user equipment UE as shown in the flow chart in . The method may be executed as instructions on a machine computer circuitry or a processor for the UE where the instructions are included on at least one computer readable medium or one non transitory machine readable storage medium. The method includes the operation of receiving configuration information including a physical downlink shared channel PDSCH bundling window for inter band TDD CA including at least one downlink DL subframe using HARQ ACK feedback as in block . The operation of dividing the PDSCH bundling window into a first part and a second part wherein the first part includes DL subframes of all configured serving cells that occur no later than the DL subframe where a downlink control information DCI transmission for uplink scheduling on a serving cell is conveyed and the second part includes physical downlink shared channel PDSCH subframes occurring after the DCI transmission of all the serving cells follows as in block . The next operation of the method can be generating the HARQ ACK codebook size based on the first part and the second part as in block .

In an example the HARQ ACK codebook size on a physical uplink shared channel PUSCH can be represented by O B C where Nis the number of configured cells Bis the number of downlink subframes for which the UE needs to feedback HARQ ACK bits for the c th serving cell c is a non negative integer and C 1 if a transmission mode configured in the c th serving cell supports one transport block TB or spatial HARQ ACK bundling is applied otherwise C 2

In still another configuration B Mwhen the DCI transmission does not include a Wvalue where M M Mis a number of elements in the set k K as defined in a Table 10.1.3.1 1 in a Third Generation Partnership Project 3GPP Long Term Evolution LTE standard Release 11 Technical Specification TS 36.213 associated with subframe n for HARQ ACK feedback and the set K does not include a PDSCH Mis a number of DL subframes in a first part and Mis a number of DL subframes in a second part. Otherwise B M 1 when the DCI transmission does not include a Wvalue and where the set K does include does include a PDSCH.

In another example the method can further include receiving an uplink grant in a DCI transmission including downlink assignment index DAI information in a value Wfor the first part wherein the DCI transmission is transmitted with a DCI format used for uplink grants. In another configuration the method can further include transmitting HARQ ACK feedback for PDSCH subframes of the HARQ bundling window with the calculated HARQ ACK codebook size in uplink control information UCI on physical uplink shared channel PUSCH .

In another configuration the method includes the operation of receiving configuration information including a physical downlink shared channel PDSCH bundling window for inter band TDD CA including at least one downlink DL subframe using HARQ ACK feedback. The operation of triggering a division of the PDSCH bundling window into a first part and a second part when a PDSCH subframe in the PDSCH bundling window is transmitted after a downlink control information DCI transmission of a serving cell for an uplink grant wherein the first part is associated with the DCI transmission of the serving cell for the uplink grant and the second part represents HARQ ACK feedback for PDSCH subframes occurring after the DCI transmission follows. The next operation of the method can be generating the HARQ ACK codebook size based on the first part and the second part.

Another example provides functionality of computer circuitry on a user equipment UE operable to determine a Hybrid Automatic Repeat reQuest ACKnowledge HARQ ACK codebook size for inter band time division duplex TDD carrier aggregation CA as shown in the flow chart in . The functionality may be implemented as a method or the functionality may be executed as instructions on a machine where the instructions are included on at least one computer readable medium or one non transitory machine readable storage medium. The computer circuitry can be configured to determine a HARQ bundling window for inter band TDD CA including a number of downlink DL subframes using HARQ ACK feedback as in block . The computer circuitry can be further configured to divide the HARQ bundling window into a first part and a second part wherein the first part includes DL subframes of configured serving cells that occur no later than the DL subframe where a downlink control information DCI transmission for uplink scheduling on a serving cell is conveyed and the second part includes physical downlink shared channel PDSCH subframes occurring after the DCI transmission of the serving cells as in block . The computer circuitry can also be configured to calculate the HARQ ACK codebook size based on the first part and the second part as in block .

In an example the HARQ ACK codebook size on a physical uplink shared channel PUSCH can be represented by O B C where Nis the number of configured cells Bis the number of downlink subframes for which the UE needs to feedback HARQ ACK bits for the c th serving cell c is a non negative integer and C 1 if a transmission mode configured in the c th serving cell supports one transport block TB or spatial HARQ ACK bundling is applied otherwise C 2.

In still another configuration B Mwhen a serving cell carrying the uplink grant is uplink downlink UL DL configuration a physical uplink control channel PUCCH format is configured for a transmission of HARQ ACK and detection of a physical downlink control channel PDCCH with DCI format or corresponding to subframe n where Mis a number of elements in the set k K as defined in a Table 10.1.3.1 1 in a Third Generation Partnership Project 3GPP Long Term Evolution LTE standard Release 11 Technical Specification TS 36.213 associated with subframe n for HARQ ACK feedback and the set K does not include a special subframe of UL DL configurations and with normal downlink cyclic prefixing CP and the set K does not include a special subframe of UL DL configurations and with extended downlink CP. Otherwise B M 1 when a serving cell carrying the uplink grant is uplink downlink UL DL configuration a physical uplink control channel PUCCH format is configured for a transmission of HARQ ACK and detection of a physical downlink control channel PDCCH with DCI format or corresponding to subframe n where the set K does include a special subframe of UL DL configurations or with normal downlink cyclic prefixing CP or the set K does include a special subframe of UL DL configurations or with extended downlink CP.

In another example the computer circuitry can be further configured to receive an uplink grant in a DCI transmission including downlink assignment index DAI information in a value Wfor the first part where the DCI transmission is transmitted with an Long Term Evolution LTE DCI format or a DCI format . In another configuration the computer circuitry can be further configured to transmit HARQ ACK codebook through the physical uplink shared channel PUSCH scheduled by the DCI for uplink scheduling.

In another example the HARQ bundling window with HARQ bundling window size Mcan include a set of DL subframes associated with one uplink UL subframe which carries the HARQ ACK feedbacks as defined in a Table 10.1.3.1 1 in a Third Generation Partnership Project 3GPP Long Term Evolution LTE standard Release 11 Technical Specification TS 36.213. In another configuration a TDD configuration of a primary cell PCell in the inter band TDD CA can differ from a TDD configuration of a secondary cell SCell in the inter band TDD CA.

In another example the computer circuitry can be configured to determine a HARQ bundling window for inter band TDD CA including a number of downlink DL subframes using HARQ ACK feedback. The computer circuitry can be further configured to divide the HARQ bundling window into a first part and a second part wherein the first part is associated with a downlink control information DCI transmission of a serving cell for uplink scheduling and the second part represents HARQ ACK feedback for physical downlink shared channel PDSCH subframes occurring after the DCI transmission. The computer circuitry can also be configured to calculate the HARQ ACK codebook size based on the first part and the second part.

The wireless device e.g. UE can include a transceiver and a processor . The wireless device i.e. device can be configured to calculate a Hybrid Automatic Repeat reQuest ACKnowledge HARQ ACK codebook size for time division duplex TDD carrier aggregation CA as described in of of .

In another example processor can be configured to Determine a HARQ bundling window for inter band TDD CA including a number of downlink DL subframes using HARQ ACK feedback partition the HARQ bundling window into a first part and a second part where the first part includes DL subframes of configured serving cells that occur no later than the DL subframe where a downlink control information DCI transmission for uplink scheduling on a serving cell is conveyed and the second part includes physical downlink shared channel PDSCH subframes occurring after the DCI transmission of the serving cells and determine the HARQ ACK codebook size based on the first part and the second part and a DCI format.

In an example the HARQ ACK codebook size on a physical uplink shared channel PUSCH can be represented by O B C where Nis the number of configured cells Bis the number of downlink subframes for which the UE needs to feedback HARQ ACK bits for the c th serving cell c is a non negative integer and C 1 if a transmission mode configured in the c th serving cell supports one transport block TB or spatial HARQ ACK bundling is applied otherwise C 2.

In another configuration B Mwhen a serving cell carrying the uplink grant is uplink downlink UL DL configuration a physical uplink control channel PUCCH format is configured for a transmission of HARQ ACK and detection of a physical downlink control channel PDCCH with DCI format or corresponding to subframe n where Mis a number of elements in the set k K as defined in a Table 10.1.3.1 1 in a Third Generation Partnership Project 3GPP Long Term Evolution LTE standard Release 11 Technical Specification TS 36.213 associated with subframe n for HARQ ACK feedback and the set K does not include a special subframe of UL DL configurations and with normal downlink cyclic prefixing CP and the set K does not include a special subframe of UL DL configurations and with extended downlink CP. Otherwise B M 1 when a serving cell carrying the uplink grant is uplink downlink UL DL configuration a physical uplink control channel PUCCH format is configured for a transmission of HARQ ACK and detection of a physical downlink control channel PDCCH with DCI format or corresponding to subframe n where the set K does include a special subframe of UL DL configurations or with normal downlink cyclic prefixing CP or the set K does include a special subframe of UL DL configurations or with extended downlink CP.

In another example the transceiver can be configured to receive an uplink grant in a DCI transmission including downlink assignment index DAD information in a value Wfor the first part where the DCI transmission is transmitted with a DCI format used for uplink grants. In another configuration the transceiver can be further configured to transmit HARQ ACK codebook through the physical uplink shared channel PUSCH scheduled by the DCI for uplink scheduling to a node.

In another example processor can be configured to Determine a HARQ bundling window for inter band TDD CA including a number of downlink DL subframes using HARQ ACK feedback partition the HARQ bundling window into a first part and a second part where the first part represents HARQ ACK feedback for physical downlink shared channel PDSCH subframes occurring prior or during a downlink control information DCI transmission of a serving cell for uplink scheduling and the second part represents HARQ ACK feedback for PDSCH subframes occurring after the DCI transmission and determine the HARQ ACK codebook size based on the first part and the second part and a DCI format.

Various techniques or certain aspects or portions thereof may take the form of program code i.e. instructions embodied in tangible media such as floppy diskettes CD ROMs hard drives non transitory computer readable storage medium or any other machine readable storage medium wherein when the program code is loaded into and executed by a machine such as a computer the machine becomes an apparatus for practicing the various techniques. Circuitry can include hardware firmware program code executable code computer instructions and or software. A non transitory computer readable storage medium can be a computer readable storage medium that does not include signal. In the case of program code execution on programmable computers the computing device may include a processor a storage medium readable by the processor including volatile and non volatile memory and or storage elements at least one input device and at least one output device. The volatile and non volatile memory and or storage elements may be a RAM EPROM flash drive optical drive magnetic hard drive solid state drive or other medium for storing electronic data. The node and wireless device may also include a transceiver module a counter module a processing module and or a clock module or timer module. One or more programs that may implement or utilize the various techniques described herein may use an application programming interface API reusable controls and the like. Such programs may be implemented in a high level procedural or object oriented programming language to communicate with a computer system. However the program s may be implemented in assembly or machine language if desired. In any case the language may be a compiled or interpreted language and combined with hardware implementations.

It should be understood that many of the functional units described in this specification have been labeled as modules in order to more particularly emphasize their implementation independence. For example a module may be implemented as a hardware circuit comprising custom VLSI circuits or gate arrays off the shelf semiconductors such as logic chips transistors or other discrete components. A module may also be implemented in programmable hardware devices such as field programmable gate arrays programmable array logic programmable logic devices or the like.

Modules may also be implemented in software for execution by various types of processors or logic. An identified module of executable code may for instance comprise one or more physical or logical blocks of computer instructions which may for instance be organized as an object procedure or function. Nevertheless the executables of an identified module need not be physically located together but may comprise disparate instructions stored in different locations which when joined logically together comprise the module and achieve the stated purpose for the module.

Indeed a module of executable code may be a single instruction or many instructions and may even be distributed over several different code segments among different programs and across several memory devices. Similarly operational data may be identified and illustrated herein within modules and may be embodied in any suitable form and organized within any suitable type of data structure. The operational data may be collected as a single data set or may be distributed over different locations including over different storage devices and may exist at least partially merely as electronic signals on a system or network. The modules may be passive or active including agents operable to perform desired functions.

Reference throughout this specification to an example means that a particular feature structure or characteristic described in connection with the example is included in at least one embodiment of the present invention. Thus appearances of the phrases in an example in various places throughout this specification are not necessarily all referring to the same embodiment.

As used herein a plurality of items structural elements compositional elements and or materials may be presented in a common list for convenience. However these lists should be construed as though each member of the list is individually identified as a separate and unique member. Thus no individual member of such list should be construed as a de facto equivalent of any other member of the same list solely based on their presentation in a common group without indications to the contrary. In addition various embodiments and example of the present invention may be referred to herein along with alternatives for the various components thereof. It is understood that such embodiments examples and alternatives are not to be construed as defacto equivalents of one another but are to be considered as separate and autonomous representations of the present invention.

Furthermore the described features structures or characteristics may be combined in any suitable manner in one or more embodiments. In the following description numerous specific details are provided such as examples of layouts distances network examples etc. to provide a thorough understanding of embodiments of the invention. One skilled in the relevant art will recognize however that the invention can be practiced without one or more of the specific details or with other methods components layouts etc. In other instances well known structures materials or operations are not shown or described in detail to avoid obscuring aspects of the invention.

While the forgoing examples are illustrative of the principles of the present invention in one or more particular applications it will be apparent to those of ordinary skill in the art that numerous modifications in form usage and details of implementation can be made without the exercise of inventive faculty and without departing from the principles and concepts of the invention. Accordingly it is not intended that the invention be limited except as by the claims set forth below.

