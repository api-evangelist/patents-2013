---

title: Method to obtain a virtual desktop stored in a cloud storage system, a corresponding cloud broker and cloud desktop agent
abstract: A method to obtain a cloud-stored virtual desktop includes a set of user preferences, applications and shortcuts to files that a user desires to access. The method includes (A) transferring from a client device to a cloud broker a virtual desktop request comprising a user identification and a client device type identification; (B) passing the virtual desktop request to a cloud desktop agent responsible for maintenance of virtual desktops and virtual desktop metadata in the cloud storage system; (C) selecting by the cloud desktop agent a list of available virtual desktops for the user and the client device type based on a comparison with the virtual desktop metadata; (D) transferring the list of available virtual desktops to the cloud broker; and (E) forwarding the list of available virtual desktops from the cloud broker to the client device to enable the user to select a virtual desktop to be opened.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09152302&OS=09152302&RS=09152302
owner: Awingu, NV
number: 09152302
owner_city: Ghent
owner_country: BE
publication_date: 20130712
---
This application claims priority to European Application No. EP 12176461.7 filed on Jul. 13 2012 the contents of which are incorporated herein by specific reference.

The present invention generally relates to storage retrieval and the exchange between different users and or devices of virtual desktops. In the context of the current patent application a virtual desktop is a cloud stored set of user preferences applications and shortcuts to files or data that need to be easily accessible for the user. The virtual desktop in other words is a desktop that does not reside on the user s device but is stored in the cloud storage system next to the user data stored in the cloud. The present invention in particular concerns a way to obtain upon request of a user a preferred virtual desktop representation given the device type laptop tablet PC smartphone . . . and eventually also the location office home public location . . . and type of access private corporate .

A desktop defines a set of user preferences e.g. menu bars as well as their look and feel applications and shortcuts to files that a user desires to access easily e.g. through a single mouse click or finger touch. As a consequence a desktop provides a unique view over one or plural storage spaces of the same user like for instance the user s private and public cloud storage the user s local hard disk storage the user s dropbox storage space the user s google drive storage space etc. On a PC or laptop a desktop definition per user is stored locally on the hard disk. In a corporate network a desktop definition per user is stored centrally on a server. In case the desktop is a corporate desktop it shall typically also prevent access to some of the storage spaces such as particular cloud storages the dropbox storage space etc. for security reasons.

In the above definition of desktop the term shortcut to files must be interpreted broadly to cover any shortcut to directories subdirectories documents data etc. whether stored on the client device private or corporate servers or in a cloud storage environment. It is further noticed that a single user can define more than one desktop stored locally.

Whereas a desktop is a locally stored set of user preferences applications and shortcuts to files that a user desires to access easily after login on his her client device a virtual desktop in the context of the present patent application is a set of user preferences applications and shortcuts to files that the user desires to access easily that is stored remotely in a cloud storage system. A virtual desktop in other words does not reside on any of the user s client devices e.g. his laptop tablet PC or smartphone but is stored in a cloud storage system and pushed back to the user s client device after login. Similarly to traditional desktops a single user can define more than one virtual desktop stored in the cloud storage system.

One example of such virtual desktop is the Transferable Desktop from ZeroPC of which a description can be retrieved from the Internet via the URL 

The Transferable Desktop solution from ZeroPC enables a user to customize one or more virtual desktops stored in a cloud storage system and to share one or more of his desktops with other users in the cloud environment.

ZeroPC however does not allow to create virtual desktops per device type. With the introduction of bring your own device policies in corporate organizations different corporate users will desire different virtual desktops depending on the device or devices they are using.

Further corporate organizations desire to define and control the access policy from one place such that for instance a corporate IT department can block access to one or some of the public cloud storage providers by disabling access to them through the virtual desktop definitions.

European Patent Application EP 2 357 558 A2 entitled Independent access to virtual machine desktop content recognizes in paragraph 0008 the desire of users to use any type of device to access data stored in the cloud and the complexity of delivering and running virtual desktops on a wide spectrum of devices. EP 2 357 558 thereto proposes an Enhanced Virtual Desktop Management System enabling a user to access its data applications and settings stored in cloud storage. The Enhanced Virtual Desktop Management System known from EP 2 357 558 uses an API incorporated in the web browser or other third party interface providing access to the user s data without running a virtual desktop see for instance paragraphs 0042 and 0046 .

It is an objective of the present invention to disclose a method and system for obtaining a virtual desktop that overcomes the above mentioned drawbacks of existing solutions. More particularly it is an objective of the present invention to disclose a method and system for obtaining upon request of a user a preferred virtual desktop representation for that user and the device type laptop tablet PC smartphone . . . of that user. It is a further objective to obtain upon request of a user a preferred virtual desktop representation for the location office home public location . . . of that user. It is a further objective to obtain upon request of a user a preferred virtual desktop representation considering the type of access private corporate of that user.

According to the invention the above defined objectives are realized by a method to obtain a virtual desktop comprising a set of user preferences applications and shortcuts to files that a user desires to access the virtual desktop being stored in a cloud storage system the method comprising 

A. transferring from a client device of the user to a cloud broker a virtual desktop request comprising at least a user identification and a client device type identification 

B. passing the virtual desktop request from the cloud broker to a cloud desktop agent responsible for maintenance of virtual desktops and virtual desktop metadata in the cloud storage system 

C. selecting by the cloud desktop agent a list of available virtual desktops for the user and the client device type based on a comparison of the virtual desktop request with the virtual desktop metadata 

D. transferring in response to the virtual desktop request from the cloud desktop agent to the cloud broker the list of available virtual desktops and

E. forwarding the list of available virtual desktops from the cloud broker to the client device to enable the user to select a virtual desktop to be opened.

Thus at the time the user initiates a request for a cloud stored virtual desktop information identifying the user and the type of device is passed to a cloud broker e.g. an HTTP cloud broker that tunnels cloud IO events to different client devices using WebSockets or HTTP REST calls. The cloud broker shall pass the request including the user identification and device type identification to a cloud desktop agent i.e. a software program residing in the cloud environment responsible for managing i.e. storing selecting and deleting virtual desktops and virtual desktop metadata. The cloud desktop agent compares the information in the request identifying the user and device type with the virtual desktop metadata and selects a list of virtual desktops accessible by that user and suitable for the client device from which the user has issued the request. The list of available virtual desktops is sent to the cloud broker which in turn delivers the list to the client device.

Through the current invention the user is enabled to choose the preferred virtual desktop after logging in from a list of available virtual desktops that suit the client device he is using. The user can share his virtual desktop with other devices. Assuming that other users have access rights to the underlying data the user can also share his virtual desktop with other users by simply sending the virtual desktop definition from one device to another.

It is noticed that the user can also decide to create a new virtual desktop and store it in the cloud storage system via the cloud broker.

According to a further aspect of the invention the method to obtain a virtual desktop according the present invention comprises transferring user credentials of the user from the client device to the cloud broker authenticating the user at the cloud broker and executing the steps B C and D only after successful authentication.

Thus at the time of the request the user can either provide his credentials or not. In case the user provides his credentials or login information the cloud broker can authenticate the user and only after successful authentication pass the request to the cloud desktop agent step B . The latter shall return a list containing all configured virtual desktops for that user that match the given device type step C and this list will be forwarded by the cloud broker to the client device of the user step D enabling the user to open the virtual desktop he she prefers. In case no user credentials are provided the cloud broker can pass the client device s IP address to the cloud desktop agent which can check which Virtual Private Networks VPNs are registered for that IP address. In case the cloud desktop agent concludes that the request is received from a predefined VPN a default desktop with login request can be returned. The default virtual desktop can for instance be a default corporate virtual desktop in case the request is received from a corporate network. This may for instance be the case in a corporate organization with bring your own device policy where the device automatically connects to the corporate network e.g. through WiFi even prior to the user actually logging in with his user credentials i.e. his corporate username and password. The default corporate virtual desktop may already provide some read only access to a set of files that can be shared without authentication.

According to an optional aspect of the method to obtain a virtual desktop according to the present invention the virtual desktop request further comprises a location identification and in step C a list of available virtual desktops for the user the client device type and the location is selected based on a comparison of the virtual desktop request with the virtual desktop metadata.

Indeed in selecting a list of appropriate virtual desktops the cloud desktop agent preferably also matches a location identifier in the request with location information stored as part of the virtual desktop metadata. The location information may for instance indicate if the user sends the request from home from his office or from a public spot. Depending on the location the preferential virtual desktop may be different. E.g. the set of applications or files that the user desires to access from a public spot may differ from the set of applications or files that the same user using the same device desires to access from his office.

According to another optional aspect of the method to obtain a virtual desktop according to the present invention the virtual desktop request further comprises an access type identification and in step C a list of available virtual desktops for the user the client device type and the access type is selected based on a comparison of the virtual desktop request with the virtual desktop metadata.

Thus in selecting a list of appropriate virtual desktops the cloud desktop agent preferably also compares an identification of the access type in the request i.e. whether the request comes from a corporate or private network with access type information stored as part of the virtual desktop metadata. Indeed the virtual desktop metadata can be enhanced with information indicating if the virtual desktop definition contains corporate or private data. Depending on the type of access the preferential virtual desktop may be different. E.g. certain applications or files that the user can access from a corporate access point may be blocked for access from a private point for security reasons.

In accordance with another optional aspect the method to obtain a virtual desktop according to the present invention comprises 

re directing the user request to a private virtual desktop environment in case the access type is private access or re directing the user request to a corporate virtual desktop environment in case the access type is corporate access.

Thus in case the user request specifies private access the same cloud broker can re direct the user s request for a virtual desktop to a private virtual desktop environment that is backed by private storage space. Such private storage space could reside with the same cloud storage provider as the corporate storage space or with a different cloud storage provider.

Further optionally the method to obtain a virtual desktop according to the present invention for corporate type of access may comprise the step of 

Indeed as mentioned already above a device may automatically connect to a corporate network prior to the user logging in with his user credentials. This will for instance be the case if the corporation has deployed a WiFi network and the user s client device has already been connected to the corporate network in the past. If the IP address of the device can be correlated with the registered VPNs of the corporation a default corporate virtual desktop incorporating a customized login page with limited access to certain files may be returned. The cloud desktop agent preferably can access the IP VPN definitions of different corporations in order to select a default corporate virtual desktop of the appropriate corporation before the user has successfully logged into the corporate network.

As is further specified the method according to the present invention may foresee for corporate type of access in the step of 

The default corporate virtual desktop shall typically contain a customized login page enabling the user to submit his user credentials. In addition thereto the default corporate virtual desktop may already provide access to a limited set of files and or applications.

Still optionally the method to obtain a virtual desktop according the present invention may further comprise 

Hence in case the request for a virtual desktop is received from a public IP address the cloud broker shall only provide a default login page.

As further defined the virtual desktop request may be an HyperText Transfer Protocol or HTTP request and the cloud broker may be an HTTP broker.

The HTTP cloud broker is a server that tunnels cloud IO events to different HTML clients using WebSockets or HTTP REST calls.

In addition to the method the present invention also relates to a corresponding cloud broker adapted to tunnel cloud IO events to from different client devices in a cloud storage environment in order to enable a user to obtain a virtual desktop comprising a set of user preferences applications and shortcuts to files that the user desires to access the virtual desktop being stored in said cloud storage system the cloud broker comprising 

A. an interface configured to receive from a client device of a user a virtual desktop request comprising at least a user identification and a client device type identification 

B. an interface configured to tunnel the virtual desktop request to a cloud desktop agent responsible for maintenance of virtual desktops and virtual desktop metadata in the cloud storage system 

C. an interface configured to receive in response to the virtual desktop request from the cloud desktop agent a list of available virtual desktops for the user and the client device type the list of available virtual desktops being selected by the cloud desktop agent based on a comparison of the virtual desktop request with the virtual desktop metadata and

D. an interface configured to forward the list of available virtual desktops to the client device to enable the user to select a virtual desktop to be opened.

Furthermore the present invention relates to a corresponding cloud desktop agent able adapted to maintain virtual desktops and virtual desktop metadata in a cloud storage system in order to enable a user to obtain a virtual desktop comprising a set of user preferences applications and shortcuts to files that the user desires to access the virtual desktop being stored in the cloud storage system the cloud desktop agent comprising 

A. an interface configured to receive from a cloud broker a virtual desktop request comprising at least a user identification and a client device type identification 

B. virtual desktop selection logic adapted to select a list of available virtual desktops for the user and the client device type based on a comparison of the virtual desktop request with the virtual desktop metadata and

C. an interface configured to send in response to the virtual desktop request to the cloud broker a list of available virtual desktops to thereby enable the cloud broker to forward the list of available virtual desktops to the client device to enable the user to select a virtual desktop to be opened.

Through SetUserDesktops messages and the desktop definition and desktop metadata of desktop are stored in cloud storage system more particular in the virtual desktops store . Such cloud stored desktop is called a virtual desktop.

Upon request of client device and based on the user identification client device type location and domain access a list of available virtual desktops located in cloud storage system is pushed back to client device . Thereto client device sends an HTTP request to HTTP cloud broker . The HTTP request contains a user identification device type identification location identification and access type identification. HTTP cloud broker is an HTTP server that tunnels cloud IO events to different client devices using WebSockets or HTTP REST calls. HTTP cloud broker tunnels the request received from client device as GetUserDesktops message to cloud desktop agent . Cloud desktop agent is a software daemon that resides in the cloud storage system . It is responsible for storing selecting and deleting virtual desktops in virtual desktops store . Cloud desktop agent can also access the IP VPN definitions of different corporations stored in VPN info store in order to select a default corporate virtual desktop for client devices that request a virtual desktop before the user has successfully logged into the corporate network. Such default corporate virtual desktop will be returned upon cloud desktop agent issuing a ResolveDesktopForIP message including the IP address of client device . This will happen whenever client device requests a virtual desktop without successfully authenticating the user.

With respective reference to and the scenario s for requesting selecting a virtual desktop storing a virtual desktop sharing a virtual desktop between plural devices and requesting receiving a default virtual desktop in the cloud environment illustrated by are described in more detail in the following paragraphs.

In client device cloud broker and cloud desktop agent correspond respectively to client device cloud broker and cloud desktop agent of . further depicts the message flow in the scenario followed for obtaining a cloud stored virtual desktop. In this scenario the user of client device is first challenged with a login request either over HTTP or a native application. After successfully providing his her user credentials client device is redirected to HTTP cloud broker . As part of a virtual desktop request message named REQ DT or in client device provides a unique user identification UserID a device type identification DeviceType and if necessary a device location identification Location and access type identification AccessType. The latter can be an identification of the corporation in case of corporate network access. HTTP cloud broker tunnels the request REQ DT to the cloud desktop agent as part of a user desktop get request named GET DT in . Upon receipt of GET DT cloud desktop agent will select an appropriate set of virtual desktops for that user device type and eventual location and access type. The list of appropriate virtual desktops for that user is returned to cloud broker as part of the message LST DT . As is shown in this message also contains the user identification UserID of the user for which it is destined. Cloud broker forwards the list of appropriate virtual desktops to client device as is indicated by LST DT . The user thereupon can select and open the virtual desktop of his her choice.

In client device cloud broker and cloud desktop agent correspond respectively to client device cloud broker and cloud desktop agent of . further depicts the message flow in the scenario followed for saving a virtual desktop either a newly created or an updated virtual desktop in cloud storage system . The client device thereto sends a save message named SAVE DT or in to cloud broker . The SAVE DT message contains the desktop metadata i.e. the user identification UserID of the user that created updated the virtual desktop the device type identification DeviceType the location identification Location and access type identification AccessType for which the virtual desktop is appropriate. The SAVE DT message may also contain a private flag. Cloud broker further tunnels this message as part of SAVE DT message to cloud desktop agent enabling the latter to store or update the virtual desktop definition and metadata in the cloud store.

In two client devices CLIENT DEVICE or and CLIENT DEVICE or are depicted. These client devices may belong to the same user or to different users. further depicts the message flow in the scenario followed for sharing a virtual desktop between these two client devices and . It is important to note that in the context of the current invention the concept of virtual desktop sharing doesn t refer to the sharing of the desktop sessions using remote login but refers only to sharing the desktop preferences as defined in the virtual desktop definition. The user of client device may wish to send a virtual desktop he she has created or opened with another device . In such case the virtual desktop definition is sent from the first device to the second device without a need to pass through the HTTP cloud broker. This is indicated by the desktop send message SEND DT or in . The same process can be used for virtual desktop sharing between different devices of a single user and between devices of different users. Nevertheless access to the cloud data is still subject to the default login process which happens prior to accessing any cloud data.

In client device cloud broker and cloud desktop agent correspond respectively to client device cloud broker and cloud desktop agent of . further depicts the message flow in the scenario followed for obtaining a cloud stored default corporate virtual desktop. In case that a user comes with his own device e.g. a tablet PC a laptop a smartphone . . . into the office of a corporation it is very likely that the client device will automatically connect to the corporate network even prior to user actually logging into the corporate network with his credentials. Most of the devices with WiFi access endpoints will automatically connect to the corporate network if they have been connected already in the past. In such case even prior to login the user can be challenged with a more customized login integrated in a default corporate virtual desktop since the IP address in the request that comes from client device may be correlated with a corporation that has this IP address in its IP address range. Client device thereto sends a virtual desktop request REQ DT or to cloud broker which further tunnels the request to cloud desktop agent as part of the desktop get request GET DT or . This GET DT request contains the IP address of client device enabling the cloud desktop agent to compare this IP address with the IP addresses listed for corporate VPNs. Resolving the IP address against the VPN information where cloud desktop agent has access to is represented by arrow in . In case the IP address belongs to an IP address range of a corporate VPN the cloud desktop agent shall return the default corporate virtual desktop of that corporation in message DEFAULT DT or . Cloud broker upon receipt of DEFAULT DT message forwards this message to client device as is indicated by in

Although the present invention has been illustrated by reference to specific embodiments it will be apparent to those skilled in the art that the invention is not limited to the details of the foregoing illustrative embodiments and that the present invention may be embodied with various changes and modifications without departing from the scope thereof. The present embodiments are therefore to be considered in all respects as illustrative and not restrictive the scope of the invention being indicated by the appended claims rather than by the foregoing description and all changes which come within the meaning and range of equivalency of the claims are therefore intended to be embraced therein. In other words it is contemplated to cover any and all modifications variations or equivalents that fall within the scope of the basic underlying principles and whose essential attributes are claimed in this patent application. It will furthermore be understood by the reader of this patent application that the words comprising or comprise do not exclude other elements or steps that the words a or an do not exclude a plurality and that a single element such as a computer system a processor or another integrated unit may fulfil the functions of several means recited in the claims. Any reference signs in the claims shall not be construed as limiting the respective claims concerned. The terms first second third a b c and the like when used in the description or in the claims are introduced to distinguish between similar elements or steps and are not necessarily describing a sequential or chronological order. Similarly the terms top bottom over under and the like are introduced for descriptive purposes and not necessarily to denote relative positions. It is to be understood that the terms so used are interchangeable under appropriate circumstances and embodiments of the invention are capable of operating according to the present invention in other sequences or in orientations different from the one s described or illustrated above.

