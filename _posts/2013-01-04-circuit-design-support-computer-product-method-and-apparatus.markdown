---

title: Circuit design support computer product, method, and apparatus
abstract: A computer-readable recording medium stores a design support program that causes a computer to execute a process that includes generating based on a control flow graph conversion result for operation description information concerning a circuit-under-design, a first synthesis result according to which a time length of 1 clock cycle of the circuit-under-design is greater than or equal to a clock period in which the circuit-under-design operates; calculating based on the generated first synthesis result, first circuit scale information indicating a circuit scale of the circuit-under-design; acquiring a second synthesis result that is for the circuit-under-design and conforms to a timing constraint that is based on the control flow graph conversion result; calculating second circuit scale information indicating the circuit scale of the circuit-under-design, based on the generated second synthesis result; and outputting the calculated first circuit scale information and the calculated second circuit information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08677296&OS=08677296&RS=08677296
owner: Fujitsu Limited
number: 08677296
owner_city: Kawasaki
owner_country: JP
publication_date: 20130104
---
This application is based upon and claims the benefit of priority of the prior Japanese Patent Application No. 2012 070458 filed on Mar. 26 2012 the entire contents of which are incorporated herein by reference.

Various conventional techniques for circuit design have been disclosed. For example according to a high level synthesis method first conventional example a control data flow graph CDFG is generated based on an input file and a restriction file and a finite state machine FSM is generated based on the CDFG and a constraint for a digital circuit. Then according to the high level synthesis method nodes of the CDGF are allocated to states of the FSM to perform scheduling. Finally according to the high level synthesis method resources are allocated to each node of the CDFG based on resource level layout information indicative of the layout of resources for constructing the digital circuit to generate circuit information see e.g. Japanese Laid Open Patent Publication No. 2004 164627 .

According to an automated circuit design method second conventional example a cell library for normal cells and specification information of a circuit to be designed are acquired the upper limit potential of a virtual ground line in the circuit is set and a cell library for low threshold cells is generated using the upper limit potential. Then according to the automated circuit design method the specification information is logically synthesized to generate a net list and a layout is generated based on the net list the cell library for normal cells and the cell library for low threshold cells see e.g. Japanese Laid Open Patent Publication No. 2005 135177 .

A program converter third conventional example converts an operation description program describing a series of operation contents into a circuit description program describing the design contents of a circuit that implements the operation contents. The program converter then generates an index indicative of elements of a circuit that is obtained when the design contents described by the circuit description program is implemented using one or more hardware components see e.g. Japanese Laid Open Patent Publication No. 2008 123103 .

The above conventional techniques however provide no objective index on the scale of the circuit which makes it difficult for a designer to understand the approximate circuit scale obtained as a result of high level synthesis. Even if managing to understand the circuit scale the designer still has difficulty in determining whether the circuit scale is too large or appropriate.

According to an aspect of an embodiment a computer readable recording medium stores a design support program that causes a computer to execute a process that includes generating based on a control flow graph conversion result for operation description information concerning a circuit under design a first synthesis result according to which a time length of 1 clock cycle of the circuit under design is greater than or equal to a clock period in which the circuit under design operates calculating based on the generated first synthesis result first circuit scale information indicating a circuit scale of the circuit under design acquiring a second synthesis result that is for the circuit under design and conforms to a timing constraint that is based on the control flow graph conversion result calculating second circuit scale information indicating the circuit scale of the circuit under design based on the generated second synthesis result and outputting the calculated first circuit scale information and the calculated second circuit information.

The object and advantages of the invention will be realized and attained by means of the elements and combinations particularly pointed out in the claims.

It is to be understood that both the foregoing general description and the following detailed description are exemplary and explanatory and are not restrictive of the invention.

Preferred embodiments of the present invention will be explained in detail with reference to the accompanying drawings.

According to the first synthesis result a time length greater than or equal to the total delay of computing circuits to is the clock period of one clock cycle. The design support apparatus determines circuit scale information indicative of the circuit scale of the first synthesis result based on the total area of circuits making up the first synthesis result . In this example circuit scale information S of the first synthesis result is determined as S 1000.

In a conventional manner the design support apparatus generates from the CFG conversion result a second synthesis result according to a timing constraint given to the circuit under design. The second synthesis result is circuit information generated as a result of adopting computing circuits conforming to the timing constraint. In the timing constraint is given as two clock cycles and the clock period of one clock cycle is sec .

As a result a delay of the computing circuit is less than or equal to sec and the total delay of computing circuits and is also less than or equal to sec . The design support apparatus determines circuit scale information S indicative of the circuit scale of the second synthesis result based on the total area of circuits making up the second synthesis result . In this example circuit scale information S of the second synthesis result is determined as S 1750.

The design support apparatus calculates comparison information C using the circuit scale information S 1000 of the first synthesis result and the circuit scale information S 1750 of the second synthesis result . In this example the comparison information C is calculated as S S. When the comparison information C is greater than or equal to a threshold Ct the design support apparatus outputs alarm information.

In this manner whether the second synthesis result is to be adopted can be determined by using the first synthesis result as an objective index. The designer therefore can check the circuit scale of the second synthesis result in a relative manner. In the example of the comparison information C is determined and is compared with the threshold Ct. The design support apparatus may determine a difference of the circuit scale information S less the circuit scale information S to be the comparison information C.

The design support apparatus may output the circuit scale information S and circuit scale information S as is so that the designer visually checks the output circuit scale information and makes a determination. In all cases according to the embodiment using the first synthesis result as an objective index allows determining whether the circuit scale of the second synthesis result is appropriate. When the size is appropriate increases in the circuit scale can be suppressed.

The CPU governs overall control of the design support apparatus. The ROM stores therein programs such as a boot program. The RAM is used as a work area of the CPU . The magnetic disk drive under the control of the CPU controls the reading and writing of data with respect to the magnetic disk . The magnetic disk stores therein data written under control of the magnetic disk drive .

The optical disk drive under the control of the CPU controls the reading and writing of data with respect to the optical disk . The optical disk stores therein data written under control of the optical disk drive the data being read by a computer.

The display displays for example data such as text images functional information etc. in addition to a cursor icons and or tool boxes. A liquid crystal display a plasma display etc. may be employed as the display .

The I F is connected to a network such as a local area network LAN a wide area network WAN and the Internet through a communication line and is connected to other apparatuses through the network . The I F administers an internal interface with the network and controls the input output of data from to external apparatuses. For example a modem or a LAN adaptor may be employed as the I F .

The keyboard includes for example keys for inputting letters numerals and various instructions and performs the input of data. Alternatively a touch panel type input pad or numeric keypad etc. may be adopted. The mouse is used to move the cursor select a region or move and change the size of windows. A track ball or a joy stick may be adopted provided each respectively has a function similar to a pointing device.

The scanner optically reads an image and takes in the image data into the design support apparatus. The scanner may have an optical character reader OCR function as well. The printer prints image data and text data. The printer may be for example a laser printer or an ink jet printer.

Among the contents stored in the memory unit circuit are constituent elements of the circuit under design and include a computing circuit such as an AND circuit and ADD adder circuit and a data holding circuit such as a register FF and selector SEL . In the memory unit multiple circuits identical in type but different in area and delay are classified as different circuits. A delay means the time span between the input of data to a circuit and the output of the data from the circuit. Although the smaller a delay is the higher an operation rate is the higher the operation rate is the larger the area is.

The converting unit performs CFG conversion of operation description information concerning the circuit under design. The operation description information is created by a description method higher in abstraction level than the register transfer level RTL and specifies no clock as the RTL does. The operation description information is written in for example C language C language SystemC language etc.

The synthesizing unit generates the second synthesis result based on the CFG conversion result . For example the synthesizing unit executes high level synthesis conforming to a timing constraint given to the circuit under design as in a conventional case. An example of synthesis by the synthesizing unit will be described.

Scheduling is a process of allocating each computing circuit to any one of clock cycles. The time length i.e. the clock period of a clock cycle is the reciprocal of a clock frequency given as the timing constraint. For example when the clock frequency is 400 MHz the clock period is 1 400 sec . The synthesizing unit therefore refers to the memory unit and allocates the computing circuit to a clock cycle so that the delay of the computing circuit is within the clock period of the clock cycle. In the example of a computing circuit corresponding to add1 is allocated a clock cycle between 0 clock cycle to 1 clock cycle and computing circuits corresponding to multi and out are allocated to a clock cycle between 1 clock cycle and 2 clock cycles. Through this scheduling the CFG conversion result is obtained.

The synthesizing unit then performs allocation for the post scheduling CFG conversion result . Allocation is a process of connecting circuit information in the memory unit according to the post scheduling CFG conversion result . In the course of the connection a computing circuit that can be shared by other elements is connected as a share element. Wait is replaced by a register.

Comparison between and reveals that in because the total delay of a multiplier and an adder must be within sec between 1 clock cycle and 2 clock cycles the computing circuits and having less delay than the computing circuits and are adopted as computing circuits allocated between 1 clock cycle and 2 clock cycles. In for example the computing circuits and serve as multipliers and each have a delay within the clock period so that the computing circuit smaller in circuit scale than the computing circuit is adopted as a computing circuit allocated between 1 clock cycle and 2 clock cycles. The same adoption method applies to a case of the computing circuits and .

When the timing constraint is specified as 2 clock cycles the allocation result of is obtained. When the timing constraint is specified as 3 clock cycles the allocation result of is obtained. When the timing constraint is specified as 2 to 3 clock cycles both allocation results are obtained.

The generating unit generates based on the CFG conversion result for the operation description information concerning the circuit under design the first synthesis result according to which the time length of 1 clock cycle of the circuit under design is greater than or equal to the clock period in which the circuit under design operates. For example the generating unit does not execute ordinary high level synthesis i.e. the above process by the synthesizing unit but rather generates the first synthesis result in which a group of computing circuits are arranged according to the CFG conversion result and a register is located at the final stage as an allocation result. The first synthesis result indicates the circuit operating at 1 clock cycle. In this case the time length of 1 clock cycle i.e. the clock period is a time length greater than or equal to the clock period in which the circuit under design operates.

In the example of the first synthesis result is generated by adopting the circuits having the smallest circuit scale. The generating unit however is allowed to adopt a circuit of any circuit scale if the delay of the circuit is within the clock period . For example when priority is given to a smaller circuit scale the generating unit refers to the memory unit and adopts the circuit having the smallest circuit scale as in the above case. When priority is given to a higher operation rate the generating unit refers to the memory unit and adopts the circuit having the smallest delay. When both requirements for a smaller circuit scale and a higher operation rate should be met the generating unit refers to the memory unit and adopts a circuit that is average in terms of circuit scale and operation rate.

The second calculating unit calculates based on the second synthesis result acquired by the acquiring unit the second circuit scale information S indicating the circuit scale of the circuit under design. In the same manner as the first calculating unit for example the second calculating unit refers to the memory unit reads out the areas of circuits in the second synthesis result and calculates the sum of the areas. The calculated sum is equivalent to the second circuit scale information S indicating the circuit scale of the circuit under design. When multiple second synthesis results are acquired the second circuit scale information is calculated for each of the second synthesis results .

The output unit outputs the first circuit scale information S calculated by the first calculating unit and the second circuit scale information S calculated by the second calculating unit . For example the output unit prints out the first circuit scale information S and second circuit scale information S displays the first circuit scale information S and second circuit scale information S on the display or transmits the first circuit scale information S and second circuit scale information S to an external apparatus or may store the first circuit scale information S and second circuit scale information S in a storage device in the design support apparatus . As a result the designer can check the first circuit scale information S and the second circuit scale information S and objectively understand the circuit scale of the second synthesis result .

The determining unit determines based on the first circuit scale information S and the second circuit scale information S the appropriateness of the circuit scale indicated by the second synthesis result . For example the determining unit determines the appropriateness of the circuit scale indicated by the second synthesis result by comparing a threshold and the difference of the second circuit scale information S less the first circuit scale information S. For example the determining unit obtains the difference by subtracting the first circuit scale information S from the second circuit scale information S as the comparison information C and determines whether the comparison information C is greater than or equal to the threshold Ct. If the comparison information C is greater than or equal to the threshold Ct the second synthesis result is determined to be circuit information that should not be adopted.

The determining unit may determine the appropriateness of the circuit scale indicated by the second synthesis result by comparing a ratio of the first circuit scale information S and the second circuit scale information S and a threshold. For example the determining unit obtains the ratio by dividing the second circuit scale information S by the first circuit scale information S as the comparison information C and determines whether the comparison information C is greater than or equal to the threshold Ct. If the comparison information C is greater than or equal to the threshold Ct the second synthesis result is determined to be circuit information that should not be adopted.

If the comparison information C is smaller than the threshold Ct the determining unit stores the second synthesis result in a storage device as a synthesis result that can be adopted. If the comparison information C is greater than or equal to the threshold Ct the output unit outputs alarm information. Alarm information is for example information indicating that the comparison information C is greater than or equal to the threshold Ct. The output unit associates and outputs the alarm information and the second synthesis result . The alarm information may be output as an alarm sound enabling the designer to objectively understand the second synthesis result indicating a large circuit scale and thereby suppress an increase in the circuit scale at the time of circuit design.

The design support apparatus acquires a timing constraint preliminarily stored in a storage device step S and causes the synthesizing unit to reflect the number of cycles on the CFG conversion result step S and perform scheduling step S for the CFG conversion result step S resulting in the generation of n n 1 scheduling results R to Rn.

The design support apparatus then sets i 1 step S and determines whether i n is satisfied step S . If i n is not satisfied step S NO the design support apparatus selects a scheduling result Ri step S and performs allocation for the selected scheduling result Ri step S . Consequently an allocation result Ai is obtained as the second synthesis result and is stored in a storage device.

The design support apparatus causes the second calculating unit to calculate second circuit scale information Si for the allocation result Ai step S . The calculated second circuit scale information Si is stored in a storage device. Subsequently the design support apparatus increments i by 1 step S returns to step S and determines whether i n is satisfied step S . If i n is satisfied step S YES the second circuit scale information Si has been calculated for each scheduling result Ri and consequently the process of generating the second synthesis result is ended. The process of generating the first synthesis result and the circuit scale determining process steps S to S will be described.

Following the acquisition of the CFG conversion result step S the design support apparatus causes the generating unit to perform allocation for the clock period step S . As a result allocation result A is obtained as the first synthesis result . The design support apparatus then causes the first calculating unit to calculate the first circuit scale information S for the allocation result A step S .

The design support apparatus sets the index i to 1 step S and acquires second circuit scale information Si for the allocation result Ai calculated at step S step S . The design support apparatus causes the determining unit to calculate the comparison information Ci step S and determine if the comparison information Ci is greater than or equal to the threshold Ct step S . If Ci Ct is not satisfied step S NO the design support apparatus determines the allocation result Ai to be an appropriate allocation result i.e. an allocation result that can be adopted and stores the appropriate allocation result in a storage device step S and proceeds to step S.

If Ci Ct is satisfied step S YES the design support apparatus causes the output unit to output alarm information step S and proceeds to step S. The design support apparatus increments i by 1 at step S step S and determines whether i n is satisfied step S . If i n is not satisfied step S NO the design support apparatus returns to step S where the design support apparatus acquires the second circuit scale information Si for the allocation result Ai calculated at step S step S .

If i n is satisfied step S YES the process of generating the first synthesis result and the circuit scale determining process are ended. Through this procedure the designer can objectively interpret a second synthesis result indicating a large circuit scale. The designer therefore can suppress increases in the circuit scale at circuit design.

The flowchart of depicts an example in which the comparison information Ci is calculated and is compared with the threshold Ct. The first circuit scale information S and the second circuit scale information S however may be compared with each other where no comparison information Ci is calculated. The first circuit scale information S and the second circuit scale information S may be output as is without being compared with each other.

An example of the operation description information of the circuit under design written in SystemC language is described in the embodiment above. However the operation description information of the circuit under design written in C language or C language may also be used.

For example in the operation description information the design support apparatus specifies a space between labels HL REST1 START and HL REST1 END as a reset description range for high level synthesis reset end . In the operation description information the design support apparatus also specifies a space between labels HL SYNTH1 START and HL SYNTH1 END as an operation description range for high level synthesis and determines a space between end statements output and HL SYNTH1 END to be clock end .

As described according to the embodiment the design support apparatus provides an objective index for the circuit scale of a high level synthesis result enabling the designer to check the appropriateness of the circuit scale.

The design support apparatus determines based on the first circuit scale information and the second circuit scale information the appropriateness of a circuit scale indicated by the second synthesis result . In this manner the design support apparatus not only provides an objective index for the circuit scale of a circuit obtained by high level synthesis but also determines the appropriateness of the circuit scale. As a result a second synthesis result indicating an excessively large circuit scale is distinguished from a second synthesis result indicating a circuit scale within an allowable range. Hence the design support apparatus can efficiently sort second synthesis results thereby suppressing increases in circuit scale.

The appropriateness of a circuit scale is determined by using a difference obtained by subtracting the first circuit scale information from the second circuit scale information or a ratio between the first circuit scale information and the second circuit scale information. As a result the appropriateness of the second synthesis result can be evaluated relatively. An objective determination result therefore can be obtained.

Because a circuit having the smallest circuit scale is adopted in the first synthesis result a circuit scale of the second synthesis result is an ideal circuit scale that is not smaller than that of the first synthesis result . As the circuit scale of the second synthesis result becomes closer to the circuit scale of the first synthesis result the second synthesis result becomes more appropriate as a synthesis result for which increases in circuit scale have been suppressed. Hence the circuit scale of the circuit under design can be reduced by adopting a second synthesis result that is determined to be appropriate.

The design support method described in the present embodiment may be implemented by executing a prepared program on a computer such as a personal computer and a workstation. The program is stored on a computer readable recording medium such as a hard disk a flexible disk a CD ROM an MO and a DVD read out from the computer readable medium and executed by the computer. The program may be distributed through a network such as the Internet.

According to one aspect of the present invention an objective index for the circuit scale of a circuit resulting from high level synthesis is provided to enable the appropriateness of the circuit scale to be checked.

All examples and conditional language provided herein are intended for pedagogical purposes of aiding the reader in understanding the invention and the concepts contributed by the inventor to further the art and are not to be construed as limitations to such specifically recited examples and conditions nor does the organization of such examples in the specification relate to a showing of the superiority and inferiority of the invention. Although one or more embodiments of the present invention have been described in detail it should be understood that the various changes substitutions and alterations could be made hereto without departing from the spirit and scope of the invention.

