---

title: Shadow rendering in a 3D scene based on physical light sources
abstract: A method, system, and computer program product/computer readable storage medium provide the ability to render a shadow. A three-dimensional (3D) scene comprising an object is obtained. An external physical light source that is external to the 3D scene is detected by a sensor. An artificial light source is created in the 3D scene that corresponds to the external physical light source. Based on the artificial light source, a shadow of the object is cast. The 3D scene including the object and the shadow are then rendered.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09171399&OS=09171399&RS=09171399
owner: Autodesk, Inc.
number: 09171399
owner_city: San Rafael
owner_country: US
publication_date: 20130312
---
The present invention relates generally to three dimensional 3D rendering of a scene and in particular to a method apparatus and article of manufacture for illuminating and creating shadows based on external light sources present in a user s physical environment.

Stereoscopy is a method for presenting an illusion of 3D depth from images on a two dimensional 2D plane. To create such an illusion two slightly offset images are presented separately to the left and right eye of a viewer. Various techniques may be used to mechanically present the 3D illusion to a user. Some stereoscopic techniques may require a viewer to wear glasses that combine the images from two offset sources and or to filter offset images from a single source separated to each eye. Alternatively in a technique known as autostereoscopy a lightsource may split the images directionally into the viewer s eyes without requiring glasses .

Regardless of the technique used to provide stereoscopy a 3D rendering of a scene stereoscopic or non stereoscopic will not give depth perception if there are no shadows associated with the objects that are being rendered. The human brain analyzes the shadows cast by the objects due to ambient light conditions for depth perception. For example a 3D render of a ball bouncing on a flat surface without the associated shadows does not convey the correct sense of depth as well as motion to the user. Similarly a monster character coming out of a screen in a stereoscopic game would give a more accurate impression of depth to a user only when it projects associated shadows.

Furthermore it is desirable to render a very realistic scene that blends in with the surroundings of the display system. Such a rendering is possible if the illumination and shadows in the scene are cast based on the ambient light sources present in a user s physical environment. The prior art fails to provide such a capability.

Prior art display and rendering systems do not have the capability to detect and utilize external light sources for illumination and generating shadows. Embodiments of the invention attempt to solve the problem by utilizing a system and method consisting of a display system with optical sensors that can detect the ambient and or other light source s and a rendering software capable of creating virtual light sources based on the information from the sensor and data from the display system in the 3D scene.

In the following description reference is made to the accompanying drawings which form a part hereof and which is shown by way of illustration several embodiments of the present invention. It is understood that other embodiments may be utilized and structural changes may be made without departing from the scope of the present invention.

Embodiments of the invention illuminate and create shadows based on external light sources present in a user s physical environment.

In one embodiment the computer operates by the general purpose processor A performing instructions defined by the computer program under control of an operating system . The computer program and or the operating system may be stored in the memory and may interface with the user and or other devices to accept input and commands and based on such input and commands and the instructions defined by the computer program and operating system to provide output and results.

Output results may be presented on the display or provided to another device for presentation or further processing or action. In one embodiment the display comprises a liquid crystal display LCD having a plurality of separately addressable liquid crystals. Alternatively the display may comprise a light emitting diode LED display having clusters of red green and blue diodes driven together to form full color pixels. Each liquid crystal or pixel of the display changes to an opaque or translucent state to form a part of the image on the display in response to the data or information generated by the processor from the application of the instructions of the computer program and or operating system to the input and commands.

In various embodiments of the invention the display is a 3D display device which may comprise a 3D enabled display e.g. 3D television set or monitor a head mounted display e.g. a helmet or glasses with two small LCD or OLED organic light emitting diode displays with magnifying lenses one for each eye active or passive 3D viewers e.g. LC shutter glasses linearly polarized glasses circularly polarized glasses etc. etc. In this regard any technique that may be utilized to view 3D stereoscopic images is represented by display . Further one or more stereoscopic cameras may be configured to communicate with computer to enable a 3D display on 3D display . In addition an optical infrared or other type of sensor may be communicatively coupled to the computer and may be configured on near the display . As described in further detail below such a sensor is configured to detect real external light sources e.g. the sun a light bulb LED light etc. .

The 3D image may be provided through a graphical user interface GUI module A. Although the GUI module A is depicted as a separate module the instructions performing the GUI functions can be resident or distributed in the operating system the computer program or implemented with special purpose memory and processors.

In one or more embodiments the display is integrated with into the computer and comprises a multi touch device having a touch sensing surface e.g. track pod or touch screen with the ability to recognize the presence of two or more points of contact with the surface. Examples of multi touch devices include mobile devices e.g. iPhone Nexus S Droid devices etc. tablet computers e.g. iPad HP Touchpad portable handheld game music video player console devices e.g. iPod Touch MP3 players Nintendo 3DS PlayStation Portable etc. touch tables and walls e.g. where an image is projected through acrylic and or glass and the image is then backlit with LEDs .

Some or all of the operations performed by the computer according to the computer program instructions may be implemented in a special purpose processor B. In this embodiment the some or all of the computer program instructions may be implemented via firmware instructions stored in a read only memory ROM a programmable read only memory PROM or flash memory within the special purpose processor B or in memory . The special purpose processor B may also be hardwired through circuit design to perform some or all of the operations to implement the present invention. Further the special purpose processor B may be a hybrid processor which includes dedicated circuitry for performing a subset of functions and other circuits for performing more general functions such as responding to computer program instructions. In one embodiment the special purpose processor is an application specific integrated circuit ASIC .

The computer may also implement a compiler that allows an application program written in a programming language such as COBOL Pascal C FORTRAN or other language to be translated into processor readable code. Alternatively the compiler may be an interpreter that executes instructions source code directly translates source code into an intermediate representation that is executed or that executes stored precompiled code. Such source code may be written in a variety of programming languages such as Java Perl Basic etc. After completion the application or computer program accesses and manipulates data accepted from I O devices and stored in the memory of the computer using the relationships and logic that were generated using the compiler .

The computer also optionally comprises an external communication device such as a modem satellite link Ethernet card or other device for accepting input from and providing output to other computers .

In one embodiment instructions implementing the operating system the computer program and the compiler are tangibly embodied in a non transient computer readable medium e.g. data storage device which could include one or more fixed or removable data storage devices such as a zip drive floppy disc drive hard drive CD ROM drive tape drive etc. Further the operating system and the computer program are comprised of computer program instructions which when accessed read and executed by the computer cause the computer to perform the steps necessary to implement and or use the present invention or to load the program of instructions into a memory thus creating a special purpose data structure causing the computer to operate as a specially programmed computer executing the method steps described herein. Computer program and or operating instructions may also be tangibly embodied in memory and or data communications devices thereby making a computer program product or article of manufacture according to the invention. As such the terms article of manufacture program storage device and computer program product as used herein are intended to encompass a computer program accessible from any computer readable device or media.

Of course those skilled in the art will recognize that any combination of the above components or any number of different components peripherals and other devices may be used with the computer .

A network such as the Internet connects clients to server computers . Network may utilize ethernet coaxial cable wireless communications radio frequency RF etc. to connect and provide the communication between clients and servers . Clients may execute a client application or web browser and communicate with server computers executing web servers . Such a web browser is typically a program such as MICROSOFT INTERNET EXPLORER MOZILLA FIREFOX OPERA APPLE SAFARI GOOGLE CHROME etc. Further the software executing on clients may be downloaded from server computer to client computers and installed as a plug in or ACTIVEX control of a web browser. Accordingly clients may utilize ACTIVEX components component object model COM or distributed COM DCOM components to provide a user interface on a display of client . The web server is typically a program such as MICROSOFT S INTERNET INFORMATION SERVER .

Web server may host an Active Server Page ASP or Internet Server Application Programming Interface ISAPI application which may be executing scripts. The scripts invoke objects that execute business logic referred to as business objects . The business objects then manipulate data in database through a database management system DBMS . Alternatively database may be part of or connected directly to client instead of communicating obtaining the information from database across network . When a developer encapsulates the business functionality into objects the system may be referred to as a component object model COM system. Accordingly the scripts executing on web server and or application invoke COM objects that implement the business logic. Further server may utilize MICROSOFT S Transaction Server MTS to access required data stored in database via an interface such as ADO Active Data Objects OLE DB Object Linking and Embedding DataBase or ODBC Open DataBase Connectivity .

Generally these components all comprise logic and or data that is embodied in or retrievable from device medium signal or carrier e.g. a data storage device a data communications device a remote computer or device coupled to the computer via a network or via another data communications device etc. Moreover this logic and or data when read executed and or interpreted results in the steps necessary to implement and or use the present invention being performed.

Although the terms user computer client computer and or server computer are referred to herein it is understood that such computers and may be interchangeable and may further include thin client devices with limited or full processing capabilities portable devices such as cell phones notebook computers pocket computers multi touch devices and or any other devices with suitable processing communication and input output capability.

Of course those skilled in the art will recognize that any combination of the above components or any number of different components peripherals and other devices may be used with computers and .

Embodiments of the invention are implemented as a software application on a client or server computer . Further as described above the client or server computer may comprise a thin client device or a portable device that has a multi touch based and or 3D enabled display capability.

Thus one or more optical sensors are configured to detect the color direction and intensity of the light sources e.g. point light spherical light ambient light etc. available in the physical environment.

The data from the light sensors is used by the appropriate application software e.g. game movie DCC digital content creation software or stereoscopic rendering software for rendering the scene . A rendering module in the software creates artificial light sources in the scene which correspond to the same color direction and intensity as the original light sources in the environment. These virtual light sources would then cast shadows for the 3D objects which are to be rendered.

In another example consider a stereoscopic rendering where there are two different external light sources that exists in the physical environment and a ball bouncing in a scene to be stereoscopically rendered. In a real world scenario the ball would cast two shadows due to each light source which is very essential information for the human brain for depth motion perception. In a typical prior art stereoscopic render the light sources in the scene would have no correlation to the physical external lights . With the information from optical sensors a virtual light source with appropriate characteristics mirroring the physical light source is created within the scene . Thus when the ball is rendered its shadows would also be rendered in stereoscopic mode. Such a rendering is a more natural realistic visual appearance to the rendered objects.

In view of the above the visual system of embodiments of the invention may be used for the following 

 1 Rendering 3D objects along with their shadows in an augmented reality scene in regular portable or eye wear display systems 

At step an external physical light source that is external to the 3D scene is detected i.e. via a sensor e.g. optical infrared etc. . Such an external physical light source may be a point light a spherical light an ambient light etc.

At step an artificial light source is created in the 3D scene that corresponds to the external physical light source. The sensor may detect color direction and intensity of the external physical light source and the artificial light source corresponds to the same color direction and intensity.

At step the 3D scene including the object and the shadow is rendered. Such a rendering may be stereoscopic or non stereoscopic. In a stereoscopic projection rendering the object and the shadow are rendered in stereoscopic mode and the shadow simulates a real shadow that would be cast by the external physical light source.

This concludes the description of the preferred embodiment of the invention. The following describes some alternative embodiments for accomplishing the present invention. For example any type of computer such as a mainframe minicomputer or personal computer or computer configuration such as a timesharing mainframe local area network or standalone personal computer could be used with the present invention.

The foregoing description of the preferred embodiment of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description but rather by the claims appended hereto.

