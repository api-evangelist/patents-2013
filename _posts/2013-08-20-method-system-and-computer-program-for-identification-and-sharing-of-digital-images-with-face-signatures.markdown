---

title: Method, system, and computer program for identification and sharing of digital images with face signatures
abstract: Methods and systems are provided for sharing a digital image depicting one or more faces. The method may include linking a plurality of computer terminals to a computer network, each computer terminal associated with an individual; receiving a digital image at at least one of the computer terminals; executing a face recognition routine on the digital image, the face recognition routine detecting at least one face in the digital image, each detected face corresponding to a person, the face recognition routine recognizing at least one of the persons as being one of the individuals; and for each individual recognized in the digital image by the face recognition routine, initiating dissemination of the digital image to the computer terminal associated with respective individual whose face is recognized in the digital image.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09152849&OS=09152849&RS=09152849
owner: APPLIED RECOGNITION INC.
number: 09152849
owner_city: Burlington, Ontario
owner_country: CA
publication_date: 20130820
---
This application is a divisional of U.S. patent application Ser. No. 12 811 240 filed Jun. 30 2010 and entitled METHOD SYSTEM AND COMPUTER PROGRAM FOR IDENTIFICATION AND SHARING OF DIGITAL IMAGES WITH FACE SIGNATURES which is a National Stage entry from PCT patent application no. PCT CA2008 002276 filed Dec. 30 2008 and claims priority from U.S. provisional application No. 61 017 895 filed Dec. 31 2007 of which each is hereby incorporated by reference in its entirety.

The present invention relates to distribution of images to targeted individuals. More particularly the present invention relates to face detection and face recognition in digital images and distribution of the images to individuals appearing in the images using social network services and peer to peer networks.

Social networks presently exist as a means to connect individuals using a website. The following definition exists in the PCMAG.COM encyclopedia for social network 

Many social network sites allow users to upload and share photos. Some also incorporate a feature for tagging photos to identify the names of people faces in the photos FACEBOOK for example provides this feature . Based on user surveys the majority of respondents state that the tagging effort is manual and very time consuming. Also for privacy reasons many users do not upload all of their digital photos to the sharing website. It is also very time consuming and bandwidth intensive to upload thousands of photos. So while a user of a social network site may have 10 000 digital photos on their local computer they only upload one or two hundred to share with their friends. This is based on user surveys conducted by Applied Recognition Inc. in September 2007.

There are also websites that allow registered users to upload digital photos and digital video and store them on a website for sharing purposes. These are dedicated to this purpose. Examples of these sites include FLICKR and PHOTOBUCKET . The drawback with these sites is that all tagging of photos to identify friends is manual and time consuming PHOTOBUCKET does not allow people tagging in a photo. With FLICKR if an average photo contains two people then it may take 10 15 seconds per photo to tag the people. When that time is multiplied by 100 or 1000 it becomes too time consuming and the average person just will not perform tagging.

Rapid growth in photo taking devices is occurring today with the incorporation of digital cameras in most modern cell phones. In fact more cameras are sold via cell phones today than all dedicated digital cameras combined. This is causing a proliferation in the number of digital images that are uploaded and stored on home computers. Because the average number of digital images exceeds 1000 based on our surveys the effort is too great to manually tag and properly organize the images for the majority of people.

One company RIYA www.riya.com created a product that is web based for identifying faces in digital photos. This product involved the download of a software module for identifying faces in photos on the user s local computer before uploading these photos to the remote RIYA web based server where the faces were compared with other faces to find matches. This product is a prototype and as such has no automatic photo sharing features based on recognition. It also has no features for enabling the user to correct the inevitable errors that occur in any automated face detection and recognition method.

In one aspect of the present invention a method for recognizing one or more faces in a digital image is provided the method characterized by a generating one or more face coordinates corresponding to one or more candidate regions for one or more faces b generating eye coordinates based on the face coordinates c detecting each face using one or more projection images defined by the face coordinates and the eye coordinates and d comparing each projection image with one or more known projection images wherein a similarity threshold is provided for defining a best match between the projection image and the known projection images.

In another aspect of the present invention a method for sharing a digital image depicting one or more faces is provided the method characterized by a linking a plurality of computer terminals to a computer network each computer terminal associated with an individual b linking the digital image to at least one of the computer terminals c enabling at least one of the computer terminals to initiate a face recognition routine on the digital image the face recognition routine producing a list of one or more persons whose faces are depicted in the digital image at least one of the persons being one of the individuals and d enabling at least one of the computer terminals to initiate a sharing routine for disseminating the digital image to the computer terminals associated with the one or more persons.

In yet another aspect of the present invention a method for providing secure targeted advertising is provided the method characterized by a tracking one or more demographic properties associated with an individual registered to a computer program b retrieving from a first source a list of advertising pointers associated with one or more advertisements targeted based on the one or more demographic properties c retrieving from a second source the one or more advertisements d deleting the one or more demographic properties from the first source and e presenting the advertisements to the individual.

In a further aspect of the present invention a system for recognizing one or more faces in a digital image is provided the system characterized by a one or more face coordinates corresponding to one or more candidate regions for one or more faces b eye coordinates generated based on the face coordinates c one or more projection images defined by the face coordinates and the eye coordinates and d a similarity threshold for defining a best match between each projection image and one or more known projection images the best match determining an identity corresponding to each of the one or more faces.

In a still further aspect of the present invention a system for sharing a digital image depicting one or more faces is provided the system characterized by a a plurality of computer terminals linked to a computer network each computer terminal associated with an individual b a digital image operable to be linked to at least one of the computer terminals c a face recognition routine operable to be initiated by at least one of the computer terminals the face recognition routine producing a list of one or more persons whose faces are depicted in the digital image at least one of the persons being one of the individuals and d a sharing routine operable to be initiated by at least one of the computer terminals the sharing routine disseminating the digital image to the computer terminals associated with the one or more persons.

In yet a further aspect of the present invention a system for providing secure targeted advertising is provided the system characterized by a one or more demographic properties associated with an individual registered to a computer program b a first source operable to provide a list of advertising pointers associated with one or more advertisements targeted based on the one or more demographic properties c a second source operable to provide the one or more advertisements d a means for deleting the one or more demographic properties from the first source and e a means for presenting the advertisements to the individual.

In a further still aspect of the present invention a computer program product for recognizing one or more faces in a digital image is provided the computer program product characterized by a a computer readable medium including software instructions and b the software instructions for enabling the computer to perform predetermined operations the predetermined operations including the steps of i generating one or more face coordinates corresponding to one or more candidate regions for one or more faces ii generating eye coordinates based on the face coordinates iii detecting each face using one or more projection images defined by the face coordinates and the eye coordinates and iv comparing each projection image with one or more known projection images wherein a similarity threshold is provided for defining a best match between the projection image and the known projection images.

In another aspect of the present invention a computer program product for sharing a digital image depicting one or more faces is provided the computer program product characterized by a a computer readable medium including software instructions and b the software instructions for enabling the computer to perform predetermined operations the predetermined operations including the steps of i linking a plurality of computer terminals to a computer network each computer terminal associated with an individual ii linking the digital image to at least one of the computer terminals iii enabling at least one of the computer terminals to initiate a face recognition routine on the digital image the face recognition routine producing a list of one or more persons whose faces are depicted in the digital image at least one of the persons being one of the individuals and iv enabling at least one of the computer terminals to initiate a sharing routine for disseminating the digital image to the computer terminals associated with the one or more persons.

In yet another aspect of the present invention a computer program product for providing secure targeted advertising is provided the computer program product characterized by a a computer readable medium including software instructions and b the software instructions for enabling the computer to perform predetermined operations the predetermined operations including the steps of i tracking one or more demographic properties associated with an individual registered to a computer program ii retrieving from a first source a list of advertising pointers associated with one or more advertisements targeted based on the one or more demographic properties iii retrieving from a second source the one or more advertisements iv deleting the one or more demographic properties from the first source and v presenting the advertisements to the individual.

In this respect before explaining at least one embodiment of the invention in detail it is to be understood that the invention is not limited in its application to the details of construction and to the arrangements of the components set forth in the following description or illustrated in the drawings. The invention is capable of other embodiments and of being practiced and carried out in various ways. Also it is to be understood that the phraseology and terminology employed herein are for the purpose of description and should not be regarded as limiting.

The present invention in one aspect thereof provides a networked computer architecture enabling the automatic distribution of images relating to a plurality of individuals operating computer systems on the network.

The present invention in another aspect thereof provides a computer program operable to enable each of the individuals to interface with the networked computer architecture herein provided for sharing information including images. The computer program enables the individuals to upload images including images having depictions of the faces of one or more persons. The computer program may perform a face detection technique to detect the one or more faces in the image which may result in the generation of one or more face signatures each face signature corresponding to one of the faces. The computer program may then access a database wherein the database links face signatures with a list of known persons each known person being associated with one or more face signatures. Each detected face signature may be provided to the individual as associated to the corresponding known person or where the face signature is not associated with any known person that information can be provided by the individual. The individual may be provided a means to confirm the association between a face signature and a known person.

The present invention in yet another aspect thereof provides a novel method for generating face signatures based on faces depicted in images. Further provided is a means for reducing error rates in associating recognized face signatures with one or more face signatures linked to a database.

The present invention in a further aspect thereof enables the automatic selective distribution of images depicting faces. If the faces detected in the images are associated with a person that interfaces with the networked computer architecture herein provided the computer program herein provided may automatically transmit the image to the person s computer for presentation to the person. It should be noted that the terms photo and image are used interchangeably herein.

The present invention in a further still aspect thereof provides a novel advertising method that is operable with the networked computer architecture herein provided.

The present invention in one aspect thereof provides a networked computer architecture enabling the automatic distribution of images relating to a plurality of individuals operating computer systems on the network. illustrates an example implementation of the networked computer architecture of the present invention. A plurality of individuals may each connect to the Internet through computer terminals operable to access the Internet . The Internet connection enables the transmission and reception of digital data from Internet connected devices each of which may be operable as provided below.

The present invention in another aspect thereof provides a computer program operable to enable each of the individuals to interface with the networked computer architecture herein provided. illustrates an example configuration of the system of the present invention. The user of the invention may register download and install the computer program to its computer system .

The computer program may in one aspect thereof allow the user to invite and establish relationships with other users of the invention. The computer program may in another aspect thereof request ads from a set of advertising web servers that deliver ads to the computer program for display to the user on various portions of a graphical user interface GUI . The computer program may in yet another aspect thereof transmit photos and metadata related to those photos to other users or to third party websites such as FLICKR and FACEBOOK . These third party websites may encourage the use of their websites by publishing application programming interfaces API s to enable connection from client software or other web based applications to their service.

The GUI the processing engine and the database may be provided on one or more devices. illustrates one aspect of the present invention wherein a remote web browser or mobile device is enabled to access a proxy server providing a connection to the functions of the present invention. The GUI may be provided on a mobile device such as a PDA or cell phone and transmit information back and forth to a remote engine running on a website server or a user s desktop or laptop computer. In such an implementation the PDA or cell phone may be provided with a facility for browsing of images and a facility for uploading images that are captured using a camera incorporated on the device. Uploading may be performed in accordance with the general uploading processes described more fully below.

The networked computer architecture may also include one or more servers to enable techniques described herein. For example the advertising method provided herein may be enabled by the servers. The servers which may be provided on one or more server systems may include server programs that enable the functions of the servers including 

Referring again to a first user of the invention may download the computer program from a website or be provided with any other installation means for the installing the computer program. The first user may install the computer program which may enable the system of the present invention on their laptop or desktop computer system running an operating system such as the MICROSOFT WINDOWS APPLE or LINUX operating system .

The first user may define friends in a peer group by specifying their email address to the invention. The computer program may subsequently send an email invitation requesting that a friend also download or otherwise enable the installation of the computer program. After installation a corresponding computer program for the friend may present to the friend a pending request to join the peer group started by the first user . The friend who may now be a second user may be required to approve the connection to the peer group. Once approved the computer program run by the first user and the second user can now exchange photos as well as metadata about those photos and about known persons in accordance with the image sharing methods herein described.

The peer group may be expanded by the first user or the second user by inviting more people to join the peer group. The second user may also create a new peer group that the first user is not part of and expand that peer group separately. There may be a many to many relationship between people and peer groups. Thus the first user can be a member of multiple peer groups and the second user can be a member of multiple peer groups. This enables the easy sharing of photos with other users based on peer group membership.

As described more fully below the present invention in one aspect thereof enables a known person list. Known persons may optionally be added to one or more peer groups as described above.

Peer groups may enable sharing of photos metadata about photos and known persons. The GUI may enable creation modification and deletion of peer groups by a user. The GUI may also enable association of a face image or thumbnail of a known person into an existing peer group for example by enabling a user to drag the face image or thumbnail over an area of the interface such as a field or icon representing the peer group.

The computer program may generate an invitation each time a friend is added to a peer group. Alternatively the user may manually add an invitee s metadata to the peer group if the invitee is not part of the known person list. The invitation to an individual may be sent to the invitee via email. For individuals that have installed the computer program of the present invention on their computer system the email once received may prompt the invitee to accept the invitation. Optionally the individual will be required to enter a code in the computer program to accept the invitation.

If the friend has not yet installed the computer program of the present invention on their computer system the email once received may include a link to download or otherwise enable installation of the computer program and may provide directions for installing it on a computer system. Following successful installation of the computer program the new user may be presented with the invitation and may accept the invitation to join the peer group in accordance with the steps described above.

Once the invitation is accepted by the invitee the invitee may be added to the peer group. The update may be disseminated over the networked computer architecture to enable the corresponding peer group information to be updated in the computer program of each person associated with the peer group.

In accordance with the face detection technique described below the peer group may enable automatic selective dissemination of information across the networked computer architecture. The dissemination technique is also more fully described below.

The present invention in one aspect thereof provides a novel method for generating face signatures based on faces depicted in images. illustrates a face recognition method in accordance with the present invention in one aspect thereof. A user may provide images to a computer system operable to enable the execution of a computer program. The computer program may monitor file folders associated with the computer system via operating system notifications that may be generated when new files are added or existing files are modified. When new images are found they may be queued for processing.

Faces in the photos may be located by using any one of multiple techniques that may include generating face coordinates which may define a bounding box around the face determining eye coordinates based on the face coordinates and creating face signatures for the face based on the face and eye coordinates and by using a face signature technique. The face signature technique may be Principal Component Analysis PCA which is known to those skilled in the art. The face signatures may be compares to known face signatures and the photos may be automatically and selectively disseminated to other users . Further details of these aspects of the invention are provided below.

The graphical user interface GUI for the invention may display the face and eye locations on each image . As described more fully below the present invention in one aspect thereof provides a list of known persons. If the face signature corresponding to a detected face is associated with a person listed in the known persons list the GUI may indicate such an association to the user using a graphic notation on or around the image. Otherwise the GUI may indicate that there is no such association to the user using another graphical notation on or around the image. In the example depicted by the known faces may be identified with check marks and the unknown faces with the symbol X .

Initially all faces may be unknown to the system until the user trains the invention to recognize faces. The training method may involve the user. The user via the GUI of the invention may use the mouse or other input device to identify the face as belonging to a specific person by clicking anywhere on the visual bounding box surrounding the face and dragging the face over top of the person s name or an icon representing the person . Alternatively the user may drag the icon representing that person over top of the target face. In yet another alternative the user may click anywhere on the visual bounding box and select a function for identifying a previously unknown face which may enable the user to enter data related to that person such as name email address and other details which may collectively be referred to as metadata corresponding to the person. This training step may be performed once for each known person. The signature that was created for the face may then enable comparison of all of the unknown face signatures in the face database with the person identified. Both the method for comparison and the method of face detection eye detection and face recognition are described more fully below.

The present invention in a further aspect thereof facilitates an optimal training stage by ordering the unknown faces such that the user can identify groups of detected faces that are most likely associated with a single individual. For example an algorithm could be used to cluster similar faces together based on face signatures. The similarity may be based on certain aspects of their face signatures even when the faces are not already associated with an individual in the face database. Thus a user can identify a cluster of faces as belonging to a particular known person and thereby optimally carry out the training method described above.

If there is an association between the face and a known person a further association may be created in the database between the face signature and the known person. Every previously identified face for every known person may be compared with each new face processed by the system. When viewing the faces related to a specific known person any suspected matches generated by the invention may be displayed and the user may be asked to confirm that the matches are correct.

Over time as the number of identified faces increases the overall accuracy of matching new faces with the correct person may increase since there will typically be many different views of a person with each new face. In accordance with the method of comparing face signatures provided herein the number of false positives therefore typically decreases over time.

The present invention in another aspect thereof provides a computer program operable to enable each of the individuals to interface with the networked computer architecture herein provided for sharing images. further illustrates the system of the present invention. A user may capture digital images and periodically copy them from one or more image device storage systems to a computer system . The user may configure the computer program to monitor specific file folders on the computer system for new images by inputting the names of the file folders to the computer program using a GUI as described above.

In accordance with the novel method for face recognition provided by the present invention the present invention in one aspect thereof enables the automatic selective dissemination among a peer group to users whose faces are depicted in images. This is more fully described below.

The present invention in one aspect thereof provides a novel technique for optimizing face detections in accordance with other aspects of the present invention. illustrates potential methods of correcting errors that may result from the automatic face detection eye detection and face recognition steps. The invention uses a novel way of involving the user through the GUI to correct these inevitable errors.

Another category of errors is false negatives. There may be two situations categorized as false negative errors which are illustrated in 

The next time the second user accesses the computer program on their computer system it may receive a confirmation request showing a reduced image of the original photo and the associated metadata. The second user may be prompted whether they would like a copy of the photo on its computer system . If the second user responds affirmatively then the system may copy the full image across the Internet from the first user s computer system to the second user s computer system along with the metadata for the photo and the known faces and signatures from the photo.

Another novel aspect of the present invention uses existing social network service and web based photo storage sites to share photos with peer group members. The invention may transmit a single photo or group of photos to a target web based service. The transmitted photos may already contain metadata from the invention about the people that are in the photos. For example the social networking site FACEBOOK offers the facility to upload photos share photos and to manually tag photos to denote which friends are in the photos. The tagging process is manual and time consuming. The present invention may automate such an upload process and eliminate the need to manually tag the photos thereby offering a significant benefit to the social networking user. The present invention may be equally adaptable to other social network service and web based photo storage sites. As described above a user may also upload photos directly from a mobile device that incorporates a camera across the Internet.

Yet another novel aspect of the present invention is that the initial list of known persons can be loaded from the user s social networking account to save further time in configuring the system provided by the present invention.

The example depicted in shows face images for known persons plus the checkboxes for applying Boolean searching such as AND OR and NOT selections associated with names of known persons or metadata related to images. A novel feature of the invention is the ability to select photos in a visual manner by allowing the user to click on a thumbnail view of the faces of known persons and applying Boolean operations for each face enabled by checkboxes. This aspect of the GUI enables the creation of an album by combining various search criteria and filters that are applied against the total photo and face database.

An alternative method of selecting photos for an album may provide the user the ability to drag and drop individual photos or groups of photos over top of the name of the album or to otherwise associate the photos with the album using the GUI.

An album may be a group of photos that are saved as a logical entity under the name of the album. The user may specify via the GUI that it wants to send the album to various target file types or locations including a slide show MICROSOFT POWERPOINT or other presentation computer programs ADOBE PDF or other document file a web based sharing site such as FLICKR or FACEBOOK or a third party printing service.

The present invention in a further still aspect thereof provides a novel advertising method that is operable with the networked computer architecture herein provided.

By separating the web based servers that perform the ad matching process from the servers that actually deliver the ads and by not storing the personal demographic data of the user on either of the web based servers the personal information about the user is significantly more secure than it otherwise would be. The ad delivery servers may store information about ads served for billing purposes but there may be no personal information included in that data. This is a novel implementation for serving ads to any web browser or software program in a secure fashion using demographic data.

Another capability of the present invention may enable a computer program to receive digital face images or signatures from the central registration server. For example an organization seeking to find an individual such as a missing child or a wanted criminal may post the individual s face data. Those users that have opted to share their face database may download the data enabling an automatic comparison of the face data with their face database. The organization may be alerted if a match is found between the target individual and a known person for a specific user. This could enable the organization to determine a recent or current location of the individual. It could also enable the organization to determine the name of an individual since the individual s name may be listed in one or more of the user s known persons list.

Yet a further embodiment provided by the present invention enables an individual to find other persons with similar facial features as themselves. Such an application may be useful for a person to find their twin for example. In this embodiment a user may submit a photo including an image of their face from which the present invention may generate a face signature. The face signature may then be compared to other individuals face signatures that have been previously uploaded. Based on a predetermined similarity threshold one or more similar faces may be reported to one or all of the individuals whose faces match. A system in accordance with this embodiment may provide a means for a user to approve contact with others. Matched individuals could choose to send a message to one another if they have specified their approval for such contact. A similar embodiment could be deployed as part of a dating service to match people based on looks.

The present invention in yet another aspect thereof provides a novel method for generating face signatures based on faces depicted in images. The face signatures may be generated by using a technique that includes the steps of face detection eye detection and face recognition.

The present invention in one aspect thereof provides a method for utilizing a texture based face detection algorithm as a base method for face detection. One example of a texture based face detection algorithm is the open source library of routines known as OPENCV .

The texture based face detection algorithm may have a low true positive rate for specific facial poses for example rolled frontal faces. This may be due to the texture pattern being trained on frontal face images which differ from the varied facial poses found in normal digital photos. In reality having a mismatch between the texture pattern used to train the face detection algorithm and the type of poses in the target photos on which the algorithm is applied would result in a higher percentage of errors. Two well known challenges presently faced in face detection include decreasing false negative errors in the case of rolled frontal faces and reducing false positive errors while not increasing false negative errors.

The present invention enhances the texture based face detection by applying novel techniques involving three steps to improve the accuracy of the face detection process. In the first step a novel application of the known skin color ratio test on a texture based face detector is provided to improve the accuracy of the detector. In the second step a novel method for reducing false positive face objects is provided by reducing the size of detected face object regions to a predefined size. In the third step a novel face orientation compensation method is provided.

In one particular implementation of the texture based face detection method in the first step the texture based face detector may initially be set for a high target true positive rate which has a corresponding high false positive rate. The texture based face detector may be run with the entire photo image as input. The results from this run may give a list of potential face objects in the photo. For a color photo a skin color detection test may be performed on the potential face objects to reduce the false positive rate. This skin color test may compare the ratio of the face object area containing skin color to the total area of the object. If the ratio does not exceed a pre determined threshold then the potential face object may be skipped .

In the second step detected face object regions that result from the first step may be reduced to a predefined size such as 44 by 44 pixels . On these reduced regions the texture based face detector may be run again . The goal of this step is to reduce false positive face objects. By running on a small size such as 44 by 44 pixels input region false positive errors from incorrect texture patterns from non faces may be reduced while true positive texture patterns may be preserved. This may result in a reduction in the false positive rate of face detection while preserving the true positive rate. Face objects that are deemed to be faces in the second step may be accepted as true faces. Those that do not pass this second step may be passed to a third step.

In the third step a face orientation compensation method is provided. In the second step described above in which face detection is performed on smaller regions of the image the true positive rate may be reduced in the case of rolled faces. The texture pattern in rolled faces may be deemed to be a non face by the face detector due to the size reduction applied in the second step. To preserve the true positive rate in rolled face cases face orientation compensation may be performed together with face detection. In this method the local image region is rotated with an incremental angle and each angle instance may be run through the face detector. One example implementation would rotate the image 2 degrees starting at 20 degrees from the vertical axis and repeating the rotation through 20 degrees from the vertical axis. If rotated face regions are recognized and exist in instances with consecutive incremental angles then the local image region may be determined to be a true face.

These modifications to a texture based face detection algorithm may significantly reduce the false positive error rate.

Furthermore if the face was detected in the third step of the face detection method on a specific angle instance then the angle of rotation may be applied to the eyemap region to enable a more accurate selection of the eye locations.

Once the eyemap region has been cropped the eyemap region may then be re sized to a fixed size such as 80 80 pixels so that a fixed template color variation method may be applied to determine the candidate eye locations. This method may be based on the darker intensity of the pupil relative to the surrounding area of the eyemap region.

The middle of the color intensity image may be set to zero black in the intensity map to remove potential pupil candidates that typically result from light reflecting off lenses and the frames of glasses. illustrates this process.

The color variation image may be obtained from the color intensity image and may then be passed through a threshold filter so that only a small percentage of the eye region is white for example a 2 threshold may be applied . Next a best fit method may be applied to choose the eye locations with the highest intensity of color variation left and right side . The best candidate pupil location coordinates may be passed along to the face recognition method of the present invention.

The present invention may employ PCA in a novel way that overcomes its traditional issues with respect to high sensitivity to subject lighting and pose given that personal photos may have little variation in pose since most subjects may tend to look directly at a camera. The present invention may take advantage of the fact that sets of photos depicting particular persons may be taken over a variety of pose and lighting conditions. The present invention provides a method of aggregating the comparison between the target unknown face and this plurality of faces associated with each known person.

Pre processing may first be applied to the image. The face region and eye coordinates provided as input to the face recognition phase may be used to normalize the face region. The normalization process may include translating rotating and scaling the face region to a predetermined template size. The normalization process may use the eye coordinates as reference points such that the face region image is adjusted to place the eye coordinates on specific image pixels. A standard fixed masking process potentially limiting the face region to the area inside an ellipse may then be applied to the image to filter out non face portions. A flattening process involving running a two dimensional linear regression on the intensity of the pixels in the face region may be used to ensure pixel intensity is spatially uniform across the image. Finally a histogram image equalization an image processing method known to those skilled in the art whereby the contrast of an image is adjusted using the image s histogram may be performed in the greyscale domain.

Projection may then be applied to the image. The resulting pixels of the normalized face region may be passed through a PCA based formula to create a PCA vector that is used as the face signature by the invention. The PCA vector may comprise a projection image resulting from principal components extracted from a large set of generic images.

The face signature created from this method may be an array from the PCA vector of real numbers of a given dimensionality. Although the exact dimensionality of the vector space may be determined adaptively with its maximum value set to the value capturing for example 95 of the input image energy the default value used may be a dimensionality in the range of 50 to 100.

Finally looping may be applied to match the unknown face with a known person. Each face signature represented as an array of numbers may be mathematically compared to any other face signature using linear or non linear classification logic to determine a distance value . For example two signatures may be compared by computing a normalized inner product distance.

To compare a face to all of the faces associated with a known person all of the individual one to one comparisons may be made and then either all of the results may be used in the next step or a set of best matches as determined by comparison to some threshold may be used. The threshold chosen may be chosen such that on average half of the distances obtained when comparing a face to a non matching person are kept.

Some form of aggregation may be used to combine the set of distance values obtained in the previous step to determine the distance between the face and a known person. This aggregation may be the computation of the geometric mean of the distance values . The geometric mean may be an averaging technique similar to an arithmetic mean but it may be computed by multiplying the N numbers to be averaged and then taking the Nroot of the product as the desired average. The closest match between the face and each known person may be found by computing this aggregate distance between the face and each known person in the database and choosing the minimum distance.

Finally the closest match distance may be compared against a static or dynamically determined threshold to reduce the rate of false positive matches. If a dynamically chosen threshold is used this threshold may be determined by first assuming the aggregate distance values obtained when comparing a face to a non matching person having N associated faces are normally distributed for each possible value of N and then using the inverse cumulative normal distribution function to compute a threshold which ensures that on average a fixed maximum number of or fixed ratio of the unknown faces are falsely matched to a known person. This threshold may vary from person to person as the number of faces N associated with each person changes. The advantage of this dynamic threshold calculation includes that the fixed maximum number or ratio may be kept as small as possible to limit false positive matches while maintaining an acceptable level of true positive matches for the user.

As the number of face signatures grows that are linked to known people in the local face database the accuracy of the invention may increase in detecting known people automatically in future photos that are processed. This is a novel feature of this system.

The invention may learn a face by determining the closest match for a previously identified face from the group of known persons. An advantage of the present invention is that as the number of face signatures linked to known persons in the local face database grows the accuracy of the invention may increase in detecting known persons automatically in future photos that are processed.

