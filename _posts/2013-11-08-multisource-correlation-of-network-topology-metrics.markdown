---

title: Multi-source correlation of network topology metrics
abstract: Various exemplary embodiments relate to a method of determining a cost for a routing path in a network. The method includes: receiving a first metric for a plurality of links in a network, the first metric being a routing metric used to determine routing in the network; determining a routing path including a subset of the links based on the first metric, the routing path having an initial cost based on the first metric; receiving second metric information including a second metric that is different from the first metric; and calculating a corrected cost for the routing path based on the second metric.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09215164&OS=09215164&RS=09215164
owner: Alcatel Lucent
number: 09215164
owner_city: Boulogne-Billancourt
owner_country: FR
publication_date: 20131108
---
Communications networks are often designed to be transparent to end users. The network topology including intermediate nodes in a service provider s network is often hidden.

The Internet Engineering Task Force has created a working group for application layer traffic optimization ALTO . One of the goals of ALTO is to expose network topology to allow applications to make smarter decisions. The IETF working group has published requests for comments RFCs 5693 and 6708 defining various aspects of ALTO.

A brief summary of various exemplary embodiments is presented. Some simplifications and omissions may be made in the following summary which is intended to highlight and introduce some aspects of the various exemplary embodiments but not to limit the scope of the invention. Detailed descriptions of a preferred exemplary embodiment adequate to allow those of ordinary skill in the art to make and use the inventive concepts will follow in later sections.

Various exemplary embodiments relate to a method of determining a cost for a routing path in a network. The method includes receiving a first metric for a plurality of links in a network the first metric being a routing metric used to determine routing in the network determining a routing path including a subset of the links based on the first metric the routing path having an initial cost based on the first metric receiving second metric information including a second metric that is different from the first metric and calculating a corrected cost for the routing path based on the second metric information.

In various embodiments the second metric is a routing metric used to determine routing for a second plurality of links in the network.

In various embodiments the first metric is an interior gateway protocol IGP routing cost and the second metric is external gateway protocol EGP autonomous system AS path length.

In various embodiments the method further includes receiving a third metric the third metric being a routing metric used to determine routing for a second plurality of links in the network and updating the routing path based on the third metric to include the second plurality of links wherein calculating a corrected cost for the routing path based on the second metric includes calculating a corrected cost for the routing path based on the second metric and the third metric.

In various embodiments the step of calculating a corrected cost for the routing path based on the second metric includes determining a total value of the second metric information associated with the subset of the links.

In various embodiments the method further includes determining that the second metric is unavailable for a missing link of the first plurality of links and requesting second metric data for the missing link.

In various embodiments the method further includes determining that a shortcut second metric is available for two non adjacent vertices in the routing path and substituting the shortcut second metric for a plurality of individual second metrics associated with links between the two non adjacent vertices.

In various embodiments the first metric and the second metric information are received from different sources.

In various embodiments the method further includes receiving third metric information including a point to point metric and determining that the third metric information corresponds to a portion of the routing path wherein calculating a corrected cost for the routing path based on the second metric includes calculating a corrected cost for the routing path based on the second metric and the third metric.

In various embodiments the method further includes generating a network topology including a corrected cost for a plurality of routing paths and exposing the network topology to an external application.

Various exemplary embodiments relate to the above method encoded on a non transitory machine readable storage medium as instructions executable by a processor.

It should be apparent that in this manner various exemplary embodiments enable generating a network topology including total costs for routing paths. In particular by correlating a routing metric with a recessive metric the total cost may accurately account for recessive metrics in the network topology.

The description and drawings illustrate the principles of the invention. It will thus be appreciated that those skilled in the art will be able to devise various arrangements that although not explicitly described or shown herein embody the principles of the invention and are included within its scope. Furthermore all examples recited herein are principally intended expressly to be for pedagogical purposes to aid the reader in understanding the principles of the invention and the concepts contributed by the inventor s to furthering the art and are to be construed as being without limitation to such specifically recited examples and conditions. Additionally the term or as used herein refers to a non exclusive or i.e. and or unless otherwise indicated e.g. or else or or in the alternative . Also the various embodiments described herein are not necessarily mutually exclusive as some embodiments can be combined with one or more other embodiments to form new embodiments.

Network may be a network controlled by a network service provider. The network may provide various network services to subscribers such as individuals households and businesses. The network may be connected to additional networks such as networks thus forming an internet. The network may include routers network management system topology manager server and application layer topology optimization ALTO server .

Routers may include network routers switches hubs or any other hardware for directing network communications to the correct destination. Routers may perform particular functions based on their configuration and location in the network. For example routers and may be edge routers located on the edge of the sub network and connected to sub networks or respectively. Routers and may receive routing information from sub networks or . For example routers or may receive exterior gateway protocol EGP information regarding an exterior sub network or . Such information may include for example routing costs or other metrics for reaching network nodes such as node and . In various embodiments the EGP information may be border gateway protocol BGP information. Routers or may be an access router that is connected to an access network for user equipment and respectively. Router may be a centrally located core router. Router may provide policy functions.

Network management system may be a network node that receives network management information from a plurality of network nodes such as routers . Network management system may collect various metric regarding the performance of network or sub network . Network management system may be able to request additional network metrics from network nodes. For example network management system may conduct a test to measure a metric such as network delay.

Topology manager server may be a network node that analyzes network information and generates a network topology. Topology manager server may collect information from individual network nodes including routers or obtain information from network management system . Topology manager server may analyze and correlate a plurality of metrics and provide a total cost for a network path. Topology manager server may expose the network topology to subscribers applications or network operators to provide efficient usage of network or sub network . In various embodiments topology manager server may provide the network topology to ALTO server . In various embodiments topology manager server may be integrated with network management system or ALTO server . The integrated network nodes may be physically co located or share physical resources.

ALTO server may be a network server configured to provide a network topology information to client nodes. ALTO server may provide information according to Internet Engineering Task Force IETF requests for comments RFC 5693 6708 or any subsequent versions of the ALTO requirements. In various embodiments ALTO server may receive a network topology from topology manager server and use the received topology to provide information.

User equipment may include any network device connected to network . For example user equipment may include end user subscriber equipment such as personal computers servers laptop computers tablets smart phones televisions set top boxes video game consoles or any other device accessing network . User equipment may also include devices connected by businesses. For example user equipment may include application servers that provide services accessible to other network devices. User equipment may obtain network topology information from ALTO server or topology manager server . The network topology information may allow a user device to select services that will optimize an application. For example a video game client or server may use network topology information to optimize connections for an interactive video game. A video game client may select a server that is indicated to have the best network connection. As another example a cloud service provider may use the network topology to minimize data transfer costs.

The processor may be any hardware device capable of executing instructions stored in memory or storage . As such the processor may include one or more microprocessors field programmable gate arrays FPGAs application specific integrated circuits ASICs or other similar devices.

The memory may include various memories such as for example L1 L2 or L3 cache or system memory. As such the memory may include static random access memory SRAM dynamic RAM DRAM flash memory read only memory ROM or other similar memory devices.

The user interface may include one or more devices for enabling communication with a user such as an administrator. For example the user interface may include a display a mouse and a keyboard for receiving user commands.

The network interface may include one or more devices for enabling communication with other hardware devices. For example the network interface may include a network interface card NIC configured to communicate according to the Ethernet protocol. Additionally the network interface may implement a TCP IP stack for communication according to the TCP IP protocols. Various alternative or additional hardware or configurations for the network interface will be apparent.

The storage may include one or more machine readable storage media such as read only memory ROM random access memory RAM magnetic disk storage media optical storage media flash memory devices or similar storage media. In various embodiments the storage may store instructions for execution by the processor or data upon with the processor may operate. As shown the storage stores data collection instructions for enabling the collection of data from various sources and correlation instructions for enabling the correlation of routing metrics and recessive metrics. Additionally the storage may store cost calculation instructions for determining costs based on a network topology or exposure instructions for enabling the controlled exposure of a network topology and calculated costs.

Data received from various network nodes may be classified into various types. One type of data received at topology manager server may be routing metrics. A routing metric may be any metric used by routers for determining a routing path for a packet. In various embodiments a interior gateway protocol IGP or exterior gateway protocol EGP link weight may be used as a routing metric. A routing metric may also be referred to as a dominant metric. Another type of data received at topology manager server may be a recessive metric. As used herein a recessive metric may be a metric that is not used by routers for determining a routing path for a packet. A recessive metric may still provide important information regarding the network topology. Recessive metrics may include operations administration and maintenance OAM measurements. Recessive metrics may be measured as point to point measurements. For example recessive metrics may include latency packet loss rate capacity available bandwidth load or other metrics. The classification of a metric may depend on the configuration of the particular network in particular on the metrics used for determining a routing path.

In step topology manager server may preprocess received data. Topology manager server may ensure that expected data is received from various network nodes. Topology manager server may compare data received from different nodes and determine whether the data is consistent.

In step topology manager server may correlate a plurality of metrics to provide a total cost metric. In various embodiments topology manager server may correlate a routing metric and a recessive metric. As will be explained in further detail below the topology manager server may determine a network topology based on the routing metric and calculate a corrected cost for the network topology based on the recessive metric. In various embodiments topology manager server may correlate a plurality of routing metrics. For example the topology manager server may correlate metrics for an interior gateway protocol IGP and an exterior gateway protocol EGP . Topology manager server may provide weights to each metric that is being correlated.

In step topology manager server may perform postprocessing of the network topology. For example topology manager server may request information that was unavailable when correlating metrics. Topology manager server may request a missing metric from the network management system or directly from a router . When the missing metric is received the topology manager server may store the metric for use in future correlation or recalculate a correlated metric.

In step topology manager server may perform normalization of the network topology. For example cost values may be recalculated for relative consistency with previous topologies.

In step topology manager server may perform abstraction of the network topology. Abstraction may be used to present information in a more meaningful way or to hide sensitive information that the network operator does not want to publicly expose. For example the names or addresses of various network nodes may be changed to protect the information from competing networks or hackers.

In step topology manager server may expose the network topology to external applications. In various embodiments the topology manager server may send the network topology to ALTO server . In various embodiments the topology manager server may act as an ALTO server. It should be apparent that additional methods of exposing the network topology known in the art such as direct transfer a website or an application programming interface API may be used. The method may then proceed to step where the method ends. The method may be repeated as needed to provide an up to date network topology.

In step the topology manager server may receive routing metric information. In step the topology manager server may determine whether any links are missing a routing metric. Topology manager server may determine that a routing metric is missing if no routing metric is available for a connection where a direct connection exists. If a routing metric is missing the method may proceed to step . If no routing metrics are missing the method may proceed to step .

In step the topology manager server may request the missing data and return to step . The method may require a routing metric for each connection. If a routing metric is unavailable the method may be unable to produce a total cost. Alternatively the method may assume that a connection is broken if no routing metric is available and attempt to route around the broken connection. As another alternative the method may use a default value.

In step the topology manager server may determine a path link list for two vertices of the topology. The vertices may be endpoints within network . Various methods are known for determining the shortest path. For example routers may use a routing algorithm to select the shortest path. The topology manager server may use a similar routing algorithm to determine the shortest path. For example the topology manager server may walk across the topology and perform the same routing decisions as each network node would make based on the routing metric. The topology manager server may select the links having the best value for the routing metric. Accordingly the shortest path determined by the topology manager server may be the same as the actual routing of a packet through the network . The shortest path determined by the topology manager server may have an initial cost based on the routing metric. The initial cost may be for example the total of the routing metric values for each link of the path. It should be apparent that the step may be performed for a plurality of pairs of vertices. The topology manager server may determine a path link list for a starting vertex and each possible destination. The topology manager server may store partial paths for use in determining subsequent paths.

In step the topology manager server may receive recessive metric information. In step the topology manager server may determine whether recessive metric information is missing for any link. If recessive metric information is missing the method may proceed to step . If no recessive metric information is missing the method may proceed to step .

In step the topology manager server may request missing data for post processing. The topology manager server may be able to determine a total cost without some recessive metric data. For example if recessive metric information were missing for edge the topology manager server may be able to substitute the recessive metric for edge . As another example topology manager server may be able to use a default value for missing edges. The method may then proceed to step .

In step the topology manager server may calculate a corrected cost for the recessive metric along the shortest path. The corrected cost may be based on relative weights assigned to each recessive metric and the routing metric. In various embodiments the recessive metric may be assigned the full weight. In such embodiments the routing metric may determine the path but the recessive metric may determine the cost for the topology. In other embodiments weights may be assigned to each metric e.g. by a network analyst. For example a network analyst may assign weights according to the effect on a user s perceived quality of experience.

In step the topology manager server may determine whether the recessive metric information includes any shortcut edges. A shortcut edge may be an edge between two non adjacent vertices on the shortest path that is associated with a recessive metric. For example edge may provide a value for metricB between vertex and vertex . If the recessive metric information includes a shortcut edge the method may proceed to step where the topology manager server may substitute the shortcut edge value for a plurality of edges in the path connecting the vertices. For example the edge may be substituted for the edge and . The topology manager server may be configured with various rules for determining whether to substitute a shortcut value. For example topology manager server may substitute the metric value for a shortcut edge if the shortcut edge value is less than the substituted edge values. Rules governing shortcut values may be based on the particular recessive metric.

In step the topology manager server may calculate a total cost for the path based on the corrected cost for the recessive metric at each edge. A formula for determining the total cost may depend on the type of metric. For example an additive metric such as latency may be summed to determine the total cost. As another example the total cost for a concave metric such as path bandwidth may be determined as the minimum corrected cost value along the path. Topology manager server may be configured with any formula based on the recessive metrics available to provide a useful metric for end users. The method may then proceed to step where the method ends.

The topology manager server may determine a total cost in a similar manner as described above regarding . An edge in the VPN such as edge which has a value for point to point metric E may be treated as a shortcut. A total cost formula for the multi layer network topology may include metrics from each level each metric having a weight. Also because metric D capacity may be a concave metric the total cost for each metric along the path may be determined before applying the weight. It may also be necessary to invert a metric where a high value is desirable. For example the capacity between vertex and vertex may be the minimum value 1 gbps. An exemplary formula for weighting the metrics may be total cost 1 capacity delay 10. Using this formula the total cost between vertices and would be 3. It should be noted that although a path travelling through vertex might in theory have a better metric such metric may be irrelevant because the routing metric metricC determines that the path does not traverse vertex . It should be appreciated that topology manager server may be configured with various formulas for determining the total cost based on the available recessive metrics. A multi level network topology may use normalization and abstraction before exposing the network topology. For example the multi layer topology may identify network nodes by the VPN endpoint names rather than the underlying routers.

In step the topology manager server may receive routing information including for example IGP link topology data and EGP routing data. The IGP link topology data may include a routing metric used to route packets within sub network . The IGP link topology data may be in the form of a topology graph such as those described above regarding . The EGP routing data may indicate a routing metrics used to route packets to a connected sub network . The topology manager server may receive EGP routing data from a plurality of connected networks . In various embodiments the EGP routing data may further include recessive metrics providing additional information regarding a connected network .

In step the topology manager server may extract a next hop and path length from an EGP entry for a destination located within a sub network . The next hop may indicate a router within network that may be connected to a connected network . Accordingly the next hop may be considered a routing metric that determines the routing path to the destination . The path length may be an autonomous system AS path length indicating the number of hops within the connected network to the destination . In various embodiments the path length may also be used as a routing metric to determine a routing path to the destination . Alternatively the routing path may be determined by only the IGP routing metric and the next hop.

In step the topology manager server may determine whether the next hop is found in the IGP link topology graph. If the next hop is found in the IGP link topology graph the method may proceed to step . If the next hop is not found in the IGP link topology graph the method may proceed to step .

In step the topology manager server may determine that there is an error in the routing information. In various embodiments topology manager server may take action to correct the error. The topology manager server may request corrected data. For example the topology manager server may query an address indicated as the next hop to determine whether the node exists and can provide IGP data. Alternatively if the next hop cannot be located the topology manager server may exclude the EGP destination from the topology. The method may then proceed to step .

In step the topology manager server may add a vertex for the EGP destination to the IGP topology. The EGP destination may be associated with a range of IP addresses. In step the topology manager server may add a new edge between the newly added vertex and the next hop vertex . The topology manager server may associate the new edge with the path length value as a metric value. The path length value may be considered a routing metric.

In step the topology manager server may determine whether there are additional EGP entries in the received EGP information. If there are additional entries the method may return to step and proceed through steps and to add the EGP destination of the EGP entry to the topology.

In step the topology manager server may calculate a total cost between two vertices. The topology manager server may calculate the total cost using a method similar to method . The topology manager server may determine the routing path within the network according to the IGP routing metric. In various embodiments it may be possible for an EGP destination to be associated with a plurality of edges for example if the EGP destination is reachable through a plurality of sub networks . In such embodiments a shortest routing path may be selected based on both the IGP routing metric and the EGP path length. The topology manager server may then determine a total cost for the routing path based on at least the EGP path length. In various embodiments a formula for the total cost may be based on the EGP path length and a recessive metric for edges within the sub network . The IGP routing metric may also be weighted in a formula for total cost. For example the total cost may be a weighted average of the IGP routing metric the EGP path length and a recessive metric.

According to the foregoing various exemplary embodiments provide for generating a network topology including total costs for routing paths. In particular by correlating a routing metric with a recessive metric the total cost may accurately account for recessive metrics in the network topology.

It should be apparent from the foregoing description that various exemplary embodiments of the invention may be implemented in hardware and or software running on hardware. Furthermore various exemplary embodiments may be implemented as instructions stored on a machine readable storage medium which may be read and executed by at least one processor to perform the operations described in detail herein. A machine readable storage medium may include any mechanism for storing information in a form readable by a machine such as a personal or laptop computer a server or other computing device. Thus a machine readable storage medium may include read only memory ROM random access memory RAM magnetic disk storage media optical storage media flash memory devices and similar storage media.

It should be appreciated by those skilled in the art that any block diagrams herein represent conceptual views of illustrative circuitry embodying the principals of the invention. Similarly it will be appreciated that any flow charts flow diagrams state transition diagrams pseudo code and the like represent various processes which may be substantially represented in machine readable media and so executed by a computer or processor whether or not such computer or processor is explicitly shown.

Although the various exemplary embodiments have been described in detail with particular reference to certain exemplary aspects thereof it should be understood that the invention is capable of other embodiments and its details are capable of modifications in various obvious respects. As is readily apparent to those skilled in the art variations and modifications can be affected while remaining within the spirit and scope of the invention. Accordingly the foregoing disclosure description and figures are for illustrative purposes only and do not in any way limit the invention which is defined only by the claims.

