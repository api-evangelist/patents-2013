---

title: Measuring link performance using multiple radio access networks
abstract: Technology for measuring link performance using multiple radio access networks (RANs) is described. Data packets of a flow can be received, at a mobile node via a first connection with the mobile node with a first RAN. An active measurement can be initiated when a Real-time Traffic Flow Measurement (RTFM) triggering condition occurs. A second connection can be formed with the mobile node with a second RAN. Selected packets of the flow can be received for the active measurement using the first RAN and using the second RAN. An RTFM execution event can be communicated to a virtual access network (VAN) to move the flow from the first RAN to the second RAN when the active measurement of the selected packets is received via the second RAN is greater than a selected threshold value.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09456368&OS=09456368&RS=09456368
owner: INTEL CORPORATION
number: 09456368
owner_city: Santa Clara
owner_country: US
publication_date: 20131220
---
The present application is claiming priority from pending PCT Patent Application No. PCT US2013 076785 filed on Dec. 20 2013 entitled MEASURING LINK PERFORMANCE USING MULTIPLE RADIO ACCESS NETWORKS .

Mobile device users often use their devices to receive multimedia content such as streaming audio video or data from a communications node. Mobile computing devices such as laptops smartphones ultrabooks or tablets are increasingly equipped with multiple transceivers that support different Radio Access Networks RANs such as Wi Fi and cellular transceivers. Likewise it is not uncommon to find overlapping coverage between multiple RANs that may operate at different bandwidths. Mobile devices equipped with multiple transceivers are able to access the different RAN networks to communicate content.

However various RATs often operate independently in wireless enabled communications environments. For example a user of a multi radio mobile device or user equipment UE may selectively elect to operate either in a Wi Fi mode or in a cellular mode. Alternatively the device may automatically elect for the user. While a selected radio link can provide a user with a smooth experience for some types of applications such as delay sensitive applications it is not uncommon to experience outages manifested by dropped calls buffering delays transmission errors and slow connections.

Virtual access network VAN technologies allow seamless end to end integration of multiple heterogeneous radio access networks RANs and enable advanced multi radio resource management. However it can be difficult for a VAN to effectively compare the availability and throughput of different RATs.

Reference will now be made to the exemplary embodiments illustrated and specific language will be used herein to describe the same. It will nevertheless be understood that no limitation of the scope of the invention is thereby intended.

Before the present invention is disclosed and described it is to be understood that this invention is not limited to the particular structures process steps or materials disclosed herein but is extended to equivalents thereof as would be recognized by those ordinarily skilled in the relevant arts. It should also be understood that terminology employed herein is used for the purpose of describing particular examples only and is not intended to be limiting. The same reference numerals in different drawings represent the same element. Numbers provided in flow charts and processes are provided for clarity in illustrating steps and operations and do not necessarily indicate a particular order or sequence.

Virtual Access Network VAN technologies allows seamless end to end integration of multiple heterogeneous radio access networks RANs and enable advanced multi radio resource management techniques such as seamless offload flow mobility bandwidth aggregation and load balancing in a mobile device such as a user equipment UE or a mobile station MS . A RAN operates on a specified radio frequency band such as a Wi Fi 3GPP Cellular etc.

While the term UE which is typically associated with the third generation partnership project 3GPP specification is used throughout the application it is not intended to be limiting. Other types of wireless wide area network WWAN cellular technologies can also be used in accordance with embodiments of the present invention including the institute of electrical and electronics engineers IEEE 802.16 specification commonly referred to as WiMAX. Other wireless local area network WLAN RATs which can be used in embodiments of the present invention include but are not limited to the IEEE 802.11 WiFi IEEE 802.15 and Bluetooth specifications.

As a UE seeks to access a radio access network the UE can select the type of network or RAN such as a WLAN Wi Fi or cellular network to use to communicate and access data. In one embodiment an example of data as multi media content is provided to illustrate delay sensitive data that needs to be received in a timely manner. However any type of data may be accessed by the UE. To maintain a connection or to maintain a desired flow of data when delay sensitive or low latency data such as multi media content is accessed a Real time Traffic Flow Measurement RTFM can be monitored.

RTFM provides reporting information about traffic flows on the Internet. RTFM can be used to measure traffic in three broad areas including clients and servers network segments and mesh networks. RTFM may be advantageous in situations where low latency Internet applications are used such as video conferencing live media streaming or other types of low latency applications. The flow mobility may be monitored by an RTFM monitor.

In one embodiment an RTFM monitor is configured to monitor the packet flow of a network. In one embodiment packet flow is an ordered set of packets traveling through the network in a given direction close in time. A packet flow may be comprised of packets with characteristics in common such as source internet protocol IP addresses destination internet protocol IP addresses transport protocols such as TCP or UDP source ports and or destination ports.

An access network can be a client server based network in which the server provides an IPv4 v6 address to the client for Internet access.

In one embodiment a Virtual Access Network VAN may be an access network that operates Over The Top of one or multiple RANs using the tunneling protocols such as Mobile IP or virtual private network VPN . In another embodiment a VAN may operate over multiple RANs directly.

In one embodiment a client centric RTFM monitoring method can consist of two steps. Step 1 involves passively measuring the packet flow of a selected RAN. Step 2 includes actively measuring the packet flow of the selected RAN and another selected RAN.

At Step 1 a receiver can conduct a passive data flow measurement using data packets without any additional overhead. The receiver can set RTFM active measurement triggering conditions to determine when to move to Step 2. In one embodiment the triggering events can include a receive timeout event a low throughput event and or a periodic timer expiry event. In one embodiment the receive timeout event can occur when no packet s of a data flow arrive within a defined or selected period of time. For example if no packets arrive within 1 ms to 500 ms of time then a receive timeout event can be registered. In another embodiment the low throughput event can occur when the average receiving throughput of the data flow is lower than a defined or selected threshold. In one embodiment the low throughput event is measured in kilobits per second kbps or megabits per second mbps . The actual throughput threshold can depend on the RAN and system requirements. For instance a high throughput cellular RAN such as a 3GPP long term evolution LTE RAN may have a relatively high threshold such as 500 kbps. A RAN such as Bluetooth may have a lower threshold such as 10 kbps. In one embodiment the periodic timer expiry event occurs when a defined or selected period of time expires. The amount of time can be system dependent. In an example the defined time period can be between several milliseconds and several minutes.

In one embodiment if any RTFM active measurement triggering condition occurs Step 2 will start. At Step 2 the sender will send packets of the flow over both a serving RAN and a new RAN for the purpose of active measurement. In another embodiment the sender will send packets of the flow over multiple RANs. The packets sent over the serving RAN new RAN and or multiple RANs can be actively measured to determine which RAN performs better for the flow. Which RAN performs better for a flow may be dependent on system requirements and the type of flow. Flow criteria can include packet delay packet loss and packet throughput. In one embodiment the same packets can be sent and actively measured over each RAN to enable the performance e.g. delay loss throughput to be compared. The measurements can be compiled at the VAN such as at a VAN server that is in communication with each RAN.

In one embodiment the sender can proactively drop packets to reduce traffic load and overhead. For a data flow in an active measurement each packet in the data flow can be sent over both networks. In one embodiment all traffic in the data flow can be sent over both RANs. However WWAN technologies such as cellular can have a lower throughput than WLAN technologies such as WiFi. To accommodate the different throughput rates of the different RANs the active measurements can be performed with by sending a subset of the data. For example the low priority packets sent on the RAN with the lower throughput can be proactively dropped. To detect performance issues to be conservative in the active measurement state only high priority packets may be used. The number of packets sent in an active test can vary based on network design or network type. The number of packets in the active test may vary between tens of packets to hundreds or thousands of packets depending on the type of test performed such as a timed test a packet loss test or other type of test.

Whether a packet is dropped is based on the packets relative priority to others packets in the flow e.g. intra flow priority. For example for an internet video call the sender may drop video packets to give audio packets higher priority.

In one embodiment a new bit field S is added to a header data packet. In one embodiment when Step 2 is initiated the new bit field S indicates that a data packet is being sent over multiple networks and can be used by the receiver for active measurement. In one embodiment a receiver will measure when to return to Step 1 based on the packet s sent over both networks. The active measurement may be measured using selected parameters. For example in one embodiment one or more of the following parameters may be used to actively measure data packets sent over the new RAN time t winning packet count c winning packet delay count d winning packet loss count p winning packet count threshold C winning packet delay threshold D winning packet loss threshold P and or maximum active measurement duration T . In one embodiment the winning packet count winning packet delay count and wining packet loss count are each initially set to zero.

If a copy of a packet sent over a new RAN arrives earlier in time t c c 1 and d d t. In one example t may be measured in units of time such as millisecond second minutes or other units of time. In one example c is measured in the number of packets that do or do not arrive first. In one example d is measured in the number of packets that are or are not delayed.

If the copy of the packet sent over the new RAN arrives but the copy sent over the serving RAN is lost c c 1 and p p 1. In one example p is measured in the number of packets that are or are not lost.

If the copy of the packet sent over the serving RAN arrives but the copy sent over the new RAN is lost c c 1 and p p 1.

In one embodiment if c Cand d Dand p Pthen an RTFM Execution is triggered Step 2 ends the real time flow will be moved to the new RAN and Step 1 restarts. In one example Cis a threshold for the number of packets that arrive first. In one example Dis a threshold for the number of packets that are delayed. In one example Pis a threshold for the number of packets that are lost.

In another embodiment if c Cor d Dor p Pthen an RTFM Execution is triggered Step 2 ends the real time flow will be moved to the new RAN and Step 1 restarts. In one embodiment the winning packet count threshold winning packet delay threshold winning packet loss threshold e.g. C D P may each be set differently depending on whether the serving RAN is a Wi Fi RAN or Cellular RAN. In one embodiment when Step 2 ends then Step 1 restarts.

In one embodiment if the maximum active measurement duration T is reached the real time flow will stay in the current serving RAN Step 2 ends and Step 1 restarts.

In one embodiment during the RTFM active measurement the VAN server proactively drops low priority packets of the flow to reduce traffic load and sends high priority Wi Fi packets and cellular packets over a cellular network connection and a Wi Fi network connection.

In one embodiment the VAN client can receive high priority Wi Fi packets and cellular packets from the cellular network connection and a Wi Fi network connection. During the RTFM active measurement period where the VAN client is receiving high priority Wi Fi packets and cellular packets from the Wi Fi network connection and a cellular network connection the VAN client can use a packet counter to keep a packet count .

The packet counter can increase the packet count for each data packet received from the cellular network connection before receiving a data packet from the Wi Fi network connection e.g. current packet count previous packet count 1. The current packet count may be represented as cand the previous packet count as c. The packet counter can decrease the packet count for each data packet received from the Wi Fi network before receiving a data packet from the cellular network e.g. c c 1.

The VAN client can iteratively update the packet counter . When current packet count is greater than a defined or selected packet count threshold C e.g. c C RTFM Execution is triggered. When the RTFM Execution is triggered the VAN client can send a control message to the VAN server to move the data packet flow from the serving RAN Wi Fi to the new RAN cellular . In another embodiment the data packet flow can be moved from a cellular network to a Wi Fi network based on the RTFM measurements.

The ability of the VAN to communicate the same packets across both RAN and RAN during the active measurement enables the performance of RAN and RAN to be accurately measured and compared thereby enabling the data flow to be maximized on the different RATs.

The computer circuitry can be configured to receive data packets of a flow at the mobile node via a first connection with the mobile node with a first RAN as in block . The computer circuitry can be further configured to initiate an active measurement when a Real time Traffic Flow Measurement RTFM triggering condition occurs as in block . The computer circuitry can also be configured to form a second connection with the mobile node with a second RAN as in block . The computer circuitry can be further configured to receive selected packets of the flow for the active measurement using the first RAN and the selected packets of the flow using the second RAN as in block . The computer circuitry can be further configured to communicate an RTFM execution event to a VAN server to move the flow from the first RAN to the second RAN when the active measurement of the selected packets received via the second RAN is greater than a selected threshold value as in block .

In one embodiment the computer circuitry can be further configured to continue communicating the flow on the first RAN when the active measurement is less than the selected threshold value. In another embodiment the RTFM triggering conditions include non receipt of packets of the flow from the first RAN within a defined threshold of time an average receiving throughput of the flow of the first RAN is lower than a defined throughput threshold an expiration of a defined period of time or a packet loss of a flow from the first RAN that is greater than a defined threshold. In one embodiment the RTFM execution event is determined by iteratively increasing a packet counter for each packet received from the second RAN before the receipt of the packet from the first RAN and iteratively decreasing the packet counter for each packet received from the first RAN before the receipt of the packet from the second RAN.

In one embodiment the data packets of the flow from the first RAN include a bit field to indicate that the computer circuitry will receive packets from the first RAN and the second RAN for the active measurement. The bit field can be added to a packet header to indicate if a data packet was received over both the connection with the first RAN and the connection with the second RAN. In another embodiment the computer circuitry can be further configured to send a control message to the VAN server including an RTFM active measurement parameters and RTFM trigger event notifications. In one embodiment the computer circuitry can be further configured to send a control message to the VAN server that is incorporated into a virtual access network or is a new message. In another embodiment the computer circuitry can be further configured to determine when to begin an active measurement based on RTFM triggering conditions. In another embodiment the computer circuitry can be further configured to determine if an RTFM execution event has been triggered based on the arrival time of the packets from the first RAN and the second RAN the delay between the arrival of each packet from the first RAN and the delay between the arrival of each packet from the second RAN or the number of packets received over a period of time. In another embodiment the mobile node can further comprise of a virtual access network VAN client a wireless fidelity Wi Fi station or a third generation partnership project 3GPP long term evolution LTE radio Release 8 9 10 or 11.

The computer circuitry can be configured to communicate data packets to a mobile node using a first RAN as in block . The computer circuitry can be further configured to receive a first control message from the mobile node to send selected data packets using the first RAN and send the selected packets using a second RAN when a Real time Traffic Flow Measurement RTFM triggering condition occurs as in block . The computer circuitry can also be configured to communicate to the mobile node the selected packets using the first RAN and the selected packets using the second RAN as in block . The computer circuitry can be further configured to receive a second control message to communicate data packets using the second RAN when an active measurement is greater than a selected threshold value as in block .

In one embodiment the computer circuitry can be further configured to continue communicating data packets using the first RAN when the active measurement is less than the selected threshold value. In another embodiment the computer circuitry can be further configured to select data packets communicated using the first RAN and select data packets communicated using the second RAN based on an intra flow priority. In another embodiment the computer circuitry can be further configured to determine the intra flow priority based on the priority of a first data packet communicated using the first RAN relative to the priority of a second data packet communicated using the first RAN. In another embodiment the computer circuitry can be further configured to determine the intra flow priority based on the priority of a first data packet communicated using the second RAN relative to the priority of a second data packet communicated using the second RAN.

In one embodiment the first control message can include RTFM active measurement parameters and RTFM trigger event notifications. The RTFM active measurement parameters can include non receipt of packets communicated using the first RAN within a defined threshold of time an average receiving throughput of packets communicated using the first RAN is lower than a defined throughput threshold an expiration of a defined period of time or a packet loss of packets communicated using the first RAN that is greater than a defined threshold. In another embodiment the second control message can include RTFM active measurement parameters and RTFM trigger event notifications. In another embodiment the RTFM active measurement parameters can include non receipt of packets communicated using the first RAN within a defined threshold of time an average receiving throughput of packets communicated using the first RAN is lower than a defined throughput threshold an expiration of a defined period of time or a packet loss of packets communicated using the first RAN that is greater than a defined threshold.

In one embodiment the computer circuitry can be further configured for use with downlink or uplink communications. In another embodiment the data packets can include a new bit field in a data packet header. In another embodiment the new bit field indicates when each data packet has been sent using the first RAN and the second RAN.

In one embodiment the method can further comprise continuing communicating data packets using the first RAN when the active measurement is less than the selected threshold value. In another embodiment the method can further comprise communicating the selected data packets to the mobile node using the first RAN and the second RAN from a VAN server or an eNB. In another embodiment the method can further comprise communicating selected high priority packets of the flow using the first RAN and the selected high priority packets of the flow using the second RAN to the mobile node. In another embodiment the method can further comprise terminating communicated selected low priority packets of the flow using the first RAN and the selected low priority packets of the flow using the second RAN to the mobile node. the data packet priority of the flow from the first RAN and the data packet priority of the flow from the second RAN can be selected based on an intra flow priority. The selected low priority packets of the flow using the first RAN and the selected low priority packets of the flow using the second RAN can be terminated to reduce the traffic load.

Various techniques or certain aspects or portions thereof may take the form of program code i.e. instructions embodied in tangible media such as floppy diskettes CD ROMs hard drives non transitory computer readable storage medium or any other machine readable storage medium wherein when the program code is loaded into and executed by a machine such as a computer the machine becomes an apparatus for practicing the various techniques. In the case of program code execution on programmable computers the computing device may include a processor a storage medium readable by the processor including volatile and non volatile memory and or storage elements at least one input device and at least one output device. The volatile and non volatile memory and or storage elements may be a RAM EPROM flash drive optical drive magnetic hard drive or other medium for storing electronic data. The base station and mobile station may also include a transceiver module a counter module a processing module and or a clock module or timer module. One or more programs that may implement or utilize the various techniques described herein may use an application programming interface API reusable controls and the like. Such programs may be implemented in a high level procedural or object oriented programming language to communicate with a computer system. However the program s may be implemented in assembly or machine language if desired. In any case the language may be a compiled or interpreted language and combined with hardware implementations.

It should be understood that many of the functional units described in this specification have been labeled as modules in order to more particularly emphasize their implementation independence. For example a module may be implemented as a hardware circuit comprising custom VLSI circuits or gate arrays off the shelf semiconductors such as logic chips transistors or other discrete components. A module may also be implemented in programmable hardware devices such as field programmable gate arrays programmable array logic programmable logic devices or the like.

Modules may also be implemented in software for execution by various types of processors. An identified module of executable code may for instance comprise one or more physical or logical blocks of computer instructions which may for instance be organized as an object procedure or function. Nevertheless the executables of an identified module need not be physically located together but may comprise disparate instructions stored in different locations which when joined logically together comprise the module and achieve the stated purpose for the module.

Indeed a module of executable code may be a single instruction or many instructions and may even be distributed over several different code segments among different programs and across several memory devices. Similarly operational data may be identified and illustrated herein within modules and may be embodied in any suitable form and organized within any suitable type of data structure. The operational data may be collected as a single data set or may be distributed over different locations including over different storage devices and may exist at least partially merely as electronic signals on a system or network. The modules may be passive or active including agents operable to perform desired functions.

Reference throughout this specification to an example means that a particular feature structure or characteristic described in connection with the example is included in at least one embodiment of the present invention. Thus appearances of the phrases in an example in various places throughout this specification are not necessarily all referring to the same embodiment.

As used herein a plurality of items structural elements compositional elements and or materials may be presented in a common list for convenience. However these lists should be construed as though each member of the list is individually identified as a separate and unique member. Thus no individual member of such list should be construed as a de facto equivalent of any other member of the same list solely based on their presentation in a common group without indications to the contrary. In addition various embodiments and example of the present invention may be referred to herein along with alternatives for the various components thereof. It is understood that such embodiments examples and alternatives are not to be construed as defacto equivalents of one another but are to be considered as separate and autonomous representations of the present invention.

Furthermore the described features structures or characteristics may be combined in any suitable manner in one or more embodiments. In the following description numerous specific details are provided such as examples of layouts distances network examples etc. to provide a thorough understanding of embodiments of the invention. One skilled in the relevant art will recognize however that the invention can be practiced without one or more of the specific details or with other methods components layouts etc. In other instances well known structures materials or operations are not shown or described in detail to avoid obscuring aspects of the invention.

While the forgoing examples are illustrative of the principles of the present invention in one or more particular applications it will be apparent to those of ordinary skill in the art that numerous modifications in form usage and details of implementation can be made without the exercise of inventive faculty and without departing from the principles and concepts of the invention. Accordingly it is not intended that the invention be limited except as by the claims set forth below.

