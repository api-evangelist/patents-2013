---

title: Stochastic beating time-to-digital converter (TDC)
abstract: A stochastic beating time-to-digital converter (TDC) can include triggered ring oscillator (TRO) and a stochastic TDC (sTDC). The TRO, when triggered by a reference signal edge, can generate a periodic TRO signal with a TRO period that is a selected ratio of a voltage-controlled oscillator (VCO) period. The TRO period can be greater than or less than the VCO period by the specified ratio. The sTDC with an event triggered memory can include an sTDC component with a plurality of groups of latches. Each group of latches can be configured to sample and store a VCO state at an edge of a TRO signal. The sTDC component can trigger a capture of a select number of VCO states of the group of latches when one latch in the group of latches transitions to a different digital state referred to as a transition edge.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08773182&OS=08773182&RS=08773182
owner: Intel Corporation
number: 08773182
owner_city: Santa Clara
owner_country: US
publication_date: 20130201
---
Many electronic devices operate off a periodic clock signal to synchronize the transmission of data between electronic components within the device. Periodic clock signals can be provided by an oscillator such as voltage controlled oscillator VCO or digitally controlled oscillator DCO . Periodic clock signals are also used in radio devices and wireless devices to generate specified frequencies that can be used for a variety of purposes including upconversion downconversion and transmission on a carrier frequency. A wireless communication device may be allocated a specified range of frequency bands in which data is transmitted. A VCO DCO can be used in a phase locked loop PLL to generate various frequency bands. A time to digital converter TDC can be used to measure the VCO DCO instantaneous phase with respect to a clean reference clock in a phase locked loop PLL in order to lock the frequency of the VCO DCO to specified frequency.

A wireless communication device e.g. user equipment UE for emerging gigabit per second wireless standards can require local oscillator LO signals with very good spectral purity. Digital fractional n PLLs can be an attractive choice for LO generation in high performance radio transceivers on account of the small area ease of porting PVT process voltage and temperature insensitive loop dynamics and scan programmability re configurability. The resolution and linearity of the time digital converter TDC can limit the spectral purity achievable with a digital fractional n PLL. As an example a fractional n PLL for the 5 GHz band can require the TDC to span a dynamic range of two hundred picoseconds ps . At the same time the TDC resolution and non linearity can be required to be better than 1 ps in order to meet a phase noise and spur requirements of devices using gigabits per second Gbps wireless standards. Gbps wireless standards can include the third generation partnership project 3GPP long term evolution LTE the Institute of Electrical and Electronics Engineers IEEE 802.16 standard e.g. 802.16e 802.16m which is commonly known to industry groups as WiMAX Worldwide interoperability for Microwave Access and the IEEE 802.11 standard e.g. 802.11ac 802.11ad which is commonly known to industry groups as WiFi.

A conventional digital PLL achieves a several pico second TDC resolution through the use of techniques such as delay Verniers or delay interpolation. Mismatch and variations along the TDC delay line can introduce non linearity and non monotonicity in the TDC behavior further degrading the PLL performance. The TDC delay cells can be sized up to reduce mismatch and variations. Consequently the power dissipation can increase quadratically with resolution rendering the design impractical for higher resolution TDCs with sub picosecond resolution.

Reference will now be made to the exemplary embodiments illustrated and specific language will be used herein to describe the same. It will nevertheless be understood that no limitation of the scope of the invention is thereby intended.

Before the present invention is disclosed and described it is to be understood that this invention is not limited to the particular structures process steps or materials disclosed herein but is extended to equivalents thereof as would be recognized by those ordinarily skilled in the relevant arts. It should also be understood that terminology employed herein is used for the purpose of describing particular examples only and is not intended to be limiting. The same reference numerals in different drawings represent the same element. Numbers provided in flow charts and processes are provided for clarity in illustrating steps and operations and do not necessarily indicate a particular order or sequence.

An initial overview of technology embodiments is provided below and then specific technology embodiments are described in further detail later. This initial summary is intended to aid readers in understanding the technology more quickly but is not intended to identify key features or essential features of the technology nor is it intended to limit the scope of the claimed subject matter.

The gigabits per second Gbps wireless standards e.g. IEEE 802.11ac IEEE 802.11ad and 5G cellular LTE Release 11 can require higher error vector magnitude EVM and very good spectral purity to handle the higher data rates which can impose strict demands on the local oscillator LO such as an integrated phase noise iPN of less than 45 dBc and spurs of less than 60 dBc. Error vector magnitude EVM sometimes also called receive constellation error RCE can be a measure used to quantify a performance of a digital radio transmitter and or receiver. Decibels relative to the carrier dBc is the power ratio of a signal to a carrier signal expressed in decibels. The decibel dB is a logarithmic unit that indicates the ratio of a physical quantity usually power or intensity relative to a specified or implied reference level. A ratio in decibels is ten times the logarithm to base 10 of the ratio of two power quantities.

Phase noise is the frequency domain representation of rapid short term random fluctuations in the phase of a waveform caused by time domain instabilities e.g. jitter . The phase noise can be used to characterize an oscillator. Phase noise can be measured and expressed as a power obtained by integrating a phase noise L f over a certain range of offset frequencies. For example the phase noise may be 45 dBc integrated over the range of 1 gigahertz GHz to 6 GHz referred to as an integrated phase noise. A spurious tone also known as an interfering tone a continuous tone or a spur denotes a tone in an electronic circuit which can interfere with a signal and the spur can often be masked underneath that signal. Spurs can be any tones other than a fundamental tone or the fundamental tone s harmonics.

Fractional N fracN digital phase lock loops DPLLs can be beneficial for LO generation due to their reduced area lower power requirements and their ease of porting and scalability between process generations compared to an analog fracN PLLs. Other advantages or fracN DPLLs can include process voltage and temperature PVT insensitive loop dynamic and programmability re configurability of loop performance.

An all digital phase locked loops ADPLLs architecture can be suitable for fractional n operation which can include a TDC as illustrated in . The TDC may include a stochastic beating time to digital converter sbTDC which is described in greater detail below. The sbTDC can include a stochastic TDC and a beating TDC . Typically in order to achieve the sub pico second delay resolution used in many wireless standards the TDC may be implemented as a delay Vernier. The Vernier TDC can be analogous to a flash analog to digital converter ADC but operating in the time domain.

For an all digital phase locked loops ADPLLs a time to digital converter TDC can be used for converting phase information of a voltage controlled oscillator VCO into a digital domain. The ADPLL can include a digital phase frequency detector a digital loop filter a digitally controlled oscillator DCO a TDC and a differentiator or differenciator as illustrated in . The digital phase frequency detector can integrate frequency error by comparing a frequency word input to a differentiated TDC output in a feedback loop which can be proportional to a frequency difference between the frequency word and the differentiated TDC output.

The digital loop filter can generate a filtered phase error signal by low pass filtering the phase error signal. The DCO can generate a periodic DCO signal at a specified frequency from the filtered phase error signal where the filtered phase error signal can be used to converge the DCO frequency to the specified frequency. The DCO can provide the functionality of a digital to analog converter DAC and a voltage controlled oscillator VCO . Alternatively the DAC can convert the filtered phase error signal into a voltage input for a VCO and the VCO can generate a periodic VCO signal at a specified frequency where the voltage input can be used to converge the VCO frequency to the specified frequency. The TDC can be configured to generate a TDC output signal from the DCO signal or VCO signal and the reference signal . The differentiator can generate the differentiated TDC output by differentiating the TDC output signal.

A bottleneck in the DPLL performance can be a time to digital converter s TDC linearity and resolution. A state of the art flash TDC e.g. Vernier TDC or interpolating TDC can be limited to a resolution DNL of approximately 3 5 picoseconds ps and un compensated linearity INL of approximately 8 10 DNLs which can result in integrated phase noise iPN of approximately 30 dBc and large spurs e.g. greater than 60 dBc . Post distortion techniques can be employed to improve the INL and reduce the iPN to approximately 40 dBc which is still worse than the iPN of a Gbps wireless standard.

Differential nonlinearity DNL can describe the deviation between two analog values corresponding to adjacent digital input values. Integral nonlinearity INL can describe a maximum deviation between an ideal output of a circuit e.g. TDC or a digital to analog converter DAC and an actual output level after offset and gain errors have been removed . INL can be used as a specification for measuring error in a digital circuit such as a TDC.

In an example a re circulating stochastic TDC rcsTDC is capable of a resolution of approximately 50 femtoseconds fs while covering a required dynamic range of approximately 200 ps which can meet an iPN

In an example the re circulating TDC can re use a single delay cell and sampling flip flop for the time comparison. In another example the delay cell can be configured as a triggered ring oscillator with a fixed period which can be slightly shorter or longer than VCO DCO period. Through reusing the delay cell the TDC can achieve linear characteristics with a much smaller area and power consumption compared with a conventional TDC such as the Vernier TDC. In another configuration the frequency locking used for the triggered ring oscillator period adjustment can be performed in digital domain and thus the triggered ring oscillator period adjustment can be automatically calculated and routed to the triggered ring oscillator. In another example the embedded counting system of the TDC can minimize the power consumption and area overheads of a frequency locking mechanism.

For the re circulating TDC the ring oscillator period can be shorter or longer than the VCO period. The ring oscillator period Tcan be represented by N 1 N T where Tis the VCO period Nis a TDC sample number and the TDC sample number is a positive integer of samples of TRO cycles per a reference period. For a re circulating TDC with a resolution of B bits the TDC sample number Ncan represented by 2. For a B bit re circulating TDC Tcan be set to 2 1 2 Tand ring oscillator period may be automatically adjusted with respect to the ADPLL VCO frequency. Without loss of generality Tcan be set to 2 1 2 T. In another example 2 1 2 Tmay be used. By monitoring an instantaneous VCO period Tnormalized to the TDC resolution T 2 the ring oscillator period Tcan be adjusted to a correct value. The operations to set the correct value for Tcan easily be performed in digital domain such as with a programmed processor.

If the ring oscillator period T e.g. TROCLK is adjusted to 1 1 N T then the time difference between the VCO DCO and reference ring oscillator or triggered ring oscillator TRO reduces by 1 N Tevery cycle as illustrated in . So 1 N Tcan be the effective resolution of the re circulating TDC rcTDC . A flip flop similar to D flip flop of samples the VCO DCO state against the reference ring transitions and stores the results in a shift register similar to shift register of but with fewer bits per stage . Up to q Ns samples can be required in order to capture the dynamic range required to support fractional n operation one complete VCO DCO period . After q samples are collected the reference ring is reset and awaits the next reference edge . Through reusing the delay cell the TDC can achieve perfectly linear characteristic with a much smaller area and power consumption compared to a conventional TDC. In order to support a finer resolution the period of the reference ring oscillator can be made closer to the VCO DCO period. However the finer resolution can require more cycles to complete the conversion.

To speed up an initial frequency acquisition the reference ring oscillator can be characterized at a few discrete tuning settings by triggering the reference ring oscillator ref. ring OSC and measuring the frequency of oscillation through a counter with respect to the reference frequency e.g. crystal oscillator frequency or XTAL frequency . The edge detection logic can provide a digital representation of a VCO DCO period and a delay of the VCO DCO signal relative to the periodic TRO signal e.g. TROCLK . The digital representation of the VCO DCO period and the delay can be used as an input for a frequency locked loop FFL used to provide frequency control for the TRO . Frequency locked loops FLL can used in radio telecommunications computers and other electronic applications to generate stable frequencies or to recover a signal from a noisy communication channel.

The frequency measurement can be performed in production testing or on a power up of the reference ring oscillator and stored on a memory e.g. a read only memory ROM or a random access memory RAM . From settings derived from frequency measurements an initial estimation for a desired channel frequency can be interpolated. The initial estimation and interpolation can reduce the amount of time used for a frequency locking loop to converge.

The re circulating TDC may also prevent a feedback loop of a reference ring control signal and or a feedback loop of a PPL from locking to the other stable equilibrium point of 2 1 2 T which can also be used when the phase measurements are inverted. The TROCLK can be sampled on quadrature phases of the VCO DCO in a quadri correlator to determine which of the two frequencies i.e. a VCO DCO signal frequency or a periodic ring oscillator signal frequency is higher and maintaining one signal frequency higher than the other signal frequency. For example the re circulating TDC can reset Tto a minimum delay setting if Tdrifts to become larger than T.

The input can be modeled as a probability density function because the inputs F F can arrive in a random order exhibiting a Gaussian distribution. Based on the number of ones and zeros the time difference FREF FCKV between the rising edges of signals can be digitized as an output . The digitized value can be sufficiently linear due to an inherent statistical distribution of process variations. The improved resolution due to the sTDC can result in a phase lock loop ADPLL with an improved total jitter.

In an example the VCO DCO signal can be fed to a data port F of the array and the reference ring signal can be fed to a clock port F . In the presence of variations the sampling instant of each flip flop can be skewed from a nominal N or mean of the observations as measured at output port . When the VCO DCO and reference ring signals rising edges or F F are aligned then statistically half the flip flops can resolve a 1 and half a 0 . As time sweeps the distance between the edges more or less flip flops will resolve to a 1 as illustrated by a flip flop output FF OUT A H or for event 3 through event 5 E3 E5 shown in .

For large distances between the edges such as when F F all the flip flops will resolve a 1 e.g. E6 E7 or 0 e.g. E1 E2 depending on the polarity of the difference. The outputs of all the flip flops for the stage can be averaged in order to decode the output. The resolution of the stochastic TDC can be set by a number of latches e.g. flip flops in the array while the dynamic range can be limited by the width of the tails of the statistical distribution. The flip flops can be a minimal size to maximize the variations and minimize power consumption. The stochastic TDC can exploit process variations and mismatch to achieve a very fine resolution with limited dynamic range. The resolution can set by the number of flip flops arbiters . The dynamic range can be limited by the width of the probability distribution.

When the two input ports edges of Fand F have a considerably large phase error between them then all of the latches can unambiguously state edge F VCO DCO comes earlier than edge F TROCLK which can be represented by a 0 E1 or E2 at the latch outputs or FF OUT A H or all of the latches can unambiguously state edge F TROCLK comes earlier than edge F VCO DCO which can be represented by a 1 E6 or E7 at the latch outputs or FF OUT A H . A saturation condition can occur when all the latch output are either 1 or 0 where the inputs represent a timing error beyond a sTDC dynamic range. In the saturation condition the TDC uses the coarse values from rcTDC .

An adder combines the output of register into a single stream LSB while logic combines the values from shift register into another stream MSB . The logic and or the DFLL can generate reset and delay control .

The rcTDC and sTDC can be used in wireless radio transceivers for high data rate standards such as a third generation partnership project 3GPP long term evolution LTE standard e.g. 4G LTE 5G LTE Advanced cellular a WiMAX Worldwide interoperability for Microwave Access or the Institute of Electrical and Electronics Engineers IEEE 802.16 standard e.g. 802.16e 802.16m and a WiFi IEEE 802.11 standard e.g. 802.11ac 802.11ad . The rcTDC and sTDC can be used to generate a radio frequency RF and used in both stand alone radios or as part of a system on chip SoC incorporating one or more wireless protocol. Within a transceiver rcTDC and sTDC can be used in an all digital frequency synthesizer for local oscillator LO generation forming a linear transceiver that can also be used in a wireless digital transmitter for phase modulation.

As shown in each comparing flop e.g. flip flop in the stochastic TDC can require a full shift register e.g. approximately 100 stages for 6 bit course resolution to capture the flop state e.g. VCO state at each time sample. In an example the sTDC can use 40 bits for each VCO state to generate an up to an approximately 5 bit fine resolution. As a result the shift register for the sTDC can use approximately a number of stages times a number of stochastic flops e.g. 100 stages 40 bits stage 4000 bits in . In an example the number of stages can determine the course resolution MSB and the number of latches or bits per stage can determine the fine resolution LSB . So for a high resolution rcsTDC the number of flops can be large. All the flops can run at VCO sampling rate which can result in a large power consumption. In addition the decoding circuit used to interpret the data can also process a large number of bits e.g. 4000 bits which can be area and power consuming and can consume timing margins from the DPLL.

A stochastic beating TDC sbTDC can be implemented instead of the rcsTDC which can operate at very low power e.g. 5 mW and occupy relatively small area of the die without sacrificing range and resolution. The sbTDC can include 1 a stochastic TDC sTDC with an event driven memory 2 multi phase sampling 3 a circular counter e.g. linear feedback shift register LFSR for an event counter and or 4 an automatic gating circuit to reset the sbTDC after each conversion.

Referring back to the stochastic comparing flops may only have meaningful data around a point the VCO and triggered ring oscillator TRO or TROCLK edges cross each other. The crossover of the VCO and TRO edges can be referred to as a transition edge e.g. E3 E5 of FF Out A H for 8 latches . Each of the latches e.g. flops for a stage can have a different transition edge within a specified duration such as three events or VCO states e.g. event 3 E3 through event 5 E5 of . The event or the VCO state can be determined by the VCO signal on a data port and the TRO signal TROCLK on a clock port of the latch as shown in A B or the event or the VCO state can be determined by the TRO signal TROCLK on the data port and the VCO signal on the clock port of the latch as shown in . Putting the TRO signal TROCLK on the data port can simplify the sbTDC design when multiple phases of the TRO signal are used but can be performed when different TRO phases are used to sample the VCO. The meaningful data can occur from the first latch e.g. or E3 of FF Out A C to transition to the last latch e.g. or E5 of FF Out H to transition to a different digital state. Transitions in are shown to occur on a rising edge but in other examples not shown transitions can occur on a falling edge. The meaningful data can include a selected number of VCO states capturing the transitions of all the latches for the stage which can be less than five VCO states e.g. 3 VCO states in . As used herein the event can be used interchangeably with the VCO state a DCO state or a sample.

During the rest of the time or events e.g. E1 E2 or E6 E7 which can actually be most of the time samples or VCO states the outputs FF Out A H can be identical e.g. all zeros or all ones for all the stochastic comparing flops. Thus instead of capturing all the stochastic flops at all the time samples or VCO states capturing the state of flops around the crossing event e.g. and or E3 E5 of FF Out A H can provide the information used for the stochastic estimation or stochastic determination. Event 3 E3 can represent the transition of 3 flops FF Out A C in a stage event 4 E4 can represent the transition of 4 more flops FF Out D G in the stage and event 5 E5 can represent the transition of 1 more flop FF Out H or the rest of flops in the stage. Events 1 and 2 E1 E2 can represent a saturation state at a zero digital state for the flops in the stage and events 6 and 7 E6 E7 can represent a saturation state at a one digital state which may not be used in the stochastic determination. Since the stochastic TDC range can be designed to be larger than an LSB step or stage of a beating TDC bTDC sTDC can take more than one VCO state for all the stochastic flops to complete the transition. The sTDC can be used to capture the transition event by generate a trigger signal to memory cells that capture the state of relevant group of latches at the event and following events i.e. event driven memory .

To detect a transition event an OR function on the flops output can be used to detect an initial transition event on the stochastic flops and the OR function and can be used to generate save pulses event CLK that can trigger a memory . The state of the OR can be stored in a shift register to encode the beating TDC state in a sbTDC encoder . The sTDC with an event driven memory can result in profound reduction in the number of memory flops to 100 for the OR shift register and another 4 6 number no. of flops for the stochastic data which can result in a profound area and power reduction.

The sTDC can include one sTDC component to compare the VCO signal to the TRO signal TROCLK E or the sTDC can include multiple sTDC components to compare the VCO signal to multiple phases of the TRO signal TROCLK A E . illustrates 5 phases of the TRO signal A E and 5 sTDC components A E in the sTDC for each phase of the TRO signal. Using a single sTDC component in the sTDC can be problematic because driving a big group of latches FF on one node e.g. TRO may cause the TRO generation to fail. Multiple phases of the TRO can improve performance because the number of latches driven by each TRO signal phase can be reduced.

Each sTDC can include a set of latches e.g. data flip flops D FF to capture the VCO state at each event which can be used for stochastic determination. illustrates 8 latches used for each event. The 8 on the output of the latches represents a bus of 8 separate outputs from each stochastic latch. Similar notations are used in to indicate other bus sizes. The input set of latches can capture the TRO signal A E at a VCO edge e.g. VCO state . In an example the OR function can include an OR gate on the outputs of the input set of latches to capture a first transition of one of the latches in another latch e.g. trigger latch . An edge differentiator e.g. 2 along with the trigger latch can generate an event pulse for capturing the selected number of VCO states when all the latches transition. illustrates the edge differentiator with a pulse width of 2 VCO states or TRO cycles which can include 2 FF delaying the OR result from the trigger latch and some simple logic. The event pulse can be combined with an inverted VCO signal in an AND gate to generate an event capture of the VCO states of the transition latches . The selected number of VCO states e.g. 3 events for the transition for the set of latches e.g. 8 latches per state for each sTDC component e.g. 5 sTDC components for the sbTDC can processed by the sbTDC encoder . In the example of each component can generate 8 stochastic flop values for each event so 40 flop outputs can be coupled to the sbTDC encoder for the 5 sTDC components.

The beating TDC bTDC can provide a course resolution and polarity detection i.e. to determine which oscillator e.g. TRO or VCO is faster in order to properly closed the loop between the VCO and TRO. The multiple phases of the VCO or TRO can be compared in order to detect the polarity as illustrated in . represents a comparison of two phases e.g. Iand Q of quadrature phases of the TRO signal generated by a triggered digitally controlled ring oscillator T DCRO . When a TRO signal frequency is faster than a VCO signal frequency i.e. f f A the TRO has a shorter pulse width and QG can lead IF in a clockwise direction which can generate a digital pattern 10 11 01 10 or 2 3 1 2 that is distinct from the case when the TRO signal frequency is slower than the VCO signal frequency i.e. f

The polarity detection can be embedded into the sbTDC circuit by distributing the stochastic TDC along the stages of the TRO e.g. triggered DCRO as shown in . The triggered DCRO can be a combination of enabled inverters and capacitor bank . The triggered DCRO allows balancing the load of each TRO stage and not loading all flops on one node. Although illustrates polarity detection for quadrature phases of the VCO polarity detection can be extended to any number of phases e.g. 5 phases as shown in . In an example polarity detection can be determined by a sbTDC encoder. Beyond embedding the polarity detection without requiring extra circuits polarity detection using the digital pattern and or an automatic gating circuit can shorten the period detection time to 1 1 no. of TRO stages which can result in shorter operation time of the sbTDC and thus less power.

The automatic gating circuit can be used to reset the sbTDC after each time to digital conversion. The sbTDC can start the detection operation with every edge e.g. rising edge of the reference clock. Once the circuit detects two transition event occurring at any tap i.e. full period completed at that tap the circuit can generate a reset signal that stops the sbTDC operation and holds the data until the next edge of the reference clock. The automatic gating circuit allows minimizing the convergence time of the operation of the sbTDC to what is required to resolve the data.

For example the automatic gating circuit can include a latch that pulses with each event pulse of the sTDC . A counter e.g. Johnson counter can count 6 pulses i.e. representing a full period of one of the phases and generate a signal for set reset SR NOR latch to generate set reset signal for the sbTDC.

In an example the sbTDC can have a similar power consumption to a flash TDC e.g. 4 mW but with a much finer resolution of 50 fs. The sbTDC can have low power consumption small footprint on a die area and or a high resolution.

Referring back to a stochastic beating time to digital converter sbTDC can include a triggered ring oscillator TRO a stochastic TDC sTDC a beating TDC bTDC a stochastic beating TDC sbTDC encoder and a digital frequency locked loop DFLL . The TRO e.g. a triggered digitally controlled ring oscillator triggered DCRO when triggered by a reference signal edge can generate a periodic TRO signal E with a TRO period that is a selected ratio of a voltage controlled oscillator VCO period. The TRO period can be greater than or less than the VCO period by the specified ratio. The sTDC with an event triggered memory or event driven memory EDM can include an sTDC component A E with a plurality of groups of latches e.g. delay flip flops D flip flops and . Each group of latches can be configured to sample and store a VCO state at an edge of a TRO signal and the sTDC component triggers a capture of a select number of VCO states of the group of latches when one latch in the group of latches transitions to a different digital state referred to as a transition edge. The edge can either be a rising edge or a falling edge of a signal e.g. the TRO signal or the reference signal . The reference signal can be generated by a reference signal generator .

In an example a beating TDC bTDC can count a number of the TRO periods from the reference signal edge E1 of to each transition edge E3 of . A transition edge can represent an event when a state of one latch in the group of latches transitions to a different digital state. The bTDC can include a circulating counter e.g. a linear feedback shift register LFSR to count each VCO state and a memory e.g. a serial in parallel out SIPO memory for capturing count values of the circulating counter at an event edge of one latch in a group of latches and a subsequent event edge of one latch in the group of latches. In another example the bTDC can include an automatic gating circuit can be configured to hold the captured count values and the captured selected number of VCO states until a subsequent trigger of a reference signal and to reset the TRO the sTDC and the bTDC after two event edges of one of the sTDC components A E. The event edge and the subsequent event edge can include a rising transition edge or a falling transition edge. In another configuration the automatic gating circuit can include a Johnson counter and a set reset SR NOR latch .

In another example the TRO includes a triggered DCRO to generate multiple phases e.g. 5 phases A E of the periodic TRO signal. The sTDC includes a plurality of the sTDC components A E. Each sTDC component uses a phase E of the periodic TRO signal. The bTDC digitally adds using an OR circuit the number of the TRO periods from the reference signal edge to each transition edge of each sTDC component.

In another example the stochastic beating TDC sbTDC encoder can generate digital representations of the VCO period and a polarity and the delay of a VCO signal relative to the periodic TRO signal E. The sbTDC encoder can generate least significant bits LSB for the digital representations derived from the captured selected number of VCO states from the sTDC the sbTDC encoder can generate most significant bits MSB for the digital representations derived from the captured count values from the memory of the bTDC and the sbTDC encoder can generate the polarity from the digital sequence of the multiple phases E of the periodic TRO signal captured by the count values. The polarity can determine when the periodic TRO signal has a frequency higher or lower than the VCO signal.

In another configuration the DFLL can control the frequency of the periodic TRO signal for the triggered DCRO using the period and the polarity e.g. sign generated by the sbTDC encoder . The DFLL can provide to the triggered DCRO a coarse resolution or lower resolution or MSB value e.g. 7 bits and a fine resolution or high resolution or LSB value based on an estimate derived from the sTDC.

In another example the TDC can have a resolution of M bits represented by 2 where M B C and B and C are positive integers. The number of VCO states for the VCO period Ncan represented by 2which can used to generate the MSB and C bits can be derived from the sTDC used for the LSB. The TRO period can be represented by N 1 or N 1. One of the group of latches configured to store the VCO state can use the periodic TRO signal E as an input to the latches and clocks the latches using the VCO signal from a digitally controlled oscillator DCO or VCO. The selected number of VCO states can be less than five VCO states e.g. 3 VCO shown in and and the transition edge can be a rising edge transition. In an example the TDC can have a resolution between 50 femtoseconds fs and 1 picosecond ps with an integrated phase noise iPN less than 45 decibels relative to a carrier dBc and an operating power of less than 10 milliwatts mW . In another configuration the TDC can be configured in a phase locked loop PLL such as the all digital phase locked loop ADPLL to generate a clock frequency within a band of an Institute of Electrical and Electronics Engineers IEEE 802.11ac or 802.11 ad standards IEEE 802.16e or IEEE 802.16m 2011 standards or third generation partnership project 3GPP long term evolution LTE standard Release 8 9 10 or 11.

In another example the TDC e.g. sbTDC or the PLL e.g. ADPLL can be included in a wireless device or a node. provides an example illustration of the wireless device such as an user equipment UE a mobile station MS a mobile wireless device a mobile communication device a tablet a handset or other type of wireless device. The wireless device can include one or more antennas configured to communicate with a node macro node low power node LPN or transmission station such as a base station BS an evolved Node B eNB a baseband unit BBU a remote radio head RRH a remote radio equipment RRE a relay station RS a radio equipment RE a central processing module CPM or other type of wireless wide area network WWAN access point. The wireless device can be configured to communicate using at least one wireless communication standard including 3GPP LTE WiMAX High Speed Packet Access HSPA Bluetooth and WiFi. The wireless device can communicate using separate antennas for each wireless communication standard or shared antennas for multiple wireless communication standards. The wireless device can communicate in a wireless local area network WLAN a wireless personal area network WPAN and or a WWAN.

Another example provides a method for stochastic beating time to digital conversion as shown in the flow chart in . The method may be executed as instructions on a machine or computer circuitry where the instructions are included on at least one computer readable medium or one non transitory machine readable storage medium. A stochastic beating time to digital converter can have computer circuitry to perform the method . The computer circuitry can be configured to generate a periodic ring oscillator signal having a triggered ring oscillator TRO period that is triggered from a reference signal edge wherein the TRO period is a selected ratio of a digitally controlled oscillator DCO period and the TRO period is greater than or less than the DCO period by a specified fraction of the DCO period as in block . The computer circuitry can be further configured to temporarily store a selected number of DCO states at an edge of a TRO signal clocked by a DCO signal in a stochastic TDC sTDC component wherein each DCO state is stored in a group of latches the edge is either a rising edge or a falling edge of a signal as in block . The computer circuitry can also be configured to capture the selected number of DCO states using the sTDC component when one latch in the group of latches transitions from a digital zero to a digital one wherein the selected number of DCO states captures transitions for all of the latches in the group as in block .

In an example the computer circuitry can be further configured to Count the DCO states via clocking the DCO signal using a linear feedback shift register LFSR in a beating TDC bTDC and capture count values of the LFSR in a serial in parallel out SIPO memory at a rising transition edge of an output of one latch in the group of latches and a subsequent rising transition edge of an output of one latch in the group of latches.

In another example the computer circuitry configured to generate a periodic ring oscillator signal can be further configured to generate multiple phases of the periodic ring oscillator signal. The computer circuitry configured to store and capture the selected number of DCO states can be further configured to store and capture the selected number of DCO states for each phase of the periodic ring oscillator signal in an sTDC. The sTDC can include a plurality of sTDC components and each sTDC component can use a phase of the periodic ring oscillator signal as an input signal.

In another configuration the computer circuitry can be further configured to Reset the TRO the sTDC and the bTDC after two rising transition edges from a sampling output of one of the sTDC components using an automatic gating circuit and hold the captured count values and the captured selected number of DCO states until a subsequent trigger of a reference signal. The automatic gating circuit can include a Johnson counter to count a rising transition edge from each of the sTDC components. An output of the Johnson counter can be coupled to a latch to perform the reset. The Johnson counter can count a number that is one greater than the number of sTDC components.

In another example the computer circuitry can be further configured to Generate a digital representation of the DCO period including period least significant bits LSB and period most significant bits MSB where the period LSB can be derived using the captured selected number of DCO states from the sTDC and the period MSB can be derived using the captured count values from the SIPO memory of the bTDC and generate a delay of the DCO signal relative to the periodic ring oscillator signal including delay LSB and delay MSB where the delay LSB can be derived using the captured selected number of DCO states from the sTDC and the delay MSB can be derived using the captured count values from the SIPO memory of the bTDC or generate a polarity of the DCO signal relative to the periodic ring oscillator signal from the captured count values from the SIPO memory of the bTDC for at least two of the sTDC components where the polarity can determine when the periodic ring oscillator signal has a frequency lower than the DCO signal.

In another configuration the computer circuitry can be further configured to generate the periodic ring oscillator signal for the TRO using the DCO period and the polarity generated by the sbTDC encoder. In an example the computer circuitry can be configured in a phase locked loop PLL to generate a clock frequency in a range of 4.8 to 6 Gigahertz GHz with an integrated phase noise iPN of less than 45 decibels relative to a carrier dBc and an operating power of between 1 and 5 milliwatts mW .

Another example provides a method for time to digital conversion as shown in the flow chart in . The method may be executed as instructions on a machine or computer circuitry where the instructions are included on at least one computer readable medium or one non transitory machine readable storage medium. The method includes the operation of generating a periodic triggered ring oscillator TRO signal having a TRO period that is triggered from a reference signal edge wherein the TRO period is a selected ratio of a voltage controlled oscillator VCO period and the TRO period is greater than or less than the VCO period by a fraction of the VCO period as in block . The operation of generating least significant bits LSB for a stochastic beating time to digital conversion follows by Capturing a selected number of VCO states of the periodic TRO signal clocked by a VCO signal wherein each VCO state is stored in a group of latches and generating the digital representation of the LSB of the VCO period and a delay of the VCO signal relative to the periodic TRO signal via a stochastic beating time to digital converter sbTDC encoder using the captured selected number of VCO states as in block . The next operation of the method can be generating most significant bits MSB for a stochastic beating time to digital conversion by Counting the VCO states clocked by the VCO signal using a circulating counter in a beating TDC bTDC capturing count values of the circulating counter in a memory at an event edge of one latch in the group of latches and a subsequent event edge of one latch in the group of latches and generating the digital representation of the MSB of the VCO period and a delay of the VCO signal relative to the periodic TRO signal via the sbTDC encoder using the captured count values from the memory of the bTDC as in block .

In an example the operation of generating a periodic TRO signal can further include generating multiple phases of the periodic TRO signal. The operation of capturing a selected number of VCO states can further include capturing the selected number of VCO states for each phase of the periodic TRO signal. The selected number of VCO states can capture transitions for the latches in the group for each phase.

In another example the method can further include generating a polarity of the VCO signal relative to the periodic TRO signal from the captured count values from the memory for at least two phases of the periodic TRO signal. In another configuration the method can further include generating the periodic TRO signal for the TRO using the VCO period and the polarity.

In another example the method can further include Transferring the captured count values for an event edge of each phase of the periodic TRO signal to the sbTDC encoder resetting a TRO generating the periodic TRO signal the group of latches capturing the selected number of VCO states and the memory for capturing the count values and holding the captured count values and the captured selected number of VCO states until a subsequent trigger of a reference signal.

Various techniques or certain aspects or portions thereof may take the form of program code i.e. instructions embodied in tangible media such as floppy diskettes CD ROMs hard drives non transitory computer readable storage medium or any other machine readable storage medium wherein when the program code is loaded into and executed by a machine such as a computer the machine becomes an apparatus for practicing the various techniques. Circuitry can include hardware firmware program code executable code computer instructions and or software. A non transitory computer readable storage medium can be a computer readable storage medium that does not include signal. In the case of program code execution on programmable computers the computing device may include a processor a storage medium readable by the processor including volatile and non volatile memory and or storage elements at least one input device and at least one output device. The volatile and non volatile memory and or storage elements may be a RAM EPROM flash drive optical drive magnetic hard drive solid state drive or other medium for storing electronic data. The node and wireless device may also include a transceiver module a counter module a processing module and or a clock module or timer module. One or more programs that may implement or utilize the various techniques described herein may use an application programming interface API reusable controls and the like. Such programs may be implemented in a high level procedural or object oriented programming language to communicate with a computer system. However the program s may be implemented in assembly or machine language if desired. In any case the language may be a compiled or interpreted language and combined with hardware implementations.

It should be understood that many of the functional units described in this specification have been labeled as modules in order to more particularly emphasize their implementation independence. For example a module may be implemented as a hardware circuit comprising custom VLSI circuits or gate arrays off the shelf semiconductors such as logic chips transistors or other discrete components. A module may also be implemented in programmable hardware devices such as field programmable gate arrays programmable array logic programmable logic devices or the like.

Modules may also be implemented in software for execution by various types of processors. An identified module of executable code may for instance comprise one or more physical or logical blocks of computer instructions which may for instance be organized as an object procedure or function. Nevertheless the executables of an identified module need not be physically located together but may comprise disparate instructions stored in different locations which when joined logically together comprise the module and achieve the stated purpose for the module.

Indeed a module of executable code may be a single instruction or many instructions and may even be distributed over several different code segments among different programs and across several memory devices. Similarly operational data may be identified and illustrated herein within modules and may be embodied in any suitable form and organized within any suitable type of data structure. The operational data may be collected as a single data set or may be distributed over different locations including over different storage devices and may exist at least partially merely as electronic signals on a system or network. The modules may be passive or active including agents operable to perform desired functions.

Reference throughout this specification to an example means that a particular feature structure or characteristic described in connection with the example is included in at least one embodiment of the present invention. Thus appearances of the phrases in an example in various places throughout this specification are not necessarily all referring to the same embodiment.

As used herein a plurality of items structural elements compositional elements and or materials may be presented in a common list for convenience. However these lists should be construed as though each member of the list is individually identified as a separate and unique member. Thus no individual member of such list should be construed as a de facto equivalent of any other member of the same list solely based on their presentation in a common group without indications to the contrary. In addition various embodiments and example of the present invention may be referred to herein along with alternatives for the various components thereof. It is understood that such embodiments examples and alternatives are not to be construed as defacto equivalents of one another but are to be considered as separate and autonomous representations of the present invention.

Furthermore the described features structures or characteristics may be combined in any suitable manner in one or more embodiments. In the following description numerous specific details are provided such as examples of layouts distances network examples etc. to provide a thorough understanding of embodiments of the invention. One skilled in the relevant art will recognize however that the invention can be practiced without one or more of the specific details or with other methods components layouts etc. In other instances well known structures materials or operations are not shown or described in detail to avoid obscuring aspects of the invention.

While the forgoing examples are illustrative of the principles of the present invention in one or more particular applications it will be apparent to those of ordinary skill in the art that numerous modifications in form usage and details of implementation can be made without the exercise of inventive faculty and without departing from the principles and concepts of the invention. Accordingly it is not intended that the invention be limited except as by the claims set forth below.

