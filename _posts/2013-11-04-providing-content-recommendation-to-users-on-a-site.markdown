---

title: Providing content recommendation to users on a site
abstract: The disclosure includes a system and method for providing content recommendation to users on a site. The system includes a processor and a memory storing instructions that, when executed, cause the system to: receive data describing a page on a site visited by a first user; query one or more sources to retrieve one or more candidate items for the first user; determine one or more source types related to the one or more candidate items; determine one or more scores for the one or more candidate items based on an interest profile and the one or more source types; rank the one or more candidate items; determine that an invitation trigger event causing a presentation of an invitation state occurs; determine that a recommendation trigger event causing a presentation of a recommendation state occurs during the invitation state; and provide a recommendation state to the first user.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09355415&OS=09355415&RS=09355415
owner: Google Inc.
number: 09355415
owner_city: Mountain View
owner_country: unknown
publication_date: 20131104
---
This application claims priority under 35 USC 119 e to U.S. Application No. 61 725 410 entitled Providing Content Recommendation to Users on a Site filed Nov. 12 2012 the entirety of which is herein incorporated by reference.

Mobile web browsing has grown tremendously. People use their mobile devices to perform various activities including but not limited to visiting online social networks browsing web pages viewing videos and or listening to online music etc. Mobile users usually visit a web page on a third party site by clicking on a link posted in an application or service installed on their mobile devices. For example a mobile user visits a web page on a third party site by clicking on a link posted on a social feed in a social network. After consuming the single web page on the third party site the mobile users usually bounce back to the application or service that originally provides the link to them. This phenomenon can be referred to as a side door problem for third party sites. The high bounce rates on third party sites are undesirable for third party publishers.

According to one innovative aspect of the subject matter described in this disclosure a system for providing content recommendation to users on a site includes a processor and a memory storing instructions that when executed cause the system to receive data describing a page on a site visited by a first user query one or more sources to retrieve one or more candidate items from the site for the first user determine one or more source types related to the one or more candidate items determine one or more scores for the one or more candidate items based on an interest profile associated with the first user and the one or more source types rank the one or more candidate items determine that an invitation trigger event causing a presentation of an invitation state occurs provide the invitation state to the first user determine that a recommendation trigger event causing a presentation of a recommendation state occurs during the presentation of the invitation state and provide the recommendation state to the first user the recommendation state including one or more of the ranked candidate items.

In general another innovative aspect of the subject matter described in this disclosure may be embodied in methods that include receiving data describing a page on a site visited by a first user querying one or more sources to retrieve one or more candidate items from the site for the first user determining one or more source types related to the one or more candidate items determining one or more scores for the one or more candidate items based on an interest profile associated with the first user and the one or more source types ranking the one or more candidate items determining that an invitation trigger event causing a presentation of an invitation state occurs providing the invitation state to the first user determining that a recommendation trigger event causing a presentation of a recommendation event occurs during the presentation of the invitation state and providing the recommendation state to the first user the recommendation state including one or more of the ranked candidate items.

Other aspects include corresponding methods systems apparatus and computer program products for these and other innovative aspects.

These and other implementations may each optionally include one or more of the following features. For instance the features include the one or more sources including one or more of a social source an authorship source a relevant source and a popular source querying a social source to retrieve a social item that has a user activity performed by a second user who is connected to the first user in a social graph the social item from the same site as the page and being included in the one or more candidate items content in the page being provided by an author querying an authorship source to retrieve an authorship item that is provided by the same author the authorship item from the same site as the page and being included in the one or more candidate items querying a relevant source to retrieve a relevant item the relevant item from the same site as the page and being included in the one or more candidate items determining one or more topics related to the page cross referencing the one or more topics with the interest profile of the first user to obtain a matching topic generating a query that includes an address of the page and the matching topic sending the query to the relevant source receiving a set of relevant items related to the matching topic from the relevant source determining a recurring topic from the set of relevant items determining the relevant item as one related to the recurring topic from the set of relevant items and the recommendation state including one or more action cards for performing one or more engagement actions associated with the one or more of the ranked candidate items.

The specification may be particularly advantageous in a number of respects. First the system provides recommended content to users that visit a page on a site. The recommended content includes candidate items from the same site facilitating the users to discover a variety of topics on the site and to be more engaged on the site. Second the recommended content may increase page views per visit for a site and therefore reduce bounce rates for the site. Third the recommended content can be personalized for the users based on one or more of interest profiles of the users content on the page and connections in a social graph. Fourth the recommended content can be optimized for mobile web browsing.

The user devices in are used by way of example. While illustrates two user devices and the present disclosure applies to a system architecture having one or more user devices . Furthermore although illustrates one network coupled to the user devices the social network server the publisher server the source server and the second server in practice one or more networks can be connected to these entities.

In some implementations the widget application may be operable on the publisher server which is coupled to the network via signal line . In some implementations the publisher server can be a hardware server that includes a processor a memory and network communication capabilities. The publisher server sends and receives data to and from other entities of the system via the network . While includes one publisher server the system may include one or more publisher servers . In some implementations the publisher server publishes content on a site and provides the content to users who visit the site.

In some implementations the widget application may be stored on a second server which is connected to the network via signal line . In some implementations the second server can be a hardware server that includes a processor a memory and network communication capabilities. The second server sends and receives data to and from other entities of the system via the network . While includes one second server the system may include one or more second servers . In some implementations the second server publishes content on a site and provides the content to users who visit the site.

The widget application can be code and routines for providing content recommendation to users on a site. In some implementations the widget application can be implemented using hardware including a field programmable gate array FPGA or an application specific integrated circuit ASIC . In some other implementations the widget application can be implemented using a combination of hardware and software. In some implementations the widget application may be stored in a combination of the devices and servers or in one of the devices or servers. The widget application is described below in more detail with reference to .

In some implementations the widget application may be operable on the social network server which is coupled to the network via signal line . The social network server can be a hardware server that includes a processor a memory and network communication capabilities. In some implementations the social network server sends and receives data to and from one or more of the user devices the source server the publisher server and the second server via the network . The social network server includes a social network application . A social network can be a type of social structure where the users may be connected by a common feature. The common feature includes relationships connections e.g. friendship family work an interest etc. The common features may be provided by one or more social networking systems including explicitly defined relationships and relationships implied by social connections with other online users where the relationships form a social graph. In some examples the social graph can reflect a mapping of these users and how they can be related. Furthermore the social network server and the social network application may be representative of one social network and that there may be multiple social networks coupled to the network each having its own server application and social graph. For example a first social network may be more directed to business networking a second may be more directed to or centered on academics a third may be more directed to local business a fourth may be directed to dating and others may be of general interest or a specific focus.

The source server can be a hardware server that includes a processor a memory and network communication capabilities. The source server sends and receives data to and from other entities of the system via the network . While includes one source server the system may include one or more source servers . In some implementations the source server receives a query from the widget application and retrieves candidate items matching the query from a storage device not pictured . The source server sends the matching candidate items to the widget application . Examples of a candidate item include but are not limited to an article a page e.g. a Uniform Resource Locator URL of a page an image of the page a hyperlink to the page etc. an image a video a multi user communication session a location check in a post a comment an endorsement and a share with other users etc. In the illustrated implementation the source server includes a social source module an authorship source module a relevant source module and a popular source module .

The social source module can be code and routines for providing social items from a social source. A social source can be a data source that provides one or more social items related to a user to the widget application . A social item related to a first user can be a candidate item that has one or more user activities performed by a second user who can be socially connected to the first user in a social graph. For example a social item can be a candidate item on a site that a friend in a social graph has commented on endorsed shared and or recommended. In another example a social item can be a post a comment an endorsement a share a share with comments or a recommendation on a site performed by a friend in a social graph. Other examples of social items are possible.

In some implementations a share and or a share with comments can be public user activities. In some other implementations a share and or a share with comments can be private user activities with user consent to share with other users connected in a social graph. For example the private shares from a second user connected to a first user in a social graph may be considered as social items for the first user if the second user has authorized to share the activities with the first user. If the second user does not authorize to share the activities with the first user the private activities may not be considered as social items for the first user.

In some implementations the social source module receives a query from the widget application . The query includes data describing an address of a page that a user may be currently visiting e.g. a URL and identification data that identifies the user e.g. a user identifier in a social network . The social source module determines a domain or a site that hosts the page using the address of the page. The social source module cooperates with the social network application to determine one or more social items for the user that have been published on the same domain or the same site. In some implementations the one or more social items can be candidate items from different domains or different sites. The social source module sends the one or more social items for the user to the widget application via the network .

The authorship source module can be code and routines for providing authorship items from an authorship source. An authorship source can be a data source that provides one or more authorship items to the widget application . An authorship item can be a candidate item that has the same authorship as content on a page visited by a user. For example if a user visits a page with content on the page provided by an author an authorship item can be a candidate item published on the same site and provided by the same author as the content on the page. In another example an authorship item can be a candidate item that the same author has provided on the same site and shared on a social network. In yet another example an authorship item can be a candidate item provided by the same author and published on a different site. Other examples of authorship items are possible.

In some implementations the authorship source module generates an authorship annotation for each candidate item. An authorship annotation can be data describing an author of a candidate item. For example an authorship annotation includes an author identifier identifying an author of the candidate item a timestamp identifying a time the candidate item was published an address e.g. a URL where the candidate item was published and other metadata related to the authorship e.g. a photo of the author an occupation of the author etc. .

In some implementations the authorship source module receives a query from the widget application which includes data describing an address of a page that a user may be currently visiting. The authorship source module determines a domain or a site that hosts the page using the address of the page. The authorship source module determines an authorship for the page. For example the authorship source module retrieves an authorship annotation associated with the page and determines an author that provides content on the page. The authorship source module determines one or more authorship items for the user. For example the authorship source module determines one or more authorship items for the user in part by 1 cross referencing the authorship of the page with authorship annotations related to a set of candidate items published on the same site and 2 determining the one or more authorship items as the candidate items having the same author as the content on the page. The authorship source module sends the one or more authorship items to the widget application . The authorship source module is further described below with reference to .

The relevant source module can be code and routines for providing relevant items from a relevant source. A relevant source can be a data source that provides one or more relevant items to the widget application . A relevant item can be a candidate item whose topic relates a topic on a page visited by a user. For example if a user visits a page on a site a relevant item can be a candidate item on the same site that has the same topic as the topic on the page. In another example a relevant item can be a candidate item on the same site that has another topic related to the topic on the page. Other examples of relevant items are possible. In some implementations a relevant item can be presented as a candidate item that people who read this page also view this candidate item. In some other implementations a relevant item can be presented as a candidate item that this candidate item can be popular with people who like the topic on the page. Further examples of relevant items are illustrated with reference to .

In some implementations the relevant source module receives a query from the widget application . The query includes data describing an address of a page e.g. a URL currently visited by a user and or data describing a matching topic for the page. A matching topic can be a topic on the page that matches an interest profile of the user. The interest profile is described below in more detail with reference to . The relevant source module determines a domain or a site that hosts the page using the address of the page. The relevant source module determines one or more relevant items for the user. For example the relevant source module determines one or more relevant items as one or more candidate items from the same site that either have the same topic as the matching topic or have a topic related to the matching topic. The relevant source module sends the one or more relevant items to the widget application . The relevant source module is further described below with reference to .

The popular source module can be code and routines for providing popular items from a popular source. A popular source can be a data source that provides one or more popular items to the widget application . A popular item can be a candidate item that has a number of user activities greater than a predetermined threshold in a specific period of time. For example a popular item can be a candidate item having a number of views greater than a predetermined threshold in a specific period of time. In a further example a popular item can be a candidate item having at least 5 000 views in a week. In other examples a popular time can be a candidate item that has a number of comments a number of shares and or a number of endorsements greater than predetermined thresholds in a specific time period. In some implementations a popular item can be a trending candidate item on a site. In some implementations the popular items can be top ranking candidate items on a site. For example the popular items can be the top 10 stories or the top 5 articles on a site. Other examples of popular items are possible.

In some implementations the popular source module receives a query from the widget application . The query includes data describing an address of a page e.g. a URL currently visited by a user. The popular source module determines a domain or a site that hosts the page using the address of the page. The popular source module determines one or more popular items from the same site or the same domain for the user. For example the popular source module determines one or more popular items as one or more candidate items from the same site that have at least 10 000 views in two weeks. The popular source module sends the one or more popular items to the widget application .

The user device may be a computing device that includes a memory and a processor for example a laptop computer a desktop computer a tablet computer a mobile telephone a personal digital assistant PDA a mobile email device a portable game player a portable music player a reader device a television with one or more processors embedded therein or coupled thereto or other electronic device capable of accessing a network . In the illustrated implementation the user device is communicatively coupled to the network via signal line . The user interacts with the user device . The user device is communicatively coupled to the network via signal line . The user interacts with the user device . In some implementations the widget application acts in part as a thin client application that may be stored on the user devices and in part as components that may be stored on one or more of the servers.

The network can be a conventional type wired or wireless and may have numerous different configurations including a star configuration token ring configuration or other configurations. Furthermore the network may include a local area network LAN a wide area network WAN e.g. the Internet and or other interconnected data paths across which multiple devices may communicate. In some implementations the network may be a peer to peer network. The network may also be coupled to or includes portions of a telecommunications network for sending data in a variety of different communication protocols. In some implementations the network includes Bluetooth communication networks or a cellular communications network for sending and receiving data including via short messaging service SMS multimedia messaging service MMS hypertext transfer protocol HTTP direct data connection WAP email etc.

Referring now to an example of the widget application is shown in more detail. is a block diagram of a computing device that includes a widget application a processor a memory a communication unit and a storage device according to some examples. The components of the computing device are communicatively coupled by a bus . In some implementations the computing device can be one of a publisher server a social network server and a second server .

The processor includes an arithmetic logic unit a microprocessor a general purpose controller or some other processor array to perform computations and provide electronic display signals to a display device. The processor is coupled to the bus for communication with the other components via signal line . Processor processes data signals and may include various computing architectures including a complex instruction set computer CISC architecture a reduced instruction set computer RISC architecture or an architecture implementing a combination of instruction sets. Although includes a single processor multiple processors may be included. Other processors operating systems sensors displays and physical configurations can be possible.

The memory stores instructions and or data that may be executed by the processor . The memory is coupled to the bus for communication with the other components via signal line . The instructions and or data may include code for performing the techniques described herein. The memory may be a dynamic random access memory DRAM device a static random access memory SRAM device flash memory or some other memory device. In some implementations the memory also includes a non volatile memory or similar permanent storage device and media including a hard disk drive a floppy disk drive a CD ROM device a DVD ROM device a DVD RAM device a DVD RW device a flash memory device or some other mass storage device for storing information on a more permanent basis.

The communication unit transmits and receives data to and from at least one of the user device the second server the source server the publisher server and the social network server depending upon where the widget application may be stored. The communication unit is coupled to the bus via signal line . In some implementations the communication unit includes a port for direct physical connection to the network or to another communication channel. For example the communication unit includes a USB SD CAT 5 or similar port for wired communication with the user device . In some implementations the communication unit includes a wireless transceiver for exchanging data with the user device or other communication channels using one or more wireless communication methods including IEEE 802.11 IEEE 802.16 BLUETOOTH or another suitable wireless communication method.

In some implementations the communication unit includes a cellular communications transceiver for sending and receiving data over a cellular communications network including via short messaging service SMS multimedia messaging service MMS hypertext transfer protocol HTTP direct data connection WAP e mail or another suitable type of electronic communication. In some implementations the communication unit includes a wired port and a wireless transceiver. The communication unit also provides other conventional connections to the network for distribution of files and or media objects using standard network protocols including TCP IP HTTP HTTPS and SMTP etc.

The storage device can be a non transitory memory that stores data for providing the functionality described herein. The storage device may be a dynamic random access memory DRAM device a static random access memory SRAM device flash memory or some other memory devices. In some implementations the storage device also includes a non volatile memory or similar permanent storage device and media including a hard disk drive a floppy disk drive a CD ROM device a DVD ROM device a DVD RAM device a DVD RW device a flash memory device or some other mass storage device for storing information on a more permanent basis. In the illustrated implementation the storage device is communicatively coupled to the bus via signal line .

In some implementations the storage device stores one or more of configuration data describing a configuration for content recommendation on a site candidate items retrieved from one or more sources e.g. social items authorship items relevant items and popular items metadata associated with the candidate items score data describing scores for candidate items and or profile data describing an interest profile of a user upon the consent of the users. The configuration data metadata score data and profile data are described below in more detail.

In the illustrated implementation shown in the widget application includes a controller a configuration module a candidate retrieval module a metadata retrieval module a mixing module a trigger module a producer module and a user interface module . These components of the widget application are communicatively coupled to each other via the bus .

The controller can be software including routines for handling communications between the widget application and other components of the computing device . In some implementations the controller can be a set of instructions executable by the processor to provide the functionality described below for handling communications between the widget application and other components of the computing device . In some other implementations the controller can be stored in the memory of the computing device and can be accessible and executable by the processor . The controller may be adapted for cooperation and communication with the processor and other components of the computing device via signal line .

In some implementations the controller sends and receives data via the communication unit to and from one or more devices and servers in the system . For example the controller receives a query from the candidate retrieval module and sends the query via the network to one or more of the social source module the authorship source module the relevant source module and the popular source module . In another example the controller receives via the communication unit data describing one or more candidate items retrieved from one or more sources and sends the data to the candidate retrieval module .

In some implementations the controller handles communications between different components of the widget application . For example the controller receives data describing candidate items from the candidate retrieval module and sends the data to the metadata retrieval module and or the mixing module . In another example the controller receives metadata from the metadata retrieval module and sends the metadata to the mixing module .

In some implementations the controller receives data from components of the widget application and stores the data in the storage device . For example the controller receives score data describing one or more scores from the mixing module and stores the score data in the storage device . In some implementations the controller retrieves data from the storage device and sends the data to components of the widget application . For example the controller retrieves profile data describing an interest profile of a user from the storage device and sends the profile data to the mixing module .

The configuration module can be software including routines for configuring content recommendation on a site. In some implementations the configuration module can be a set of instructions executable by the processor to provide the functionality described below for configuring content recommendation on a site. In some other implementations the configuration module can be stored in the memory of the computing device and can be accessible and executable by the processor . The configuration module may be adapted for cooperation and communication with the processor and other components of the computing device via signal line .

In some implementations the configuration module receives input data from an administrator of a site and configures a site setting for content recommendation using the input data. A site setting can be data indicating whether to activate or deactivate the content recommendation functionality on a site. For example the configuration module generates a site setting that activates the content recommendation functionality on the site based on input data indicating the activation of the content recommendation functionality. In another example the configuration module generates a site setting that deactivates the content recommendation functionality on the site based on input data indicating the deactivation of the content recommendation functionality.

In some implementations the configuration module receives input data from a user visiting a page on a site and configures a user setting for the user using the input data. A user setting can be data indicating whether to activate or deactivate the content recommendation functionality on a site for a particular user. For example if the input data indicates that a particular user chooses to deactivate content recommendation on the site the configuration module generates a user setting to deactivate the content recommendation functionality for the particular user on the site. In another example if an administrator of the site already activates the content recommendation functionality for the site and the input data from a particular user indicates that the particular user chooses to activate content recommendation on the site the configuration module generates a user setting to activate the content recommendation functionality for the particular user.

In some implementations the configuration module configures one or more display settings for an invitation state and or a recommendation state. The invitation state and the recommendation state are described below in more detail. A display setting can be data describing instructions on how to present an invitation state and or a recommendation state. For example a display setting indicates to present an invitation state as an overlay bar having a height of fifty pixels that pushes up from a bottom of a browser if an invitation trigger event occurs. In another example a display setting indicates to present a recommendation state as a modal overlay on a page. Other examples of display settings include but are not limited to embedding an invitation state directly into a page sliding content on a page off screen and presenting a recommendation state at the bottom of the page if a recommendation trigger event occurs an amount of content to be displayed in an invitation state and an amount of content to be displayed in a recommendation state etc. In some implementations the configuration module receives input data from an administrator of a site and configures one or more display settings for a site using the input data.

An invitation trigger event can be data describing one or more conditions under which an invitation state can be presented to a user. Examples of an invitation trigger event include but are not limited to 1 presence of qualified candidate items for the site and the user e.g. presence of social items authorship items relevant items popular items etc. from the same site for the user 2 a time duration that the user has spent on the page may be greater than a time threshold e.g. the user has stayed on the page for more than 2 minutes 3 the user has scrolled to a specified location of the page e.g. the user has scrolled down to two thirds of the page 4 a tag for presenting an invitation state may be deployed at the end of the content body on the page. Other examples of an invitation trigger event are possible.

A recommendation trigger event can be data describing one or more conditions under which a recommendation state can be presented to a user. For example a recommendation trigger event can be that a user taps or clicks on the invitation state. In another example a recommendation trigger event can be that a cursor hovers over the invitation state. Other examples of a recommendation trigger event are possible.

In some implementations the configuration module configures one or more trigger settings for an invitation trigger event and or a recommendation trigger event. A trigger setting can be data describing one or more requirements under which an invitation trigger event and or a recommendation trigger event occur. For example a trigger setting indicates a time threshold or a specific location of a page for determining whether an invitation trigger event has occurred. Other examples of a trigger setting are possible. In some implementations the configuration module receives input data from an administrator of a site and configures one or more trigger settings for a site using the input data.

In some implementations the configuration module stores configuration data describing one or more of a site setting a user setting a display setting and a trigger setting in the storage device . In some implementations the configuration module sends the configuration data to one or more of the candidate retrieval module the trigger module and or the producer module .

The candidate retrieval module can be software including routines for retrieving one or more candidate items from one or more sources. In some implementations the candidate retrieval module can be a set of instructions executable by the processor to provide the functionality described below for retrieving one or more candidate items from one or more sources. In some other implementations the candidate retrieval module can be stored in the memory of the computing device and can be accessible and executable by the processor . The candidate retrieval module may be adapted for cooperation and communication with the processor and other components of the computing device via signal line .

In some implementations the candidate retrieval module generates a query that includes an address of a page visited by a user and identification data identifying the user. The candidate retrieval module queries the social source by sending the query to the social source module and receives one or more social items for the user from the social source. For example the candidate retrieval module queries the social source to retrieve a social item that has been published on the same site as the page and recommended by a friend of the user.

In some implementations the candidate retrieval module generates a query that includes an address of a page visited by a user. The candidate retrieval module queries the authorship source by sending the query to the authorship source module and receives one or more authorship items for the user from the authorship source. For example the candidate retrieval module queries the authorship source to retrieve an authorship item provided by the same author of the content on the page. The authorship item can be published on the same site as the page.

In some implementations the candidate retrieval module generates a query that includes an address of a page visited by a user. The candidate retrieval module queries the popular source by sending the query to the popular source module and receives one or more popular items for the user from the popular source. For example the candidate retrieval module queries the popular source to retrieve a popular item having the greatest views on the site. The popular item can be published on the same site as the page.

In some implementations the candidate retrieval module generates a query that includes an address of a page visited by a user. The candidate retrieval module queries the relevant source by sending the query to the relevant source module and receives one or more relevant items for the user from the relevant source. For example the candidate retrieval module queries the relevant source to retrieve a relevant item that can be represented as people who view the page also view this candidate item. 

In some implementations the candidate retrieval module determines one or more topics related to a page currently visited by a user. Examples of a topic include but are not limited to news pop music funny stories vacations science fiction adventure fiction etc. The candidate retrieval module cross references the one or more topics related to the page with an interest profile of the user to obtain a matching topic. An interest profile can be data describing what a user may be interested in. For example the interest profile includes an interest a hobby a personal preference demographic data etc. associated with a user and or one or more topics that the user may be interested in. A matching topic can be a topic that matches an interest profile of a user. For example if a page visited by a user relates to a science fiction topic and an interest profile indicates that the user loves technology and science the candidate retrieval module determines the matching topic as the science fiction topic. The candidate retrieval module generates a query that includes an address of the page and the matching topic and sends the query to the relevant source module . The candidate retrieval module receives one or more relevant items that match the matching topic from the relevant source. The one or more relevant items can be represented as candidate items popular with people who love the matching topic. 

Optionally the candidate retrieval module determines one or more topics related to the one or more relevant items and determines a recurring topic from the one or more topics. The candidate retrieval module determines a subset of relevant items from the one or more relevant items that relates to the recurring topic. A recurring topic can be a topic that appears more than once in one or more candidate items. For example the candidate retrieval module receives 3 relevant items related to science fiction including 1 a first relevant item describing images for best science fiction movies 2 a second relevant item describing a review for best science fiction movies and 3 a third relevant item describing a life story of a science fiction novelist. The candidate retrieval module determines a recurring topic as best science fiction movies and determines a subset of relevant items related to the recurring topic including the first relevant item and the second relevant item.

By performing operations similar to those described above the candidate retrieval module queries one or more different sources to retrieve a set of candidate items via the network . The one or more different sources include a social source an authorship source a relevant source and a popular source. The set of candidate items include one or more of social items relevant items or a subset of relevant items related to a recurring topic authorship items and popular items. The candidate retrieval module optionally compiles a list of candidate items from the set of candidate items. The candidate retrieval module optionally filters the set of candidate items by a specific domain that the page belongs to so that the filtered candidate items originate from the same site as the page. The candidate retrieval module sends the set of candidate items to the metadata retrieval module and or the mixing module .

The metadata retrieval module can be software including routines for retrieving metadata associated with one or more candidate items. In some implementations the metadata retrieval module can be a set of instructions executable by the processor to provide the functionality described below for retrieving metadata associated with one or more candidate items. In some other implementations the metadata retrieval module can be stored in the memory of the computing device and can be accessible and executable by the processor . The metadata retrieval module may be adapted for cooperation and communication with the processor and other components of the computing device via signal line .

In some implementations the metadata retrieval module receives one or more candidate items from the candidate retrieval module and retrieves metadata associated with the one or more candidate items from one or more sources that provide the candidate items. Examples of metadata associated with a candidate item include but are not limited to a thumbnail a title keywords a timestamp indicating a time the candidate item was published social activity data associated with the candidate item e.g. a number of comments endorsements shares recommendations etc. associated with the candidate item and one or more topics involved in the candidate item etc. The metadata retrieval module sends the one or more candidate items and or the associated metadata to the mixing module .

The mixing module can be software including routines for managing one or more candidate items. In some implementations the mixing module can be a set of instructions executable by the processor to provide the functionality described below for managing one or more candidate items. In some other implementations the mixing module can be stored in the memory of the computing device and can be accessible and executable by the processor . The mixing module may be adapted for cooperation and communication with the processor and other components of the computing device via signal line .

In some implementations the mixing module receives one or more candidate items and the associated metadata from the candidate retrieval module and or the metadata retrieval module . The mixing module determines a score for each candidate item so that one or more scores can be generated for the one or more candidate items. In some implementations the mixing module determines a score for a candidate item based on one or more score factors. For example if a score factor indicates that 1 a first topic in a first candidate item matches an interest profile of the user and 2 a second topic in a second candidate item does not match the interest profile of the user the mixing module determines a higher score for the first candidate item than the second candidate item. In another example if a score factor indicates that a number of friends that have endorsed commented on and or shared a first candidate item exceed that of a second candidate item the mixing module determines a higher score for the first candidate item than the second candidate item.

A score factor can be data describing a parameter for determining a score. Examples of score factors include but are not limited to a publication time of the candidate item a degree of similarity between topics in the candidate item and a user s interest profile a degree of similarity between topics in the candidate item and topics related to the page currently visited by the user a number of other users connected to the user in a social graph that have performed social activities on the candidate item e.g. a number of friends that have endorsed commented on and or shared the candidate item a number of other users that may or may not be connected to the user in a social graph and that have performed social activities on the candidate item e.g. a total number of users that endorsed commented on or shared the candidate item behavior of other users that visit the same page as the user e.g. whether people that visit the same page will also view the candidate item whether the candidate item can be popular with people who like the topic on the page etc. and whether content of the candidate item has the same authorship as the content of the page visited by the user.

In some implementations candidate items from different sources can be scored according to a scoring hierarchy for different source types. A scoring hierarchy can be data indicating to generate scores for candidate items based on source types related to the candidate items. For example a scoring hierarchy can be social source authorship source relevant source popular source which indicates 1 candidate items from a social source have a higher score than other candidate items from other sources 2 candidate items from an authorship source have a higher score than candidate items from a relevant source or a popular source and 3 candidate items from a relevant source have a higher score than other candidate items from a popular source. In other examples the source types in a scoring hierarchy may be in a different order. For example the scoring hierarchy can be authorship source social source relevant source popular source. A scoring hierarchy can be configured by an administrator of the computing device .

In some implementations the mixing module ranks the one or more candidate items to generate one or more top ranking candidate items based on the one or more scores related to the one or more candidate items. For example the mixing module generates a higher ranking for a first candidate item having a higher score than a second candidate item having a lower score. In some implementations the mixing module ranks the one or more candidate items to generate one or more top ranking candidate items based on source types related to the candidate items. For example candidate items from a social source have a higher ranking than candidate items from other sources candidate items from an authorship source have a higher ranking than candidate items from a relevant source or a popular source and candidate items from a relevant source have a higher ranking than candidate items from a popular source. The mixing module sends the one or more top ranking candidate items to the producer module .

The trigger module can be software including routines for determining an invitation trigger event and or a recommendation trigger event. In some implementations the trigger module can be a set of instructions executable by the processor to provide the functionality described below for determining an invitation trigger event and or a recommendation trigger event. In some other implementations the trigger module can be stored in the memory of the computing device and can be accessible and executable by the processor . The trigger module may be adapted for cooperation and communication with the processor and other components of the computing device via signal line .

In some implementations the trigger module determines that an invitation trigger event occurs if one or more of the following conditions may be satisfied 1 presence of qualified candidate items for the site and the user e.g. presence of social items authorship items relevant items popular items etc. from the same site for the user 2 a time duration that the user has spent on the page may be greater than a time threshold e.g. the user stays on the page for more than 2 minutes 3 the user has scrolled to a specified location of the page e.g. the user has scrolled to two thirds of the page and 4 a tag for presenting an invitation state may be deployed at the end of the content body on the page. Other example conditions for determining an occurrence of an invitation trigger event are possible. The trigger module sends a signal indicating an occurrence of an invitation trigger event to the producer module .

In some implementations the trigger module determines that a recommendation trigger event occurs if a user taps or clicks on an invitation state or a cursor hovers over the invitation state. The trigger module sends a signal indicating an occurrence of a recommendation trigger event to the producer module .

The producer module can be software including routines for providing an invitation state and or a recommendation state to users. In some implementations the producer module can be a set of instructions executable by the processor to provide the functionality described below for providing an invitation state and or a recommendation state to users. In some other implementations the producer module can be stored in the memory of the computing device and can be accessible and executable by the processor . The producer module may be adapted for cooperation and communication with the processor and other components of the computing device via signal line .

In some implementations the producer module handles communications between different components of the widget application . For example the producer module receives data describing candidate items from the candidate retrieval module and sends the data to the metadata retrieval module and or the mixing module . In another example the producer module receives metadata from the metadata retrieval module and sends the metadata to the mixing module .

In some implementations the producer module receives one or more candidate items e.g. top ranking candidate items from the mixing module . If the producer module receives a signal indicating an occurrence of an invitation trigger event from the trigger module the producer module generates an invitation state for the user. However if no candidate items can be available for a user the producer module does not provide an invitation state to the user even if an invitation trigger event has occurred.

An invitation state can be data inviting a user to view additional content on a site. For example an invitation state includes data describing a candidate item having the highest ranking and descriptive data associated with the candidate item. In some implementations the descriptive data describes a source type of the candidate item e.g. a social source an authorship source a relevant source or a popular source . In some implementations the descriptive data describes a reason why the invitation state can be presented to the user. Examples of the descriptive data include but are not limited to a friend has shared commented on or endorsed this candidate item people who visits this page also like to view this candidate item the author who writes the article in this page also writes the story in this candidate item and most popular content in this site etc.

For example if a candidate item included in the invitation state has an endorsement from another user connected to the user in a social graph the invitation state includes the other user s name avatar and a description of the other user recommends this candidate item. In another example if a candidate item included in the invitation state has been shared by another user connected to the user in a social graph the invitation state includes the other user s name avatar and a description of the other user shares this candidate item. In yet another example if a candidate item included in the invitation state has a comment from another user connected to the user in a social graph the invitation state includes the other user s name avatar and a description of the other user comments on this candidate item. In still yet another example if a candidate item included in the invitation state has the same authorship as content in the page the invitation state includes the author s name avatar and a description of the author also writes this candidate item. 

In some implementations the producer module provides the invitation state to the user according to one or more display settings. For example the producer module presents an invitation state as an overlay on a page e.g. an overlay bar having a height of fifty pixels that pushes up from a bottom of a browser . In another example the producer module embeds an invitation state directly into a page. In some implementations the producer module determines the presentation of the invitation state on the page based on heuristic techniques. For example the producer module determines a location to present the invitation state using heuristic techniques. The producer module sends the invitation state to the user interface module causing the user interface module to generate graphical data for presenting the invitation state in a user interface. In some implementations the invitation state recedes out of view if the user scrolls passing a specified location of the page without clicking on the invitation state.

If the producer module receives a signal indicating an occurrence of a recommendation trigger event from the trigger module the producer module generates a recommendation state for the user. A recommendation state can be data describing content recommendation for a user. For example a recommendation state includes at least a subset of the one or more top ranking candidate items and source types related to the subset of the one or more top ranking candidate items. In some implementations the candidate items in the recommendation state can be prioritized based on the scores and or source types related to the candidate items. In some implementations the recommendation state additionally includes one or more action cards for performing one or more engagement actions e.g. endorsement comments shares etc. associated with the subset of the one or more top ranking candidate items. Examples of an action card include but are not limited to a share card a follow card a URL card etc.

A share card of a candidate item can be data describing a sharer that shares the candidate item. A share card allows a user to re share the candidate item with other users. A sharer can be another user who has shared the candidate item and connects to the user in a social graph. For example a sharer can be a friend that has shared the candidate item. In some implementations a share card includes one or more of a sharer s name a sharer s avatar a sharer s comment if available an image from the candidate item if available a title of the candidate item a domain or a site hosting the candidate item one or more engagement action buttons e.g. an endorsement button a share button a comment button a button for re sharing the share etc. and avatars of one or more other users connected to the user in a social graph that have interacted with the candidate item by endorsing commenting on and or sharing the candidate item etc.

A follow card of a candidate item can be data describing a persona e.g. an author or a brand of the candidate item. An example of a brand can be an endorsed page that can be linked to the site currently visited by the user. For example a follow card includes a persona or brand s avatar a persona or brand s name a persona s occupation and a follow button allowing the user to follow the persona or brand.

A URL card can be data describing an address of a candidate item. For example a URL card includes an URL of the candidate item a hyperlink to the URL and one or more engagement action buttons. In some implementations the URL card can be used for candidate items that do not have social activities from other users connected to the user in a social graph e.g. candidate items having no social activities from friends or candidate items that were publicly endorsed shared commented on by other users not connected to the user in a social graph.

In some implementations the producer module provides the recommendation state to the user according to one or more display settings. For example the producer module presents the recommendation state as a modal overlay on a page. In another example the producer module slides content on a page off screen and presents the recommendation state at the bottom of the page. The producer module sends the recommendation state to the user interface module causing the user interface module to generate graphical data for presenting the recommendation state in a user interface. The user can interact with the recommendation state by performing one or more engagement actions. For example the user can click on an endorsement button a share button and or a comment button re share the share expand the share click on a profile click on a URL expand the comments post a comment and or click on a hyperlink to redirect to the candidate item on a new page etc. The user may scroll through the subset of top ranking candidate items and or close the recommendation state to return to the previously visited page.

The user interface module can be software including routines for generating graphical data for providing user interfaces. In some implementations the user interface module can be a set of instructions executable by the processor to provide the functionality described below for generating graphical data for providing user interfaces. In some other implementations the user interface module can be stored in the memory of the computing device and can be accessible and executable by the processor . The user interface module may be adapted for cooperation and communication with the processor and other components of the computing device via signal line .

In some implementations the user interface module generates graphical data for providing a user interface that depicts an invitation state or a recommendation state. The user interface module sends the graphical data to a user device operated by a user causing the user device to present the invitation state or the recommendation state to the user via the user interface. The user interface module may generate graphical data for providing other user interfaces to users.

Referring now to another example of the widget application is shown in more detail. In the illustrated implementation the widget application includes a producer module an invitation widget and a recommendation widget . The producer module includes candidate retrieval modules a metadata retrieval module and a mixing module . Like reference numerals are used to refer to similar elements and the descriptions will not be repeated here.

In some implementations the candidate items can be retrieved from different sources in parallel. The candidate retrieval module retrieves candidate items e.g. social items from a social source the candidate retrieval module retrieves candidate items e.g. authorship items from an authorship source the candidate retrieval module retrieves candidate items e.g. relevant items from a relevant source and the candidate retrieval module retrieves candidate items e.g. popular items from a popular source. The candidate retrieval modules send the candidate items to the metadata retrieval module . The metadata retrieval module retrieves metadata for the candidate items and sends the candidate items and associated metadata to the mixing module . The mixing module determines scores for the candidate items and ranks the candidate items to generate one or more top ranking candidate items. The producer module generates recommended content for the user using the one or more top ranking candidate items.

The invitation widget can be code and routines describing an application programming interface API for presenting an invitation state. The recommendation widget can be code and routines describing an API for presenting a recommendation state. For example the invitation widget and the recommendation widget can be iframe elements on a page.

Referring now to an example of a method for providing content recommendation to users on a site is described. In some implementations the method determines a page currently visited by a user. The controller receives data describing the page currently visited by the user. The candidate retrieval module queries one or more different sources for candidate items. The candidate retrieval module receives via the controller candidate items from the one or more different sources. The mixing module ranks the candidate items. The producer module presents an invitation state to the user if an invitation trigger event occurs. The producer module presents a recommendation state to the user if a recommendation trigger event occurs.

At block the candidate retrieval module queries one or more different sources for candidate items. The candidate retrieval module receives via the controller candidate items from the one or more different sources. The candidate retrieval module optionally compiles a list of candidate items from the received candidate items. The candidate retrieval module sends the candidate items to the mixing module . The mixing module optionally ranks the candidate items by one or more source types related to the candidate items. The mixing module optionally filters the candidate items based on interests of the user. The mixing module determines scores for the candidate items and ranks the candidate items based on the scores. In some implementations operations performed at block can be combined with operations performed at block .

Referring now to the trigger module determines whether an invitation trigger event occurs. If an invitation trigger event occurs the method moves to block . Otherwise the method moves to block . At block the method determines whether the user has exited the page. If the user has not exited the page the method moves to block . If the user has exited the page the method does not present an invitation state to the user.

At block the producer module presents an invitation state to the user. The trigger module determines whether a recommendation trigger event occurs. If a recommendation trigger event does not occur the producer module removes the invitation state. If a recommendation trigger event occurs the producer module presents a recommendation state to the user. The user can interact with the recommended content included in the recommendation state. Optionally the controller receives feedback data about the recommended content from the user and the producer module updates the recommended content based on the feedback data. In some implementations the page visited by the user and the recommended content can be from the same site.

At block the candidate retrieval module queries a social source for candidate items. The candidate retrieval module receives via the controller a candidate item e.g. a social item from the social source. The producer module determines whether the candidate item describes a user activity on the same page and performed by another user who socially connects to the first user in a social graph. For example the producer module determines whether the candidate item can be an endorsement a share or a comment on the same page from a friend of the first user. If the candidate item describes a user activity on the same page and from another user socially connected to the first user the producer module presents an invitation state displaying the user activity and a name of the other user to the first user. Otherwise the method moves to block .

At block the producer module determines whether the candidate item can be from another page of the same site and related to a user activity performed by another user socially connected to the first user in a social graph. For example the producer module determines whether the candidate item from another page of the same site has an endorsement a share or a comment generated by a friend. If the candidate item can be from another page of the same site and related to a user activity performed by another user connected to the first user in a social graph the producer module presents an invitation state displaying one or more of the candidate item the user activity and a name of the other user. Otherwise the method moves to block .

Referring to the method determines whether the first user has signed in a social network. If the first user has not signed in the social network the producer module presents an invitation state displaying one or more most popular candidate items e.g. top 10 best articles from the same site to the first user. Otherwise the method moves to block . At block the method determines whether the first user has an interest profile. If the first user has an interest profile the method moves to block . Otherwise the method moves to block . At block the candidate retrieval module queries a relevant source for candidate items using an address of the page and a geographic location of the first user upon the consent of the first user. The candidate retrieval module receives via the controller a candidate item from the relevant source.

The producer module determines whether the candidate item has public user activity performed by a second user. The second user can be for example a specialist or a celebrity who explicitly consents to share his or her activity related to the candidate item publicly. If the candidate item has public user activity performed by the second user the producer module presents an invitation state displaying the candidate item a name for the second user the public social activity and one or more action cards to the first user. Otherwise the producer module presents an invitation state displaying the candidate item as relevant content for the page visited by the first user. For example the candidate item can be displayed as people who visit this page also view this candidate item. 

Referring to the candidate retrieval module queries a relevant source for candidate items using one or more of an address of the page a geographic location of the first user demographic data and an interest profile associated with the first user upon the consent of the first user. The candidate retrieval module receives via the controller a candidate item from the relevant source. The producer module determines whether the candidate item has public user activity performed by a second user. The second user can be for example a specialist or a celebrity who explicitly consents to share his or her activity related to the candidate item publicly. If the candidate item has public user activity performed by the second user the producer module presents an invitation state displaying the candidate item a name for the second user the public social activity and one or more action cards to the first user. Otherwise the producer module presents an invitation state displaying the candidate item as popular content. For example the candidate item can be displayed as popular with people who visit this page. 

Referring to the trigger module determines whether a recommendation trigger event occurs. If a recommendation trigger event occurs the producer module presents a recommendation state to the first user. Otherwise the producer module removes the invitation state.

Referring to in some implementations the candidate retrieval module determines one or more topics related to a page currently visited by a user. The candidate retrieval module cross references the one or more topics with an interest profile associated with the user to obtain a matching topic. The candidate retrieval module generates a query that includes an address of the page and the matching topic. The controller sends the query to the relevant source module . The relevant source module determines relevant items related to the matching topic from the relevant source. The relevant source module sends the relevant items to the candidate retrieval module . The candidate retrieval module determines one or more topics from the relevant items. The candidate retrieval module determines a recurring topic from the one or more topics. The candidate retrieval module determines a subset of relevant items associated with the recurring topic.

If the user clicks on the invitation state a recommendation trigger event occurs and the other article will be presented in a recommendation state to the user as illustrated in . Referring to the example user interface indicates the user reads the other article written by the same author Chris XYZ on another page from the same website . The user can follow the author by clicking on the follow button . The user can return to the previously visited page by clicking on a button .

If the user clicks on the invitation state a recommendation trigger event occurs and the comment from Friend A will be presented in a recommendation state to the user as illustrated in . Referring to the example user interface includes a comment from Friend A related to another article from the same website and content of the other article. The user can return to the previously visited page by clicking on a button . The user can also share the other article by clicking on a share button causing the user interface to be displayed to the user. Referring to the user interface allows the user to share the other article with other friends. The user can input a comment in a box and share the article and the comment with other friends by clicking on a share button .

In the above description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of the specification. It will be apparent however to one skilled in the art that the invention can be practiced without these specific details. In other implementations structures and devices are shown in block diagram form in order to avoid obscuring the description. For example the present implementation is described in one implementation below primarily with reference to user interfaces and particular hardware. However the present implementation applies to any type of computing device that can receive data and commands and any peripheral devices providing services.

Reference in the specification to one implementation or an implementation means that a particular feature structure or characteristic described in connection with the implementation is included in at least one implementation of the description. The appearances of the phrase in one implementation in various places in the specification are not necessarily all referring to the same implementation.

Some portions of the detailed descriptions that follow are presented in terms of algorithms and symbolic representations of operations on data bits within a computer memory. These algorithmic descriptions and representations are the means used by those skilled in the data processing arts to most effectively convey the substance of their work to others skilled in the art. An algorithm is here and generally conceived to be a self consistent sequence of steps leading to a desired result. The steps are those requiring physical manipulations of physical quantities. Usually though not necessarily these quantities take the form of electrical or magnetic signals capable of being stored transferred combined compared and otherwise manipulated. It has proven convenient at times principally for reasons of common usage to refer to these signals as bits values elements symbols characters terms numbers or the like.

It should be borne in mind however that all of these and similar terms are to be associated with the appropriate physical quantities and are merely convenient labels applied to these quantities. Unless specifically stated otherwise as apparent from the following discussion it is appreciated that throughout the description discussions utilizing terms including processing or computing or calculating or determining or displaying or the like refer to the action and processes of a computer system or similar electronic computing device that manipulates and transforms data represented as physical electronic quantities within the computer system s registers and memories into other data similarly represented as physical quantities within the computer system memories or registers or other such information storage transmission or display devices.

The present implementation of the specification also relates to an apparatus for performing the operations herein. This apparatus may be specially constructed for the required purposes or it may comprise a general purpose computer selectively activated or reconfigured by a computer program stored in the computer. Such a computer program may be stored in a computer readable storage medium including but is not limited to any type of disk including floppy disks optical disks CD ROMs and magnetic disks read only memories ROMs random access memories RAMs EPROMs EEPROMs magnetic or optical cards flash memories including USB keys with non volatile memory or any type of media suitable for storing electronic instructions each coupled to a computer system bus.

The specification can take the form of an entirely hardware implementation an entirely software implementation or an implementation containing both hardware and software elements. In a preferred implementation the specification is implemented in software which includes but is not limited to firmware resident software microcode etc.

Furthermore the description can take the form of a computer program product accessible from a computer usable or computer readable medium providing program code for use by or in connection with a computer or any instruction execution system. For the purposes of this description a computer usable or computer readable medium can be any apparatus that can contain store communicate propagate or transport the program for use by or in connection with the instruction execution system apparatus or device.

A data processing system suitable for storing and or executing program code will include at least one processor coupled directly or indirectly to memory elements through a system bus. The memory elements can include local memory employed during actual execution of the program code bulk storage and cache memories which provide temporary storage of at least some program code in order to reduce the number of times code must be retrieved from bulk storage during execution.

Input output or I O devices including but not limited to keyboards displays pointing devices etc. can be coupled to the system either directly or through intervening I O controllers.

Network adapters may also be coupled to the system to enable the data processing system to become coupled to other data processing systems or remote printers or storage devices through intervening private or public networks. Modems cable modem and Ethernet cards are just a few of the currently available types of network adapters.

Finally the algorithms and displays presented herein are not inherently related to any particular computer or other apparatus. Various general purpose systems may be used with programs in accordance with the teachings herein or it may prove convenient to construct more specialized apparatus to perform the required method steps. The required structure for a variety of these systems will appear from the description below. In addition the specification is not described with reference to any particular programming language. It will be appreciated that a variety of programming languages may be used to implement the teachings of the specification as described herein.

The foregoing description of the implementations of the specification has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the specification to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the disclosure be limited not by this detailed description but rather by the claims of this application. As will be understood by those familiar with the art the specification may be embodied in other specific forms without departing from the spirit or essential characteristics thereof. Likewise the particular naming and division of the modules routines features attributes methodologies and other aspects are not mandatory or significant and the mechanisms that implement the specification or its features may have different names divisions and or formats. Furthermore as will be apparent to one of ordinary skill in the relevant art the modules routines features attributes methodologies and other aspects of the disclosure can be implemented as software hardware firmware or any combination of the three. Also wherever a component an example of which is a module of the specification is implemented as software the component can be implemented as a standalone program as part of a larger program as a plurality of separate programs as a statically or dynamically linked library as a kernel loadable module as a device driver and or in every and any other way known now or in the future to those of ordinary skill in the art of computer programming. Additionally the disclosure is in no way limited to implementation in any specific programming language or for any specific operating system or environment. Accordingly the disclosure is intended to be illustrative but not limiting of the scope of the specification which is set forth in the following claims.

