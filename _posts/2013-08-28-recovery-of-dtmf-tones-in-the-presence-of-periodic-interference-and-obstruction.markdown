---

title: Recovery of DTMF tones in the presence of periodic interference and obstruction
abstract: While a dual tone multi-frequency (DTMF) signal can be easily processed if cleanly obtained, difficulties can arise if the DTMF signal is not cleanly obtained. In one example, part of the signal can be cleanly obtained, but part of the signal can be obstructed. In order to determine the content of the DTMF signal the parts that are cleanly obtained can be compared with known DTMF signals, such as DTMF signals that correspond with buttons on a telephone keypad. A classification of a closest matching known DTMF signal can be identified and that classification can be assigned to the partially obtained DTMF signal. Thus, without clearly obtaining the whole DTMF signal a content of the DTMF signal can be ascertained.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09055145&OS=09055145&RS=09055145
owner: The United States of America, as represented by the Secretary of the Army
number: 09055145
owner_city: Washington
owner_country: US
publication_date: 20130828
---
The innovation described herein may be manufactured used imported sold and licensed by or for the Government of the United States of America without the payment of any royalty thereon or therefore.

The subject application is related to U.S. patent application Ser. No. 14 011 815 that was filed on Aug. 28 2013 with a title of DETECTION AND IDENTIFICATION OF SYNCHRONIZING SIGNALS EMBEDDED IN VOICE OR DATA and U.S. patent application Ser. No. 14 011 815 herein incorporated by reference.

A dual tone multi frequency DTMF signal can be used in a variety of applications such as in telephone communication. The DTMF signal can be cleanly obtained and analyzed. Based on a result of this analysis content of the DTMF can be determined. This content can then be used to determine a number of a keypad designated by a user.

A system is disclosed comprising a comparison component an identification component and a processor. The comparison component is configured to compare a signal part group of a dual tone signal against a known signal set to produce a comparison result where the signal part group is less than the signal. The identification component is configured to perform an identification of a known signal that matches the dual tone signal through use of the comparison result where the known signal is part of the known signal set. The processor is configured to execute an instruction that relates to the comparison component or the identification component

In addition a method is disclosed comprising executing instructions from a non transitory computer readable medium. The instructions comprise sampling segments of a signal that is dual tone and periodic where the segments are outside of obstructions. The instructions also comprises selecting a segment from the sampled segments as a reference segment as well as combining the reference segment with at least one other sampled segment to form a combined segment. In addition the instructions comprise performing a Fast Fourier transform upon the combined segment that produces a transform result. Also the instructions comprise making an attempt to locate a match signal for the signal through use of the transform result and causing a dataset that pertains to the match signal to be outputted in response to the match signal being located.

Furthermore a non transitory computer readable medium configured to store computer executable instructions that when executed by a processor cause the processor to perform a method is disclosed. The method comprises collecting a plurality of parts of an unknown signal where a combination of the plurality of parts of the signal is less than the unknown signal and where the unknown signal is a dual tone signal and a periodic signal. The method also comprises selecting a set of parts from the plurality of parts to form a subset of parts where the subset of parts is smaller than the plurality of parts. The method further comprises combining the subset of parts into a combined version and performing a Fast Fourier transform upon the combined version to produce a signal result. Additionally the method comprises comparing the signal result against a set of known signals to produce a comparison result. Also the method comprises identifying a best match known signal from the set of known signals through use of the comparison result and classifying the unknown signal as a signal type of the best match known signal.

While the dual tone multi frequency DTMF signal can be easily processed if cleanly obtained difficulties can arise if the DTMF signal is not cleanly obtained. In one example part of the signal can be cleanly obtained but part of the signal can be obstructed. In order to determine the content of the DTMF signal the parts that are cleanly obtained can be compared with known DTMF signals such as DTMF signals that correspond with buttons on a telephone keypad. A classification of a closest matching known DTMF signal can be identified and that classification can be assigned to the partially obtained DTMF signal. Thus without clearly obtaining the whole DTMF signal a content of the DTMF signal can be ascertained.

The following includes definitions of selected terms employed herein. The definitions include various examples. The examples are not intended to be limiting.

 One embodiment an embodiment one example an example and so on indicate that the embodiment s or example s can include a particular feature structure characteristic property or element but that not every embodiment or example necessarily includes that particular feature structure characteristic property or element. Furthermore repeated use of the phrase in one embodiment may or may not refer to the same embodiment.

 Computer readable medium as used herein refers to a medium that stores signals instructions and or data. Examples of a computer readable medium include but are not limited to non volatile media and volatile media. Non volatile media may include for example optical disks magnetic disks and so on. Volatile media may include for example semiconductor memories dynamic memory and so on. Common forms of a computer readable medium may include but are not limited to a floppy disk a flexible disk a hard disk a magnetic tape other magnetic medium other optical medium a Random Access Memory RAM a Read Only Memory ROM a memory chip or card a memory stick and other media from which a computer a processor or other electronic device can read. In one embodiment the computer readable medium is a non transitory computer readable medium.

 Component as used herein includes but is not limited to hardware firmware software stored on a computer readable medium or in execution on a machine and or combinations of each to perform a function s or an action s and or to cause a function or action from another component method and or system. Component may include a software controlled microprocessor a discrete component an analog circuit a digital circuit a programmed logic device a memory device containing instructions and so on. Where multiple components are described it may be possible to incorporate the multiple components into one physical component or conversely where a single component is described it may be possible to distribute that single logical component between multiple components.

 Software as used herein includes but is not limited to one or more executable instructions stored on a computer readable medium that cause a computer processor or other electronic device to perform functions actions and or behave in a desired manner. The instructions may be embodied in various forms including routines algorithms modules methods threads and or programs including separate applications or code from dynamically linked libraries.

A dual tone signal e.g. DTMF can be received by the system but part of the signal can be obstructed. Therefore the entire content of the dual tone signal may be unavailable and in turn understanding the message sent by the dual tone signal can be difficult to ascertain. At least a fraction of the part of the dual tone signal that is not obstructed can be identified and compared to various known signals e.g. known signal A and known signal B of a known signal set. Based on a result of this comparison a best matching known signal can be identified as the dual tone signal.

In one example sixteen possible messages can be transferred by way of the dual tone signal 0 9 and A D. Each of these messages can relate to two tones being present in the dual tone signal. For each of the messages a known signal can be retained as part of the known signal set . The signal part group can be compared with each of the known signals and or until a matching signal is found. Based on this comparison a known signal that matches the signal part group can be identified as a matching signal.

Once the identification of the matching signal is performed the designation component can cause the system to consider the dual tone signal to be equal to the matching known signal and thus to be the matching known signal. The output component can cause an output to be produced that classifies dual tone signal as the matching known signal. In one example this output can be to a telephone and designate a number of a keypad selected thought use of the dual tone signal.

While a portion of the signal may be obstructed it may be desirable to use less than the entire signal that is not obstructed. Therefore the selection component can select portions of the signal that is not obstructed to form the signal part group. In one example the selection component can select signal parts that become members of the signal part group based at least in part on distance from a reference signal part.

In one example the sample component samples the dual tone signal to produce a signal part set. Once sampled the appointment component can evaluate individual parts of the signal part set. Based at least in part on a result of this evaluation the appointment component can appoint signal parts that are to be part of the signal part group. In one embodiment some members of the signal part set are appointed to the signal part group while others are not.

In one embodiment the choice component chooses the at least one non reference signal part based at least in part on distance from the reference signal part. For example the reference signal can be chosen arbitrarily chosen based on a first signal part identified etc. Once chosen the choice component can measure how far different signal parts e.g. that are part of the signal part set are from the reference signal. The result of this measurement can be used by the choice component to determine if a signal part becomes part of the signal part group. In one example the further away a signal part is the more likely that signal part will become part of the signal part group.

While the identification component can attempt to identify a matching known signal to the signal part group and thus the dual tone signal the attempt can be a failure. In one example the comparison result can be such that no known signal matches enough with the signal part group e.g. a percentage level is not reached a confidence level is not high enough etc. . Therefore the identification component may not be able to identify a known signal as a matching signal. While the system could stop the system is also configured to attempt again but this time with a different signal part group. The system can continue this until a match is identified or a threshold is met e.g. reached exceeded not surpassed .

In one embodiment the non transitory computer readable medium is configured to store computer executable instructions that when executed by the processor cause the processor to perform a method disclosed herein. One such method can comprise collecting a plurality of parts of an unknown signal where a combination of the plurality of parts of the signal is less than the unknown signal and where the unknown signal is a dual tone signal or any other periodic signal as well as selecting a set of parts from the plurality of parts to form a subset of parts where the subset of parts is smaller than the plurality of parts. The method can also comprise combining the subset of parts into a combined version and performing a Fast Fourier transform upon the combined version to produce a signal result. The method can further comprise comparing the signal result against a set of known signals to produce a comparison result identifying a best match known signal from the set of known signals through use of the comparison result and classifying the unknown signal as a signal type of the best match known signal.

In one embodiment the subset of parts is a first subset of parts the set of parts are a first set of parts the combined version is a first combined version the Fast Fourier transform is a first Fast Fourier transform the signal result is a first signal result and the comparison result is a first comparison result. With this embodiment the method can comprise selecting a second set of parts from the plurality of parts to form a second subset of parts where the second set of parts is different from the first set of parts. The method can also comprise combining the second subset of parts into a second combined version as well as performing the Fast Fourier transform upon the second combined version to produce a second signal result. The method can further comprise comparing the second signal result against the set of known signals to process a second comparison result along with determining a first error for the first comparison result and a second error for the second comparison result. In addition the method can comprise identifying a smallest error of the first error and the second error where identifying a best match known signal from the set of known signals is done through use of the comparison result with the smallest error.

Aspects disclosed herein can relate to communications and signal analysis. In one example underlying ideas disclosed herein can be used in extracting a signaling data string in cordless phones non message oriented signaling of public switched telephone networks etc.

Aspects disclosed herein can be used with regard to solving the following situation. A system can be transmitting DTMF tones. The transmitted signal during propagation can be subjected to periodic obstructions e.g. interference fades etc. that can be man made or natural. As a result only a few segments of the signal such as of length tand spaced Tseconds apart are usable at a receiver. Since a minimum continuous signal length for extraction of signal characteristic features while depending upon bandwidth is usually more than t it can be beneficial to determine how these small disjoint segments that are outside of obstructions should be selected and concatenated so that the DTMF tones can be recovered correctly.

DTMF tones which are periodic signals can be evaluated. A receiver can collect a few useful segments of the signal that can be of length t e.g. for an individual segment and spaced Tseconds apart. For these segments tmay or may not be the same as t. Similarly different editions of Tmay not be the same. In one embodiment they may be randomly distributed between two values. Since these segments are so small that the characteristic features of the signal may not be able to be uniquely determined from a single segment an iterative algorithm or other embodiment can be employed that shows how the disjoint segments should be selected and concatenated so that the receiver can correctly identify the transmitted key e.g. tone of the signal .

The algorithm can begin choosing one of the segments arbitrarily and then computing a metric that indicates how different this segment is from other segments. A few of these segments the ones in which the metrics are among the largest are concatenated.

The algorithm can begin choosing one of the segments arbitrarily and then computing a metric that indicates how different this segment is from other segments. A few of these segments for which the metrics are among the largest are concatenated.

The algorithm then computes a Fast Fourier transform FFT of the concatenated signal and determines a key whose tones are closest to the frequencies indicated by the FFT. Once a key has been found an error between the DTMF tones of the key and the frequencies indicated by the FFT is minimized by creating a window out of the concatenated segments and then sliding the window one sample at a time to the right. If a key cannot be determined or if the frequencies of the FFT are outside a specified region a different set of segments can be selected and the process is repeated.

If the received signal is aperiodic selection of the small segments to be concatenated to form the required length can be rather straightforward because no matter which segments are selected their information contents are different and therefore the concatenated segments of a correct length would yield distinctive features of the signal with a high probability. If on the other hand the signal is periodic in nature concatenation of improperly selected segments or improperly selected samples may result in redundant information and therefore a given width of the concatenated signal may not reveal the characteristic features of the signal.

A DTMF signal can be represented as cos cos 1 where and are respectively the lower and upper frequencies. This is a periodic function whose time period depends upon and and can be determined by expanding it into a Fourier series.

The sampled signal consists of N small segments S S . . . S. Segment Sis t ms long and spaced T ms apart. In general as mentioned before tmay not be the same as t. Similarly each Tmay be different. Choose ncomplex samples from each segment Sto have Selecting arbitrarily one of these segments say S can occur and this arbitrarily selected segment can be a reference segment.

For DTMF tones a few segments from the set of segments S n q can be selected such that their metrics with respect to Sare among the largest. The selected segments are then concatenated. This concatenated signal can be noted as Sand Scan be appended to S. illustrates one embodiment of a breakdown of a signal such as S.

The FFT of the resulting signal can be taken and a digit key whose tones are closest to the frequencies indicated by the FFT can be found. If the digit key is not found and if the number of iterations are below a threshold another segment can be selected as a reference segment again calling it S and this process is repeated. If the digit key is found the algorithm can continue with constructing a window of length t tstarting from the first sample of S.

The window can be slid by one sample to the right and then appended to S. The resulting signal is passed through an FFT computer and the error between the tones of the key and frequencies indicated by the FFT is calculated. More exactly the error is defined as follows. The following two tones and are respectively the lower and upper tones detected in the FFT and fand fare the lower and upper frequencies of the key. The error is taken to be f f . The algorithm can keep sliding the window one sample at a time and repeat until the error is minimum or until the last sample of Sis included in the window. If this difference is below a threshold then the algorithm has obtained the desired concatenated signal.

To demonstrate the effectiveness of the algorithm in one example DTMF tones corresponding to various keys can be transmitted over an FM carrier. The transmitted signal encountered obstructions for varying lengths of time. The discussion below uses key 5 e.g. tones 770 Hz and 1336 Hz in a hypothetical situation. The spacing between adjacent segments that are 1 ms long can be uniformly distributed between 5 and 15 ms. However other implementations are possible such as the width of each segment could also be random. The signal to noise ratio of the useful segments can be 20 dB.

Segment 1 of the breakdown can be arbitrarily selected. To select the other segments for concatenation their metrics with respect to segment 1 can be computed using expression 2 that is shown in the graph illustrated in . Those segments can be selected whose metrics were among the highest. Seven such segments can be designated 46 24 49 14 6 28 and 36. Segments that give the closest match to a DTMF key can be 1 24 and 36 or 1 14 and 36. Following the algorithm the transmitted key can be found to be key 5 e.g. of keypad with 0 9 and A D . Frequencies of the FFT are seen to be 797 Hz and 1282 Hz hence the error between these frequencies and the actual DTMF tones of this key is 81 Hz. The demodulated signal and its FFT are shown in 20 as illustrated in graphs and .

To reduce the error between the detected and actual frequencies of this key a 2 ms window can be constructed by concatenating segments 46 14 and 49 in that order. Sliding the window one sample at a time it was appended to segment 24. and in turn graph shows how the error varies with the number of samples say n the window is slid through. A minimum error which occurs in this example at n 40 is 19. This time the frequencies as indicated by the FFT are found to be 781 Hz and 1344 Hz compared to actual frequencies of 770 Hz and 1336 Hz for key 5.

The innovation presented in this disclosure has various applications. Examples include detecting signals that are usually transmitted in a number of short disjoint bursts radar signals extracting signaling information in cordless phones non message oriented signaling of public switched telephone networks etc. Aspects disclosed herein can be practiced in these various applications.

