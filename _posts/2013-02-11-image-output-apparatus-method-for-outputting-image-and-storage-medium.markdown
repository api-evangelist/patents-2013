---

title: Image output apparatus, method for outputting image, and storage medium
abstract: An image output apparatus includes a display unit configured to display on an operation unit a screen including an object indicating that printing is to be performed from a portable terminal apparatus, a generation unit configured to, when the object included in the screen is selected, generate an information code indicating address information and function information of the image output apparatus or an information code indicating the address information and status information of the image output apparatus, a reception unit configured to receive a print job from the portable terminal apparatus having read the information code, and an output unit configured to output the print job received by the reception unit, wherein the display unit displays the information code on the screen.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08879089&OS=08879089&RS=08879089
owner: Canon Kabushiki Kaisha
number: 08879089
owner_city: Tokyo
owner_country: JP
publication_date: 20130211
---
Aspects of the present invention generally relate to an image output apparatus a method for outputting an image and a storage medium.

Portable terminals have a feature of enhanced security specifications. As an example of this feature an application on a portable terminal cannot freely access the resource of the portable terminal. To maintain such a feature a portable terminal has such a structure that driver software of each vendor cannot be installed therein. Therefore with some early portable terminals for example it was not possible to install a printer driver and output a document to a printer from each application which has been easily achieved by desktop terminals.

To solve this limitation at present two methods for outputting a document from a portable terminal to a printer are mainly employed.

One method is that an operating system hereinafter referred to as OS of the portable terminal offers print functions. Specifically the OS of the portable terminal offers a library for printing as a framework or an Application Programming Interface API . When an application calls the API the API prints a document or image data of the application itself. In this case since the OS of the portable terminal specifies a specific print protocol the printer needs to conform to the print protocol. The print protocol includes a printer search protocol and a protocol for printing print data having a specific format specified by the OS of the portable terminal.

The other method is that the application itself transmits print data directly to the printer. In this case the application grasps functions of the printer in advance and transmits such print data that can be interpreted by the printer.

With either of the two methods the user performs printing with the following procedures unlike conventional printing on desktop terminals. First the user selects the print menu from the application on the portable terminal. Then the user performs printer search to search for a printer connected on the network. Based on the result of printer search the user selects a printer to be used for printing. Finally the user sets print attributes and instructs execution of printing.

However there has been the following problem in such printing methods and procedures. When performing printing the user needs to select a printer. When there is a plurality of printers of the same model selecting a suitable printer is difficult because a list of the result of printer search displays only product names of printers. Depending on the search protocol for printer search printer search beyond a router is not possible. Therefore even a physically close printer may not be searched for.

A technique for identifying a printer usable for printing is discussed in Japanese Patent Application Laid Open No. 2003 169187. With the technique discussed in Japanese Patent Application Laid Open No. 2003 169187 a data transmission destination device displays on a printer s operation panel an information code indicating a device address. Then by using a built in camera a portable terminal reads the information code displayed by the data transmission destination device. The portable terminal extracts the address of the data transmission destination device based on the read information code and then transmits data to that address.

However the method for reading the information code by using the camera of the portable terminal to identify a transmission destination printer has the following problems.

When the data transmission destination is a printer print functions are generally different for each product. In the conventional method on the other hand since a data transmission source reads only a data transmission destination address the user may be unable to perform desired printing.

An aspect of the present invention relates to a method for enabling a user to easily identify an image output apparatus subjected to image output and to perform desired printing.

According to an aspect of the present invention an image output apparatus includes a display unit configured to display on an operation unit a screen including an object indicating that printing is to be performed from a portable terminal apparatus a generation unit configured to when the object included in the screen is selected generate an information code indicating address information and function information of the image output apparatus or an information code indicating the address information and status information of the image output apparatus a reception unit configured to receive a print job from the portable terminal apparatus having read the information code and an output unit configured to output the print job received by the reception unit wherein the display unit displays the information code on the screen.

Further features and aspects of the present invention will become apparent from the following detailed description of exemplary embodiments with reference to the attached drawings.

Various exemplary embodiments features and aspects of the invention will be described in detail below with reference to the drawings.

The client apparatus is an example of a portable terminal apparatus. The CPU executes processing based on a program of the print application stored in the external memory . Thus functions of the client apparatus functions of the print application and processing related to the sequence chart and flowcharts related to the client apparatus described below are achieved. To simplify descriptions the following descriptions sometimes premise that the processing is performed by the print application.

The CPU performs processing based on a program stored in the external memory . Thus functions of the image output apparatus described below and processing of the sequence chart and flowcharts related to the image output apparatus are achieved.

Processing performed by each of the above described apparatuses will be described below. To clarify processing performed between the apparatuses processing performed by the printing system will be described below with reference to the sequence chart illustrated in . These descriptions will clarify processing performed by the entire system according to the present exemplary embodiment. Processing performed by each apparatus will be described in detail below with reference to a relevant flowchart.

In step S to print electronic data by using the print application of the client apparatus the user presses the PRINT FROM PORTABLE TERMINAL button displayed on the operation unit of the image output apparatus used for printing.

In step S the image output apparatus displays on the operation unit for example the information code including its own job reception address function information status information authentication necessity information and an authentication uniform resource locator URL . The format of the information code displayed here is the bar code the QR Code registered trademark etc. so that the print application can decode the information code when captured by an imaging unit of the client apparatus .

The job reception address is an example of a print job reception address. The authentication URL is an example of an address for authentication.

In step S the user activates the print application for printing on the client apparatus . When this print application is activated the information code displayed by the image output apparatus can be captured with a camera.

In step S the user instructs the camera module of the client apparatus to capture this information code.

In step S in response to a user s imaging instruction the camera module of the client apparatus captures the information code displayed on the operation unit of the image output apparatus .

In step S the print application of the client apparatus analyzes the contents of the captured information code to acquire relevant information information acquisition . The information acquired as a result of analysis includes for example the job reception address function information status information authentication necessity information an authentication URL of the image output apparatus .

In step S the print application of the client apparatus transmits a reading completion notification for the information code to the extracted job reception address of the image output apparatus completion notification transmission .

In step S upon reception of the above described reading completion notification the image output apparatus clears the screen for displaying the information code and redisplays the regular screen default screen . The print application transmits the reading completion notification at this timing because depending on the imaging state information analysis may not be possible only by capturing the information code. Therefore the image output apparatus clears the information code screen and redisplays the regular screen not at the timing of image capturing by the client apparatus but at the timing of reception of the reading completion notification. In other words the image output apparatus clears the information code when it confirms that the information code has been analyzed.

In step S the print application determines whether authentication is necessary based on the extracted authentication necessity information.

When the print application determines that authentication is necessary YES in step S then in step S the print application requests the authentication URL of the image output apparatus for an authentication HTML file request transmission .

In step S the image output apparatus transmits the authentication HTML file to the client apparatus . The print application receives the authentication HTML file data reception .

Upon reception of the authentication HTML file in step S the print application displays the authentication screen based on the acquired authentication HTML file authentication screen display .

In step S on the authentication screen for authentication is displayed on the client apparatus the user enters an identifier ID and password.

In step S the print application transmits to the image output apparatus the user input ID and password as authentication information to request authentication processing authentication information transmission . The image output apparatus receives the authentication processing request authentication information reception .

Upon reception of the authentication processing request in step S the image output apparatus checks the registered ID and password and then performs authentication processing.

In step S the image output apparatus transmits the result of authentication and the authentication identifier to the client apparatus . The authentication identifier is an identifier that can be maintained unique to the relevant image output apparatus for example a number starting from 0 and incremented for each authentication processing and a Universal Unique ID UUID . When the print application transmits a print job to the image output apparatus the print application describes the authentication identifier in the print job. The image output apparatus checks the authentication identifier described in the received print job and if the authentication identifier coincides with that issued by itself performs the print processing. The print application receives the result of authentication and the authentication identifier from the image output apparatus result of authentication reception .

In step S the print application displays a message as required based on the status information extracted from the information code. More specifically if the status information is a paper out status the print application displays a message status message indicating paper out before displaying the print attribute setting screen status message display .

In step S the print application displays the print attribute setting screen based on the function information included in the information code. The print application provides a user interface for enabling the user to set all of the main print functions. More specifically the print application enables the user to set print attributes such as the number of copies and the monochrome color printing one sided two sided printing stapling punching and bookbinding functions. The print application also enables the user to set only effective functions out of these functions based on the function information included in the information code. For example when the function information of the information code includes the monochrome color printing one sided two sided printing and stapling functions the print application sets only the number of copies and the monochrome color printing one sided two sided printing and stapling functions. Since the number of copies can be achieved by the print application it can be set by default.

After print attribute setting is completed in step S the print application displays a print file selection screen.

In step S in the print file selection screen the user selects a file electronic data to be printed and then instructs printing.

Upon reception of the instruction in step S the print application transmits a print job to the job reception address of the image output apparatus print job transmission .

In step S the image output apparatus receives the print job and then performs printing based on the print attributes specified by the user. In this processing the image output apparatus checks whether the authentication identifier included in the print job is one that has already been issued and only when it is one that has already been issued performs printing.

Although the processing sequence has been described above the image output apparatus may be set to perform printing without authentication depending on the setting of the image output apparatus . In this case the processing in steps S to S is skipped.

Processing performed by each apparatus will be described below with reference to the flowchart illustrated in . A series of print processing is started when a user having the client apparatus goes to the image output apparatus and then presses the PRINT FROM PORTABLE TERMINAL button displayed on the operation panel of the image output apparatus . illustrate example screens displayed on the operation panel of the image output apparatus . The image output apparatus has a function of permitting any user or only a specific user to perform printing. When the image output apparatus is set to permit any user to perform printing the operation panel of the image output apparatus is ready for setting and executing copy and scan operations. Specifically when the image output apparatus is set to permit any user to perform printing the screen illustrated in is displayed on the operation panel as a default screen default screen display .

Otherwise when the image output apparatus is set to permit only a specific user to perform operations the user needs to enter his or her ID and password from the operation panel of the image output apparatus . The user enters his or her ID and password. When the ID and password coincide with registered ones he or she is permitted to perform regular operations. Specifically when the image output apparatus is set to permit only a specific user to perform operations the default screen illustrated in is displayed on the operation panel default screen display . An operation panel screen includes an ID input control and a password input control . When the user enters his or her ID and password in these input fields and then presses the AUTHENTICATION button . Instead of entering an ID and password on this screen the user may use an authentication card that enables the user to perform authentication without entering an ID and password. The operation panel screen also includes the PRINT FROM PORTABLE TERMINAL button for performing printing from the client apparatus .

An operation panel screen illustrated in includes an operation screen of the image output apparatus and a PRINT FROM PORTABLE TERMINAL button for performing printing from the client apparatus . The operation panel screen illustrated in is displayed as the default screen. When the user enters correct ID and password the operation panel screen illustrated in is displayed.

In step S the image output apparatus CPU collects the status information of the image output apparatus itself. In this step the CPU collects information stored in the hardware information stored in the external memory in the image output apparatus and information stored in the RAM therein. The information collected by the CPU includes a job reception address function information status information authentication necessity information of the image output apparatus . These pieces of information will be described below. An example of problems assumed by the present application will be described in detail below. When the information code includes only the address information the client apparatus cannot recognize printer functions and therefore does not know which print function should be offered to the user. Further the status information of the printer is not notified to the portable terminal only by reading the information code including only the address information. For example if paper to be used for printing is not present in the printer the print application on the portable terminal cannot notify the user of paper out and the user may possibly be unable to perform desired printing. To solve these problems the image output apparatus according to the present application collects the following three pieces of information.

Function information Monochrome color one sided two sided stapling upper left upper right left right and bookbinding

The CPU does not necessarily collect all of the job reception addresses address information function information and status information. For example the CPU may collect at least the job reception address and function information or at least the job reception address and status information. Although in the present application the print processing using the job reception address function information and status information will be described below printing may be performed by using at least the job reception address and the function information or at least the job reception address and the status information as described above.

A line describes a job reception address and includes a data name DestinationAddress and a parameter 192.168.1.99 . A line describes function information and includes a data name DeviceCapability and parameters Color Duplex Staple UL UR R L and Booklet . The parameters indicate monochrome color printing one sided two sided printing stapling upper left upper right left right and bookbinding respectively. A line describes status information and includes a data name DeviceStatus and a parameter PaperEmpty A4 . illustrates an example of status information collected by the CPU in step S. In a line a parameter No is described following Ruth indicating the authentication necessity information.

In step S the CPU determines whether the image output apparatus is set to require ID password authentication based on the parameters following Ruth . When the image output apparatus is set not to require ID password authentication i.e. when the parameter following Ruth is No NO in step S the CPU proceeds to step S. When the image output apparatus is set to require ID password authentication i.e. when the parameter following Ruth is Yes YES in step S the CPU proceeds to step S. When the user presses selects the PRINT FROM PORTABLE TERMINAL button in the screen illustrated in the CPU adds a parameter Yes following Ruth . Otherwise when the user presses selects the PRINT FROM PORTABLE TERMINAL button in the screen illustrated in the CPU adds a parameter No following Ruth .

In step S the CPU adds an authentication URL to the status information data illustrated in . illustrates an example of status information data to which an authentication URL is added. Lines job reception address to status information are similar to the lines to illustrated in . In a line ID password authentication necessity information a parameter Yes is described following Ruth . In a line a parameter http 192.168.1.99 authentication is added following AuthURL indicating the authentication URL. As described above when the image output apparatus is set to perform ID password authentication illustrated in the status information data is as illustrated in . When the image output apparatus is set not to perform ID password authentication illustrated in the status information data is as illustrated in .

In step S the CPU generates an information code based on the collected status information and then displays on the operation panel a screen including the generated information code. illustrates an example screen including the information code. A screen includes the information code. The information code illustrates an example of an object that is coded status information. A CANCEL button can be used by the user to cancel the print processing. The information code may be in any format as long as it indicates the status information data illustrated in or B. For example the information code may be a one or two dimensional bar code. In step S after the screen including the information code is displayed the user reads the information code by using an imaging apparatus of the client apparatus . An example of information processing of the client apparatus will be described below with reference to the flowcharts. After reading the information code the client apparatus transmits the reading completion notification to the image output apparatus .

In step S the CPU confirms the reception of the notification from the client apparatus . In step S the CPU determines whether the received notification is a cancellation notification. When the cancellation notification is received YES in step S the user has cancelled the print processing and the CPU proceeds to step S.

In step S the CPU redisplays the regular screen i.e. the screen illustrated in or B on the operation panel. When the cancellation notification is not received NO in step S the CPU proceeds to step S.

In step S the CPU determines whether the notification is a reading completion notification. When the reading completion notification is not received for example a packet of other type is received NO in step S the CPU returns to step S to reconfirm the notification received from the client apparatus . When the reading completion notification is received YES in step S the CPU proceeds to step S.

In step S the CPU redisplays the regular screen i.e. the screen illustrated in or B on the operation panel.

In step S the CPU determines whether the image output apparatus is set to perform ID password authentication based on the parameters following Ruth . When the image output apparatus is set not to perform ID password authentication NO in step S the CPU proceeds to step S.

In step S the CPU receives a print job from the client apparatus performs printing and then ends this processing exits the flowchart . A print job to be received will be described in detail below. When the image output apparatus is set to perform ID password authentication YES in step S the CPU proceeds to step S.

In step S in response to the request from the client apparatus the CPU transmits an authentication HTML file. Specifically the CPU reads an HTML file stored in the script information of the external memory and then transmits it to the client apparatus . illustrates an example of an authentication HTML file transmitted by the image output apparatus in step S. A line is a header portion of the HTML file. A line describes a title name AUTHENTICATION of the HTML page. A line indicates the start of the HTML body. A line describes a character string to be displayed on this page. A character string is displayed as ID AUTHENTICATION on the client apparatus . Lines to are descriptions for defining an entry form. A line describes form actions i.e. receive input data in the post format and execute the bin auth.exe program for the input data. A line describes the first input field a character string ID and an input control display having the text attribute. A line describes the second input field a character string PASSWORD and an input control display having the password attribute. A line describes a form transmission button having a value AUTHENTICATION . A line also describes a form transmission button having a value CANCEL . A line indicates the end of form description. A line indicates the end of the HTML file. How this HTML file is displayed and processed by the client apparatus will be described below with reference to the flowchart illustrating an example of information processing by the client apparatus .

In step S the CPU receives from the client apparatus a form data processing request authentication processing request for the transmitted authentication HTML file.

In step S based on the received form data the CPU determines whether the requested processing is cancellation processing. When the requested processing is cancellation processing YES in step S the user has cancelled the printing procedure and the CPU exits this flowchart. Otherwise when the requested processing is not cancellation processing NO in step S the CPU proceeds to step S.

In step S the CPU performs authentication processing based on the form data received from the client apparatus . More specifically based on the user ID and password included in the form data the CPU searches for matched user ID and password registered in an authentication database in the external memory of the image output apparatus and determines whether the combination of the user ID and password is correct.

In step S the CPU determines the result of authentication processing is successful. When authentication processing is failed NO in step S the CPU proceeds to step S.

In step S the CPU transmits the result of failed authentication processing to the client apparatus and then returns to step S. When authentication processing is successfully completed YES in step S the CPU proceeds to step S.

In step S the CPU transmits the result of successful authentication processing and the authentication identifier to the client apparatus . The authentication identifier transmitted by the image output apparatus will be described below. The uniqueness of this authentication identifier is maintained within the image output apparatus . In the present exemplary embodiment the Universal Unique ID UUID will be used since the uniqueness can be easily guaranteed. As a result of successful authentication the image output apparatus transmits this identifier to the client apparatus and is included in a job ticket when the client apparatus transmits a print job to the image output apparatus . Including such an identifier in a job ticket enables printing only a print job from the client apparatus in which authentication is successfully completed. In the present exemplary embodiment the CPU generates 69536026 ac4f 8879 0a042c309ff6 as the UUID and then transmits it to the client apparatus . At the same time the CPU stores the generated UUID in the identifier storage table in the external memory of the image output apparatus . The authentication identifier is an example of authentication identification information.

In step S the CPU receives a print job from the client apparatus . illustrates an example configuration of a print job. illustrates an example of a job ticket. Referring to the job configuration includes a job ticket and print data . The CPU performs printing by receiving and processing the print job illustrated in . The job ticket is text data including tags and values. Referring to a line is an authentication identifier that includes 69536026 ac4f 8879 0a042c309ff6 generated by the CPU and described in the tag. A line indicates the number of copies 1 described in the tag. A line is a two sided printing setting and describes off which means that two sided printing is not performed. A line is a stapling setting and describes off which means that stapling is not performed. A line is a punching setting and describes off which means that punching is not performed. A line is a bookbinding setting and describes off which means that bookbinding is not performed. When stapling is to be performed at the upper left position a value UL is described. When punching is to be performed a value on is described.

In step S the CPU acquires the authentication identifier from the job ticket of the received print job.

In step S the CPU determines whether the authentication identifier acquired from the job ticket is one that has already been issued. To make this determination the CPU checks whether the authentication identifier acquired from the job ticket coincides with any one stored in the identifier storage table in the external memory . When the authentication identifier acquired from the job ticket does not coincide with any one stored in the identifier storage table NO in step S the received print job has not undergone authentication processing and the CPU exits this flowchart without performing printing.

When the authentication identifier acquired from the job ticket coincides with any one stored in the identifier storage table YES in step S then in step S the CPU prints the received print job.

The image output apparatus performs the above described image output processing. Specifically in step S to display the information code based on the status information and function information the client apparatus that has captured the information code can display a setting screen based on suitable status information and suitable function information of the image output apparatus .

Processing performed by the client apparatus will be described in detail below with reference to the flowchart illustrated in . A series of print processing is started when the print application is activated on the client apparatus in response to a user s instruction. When the print application is activated by the relevant instruction in step S the print application displays a screen for capturing the information code of the image output apparatus and then the user instructs to capture the information code on this screen.

In step S the print application analyzes the status information of the image output apparatus based on the captured information code. The result of analysis is as illustrated in or B depending on the authentication setting of the image output apparatus .

In step S the print application transmits an analysis completion notification to the job reception address of the image output apparatus included in the analyzed status information. More specifically the print application transmits the analysis completion notification to 192.168.1.99 which is the value of DestinationAdress in the line . The completion notification may be transmitted in any format as long as it can be recognized by the image output apparatus .

In step S the print application extracts the authentication necessity information from the result of information code analysis. When the information code is as illustrated in the authentication necessity information is No which is the value of Ruth in the line . When the information code is as illustrated in the authentication necessity information is Yes which is the value of Ruth in the line .

In step S the print application determines the necessity of authentication. When the information code is as illustrated in i.e. the authentication necessity information is Yes YES in step S the image output apparatus performs processing necessary for authentication.

In step S the print application requests the authentication URL in the analyzed information code for an authentication HTML file. More specifically since the analyzed information code is as illustrated in the print application requests http 192.168.1.99 authentication the value of AuthURL in the line for an authentication HTML file.

In step S the print application receives the authentication HTML file from the image output apparatus and then displays the authentication screen. The authentication HTML file to be received is as illustrated in . illustrates an example authentication screen displayed by the print application of the client apparatus . A screen is an authentication screen based on the received authentication HTML file. A control is a control for entering an ID. A control is a control for entering a password. To perform authentication after entering an ID and password the user taps the AUTHENTICATION button . To stop authentication to cancel the print processing the user taps the CANCEL button .

In step S the print application transmits to the image output apparatus an authentication form including the user input ID and password and information about the tapped button.

In step S the print application determines whether the user has tapped the AUTHENTICATION button or the CANCEL button . When the user has tapped the AUTHENTICATION button AUTHENTICATION in step S the print application performs authentication processing. Otherwise when the user has tapped the CANCEL button CANCEL in step S the print application ends the print processing exits the flowchart .

In step S the print application receives the result of authentication and the authentication identifier from the image output apparatus . When the result of authentication is failed the authentication identifier is not received.

In step S the print application determines the result of authentication. When the result of authentication is failed NO in step S the print application advances processing to step S.

In step S the print application displays a message about failed authentication to the user and then redisplays the authentication screen in step S. When the result of authentication is successful YES in step S the print application advances processing to step S. Otherwise when the information code is as illustrated in i.e. the authentication necessity information is No NO in step S the print application advances processing to step S.

In step S the print application extracts the status information from the analyzed information code. Referring to the information code illustrated in the status information is PaperEmpty A4 which is the value of DeviceStatus in the line or . This means that A4 paper is out.

In step S the print application determines whether message display is necessary. In this case since the status information is present i.e. message display is necessary YES in step S the print application advances processing to step S. When the status information is not present i.e. message display is not necessary NO in step S the print application advances processing to step S.

In step S the print application displays the status information as a message to the user. illustrates an example of a message screen displayed on the client apparatus by the print application. A message screen includes a CANCEL button and a CONTINUE button for accepting the message and continuing processing. The user taps either button on this screen.

In step S the print application determines the processing selected by the user. When the user taps the CANCEL button YES in step S the print application ends the print processing exits the flowchart . When the user taps the CONTINUE button NO in step S the print application advances processing to step S.

In step S the print application displays the print attribute setting screen based on the analyzed information code. The print application performs this processing based on the function information on the image output apparatus described in the information code. Based on the result of analysis of the information code illustrated in the function information of the image output apparatus is indicated by DeviceCapability in the line or . Based on the lines and the print application recognizes that monochrome color printing one sided two sided printing stapling upper left upper right right left and bookbinding can be specified. illustrates an example of a print attribute setting screen displayed by the print application based on this information. A print attribute setting screen displays the following controls. A control is used to specify the number of copies. A control is used to specify monochrome color printing. A control is used to specify two sided printing. A control is used to specify stapling. A control is used to specify punching. A control is used to specify bookbinding. An OK button is used to proceed to the following step after completion of print attribute setting. A CANCEL button is used to end the print processing. Although all of the functions are enabled in this example some functions may be disabled function limitation depending on the ability information of the image output apparatus .

More specifically assume a case where for example the information code DeviceCapability is Color Duplex Staple UL UR R L . In this case the monochrome color printing one sided two sided printing and stapling settings are enabled and the punching and bookbinding settings are disabled. With this ability information of the image output apparatus the print application displays a print attribute setting screen illustrated in . Controls for setting the number of copies to for setting stapling illustrated in are similar to the controls to illustrated in . Controls for setting punching and for setting bookbinding are disabled or grayed out.

Even with a difference between functions of the image output apparatuses in this way the print application reads the ability information generated by each image output apparatus to enable print attribute setting suitable for each image output apparatus .

In step S the print application displays a print file selection screen. illustrates an example of a print file selection screen displayed by the print application. A print file selection screen includes a SELECT FILE button for file selection. When the user taps the SELECT FILE button the user can select a file. The print file selection screen further includes a PRINT button . When the user taps the PRINT button after selecting a file the print application transmits the print job to the image output apparatus . The print file selection screen further includes a CANCEL button . When the user taps the CANCEL button the print application cancels the print processing.

In step S the user selects a print file and then taps the PRINT button . Then the print application advances processing to step S.

In step S the print application generates a print job based on the user set print attributes the authentication identifier received from the image output apparatus and the specified file. This print job is illustrated in . The print application transmits this print job to the image output apparatus and then ends the processing exits the flowchart .

As described above providing on the client apparatus a print application including the functions of a plurality of image output apparatuses and acquiring function information of the image output apparatus enable the following processing. Specifically the print application acquires the function information of the image output apparatus by using an imaging apparatus of the client apparatus thus enabling acquiring a job reception address address of the job transmission destination regardless of the network environment. Further based on the function information of the image output apparatus the print application enables the user to select only functions applicable to the type of each image output apparatus . Since the print application of the client apparatus acquires the status information of the image output apparatus regardless of the network environment the print application can know the printer status before the user performs print setting and instructs printing. Further even when an ID and password are required to enable the image output apparatus to perform accounting management performing authentication on the client apparatus enables performing printing similar to printing from other client apparatuses .

Processing performed by each client apparatus will be described below with reference to the flowcharts illustrated in . Since the system configuration is similar to the first exemplary embodiment redundant description and illustration will be omitted.

First of all differences of the present exemplary embodiment from the first exemplary embodiment will be described below. In the first exemplary embodiment when the image output apparatus is set to perform authentication authentication processing is performed on the client apparatus . In the present exemplary embodiment the image output apparatus changes the function information without performing this authentication processing. More specifically suppose a case where the image output apparatus is provided with the monochrome color printing one sided two sided printing stapling punching and bookbinding functions. When the image output apparatus is set not to require authentication the CPU describes in the information code all of these functions as the function information. However when the image output apparatus is set to require authentication the CPU does not include some functions in the function information although it is provided with these functions.

More specifically when the image output apparatus is set to require authentication the CPU changes the function information to specify monochrome setting two sided setting no stapling setting no punching setting and no bookbinding setting. Regularly when the image output apparatus is set not to require authentication it means that any user is permitted to perform printing by using all of the functions. However when the image output apparatus is set to require authentication it means that only a certain user is permitted to perform printing and therefore that unspecified users are not permitted to use all of the functions. Therefore when the image output apparatus requires authentication the CPU performs control in such a way that the intended functions are not intentionally included in the function information to prevent the client apparatus from using these functions.

The user having the client apparatus goes to the image output apparatus and then presses the PRINT FROM PORTABLE TERMINAL button displayed on the operation panel of the image output apparatus . Details of this processing according to the present exemplary embodiment are similar to the first exemplary embodiment and redundant description will be omitted.

In step S the image output apparatus CPU collects the current status information of the image output apparatus itself. Details of this processing according to the present exemplary embodiment are similar to the first exemplary embodiment and redundant description will be omitted.

In step S the CPU determines whether the image output apparatus is set to require ID password authentication. When the image output apparatus is set not to require ID password authentication NO in step S the CPU proceeds to step S. When the image output apparatus is set to require ID password authentication YES in step S the CPU proceeds to step S.

In step S the CPU changes the function information in the status information data illustrated in . More specifically the image output apparatus is intended to be provided with the monochrome color printing one sided two sided printing stapling punching and bookbinding functions. However in step S the CPU changes the function information to specify monochrome setting two sided setting no stapling setting no punching setting and no bookbinding setting.

After changing the function information the ability information describes DeviceCapability Mono Simplex . Processing in step S and subsequent steps is similar to that of the first exemplary embodiment and redundant description will be omitted.

Processing performed by the print application of the image output apparatus will be described below with reference to the flowchart illustrated in . This flowchart is similar to the flowchart for the print application illustrated in except that the authentication processing is not performed. Therefore the operation of each step is similar to the first exemplary embodiment and redundant description will be omitted. The print attribute setting screen displayed by the print application in step S is illustrated in . Although this screen is similar to that illustrated in functions other than the setting of the number of copies are disabled or grayed out. In this print attribute setting screen the user taps an OK button to execute printing or a CANCEL button to cancel printing.

In the present exemplary embodiment even if the image output apparatus requires ID password authentication to perform accounting management printing is possible without performing authentication on the client apparatus as described above. Further when the image output apparatus requires ID password authentication printing from the client apparatus such as a portable terminal is possible with some print functions limited.

With the printing system according to the first exemplary embodiment when the image output apparatus is set to require authentication printing is not possible if authentication from the client apparatus failed. With the printing system according to the second exemplary embodiment when the image output apparatus is set to require authentication the image output apparatus offers print functions in response to a print request from the client apparatus with predetermined functions limited.

A printing system according to a third exemplary embodiment of the present invention will be described below. Specifically when the image output apparatus is set not to require authentication the image output apparatus performs printing from the client apparatus based on the regular function information. On the other hand when the image output apparatus is set to require authentication the image output apparatus divides the processing into two pieces. One piece of processing is the print processing based on the regular function information when authentication from the client apparatus is successfully completed. When the result of authentication is failed the image output apparatus performs the print processing by using the predetermined limitation functions as the ability information.

Specifically when the print application receives the result of successful authentication processing from the image output apparatus the print application displays the print setting screen as illustrated in or D based on the function information included in the information code. Otherwise when the print application receives the result of failed authentication processing from the image output apparatus the print application displays the print setting screen as illustrated in based on the predetermined function information.

Providing such a printing system enables a user having neither ID nor password for authentication to perform minimum printing even when the image output apparatus is set to require authentication.

In the first to third exemplary embodiments the client apparatus reads the information code including the status information of the image output apparatus displayed on the operation panel of the image output apparatus . Since this processing requires that the client apparatus acquires the status information of the image output apparatus the following alternative methods can be used.

One method is that a short distance communication module is installed in the client apparatus and the image output apparatus and the print application of the client apparatus acquires the information code. This method enables wirelessly transmitting information from the client apparatus to the image output apparatus . In the first exemplary embodiment when authentication is necessary the image output apparatus generates the authentication identifier transmits it to the client apparatus and determines whether the authentication identifier is to be included in a job ticket for printing. However when the short distance communication module is used there is provided a method for transmitting the individual identification number of the client apparatus to the image output apparatus during wireless communication. At this time the image output apparatus stores the individual identification number of the client apparatus in a predetermined area of the external memory . Further when the print application of the client apparatus transmits a print job the print application describes the individual identification number in the job ticket. Through such processing when the image output apparatus is set to require authentication the image output apparatus acquires the individual identification number included in the job ticket of the print job received from the client apparatus . The image output apparatus checks whether the acquired individual identification number coincides with the one stored in the external memory and only when the acquired individual identification number coincides with the stored one performs printing. This processing enables the print processing in a case where the image output apparatus is set to require authentication in the first exemplary embodiment.

In the first to third exemplary embodiments the status information of the image output apparatus can be exchanged by e mail. More specifically the image output apparatus embeds e mail address information into the information code of the image output apparatus . The client apparatus captures this information. Then the client apparatus acquires the e mail address from the information code e mail address acquisition . The client apparatus sends an empty e mail to the e mail address of the image output apparatus . Upon reception of the empty e mail mail reception the image output apparatus sends back to the client apparatus an e mail reply e mail having the information illustrated in as a body text mail transmission . Based on the status information the printing system performs similar processing to the first to third exemplary embodiments.

The present exemplary embodiment enables the user to easily identify an image output apparatus subjected to image output and then perform desired printing.

The present invention is also achieved by performing the following processing. Specifically software a program for implementing the functions of the above described exemplary embodiments is supplied to a system or apparatus via a network or various storage media and a computer or CPU microprocessor unit MPU etc. of the system or apparatus reads the program and executes it.

The above described exemplary embodiments enable the user to easily identify an image output apparatus subjected to image output and then perform desired printing. The above described exemplary embodiments further enable the user to easily identify an image output apparatus subjected to image output recognize the status of the identified image output apparatus set print attributes suitable for the functions of the identified image output apparatus and output an image.

Aspects of the present invention can also be realized by a computer of a system or apparatus or devices such as a CPU or MPU that reads out and executes a program recorded on a memory device to perform the functions of the above described embodiment s and by a method the steps of which are performed by a computer of a system or apparatus by for example reading out and executing a program recorded on a memory device to perform the functions of the above described embodiment s . For this purpose the program is provided to the computer for example via a network or from a recording medium of various types serving as the memory device e.g. computer readable storage medium .

While the present invention has been described with reference to exemplary embodiments it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all modifications equivalent structures and functions.

This application claims priority from Japanese Patent Application No. 2012 029709 filed Feb. 14 2012 which is hereby incorporated by reference herein in its entirety.

