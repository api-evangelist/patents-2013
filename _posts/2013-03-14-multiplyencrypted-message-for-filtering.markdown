---

title: Multiply-encrypted message for filtering
abstract: A multiple encryption mechanism is described. In an embodiment, an encrypted electronic message and a first decryption key of a public-private key group is received. The first decryption key is operable to decrypt a set of properties for the encrypted electronic message without decrypting the encrypted electronic message. The encrypted electronic message and the set of message properties are encrypted using one or more encryption keys of the public-private key group. The set of properties for the encrypted electronic message is decrypted using the first decryption key. Using the decrypted set of properties, it is determined whether the encrypted electronic message should be flagged as a specified type of electronic message.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09497023&OS=09497023&RS=09497023
owner: Amazon Technologies, Inc.
number: 09497023
owner_city: Seattle
owner_country: US
publication_date: 20130314
---
Detection of unwanted communications compromised data and malware has been an increasing concern as networked communication continues to grow at tremendous rates. With the growth of communication networks such as the Internet the increasing amount of data interchange and more recently the growth of cloud computing the vulnerability of computers and servers through networked communication has become an increasingly significant issue. In particular electronic mail communication has been plagued by high volumes of junk mail e.g. spam and other unsolicited communications as well as malicious communications malware phishing attempts and other maliciously crafted electronic content . Some filtering solutions have been developed to combat these unwanted communications. For example service providers have used heuristic detection and filtering to identify and quarantine unwanted communications. These heuristic approaches may rely on granting to a service provider access to messaging content to perform the filtering. While a user may employ encryption or other security measures to protect messages in transit the user is not provided privacy from the service provider because the service provider requires access to the original message.

In general this disclosure describes using multiple encryption levels for electronic messages in order to reduce the amount of information that a user needs to disclose to a messaging service provider in order to filter the electronic messages. In one embodiment an encryption decryption key pair may be generated for a user. The encryption decryption key pair may include multiple decryption keys. A first decryption key operable to decrypt a limited set of message properties needed for message filtering may be distributed to the service provider. A second decryption key operable to decrypt the entire message may be distributed to the user. The encryption decryption key pair may also have an associated verification function permitting the user to verify that the limited set of message properties were correctly generated without requiring the user to possess a copy of the first private key. The service provider may use the limited set of message properties to filter messages. The limited set of message properties provides sufficient information to determine if a message should be filtered e.g. determine if the message is a spam message without giving the service provider access to the entirety of the associated message. It should be appreciated that while the present disclosure describes embodiments in the context of electronic mail delivery the principles described may be applied to other types of messaging and communications where encryption and filtering may be desired.

In general filtering is one method of protecting users from unwanted electronic mail such as spam. Such unwanted electronic mail typically involves messages sent to large numbers of recipients. The unwanted electronic mail may contain advertisements hyperlinks that navigate to phishing sites or sites that are hosting malware and other malicious content or malware such as executable file attachments. Some methods for filtering unwanted electronic mail may include message filtering based on the content of the email. Message filtering may involve processing an electronic mail message to classify the message according to specified criteria. Message filtering software may allow an electronic mail message to continue delivery to its destination unchanged. The message filtering software may also edit the message redirect the message to a different location or discard the message. The message filtering software may process a message using various techniques such as applying one or more tests for spam. For example the message filtering software may scan the text of a message for known spam patterns such as by identifying certain words or expressions assigning a score to each message based on the identifications and if the score is above a predetermined value the message may be flagged as a spam message. Message filtering may also involve using more complex methods such as statistical filtering where messages may be marked as spam based on identification of specific statistical patterns in the messages based on word usage.

One drawback of message filtering is that a filtering service must access the contents of a message in order to apply a filtering technique as described above. If a user wishes to securely send a message using encryption the filtering service will not be able to apply filtering techniques unless the filtering service is provided the keys to decrypt the message. Various aspects of the disclosure will now be described with regard to certain examples and embodiments which are intended to illustrate but not to limit the disclosure. In the following detailed description references are made to the accompanying drawings that form a part of the detailed description and that show by way of illustration specific embodiments or examples. The drawings herein are not drawn to scale. Like numerals represent like elements throughout the several figures.

In various embodiments described herein systems and methods are described for message filtering using a multiply encrypted message. illustrates an example system for confidential mail filtering using a multiply encrypted message. Referring to a key generator may construct a public private key pair for a message recipient including at least a public key for encrypting a message a first private key for partially decrypting the message and a second private key for fully decrypting the message. The key generator may distribute the public key to a sender for example by distributing the public key using a public key infrastructure . The key generator may distribute the first private key to a service provider contracted to perform message filtering on behalf of a recipient . The key generator may distribute the second private key to the recipient .

The sender may send an encrypted message that was encrypted using the public key to the recipient via the service provider . In one embodiment the public private key pair may include a pair of encryption keys E and E and a pair of decryption keys D and D where D E X X and D E X X for any input X. For example a message encrypted using encryption key E may be decrypted using decryption key D and a message encrypted using encryption key E may be decrypted using decryption key D. The sender may cause generation of a message M and a message thumbprint T M of salient properties for message M. In one embodiment the message thumbprint T M may preserve certain properties of the message M without allowing for the possibility of reconstructing the message M from the thumbprint T M . In some embodiments the thumbprint T M may preserve statistical properties that allow a specially designed heuristic to make filtering decisions that are consistent to some predetermined degree of confidence with filtering decisions that would be made based on the original message.

In one embodiment thumbprint T M may consist of a dictionary of the words in message M. For example thumbprint T M may include at least a subset of the words contained in the message M such that the subset can be analyzed to detect presence of one or more indications of a spam message. The subset can also be analyzed to perform statistical analysis on the words in the subset. In another embodiment thumbprint T M may consist of a weighted suffix tree based on the words in message M wherein the weighted suffix tree includes the suffixes of the message content in a way that allows for implementation of various search operations. In other embodiments thumbprint T M may consist of a Markov model based on message M or some other probabilistic model.

In one embodiment the sender may construct a message by concatenating message M and thumbprint T M . For example a multi part Multipurpose Internet Mail Extensions MIME message may be generated with a first message part containing the message M encrypted with encryption key E i.e. E M and a second message part containing the thumbprint T M encrypted with encryption key E i.e. E T M . The multi part MIME message may then be sent to the recipient . In another embodiment the sender may cause generation of a message concatenating message M and thumbprint T M using onion layering by encrypting the message M using encryption key E concatenating encrypted message M with thumbprint T M and encrypting the concatenated message using encryption key E i.e. E E M T M .

In another embodiment the public private key pair may include a single encryption key E and a pair of decryption keys D and D where D E X X for any input X. For example a message encrypted using encryption key E may be decrypted using decryption key D. Applying the decryption key D to the same encrypted input E X may generate a partially obscured input D E X X . Partially obscured input X may preserve certain properties of the input X such that partially obscured input X may be used as a thumbprint of the message. For example partially obscured input X may contain at least some of the trigrams of input X without preserving their order and allow for statistical analysis of the encrypted message without allowing for the possibility of reconstructing input X using X . In this embodiment the sender may generate a message M encrypt the message using encryption key E to generate message E M and send the message E M to recipient . Service provider may use decryption key D to generate partially obscured input D E X X and use partially obscured input X as a message thumbprint.

The service provider may partially decrypt the encrypted message using the first private key to generate a partially decrypted message . In one embodiment the service provider may run the partially decrypted message through a mail filter to generate a filter result . For example the service provider may wish to provide a message filtering service that attempts to filter junk mail spam malware or other unwanted communications. In one embodiment the service provider may provide mail filter as part of its services. In other embodiments the service provider may interact with an outside service that provides access to mail filter as a contracted service. Service provider may send the partially decrypted message to mail filter to perform filtering based on the partially decrypted message .

In one embodiment the service provider may generate a message thumbprint based at least in part on the encrypted message and the first private key . The service provider may use the message thumbprint as input to the mail filter . The service provider may receive a filter result from mail filter . The filter result may comprise data indicative of the result of running mail filter on the message thumbprint such as a Boolean flag indicating whether the encrypted message is suspected of being an unwanted message.

In one embodiment the service provider may package the encrypted message with filter result for sending to the recipient . For example the filter result may be attached to the encrypted message using a message header and the packaged message may be sent to the recipient.

In an embodiment the service provider may take one or more actions in response to receiving filter result . If filter result indicates that the encrypted message is an unwanted message then the service provide may quarantine the encrypted message or delete the encrypted message . In this embodiment any message forwarded to the recipient by the service provider may be assumed to not be flagged as an unwanted message and the service provider is not explicitly required to include the filter result in the forwarded messages.

The recipient may fully decrypt the encrypted message using the second private key . In some embodiments the recipient may cause execution of a verification function using the encrypted message and fully decrypted message to confirm that the partially decrypted message correctly represented the message thumbprint of the encrypted message .

In one embodiment the recipient may receive an encrypted message and the message thumbprint from the service provider . In some embodiments the message thumbprint may be encrypted. The recipient may decrypt the encrypted message using the second private key to generate the original message. The recipient may send the decrypted message to the verification function which may independently generate a message thumbprint based on the decrypted message . The verification function may independently encrypt the message thumbprint using the public key . The verification function may compare the independently generated encrypted message thumbprint with the encrypted thumbprint provided by the service provider to verify that the provided encrypted thumbprint was correctly generated.

In another embodiment the recipient may receive an encrypted message from the sender and a message hash from the service provider . The service provider may hash the message thumbprint received from the sender and forward the hash to the recipient by for example including the hash with the filter result . The recipient may decrypt the encrypted message to produce the decrypted message and send the decrypted message to verification function . The verification function may independently generate a message thumbprint based on the original message hash the message thumbprint and then compare the independently computed hashed message thumbprint with the received hashed message thumbprint to verify the received hashed message thumbprint.

The recipient may make a message delivery determination based in part on the filter result and message verification result . For example the recipient may choose to discard messages that fail the verification function . Alternatively the recipient may choose to quarantine or discard messages that pass the verification function but are otherwise indicated as being an unwanted message based on the filter result .

The examples illustrated in describe embodiments in the context of an electronic message delivery infrastructure configured to deliver messages from a sender to a recipient via one or more service providers in communication with a message filtering service. However the described principles may be used to provide secure message delivery with message filtering in other contexts. For example in other embodiments multiple encryption techniques as those discussed above may be used with filtering techniques to categorize encrypted data packets data units or data files by using encrypted thumbprints to identify salient properties of the encrypted data without compromising the encrypted data.

Operation may be followed by operation . Operation illustrates causing decryption of the thumbprint using the first private key to identify the set of message properties. Operation may be followed by operation . Operation illustrates causing filtering of the encrypted electronic message using the set of message properties to determine whether the electronic message is a specified type of electronic message. For example the set of message properties can be used to determine if the electronic message is junk mail spam malware or other unwanted communications. If it is determined the electronic message is a specified type of electronic message in operation then operation may be followed by operation . Operation illustrates indicating that the electronic message is a specified type of electronic message. For example an indication such as a Boolean flag may be provided indicating whether the encrypted message is suspected of being an unwanted message. If the electronic message is not a specified type of electronic message then operation may be followed by operation . Operation illustrates indicating that the electronic message is not a specified type of electronic message. Operations and may be followed by operation . Operation illustrates verifying that the encrypted thumbprint was correctly generated based on the electronic message.

Operation may be followed by operation . Operation illustrates determining that the encrypted electronic message should be filtered using the decrypted set of properties. For example it can be determined that the encrypted electronic message is an unwanted message and that the message should be quarantined. If the encrypted electronic message should be filtered then operation may be followed by operation . Operation illustrates indicating that the encrypted electronic message should be filtered. If the electronic message should not be filtered then operation may be followed by operation . Operation illustrates indicating that the encrypted electronic message should not be filtered.

First network may be for example a publicly accessible network made up of multiple networks operated by various entities such as the Internet. Second network may be for example a company network that is wholly or partially inaccessible from computing systems external to second network . Computers and may include for example home computing systems that connect directly to the Internet e.g. via a cable modem or a Digital Subscriber Line DSL .

In addition to server computers and of second network second network may include a gateway as discussed above. Second network may further include additional networking devices such as a router . Router may manage communications within second network for example by forwarding packets or other data communications as appropriate based on characteristics of such communications e.g. header information including source and or destination addresses protocol identifiers etc. and or the characteristics of the second network e.g. routes based on network topology etc. . It will be appreciated that for the sake of simplicity various aspects of the computing systems and other devices of this example are illustrated without showing certain conventional details. Additional computing systems and other devices may be interconnected in other embodiments and may be interconnected in different ways.

Referring to server computers and are part of second network and each server computer may be assigned a network address not shown in accordance with second network . For example the second network addresses may be unique with respect to the second network but not guaranteed to be unique with respect to other computing systems that are not part of second network . As one example Internet Protocol IP and other networking protocols may reserve groups or blocks of network addresses with such reserved network addresses not being routable over networks external to the second network . In such situations different networks may each use the same network addresses within their networks as the network addresses are locally unique to each network but those network addresses may not be used for communications between a computing system of a different network and another computing system external to the network. IP addresses are used to illustrate some example embodiments in the present disclosure. However it should be understood that other network addressing schemes may be applicable and are not excluded from the scope of the present disclosure.

In this example to facilitate communications between server computers and of second network and other external computing systems that are not part of second network e.g. computers and and or other computing systems that are part of first network one or more gateway devices may be used. In particular one or more first network addresses not shown may have previously been assigned for use in representing second network . Such first network addresses may be routable over the Internet such that a communication that is sent by external computer and that has one of second network s first network addresses as its destination network address will be routed over the Internet to gateway device . Furthermore additional gateway devices not shown may be provided as needed.

Gateway device may operate to manage both incoming communications to the second network from first network and outgoing communications from second network to first network . For example if server computer sends a message not shown to one of computers in first network server computer may create an outgoing communication that includes an external first network address e.g. a public IP address for computer as the destination address and include a second network address e.g. a private IP address for server computer as the source network address. Router then uses the destination address of the outgoing message to direct the message to gateway device for handling. In particular in order to allow computer to reply to the outgoing message gateway device may temporarily map one of the public network addresses for second network to server computer and modify the outgoing message to replace the source network address with the mapped first network address. Gateway device may then update its mapping information with the new mapping and forward the modified outgoing message to the destination computer over the Internet.

If computer responds to the modified outgoing message by sending a response incoming message not shown that uses the mapped first network address for server computer as the destination network address the response incoming message may be directed over the Internet to gateway device . Gateway device may then perform similar processing in reverse to that described above for the outgoing message. In particular gateway device may use its mapping information to translate the mapped first network address into the second network address of server computer modify the destination network address of the response incoming message from the mapped first network address to the second network address of server computer and forward the modified incoming message to server computer . In this manner at least some of the internal computers of second network may communicate with external computing systems via temporary use of the first network addresses. Furthermore in some situations one or more of the internal computing systems of second network may be mapped to use one of the first network addresses e.g. to a unique combination of a first network address and a port number such that external computing systems may initiate new incoming messages to the internal computing system by directing the new incoming messages to the mapped representative first network address port as the destination network address of the new incoming messages.

Communication network may provide access to computers . User computers may be computers utilized by customers or other customers of data center . For instance user computer or may be a server a desktop or laptop personal computer a tablet computer a wireless telephone a personal digital assistant PDA an e book reader a game console a set top box or any other computing device capable of accessing data center . User computer or may connect directly to the Internet e.g. via a cable modem or a Digital Subscriber Line DSL . Although only two user computers and are depicted it should be appreciated that there may be multiple user computers.

User computers may also be utilized to configure aspects of the computing resources provided by data center . In this regard data center might provide a Web interface through which aspects of its operation may be configured through the use of a Web browser application program executing on user computers . Alternatively a stand alone application program executing on user computers might access an application programming interface API exposed by data center for performing the configuration operations. Other mechanisms for configuring the operation of the data center including deploying updates to an application might also be utilized.

Servers shown in may be standard servers configured appropriately for providing the computing resources described above and may provide computing resources for executing one or more applications. In one embodiment the computing resources may be virtual machine instances . In the example of virtual machine instances each of the servers may be configured to execute an instance manager or capable of executing the virtual machine instances . The instance managers may be a virtual machine monitor VMM or another type of program configured to enable the execution of virtual machine instances on servers for example. As discussed above each of the virtual machine instances may be configured to execute all or a portion of an application.

It should be appreciated that this example describes a computing environment providing virtual machine instances other types of implementations can be utilized with the concepts and technologies disclosed herein. For example the embodiments disclosed herein might also be utilized with computing systems that do not utilize virtual machine instances.

In the example data center shown in a router may be utilized to interconnect the servers and . Router may also be connected to gateway which is connected to communications network . Router may manage communications within networks in data center for example by forwarding packets or other data communications as appropriate based on characteristics of such communications e.g. header information including source and or destination addresses protocol identifiers etc. and or the characteristics of the private network e.g. routes based on network topology etc. . It will be appreciated that for the sake of simplicity various aspects of the computing systems and other devices of this example are illustrated without showing certain conventional details. Additional computing systems and other devices may be interconnected in other embodiments and may be interconnected in different ways.

In some embodiments one or more of the virtual machine instances of data center may form part of one or more networks. In some embodiments gateway may be used to provide network address translation NAT functionality to a group of virtual machine instances and allow the virtual machine instances of the group to use a first group of internal network addresses to communicate over a shared internal network and to use a second group of one or more other external network addresses for communications between virtual machine instances of the group and other computing systems or virtual machine instances that are external to the group. An IP address is one example of a network address that is particularly applicable to the TCP IP context in which some embodiments of the present disclosure can be implemented. The use of IP addresses herein is intended to be illustrative of network addresses and not limiting as to the scope of the described concepts.

Virtual machine instances may be assigned a private network address not shown . For example the private network addresses may be unique with respect to their respective private networks but not guaranteed to be unique with respect to other computing systems that are not part of the private network. IP addresses are used to illustrate some example embodiments in the present disclosure. However it should be understood that other network addressing schemes may be applicable and are not excluded from the scope of the present disclosure.

Gateway may operate to manage both incoming communications to data center from communication network and outgoing communications from data center to communication network . For example if virtual machine instance sends a message not shown to computer virtual machine instance may create an outgoing communication that includes network address on a first network e.g. an external public IP address for computer as the destination address and include a network address on a second network e.g. a private IP address for virtual machine instance as the source network address. Router may then use the destination address of the outgoing message to direct the message to gateway for handling. In particular in order to allow computer to reply to the outgoing message gateway may temporarily map one of the public network addresses for data center to virtual machine instance and modify the outgoing message to replace the private network address for the source network address with the mapped public network address. Gateway may then update its mapping information with the new mapping and forward the modified outgoing message to computer over the Internet.

If computer responds to the modified outgoing message by sending a response incoming message not shown that uses the mapped public network address for virtual machine instance as the destination network address the response incoming message may be directed over the Internet to gateway . Gateway may then perform similar processing in reverse to that described above for the outgoing message. In particular gateway may use its mapping information to translate the mapped public network address into the private network address of virtual machine instance modify the destination network address of the response incoming message from the mapped public network address to the private network address of virtual machine instance and forward the modified incoming message to virtual machine instance . In this manner at least some of the internal computers of data center may communicate with external computing systems via temporary use of the public network addresses. Furthermore in some situations one or more of the internal computing systems of data center may be mapped to use one of the public network addresses e.g. to a unique combination of a public network address and a port number such that external computing systems may initiate new incoming messages to the internal computing system by directing the new incoming messages to the mapped representative public network address port as the destination network address of the new incoming messages.

It should be appreciated that the network topology illustrated in has been greatly simplified and that many more networks and networking devices may be utilized to interconnect the various computing systems disclosed herein. These network topologies and devices should be apparent to those skilled in the art.

It should also be appreciated that data center described in is merely illustrative and that other implementations might be utilized. Additionally it should be appreciated that the functionality disclosed herein might be implemented in software hardware or a combination of software and hardware. Other implementations should be apparent to those skilled in the art. It should also be appreciated that a server gateway or other computing device may comprise any combination of hardware or software that can interact and perform the described types of functionality including without limitation desktop or other computers database servers network storage devices and other network devices PDAs tablets cellphones wireless phones pagers electronic organizers Internet appliances television based systems e.g. using set top boxes and or personal digital video recorders and various other consumer products that include appropriate communication capabilities. In addition the functionality provided by the illustrated modules may in some embodiments be combined in fewer modules or distributed in additional modules. Similarly in some embodiments the functionality of some of the illustrated modules may not be provided and or other additional functionality may be available.

In at least some embodiments a server that implements a portion or all of one or more of the technologies described herein including the techniques to implement the functionality of a mail filter and messaging services may include a general purpose computer system that includes or is configured to access one or more computer accessible media. illustrates such a general purpose computing device . In the illustrated embodiment computing device includes one or more processors and or which may be referred herein singularly as a processor or in the plural as the processors coupled to a system memory via an input output I O interface . Computing device further includes a network interface coupled to I O interface .

In various embodiments computing device may be a uniprocessor system including one processor or a multiprocessor system including several processors e.g. two four eight or another suitable number . Processors may be any suitable processors capable of executing instructions. For example in various embodiments processors may be general purpose or embedded processors implementing any of a variety of instruction set architectures ISAs such as the x86 PowerPC SPARC or MIPS ISAs or any other suitable ISA. In multiprocessor systems each of processors may commonly but not necessarily implement the same ISA.

System memory may be configured to store instructions and data accessible by processor s . In various embodiments system memory may be implemented using any suitable memory technology such as static random access memory SRAM synchronous dynamic RAM SDRAM nonvolatile Flash type memory or any other type of memory. In the illustrated embodiment program instructions and data implementing one or more desired functions such as those methods techniques and data described above are shown stored within system memory as code and data .

In one embodiment I O interface may be configured to coordinate I O traffic between processor system memory and any peripheral devices in the device including network interface or other peripheral interfaces. In some embodiments I O interface may perform any necessary protocol timing or other data transformations to convert data signals from one component e.g. system memory into a format suitable for use by another component e.g. processor . In some embodiments I O interface may include support for devices attached through various types of peripheral buses such as a variant of the Peripheral Component Interconnect PCI bus standard or the Universal Serial Bus USB standard for example. In some embodiments the function of I O interface may be split into two or more separate components such as a north bridge and a south bridge for example. Also in some embodiments some or all of the functionality of I O interface such as an interface to system memory may be incorporated directly into processor .

Network interface may be configured to allow data to be exchanged between computing device and other device or devices attached to a network or networks such as other computer systems or devices as illustrated in for example. In various embodiments network interface may support communication via any suitable wired or wireless general data networks such as types of Ethernet networks for example. Additionally network interface may support communication via telecommunications telephony networks such as analog voice networks or digital fiber communications networks via storage area networks such as Fibre Channel SANs or via any other suitable type of network and or protocol.

In some embodiments system memory may be one embodiment of a computer accessible medium configured to store program instructions and data as described above for for implementing embodiments of the corresponding methods and systems. However in other embodiments program instructions and or data may be received sent or stored upon different types of computer accessible media. Generally speaking a computer accessible medium may include non transitory storage media or memory media such as magnetic or optical media e.g. disk or DVD CD coupled to computing device via I O interface . A non transitory computer accessible storage medium may also include any volatile or non volatile media such as RAM e.g. SDRAM DDR SDRAM RDRAM SRAM etc. ROM etc. that may be included in some embodiments of computing device as system memory or another type of memory. Further a computer accessible medium may include transmission media or signals such as electrical electromagnetic or digital signals conveyed via a communication medium such as a network and or a wireless link such as may be implemented via network interface . Portions or all of multiple computing devices such as those illustrated in may be used to implement the described functionality in various embodiments for example software components running on a variety of different devices and servers may collaborate to provide the functionality. In some embodiments portions of the described functionality may be implemented using storage devices network devices or special purpose computer systems in addition to or instead of being implemented using general purpose computer systems. The term computing device as used herein refers to at least all these types of devices and is not limited to these types of devices.

It will be appreciated that while various items are illustrated as being stored in memory or on storage while being used these items or portions of them may be transferred between memory and other storage devices for purposes of memory management and data integrity. Alternatively in other embodiments some or all of the software modules and or systems may execute in memory on another device and communicate with the illustrated computing systems via inter computer communication. Furthermore in some embodiments some or all of the systems and or modules may be implemented or provided in other ways such as at least partially in firmware and or hardware including but not limited to one or more application specific integrated circuits ASICs standard integrated circuits controllers e.g. by executing appropriate instructions and including microcontrollers and or embedded controllers field programmable gate arrays FPGAs complex programmable logic devices CPLDs etc.

In some embodiments a system memory may be used which is one embodiment of a computer readable storage medium configured to store program instructions and data as described above for for implementing embodiments of the corresponding methods and apparatus. Portions or all of the multiple computer systems such as those illustrated herein may be used to implement the described functionality in various embodiments for example software components running on a variety of different devices and servers may collaborate to provide the functionality.

It will be appreciated that in some embodiments the functionality provided by the routines discussed above may be provided in alternative ways such as being split among more routines or consolidated into fewer routines. Similarly in some embodiments illustrated routines may provide more or less functionality than is described such as when other illustrated routines instead lack or include such functionality respectively or when the amount of functionality that is provided is altered. In addition while various operations may be illustrated as being performed in a particular manner e.g. in serial or in parallel and or in a particular order in other embodiments the operations may be performed in other orders and in other manners. Similarly the data structures discussed above may be structured in different ways in other embodiments such as by having a single data structure split into multiple data structures or by having multiple data structures consolidated into a single data structure and may store more or less information than is described e.g. when other illustrated data structures instead lack or include such information respectively or when the amount or types of information that is stored is altered .

The various features and processes described above may be used independently of one another or may be combined in various ways. All possible combinations and subcombinations are intended to fall within the scope of this disclosure. In addition certain method or process blocks may be omitted in some implementations. The methods and processes described herein are also not limited to any particular sequence and the blocks or states relating thereto can be performed in other sequences that are appropriate. For example described blocks or states may be performed in an order other than that specifically disclosed or multiple blocks or states may be combined in a single block or state. The example blocks or states may be performed in serial in parallel or in some other manner. Blocks or states may be added to or removed from the disclosed example embodiments. The example systems and components described herein may be configured differently than described. For example elements may be added to removed from or rearranged compared to the disclosed example embodiments.

Conditional language used herein such as among others can could might may e.g. and the like unless specifically stated otherwise or otherwise understood within the context as used is generally intended to convey that certain embodiments include while other embodiments do not include certain features elements and or steps. Thus such conditional language is not generally intended to imply that features elements and or steps are in any way required for one or more embodiments or that one or more embodiments necessarily include logic for deciding with or without author input or prompting whether these features elements and or steps are included or are to be performed in any particular embodiment. The terms comprising including having and the like are synonymous and are used inclusively in an open ended fashion and do not exclude additional elements features acts operations and so forth. Also the term or is used in its inclusive sense and not in its exclusive sense so that when used for example to connect a list of elements the term or means one some or all of the elements in the list.

While certain example embodiments have been described these embodiments have been presented by way of example only and are not intended to limit the scope of the inventions disclosed herein. Thus nothing in the foregoing description is intended to imply that any particular feature characteristic step module or block is necessary or indispensable. Indeed the novel methods and systems described herein may be embodied in a variety of other forms furthermore various omissions substitutions and changes in the form of the methods and systems described herein may be made without departing from the spirit of the inventions disclosed herein. The accompanying claims and their equivalents are intended to cover such forms or modifications as would fall within the scope and spirit of the inventions disclosed herein.

