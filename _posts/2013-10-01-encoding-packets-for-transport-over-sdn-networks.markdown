---

title: Encoding packets for transport over SDN networks
abstract: An ingress node in a Software Defined Network (SDN) comprising a receiver for receiving a data packet, a processor coupled to the receiver and further configured to obtain the data packet from the receiver in a transport protocol agnostic manner, and encapsulate the data packet in an SDN packet header, wherein the packet header comprises SDN flow-specific information provided by an SDN controller, and a transmitter coupled to the processor and further configured to transmit the encapsulated data packet across a single SDN toward an egress node in the SDN.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09215093&OS=09215093&RS=09215093
owner: Futurewei Technologies, Inc.
number: 09215093
owner_city: Plano
owner_country: US
publication_date: 20131001
---
The present application claims priority to U.S. Provisional Patent Application No. 61 720 326 filed Oct. 30 2012 by Lin Han et al. titled Encoding Packets for Transport over SDN Networks which is incorporated herein by reference as if reproduced in its entirety.

Modern communication and data networks comprise network nodes such as routers switches bridges and other devices that transport data through the network. Over the years the telecommunication industry has made significant improvements to the network nodes to support an increasing number of protocols and specifications standardized by the Internet Engineering Task Force IETF . Creating and coupling the complex network nodes to form networks that support and implement the various IETF standards e.g. virtual private network VPN requirements has caused modern networks to become complex and difficult to manage. As a result vendors and third party operators seek to customize optimize and improve the performance of the interwoven web of network nodes.

A software defined network SDN is a network technology that addresses customization and optimization concerns within convoluted networks. SDN architecture allows network administrators to have programmable central control of network traffic without requiring physical access to the network s devices. SDNs may be Internet Protocol IP networks utilizing Transmission Control Protocol Internet Protocol TCP IP protocols. SDNs may decouple the data forwarding capability e.g. the data plane from routing resource and other management functionality e.g. the control plane previously performed in the network nodes. Decoupling the control plane from the data plane of the network enables the network controller to efficiently control the network traffic through globally optimized traffic engineering and routing which departs from locally optimized shortest path first SPF . SDN may also simplify network operations or even have the capabilities to flatten the network with extended data routing vectors.

The extended data routing vectors in SDN can cover network information from multiple Open Systems Interconnection OSI layers e.g. Layer 2 L2 and or Layer 3 L3 for intelligent routing purposes. A basic approach to achieve decoupling of the network control from the network topology and data plane is by applying globally aware and topology decoupled software control at the edges of the network. The assumption is that traditional topology coupled bridging and routing may be re used at the core of the network so that scalability interoperability high availability and extensibility of the conventional networking protocols such as IP networks can still be maintained. Network nodes that support SDN e.g. SDN compliant nodes may be configured to implement the data plane functions while the control plane functions may be provided by an SDN controller. A group of nodes e.g. routers switches etc. controlled by a single SDN controller may be referred to as an SDN domain.

In an example embodiment the disclosure includes an ingress node in an SDN. The ingress node comprises a transmitter a receiver for receiving a data packet and a processor coupled to the transmitter the receiver and the memory. In one embodiment the processor is coupled to the receiver and is further configured to obtain the data packet from the receiver in a transport protocol agnostic manner and encapsulate the data packet in an SDN packet header wherein the packet header comprises SDN flow specific information provided by an SDN controller. The embodiment may further comprise a transmitter coupled to the processor with the transmitter being further configured to transmit the encapsulated data packet across a single SDN toward an egress node in the SDN.

In another example embodiment the disclosure includes a method of routing a packet carried out in a network node of an SDN. In one embodiment the method includes receiving a first data packet and a second data packet in a transport protocol agnostic manner wherein the first data packet and the second data packet are encoded using different traffic protocols encoded using the same traffic protocol with different source or destination addresses or encoded using the same traffic protocol with different service requests encapsulating the first data packet and the second data packet using a packet header specific to the SDN domain wherein each packet header comprises a field for identifying at least one packet specific property and a field for identifying a flow and transmitting the encapsulated first data packet and the encapsulated second data packet across a single SDN domain to a receiver.

In yet another example embodiment the disclosure includes a computer program product comprising computer executable instructions stored on a non transitory medium that when executed by a processor cause the processor to receive a first data packet and a second data packet receive a first data packet and a second data packet in a transport protocol agnostic manner wherein the first data packet and the second data packet are encoded using different traffic protocols using the same traffic protocol with different source or destination addresses or using the same traffic protocol with different service requests encapsulate the first data packet and the second data packet wherein encapsulation comprises appending a packet header provided by an Software Defined Network SDN controller to the packet and transmit the encapsulated first data packet and the encapsulated second data packet across a single SDN domain toward an egress node in the SDN wherein each packet header comprises a field for identifying at least one packet specific property and a field for identifying a flow.

These and other features will be more clearly understood from the following detailed description taken in conjunction with the accompanying drawings and claims.

It should be understood at the outset that although an illustrative implementation of one or more embodiments are provided below the disclosed systems and or methods may be implemented using any number of techniques whether currently known or in existence. The disclosure should in no way be limited to the illustrative implementations drawings and techniques illustrated below including the exemplary designs and implementations illustrated and described herein but may be modified within the scope of the appended claims along with their full scope of equivalents.

The disclosure includes encapsulating packets from a wide variety of competing traffic protocols e.g. Media Access Control MAC IP Multiprotocol Label Switching MPLS Asynchronous Transfer Mode ATM Frame Rate FR Synchronous Optical Networking SONET etc. using a packet header intelligible by all nodes within the SDN for a particular data flow and or stream. As used herein the terms data flow and or stream may be defined as a series of packets comprising data traffic from a source to at least one destination. By using the SDN flow specific encapsulation technique the SDN may be implemented in a transport layer agnostic manner or without regards to any interfacing traffic protocols. Some embodiments utilize an explicit mode packet header wherein a multicast tree identifier is placed in a packet header field. Other embodiments utilize an implicit mode packet header utilizing a lookup table to reference the multicast tree identifier e.g. to optimize packet size by mapping the identifier s in a database. Additionally some embodiments may identify a particular egress border router and or transit nodes in the header while other embodiments do not. As used herein a transit node or transit router may be a router inside the SDN domain that does not have any interfaces connecting to outside of the SDN domain. Other embodiments of methods systems protocols and devices are described herein or would be readily apparent to those of ordinary skill in the art and are considered within the scope of this disclosure.

The network controller may receive data from and transmit messages to the network nodes . Some of the incoming messages or parts of the incoming messages may be translated into a standard independent format for processing by some of the modules in the network controller . The standard independent format may be based on an abstract network control data model that provides an abstraction of the attributes or features of the various standard formats. The network controller may interact with the network nodes via a variety of application programming interface API protocols e.g. Openflow. The network controller may determine the global network topology of the network . With the global network topology state information dynamic traffic flow volume information and other network state information the network controller may make decisions on how to assign resources and route applications information and or data packet flows through the network .

It is understood that by programming and or loading executable instructions onto the NE at least one of the processor the cache and the long term storage are changed transforming the NE in part into a particular machine or apparatus e.g. a multi core forwarding architecture having the novel functionality taught by the present disclosure. It is fundamental to the electrical engineering and software engineering arts that functionality that can be implemented by loading executable software into a computer can be converted to a hardware implementation by well known design rules. Decisions between implementing a concept in software versus hardware typically hinge on considerations of stability of the design and numbers of units to be produced rather than any issues involved in translating from the software domain to the hardware domain. Generally a design that is still subject to frequent change may be preferred to be implemented in software because re spinning a hardware implementation is more expensive than re spinning a software design. Generally a design that is stable that will be produced in large volume may be preferred to be implemented in hardware for example in an ASIC because for large production runs the hardware implementation may be less expensive than the software implementation. Often a design may be developed and tested in a software form and later transformed by well known design rules to an equivalent hardware implementation in an ASIC that hardwires the instructions of the software. In the same manner as a machine controlled by a new ASIC is a particular machine or apparatus likewise a computer that has been programmed and or loaded with executable instructions may be viewed as a particular machine or apparatus.

Packets received by an SDN IBR may be encapsulated using an SDN flow specific header for transport and or routing through the SDN. The encapsulating header may comprise a control field and a Flow ID field. Control field may be used to describe a variety of characteristics e.g. the length of the encapsulating header unicast or multicast transmission backup or primary path transmission etc. The Flow ID may be used to identify and or distinguish one or multiple data flows inside an SDN domain. The Flow ID may be allocated either via an Implicit Method embodiment e.g. relying on lookup tables or via an Explicit Method embodiment e.g. expressly containing needed data as discussed further herein.

In order to encapsulate the new SDN header encoded packet over an Ethernet network a new EtherType may be assigned by the Internet Assigned Numbers Authority TANA . is an example embodiment of an Ethernet packet including a disclosed SDN header. The Ethernet packet comprises an Ethernet field using a new EtherType not depicted a Virtual Local Area Network LAN VLAN field a new SDN packet header field and a payload field e.g. for transporting Address Resolution Protocol ARP IP MPLS MAC encoded data. Ethernet packets including EtherType fields and other fields e.g. source MAC and destination MAC are generally known and those of ordinary skill will recognize permissible modifications of Ethernet packet in accordance with this disclosure.

The Flow ID field may be a variable length field for storing a Flow ID allocated across the entire SDN domain by an SDN controller e.g. network controller of . The SDN controller may track Flow ID assignments using various databases e.g. a free Flow ID pool database containing unassigned Flow IDs and an Assigned Flow ID Table database. An assigned Flow ID may be used to switch a flow based on the Flow ID at a system router e.g. network node of using a local switching table installed at each router by the SDN controller. The local switching table is discussed further herein. The SDN controller may allocate and or assign a Flow ID such that a loop in the SDN network will not be formed and packet delivery from the SDN IBR e.g. network node of to one or multiple SDN EBRs e.g. network node of is ensured so as to satisfy any preset Service Level Agreement SLA requirements for the delivery e.g. Quality of Service QoS Traffic Engineering TE etc. The length of the Flow ID may depend on the value of the bits in the control field indicating the protocol version employed e.g. IP version 4 IPv4 IPv4 VPN IP version 6 IPv6 IPv6 VPN Virtual Private LAN Service VPLS L2 VPN Multi Topology MT etc. and the method of flow identification e.g. Implicit Method or Explicit Method. For example the length of the Flow ID may vary according to Table 1 below showing the version value and corresponding length of SDN packet header and Flow ID 

A Flow ID may be generated from a service request using a Policy Component on the controller. The Policy Component may convert different service requests to a set of tuples. A tuple may be a single row of data from an ordered list of elements. One default policy requirement may be best effort service provision for the traffic e.g. based on an analysis of the traffic type and SDN EBR ID. For example if two traffic flows or data streams are of the same type and will pass through an SDN network via the same SDN EBR then the Flow ID for both flows or data streams may be the same. A more complicated policy may check additional or alternate tuples of the traffic. An example set of tuples is listed below in Table 2 

A Policy Component may utilize the service request to obtain an applicable set of tuples. The applicable set of tuples may be assigned to a Flow ID and consequently a network node e.g. network nodes of may use the Flow ID to lookup the applicable set of tuples in a database provided and or populated by the controller. Table 3 shows various services correlated with sets of tuples described in Table 2 

For the different versions of the generated encapsulating SDN header the allowed length for NetAbs field may differ and consequently the maximum size of NetAbsID may differ. As a result the proper version of the new SDN header may be selected to accommodate the extreme case. For example when the Multiple topology is used the version 0 of the new SDN header may not be used since the space of NetAbsID may be insufficient to embed the Topo ID.

The Policy Component may utilize the service request to obtain an applicable set of tuples. The applicable set of tuples may be assigned to a Flow ID and consequently a network node e.g. network nodes of may use the Flow ID to lookup the applicable set of tuples e.g. in an Explicit Method Assigned Flow ID table. The Explicit Method Assigned Flow ID table may be simpler than in the Implicit Method Assigned Flow ID table since most of the traffic information may be retrieved from the Flow ID itself. In some Explicit Method example embodiments each Flow ID may comprise a a count to indicate how many times the Flow ID is used and b detailed service class information. Table 5 shows the set of tuples generated by Policy to construct the Flow ID for different services. In the table NetAbsID includes NetAbsT information. The example in Table 5 shows various services correlated with sets of tuples utilized to construct the Flow ID 

At least one embodiment is disclosed and variations combinations and or modifications of the embodiment s and or features of the embodiment s made by a person having ordinary skill in the art are within the scope of the disclosure. Alternative embodiments that result from combining integrating and or omitting features of the embodiment s are also within the scope of the disclosure. Where numerical ranges or limitations are expressly stated such express ranges or limitations should be understood to include iterative ranges or limitations of like magnitude falling within the expressly stated ranges or limitations e.g. from about 1 to about 10 includes 2 3 4 etc. greater than 0.10 includes 0.11 0.12 0.13 etc. . For example whenever a numerical range with a lower limit R and an upper limit R is disclosed any number falling within the range is specifically disclosed. In particular the following numbers within the range are specifically disclosed R R k R R wherein k is a variable ranging from 1 percent to 100 percent with a 1 percent increment i.e. k is 1 percent 2 percent 3 percent 4 percent 5 percent . . . 50 percent 51 percent 52 percent . . . 95 percent 96 percent 97 percent 98 percent 99 percent or 100 percent. Moreover any numerical range defined by two R numbers as defined in the above is also specifically disclosed. The use of the term about means 10 of the subsequent number unless otherwise stated. Use of the term optionally with respect to any element of a claim means that the element is required or alternatively the element is not required both alternatives being within the scope of the claim. Use of broader terms such as comprises includes and having should be understood to provide support for narrower terms such as consisting of consisting essentially of and comprised substantially of. All documents described herein are incorporated herein by reference.

While several embodiments have been provided in the present disclosure it should be understood that the disclosed systems and methods might be embodied in many other specific forms without departing from the spirit or scope of the present disclosure. The present examples are to be considered as illustrative and not restrictive and the intention is not to be limited to the details given herein. For example the various elements or components may be combined or integrated in another system or certain features may be omitted or not implemented.

In addition techniques systems subsystems and methods described and illustrated in the various embodiments as discrete or separate may be combined or integrated with other systems modules techniques or methods without departing from the scope of the present disclosure. Other items shown or discussed as coupled or directly coupled or communicating with each other may be indirectly coupled or communicating through some interface device or intermediate component whether electrically mechanically or otherwise. Other examples of changes substitutions and alterations are ascertainable by one skilled in the art and could be made without departing from the spirit and scope disclosed herein.

