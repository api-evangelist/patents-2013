---

title: Image forming apparatus, method for controlling the same, recording medium, and image forming system for changing a power state of at least one of an image forming apparatus and a post-processing apparatus
abstract: An image forming apparatus capable of communicating with the post-processing apparatus. The image forming apparatus includes an execution unit configured to execute a shift processing for shifting the image forming apparatus into a power saving state, a notification unit configured to notify the post-processing apparatus of an instruction to stop supply of power to the post-processing apparatus, and a power control unit configured to control the supply of power to the execution unit. The notification unit is configured, if the supply of power to the notification unit is stopped in a case where the execution unit is executing the shift processing, to control so that power is supplied to the notification unit. The notification unit supplied with power notifies the post-processing apparatus of the instruction.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09654659&OS=09654659&RS=09654659
owner: Canon Kabushiki Kaisha
number: 09654659
owner_city: Tokyo
owner_country: JP
publication_date: 20130612
---
The present invention relates to an image forming apparatus a method for controlling the same a recording medium and an image forming system.

In recent years a shutdown function for flexibly turning off the power state of an image forming apparatus has been proposed as the demand for a power saving of appliances has increased. As examples of the shutdown function there are an auto shutdown function a weekly shutdown function and a remote shutdown function.

The auto shutdown function is to start a timer when an image forming apparatus is brought into a sleep state and maintain the sleep state. The timer is stopped when a predetermined period of time elapses to automatically turn off the image forming apparatus.

The weekly shutdown function is to previously set a day of the week and the image forming apparatus is automatically turned off when the time counted by a timer of the image forming apparatus reaches the set time.

Further by the remote shutdown function the image forming apparatus is remotely turned off by an external apparatus using a Management Information Base MIB of a Simple Mail Transfer Protocol SMPT or a unique application programming interface API .

The image forming apparatus is turned off by the above shutdown function to enable power saving of the image forming apparatus. On the other hand there is a demand for the power saving of the image forming apparatus even in the case where the image forming apparatus is not in an off state. A technique to save the power of the image forming apparatus has been known by which power is supplied to a device only when the device is used in the case where the image forming apparatus is not in the off state refer to Japanese Patent Application Laid Open Nos. 5 162421 and 8 238822 . In the image forming apparatus discussed in Japanese Patent Application Laid Open Nos. 5 162421 and 8 238822 a printer is energized powered only when a print function is used and the printer is not energized powered when the print function is not used.

The image forming apparatus can be connected to a post processing apparatus for discharging sorting stapling punching and cutting a paper output from the image forming apparatus. In general the image forming apparatus and the post processing apparatus use their respective power supplies different from each other. More specifically a switch for shutting down a controller unit mounted on the image forming apparatus hereinafter referred to as a main body controller a scanner unit a printer unit a FAX unit various boards and chips and the image forming apparatus use a power supply different from a switch for shutting down a controller unit mounted on a finisher apparatus hereinafter referred to as a finisher controller and shutting down the finisher controller. Therefore both switches for the image forming apparatus and the finisher apparatus need to be turned off to shut down both the image forming apparatus and the finisher apparatus by the above shutdown function. In a printing system equipped with the image forming apparatus and the finisher apparatus connected to the image forming apparatus the finisher apparatus is communicably connected to a printer unit to handle the paper printed by the printer unit of the image forming apparatus. For this reason the image forming apparatus communicates with the finisher apparatus via the printer unit. For this reason if the shutdown function is to be executed the main body controller of the image forming apparatus notifies the finisher controller of an operation end via the printer unit.

However as discussed in Japanese Patent Application Laid Open Nos. 5 162421 and 8 238822 the printer unit through which an end notification between the main body controller and the finisher controller goes is not always constantly supplied with power. If the supply of power to the printer unit is stopped the image forming apparatus cannot send an end notification to the finisher apparatus. As a result the finisher controller for turning off the finisher apparatus in response to the reception of the end notification cannot receive the notification because the supply of power to the printer unit is stopped so that the finisher controller cannot turn off the finisher apparatus.

Even in a case where the supply of power not only to the above printer but also to pathway devices between the main body controller and the finisher controller is stopped the image forming apparatus cannot send the end notification to a post processing apparatus. As a result the finisher apparatus cannot execute the shutdown function so that the finisher apparatus cannot be turned off.

The present invention is directed to the image forming apparatus which sends an end notification to a post processing apparatus by supplying power to a pathway device which is a path for the end notification in a case where the image forming apparatus notifies the post processing apparatus of the end processing.

According to an aspect of the present invention an image forming apparatus capable of communicating with a post processing apparatus includes an execution unit configured to execute a shift processing for shifting the image forming apparatus into a power saving state a notification unit configured to notify the post processing apparatus of an instruction to stop supply of power to the post processing apparatus and a power supply control unit configured to control supply of power to the execution unit and the notification unit. If the supply of power to the notification unit is stopped in a case where the execution unit executes the shift processing the power supply control unit is configured to control so that power is supplied to the notification unit and the notification unit supplied with power by the power supply control unit notifies the post processing apparatus of the instruction.

Further features and aspects of the present invention will become apparent from the following detailed description of exemplary embodiments with reference to the attached drawings.

Various exemplary embodiments features and aspects of the invention will be described in detail below with reference to the drawings.

An image forming system includes an image forming apparatus and a finisher apparatus a post processing apparatus connected to the image forming apparatus . The image forming apparatus forms an image on a sheet. The sheet on which an image is formed by the image forming apparatus is received by the finisher apparatus . The finisher apparatus applies post processing stapling punching and others to the sheet received by the image forming apparatus . The image forming apparatus of the image forming apparatus is connected to a personal computer PC via a local area network LAN . The image forming apparatus is communicably connected to the finisher apparatus .

The image forming apparatus includes a scanner unit a printer unit an operation unit a hard disk a facsimile FAX unit and a main body controller .

The scanner unit reads a document and outputs image data. The scanner unit includes a document feeding unit and a scanner unit . The document feeding unit conveys the document. The scanner unit optically reads the conveyed document and converts the read data into image data as an electric signal.

The printer unit prints on the sheet based on the image data. The printer unit includes a sheet feeding unit a marking unit and a sheet discharge unit . The sheet feeding unit includes a sheet cassette with a plurality of stages storing recording paper. The marking unit transfers the image data to the recording paper and fixes the image data onto the recording paper. The sheet discharge unit outputs the printed recording paper to the finisher apparatus . The conveyance of the paper by the printer needs to be synchronized with that of the paper by the finisher apparatus to convey the paper printed by the printer to the finisher apparatus . For this reason the printer of the image forming apparatus is connected to the finisher apparatus .

The operation unit includes various keys and a panel. The operation unit receives various instructions from a user via the various keys. The operation unit displays various information via the panel.

The main body controller is connected to the above configuration blocks such as the scanner unit the printer unit the operation unit the hard disk and the FAX unit to controls the configuration blocks.

The finisher apparatus subjects the recording paper output from the sheet discharge unit of the printer unit to processing such as discharging sorting stapling punching and cutting.

The image forming apparatus of the present exemplary embodiment is a multifunction peripheral in which the scanner unit the printer unit and the FAX unit can execute a plurality of functions. The functions which can be executed by the image forming apparatus are exemplified below.

Copy Function The image data of the document read by the scanner unit are stored in the hard disk and the printer unit prints on the paper based on the image data.

SEND Function The image data of the document read by the scanner unit are transmitted to the PC via the LAN .

BOX Function The image data of the document read by the scanner unit are stored in the hard disk . The image data transmitted from the PC are stored in the hard disk . Print Function Page description language PDL data transmitted from the PC are interpreted and printed by the printer unit .

The main body controller includes a main board performing general information processing and a sub board performing image forming processing. The main board and the sub board may be formed as one board.

The main board includes a central processing unit CPU a BootRom a memory a bus controller a nonvolatile memory a disk controller a flash disk a universal serial bus USB controller an interrupt controller a network controller and a real time clock hereinafter referred to as RTC . The BootRom is a nonvolatile storage memory and stores a boot program. The CPU executes the boot program an operating system OS and an application program. The memory is used as a work memory of the CPU . The bus controller has a bridge function with the sub board and performs control to communicate data with the sub board . The disk controller controls the hard disk and the flash disk . The flash disk is a comparatively small capacity storage apparatus a solid state disk SSD for example formed of a semiconductor device. The USB controller controls a USB memory . The interrupt controller performs interrupt processing according to the key operation of the operation unit and the reception of facsimile by the FAX unit . The network controller controls communication with the PC . The RTC is supplied with power from a battery and counts a current time. The main board is connected to the USB memory the operation unit and the hard disk .

The sub board includes a CPU a memory a bus controller a nonvolatile memory an image processing processor a device controller and a device controller . The CPU executes a boot program an OS and an application program. The memory is used as a work memory of the CPU . The bus controller has a bridge function with the main board and performs control to communicate data with the main board . The image processing processor subjects image data to various image processing. The image processing processor performs a real time digital image processing. The image processing processor communicates digital image data with the printer unit via the device controller . The image processing processor communicates digital image data with the scanner unit via the device controller . The FAX unit is connected to the CPU which controls the FAX unit . The finisher apparatus applies the post processing to the printed paper output from the printer unit .

The block diagram in is a simplified drawing. Actually however the CPUs and include a large number of hardware components in the vicinity of the CPUs such as a chip set a bus bridge and a clock generator.

The operation of the abovementioned copy function is described below with reference to the blocks in .

When the user issues instructions for copying via the operation unit the CPU transmits a command for reading the set document to the scanner unit via the CPU . The scanner unit which receives the command for reading optically scans the set document to convert the scanned data into digital image data. The digital image data are input to the image processing processor via the device controller . The image processing processor performs a direct memory access DMA transfer to temporarily store the digital image data into the memory via the CPU . When the CPU confirms that a certain amount or all of the digital image data are input to the memory the CPU transmits an image output command to the printer unit via the CPU . The CPU notifies the image processing processor of the position of the digital image data in the memory . The digital image data in the memory is transmitted to the printer unit via the image processing processor and the device controller according to a synchronizing signal from the printer unit . The printer unit which receives the digital image data prints an image on the paper based on the digital image data. If a plurality of prints is made the CPU stores the digital image data of the memory into the hard disk and transmits the digital image data stored in the hard disk to the printer unit to perform the second and the subsequent prints.

The term IDLE state refers to a state in which power is supplied to each unit of the image forming apparatus and the above various functions such as the copy function the SEND function the BOX function and the print function can be immediately executed.

The term Sleep state refers to a state in which the image forming apparatus operates with power consumption smaller than that in the IDLE state. The starting time of the image forming apparatus required for shifting from the sleep state to the IDLE state is shorter than that for shifting from the off state to the IDLE state. If the image forming apparatus is in the IDLE state and receives not print data from the PC for a certain period of time or the user does not operate the operation unit for a certain period of time the image forming apparatus shifts from the IDLE state to the sleep state. The condition under which the image forming apparatus shifts to the sleep state is not limited to the above condition. For example the image forming apparatus may shift from the IDLE state to the sleep state by the user operating a sleep shift key provided on the operation unit .

As illustrated in if the image forming apparatus is in the sleep state power is supplied to only the required places of the main body controller . More specifically in the sleep state power is supplied to the memory the USB controller the network controller and the interrupt controller of the main board of the main body controller . Further in the sleep state power is supplied to the operation unit and the FAX unit . The RTC is backed up by a battery that is a power supply different from an alternating current AC power supply .

In the sleep state the interrupt controller receives interrupt from the network controller due to the reception of a signal from the network interrupt from the RTC due to timeout of the RTC interrupt from the FAX unit due to the reception of facsimile interrupt from the operation unit due to the key operation of the operation unit and interrupt from the USB controller due to attachment and detachment of the USB device and communication. If the interrupt controller receives the above interrupt the interrupt controller requests a below mentioned power supply unit to start the CPU . The CPU supplied with power from the power supply unit performs processing for returning the state of software to the IDLE state.

The power supply unit of the image forming apparatus converts an AC power supply supplied from the AC power supply into a direct current DC power supply. The detailed configuration of the power supply unit is described below. The power supply unit supplies DC power to the scanner unit the main body controller the printer unit and a solenoid for turning off a mechanical seesaw switch which is turned on off according to the user s operation. The seesaw switch is a toggle switch and can mechanically maintain any one of an on state or off state. The power supply unit supplies power to the solenoid to drive the solenoid . Thereby the seesaw switch is pulled by the solenoid to turn the seesaw switch off. This turns off the image forming apparatus .

A printer controller of the printer unit is a general CPU system such as a CPU a memory and a nonvolatile memory which are not illustrated.

A power supply unit of the finisher apparatus converts an AC power supplied from an AC power supply different from the AC power supply of the image forming apparatus into a DC power. The power supply unit supplies the DC power to a solenoid for turning off a mechanical seesaw switch which is turned on off according to the user s operation and a finisher controller . The seesaw switch is a toggle switch and can mechanically maintain one of the on state or off state. The power supply unit supplies power to the solenoid to drive the solenoid in turning off the finisher apparatus . Thereby the seesaw switch is pulled by the solenoid to turn the seesaw switch off. This turns off the finisher apparatus . The finisher controller is a general CPU system such as a CPU a memory and a nonvolatile memory which are not illustrated. The image forming apparatus communicates with the finisher apparatus via the printer controller and finisher controller .

The image forming apparatus is equipped with the power supply unit for converting the AC power supply of the AC power supply into the DC power supply to supply the DC power to each unit. The power supply unit is connected to the solenoid via a power supply cable . The power supply unit supplies power to the solenoid via the power supply cable to drive the solenoid . The supply of power to the solenoid drives the solenoid turning off the seesaw switch .

The power supply unit supplies power to the scanner unit via a power supply cable . The power supply unit supplies power to the printer unit via a power supply cable . The power supply unit supplies power to the main body controller via a power supply cable .

A line for notifying the interrupt controller of the state of the seesaw switch on or off state is provided between the seesaw switch and the interrupt controller . A signal line through which a power supply remote signal is transmitted from a general purpose input output GPIO included in the CPU is provided between the CPU and the power supply unit . The power supply remote signal is used to perform software control of the output of the power supply unit . Even in a state where the supply of power to the CPU is stopped the power supply unit can be notified of the state of the seesaw switch transmitted from the interrupt controller via the GPIO.

The user can turn off the image forming apparatus by operating the seesaw switch . When the user operates the seesaw switch to turn off the image forming apparatus the interrupt controller notifies the power supply unit of the state of the seesaw switch via the GPIO of the CPU . At this point if the supply of power to the CPU is being stopped the power supply unit supplies power to the CPU . The CPU supplied with power executes end processing first shift processing . When the end processing is completed the power supply remote signal is transmitted to the power supply unit via the signal line . Thereby the power supply unit receiving the power supply remote signal stops supplying power to the main body controller . This turns off the image forming apparatus . The use of an aftermentioned shutdown function can turn off the image forming apparatus without the user operating the seesaw switch . If a factor for executing the shutdown function appears the CPU executes the end processing of the image forming apparatus . If the end processing is completed the CPU transmits the power supply remote signal to the power supply unit via the signal line . The power supply unit receiving the power supply remote signal stops supplying power to the main body controller . Furthermore the power supply unit receiving the power supply remote signal supplies power to the solenoid via the power supply cable . As a result the solenoid is driven to turn off the seesaw switch .

The shutdown function executed by the image forming system of the present exemplary embodiment is described below.

The image forming system executes the auto shutdown function the weekly shutdown function and the remote shutdown function.

The auto shutdown function executes the end processing the first shift processing when the image forming system is not continuously operated for a predetermined period of time shifting factor . When the image forming system ends operation the CPU sets a shutdown shift time of three hours for example to the RTC . The RTC counts the shutdown shift time and then executes the end processing.

The weekly shutdown function executes the end processing the first shift processing when a previously set specified time is reached. The CPU sets the weekly shutdown time to the RTC for example Monday 17 00 Tuesday 17 00 Wednesday 17 00 Thursday 17 00 and Friday 17 00 . When the time counted by the RTC reaches the weekly shutdown time the CPU executes the end processing.

The remote shutdown function executes the end processing the first shift processing when an external apparatus such as the PC performs notification through a management information base MIB of a protocol simple network management protocol SNMP or a united protocol.

When the end processing is completed the power supply unit supplies power to the solenoid via the power supply cable . Thereby the solenoid is driven to pull and turn off the seesaw switch . In the present exemplary embodiment before the image forming apparatus executes the end processing the CPU notifies the finisher controller of the end processing via the printer controller . The end processing which the image forming apparatus notifies to the finisher apparatus is sent to the power supply unit via the finisher controller . The power supply unit which receives the notification supplies power to the solenoid of the finisher apparatus . Thereby the solenoid is driven to pull and turn off the seesaw switch .

The image forming apparatus is connected to the AC power supply and the seesaw switch is connected between the AC power supply and the main body controller . The AC power supply is connected to the power supply unit . The AC power supply is connected to the main body controller the printer unit and the scanner unit via the power supply unit . The power supply unit includes a power supply control unit a first power source supply unit a second power source supply unit a third power source supply unit relays and and a field effect transistor FET . The first power source supply unit provided between the AC power supply and the main body controller converts the AC power supplied by the AC power supply into the DC power and supplies the DC power to the main body controller . An FET is provided between the first power source supply unit and the main body controller . Turning on and off of the FET is controlled by the above power supply control unit . The second power source supply unit and the relay are provided between the AC power supply and the printer unit . The third power source supply unit and the relay are provided between the AC power supply and the scanner unit . The second power source supply unit converts the AC power supplied by the AC power supply into the DC power supply and supplies the DC power to the printer unit . The third power source supply unit converts the AC power supplied by the AC power supply into the DC power supply and supplies the DC power to the scanner unit . The power supply control unit performs various power controls of devices around the power supply unit . Turning on and off of the relays and is controlled by the above power supply control unit . The power supply control unit turns on the relay to supply power to the printer unit only when using the printer unit . Otherwise the power supply control unit turns off the relay to stop the supply of power to the printer unit . The power supply control unit turns on the relay to supply power to the scanner unit only when using the scanner unit . Otherwise the power supply control unit turns off the relay to stop the supply of power to the scanner unit . The power supply control unit causes the first power source supply unit to supply power to the solenoid of the seesaw switch . This causes the solenoid to pull the seesaw switch to turn off the seesaw switch . The power supply control unit controls switches not illustrated of the main body controller to control the power state of the main body controller . Specifically when a certain period of time elapses in the IDLE state the power supply control unit controls the switches not illustrated so that the power state of the main body controller is brought into the state illustrated in .

When the image forming apparatus is in an off state the power of the main body controller the scanner unit and the printer unit is shut off.

When the seesaw switch of the image forming apparatus is turned on by a user s operation the image forming apparatus is started. The start processing of the main body controller is described below. When the state of the seesaw switch is detected by the interrupt controller the interrupt controller notifies the power supply that the seesaw switch is brought into an on state via the GPIO of the CPU . The power supply supplies power to the main body controller . The CPU supplied with power initializes hardware devices. The initialization of the hardware devices refers to register initialization interrupt initialization registration of a device driver in starting a kernel and initialization of the operation unit . Next the CPU initializes software. The initialization of the software refers to call of initialization routine of each library start of a process and a thread start of software service for communication with the printer unit and the scanner unit and rendering of the operation unit . In the process of the start processing the printer and the scanner unit are temporarily supplied with power. When the above initialization is completed the image forming apparatus is brought into the IDLE state.

The main body controller establishes the configuration of the finisher apparatus in the start processing. More specifically the main body controller negotiates with the finisher apparatus via the printer unit temporarily supplied with power in the start processing to establishes the device configuration of the finisher apparatus .

When the start processing is completed the image forming apparatus is brought into the IDLE state. In the IDLE state the supply of power to the printer and the scanner unit is stopped but the main body controller is supplied with power refer to .

When a certain period of time elapses while the image forming apparatus is in the IDLE state the image forming apparatus is brought into the sleep state. When a certain period of time elapses while the image forming apparatus is in the IDLE state the CPU notifies the power supply unit that the image forming apparatus is brought into the sleep state. The notified power supply unit stops supplying power to a part of the main body controller and changes the power state of the main body controller from that of to .

A return processing in which the image forming apparatus returns from the sleep state is described below. When the CPU receives while in the sleep state a print job of the PDL which is a factor for returning from the sleep state via the network the CPU notifies the power supply unit of the reception of the print job. The notified power supply unit supplies power to the main body controller and the printer unit via the power supply cables and respectively. The printer unit supplied with power executes the print job received via the network.

A case is considered where a copy job is generated by the user s operation of the operation unit during the execution of the print job. When the copy job is generated the CPU notifies the power supply unit that the copy job is generated. The notified power supply unit supplies power to the main body controller the printer unit and the scanner unit via the power supply cables and respectively. The scanner unit supplied with power reads the set document and generates image data and the printer unit prints an image on paper based on the image data.

When a certain period of time elapses after the execution of the copy job the image forming apparatus is brought into the sleep state. When the image forming apparatus is brought into the sleep state the CPU notifies the power supply unit that the image forming apparatus is brought into the sleep state. The notified power supply unit stops supplying power to a part of the main body controller and changes the power state of the main body controller from that of to FIG. .

When a predetermined period of time elapses while the image forming apparatus is in the sleep state the image forming apparatus shifts from the sleep state to the off state. At this stage the image forming apparatus executes the end processing. The end processing is described below.

When the end process is executed the image forming apparatus is brought into the off state. In the off state the power supply unit stops supplying power to the printer unit the scanner unit and the main body controller .

In the sleep state before the end process is performed as illustrated in the supply of power to the printer unit is being stopped so that the image forming apparatus cannot notify the finisher apparatus of the execution of the end processing. Therefore in the image forming apparatus according to the present exemplary embodiment the printer unit is temporarily supplied with power so that the image forming apparatus can notify the finisher apparatus of the execution of the end processing. The following describes the end process in detail.

The flow chart illustrated in is executed by the CPU not only in the case where the shutdown function is executed but also in the case where the seesaw switch is turned off by the user s operation. If a predetermined period of time elapses while the sleep state is kept unchanged the following processing is executed. However in the sleep state the supply of power to the CPU is being stopped. For this reason in the present exemplary embodiment power is supplied from the first power source supply unit to the CPU before the following processing is executed. The CPU supplied with power executes the following processing.

In step S the operation unit is controlled so that the CPU causes the screen of the operation unit to display information indicating that the end processing of the image forming system. has been executed. The display is not requisite in the case of the end processing executed by the weekly shutdown function or by the auto shutdown function differently from the end processing executed by the operation of the seesaw switch or by the remote shutdown function. This is because the image forming system executes the end processing from the sleep state in which the screen of the operation unit is not displayed.

In step S the CPU confirms whether power is supplied to pathway devices from the CPU to the finisher apparatus . If the CPU determines that the power supplies of the pathway devices are in the off state YES in step S in step S the CPU instructs the power supply unit to turn on the power supplies of the pathway devices via the signal line . The pathway devices are chips of the printer unit the printer controller the sub board the device controller the image processor the CPU and the bus controller and the bus controller of the main board .

In the present exemplary embodiment the supply of power to the print unit is stopped when the print function is not used. If the print function is not used the CPU instructs the power supply unit to supply power to the print unit via the signal line . To flexibly control the power of the sub board if the supply of power to the printer unit and the sub board as the pathway devices is stopped the CPU instructs the power supply unit to supply power to the printer unit and the sub board via the signal line . If the supply of power to the bus controller is stopped along with the stop of power supply to the sub board the CPU instructs the power supply unit to supply power to the printer unit the sub board and the bus controller via the signal line .

The pathway devices is different for each apparatus. In other words devices different from the above pathway devices can be pathway devices. In the present exemplary embodiment as examples of the pathway devices between the CPU and the finisher apparatus the printer unit the sub board the device controller the image processor the CPU and the bus controller and the bus controller are provided. However the pathway devices of the present invention are not limited to the above pathway devices. If a different finisher apparatus is connected between the finisher apparatus and the image forming apparatus the different finisher apparatus can be a pathway device.

In step S the pathway devices are supplied with power. In step S the CPU notifies the finisher controller of the finisher apparatus of the end processing via the pathway devices supplied with power. More specifically the CPU notifies the finisher controller of the end processing via the bus controller of the main board the bus controller of the sub board the CPU of the sub board the image processing processor the device controller and the printer controller of the printer unit . The finisher controller can perform the end processing of the finisher apparatus according to the reception of the end processing.

In step S the CPU determines whether a response to the notification of the end processing has been received from the finisher apparatus . If the CPU determines that the response has been received YES in step S in step S the CPU instructs the power supply unit to stop supplying power to the pathway devices via the signal line . The instructed power supply unit stops supplying power to the pathway devices. In step S the CPU confirms whether the end processing of the pathway devices is completed. The CPU does not always need to stop supplying power to the pathway devices in step S and confirm whether the end processing of the pathway devices is completed in step S before the end processing of the image forming apparatus is performed in step S described below . The CPU may stop supplying power to the pathway devices in step S and confirm whether the end processing of the pathway devices is completed in step S at the same timing that the end processing of the image forming apparatus is performed in step S described below or that the seesaw switch is turned off in step S described below .

In step S the image forming apparatus executes the end processing. The image forming apparatus performs several end processing steps. Specifically the CPU performs the end processing of the process for controlling the image forming apparatus and software applications. The CPU performs processing for syncing a storage buffer cached on the memory with a storage such as the hard disk or the flash disk . Furthermore the CPU performs processing for shutting down the OS. The CPU executing the end processing instructs the power supply unit to supply power to the solenoid of the seesaw switch . Thereby in step S the power supply unit supplies power to the solenoid to turn off the seesaw switch . Finally the power supply control unit turns off the FET to stop supplying power to the main body controller turning off the image forming apparatus .

In the present exemplary embodiment the end processing is executed by the auto shutdown function the weekly shutdown function and the remote shutdown function to turn off the seesaw switch . As a result the image forming apparatus is brought into the off state the power saving state . In the present exemplary embodiment however the power saving state of the present invention may be a suspension state or a hibernation state as well as the above off state. The suspension state refers to the one that power is supplied to the GPIO complex programmable logic device CPLD managed by the CPU and a part of memory even if the seesaw switch is in the off state and is one of methods for increasing the speed of the next start. The GPIO CPLD is used as a flag for discriminating a specific off state at the next start. The hibernation state refers to the state where the seesaw switch is in the off state and which can be returned to the state assumed just before the power of the image forming system is shut off. The state before the power of the image forming system is shut off is stored in the hard disk . The image forming system. is brought into the state immediately before the power supply is shut off based on the state stored in the hard disk when the seesaw switch is brought into the on state.

In step S the finisher controller determines whether an end notification a shift notification has been received from the main body controller of the image forming apparatus . The end notification is sent from the CPU of the image forming apparatus to the finisher controller of the finisher apparatus in step S described above. If the finisher controller determines that the end notification has been received from the main body controller YES in step S in step S the finisher controller instructs the power supply unit to supply power to the solenoid of the seesaw switch . Thereby in step S the solenoid is driven to turn off the seesaw switch . In step S the finisher controller determines whether an interrupt has been received from the seesaw switch . The interrupt is issued when the seesaw switch is brought into the off state. If the finisher controller receives the interrupt YES in step S in step S the finisher controller transmits a response to the end processing to the main board via the printer controller and the sub board .

As illustrated in even if the seesaw switch is brought into the off state the finisher apparatus according to the present exemplary embodiment does not instantly stop supplying power to the finisher controller . This is because power is supplied from the power supply unit thereto even if the seesaw switch is brought into the off state. Therefore the finisher controller can send back a response to the end notification to the image forming apparatus . On the other hand when the seesaw switch of the finisher apparatus is brought into the off state the supply of power to each unit in the finisher apparatus is sometimes stopped. In this case the supply of power to the finisher controller is also stopped so that the finisher controller cannot send back a response to the end notification to the image forming apparatus . Accordingly in the system in which the supply of power to each unit in the finisher apparatus is stopped the finisher controller may send back a response to the end notification to the CPU in a period immediately after the end notification is received until the seesaw switch is brought into the off state.

In the present exemplary embodiment when the end processing of the image forming system is performed power is supplied to the pathway devices between the CPU of the image forming apparatus and the finisher apparatus to allow the CPU to notify the finisher apparatus of the end processing. Thereby the finisher apparatus can execute the end processing.

In the present exemplary embodiment as an example the mechanical seesaw switch is used that maintains the on and off states according to the user s operation however a switch according to the present invention is not limited to the mechanical seesaw switch . For example a tact switch which does not maintain the on and off states may be used instead of the seesaw switch . If the tact switch is used the image forming apparatus operates in the following patterns. However the following patterns are only an example.

1. In the state where the power supply of the image forming apparatus is turned on the tact switch is pressed to bring the image forming apparatus into the off state or the sleep state.

2. In the state where the power supply of the image forming apparatus is not turned on the tact switch is pressed to bring the image forming apparatus into the on state.

3. In the state where the power supply of the image forming apparatus is turned on the tact switch is pressed to forcibly bring the image forming apparatus into the off state.

In the present exemplary embodiment the control of power supply is described as power control of the printer unit and the scanner unit however the present invention is not limited to the above exemplary embodiment. Instead clock supply to the printer unit and the scanner unit may be controlled.

The example in which the flow chart in is executed by one CPU is described above but the flow chart may be distributed among a plurality of CPUs and executed.

If a plurality of the finisher apparatuses is connected the printer unit sends the end notification to a single finisher apparatus adjacent to the image forming apparatus . The printer unit receives response to the end notification from all of the finisher apparatuses connected to the image forming apparatus and then transmits a response to the end processing to the main board .

If a response to the end notification cannot be received from the finisher apparatus the main board waits for the response from the printer unit until a predetermined period of time elapses. The predetermined period of time is 50 seconds for example. If there is no response from the finisher apparatus for 50 seconds after the end notification is transmitted the CPU starts the end processing. If the software of the image forming apparatus of the present invention hangs up the power supply shutdown processing is executed after a predetermined period of time elapses.

Embodiments of the present invention can also be realized by a computer of a system or apparatus that reads out and executes computer executable instructions recorded on a storage medium e.g. non transitory computer readable storage medium to perform the functions of one or more of the above described embodiment s of the present invention and by a method performed by the computer of the system or apparatus by for example reading out and executing the computer executable instructions from the storage medium to perform the functions of one or more of the above described embodiment s . The computer may comprise one or more of a central processing unit CPU micro processing unit MPU or other circuitry and may include a network of separate computers or separate computer processors. The computer executable instructions may be provided to the computer for example from a network or the storage medium. The storage medium may include for example one or more of a hard disk a random access memory RAM a read only memory ROM a storage of distributed computing systems an optical disk such as a compact disc CD digital versatile disc DVD or Blu ray Disc BD a flash memory device a memory card and the like.

While the present invention has been described with reference to exemplary embodiments it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all modifications equivalent structures and functions.

This application claims priority from Japanese Patent Application No. 2012 143140 filed Jun. 26 2012 which is hereby incorporated by reference herein in its entirety.

