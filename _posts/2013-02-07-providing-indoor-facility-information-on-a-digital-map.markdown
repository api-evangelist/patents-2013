---

title: Providing indoor facility information on a digital map
abstract: A digital map of a geographic area, along with a representation of a building located in the geographic area, is displayed at a selected zoom level via a user interface of a computing device. Availability of indoor facilities at the building is determined. When the selected zoom level has a first value, the one or more indicators of indoor facilities available at the building are displayed inside the representation of the building at respective locations of these indoor facilities. However, when the selected zoom level has a second value, the one or more indicators of indoor facilities available at the building are displayed over or proximately to the representation of the building at a location unrelated to the respective locations of the indoor facilities.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09134886&OS=09134886&RS=09134886
owner: GOOGLE INC.
number: 09134886
owner_city: Mountain View
owner_country: US
publication_date: 20130207
---
The present disclosure relates to digital maps and more particularly to providing indoor facility information for representations of structures displayed as part of digital maps on a computing device.

The background description provided herein is for the purpose of generally presenting the context of the disclosure. Work of the presently named inventors to the extent it is described in this background section as well as aspects of the description that may not otherwise qualify as prior art at the time of filing are neither expressly nor impliedly admitted as prior art against the present disclosure.

Today a wide variety of computing devices including many portable devices support software applications that display digital maps mapping applications . For example mapping applications may run on laptop and tablet computers mobile phones car navigation systems hand held global positioning system GPS units etc.

In general a mapping application can display various types of geographic data including topographical data street data urban transit information and traffic data. Further the geographic data may be schematic or based on photography such as satellite imagery. Still further a mapping application can display the information in a two dimensional 2D or three dimensional 3D format.

A user sometimes may operate a mapping application to view a map of an urban area which may include structures such as buildings parks train stations etc. For such structures various indoor facility information such as public restrooms elevators lockers etc. may be available. However when viewing the map at a zoom level in which the internal layout of the structures is not visible it is difficult for the mapping application to display the indoor facility information without creating confusion and clutter.

In one implementation a method for providing indoor facility information on a digital map is implemented in computing device. The method includes displaying a digital map of a geographic area via a user interface of the computing device at a selected zoom level including displaying a representation of a structure located in the geographic area. The method further includes determining availability of indoor facilities at the structure and displaying one or more indicators of indoor facilities available at the structure. In particular displaying the one or more indicators of indoor facilities includes i when the selected zoom level has a first value displaying the one or more indicators inside the representation of the structure at respective locations of the indoor facilities and ii when the selected zoom level has a second value displaying the one or more indicators over or proximately to the representation of the structure at a location unrelated to the respective locations of the indoor facilities.

In another implementation a tangible computer readable medium stores instructions. When executed on one or more processors of a computing device the instructions cause the one or more processors to i display a digital map of a geographic area via a user interface of the computing device at a selected zoom level where the digital map includes a representation of a structure ii receive indoor facility information for several indoor facilities available at the structure where the indoor facility data specifies for each of the indoor facilities i an indoor facility type and ii a location of the indoor facility within the structure and iii display respective indicators for the several indoor facilities. To display the indicators the instructions cause the one or more processors to i display the indicators inside the representation of the structure at respective locations of the indoor facilities when the selected zoom level has a high value and ii display all the indicators at a common point on the digital map at or near the representation of the structure when the selected zoom level has a low value.

In yet another implementation a computing device includes one or more processors a user interface configured to receive user input and display output and a computer readable medium storing instructions. When executed on the one or more processors the instructions cause the computing device to receive via the user interface a request to display a digital map of a geographic area at a specified zoom level display the digital map via the user interface at the specified zoom level where the digital map includes a representation of a structure located in the geographic area and when the specified zoom level is high display respective indicators for several indoor facilities available at the structure at corresponding locations within the representation of the structure. However when the selected zoom level is low the instructions cause the computing device display all the indicators at a common point on the digital map at or near the representation of the structure.

A mapping software module operating on a computing device displays a digital map of a geographic region in which a structure e.g. a building a park a train station etc. is located. If indoor facility information such as presence and location of public restrooms elevators lockers etc. is available for the structure the mapping software module displays the indoor facility information on the digital map in a manner dependent on the zoom level.

In one example implementation the mapping software module displays a 2D schematic map that includes a structure and available indoor facility information for the structure. A user selects the desired zoom level to view the map where higher zoom levels correspond to greater magnification. If the user selects a low zoom level at which the internal layout of the structure is not visible the mapping software module displays the indoor facility information next to the footprint of the structure. The mapping software module can provide the indoor facility information as one or several icons a text label a pop up informational window etc. Further when information about one or more entrances to the structure is available the mapping software module can display the indoor facility information next to an entrance to provide additional guidance to the user. The mapping software module can display the indoor facility information in the same manner at multiple low zoom levels. However if the user zooms in on the structure and selects a map view that shows the internal layout of the structure the mapping software module can place the indoor facility information at the respective indoor locations within the structure and optionally remove the indoor facility information displayed next the footprint of the structure.

These techniques are discussed in more detail below with reference to . In particular embodiments of an example system in which a mapping software module may present indoor facility information for structures are described with reference to example screenshots of the mapping software module are discussed with reference to and example methods which the mapping software module and or a map server may implement to provide indoor facility information for structures are discussed with reference to respectively.

Referring first to a system includes a computing device coupled to a map server and an indoor facility server via a communication network . The computing device can be for example a laptop computer a tablet computer a smartphone a navigation device mounted in a vehicle etc. The network in general can include wired and or wireless communication links and may include for example a wide area network WAN such as the Internet a local area network LAN a cellular telephone network or any other suitable type of a network.

In the embodiment shown in the computing device includes a processor a computer readable memory and an input output I O interface . In various implementations the I O interface can include a touchpad over which the user moves his fingers while looking at a separately provided screen a touchscreen where the user places his fingers directly over the image being manipulated or over a displayed control being activated e.g. a displayed keyboard a keyboard a mouse etc. The processor may include a central processing unit CPU for example. More generally the computing device can include one or more processors and if desired one or more graphics processing units GPUs as well as other processing units. The memory is a computer readable non transitory storage device that may include both persistent e.g. a hard disk a flash drive and non persistent e.g. RAM memory components. The memory stores instructions executable on the processor that make up a mapping software module including an indoor facility module . The memory also stores map data and indoor facility data on which the mapping module operates. In various implementations the computing device can include additional components such as one or more wired and or wireless network interfaces peripheral devices such as a mouse etc.

In operation the mapping module generates requests for map data in accordance with how the user positions the viewport using pan zoom and other controls. A request for map data can specify for example the geographic area for which the computing device will display a digital map the zoom level the desired layers of additional information of e.g. traffic weather satellite imagery etc. . The computing device transmits the requests to the map server . In response the map server retrieves map data from a map database and provides the map data to the computing device via the network in the form of one or a series of messages . The computing device then stores the received map data in the memory as the map data .

In some implementations the map server also communicates with the indoor facility server to retrieve corresponding indoor facility data from an indoor facility database . The map server then provides enhanced map data to the computing device which can be made up of the map data the indoor facility data and appropriate indications of how the map data and the indoor facility data are to be displayed for the specified geographic area and zoom level. Once the mapping module receives the map data and the indoor facility data for the specified geographic area the indoor facility module can determine how the map data and the indoor facility data are to be displayed for the currently selected zoom level. The mapping module then renders digital map for the specified geographic area and zoom level and causes the digital map to be displayed via the I O interface . In other implementations the indoor facility module or another component operating in the client computing device requests and receives indoor facility data directly from the indoor facility server .

The mapping software module according to various implementations operates as a separately executable software application a plugin that extends the functionality of another software application such as a web browser an application programming interface API that may be invoked by a software application etc. The instructions that make up the mapping module may be compiled and executable on the processor directly or not compiled and interpreted by the processor at runtime.

Depending on the implementation the map data may be in a raster format such as Portable Network Graphics PNG a vector graphics format based on mathematical descriptions of geometric shapes or any other suitable format. The map data in some cases is divided into map tiles or portions of a digital map having a certain fixed size such as 256 by 256 pixels. The mapping software module renders or assembles a digital map based on the map data and causes the digital map to be displayed via the I O interface . When the map data is already rasterized the mapping module generates the digital map by selecting and combining the proper rasterized tiles. However if the map data is in a vector graphics format the mapping module first interprets the descriptions of various shapes and applies specified textures to the shapes to generate the corresponding raster images. The mapping software module also adjusts the displayed digital map and requests new map data when necessary in response to user input received via the I O interface . More specifically the user may change the zoom level pan across the map and otherwise interact with the map.

When provided in a vector graphics format map data may specify individual map elements representing such physical entities as structures e.g. buildings parks train stations etc. roads bodies of water and other natural and artificial objects visible outside e.g. from above or at a street level . Map data also can include text based label data as well as metadata that includes additional information about the physical entity. In a raster format map elements typically are embedded into the same image of a digital map. Map data may also include text based label data for displaying various labels such as street names or names of landmarks. In general map data may be used to generate 2D images or 3D images and may include schematic data photographic images or both.

The indoor facility data may specify indoor facility information for map elements such as buildings or other structures. For example indoor facility information for a building may include the number and locations of public restrooms elevators escalators wheelchair ramps drinking fountains lockers etc. For multi level structures such as multi story buildings indoor facility data may specify indoor facility information on a per floor basis. Similar to map data indoor facility data may include both graphics content and non graphics e.g. text content and the graphics content in turn may include schematic illustrations photographic images interactive and non interactive icons etc. In the implementation illustrated in the indoor facility data is in the form of a data record that includes an indoor facility type field an indoor facility image field a number field and a location field .

As one example the indoor facility type field of a certain data record may specify that the type of the indoor facility is elevator bank the indoor facility image field may include or reference an elevator icon the number field may specify the total number of elevators in the elevator bank and the location field may specify the local or global coordinates or other indication of position of the elevator bank within the building.

In other implementations the data records of the indoor facility data can include fewer fields or conversely may include additional fields. For example the indoor facility module in one implementation stores icons for each indoor facility type and the indoor facility data need not include the field . Further some of the data records may not have information in each of the fields . For example a data record in the indoor facility data may specify the location of an elevator bank but not the number of elevators in the elevator bank.

The mapping software module displays indoor facility information for a structure on a digital map according to a user selected zoom level. As indicated above the indoor facility information can include icons text labels etc. If a user selects a relatively low zoom level at which the internal layout of the structure is not visible the indoor facility information for a structure is grouped together and displayed next to the footprint or outline of the structure. When information about one or more entrances to the structure is available the mapping software module may group and display the indoor facility information next to an entrance e.g. the primary entrance to the structure . Alternatively the mapping software module may identify a relatively empty portion of the map adjacent or proximate to the representation of the structure e.g. a wide street running past the structure and display the indoor facility information in the identified portion of the map. In this manner the mapping software module can reduce occlusion of map information by indoor facility icons labels etc. As yet another alternative the mapping software module can display may display indoor facility information next to the text label generated of the structure such as community center. For example a set of icons can be displayed immediately after or directly below the text label.

If the user selects a high zoom level at which the internal layout of the structure is visible the indoor facility information is placed separately and displayed at the respective indoor locations within the structure.

In some implementations the mapping software module displays indoor facility information at a low zoom level only after the user hovers over the representation of the structure e.g. by placing the mouse cursor over the representation of the structure for a certain amount of time or lightly touching the representation of the structure on a touchscreen . As one example the mapping software module can display the indoor facility information at low zoom levels in the form of a tooltip style popup window. Placement of indoor facility information in the form of icons is discussed further with reference to .

With continued reference to the map server may include a processor and a memory that stores a map request processor made up of instructions executable on the processor . Similarly the indoor facility server may include a processor and a memory storing instructions executable on the processor .

For simplicity illustrates both the map server and the indoor facility server as only one instances of a server device. However according to some implementations the map server and or the indoor facility server may include a group of one or more server devices each equipped with one or more processors and capable of operating independently of the other server devices. For example map server devices operating in such a group can process requests from the computing device individually e.g. based on availability in a distributed manner where one operation associated with processing a request is performed on one map server device while another operation associated with processing the same request is performed on another map server device or according to any other suitable technique. Further the map server and the indoor facility server may be owned by a single business entity and located in a single geographic location e.g. a server farm . Alternatively the map server and or the indoor facility server may be owned by different business entities and located across a number of geographic locations. For the purposes of this discussion the term map server may refer to an individual map server device or to a group of two or more map server devices. Similarly the term indoor facility server may refer to an individual indoor facility server device or to a group of two or more indoor facility server devices.

Referring to the mapping module can generate screenshots and according to an example scenario. The screenshot illustrates a representation of a train station overlaying a digital map of a geographic area . Various icons representing the indoor facility information for the train station are displayed within a same viewport. However when a user zooms in on the train station an internal layout of the train station becomes visible as illustrated in an example screenshot in .

In the digital map shows a footprint of the train station which provides a general indication of the shape of the train station. The mapping module displays the indoor facility information available for the train station as icons such as an elevator icon representing elevators a restroom icon representing public restrooms a wheelchair icon representing wheelchair ramps and a key and baggage icon representing lockers. The screenshot corresponds to a scenario in which a user selected a low zoom level range and the mapping module in response presented the icons as a group next to the train station . By grouping icons together the mapping module reduces clutter on the screen.

Further when information about one or more entrances to a structure is available the mapping module presents the available indoor facility information next to an entrance in order to provide additional guidance to the user. In the example of the mapping module generates the map that illustrates an entrance to the train station with the icons being grouped and displayed next to the entrance . The map also illustrates other map elements such as roads railroad tracks parks and footprints of buildings and . Various icons and text labels can be linked to these map elements such as a train icon indicating the train station and a traffic light icon indicating traffic lights on the roads for example. Although the map is a 2D map on which most map elements are illustrated with a one point projection the train station in general can overlay other suitable types of map such as a 3D map for example.

In the example of the footprints and are illustrated with a low level of detail that do not include the shape of every external wall or ornamental features of the buildings. In another implementation however these footprints may be illustrated with a two point perspective or as 3D shapes displayed according to an isometric projection. More generally and as discussed above structures on a map may be illustrated using any suitable 2D or 3D shapes rendered with any desired level of detail.

Once the user decides to zoom in on the train station the mapping module generates an internal layout map for the train station as part of a larger digital map as illustrated in . More particularly the screenshot corresponds to a scenario in which the user selected a high zoom level range and the mapping module in response presented the icons at the respective indoor locations within the train station . In some implementations in addition to the types and locations of available indoor facilities as represented by the icons the mapping module also depicts the numbers for the corresponding facilities. Further the mapping module can include in the internal layout map hallways rooms or offices etc. although in general the internal layout map can depict any available internal layout features.

To further illustrate the techniques for providing indoor facility information for structures example methods which a mapping software module on a computing device operating on a client side and a map server operating on a server side may implement are discussed next with reference to respectively. In an example implementation the method of is implemented in mapping module executing on the computing device and the method of is implemented in the map request processor executing on the map server . More generally however these methods can be implemented in any suitable software application or module e.g. a browser plugin . Each of these methods can be implemented as sets of instructions stored on a computer readable medium and executable on one or more processors.

The flow diagram of illustrates an example method for providing indoor facility information for structures on a map of a geographic area and zoom level on the client side. At block map data for a specified geographic area is received. The map data may be received on the client side e.g. a client computing device in response to sending a request to a map server for map data for example. The received map data may include map elements such as buildings for which indoor facility information is available. At block indoor facility data corresponding to the received map data is received. Depending on the implementation the indoor facility can be received automatically i.e. without a specific request along with the map data or in response to a request transmitted to an indoor facility server. The indoor facility data specifies available indoor facility information for the structures.

Next at block the zoom level at which the map data is to be rendered is determined. In general the zoom level is set according to a user command. As discussed above the zoom level may be in a low zoom level range in which the internal layout of the structures is not visible or the zoom level may be in a high zoom level range in which the internal layout of the structures is visible. At block the method determines whether the high zoom level range is selected. If the high zoom level range is selected the method proceeds to block where a digital map is rendered to display the indoor facility information for the structures at the respective indoor locations within the structures. If the high zoom level range is not selected the method proceeds to block .

At block a map is rendered on the client side to display the indoor facility information for the structures next to the footprint of the structures. In one implementation the indoor facility information is grouped together to provide clarity and reduce clutter on the display screen. Additionally if information about one or more entrances to a structure is available the indoor facility information is grouped together and displayed at a location corresponding to or at least related to an entrance to the structure. It is noted that in this case the location at which the indoor facility information is displayed is unrelated to the locations of the corresponding indoor facilities.

The flow diagram of illustrates an example method for providing indoor facility information for structures on a map of a geographic area and zoom level. At block a request is received to generate enhanced map data for a specified geographic area and a specified zoom level i.e. map data augmented by indoor facility information or data. The map data for the specified geographic area along with the corresponding indoor facility information are retrieved at block . The map data may include map elements such as structures and the corresponding indoor facility data may specify available indoor facility information for the structures.

At block it is determined whether the specified zoom level falls within the high zoom level range. If so the method proceeds to block where the indoor facility information in the form of icons labels images etc. is placed at the respective indoor locations within the structures. Otherwise the flow proceeds to block where the indoor facility information for the structures is grouped together and placed next to the footprint of the structures. Depending on the implementation the enhanced map data is generated as raster i.e. pixel based images or vector data. Additionally if information about one or more entrances to the structures is available the indoor facility information is grouped together and displayed at a location related to an entrance of the structures. Next at block the enhanced map data is generated to be transmitted to a client such as the computing device for example.

The following additional considerations apply to the foregoing discussion. Throughout this specification plural instances may implement components operations or structures described as a single instance. Although individual operations of one or more methods are illustrated and described as separate operations one or more of the individual operations may be performed concurrently and nothing requires that the operations be performed in the order illustrated. Structures and functionality presented as separate components in example configurations may be implemented as a combined structure or component. Similarly structures and functionality presented as a single component may be implemented as separate components. These and other variations modifications additions and improvements fall within the scope of the subject matter of the present disclosure.

Additionally certain embodiments are described herein as including logic or a number of components or modules. Modules may constitute either software modules e.g. code stored on a machine readable medium or hardware modules. A hardware module is tangible unit capable of performing certain operations and may be configured or arranged in a certain manner. In example embodiments one or more computer systems e.g. a standalone client or server computer system or one or more hardware modules of a computer system e.g. a processor or a group of processors may be configured by software e.g. an application or application portion as a hardware module that operates to perform certain operations as described herein.

A hardware module may comprise dedicated circuitry or logic that is permanently configured e.g. as a special purpose processor such as a field programmable gate array FPGA or an application specific integrated circuit ASIC to perform certain operations. A hardware module may also comprise programmable logic or circuitry e.g. as encompassed within a general purpose processor or other programmable processor that is temporarily configured by software to perform certain operations. It will be appreciated that the decision to implement a hardware module mechanically in dedicated and permanently configured circuitry or in temporarily configured circuitry e.g. configured by software may be driven by cost and time considerations.

Accordingly the term hardware should be understood to encompass a tangible entity be that an entity that is physically constructed permanently configured e.g. hardwired or temporarily configured e.g. programmed to operate in a certain manner or to perform certain operations described herein. Considering embodiments in which hardware modules are temporarily configured e.g. programmed each of the hardware modules need not be configured or instantiated at any one instance in time. For example where the hardware modules comprise a general purpose processor configured using software the general purpose processor may be configured as respective different hardware modules at different times. Software may accordingly configure a processor for example to constitute a particular hardware module at one instance of time and to constitute a different hardware module at a different instance of time.

Hardware and software modules can provide information to and receive information from other hardware and or software modules. Accordingly the described hardware modules may be regarded as being communicatively coupled. Where multiple of such hardware or software modules exist contemporaneously communications may be achieved through signal transmission e.g. over appropriate circuits and buses that connect the hardware or software modules. In embodiments in which multiple hardware modules or software are configured or instantiated at different times communications between such hardware or software modules may be achieved for example through the storage and retrieval of information in memory structures to which the multiple hardware or software modules have access. For example one hardware or software module may perform an operation and store the output of that operation in a memory device to which it is communicatively coupled. A further hardware or software module may then at a later time access the memory device to retrieve and process the stored output. Hardware and software modules may also initiate communications with input or output devices and can operate on a resource e.g. a collection of information .

The various operations of example methods described herein may be performed at least partially by one or more processors that are temporarily configured e.g. by software or permanently configured to perform the relevant operations. Whether temporarily or permanently configured such processors may constitute processor implemented modules that operate to perform one or more operations or functions. The modules referred to herein may in some example embodiments comprise processor implemented modules.

Similarly the methods or routines described herein may be at least partially processor implemented. For example at least some of the operations of a method may be performed by one or processors or processor implemented hardware modules. The performance of certain of the operations may be distributed among the one or more processors not only residing within a single machine but deployed across a number of machines. In some example embodiments the processor or processors may be located in a single location e.g. within a home environment an office environment or a server farm while in other embodiments the processors may be distributed across a number of locations.

The one or more processors may also operate to support performance of the relevant operations in a cloud computing environment or as an SaaS. For example at least some of the operations may be performed by a group of computers as examples of machines including processors these operations being accessible via a network e.g. the Internet and via one or more appropriate interfaces e.g. application program interfaces APIs .

The performance of certain of the operations may be distributed among the one or more processors not only residing within a single machine but deployed across a number of machines. In some example embodiments the one or more processors or processor implemented modules may be located in a single geographic location e.g. within a home environment an office environment or a server farm . In other example embodiments the one or more processors or processor implemented modules may be distributed across a number of geographic locations.

Some portions of this specification are presented in terms of algorithms or symbolic representations of operations on data stored as bits or binary digital signals within a machine memory e.g. a computer memory . These algorithms or symbolic representations are examples of techniques used by those of ordinary skill in the data processing arts to convey the substance of their work to others skilled in the art. As used herein an algorithm or a routine is a self consistent sequence of operations or similar processing leading to a desired result. In this context algorithms routines and operations involve physical manipulation of physical quantities. Typically but not necessarily such quantities may take the form of electrical magnetic or optical signals capable of being stored accessed transferred combined compared or otherwise manipulated by a machine. It is convenient at times principally for reasons of common usage to refer to such signals using words such as data content bits values elements symbols characters terms numbers numerals or the like. These words however are merely convenient labels and are to be associated with appropriate physical quantities.

Unless specifically stated otherwise discussions herein using words such as processing computing calculating determining presenting displaying or the like may refer to actions or processes of a machine e.g. a computer that manipulates or transforms data represented as physical e.g. electronic magnetic or optical quantities within one or more memories e.g. volatile memory non volatile memory or a combination thereof registers or other machine components that receive store transmit or display information.

As used herein any reference to one embodiment or an embodiment means that a particular element feature structure or characteristic described in connection with the embodiment is included in at least one embodiment. The appearances of the phrase in one embodiment in various places in the specification are not necessarily all referring to the same embodiment.

Some embodiments may be described using the expression coupled and connected along with their derivatives. For example some embodiments may be described using the term coupled to indicate that two or more elements are in direct physical or electrical contact. The term coupled however may also mean that two or more elements are not in direct contact with each other but yet still co operate or interact with each other. The embodiments are not limited in this context.

As used herein the terms comprises comprising includes including has having or any other variation thereof are intended to cover a non exclusive inclusion. For example a process method article or apparatus that comprises a list of elements is not necessarily limited to only those elements but may include other elements not expressly listed or inherent to such process method article or apparatus. Further unless expressly stated to the contrary or refers to an inclusive or and not to an exclusive or. For example a condition A or B is satisfied by any one of the following A is true or present and B is false or not present A is false or not present and B is true or present and both A and B are true or present .

In addition use of the a or an are employed to describe elements and components of the embodiments herein. This is done merely for convenience and to give a general sense of the description. This description should be read to include one or at least one and the singular also includes the plural unless it is obvious that it is meant otherwise.

Upon reading this disclosure those of skill in the art will appreciate still additional alternative structural and functional designs for providing indoor facility information for structures on a digital map through the disclosed principles herein. Thus while particular embodiments and applications have been illustrated and described it is to be understood that the disclosed embodiments are not limited to the precise construction and components disclosed herein. Various modifications changes and variations which will be apparent to those skilled in the art may be made in the arrangement operation and details of the method and apparatus disclosed herein without departing from the spirit and scope defined in the appended claims.

