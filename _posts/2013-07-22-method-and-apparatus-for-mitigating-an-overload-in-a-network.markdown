---

title: Method and apparatus for mitigating an overload in a network
abstract: A method and apparatus for managing an overload condition in a network are disclosed. For example, the method monitors the network for a traffic overload condition, and determines whether a more severe traffic overload condition or a less severe traffic overload condition is detected by using a network monitor and controller. The method then selects using a network monitor and controller agent in response to a command from the network monitor and controller, a different bandwidth preservation scheme if the more severe traffic overload condition or the less severe traffic overload condition is detected, wherein the different bandwidth preservation scheme is based on a selection of a codec type and is applied to a portion of the traffic.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09276858&OS=09276858&RS=09276858
owner: AT&T Intellectual Property I, L.P.
number: 09276858
owner_city: Atlanta
owner_country: US
publication_date: 20130722
---
This application is a continuation of U.S. patent application Ser. No. 12 772 939 filed May 3 2010 now U.S. Pat. No. 8 495 205 and is herein incorporated by reference in its entirety.

The present disclosure relates generally to communication networks and more particularly to a method and apparatus for mitigating an overload in a packet network e.g. an Internet Protocol IP network.

A large scale service provider network e.g. a Next Generation Network NGN typically consists of multiple regional access offices and server offices connected to a backbone network e.g. via uplinks between pairs of provider edge PE and customer edge CE routers. NGN access offices can be deployed with session border controllers S BC to provide secured access by user endpoint devices UEs from public accesses and PSTN media gateways MGW for connectivity with Time Division Multiplexing TDM based telephony networks. Server offices can be deployed with call servers such as Call Session Control Functions CSCF Home Subscriber System HSS various application servers media gateway control functions MGCF etc.

Public networks provide connectivity from UE to the public interfaces of S BC. An NGN operator s internal backbone network provides inter connectivity for communications of all other network elements. Some part of these networks may have more limited transport resources than others. For example the link bandwidth between PE and CE routers for access offices are crucial network resources for providing the NGN services to its subscribers.

NGN operators may size the link capacity based on the forecast subscriber number bandwidth per call various historical call volume parameters and so on. However some situations may cause dramatic increase of call volumes. For example events such as natural disasters e.g. earthquakes can trigger massive calling events. Since it is not possible to deploy additional transport resources on the fly the existing network resources can be overloaded thereby compromising the service capability of the NGN network.

In addition to the massive calling events a NGN is often designed with geographical redundancy. Subscribers who are normally homed at one access office or data center can be re homed to another access office or data center if their home office is out of service. This event will also cause a dramatic increase of workload and traffic in the protection site.

In one embodiment the present disclosure describes a method and apparatus for managing an overload condition in a network. For example the method monitors the network for a traffic overload condition and determines whether a more severe traffic overload condition or a less severe traffic overload condition is detected by using a network monitor and controller. The method then selects using a network monitor and controller agent in response to a command from the network monitor and controller a different bandwidth preservation scheme if the more severe traffic overload condition or the less severe traffic overload condition is detected wherein the different bandwidth preservation scheme is based on a selection of a codec type and is applied to a portion of the traffic.

To facilitate understanding identical reference numerals have been used where possible to designate identical elements that are common to the figures.

The present disclosure broadly teaches a method and apparatus for mitigating an overload in a network. Although the present disclosure is discussed below in the context of an IP Multimedia Subsystem IMS Network the teachings of the present disclosure are not so limited. Namely the teachings of the present disclosure can be applied to other packet networks e.g. Voice over Internet Protocol VoIP networks and the like.

Network addresses e.g. router addresses within the internal network are reachable using routing information available only within the service provider s network. The public network comprises the network portion reachable using routing information e.g. IP addresses available in the public domain. Connections through the public network are referred to as public connections. Connections through the internal network are referred to as internal connections. Specifically connections through are public connections. Connections through are internal connections.

Server offices are used for hosting various network devices such as Media Gateway Control Functions MGCFs Application Servers ASs Home Subscriber Servers HSSs Call Session Control Functions CSCFs etc. For example server office may host MGCF Application Server HSS and CSCF . Similarly server office may host MGCF Application Server HSS and CSCF .

Access offices are used for hosting network devices such as Proxy Call Session Controller Functions P CSCFs Session Border Controllers S BCs Media Gateways MGWs Customer Edge CE routers etc. in a distributed manner. For example access office may host P CSCF S BC MGW and CE router and whereas access office may host P CSCF S BC MGW and CE . Similarly access office may host P CSCF S BC MGW and CE and whereas access office may host P CSCF S BC MGW and CE . It should be noted that an access office may host any number of media gateways P CSCFs S BCs CEs and so on. In addition the number and type of devices hosted at each access office may be different.

In one embodiment each access office is connected to an IP backbone network over both public and internal connections. For example packets from IP UEs reach an access office or via the public network . For example UE may send registration requests to S BC in the access office via public connection . Similarly each of the UEs may send registration requests to S BC or respectively via a public connection through the public network .

In one embodiment the Session Border Controllers S BCs are used to enable IP UEs to connect to the NGN and obtain services. For example a UE may register to the NGN via a particular S BC to receive VoIP services. Each S BC bridges between the public network and the internal network . Once a UE registers to the NGN via a particular S BC calls to from the UE flow through the particular S BC through which the UE is registered. The particular S BC performs the bridging of the call between the public and internal networks.

In one embodiment the MGWs are used to support calls between IP based UEs and TDM based PSTN phones. Calls to or from a PTSN phone use a particular trunk group on a particular MGW depending on the PSTN number. The PSTN number refers to a phone number. For example in phone numbers derived from the North American Numbering Plan NANP the phone number is a digit number. The area code is the first three digits and is also referred to as a Number Plan Area NPA code. The term NPA.NXX refers to the first six digits of a phone number containing the NPA code and a three digit exchange number following the NPA code. Calls to and from a particular NPA.NXX may be routed via a particular trunk group on a particular MGW.

In one embodiment the current method teaches mitigating an overload in a network by controlling and or changing a type of codec used for calls. In one embodiment the method first identifies network transport nodes that function as critical gateways e.g. CEs PEs S BCs etc. The method may then deploy one or more Network Watch Points NWPs and Network Monitor and Controllers NMCs as described below.

In one embodiment the network comprises a Network Monitor and Controller in each access office. The network also comprises NMC agents deployed in MGCFs in the server offices throughout the NGN. The network also comprises one or more Network Watch Points or modules at various points of an NGN network e.g. PE routers or CE routers or S BCs of an NGN. The functions of the NMCs and NWPs will be described below.

In one embodiment an NWP refers to a module in a network device that is used for determining when a bandwidth usage in a node either reaches or exceeds a predetermined threshold. In turn the NWP may also be used to alert the NMC when the bandwidth usage has either reached or exceeded the predetermined threshold. For example the method may deploy an NWP at each of the identified CE PE or S BC nodes.

In one embodiment an NMC refers to a network device or a module that is used for gathering alerts from the NWPs and for controlling network traffic volumes. The NMC comprises at least a policy rule engine for determining one or more actions for controlling traffic load. For example the policy rule engine may decide when to force the use of a lower bandwidth coder decoder codec on new calls when to use a midcalf procedure to change codecs for existing calls and when to stop enforcing the use of the lower bandwidth codec as described below.

In one embodiment the NMC may operate with the NMC agents implemented in various Media Gateway Controller MGC functions. That is software modules which function as NMC agents may be implemented in MGC functions. The NMC may then interface with the NMC agents in one or more MGCFs to control traffic load i.e. to take appropriate actions upon receiving commands from the NMC as discussed further below.

In one example an NWP in a node may determine that the bandwidth usage for the node e.g. a CE a PE a S BC and the like has exceeded a predetermined threshold e.g. 90 of capacity 80 of capacity and so on. The NWP will then alert the NMC that the threshold has been reached or exceeded. The NMC gathers the alerts and then activates one or more steps of the current disclosure to control the traffic load by controlling and or changing a type of codec used for calls. It should be noted that any description pertaining to numerical values in the present disclosure e.g. a particular threshold value is only illustrative. The scope of the present disclosure is not limited to any particular numerical values and the present disclosure can be adapted to meet the requirements of a particular implementation.

In one embodiment e.g. in a distributed implementation there is one NMC in each access office. Each NMC receives reports from the NWPs for various network resources supporting that particular access office. When it detects any surges of network resource usage from one or more NWPs the NMC may send a command to one or more NMC agents deployed in various MGCFs throughout the network such that the one or more MGCFs may take appropriate action to control traffic to address an overload condition. For example if the NMC in an access office receives a surge of network usage from one or more NWPs for a specific rate center served by the particular access office e.g. as identified by an NPA of NPA XXX code the NMC may send a command to the NMC agents in the MGCFs to control traffic load by using a codec that requires a lower bandwidth. The various MGCFs may then continue to support calls using a codec with a lower bandwidth in accordance with the command received from the NMC.

For example voice data transmission using a standard International Telecommunications Union ITU G.711 codec may have a codec bit rate of 64 Kbps while voice data transmission using an ITU G.728 codec may have a bit rate of 16 Kbps. The present method may then lower the bandwidth needs to support each call by up to a factor of four by changing from a G.711 codec to a G.728 codec as an example. It should be noted that this is only one illustrative example. The present disclosure is not limited to any particular types of codecs.

In one embodiment the commands sent by the NMC to the NMC agents in the MGCFs to control traffic load may vary based on a threshold that is reached. For example there may be a plurality of threshold levels broadly referred to as overload condition severity levels such as green yellow orange red etc.

For example the threshold associated with the green level may indicate that there is no overload condition. If a command to use a lower bandwidth codec was previously issued the NMC may send another command to the NMC agents to terminate enforcing the previously issued commands i.e. stop enforcing the use of a lower bandwidth codec. If there was no previously issued command i.e. while the network condition is still at the green level the NMC simply continues the monitoring.

The threshold associated with the yellow level may indicate that an overload condition has been detected. In response the NMC will issue a command to enforce the usage of a lower bandwidth codec only for new calls. For example existing calls calls in progress may continue to use the codec selected when the call was established while new calls will be supported using a codec with lower bandwidth. In other words ongoing calls will not be affected with the codec change at this level.

The threshold associated with the orange level may indicate that a more severe overload condition has been detected. In response the NMC will again issue a command to enforce the usage of a lower bandwidth codec. For example the NMC may issue a command to initiate mid call procedures to change existing calls to a lower bandwidth codec. In other words not only new calls will use the lower bandwidth codec but even existing calls will use the lower bandwidth codec. For example the method may use existing Session Initiation Protocol SIP mid call control procedures to change the type of codec for calls that are already in progress. For example SIP provides mid call changes such as adding another end point to a conference modifying a media characteristic modifying a codec and so on. The method may then invoke a SIP mid call control procedure to initiate usage of a codec with a lower bandwidth for all existing calls.

In one embodiment the red level may indicate that a very severe overload condition has been detected. However unlike the yellow level and orange level the red level may indicate that the overload condition is so severe that changing the codec type may not adequately address the overload condition. In response the NMC will issue a command to execute other overload correction procedures e.g. taking other corrective actions that do not involve changing the codec type. For example other methods of reducing traffic including but not limited to throttling blocking etc. may be used. Thus the present disclosure provides a method of addressing traffic overload in a network in a scalable manner with a plurality of different actions that will alter the type of codecs that are being used to address the particular overload condition that is being detected. This approach will allow the network to dynamically respond to overload conditions very quickly in a cost effective way. It allows the NGN network to be more adaptive to the network condition in a dynamic manner. The NGN network implementing this method can support maximal possible call sessions under overload conditions that may be caused by mass calling events office failover etc.

It should be noted that the number of threshold levels and color codes is only exemplary. As such the teachings of the current method are not intended to be limited to these exemplary implementations.

Returning to the exemplary network server office may host MGCF with NMC agent Application Server HSS and CSCF whereas server office may host MGCF with NMC agent Application Server HSS and CSCF . Access office may host P CSCF S BC with NWP MGW CE router with NWP and an NMC . Access office may host P CSCF S BC with NWP MGW CE router with NWP and NMC . It should be noted that an access office may host any number of media gateways P CSCFs S BCs CEs and so on. In addition the number and type of devices hosted at each access office may be different. Each of the access offices and is connected to an IP backbone network over both public and internal connections.

For example CE router is connected to the public connections on a PE router over a public link and to internal connections on the PE router over an internal link. Similarly CE router is connected to public connections on PE router over a public link and to internal connections on the PE router over an internal link. It should be noted that the separation of the PEs between internal network and the public network is just a logical illustration. In one embodiment the PEs could physically be a single backbone router.

Packets from IP UEs and reach the access office via the public network . For example UE may register to the NGN via S BC in access office . Packets from UE may then reach the S BC in the access office via the public connection . Similarly UE may register to the NGN via S BC in the access office . Packets from UE may then reach the S BC in the access office via the public connection

As discussed above there are many causes that may trigger a sudden increase of the resource consumption in a part or all of an NGN network. Mass calling events such as those triggered by a natural disaster or national security crisis are one of the examples. Another example is the situation referred to as access office failover.

To illustrate if a call is between an IP based UE and a TDM based PSTN phone then the call is handled by the S BC at which the UE is registered and the MGW handling calls to from the PSTN phones for the specific area code i.e. NPA.NXX code. If the S BC and the MGW for a call are collocated in the same access office then the call traverses the link between the PE router and the CE router once. If the S BC and the MGW for a call are located in different access offices then the call traverses the link between the PE router and CE router in the access office with the S BC twice and the link between the PE router and CE router in the access office with the MGW once.

In one example a call is originated by UE registered via S BC . The call is destined to a PSTN phone and MGW provides trunk group to the PSTN switch serving the rate center NPA.NXX for the PSTN phone . A bearer path illustrates the media flow traversed by audio packets to from UE and PSTN phone . The media flow originated by UE traverses PE and CE to reach S BC . S BC bridges the media flow to the internal network and forwards the media flow to MGW via CE . The MGW may then forward the media flow to the PSTN phone via the PSTN . It should be noted that on the same call session between the two parties there is another media flow in the opposite direction directed towards the UE.

In another example a call is originated by UE registered via S BC . The call is destined to a PSTN phone and MGW provides trunk group to the PSTN switch serving the rate center NPA.NXX for the PSTN phone . A bearer path illustrates the media flow traversed by audio packets to from UE and PSTN phone .

As illustrated in the above example when the S BC and MGW for a call are in different access offices twice as much bandwidth is required in the access office with the S BC as compared to the bandwidth required when the S BC and MGW are collocated. General phone call statistics shows that the majority of phone calls are local calls. Accordingly network service providers may design their access offices by placing S BCs and MGWs such that the majority of calls between IP based UEs and TDM based PSTN phones have bearer path traversing through collocated S BCs and MGWs. Thus the network can be designed to handle a smaller fraction of calls bearer path traversing an S BC and an MGW in different access offices. For example the network may handle only 10 of calls have bearer path traversing an S BC and an MGW in different access offices.

However if a UE is unable to register with the S BC that normally provides services to the UE or it loses connectivity with that S BC then the UE may register at another S BC and continue accessing services. The re registering via another S BC is referred to as access office failover. When a UE re registers via another S BC the UE is referred to as re homed at another S BC. The re homed UEs may continue originating and receiving calls to from the PSTN phones using the MGW and S BC in different access offices. For example if the UE was typically calling PSTN phones in area code and the MGW handling area code was located in the same access office as the S BC at which the UE was normally registered after failing over by registering via another S BC located at another access office the UE typically will continue to call phone numbers in the same area code . The majority of calls bearer path to from re homed UEs will flow via the new S BC and an MGW located in different access offices. The functions of the MGW are retained in the original access office.

A service provider may enable an access office to serve as a designated protection site for another access office. For example a first access office may have a second access office as its designated protection site. If a network failure affects the first access office customers who typically access the first access office may utilize the second access office. However in some failure scenarios the public network connection to an access office may be affected by a failure while the internal portion is functioning normally. A large number of UEs may then fail over and are re homed to a protection site thereby resulting in an access office failover event. An access office failover event refers to a network event in which a large number or percentage of UEs that previously were registered at one or more S BCs in a first access office suddenly re register at one or more S BCs located at an access office serving as a protection site for the first access office.

As discussed above the majority of PSTN calls to from the re homed UEs are likely from to area codes currently serviced by the MGW in UE s original home access office. Since these calls require more bandwidth at the re homed access office an access office failover event may result in the network being overloaded or performance being degraded for all calls. For example calls that are normally handled by the protection site may experience increased delay packet loss etc.

In one embodiment the present method initiates usage of a codec for re homed calls wherein the codec uses a lower bandwidth. For example if the threshold for usage of bandwidth is exceeded for a second access office that serves as a protection site for a first access office the method may initiate usage of a codec with lower bandwidth only for the calls that are re homed from the first access office. The usage of the codec with lower bandwidth for re homed calls may be applied on new calls existing calls or both.

In one embodiment the processes performed by the NMCs may be implemented at a centralized location e.g. a national data center a server office or an operation center. The centralized implementation is capable of providing the same functions as discussed above in the distributed implementation. However in order to be able to handle events that may occur in some particular areas that causes network overload in some particular access offices the NMC can be implemented with a map that shows which NPA or NPA NXX codes will be impacted if a particular NWP reports network resource issues. The mapping of the NWP to NPA or NPA NXX codes can be provisioned via NMC configuration interfaces and can be stored within the NMC.

In one embodiment the method may provide a plurality of thresholds for invoking usage of a codec with a lower bandwidth for various types of traffic. For example different thresholds can be set for invoking the usage of lower bandwidth on all calls only for re homed calls only for new calls and so on. That is the conservation of bandwidth may be applied based on new calls versus existing calls re homed traffic versus traffic from the same access office or any combination thereof.

In one embodiment the method is also able to detect that the call volume and or traffic load has dropped to or below a predetermined threshold. For example the method may detect that a node is operating only at 50 of capacity. Upon detecting the available capacity the method may then discontinue the usage of the codec with the lower bandwidth. That is the method may stop bandwidth conservation and enable usage of other codec standards. For the above example existing and or new calls may begin or return to using the G.711 codec to achieve better voice quality.

In one embodiment the predetermined threshold for initiating usage of a codec with a lower bandwidth and the predetermined threshold for termination of the usage of the codec with the lower bandwidth may be different. For example the method may initiate usage of a codec with a lower bandwidth when the node reaches 90 of capacity whereas the node will return to another codec e.g. a higher bandwidth codec when the node falls below 70 of capacity. Another variation to this embodiment is where the method will only take the orange level action as discussed above after receiving N consecutive orange alerts from the NWPs in M seconds otherwise continues to act as if receiving yellow alert. Similarly the method will only take green level action after K seconds has elapsed since receiving the green alert from all NWPs in the same access office without receiving other new yellow or orange alerts. These approaches will provide more stability in that the method is not too sensitive to transient network conditions.

In another embodiment the same threshold may be used. For example the method may initiate usage of a codec with a lower bandwidth when the node is operating at or above 80 of capacity and it will return to another codec e.g. a higher bandwidth codec when the node falls below 80 of capacity.

In one embodiment the method for mitigating an overload can be implemented with redundancy. For example the method may deploy redundant NMCs wherein the redundancy provides one primary NMC and at least one backup NMC. For example a network condition e.g. a failure or degradation may affect the availability of the primary NMC. The method may then enable one of a plurality of backup NMCs to gather alerts from the NWPs while the network condition is being remedied. In one embodiment the backup NMC can be a hot standby NMC i.e. ready to operate immediately when it is needed.

Note that the specific types of codecs e.g. G.711 and G.728 described above are provided only as examples and should not be deemed as limitations of the disclosure. As such the teachings of the current disclosure can be used by broadly changing from any first codec to any second codec wherein the second codec has a lower bandwidth usage as compared to that of the first codec and vice versa.

Referring back to the service provider may implement NWPs in CEs and S BCs and located in the access offices and . Similarly the service provider may implement NMCs and in the access offices and respectively. The NMC communicates with CE and S BC for receiving alerts and mitigating an overload in access office . Similarly the NMC communicates with CE and S BC for receiving alerts and mitigating an overload in the access office . Thus NMCs and monitor the network for traffic overload by receiving alerts from the various devices that have NWPs.

In one example the access office may become overloaded following a failover from the access office . The NMC may then receive an alert from one or more NWPs e.g. NWPs in CE S BC indicating that a predetermined threshold for bandwidth usage is either reached or exceeded.

The NMC may then initiate usage of a codec with a lower bandwidth according to predetermined criteria. For example in one embodiment the criteria may specify one or more thresholds as to when a switch to a different codec will be triggered. In fact the criteria may specify which portions or types of the traffic e.g. all calls only new calls only existing calls only calls to from re homed subscribers and so on is to use the codec with the lower bandwidth when a specific threshold is exceeded. For example the NMC sends a command to the NMC agent s and implemented within a MGCF to effect the change in the type of codec being used. In one example the NMC may send a command that specifies new calls will use a codec with a lower bandwidth. In another example the NMC may send a command that specifies that all calls will use a codec with a lower bandwidth and so on.

However if the threshold for returning to the usage of the original codec is reached then the method may then turn off usage of the codec with a lower bandwidth. For example once the overload condition has passed existing and or new calls may then resume using the original codec that may require more bandwidth. For example the NMC may notify the NMC agent s to resume usage of a normal codec. In this way the present disclosure is able to address an overload condition by selectively changing the codecs that are used to support calls.

In one embodiment the NMC agents provide a command interface to receive and confirm receipt of commands from the NMC. For example it can be implemented as Simple Object Access Protocol SOAP Extensible Markup Language XML interface or other interfaces such as application programming interfaces APIs . To illustrate on receiving a command new calls use normal codec on the following NPA NPA NXX codes the NMC agent will inform the MGC that it can resume the use of a normal call processing logic on all incoming and outgoing calls involving the specified NPA or NPA NXX codes e.g. with respect to the use of a normal codec.

In another example on receiving a command new calls use lowest codec on the following NPA NPA NXX codes the NMC agent will inform the MGC that when setting up a new call involving the specified NPA or NPA NXX codes a lowest possible codec should be used. More specifically for a call originating by the NGN UE the MGC should respond by choosing the lowest codec offered by the UE in the SDP portion of the SIP message whereas for a call originated by a PSTN user the MGC should construct an Invite Message to the called NGN UE by offering the lowest codec supported.

In yet another example on receiving a command all calls use lowest codec on the following NPA or NPA NXX codes the NMC agent will inform the MGC that when setting up a new call involving the specified NPA or NPA NXX codes a lowest possible codec should be used. In addition the NMC agent will inform the MGC to initiate SIP mid call procedures to switch to the lowest possible codec for all existing calls involving the same NPA or NPA NXX codes and are not using the lowest possible codec.

In one embodiment the processes performed by the NMCs may be implemented at a centralized location e.g. a national data center a server office or an operation center. The NMC in a centralized location may then be responsible for monitoring and controlling traffic for the entire network. The centralized implementation is capable of providing the same functions as discussed above in the distributed implementation. However in order to be able to handle massive calling events that may occur in some particular areas the NMC can be implemented with mapping information that shows which NPA or NPA NXX codes will be impacted if a particular NWP reports network resource issues. The mapping of the NWP to NPA or NPA NXX codes can be provisioned via NMC configuration interfaces and can be stored within the NMC.

In one embodiment the NMC may generate notification or alarms to a higher level network management system when it takes measures. This will provide another level of monitoring.

In step method monitors the network for detecting traffic overload i.e. an overload condition. For example an NMC may monitor the network for traffic overload by receiving alerts e.g. periodically or when a threshold is reached from various devices in the network that have NWPs. The method then proceeds to step .

In step method determines whether a network condition change has been detected. For example method determines whether a network condition change has been detected. If the answer is affirmative method proceeds to step . If the answer is negative method proceeds to step .

In step method determines if a more severe overload condition is detected. As described earlier there may be several levels of thresholds. For example if the previous monitoring indicated that there was no overload condition then the previous network condition is associated with a green level. If the latest monitoring indicated that the threshold associated with yellow level is reached then the method determines that there is a more severe overload condition in step . In another example if the previous monitoring indicated there was an overload condition associated with the yellow level and the latest monitoring indicated the threshold associated with the orange level is reached then the method determines that there is an even more severe overload condition. In yet another example if the previous monitoring indicated there was an overload condition associated with the orange level and the latest monitoring indicated the threshold associated with the red level is reached then the method determines that there is a very severe overload condition. If a more severe overload condition is detected the method proceeds to step . Otherwise the method proceeds to step .

In step method selects a different bandwidth preservation scheme to address a more severe overload condition. In one example the method issues a command to enforce usage of a lower bandwidth codec relative to the codec currently being used for new calls e.g. yellow threshold is reached as described above . In one example usage of the lower bandwidth codec is enforced for all calls e.g. orange threshold is reached as described above . In one example other more aggressive bandwidth preservation schemes may be necessary. For example if the red threshold is reached other methods such as throttling blocking etc. may have to be initiated. The method then proceeds to step to continue monitoring the network.

In step method selects a different bandwidth preservation scheme to address the detection of a less severe overload condition. In other words since a network overload condition change was detected in step and a more severe overload condition was not detected in step then the network overload condition change must be due to the detection of a less severe overload condition.

For example if there is no overload condition then the method may then issue a command to stop enforcing the usage of a lower bandwidth codec. Hence the method may issue a command to stop enforcing the previously bandwidth preservation scheme. In another example the method issues a command to stop enforcing a previously selected bandwidth preservation scheme to address an improved condition. For example if throttling of new calls was previously implemented e.g. at a red level but the network overload condition has since then improved then the method may issue a command to stop throttling and continue to use a lower bandwidth codec e.g. an orange level or even a yellow level . The method then proceeds to step to continue monitoring the network.

Note that the criteria for determining which portion of the traffic e.g. all calls only new calls only existing calls only re homed calls and so on is affected due to a command to enforce usage of a codec with a lower bandwidth is selectively determined. For example one service provider may choose to enforce usage of a lower bandwidth codec on all calls at a lower overload condition. Another service provider may elect to enforce the usage of a lower bandwidth codec only on new calls regardless of the severity of the overload condition.

For example in one embodiment if a first threshold e.g. 75 of capacity is reached the method may dictate that all re homed calls are to use a lower bandwidth codec while other types of calls can continue to use codecs with a higher bandwidth. However if a second threshold e.g. 85 of capacity is reached the method may dictate that all new calls are to use the lower bandwidth codec as well. However if a third threshold e.g. 90 of capacity is reached the method may dictate that all existing or currently on going calls are to use the lower bandwidth codec as well. Finally if a fourth threshold e.g. 95 of capacity is reached the method may dictate that all calls irrespective of types are to use the lower bandwidth codec. It should be noted that the threshold values provided in the above example is only illustrative and should not be deemed to be a limitation of the present disclosure. Furthermore although the above example only discloses the usage of a higher bandwidth codec or a lower bandwidth codec the teachings of the present disclosure is not so limited. In other words there could be a plurality of codecs with varying bandwidth capabilities with more granularity than simply higher bandwidth or lower bandwidth where the NMC may dictate different types of codecs to be used depending on the traffic condition of the network.

Similarly if conditions improve there may be sufficient bandwidth to switch to another bandwidth preservation scheme or to deactivate the usage of a codec with a lower bandwidth codec. The criteria for deactivation are also pre determined by the service provider. For example if a first threshold e.g. 86 of capacity is reached the method may dictate that all new calls except for those to from a particular NPA.NXX can use a higher bandwidth codec while existing calls and calls to from the particular NPA.NXX continue to use codecs with a lower bandwidth. However if a second threshold e.g. 81 of capacity is reached the method may dictate that all new calls are to use the higher bandwidth codec as well while existing calls continue to use the lower bandwidth codec.

It should be noted that using mid call procedure to change codec for existing calls are relatively expensive. As such in one embodiment when the method steps down to a lower level it may want to avoid implementing the mid call procedure to change codec. As long as the method allows new calls to use better or higher bandwidth codec existing calls will eventually terminated. However in another embodiment in some other services such as those NGNs that serve many long lasting conference calls it may be practical to use mid call procedure to switch the codec.

It should be noted that the media gateways S BCs NMCs NWPs and other network elements may be located in other types of offices. For example a regional office may house these network elements and or modules in network elements for various access offices. In addition a PE and CE may be located within the same physical building. As such the pairing of a CE and a PE defines the relationship between the backbone and access portions of the NGN. Therefore the above description is not intended to limit the implementation to a specific type of office or physical structure.

It should be noted that although not specifically specified one or more steps of method may include a storing displaying and or outputting step as required for a particular application. In other words any data records fields and or intermediate results discussed in the method can be stored displayed and or outputted to another device as required for a particular application. Furthermore steps or blocks in that recite a determining operation or involve a decision do not necessarily require that both branches of the determining operation be practiced. In other words one of the branches of the determining operation can be deemed as an optional step.

In one embodiment the method starts at an initial state e.g. during network setup or configuration. Once the network is operational it will enter into the green state . While in the green state the network does not enforce codec usage for any call session and continues to be monitored for any potential condition change. If a network condition change is detected e.g. the trigger where the method receives an alert indicating an overload condition exceeding a threshold for the yellow state then it will transition into the yellow state .

While in the yellow state a lower bandwidth codec is used for new calls and the network continues to be monitored for an overload condition change. If an overload condition change is detected e.g. the trigger where the method receives an alert indicating an overload condition exceeding a threshold for the orange state then it will transition into the orange state . Alternatively if an overload condition change is detected e.g. the trigger where the method receives an alert indicating an overload condition falling below a threshold for the yellow state then it will transition into the green state.

While in the orange state a lower bandwidth codec is used for all calls i.e. new calls and existing calls and the network continues to be monitored for an overload condition change. If an overload condition change is detected e.g. the trigger where the method receives an alert indicating an overload condition exceeding a threshold for the red state then it will transition into the red state . Alternatively if an overload condition change is detected e.g. the trigger where the method receives an alert indicating an overload condition falling below a threshold for the orange state then it will transition into the yellow state.

While in the red state throttling of new calls may be implemented and the network continues to be monitored for an overload condition change. If an overload condition change is detected e.g. the trigger where the method receives an alert indicating an overload condition falling below a threshold for the red state then it will transition into the orange state.

It should be noted that although the state transition diagram illustrates the transition of states as occurring in a sequential single step manner the present disclosure is not so limited. For example the method can be implemented where a transition may occur where it transitions from the red level directly to the yellow level or vice versa i.e. skipping a level. Further the method can incorporate stabilization methods to reduce the sensitivity on transient network condition changes. For example it could wait for a certain number of a network condition change alerts to occur in a observation time window to trigger a state transition. The manner as to how the transition will occur can be tailored to the requirements of a particular network.

It should be noted that the teachings of the present disclosure can be implemented in a combination of software and hardware e.g. using application specific integrated circuits ASIC a general purpose computer or any other hardware equivalents. In one embodiment the present module or process for mitigating an overload in a network can be loaded into memory and executed by processor to implement the functions as discussed above. As such the present method for mitigating an overload in a network including associated data structures of the present invention can be stored on a non transitory computer readable storage medium e.g. RAM memory magnetic or optical drive or diskette and the like.

While various embodiments have been described above it should be understood that they have been presented by way of example only and not limitation. Thus the breadth and scope of a preferred embodiment should not be limited by any of the above described exemplary embodiments but should be defined only in accordance with the following claims and their equivalents.

