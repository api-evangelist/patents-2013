---

title: Video presentation using repeated video frames
abstract: A variety of media devices may stream and present content such as movies, music, audiobooks, and so forth. During streaming, data transfer rates may temporarily drop below that needed to maintain presentation. Described herein are techniques and systems for repeating presentation of previously received video frames. This repeated presentation allows for presentation of the content to continue uninterrupted, while providing time for the data transfer rate to regain a level capable of maintaining the presentation.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09232249&OS=09232249&RS=09232249
owner: Amazon Technologies, Inc.
number: 09232249
owner_city: Reno
owner_country: US
publication_date: 20130829
---
A wide variety of content is available for streaming delivery to media devices for presentation. The content may include audio video or both. The media devices may include televisions set top boxes tablet computers personal computers gaming consoles in vehicle entertainment systems portable media players and so forth.

Traditionally drops in data transfer rates result in cessation of content presentation or a transition to presentation of lower quality content such as encoded at a lower bitrate. This cessation or transition to lower quality content may result in an undesirable user experience.

Certain implementations and embodiments will now be described more fully below with reference to the accompanying figures in which various aspects are shown. However various aspects may be implemented in many different forms and should not be construed as limited to the implementations set forth herein. Like numbers refer to like elements throughout.

Media devices present content to one or more users. The content may include audio video or both. For example the content may include television shows movies audio books and so forth.

The content may be streamed from one or more content servers to the media device. The media device may then present the content to the one or more users. Streaming comprises an incremental ongoing transmission of portions of the content. As portions are received presentation may take place. Streaming allows for presentation to begin before the entire file has been downloaded. Streaming offers several advantages compared to local storage of the entire file of the content. Local storage requirements of the media device are reduced lowering cost of the device. Content publishers or owners may be better able to determine content consumption statistics such as how many times a movie has been watched. Digital rights management may also be more easily applied and updated helping to maintain intellectual property rights in the content.

Streaming utilizes a connection to the one or more content servers to receive portions of the content for presentation. The connection between the media device and the one or more content servers may use one or more networks. The data transfer rate between the media device and the one or more content servers may change from time to time. These changes in data transfer rate may result from changes in network routing congestion at one or more points along the network and so forth. For example the data transfer rate may be 1.5 megabits per seconds Mbps at time 0 drop to 0.75 Mbps at time 1 and increase to 1.6 Mbps at time 2. Bit or bits as used in this disclosure are indicative of a quantity of data transferred stored or otherwise manipulated for ease of discussion and not as a limitation. For example the quantity of data may be expressed as bytes.

Video content may comprise a plurality of frames. A display output device presents these frames in sequence to produce apparent motion. Frame rates of between 15 and 120 frames per second may be used to provide video. For example a frame rate of 60 frames per second fps presents 60 frames in sequence for every second with each frame presented on the display output device for about 1 60 of a second or about 16.6 milliseconds ms .

For presentation of the video content to be maintained without dropouts the frames are delivered to the display output device without interruption. Various situations may result in dropouts. For example a delay or error in processing the video frames on the media device may delay or lose video frames. In another example the data transfer rate between the media device and the one or more content servers providing the content may drop below that which is needed to deliver the video frames for ongoing presentation. Continuing the example above the presentation may consume 1.5 Mbps of video frame data every second. Should the data transfer rate drop below 1.5 Mbps such as at time 1 where the data transfer rate is 0.75 Mbps presentation may fail.

To maintain presentation the media device may buffer a portion of the streamed content. For example the video frames received from the one or more content servers are stored in memory. Presentation may then use the buffered video frames. Over time the buffer is refilled with additional video frames received from the one or more content servers. Without this refill the buffer is exhausted and presentation is starved for video frames to present.

Traditional content servers may use adaptive bitrate streaming ABS to deliver content. ABS responds to changes in the data transfer rate by delivering content of different quality at different times. For example when the data transfer rate is above 1.5 Mbps the content may be delivered in a high quality or high definition format. Continuing the example when the data transfer rate is below 1.5 Mbps the content may be delivered in a low quality or standard definition format.

ABS responds to changes in the data transfer rate by transitioning between different versions of the content based on the data transfer rate available. Each of these different versions may provide content of different quality. In one implementation the different versions of the content may include a low quality low bitrate stream a medium quality medium bitrate stream and a high quality high bitrate stream.

While ABS streaming allows for ongoing presentation during changes in the data transfer rate the transition from content of one quality to another may be noticeable to the user. For example while streaming a movie the user may see the video presented on the screen change from a high definition picture to a lower definition picture. By minimizing or eliminating the number of such transitions the user experience may be improved.

Described in this disclosure are techniques for maintaining presentation of video content at a given level of quality when a data transfer rate has momentarily dropped below a threshold level. Instead of exhausting the buffer and discontinuing presentation or transitioning to lower quality one or more video frames are presented more than once. The repeated frames are of the same quality thus a user watching the presentation of the video experiences no transition from one quality to another. Repeated presentation may result in video which appears to be slowed down with respect to non repeated presentation. To minimize the visual impact the repeated frames may be those video frames which show little or no change between video frames. For example a scene of an abandoned street may have little or no motion and thus may have several video frames eligible for repetition.

By repeating these video frames additional time is provided to allow the data transfer rate to meet or exceed the threshold level. Thus repeating the video frames may be considered to extend a length of time the buffer will take to empty. During this additional time the data transfer rate may return to or exceed the threshold level. Other techniques such as discontinuing presentation ABS and so forth may be used in conjunction with repeating the frames should the additional time be insufficient to provide for recovery of the data transfer rate.

In one implementation the media device may be configured to generate repeatability data indicating video frames which are repeatable. Repeatability data may be determined based on analyzing the content metadata about the content environment data and so forth with respect to one or more repeatability factors. For example the repeatability factors may specify that compressed video frames having a frame bit size below a frame size threshold may be designated as repeatable. Based on the repeatability data one or more of the repeatable frames may be presented more than once. The presentation of the repeatable frames by the media device may be based at least in part on a reduction in the data transfer rate from the content server to the media device.

In another implementation the repeatability data may be provided to the media device. For example the content server may provide the content and repeatability data. Based at least in part on a reduction in the data transfer rate from the content server the media device presents the video frames designated as repeatable frames.

Presentation of the repeatable frames may be based on one or more conditions. In one implementation presentation may be based on the data transfer rate from the content server dropping below a transfer threshold. For example the transfer threshold for a high quality piece of content may be 1.5 Mbps. In another implementation presentation may be based on a ratio which is based on a buffer refill rate and a buffer empty rate dropping below a buffer equilibrium value. For example the buffer refill rate of 0.5 Mbps and the buffer empty rate of 1.5 Mbps results in a ratio of 0.33 indicating the buffer is providing video frames for presentation more quickly than additional video frames can be received. In other implementations presentation may be based on one or more other conditions.

By repeating one or more of the repeatable frames indicated by the repeatability data the media device may reduce the incidence of dropouts or transitions in content quality due to ABS. This reduction may improve the user experience while consuming streaming content particularly in situations where the data transfer rate between the media device and the content server varies frequently.

The media device may include televisions tablet computers personal computers set top boxes gaming consoles in vehicle entertainment systems portable media players and so forth. The media device includes or is communicatively coupled to one or more display output devices suitable for presenting video.

The media device may be coupled to a remote control using a communication link. The remote control may serve as an input device or input output device for the media device . For example the remote control may include one or more of a touch sensor button accelerometer gyroscope camera microphone speaker haptic output device and so forth. The communication link may be optical radio frequency acoustic and so forth. In one implementation the communication link may use a personal area network interface such as one compliant with the Bluetooth specification. In some implementations the remote control may comprise another device such as a smartphone tablet computer and so forth which is communicatively coupled to the media device .

The content may comprise metadata thumbnails video frames audio frames and other data . The metadata comprises information about the content . For example the metadata may specify frame size in bits for a particular video frame . The metadata may be embedded or encoded in the video frame stored as a separate file and so forth. The metadata is discussed in more detail below with regard to .

The thumbnails may comprise still images based on images in the video frames at different points within a stream of the video frames . For example the thumbnails may contain sample images at two second intervals in the video frames on a scene change and so forth.

The video frames comprise data representative of an image or a part of an image. A plurality of video frames are presented in sequence on a display output device of the media device . The video frames may be encoded using one or more encoding schemes. These encoding schemes may include data compression. In one implementation the video frames may be encoded such that they are decodable as described in the MPEG 2 standard promulgated by the Motion Pictures Experts Group MPEG . In another implementation the video frames may be encoded using the H.264 standard developed by the Video Coding Experts Group VCEG and the MPEG.

The audio frames comprise audio information which may be associated with the video frames . For example the audio frames may be encoded using the MP2 MPEG 1 or MPEG 2 Audio Layer II format promulgated by the MPEG.

Other data may be included in the content . For example the other data may include information associated with one or more digital rights management schemes.

The media device may receive content streamed over one or more networks from one or more content servers . The one or more networks may include one or more public networks such as the Internet private networks or a combination of both. The network in turn couples to a plurality of content servers . . . S . As used in this disclosure a letter within parenthesis such as S represents an integer value greater than zero. While a single content server is depicted in some implementations the content server or the functions attributed to the content server may be provided by a plurality of devices. For example the content server may exist as a virtualized server executing across a plurality of physical servers.

The content server may provide functions such as streaming content to the media device for presentation authenticating user accounts providing content lists and so forth. The content server may store or have access to one or more pieces of content . The content may be provided using the network to the media device .

The content server may include a communication module configured to establish and support communications with the media device or other devices. For example the communication module may execute instructions which support transmission of data across a data network using the Transmission Control Protocol Internet Protocol TCP IP .

A content delivery module is configured to stream the content to one or more of the media devices . The streaming of the content may be initiated by a request from the media device by the content server or another device.

One or more of the conditions on the content server the network the media device and so forth may affect the streaming of the content . For example data congestion on the network may impact a data transfer rate of portions of the content such as the video frames .

The media device may also have a communication module configured to establish and support communications with the content server other media devices or other devices. A user interface module of the media device is configured to provide a user interface to the user and accept inputs responsive to the user interface. The user interface may include one or more visual audible or haptic elements. For example the user interface may be configured to provide a graphical user interface using the display which includes a control to navigate within the content .

A presentation module is configured to present content on or in conjunction with the media device . The presentation module may be configured to receive streamed content from an external source device such as the content server another media device and so forth. The presentation module may support digital rights management presentation of encrypted content and so forth. The presentation module may be configured to work in conjunction with the user interface module to allow the user to control presentation of the content .

The presentation module is configured to repeat or present more than once one or more of the video frames determined to be repeatable. For example the presentation module may be configured to present repeatable frames when the data transfer rate of the content from the content server drops below a transfer threshold level. The presentation module may determine and utilize a repeatability tolerance which specifies how often and under what conditions repetition of the video frames is used.

A frame analysis module is configured to determine which video frames in the content may be repeated. The frame analysis module may use as input one or more of the content environment data one or more repeatability factors and so forth to generate repeatability data for the video frames A F in a buffer . As described above the video frames received by the media device may be stored in a buffer prior to presentation by the presentation module . The video frames received by the media device may be stored regardless of whether the individual video frames have expired been delayed past a maximum time limit and so forth. For example video frames which have been delivered too late for timely presentation may be stored in the buffer . The buffer may be configured to fill and empty the video frames in a first in first out fashion.

The buffer may be configured to store a fixed amount of data or may vary in size during operation. For example the buffer may be dynamically adjusted during operation to increase or decrease the number of video frames which may be stored. In some implementations size of the buffer may be based on one or more of the metadata the environment data and so forth.

The environment data provides information indicative of the environment in which the delivery processing and presentation of the content are taking place. For example environment data may include native resolution of the output display device in use by the media device physical viewing distance from the output display device to the user predicted bandwidth availability over time and so forth. The environment data is discussed in more detail below with regard to .

The repeatability factors set out conditions under which the frame analysis module determines a video frame to be repeatable or non repeatable. For example the repeatability factors may specify that a smallest percentile of the video frames is repeatable. Continuing the example the repeatability factors may specify that video frames having a bit size in the smallest decile are repeatable.

The repeatability data provides information indicative of whether one or more video frames are repeatable during presentation. For example the repeatability data may comprise a single bit flag set for video frames which indicates that a particular video frame may be repeated during presentation without adversely impacting the user experience.

The presentation module is configured to access the buffer and present repeatable frames repeated frames and non repeatable frames to provide presented video . The repeatable frames are those that the repeatability data indicate may be repeated. However repeatable frames are not necessarily repeated and may never be repeated during presentation. The repeated frames are duplicates of the repeatable frames . The repeated frames may be duplicated in the buffer as shown here. In other implementations the repeated frames may result from instructions configured to present the repeatable frame twice without duplication in the buffer .

As illustrated here the presented video includes the repeatable frames one or more repeated frames and the non repeatable frames . The presentation module may present the repeated frames responsive to a drop in the data transfer rate of the content to the media device from the content server below a transfer threshold level. Due to the presence of the one or more repeated frames additional time has been provided. This additional time may provide an opportunity for the data transfer rate to rise to or exceed the transfer threshold level preventing or delaying a dropout or transition to a lower quality stream. As a result the user experience while consuming the content may be improved.

In this illustration arrow indicates time with time increasing from left to right on this page. Illustrated are what the user will see presented on the output display device.

Depicted are a no adaptation streaming scenario an adaptive bitrate streaming ABS scenario and a streaming with repeated frame scenario . A low data transfer rate event is depicted by a broken line extending vertically on the page at a particular time. During this low data transfer rate event data transfer rate has dropped below a transfer threshold level resulting in the buffer emptying faster than it is being refilled by incoming data from the content server . The duration of the low data transfer rate event may have a duration ranging from a few milliseconds to several seconds.

In the no adaptation streaming scenario the video frames for first quality video have been previously received and stored in the buffer . These video frames are presented. Due to the low data transfer rate event the buffer has been starved and as a result at a later time a dropout results. The user may see this presented as a blank screen missing data frozen image and so forth. The dropout may be disconcerting and result in a negative user experience.

The ABS scenario illustrates that the first quality video is presented until the second quality video is presented. As described above ABS provides the advantage that the user has not experienced the dropout . However the user has experienced a transition from the first quality video to the second quality video . For example the user sees the transition from high definition video to standard definition video. After the low data transfer rate event subsides and the data transfer rate is again sufficient to support the high first quality video the user will experience another transition as the ABS adjusts.

In comparison the streaming with repeated frame scenario illustrated here eliminates the dropouts and the transitions . The presented video presented to the user by the media device presents the repeated frames . These repeated frames may be distributed throughout the video frames in the buffer . For example as shown here a single repeated frame is inserted two consecutive repeated frames and another single repeated frame are inserted. Assuming the 30 fps frame rate insertion of these four frames allows the media device an additional 133 ms to receive additional content . This time may allow the media device to ride out a temporary decrease in the data transfer rate without a dropout or triggering a transition . Because the repeated frames are drawn from the buffer already containing video frames of the first quality video no dropout or transition is apparent to the user during presentation.

The repeated frames may be distributed or separated from one another such that the user does not readily perceive inclusion in the presented video . For example the presentation module may be configured to not repeat more than three consecutive video frames not to repeat a total of more than 10 of the video frames in the buffer and so forth. Furthermore the frame analysis module may be configured to designate video frames as repeatable which have little or no motion relative to an earlier or later video frame . As a result the user experience is improved.

Also depicted is presented video such as shown when the data transfer rate is below the transfer threshold level. In this illustration repeated frame duplicates video frame and is presented before video frame . As a result of the presentation of the video frame a second time additional time has accrued. As described above this additional time may provide an opportunity for the data transfer rate to recover to or exceed the transfer threshold level.

As illustrated here the data transfer rate may vary over time. These variations may be due to one or more of the content server the network the media device and so forth. A low data transfer rate event may occur during which the data transfer rate drops below the transfer threshold . For example the content server may temporarily suspend transmission of the content while resetting a network interface. As a result the media device begins to deplete the buffer . In many cases the duration of a low data transfer rate event may be short on the order of 250 ms or less. However this duration may be sufficient to trigger ABS resulting in one or more transitions as described above with regard to .

The presentation module may be configured to control presentation of repeated frames based at least in part on a comparison of the data transfer rate to the transfer threshold . For example the presentation module may initiate frame repetition based on the data transfer rate dropping below the transfer threshold and discontinue frame repetition when the data transfer rate rises above the transfer threshold .

The transfer threshold may be statically configured or dynamically adjusted. For example the presentation module may dynamically adjust the transfer threshold based on the bitrate associated with the content being delivered to the media device .

A second graph depicts time along the horizontal axis while a vertical axis depicts a ratio defined by buffer refill rate and buffer empty rate. The buffer refill rate indicates a quantity of data the buffer is receiving per unit of time. The buffer refill rate may be expressed in bits per second number of video frames per second and so forth. For example the buffer refill rate may indicate 10 fps. The buffer empty rate indicates a quantity of data exiting the buffer such as for presentation on the display output device. The buffer empty rate may be expressed in bits per second number of video frames per second and so forth. For example the buffer empty rate may indicate 30 fps.

Dividing the buffer refill rate by the buffer empty rate results in a ratio value . Where this ratio value is equal to or greater than 1.0 the media device is receiving enough streamed content to maintain presentation without repeating frames dropouts or transitions . In comparison a ratio value less than 1.0 indicates that the media device is not receiving enough streamed content quickly enough to keep the buffer filled and maintain uninterrupted presentation.

The presentation module may be configured to control presentation of repeated frames based at least in part on a comparison of the buffer refill buffer empty ratio value to the buffer equilibrium level . For example the presentation module may initiate a period of frame repetition based on the buffer refill buffer empty ratio value dropping below 1.0 and discontinue frame repetition when the buffer refill buffer empty ratio reaches or exceeds 1.0.

In other implementations the presentation module may use other conditions to determine when to present repeated frames . For example the content server may provide other data indicating a prediction of network congestion resulting in frame repetition .

A number of pixels changed relative to an earlier or later frame may be indicated in the metadata . For example this may indicate a number of pixels that have changed color luminosity and so forth. A number of objects that have moved or otherwise been displaced relative to an earlier or later frame may be indicated. For example for the presented video depicted in the number of objects may be one corresponding to the basketball falling from the chair to the ground. A motion vector provides information about one or more objects that have moved or otherwise been displaced relative to an earlier or later frame. In some implementations the motion vector associated with a data encoding scheme may be used. For example the motion vector associated with an MPEG2 or MPEG4 encoding may be used. These metadata may be used to determine video frames that have little or no motion and are thus suitable for repetition without disturbing the user .

A presentation frame rate provides data indicating the intended or specified number of frames per second at which the video frames are to be presented. For example the presentation frame rate may be 24 fps. At higher frame rates the tolerance to allow repetition may be relaxed such that more video frames may be repeated compared to lower frame rates.

Other metadata M not shown may also be provided. For example the other metadata M may include author name artists name title content rating digital rights management information and so forth. The metadata may be embedded or encoded in the video frame stored as a separate file and so forth.

The frame analysis module may also access the environment data . The environment data provides information indicative of the environment in which the delivery processing and presentation of the content takes place. A native resolution of the output display device may be provided. For example the native resolution of the output display device may indicate that a television attached to the media device is able to natively present images with a resolution of 1920 1080 pixels non interlaced at up to 120 fps.

A viewing distance indicates a physical viewing distance from the output display device to the user . The viewing distance may be manually entered determined using one or more sensors or a combination thereof. For example the viewing distance for a handheld tablet device may be preset to 1 meter. A tolerance to allow repetition may be based on the viewing distance . For example greater repetitions may be permitted at greater viewing distances where the user is unable to see finer detail on the output display device.

Different pieces of environment data may be combined for analysis by the frame analysis module . The frame analysis module may set a tolerance for repeatability based on the native resolution and the viewing distance . For example a relatively low resolution display viewed at a relatively large distance may obscure finer detail such that a relatively larger number of repetitions may go unnoticed.

The environment data may include a maximum data transfer rate . For example the maximum data transfer rate may be indicative of a maximum network interface link throughput. Given the maximum data transfer rate the presentation module may determine for how long to engage in video frames repetition. For example at a certain point in time the low data transfer rate event has persisted so long that repetition is insufficient to provide additional time to refill the buffer as constrained by the maximum data transfer rate . In such a situation the presentation module may activate ABS to transfer the content which requires a lesser data transfer rate .

The environment data may include other information E not shown such as processor utilization of the media device video pipeline processing delay information pending system maintenance tasks and so forth. For example the environment data may include messages indicating that congestion on the network is increasing and a decrease in data transfer rate is imminent.

The repeatability factors set out conditions under which the frame analysis module determines a video frame to be repeatable or non repeatable . The repeatability factors may include a frame size threshold . The frame size threshold specifies a size of frames in terms of bits bytes a dimensionless value a relative value and so forth which may be used to determine repeatability. For example the frame size threshold may be expressed as small medium or large . The frame analysis module may compare the frame size with the frame size threshold such that frame sizes below the frame size threshold are designated as repeatable frames . In situations where the video frames are compressed such as with a lossy compression scheme smaller video frames may be representative of images of a relatively static scene containing little or no movement.

A pixel change threshold specifies a number of pixels changed relative to an earlier or later frame which may be used to determine repeatability. For example the pixel change threshold may indicate that video frames that have less than 300 pixel changes relative to an earlier or later frame are able to be designated as repeatable . In some implementations the pixel change threshold may specify a number of adjacent pixels. The pixel change threshold may be used by the frame analysis module to analyze the number of pixels changed relative to an earlier or later frame .

The repeatability factors may include a moved object threshold . This threshold indicates a number of objects that have moved or otherwise been displaced relative to an earlier or later frame which may result in designation of repeatability. For example the moved object threshold may specify that video frames having the number of objects that move of two or fewer are designated as repeatable .

A motion vector threshold specifies vector values which when not exceeded may be used by the frame analysis module to determine a video frame is repeatable . For example video frames in which the motion vector is below the motion vector threshold may be determined to be repeatable .

The media device may use a frame rate threshold to determine repeatability. For example the frame analysis module may raise the pixel change threshold when the content is presented at higher frame rates.

A display resolution threshold may be used to determine repeatability. For example when the native resolution of the output display device is below the display resolution threshold additional video frames may be designated as repeatable .

The frame analysis module may determine repeatability using a viewing distance threshold . For example where the viewing distance exceeds two meters the frequency of repetition may be increased.

A frame type may also be used to determine repeatability. For example the video frames compliant with MPEG2 may be categorized as being a frame type such as a key frame predictive frame bidirectional predicted frame and so forth. The video frames having a frame type of key frame may be designated as non repeatable by the frame analysis module .

A repeatability flag may indicate whether the video frame is repeatable or non repeatable . For example the repeatability flag value of 1 may be used by the frame analysis module to determine video frames that are repeatable. In some implementations the repeatability data may be received from another device such as the content server .

Other repeatability factors R not shown may also be considered to determine when the video frame is repeatable . For example an average luminosity threshold may be used to allow for increased repetition of dark or dim images relative to brightly lit images.

While the examples above illustrate the use of various repeatability factors to determine repeatability the analysis may be inverted such that non repeatability is determined. Furthermore the presentation module may perform one or more of the analyses discussed above. Additionally the repeatability factors may be used alone or in combination with one another. For example repeatability may be based on the frame size threshold pixel change threshold frame rate threshold and so forth.

The media device may include one or more processors configured to execute one or more stored instructions. The processor s may comprise one or more cores. The media device may include one or more input output I O interface s to allow the processor s or other portions of the media device to communicate with other devices. The I O interfaces may comprise Inter Integrated Circuit I2C Serial Peripheral Interface bus SPI Universal Serial Bus USB RS 232 a media device interface such as High Definition Multimedia Interface HDMI and so forth.

The I O interface s may couple to one or more I O devices . The I O devices may include input devices such as one or more of a camera a microphone a touch sensor a button and so forth. The I O devices may also include output devices such as one or more of a display audio speakers haptic output devices and so forth. In some embodiments the I O devices may be physically incorporated with the media device or may be externally placed and communicatively coupled thereto.

The I O interfaces may include one or more media device interfaces. The media device interfaces allow for the exchange of information between the media device and other media devices . The media device interface may include one or more of a HDMI TOSLINK Ethernet analog video analog audio IEEE 1394 USB Bluetooth ZigBee and so forth. The media device interfaces may allow for wired or wireless communication between the media device and the other media devices .

The media device may also include one or more communication interfaces . The communication interfaces are configured to provide communications between the media device and other devices. The communication interfaces may include personal area networks wireless local area networks wireless wide area networks and so forth. The media device may communicate with the remote control using one or more of the communication interfaces . For example the media device may communicate with the remote control using a Bluetooth personal area network.

The media device may also include one or more busses or other internal communications hardware or software that allow for the transfer of data between the various modules and components of the media device .

As shown in the media device includes one or more memories . The memory comprises one or more computer readable storage media CRSM . The buffer may comprise a portion of the memory a dedicated memory device and so forth. The CRSM may be any one or more of an electronic storage medium a magnetic storage medium an optical storage medium a quantum storage medium a mechanical computer storage medium and so forth. The memory provides storage of computer readable instructions data structures program modules and other data for the operation of the media device .

The memory may include at least one operating system OS module . The OS module is configured to manage hardware resource devices such as the I O interfaces the I O devices the communication interfaces the device interfaces and provide various services to applications or modules executing on the processors . Also stored in the memory may be the communication module the user interface module the presentation module and the frame analysis module .

As described above the communication module is configured to establish and support communications between the media device and other devices. The communication module may access the communication interfaces to exchange information. For example the communication module may be configured to request content from the content server using the network .

As described above the user interface module is configured to provide the user interface to the user using the I O devices and accept inputs received from the user input I O devices . The user interface may include one or more visual audible or haptic elements.

The presentation module is configured to present content on the media device or another device communicatively coupled thereto such as a television connection using HDMI . The presentation module is configured to receive content streamed from an external source device such as the content server or another media device such as in a peer to peer configuration.

The presentation module is configured to repeat or present more than once one or more of the video frames determined to be repeatable . The determination as to which video frames are repeatable may be provided by the frame analysis module or in some implementations may be received as repeatability data from the content server .

The presentation module may also determine when to initiate and when to discontinue repetition. As described above with regard to the presentation module may initiate frame repetition such as when the data transfer rate from the content server to the media device drops below the transfer threshold or when the buffer refill buffer empty ratio drops below 1.0. As described above the presentation module may dynamically adjust the repeatability tolerance that specifies how often and under what conditions repetition is used.

The frame analysis module is configured to use the repeatability factors to determine which video frames may be designated as repeatable . The frame analysis module may use as input one or more of the content environment data and so forth to generate the repeatability data for the video frames A F in a buffer .

Other modules may be stored in the memory . For example a digital rights management module may work in conjunction with the presentation module to facilitate access to content .

The memory may also include a datastore to store information. The datastore may use a flat file database linked list tree or other data structure to store the information. In some implementations the datastore or a portion of the datastore may be distributed across one or more other devices including servers network attached storage devices and so forth.

The datastore may store a portion of the content such as that in the buffer . The datastore may also store one or more of the environment data the repeatability factors or repeatability data . Other data may also be stored such as user preferences account login information and so forth.

The content server may include one or more processors configured to execute one or more stored instructions. The processors may comprise one or more cores. The content server may include one or more I O interface s to allow the processor or other portions of the content server to communicate with other devices. The I O interfaces may comprise I2C SPI USB RS 232 and so forth.

The I O interface s may couple to one or more I O devices . The I O devices may include input devices such as one or more of a keyboard a touch sensor and so forth. The I O devices may also include output devices such as one or more of a display printer and so forth. In some embodiments the I O devices may be physically incorporated with the content server or may be externally placed and communicatively coupled thereto.

The content server may also include one or more communication interfaces . The communication interfaces are configured to provide communications between the content server and other devices such as the media device . The communication interfaces may include wireless local area networks wireless wide area networks and so forth. For example the communication interfaces may include an Ethernet interface which connects to the network .

The content server may also include one or more busses or other internal communications hardware or software that allow for the transfer of data between the various modules and components of the content server .

As shown in the content server includes one or more memories . The memory comprises one or more CRSM. The memory provides storage of computer readable instructions data structures program modules and other data for the operation of the content server .

The memory may include at least one OS module . The OS module is configured to manage hardware resource devices such as the I O interfaces the I O devices the communication interfaces and so forth and provide various services to applications or modules executing on the processors . Also stored in the memory may be the communication module a user interface module the content delivery module and the frame analysis module .

As described above the communication module is configured to establish and support communications between the media device and other devices. The communication module may access the communication interfaces to exchange information. For example the communication module may be configured to stream the content to the media device using the network .

The user interface module is configured to provide a user interface to the user or to the media device . In one implementation the user interface may be a web interface presented via the network and accessible to the users . In another implementation the user interface may comprise an application programming interface API that enables communication such as sending requests for content from the media device to the content server .

As described above the content delivery module is configured to stream the content to one or more of the media devices . The streaming of the content may be initiated by a request from the media device by the content server or another device. For example in some implementations the user may use a third device to initiate streaming from the content server and presentation on the media device .

In one implementation the content server may be configured to provide repeatability data to the media device . In this implementation the content server may execute a frame analysis module configured to generate the repeatability data as described above. Instead of analyzing the video frames A F in the buffer the frame analysis module on the content server may analyze at least a portion of the content . The frame analysis module may be configured to acquire environment data from one or more of the media devices . In some implementations the repeatability data may be generated for a particular media device or a group or bucket of media devices D having one or more similar characteristics.

Other modules may be stored in the memory . For example an authentication module may be configured to authorize delivery of the content to a particular media device .

The memory may also include a datastore to store information. The datastore may use a flat file database linked list tree or other data structure to store the information. In some implementations the datastore or a portion of the datastore may be distributed across one or more other devices including servers network attached storage devices and so forth.

The datastore may store the content for distribution the environment data the repeatability factors the repeatability data or other data . For example the other data may include administrator preferences account information associated with the user and so forth.

Block receives the video frames . These video frames may be received at a data transfer rate . The data transfer rate may vary over time such that different video frames are received at different data transfer rates . For example the media device may receive the content with the communication interface from the content server . The content may be delivered in a compressed or uncompressed format. For example the content may be compressed using the MPEG4 standard. The media device may decode the content to generate the video frames . In one implementation the content may be received by the media device from the content server using a wide area network such as the Internet. In another implementation the content may be received from another media device using a local area network or a personal area network. For example a tablet media device may stream the content to a television media device over a Wi Fi connection.

Block stores the video frames A F in the buffer . As described above the buffer may comprise a dedicated memory device or a location within the memory .

Block determines one or more of the video frames A F in the buffer are repeatable frames . For example the determination may designate as repeatable frames those with little or no movement across two or more video frames . In another example designation as a repeatable frame may be based on comparison of a bit size of the video frame with a threshold size. For example video frames of less than 30 kilobits may be designated as a repeatable frame .

Block presents at least a portion of the video frames A F in the buffer . For example video frames from the buffer may be presented on a display output device coupled to the media device using HDMI . In one implementation the repeated frame may be copied or duplicated in the buffer . In another implementation the presentation module may be configured to read the repeatable frame twice.

Block determines the data transfer rate is below a threshold. The threshold may be based on or associated with the bitrate used to stream the content to the media device . In one implementation as described above with regard to the threshold may be the transfer threshold . The transfer threshold may specify a minimum data transfer rate with the content server to receive video frames in order to maintain presentation. For example due to congestion on the network the data transfer rate may have dropped from 1.6 Mbps to below the 1.5 Mbps transfer threshold necessary to support ongoing presentation of high definition video.

In another implementation as also described above with regard to the threshold may be based on the buffer refill rate and the buffer empty rate. For example the buffer refill rate indicates a number of frames entering the buffer per unit of time and the buffer empty rate indicates a number of frames in the buffer removed from the buffer per unit of time. This threshold may be expressed as a ratio resulting from the buffer refill rate as the dividend and the buffer empty rate as the divisor.

Block presents more than once at least a portion of the repeatable frames in the buffer . This presentation may be based at least in part on the determination by block .

Block receives additional video frames G X . For example even with the diminished data transfer rate the content server may have continued to deliver some of the video frames at a slower rate.

Block determines the data transfer rate has reached or exceeded the transfer threshold . For example the congestion on the network may have subsided and the data transfer rate has returned to 1.6 Mbps above the transfer threshold of 1.5 Mbps.

Based on the data transfer rate block discontinues presentation of the repeatable frames . In some implementations discontinuance may be delayed until the buffer has stored a predetermined number of video frames .

Block accesses a plurality of video frames . For example the video frames A F may be stored in the buffer on the media device .

Block accesses metadata associated with the video frames A F . For example the metadata may be stored in the memory the buffer or both.

Block accesses the environment data . As described above the environment data may include information associated with one or more of the media devices the content server networking devices and so forth.

Block accesses one or more repeatability factors . As described above with respect to the repeatability factors may include the frame size threshold the pixel change threshold the moved object threshold the motion vector threshold the frame rate threshold the display resolution threshold the viewing distance threshold and so forth.

Block designates one or more of the plurality of video frames A F as repeatable frames or non repeatable frames . The designation may be based at least in part on analysis of the one or more repeatability factors with respect to one or more of the metadata the environment data or other information.

The environment data may include one or more of native resolution of an output display device physical viewing distance between a user and the output device or maximum data transfer rate .

Block stores the designation of the video frames A F as repeatability data . For example the designations may be embedded or encoded within the video frames or stored as a separate lookup file.

Block accesses a plurality of video frames . For example the video frames A F may be stored in the buffer on the media device .

Block accesses a frame size threshold . As described above with regard to the frame size threshold specifies a size of the video frame in terms of bits bytes a dimensionless value a relative value and so forth. The size of the video frame indicates a quantity of data that the video frame will use such as when stored in CRSM or transmitted along the network . In one implementation the frame size threshold may be specified in bits bytes kilobytes and so forth. In another implementation the frame size threshold may be relative to other video frames in the buffer . For example the frame size threshold may indicate a percentage threshold percentile threshold or count of video frames . Continuing the example the frame size threshold may specify the decile of video frames having the smallest frame sizes in the buffer .

Block designates as repeatable frames the video frames A F having a size less than or equal to the frame size threshold . For example the frame size threshold may specify 240 kilobits and video frames that have a frame size of less than 240 kilobits may be designated as repeatable frames . In situations where the video frames are compressed the size of the video frames may be a indicative of whether the image in the video frame varies with respect to an earlier or later video frame X 1 or X 2 . For example a set of video frames for a still scene with little or no changes may be very small compared to a set of video frames for a scene with a person juggling.

Block designates as non repeatable frames the video frames A F having a size equal to or greater than the frame size threshold . Continuing the example above those video frames have a size of 408 kilobits may be designated as non repeatable frames as they are greater than the threshold of 240 kilobits. The non repeatable frames may be those associated with portions of a scene in which objects are noticeably moving color in the image changes quickly and so forth. The non repeatable frames are those for which repeated presentation may result in a negative user experience.

Block stores the repeatability data comprising the designation of the repeatable frames the non repeatable frames or both. For example the repeatability data may designate those video frames that are repeatable frames . The repeatability data may then be used by the presentation module to determine which of the video frames A F in the buffer to present more than once.

Block accesses a plurality of video frames . For example the video frames A F may be stored in the buffer on the media device . In another example the video frames in the content may be stored in the memory of the content server .

Block determines one or more of the video frames are repeatable frames or are non repeatable frames . As described above the determination may include accessing one or more repeatability factors and designating one or more of the plurality of video frames as repeatable frames based at least in part on the one or more repeatability factors .

Block generates the repeatability data . As described above the repeatability data comprises information designating the repeatable frames the non repeatable frames or both.

Block sends at least a portion of the repeatability data to another device. For example the content server may send the repeatability data to the media device using one of the communication interfaces . In another example one media device may send the repeatability data to another media device using one of the communication interfaces .

The repeatability data may be provided as a separate file such as within the content . In another implementation the repeatability data may be embedded within the one or more of the video frames . For example the repeatability data may be included in compression information associated with a video frame encoded within a pixel and so forth.

The media device may receive the repeatability data . The presentation module may then use the repeatability data to present on a display output device at least a portion of the repeatable frames more than once. For example the repeatability data may be embedded within the video frames . The presentation module may be configured to recover this embedded information and duplicate the presentation of a video frame based on this information. Where the repeatability data is provided the media device may omit the frame analysis module .

Those having ordinary skill in the art will readily recognize that certain steps or operations illustrated in the figures above can be eliminated or taken in an alternate order. Moreover the methods described above may be implemented as one or more software programs for a computer system and are encoded in a computer readable storage medium as instructions executable on one or more processors.

Embodiments may be provided as a computer program product including a non transitory computer readable storage medium having stored thereon instructions in compressed or uncompressed form that may be used to program a computer or other electronic device to perform processes or methods described herein. The computer readable storage medium can be any one of an electronic storage medium a magnetic storage medium an optical storage medium a quantum storage medium and so forth. For example the computer readable storage media may include but is not limited to hard drives floppy diskettes optical disks read only memories ROMs random access memories RAMs erasable programmable ROMs EPROMs electrically erasable programmable ROMs EEPROMs flash memory magnetic or optical cards solid state memory devices or other types of physical media suitable for storing electronic instructions. Further embodiments may also be provided as a computer program product including a transitory machine readable signal in compressed or uncompressed form . Examples of machine readable signals whether modulated using a carrier or not include but are not limited to signals that a computer system or machine hosting or running a computer program can be configured to access including signals transferred by one or more networks. For example the transitory machine readable signal may comprise transmission of software by a network such as the Internet.

Separate instances of these programs can be executed on or distributed across separate computer systems. Thus although certain steps have been described as being performed by certain devices software programs processes or entities this need not be the case and a variety of alternative implementations will be understood by those having ordinary skill in the art.

Additionally those having ordinary skill in the art will readily recognize that the techniques described above can be utilized in a variety of devices environments and situations. Although the present disclosure is written with respect to specific embodiments and implementations various changes and modifications may be suggested to one skilled in the art and it is intended that the present disclosure encompass such changes and modifications that fall within the scope of the appended claims.

