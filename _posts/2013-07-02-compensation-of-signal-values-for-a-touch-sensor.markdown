---

title: Compensation of signal values for a touch sensor
abstract: An apparatus includes a data conditioning module configured to translate each of a plurality of signal strength values to a compensated signal value, where the compensated signal value is a function of its corresponding signal strength value.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09007322&OS=09007322&RS=09007322
owner: Cypress Semiconductor Corporation
number: 09007322
owner_city: San Jose
owner_country: US
publication_date: 20130702
---
This application is a continuation of U.S. patent application Ser. No. 12 508 487 filed Jul. 23 2009 which claims the benefit of U.S. Provisional Application No. 61 083 093 filed Jul. 23 2008 all of which are herein incorporated by reference in their entirety.

This disclosure relates to the field of user interface devices and in particular to compensation for inputs detected at a touch sensing surface.

Computing devices such as notebook computers personal data assistants PDAs kiosks and mobile handsets have user interface devices which are also known as human interface devices HID . One user interface device that has become more common is a touch sensor pad also commonly referred to as a touchpad . A basic notebook computer touch sensor pad emulates the function of a personal computer PC mouse. A touch sensor pad is typically embedded into a PC notebook for built in portability. A touch sensor pad replicates mouse X Y movement by using two defined axes which contain a collection of sensor elements that detect the position of a conductive object such as a finger. Mouse right left button clicks can be replicated by two mechanical buttons located in the vicinity of the touchpad or by tapping commands on the touch sensor pad itself. The touch sensor pad provides a user interface device for performing such functions as positioning a pointer or selecting an item on a display. These touch sensor pads may include multi dimensional sensor arrays for detecting movement in multiple axes. The sensor array may include a one dimensional sensor array detecting movement in one axis. The sensor array may also be two dimensional detecting movements in two axes.

Another user interface device that has become more common is a touch screen. Touch screens also known as touchscreens touch panels or touchscreen panels are transparent display overlays which are typically either pressure sensitive resistive or piezoelectric electrically sensitive capacitive acoustically sensitive surface acoustic wave SAW or photo sensitive infrared . The effect of such overlays allows a display to be used as an input device removing the keyboard and or the mouse as the primary input device for interacting with the display s content. Such displays can be attached to computers or as terminals to networks. There are a number of types of touch screen technologies such as optical imaging resistive surface acoustical wave capacitive infrared dispersive signal piezoelectric and strain gauge technologies. Touch screens have become familiar in retail settings on point of sale systems on ATMs on mobile handsets on kiosks on game consoles and on PDAs where a stylus is sometimes used to manipulate the graphical user interface GUI and to enter data. A user can touch a touch screen or a touch sensor pad to manipulate data. For example a user can apply a single touch by using a finger to press the surface of a touch screen to select an item from a menu.

The following description sets forth numerous specific details such as examples of specific systems components methods and so forth in order to provide a good understanding of several embodiments of the present invention. It will be apparent to one skilled in the art however that at least some embodiments of the present invention may be practiced without these specific details. In other instances well known components or methods are not described in detail or are presented in a simple block diagram format in order to avoid unnecessarily obscuring the present invention. Thus the specific details set forth are merely exemplary. Particular implementations may vary from these exemplary details and still be contemplated to be within the spirit and scope of the present invention.

In applications where an electronic capacitive touch sensor system allows a user to manipulate a cursor or other objects on a display accurate centroid calculations allow the cursor to accurately represent the position and motion of an object such as a finger or stylus on the touch sensor. A centroid is a location that represents the center of mass or geometric center of an object at a touch sensing surface. In one embodiment a centroid may be represented as coordinates such as X Y coordinates in a Cartesian coordinate system. In embodiments wherein the capacitive touch sensor system measures the self capacitance of the sensor elements disposed along the X and Y axes the center of mass for a touch is determined by the separate calculation of a 1 dimensional 1D centroid for the X axis sensor elements and a 1D centroid for the Y axis sensor elements wherein the intersection of the projection of these two 1D centroids into the sensor array determines the actual 2 dimensional 2D centroid of the touch. In embodiments wherein the capacitive touch sensor system measures the mutual capacitance at the intersections of the sensor elements disposed along the X and Y axes the center of mass for a touch is determined by a direct calculation of a 2D centroid. The accurate detection and calculation of centroid positions may also be important in applications where motion of a finger or stylus is tracked such as drawing or handwriting recognition programs.

In one embodiment a capacitive touch sensor system may exhibit error in determining centroid position or movement due to the spacing and shape of adjacent sensor elements and the non linear response of each sensor element s signal to the position of a finger or stylus. This error may affect the measurement and tracking of an object moving across the touch sensing surface or a position of an object located on the touch sensing surface.

In one embodiment the amount of error caused by the pitch i.e. center to center spacing and response of the sensor elements can be decreased by translating the signal values measured at each sensor element to a corresponding compensated signal value before performing a centroid calculation. In one embodiment the sensor data is translated using a Gaussian based compression pattern to smooth out the signal variance between sensor elements. The translation may be effected using a lookup table of pre computed values which can be significantly faster than direct calculation of the complex numbers when fitting to a normal distribution.

Thus this translation scheme may effectively reduce irregularities in a calculated position or path of motion of an object at the touch sensing surface by dampening the response of the signal strength values of the sensor elements while simultaneously decreasing processing time for each measured value.

The translation of sensor data may also be combined with other calculations for determining a centroid position such as a linear expansion to correlate the sensor elements to other units such as pixel spacing in a display or physical distance e.g. mm inches .

In one embodiment the translation scheme may replace computation intensive filtering and mapping such as the use of Kalman filters i.e. an efficient recursive filter that estimates the state of a linear dynamic system from a series of noisy measurements . The reduction of computation may improve performance of low powered processors such as those used in many handheld or battery operated devices.

In one embodiment the sensor array includes sensor elements N where N is a positive integer that are disposed as a two dimensional matrix also referred to as an XY matrix . The sensor array is coupled to pins N of the processing device via an analog bus transporting one or more signals. In this embodiment each sensor element N is represented as a capacitor. The self capacitance of each sensor element of the sensor array is measured by a capacitance sensor in the processing device .

In one embodiment the capacitance sensor may include a relaxation oscillator a sigma delta modulator or other means to convert a capacitance into a measured value. The capacitance sensor may also include a counter or timer to measure the relative or absolute capacitance of each sensor element. The capacitance sensor may further include software components to convert the count value e.g. capacitance value into a sensor element detection decision also referred to as switch detection decision or relative magnitude.

It should be noted that there are various known methods for measuring self capacitance such as current versus voltage phase shift measurement resistor capacitor charge timing capacitive bridge divider charge transfer successive approximation sigma delta modulators charge accumulation circuits field effect frequency shift or the like. It should be noted however that instead of evaluating the raw counts relative to a threshold the capacitance sensor may be evaluating other measurements to determine the user interaction. For example in the capacitance sensor having a sigma delta modulator the capacitance sensor is evaluating the ratio of pulse widths of the measurement instead of the raw counts being over a certain threshold.

In one embodiment the sensor array includes transmit sensor elements T T M where M is a positive integer that are disposed across one axis of a two dimensional sensor matrix also referred to as an XY matrix . Additionally the sensor array includes receive sensor elements. R R N where N is a positive integer that are disposed across the axis of a two dimensional sensor matrix which is orthogonal to the transmit sensor elements. The receive sensor elements in array are coupled to pins N of the processing device via an analog bus not shown transporting one or more signals. In the embodiment shown in each receive sensor element R R N is represented as a horizontal rectangle and each transmit sensor element T T M is represented by a vertical rectangle. The mutual capacitance of each intersection of a transmit sensor element and receive element of the sensor array is measured by a capacitance sensor in the processing device . Because each intersection of transmit and receive sensor elements may be separately measured for a change in mutual capacitance these intersections may also be identified as sensor elements.

In one embodiment the capacitance sensor may include a signal generator that may provide a modulation source signal for driving charge through the mutual capacitors located in the sensor array said modulation source directed to one or more of the transmit electrodes T T M through TX multiplexor . Capacitance sensor may also include an RX multiplexor which may direct the charge coupled onto the one or more of the N receive electrodes R R N into any of a current conveyor operational amplifier transimpedance amplifier current mirror or other method of integrating the charge. Said charge may then be measured by a relaxation oscillator a sigma delta modulator or other means to convert a charge into a measured value. The capacitance sensor may also include a counter or timer to measure the relative or absolute capacitance of each sensor element intersection. The capacitance sensor may further include software components to convert the count value e.g. mutual capacitance value into a sensor element detection decision also referred to as switch detection decision or relative magnitude.

It should be noted that there are various known methods for measuring mutual capacitance such as single ended and differential charge accumulation charge transfer voltage differential successive approximation sigma delta modulators field effect frequency shift or the like. It should be noted however that instead of evaluating the raw counts relative to a threshold the capacitance sensor may be evaluating other measurements to determine the user interaction. For example in the capacitance sensor having a sigma delta modulator the capacitance sensor is evaluating the ratio of pulse widths of the measurement instead of the raw counts being over or under a certain threshold.

In one embodiment the processing device s and further includes a data conditioning module and respectively . Operations of the data conditioning module s may be implemented in firmware alternatively it may be implemented in hardware or software. In one embodiment the data conditioning module s is configured to process the raw signal strength data from the capacitance sensor . For example the data conditioning module may perform filtering maxima search and centroid calculation based on the signal strength data. The data conditioning module s may also include or have access to one or more lookup tables that stores pre calculated compensation values. The data conditioning module s may be configured to query the lookup table with a signal strength value to obtain a compensation value corresponding to the signal strength value. In one embodiment the data conditioning module receives signals from the capacitance sensor and determines the state of the sensor array such as whether one or more conductive objects e.g. a finger are detected on or in proximity to the sensor array e.g. determining the presence of the one or more conductive objects and wherein said conductive object is detected on the sensor array tracking the motion of the conductive object or the like.

In another embodiment instead of performing the operations of the data conditioning module in the processing device the processing device may send the raw data or partially processed data to the host . The host as illustrated in may include decision logic that performs some or all of the operations of the data conditioning module . Operations of the decision logic may be implemented in firmware hardware and or software. The host may include a high level Application Programming Interface API in applications that perform routines on the received data such as compensating for sensitivity differences other compensation algorithms baseline update routines start up and or initialization routines interpolation operations scaling operations or the like. The operations described with respect to the data conditioning module may be implemented in the decision logic the applications or in other hardware software and or firmware external to the processing device . In some other embodiments the processing device is the host .

In another embodiment the processing device may also include a non capacitance sensing actions block . This block may be used to process and or receive transmit data to and from the host . For example additional components may be implemented to operate with the processing device along with the sensor array e.g. keyboard keypad mouse trackball LEDs displays or the like .

The processing device may reside on a common carrier substrate such as for example an integrated circuit IC die substrate a multi chip module substrate or the like. Alternatively the components of the processing device may be one or more separate integrated circuits and or discrete components. In one embodiment the processing device may be a Programmable System on a Chip PSoC processing device developed by Cypress Semiconductor Corporation San Jose Calif. In one embodiment the processing device may be capable of both sensing self and mutual capacitance and thus implement both the capabilities of devices and . Alternatively the processing device may be one or more other processing devices known by those of ordinary skill in the art such as a microprocessor or central processing unit a controller special purpose processor digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or the like. In an alternative embodiment for example the processing device may be a network processor having multiple processors including a core unit and multiple micro engines. Additionally the processing device may include any combination of general purpose processing device s and special purpose processing device s .

In one embodiment the electronic system is implemented in a device that includes the touch sensing surface as the user interface such as handheld electronics portable telephones cellular telephones notebook computers personal computers personal data assistants PDAs kiosks keyboards televisions remote controls monitors handheld multi media devices handheld video players gaming devices control panels of a household or industrial appliances or the like. Alternatively the electronic system may be used in other types of devices. It should be noted that the components of electronic system may include all the components described above. Alternatively electronic system may include only some of the components described above or include additional components not listed herein.

When the sensor elements in sensor array are sensed for mutual capacitance using the circuits and methods described relative to the sensor array can be used to detect a location of multiple conductive objects on a touch sensing surface by measuring capacitances associated with each intersection of the rows and columns of sensor elements in sensor array . Based on these measured capacitances logic in the processing device or the host such as the data conditioning module or the decision logic may calculate one or more centroids for objects causing changes in capacitance at the touch sensing surface.

A centroid may be considered as the center of mass for an object detected at the touch sensing surface such as a finger or stylus. The centroid can be used to indicate the location of the object at the touch sensing surface and may be transmitted to a computer system for processing. For example the centroid may be used to correlate the location of the object at the touch sensing surface with a location of a cursor on a display.

In one embodiment computing each centroid may include filtering of raw data from the sensor elements establishing a baseline based on the filtered historical or temporal data finding local maxima in the data and determining coordinates of the centroid.

When an M column by N row M N matrix of touch sensor array is evaluated for touches using self capacitance M N raw data conversions i.e. measurements are performed. Each conversion generates a value that represents the self capacitance for each row and column sensor element in the touch sensor array for example row and column of array as illustrated in . When an M column by N row M N matrix of touch sensor array is evaluated for touches using mutual capacitance M N raw data conversions are performed. Each conversion generates a value that represents the mutual capacitance for each row and column crossing in the touch sensor array for example intersection of row and column of array as illustrated in . In one embodiment these raw data values are sent to host processor for processing. Alternatively the processing may be performed by data conditioning module . Processing the raw data may include filtering to minimize noise. In one embodiment such filtering may be achieved by one or more successive filters including but not limited to a median filter and IIR filter and a jitter filter.

In one embodiment the filtered data may further be processed to establish a baseline and a touch signal calculation. is a graph illustrating a self capacitance signal measurement on a single sensor element row or column and a baseline for the signal measurement. A baseline or reference may be tracked such that the processing device of can determine when a touch is present e.g. finger on sensor element by comparing the counts representing the capacitance change due to the presence of a conductive object such as user s finger with the baseline . The baseline count value may be the average count value that results from a sensor element when no input is present e.g. no finger or other conductive object present on the sensor element .

In one embodiment evaluation of the sensor element signal may provide a difference count of the count value that exceeds the noise threshold . The noise threshold may be set so that the processing device can discriminate between noise and an input such as a finger touch on a sensor element. For example without the presence of a finger on a sensor the baseline may be approximately 2030 counts. When a finger is present the count value goes up for example to 2095 and thus the difference count is 45 . The count value of 2095 is above noise threshold and is therefore interpreted as an input.

In one embodiment the baseline value and the noise threshold are periodically updated to account for changes in the system such as increased or decreased noise levels humidity aging or changes in baseline capacitance of the sensor.

The following discussion on local maxima search is made in reference to A and B. illustrates rows and columns that are evaluated for a local maxima search and centroid calculation according to one embodiment of the present invention. illustrates cells used for a local maximum search and centroid calculation according to one embodiment of the present invention. illustrates a method for evaluating touch positions on a touch sensor matrix based on the calculation of a centroid in the vicinity of each local sensor maxima according to one embodiment.

In operation of the sensor elements in sensor array are scanned. In one embodiment the scanning may involve the selecting and measuring the self capacitance of each horizontal and vertical sensor element in array .

In another embodiment the scanning may involve selecting each combination of horizontal and vertical sensor elements to measure the mutual capacitance at each intersection of sensor elements in the sensor array . In order to simplify the associated data processing the signal array which may include capacitance measurements for each intersection may be treated as a two dimensional matrix an example of which is shown in . Rows and columns of this matrix correspond to the physical rows and columns of the sensor array e.g. row and column of sensor matrix where the intersections are located.

At block each capacitance value that exceeds a finger presence threshold a value that when exceeded indicates that a finger or other object is detected at the sensor element is compared with all adjacent elements.

For example when sensor matrix is scanned for self capacitance and row is detected as having a finger or other conductive object present the capacitance value of row is compared to those of rows and to determine if it is a maximum. Likewise when sensor matrix is scanned for mutual capacitance with the capacitance values stored in a matrix table like the example shown in cell of may correspond to intersection of . Where a finger is detected as present and the finger presence threshold is exceeded the capacitance value of cell is then compared to the capacitance values of all adjacent cells e.g. .

If the measured capacitance value stored in cell is greater than all adjacent cells then the row and column intersection of cell e.g. intersection of is marked as a local maximum. It should be noted that the local maxima search operation may be performed using other local maximum search techniques for example Hill Climbing and Gradient Descent maxima search methods.

In one embodiment after a local maximum is found any centroid algorithm may used for finger position estimation. In one embodiment all cells or row and column sensors when evaluated for self capacitance adjacent to a local maximum are included into the centroid calculation of operation . For example with reference to cell where the local maximum was found and cells which are adjacent to cell are included in the centroid calculation. The centroid calculation may be determined according to Equations 1 and 2 below 

In Equations 1 and 2 Kx Ky may be determined depending on a resolution such as a screen resolution of a display. For example for a screen resolution of 320 480 pixels 

In one embodiment operation may calculate multiple centroids to determine multiple finger positions on sensor array using cells in the vicinity of the multiple found local maxima. According to operation an additional jitter filter may be used for each Xc and Yc value according to one embodiment.

In one embodiment a capacitive touch panel includes an array of capacitive sensor elements arranged in an X axis and a Y axis. The number and spacing of the capacitive sensor elements depends on the physical dimensions of the sensors screen size and the number of available inputs to the capacitance sensing device or other ASIC which is tasked with processing the sensor data.

However in one embodiment the shape and spacing of sensors can cause irregularities in reported position i.e. centroid position as a finger is moved continuously across a succession of sensor elements. The irregularities may cause a corduroy pattern to be reported from what was otherwise a smooth linear path of an object across the touch sensing surface where the smooth path may be interpreted as a wavy motion.

As the finger is moved from immediately over the sensor generating signal Sto a location between sensor Sand S the distribution of the measured signal will skew as shown in . Here pointer object is between Sand S causing signals that are approximately equal from these adjacent sensors. When these measured capacitance values are used in a centroid calculation without modification non linear touch position results are passed to the host and used to control a cursor on a display. This results in a pitch velocity effect where a lag in detected position over time is followed by an acceleration of the detected position over time.

Referring to the pitch represents the spacing between sensors which are identified as S S and S. While a pointer object is centered over one sensor element the inter sensor signal drop is the difference in detected signal strength values between the sensor element and an adjacent sensor element. In one embodiment the inter sensor signal drop is caused by the sensor element pitch. In another embodiment the inter sensor signal drop is caused by the shape and pitch of the sensor elements. The greater the pitch the more pronounced will be the signal drop between sensors. The dynamic range is the range of possible signal strength levels that can be generated by the sensor elements in response to a conductive object.

Signal curves and correspond to sensor elements S S and S respectively. The amount of overlap between signal curves and depends on the shape of the signal roll off and the pitch . The overlap indicates the signal strength value that can be expected from a sensor when a pointer object is directly over another sensor. For example if the pointer object is over sensor element S the full signal strength is generated at sensor element S while the sensor element Sgenerates a signal strength value that is an inter sensor signal drop less than the full signal strength. Accordingly signal curve has dropped by the inter sensor signal drop at sensor S. Sensor element Sgenerates a signal strength value that is approximately zero according to signal curve .

In one embodiment an approach for reducing the irregularities caused by sensor element pitch that affect centroid calculation includes pre conditioning the signal strength data generated by the sensor elements. This approach reduces pitch effects by flattening out the signal drop that is seen between sensors without injecting any loss of resolution in the computation. Thus with the flattened signal the signal strength caused by a pointer object directly over a sensor element is not disproportionately high as compared to when the pointer object is not directly over the sensor element. In one embodiment a Gaussian based compression pattern may be applied against the sensor data to smooth out the variance between sensors. To reduce computation requirements this may be applied using a lookup table of pre computed values.

With reference to the original signal is defined by the original signal strength values from each of the sensor elements S S and S. In one embodiment these values have already been filtered or preprocessed for resolution debouncing positional jitter or hysteresis. According to the translation scheme the signal strength values of the original signal are translated to compensated signal values that define compressed signal . For example signal strength value is translated to compensated signal value .

In one embodiment the original signal strength values are compressed depending on their relationship to the peak sensor as defined by the compression function. For instance where C is the generator constant for the compression function each of the original signal strength values is multiplied by 1 C to flatten the original signal to the compensated signal value . In one embodiment the value of C may be selected for a particular material from which the sensor element is made or for a particular application for which the touch sensor is being used.

In one embodiment this compression function is used to generate pre computed values that are stored in a lookup table. Each of a number of possible values for the signal strength can then be used to lookup the corresponding pre computed value.

As with the translation of the original signal to the compressed signal the translation of original signal to widened signal can be performed using a lookup table of pre computed values. In one embodiment the table values are pre computed to span the dynamic range of the sensor inputs.

To avoid losing significant bits during compression a linear expansion may also be included in the table lookup. In an embodiment where the sensor matrix is measured using self capacitance the signal strength values from the sensor elements may be used to interpolate the location of a centroid to a higher resolution than the two axial projections of the M and N sensor measurements. In an alternate embodiment where the sensor matrix is measured using mutual capacitance the signal strength values from the sensor elements may be used to interpolate the location of a centroid to a higher resolution than the grid formed by the M N sensor measurements. For example the signal strength values may be used to determine a centroid location for a screen having 320 480 pixels where M and N are less than 320 or 480. Such a centroid calculation or interpolation scheme may avoid computationally injecting resolution loss by first performing a pre scaling of each signal level with a screen pixels per sensor constant. The resulting centroid is a position value which is reported in screen pixels . Alternately said pre scaling may be based on units of millimeters inches or other units of measure.

Compared to Equations 1 and 2 Equations 3 and 4 below include a term for a multiplier that is a function of the signal strength value Signal k m measured at an intersection of sensor elements k and m. These multipliers are expressed as f Signal k m and g Signal k m in Equations 3 and 4 below.

The functions f Signal k m and g Signal k m are multipliers for translating signal strength values such as signal strength value of to compensated signal values such as signal value . In one embodiment f Signal k m and g Signal k m apply the translation to X coordinate and the Y coordinate of the centroid respectively. In one embodiment the functions f Signal k m and g Signal k m may be different functions. Alternatively they may be identical functions.

As previously discussed Kx Ky may be determined depending on a resolution such as a screen resolution of a display. For example for a screen resolution of 320 480 pixels 

In Equations 3 and 4 the functions f Signal k m and g Signal k m can be combined with Kx and Ky in a lookup table. For example the compensation values stored in the lookup table may be Xcomp and Ycomp where Xcomp k m Kx f Signal k m and Ycomp k m Ky g Signal k m . Thus in one embodiment for an intersection between sensor elements k and m the lookup table will respond to an signal strength value of Signal k m with Xcomp or Ycomp depending on whether Xc or Yc is being determined respectively.

Compared to Equations 1 and 2 the determination of Xcomp and Ycomp using the lookup table is the only significant addition to the computation. The use of a lookup table is less computationally intensive than other available methods such as the use of Kalman Filters or similar filters which may involve processing via multiplication matrices.

The lookup table may also be relatively small. A read only memory ROM table for a signal resolution of 2may occupy at most 8 kilobytes of ROM. In one embodiment where the dynamic range of the sensor elements is represented using 6 bits a relatively small lookup table may be used. This enables the use of small tables that would fit well in a small processing platform.

In one embodiment a Python script or other software tool may be used to generate a lookup table that is customized for a particular array of sensor elements and display resolution.

Centroid position calculation process begins at block where a lookup table is generated using Kx Ky f Signal and g Signal . For example the lookup table may be generated using a script or other process executed by processing device or host . Alternatively the lookup table may be generated in a separate computer system. In one embodiment the lookup table correlates possible signal strength values that may be generated by sensor elements with compensation values Xcomp and Ycomp where Xcomp k m Kx f Signal k m and Ycomp k m Ky g Signal k m for a signal strength value Signal k m that is measured at the intersection of sensor element k and sensor element m of an array of sensor elements. From block the process continues at block .

At block signal strength values are measured at the sensor elements of a touch sensor. For example the signal strength value may be a count value or a digital code that represents a self capacitance of the sensor element or a mutual capacitance between two sensor elements. Since the capacitance of a sensor element may be affected by the proximity of a pointer object to the sensor element the signal strength value indicates whether the pointer object is present at the touch sensor. From block the process continues at block .

At block the signal strength values are received from the capacitance sensor. In one embodiment the signal strength values are transmitted from capacitance sensor to data conditioning module . In an alternative embodiment where the process is performed by a host the operations of block correspond to transmitting the signal strength values to the host . From block the process continues at block .

At block the lookup table is queried to determine a compensated signal value corresponding to each signal strength value. In one embodiment the lookup table returns compensation values Xcomp and Ycomp in response to receiving a signal strength value. Thus according to block the lookup table is queried with a signal strength value from a plurality of sensor elements and returns compensation values corresponding to their associated signal strength values. From block the process continues at block .

At block the signal strength values are translated into compensated signal values. In one embodiment the compensation values Xcomp and Ycomp do not include factors Kx and Ky and the signal strength values are translated to compensated signal values in a separate operation from the expansion of the sensor element signal values to a pixel coordinate system. From block the process continues at block . Alternatively the operations of block may be combined with the operations of block .

At block a centroid position expressed as coordinates in a pixel coordinate system is calculated based on the compensated signal values. For instance the compensation values Xcomp and Ycomp of block are used with Equations 3 and 4 to determine the coordinates of the centroid in a pixel coordinate system. In one embodiment the pixel coordinate system identifies locations of pixels of a display screen. Alternatively the coordinate system may be based on units other than pixels. From block the process continues at block .

At block the host updates a cursor position on a display screen according to the centroid location calculated at block . In one embodiment where the centroid location is expressed as pixel coordinates in a pixel coordinate system that corresponds to the display screen the cursor is displayed at the location on the display screen specified by the pixel coordinates of the centroid. From block the process returns to block where the signal strength values are measured at the sensor elements.

Thus blocks and may be repeated to continuously update the cursor position on the display screen based on the calculated centroid position from a position of a pointer object at the touch sensing surface. In alternative embodiments the centroid location may be used to update or control other devices aside from displays such as actuators speakers illuminating devices or any other device that can be controlled with input from a touch sensing surface.

Embodiments of the present invention described herein include various operations. These operations may be performed by hardware components software firmware or a combination thereof. As used herein the term coupled to may mean coupled directly or indirectly through one or more intervening components. Any of the signals provided over various buses described herein may be time multiplexed with other signals and provided over one or more common buses. Additionally the interconnection between circuit components or blocks may be shown as buses or as single signal lines. Each of the buses may alternatively be one or more single signal lines and each of the single signal lines may alternatively be buses.

Certain embodiments may be implemented as a computer program product that may include instructions stored on a computer readable medium. These instructions may be used to program a general purpose or special purpose processor to perform the described operations. A computer readable medium includes any mechanism for storing or transmitting information in a form e.g. software processing application readable by a machine e.g. a computer . The computer readable storage medium may include but is not limited to magnetic storage medium e.g. floppy diskette optical storage medium e.g. CD ROM magneto optical storage medium read only memory ROM random access memory RAM erasable programmable memory e.g. EPROM and EEPROM flash memory or another type of medium suitable for storing electronic instructions. The computer readable transmission medium includes but is not limited to electrical optical acoustical or other form of propagated signal e.g. carrier waves infrared signals digital signals or the like or another type of medium suitable for transmitting electronic instructions.

Additionally some embodiments may be practiced in distributed computing environments where the computer readable medium is stored on and or executed by more than one computer system. In addition the information transferred between computer systems may either be pulled or pushed across the transmission medium connecting the computer systems.

Although the operations of the method s herein are shown and described in a particular order the order of the operations of each method may be altered so that certain operations may be performed in an inverse order or so that certain operation may be performed at least in part concurrently with other operations. In another embodiment instructions or sub operations of distinct operations may be in an intermittent and or alternating manner.

In the foregoing specification the invention has been described with reference to specific exemplary embodiments thereof. It will however be evident that various modifications and changes may be made thereto without departing from the broader spirit and scope of the invention as set forth in the appended claims. The specification and drawings are accordingly to be regarded in an illustrative sense rather than a restrictive sense.

