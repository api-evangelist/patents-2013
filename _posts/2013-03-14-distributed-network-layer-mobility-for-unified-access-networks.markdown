---

title: Distributed network layer mobility for unified access networks
abstract: The present disclosure discloses a method and network device providing distributed network layer mobility for unified access networks. The method eliminates the need for a secure tunnel between a home network device and a foreign network device when a client roams from the home network device to the foreign network device. The disclosed network device receives an association request from a client device in a wireless network; identifies a first wireless virtual local area network (VLAN) that the client device is assigned to; and, allows traffic to or from the client device to be transmitted via the network device on the first wireless VLAN, wherein traffic on at least a second wireless VLAN is transmitted via the network device and segregated from the traffic on the first wireless VLAN.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09408061&OS=09408061&RS=09408061
owner: ARUBA NETWORKS, INC.
number: 09408061
owner_city: Sunnyvale
owner_country: US
publication_date: 20130314
---
The present disclosure relates to wireless mobility. In particular the present disclosure relates to distributed network layer mobility for unified access networks.

Most of the current network layer e.g. Layer 3 in OSI model mobility solutions in controller less networks involve tunneling of client traffic including broadcast traffic from a foreign network to a home network for example through a GRE tunnel. Thus the tunneling of client traffic generates unnecessary load on a switching network and the participating access points. The problem is aggravated by the increase in the total number of access points and the total number of supported sub networks as the wireless network scales up. This is because when more wireless local area network WLAN clients roam from a home network to a foreign network more tunnels would need to be created between the home network and the foreign network which generates additional WLAN network load caused by traffic originated from or destined to the roaming clients in the foreign network. With the increased prevalence of wireless access in today s mobile world it is important to holistically reduce the total load on components of the switching network.

In the following description several specific details are presented to provide a thorough understanding. While the context of the disclosure is directed to home VLAN identification for roaming clients one skilled in the relevant art will recognize however that the concepts and techniques disclosed herein can be practiced without one or more of the specific details or in combination with other components etc. In other instances well known implementations or operations are not shown or described in details to avoid obscuring aspects of various examples disclosed herein. It should be understood that this disclosure covers all modifications equivalents and alternatives falling within the spirit and scope of the present disclosure.

Embodiments of the present disclosure relate to wireless mobility. In particular the present disclosure relates to distributed network layer mobility for unified access networks.

Unlike conventional layer 3 mobility solutions in controller less networks that involve tunneling of client traffic including broadcast traffic embodiments of the present disclosure eliminate the need for a secure tunnel between a home network device and a foreign network device when a client roams from the home network device to the foreign network device. Therefore embodiments of the present disclosure reduce the unnecessary traffic load on the switching network as well as the participating access points.

With the solution provided herein a network device receives an association request from a client device in a wireless network identifies a first wireless virtual local area network VLAN that the client device is assigned to and allows traffic to or from the client device to be transmitted via the network device on the first wireless VLAN wherein traffic on at least a second wireless VLAN is transmitted via the network device and segregated from the traffic on the first wireless VLAN.

In some embodiments both the first wireless VLAN and the second wireless VLAN are statically pre configured to be supported by the network device. In other embodiments the first wireless VLAN is dynamically enabled in response to the client device roaming from its home network device to associate with the network device.

In some embodiments the disclosed network device also disallows traffic on the first wireless VLAN if there is no active client device assigned to the first wireless VLAN is actively associated with the network device. Furthermore in response to identifying the first wireless VLAN the disclosed network device may send a message to an uplink network switching device to notify the uplink network switching device to allow traffic on the first wireless VLAN to be transmitted via the port that the network device is connected to.

In some embodiments the first wireless VLAN is identified based on client history including a probable location of the client device when the client device is connected to the wireless network. In some embodiments the first wireless VLAN is assigned based on a response message from a wireless network authentication server.

Network switch and or is a computer networking device that connects network segments or network devices. Network switch and or may include a multi port network bridge that processes and routes data at the data link layer e.g. layer 2 of the OSI model or switches that additionally process data at the network layer e.g. layer 3 of the OSI model . Moreover access point and or generally refers to a network device that allows wireless clients to connect to a wired network.

Furthermore core network switch can be connected to router which can forward traffic to and receive traffic from Internet. Router generally is a network device that forwards data packets between different networks and thus creating an overlay internetwork. A router is typically connected to two or more data lines from different networks. When a data packet comes in one of the data lines the router reads the address information in the packet to determine its destination. Then using information in its routing table or routing policy the router directs the packet to the next different network. A data packet is typically forwarded from one router to another router through the Internet until the packet gets to its destination.

Authentication server can optionally be configured to police network traffic to from Internet. In some embodiments security policies can be configured at authentication server to dictate the network access protocols and applications that are permitted or denied as well as levels of network services that are provided. Such security policies can be actively enforced in a mobile environment with policies enforced upon mobile clients as they roam within one or more mobility domains in wireless networks.

Assuming that in core network switch supports virtual local area networks VLANs V V V and V. Further network switch A which serves as an access switch for access points and supports VLANs V and V. Moreover network switch B which serves as an access switch for access points and supports VLANs V and V.

For illustration purposes only assuming that access point and access point are configured with both V and V whereas V is the management or native VLAN for transmitting control traffic e.g. via a wired interface and V is the SSID VLAN for transmitting wireless traffic. Similarly assuming that access point and access point are configured with both V and V whereas V is the management or native VLAN and V is the SSID VLAN.

In a hypothetical scenario client is initially associated with its home access point on its home VLAN V and thereafter roams from access point to access point . Thus client is currently associated with access point on VLAN V. Likewise client is initially associated with its home access point on its home VLAN V and thereafter roams from access point to access point . Thus client is now associated with access point on VLAN V.

In client roams from access point to access point resulting in a GRE tunnel to be established between access point and access point . All broadcast traffic in VLAN V is transmitted via a secure tunnel e.g. a GRE tunnel to client through access point and network switch A . Similarly because client roams from access point to access point all broadcast traffic in VLAN V is transmitted via a secure tunnel e.g. a GRE tunnel to client through access point and network switch B .

Note that layer 3 roaming is necessary when the SSID VLAN e.g. V of the home AP e.g. access point that a client e.g. client is associated to is not same as the SSID VLAN e.g. V of a foreign AP e.g. access point that the client roams to. When the roaming of the client from home AP to foreign AP occurs all downstream and upstream client traffic e.g. traffic to and from client will need to be transmitted between an AP e.g. access point which has access to the home VLAN of the client e.g. V and the AP that the client is currently connected with e.g. access point . Thus all unicast traffic to and or from the client will need to be transmitted to the foreign access point via a secure tunnel and through core switch fabric to from the Internet. As a result the unicast traffic to from the roaming client has to take a longer route compared to the route that the same client would take when associated with its home access point.

Also multicast or broadcast traffic needs to be transmitted to the foreign network through network switch A using the switching fabric via core network switch . Meanwhile the same multicast or broadcast traffic also is transmitted to the home network through network switch B and forwarded to the foreign network through the secure tunnel between the home access point and the foreign access point. Note that any traffic in the secure tunnel is transmitted through access switch A access switch and core switch in the illustrated example. Therefore the duplication of multicast broadcast transmissions as well as the longer route for the unicast traffic not only cause extra traffic load on the network switches but also undermine the purpose of VLAN segregation.

 all unicast traffic by clients connected to access switch A broadcast traffic on VLAN V broadcast traffic on VLAN V broadcast traffic on VLAN V 

In general for n GRE tunnels passing through an access switch e.g. network switch A the total traffic load on the access switch is 

 all unicast traffic by clients connected to access switch broadcast traffic on VLAN V broadcast traffic on VLAN V n broadcast traffic on VLAN V 

Note that in a network without VLAN separation e.g. where all access points have the same SSID VLAN e.g. VLAN Vx the total traffic load on network switch A is 

 all unicast traffic by clients connected to network switch A broadcast traffic on VLAN V broadcast traffic on VLAN Vx 

However broadcast traffic on VLAN Vx is roughly equivalent to broadcast traffic on VLAN V broadcast traffic on VLAN V in the original network. Thus network switch A in the original network has an additional load of n broadcast traffic on VLAN V .

Also note that even the core switch fabric e.g. core network switch which has already been handling all broadcast traffic on VLAN V is handling an additional traffic load.

In general any reduction in switch load through VLAN segregation is lost with just one client roaming. In a high mobility scenario when multiple clients roam simultaneously the traffic load on the access switches only gets worse and the core switch fabric is handling a much higher traffic load than it is supposed to handle.

In one embodiment all SSID or wireless VLANs are statically enabled on all access switches in the networks and thus allowing the SSID wireless VLANs on all ports of all access points. In assuming that VLANs V and V are SSID or wireless VLANs. According to this embodiment access switch A access point and access point are configured with VLANs V V and V. Similarly access switch B access point and access point are configured with VLANs V V and V.

Therefore with the static configuration according to this embodiment the layer 3 roaming is converted to a layer 2 roaming with VLAN mobility enabled. Specifically the client e.g. client upon roaming from home access point to foreign access point will continue to use its home VLAN e.g. VLAN V . Note that the client s home VLAN e.g. VLAN V is also valid in the foreign access point that the client is currently associated with as well as access switch . Therefore the need for a secure tunnel e.g. a GRE tunnel between a home access point and a foreign access point for a roaming client is eliminated.

 all unicast traffic by clients connected to access switch A broadcast traffic on VLAN V broadcast traffic on VLAN V broadcast traffic on VLAN V 

Note that the overall traffic load remains same irrespective of the number of roaming clients because there are not multiple copies of the same multicast or broadcast packet getting transmitted on the same VLAN. In general according to the static approach to VLAN segregation all wireless client VLANs are statically configured and enabled on all access switches across multiple sub networks in a network system.

According to another embodiment of the present disclosure VLANs may be dynamically turned on or off in order to reduce the traffic load on the core switch and access switches in the network. For example in access switch A access point and access point may initially be enabled with only management or native VLAN V. Similarly access switch B access point and access point initially be enabled with only VLAN V.

When a wireless client e.g. client associates with its home access point e.g. access point the SSID VLAN or wireless client VLAN for access point V is enabled on both access point and access switch B . Subsequently assuming that client roams from its home access point to foreign access point . When client disassociates with home access point e.g. access point the corresponding SSID VLANs on the home access point e.g. SSID VLAN V are disabled on the home access point e.g. access point . Also when client associates with a foreign access point e.g. access point VLAN V which is client s home VLAN is enabled on the foreign access point e.g. access point and foreign switch e.g. access switch A .

Note that the above process only applies when an existing client roams from a home network to a foreign network. When a new client associates with access point access point becomes the home access point of the new client and follows the same VLAN configuration process for home APs. In this case access point will have its SSID VLAN or wireless client VLAN V rather than VLAN V enabled upon a new association being established from a new client.

In some embodiments such dynamic VLAN segregation may be implemented via standard networking protocols such as Generic Attribute Registration Protocol GARP Generic VLAN Registration Protocol GVRP Multiple VLAN Registration Protocol MVRP VLAN Trunking Protocol VTP Link Layer Discovery Protocol LLDP extension etc. In other embodiments dynamic VLAN segregation may use vendor specific proprietary interfaces between the access points access switches and their uplink core switch.

In some scenarios when a large number of clients are roaming to the foreign network the traffic load on all switches will be similar to the static approach to VLAN segregation as described in the previous section. However in an average scenario the traffic loads on switches according to dynamic approach to VLAN segregation tends to be lower than the static approach. Similar to static approach to VLAN segregation dynamic approach to VLAN segregation also eliminates the needs for any secure tunnel to be established between the home sub network and the foreign sub network.

For illustration purposes only assuming that mobile client is initially associated with home access point and is configured with an IP address of 10.1.10.101 on VLAN V whose default gateway is 10.1.10.1. Furthermore both uplink of access switch B and port of core switch which access switch B is coupled with are enabled with VLAN V.

On the other hand assuming that foreign access point has a number of wireless clients associated with its wireless VLAN V whose default gateway is 10.1.20.1. Thus initially port of core switch and uplink of access switch A both have VLAN V enabled for home network client traffic.

Now assuming that client roams from its home network to the foreign network and associates with foreign access point . Based on the IP address 10.1.10.101 of client access point identifies that client as a roaming client whose home wireless VLAN is V. Then access point sends an uplink notification message to access switch A notifying access switch A that a roaming client on V has established a connection with access point . When access switch A receives the notification message access switch A checks whether the requested VLAN V has been enabled. If not access switch A will dynamically enable VLAN V on both its uplink port and the port to which access point is connected.

Note that the dynamic approach to VLAN segregation can be incrementally configured from the static approach to VLAN segregation. Therefore a network administrator may configure all wireless client VLANs on all access points and switches in the wireless network. Subsequently based on whether any roaming client exists each pre configured wireless client VLAN can be dynamically enabled or disabled at one or more ports and or network devices.

In some embodiments each access switch in the wireless network maintains a record of the connected foreign clients. When all roaming clients disassociate with access point access point will disable VLAN V and notify its uplink access switch A .

According to another embodiment of the present disclosure VLANs may be dynamically turned on or off in order to reduce the traffic load on the core switch and access switches in the network. Specifically the home VLAN of a client is disassociated from the SSID or wireless VLAN of the access point. Every client device would eventually have a location which is its home.

Further AP is configured with two VLANs namely a management or native VLAN V and an SSID VLAN e.g. wireless client VLAN V. Similarly AP is also configured with two VLANs namely a management or native VLAN V and an SSID VLAN e.g. wireless client VLAN V. On the other hand AP is configured with a management or native VLAN V and an SSID VLAN e.g. wireless client VLAN V. Likewise AP is configured with a management or native VLAN V and an SSID VLAN e.g. wireless client VLAN V etc.

For illustration purposes only in assuming that client belongs to an employee seating at Cube E in Floor I and that the access points located in the vicinity e.g. access points and are both located between rows E F on Floor I are configured with the SSID VLAN V. Thus client is assigned a home VLAN V which is used as its VLAN even when it associates to access point . Also client belongs to another employee seating at Cube E on Floor I and is assigned to home VLAN V.

When client connects to access point it is assigned to VLAN V even though the SSID VLAN of access point is V. The rationale behind this VLAN assignment is it is expected that the client will eventually spend most of its time being connected to one of the access points near Floor I Cube E all of which have the SSID VLAN V. Therefore when client roams to access point later client can continue to use VLAN V just like the other non roaming clients connected to access point or e.g. client in .

By using a VLAN associated with a probable location of the client the chances of this client connecting to an access point with an SSID VLAN that is different from its home VLAN is low which eventually reducing the number of VLANs simultaneously being active on a given access switch.

According to another embodiment of the present disclosure assignment of home VLAN can be achieved by using VLAN derivation. Specifically the home VLAN of each client is configured in an authentication server such as an IEEE 802.1x authentication server which is utilized by the access points.

Alternatively the home VLAN of the client may be dynamically derived from the client history which the system maintains according to the floor area where the client spends most time.

Note that in some embodiments this approach is enabled only for devices owned by the employee. Guest devices do not have an identified home VLAN. Thus the SSID or wireless VLAN of the first access point that a guest device associates with may be used as the VLAN for the traffic to and from the guest device. For the guest devices or clients which do not have an identified area or VLAN where they spend significant time periods while connected to the network a separate VLAN for these devices may be created and assigned to these devices. These devices will be a minority of devices in the network and hence broadcast on them whether statically or dynamically enabled across the network would not create too much overhead.

During operations the disclosed network device is pre configured with a first wireless VLAN and a second wireless VLAN operation . In some embodiments each network device is statically pre configured with all wireless or SSID VLANs in the wireless network.

Subsequently the disclosed network device receives an association request from a client device operation . The disclosed network device then identifies the first wireless VLAN that the client device is assigned to operation . Note that the VLAN assigned to the client device may be different from the SSID VLAN of the network device if the client devices roams from another access point e.g. the home access point of the client device to associate with the disclosed access point which serves as the foreign access point for the client device . Next the disclosed network device may dynamically enable the first wireless VLAN operation .

Thereafter the network device can allow traffic to or from the client device to be transmitted on the first wireless VLAN which is the home VLAN for the roaming client via the network device and allow traffic on the first wireless VLAN to be segregated from traffic on the second wireless VLAN operation . In order to do so the network device can send a message to an uplink network switching device to notify the uplink network switching device to allow traffic on the first wireless VLAN to be transmitted via the port that the network device is connected to.

In some embodiments in response to no active client traffic on the first wireless VLAN e.g. after the last client on the first wireless VLAN disassociates with the network device the network device will disallow traffic on the first wireless VLAN operation .

Network device includes at least a network interface capable of communicating to a wired or wireless network a processor capable of processing computing instructions a memory capable of storing instructions and data and optionally one or more radio antennas capable of either transmitting or receiving radio signals or both. Moreover network device further includes a receiving mechanism a transmitting mechanism and a controlling mechanism all of which are coupled to processor and memory in network device . Network device may be used as a client system or a server system or may serve as node in a distributed or a cloud computing environment.

Radio antenna may be any combination of known or conventional electrical components for receipt of signaling including but not limited to transistors capacitors resistors multiplexers wiring registers diodes or any other electrical components known or later become known.

Network interface can be any communication interface which includes but is not limited to a modem token ring interface Ethernet interface wireless IEEE 802.11 interface e.g. IEEE 802.11n IEEE 802.11ac etc cellular wireless interface satellite transmission interface or any other interface for coupling network devices. In some embodiments network interface may be software defined and programmable for example via an Application Programming Interface API and thus allowing for remote control of the network device .

Processor can include one or more microprocessors and or network processors. Memory can include storage components such as Dynamic Random Access Memory DRAM Static Random Access Memory SRAM etc.

Receiving mechanism generally receives one or more network messages via network interface from a distribution system or radio antenna from a wireless client over a wireless communication channel. The received network messages may include but are not limited to requests and or responses beacon frames management frames control path frames and so on. Each message may comprise one or more data packets for example in the form of IP packets. In some embodiments receiving mechanism receives from the foreign agent a home agent discovery request including the Media Access Control MAC address of the mobile client.

Transmitting mechanism generally transmits messages which include but are not limited to requests and or responses beacon frames management frames control path frames and so on.

Controlling mechanism generally controls transmission of traffic. Specifically controlling mechanism identifies a first wireless virtual local area network VLAN that the client device is assigned to and allows traffic to or from the client device to be transmitted via the network device on the first wireless VLAN wherein traffic on at least a second wireless VLAN is transmitted via the network device and segregated from the traffic on the first wireless VLAN.

In some embodiments both the first wireless VLAN and the second wireless VLAN are statically pre configured to be supported by network device . In other embodiments the first wireless VLAN is dynamically enabled in response to the client device roaming from its home network device to associate with network device .

In some embodiments controlling mechanism also disallows traffic on the first wireless VLAN if there is no active client device assigned to the first wireless VLAN is actively associated with network device .

In some embodiments the first wireless VLAN is identified based on client history including a probable location of the client device when the client device is connected to the wireless network. In some embodiments the first wireless VLAN is assigned based on a response message from a wireless network authentication server.

Therefore receiving mechanism transmitting mechanism and controlling mechanism often collectively operate with each other to provide for distributed network layer mobility for unified access networks whereby the need for a secure tunnel is eliminated. For example in response to receiving mechanism receives an association request from a client device controlling mechanism identifies a first wireless virtual local area network VLAN that the client device is assigned to. Furthermore in response to controlling mechanism identifying the first wireless VLAN transmitting mechanism may send a message to an uplink network switching device to notify the uplink network switching device to allow traffic on the first wireless VLAN to be transmitted via the port that the network device is connected to.

According to embodiments of the present disclosure network services provided by network device solely or in combination with other wireless network devices include but are not limited to an Institute of Electrical and Electronics Engineers IEEE 802.1x authentication to an internal and or external Remote Authentication Dial In User Service RADIUS server an MAC authentication to an internal and or external RADIUS server a built in Dynamic Host Configuration Protocol DHCP service to assign wireless client devices IP addresses an internal secured management interface Layer 3 forwarding Network Address Translation NAT service between the wireless network and a wired network coupled to the network device an internal and or external captive portal an external management system for managing the network devices in the wireless network etc.

The present disclosure may be realized in hardware software or a combination of hardware and software. The present disclosure may be realized in a centralized fashion in one computer system or in a distributed fashion where different elements are spread across several interconnected computer systems coupled to a network. A typical combination of hardware and software may be an access point with a computer program that when being loaded and executed controls the device such that it carries out the methods described herein.

The present disclosure also may be embedded in non transitory fashion in a computer readable storage medium e.g. a programmable circuit a semiconductor memory such as a volatile memory such as random access memory RAM or non volatile memory such as read only memory power backed RAM flash memory phase change memory or the like a hard disk drive an optical disc drive or any connector for receiving a portable memory device such as a Universal Serial Bus USB flash drive which comprises all the features enabling the implementation of the methods described herein and which when loaded in a computer system is able to carry out these methods. Computer program in the present context means any expression in any language code or notation of a set of instructions intended to cause a system having an information processing capability to perform a particular function either directly or after either or both of the following a conversion to another language code or notation b reproduction in a different material form.

As used herein digital device generally includes a device that is adapted to transmit and or receive signaling and to process information within such signaling such as a station e.g. any data processing equipment such as a computer cellular phone personal digital assistant tablet devices etc. an access point data transfer devices such as network switches routers controllers etc. or the like.

As used herein access point AP generally refers to receiving points for any known or convenient wireless access technology which may later become known. Specifically the term AP is not intended to be limited to IEEE 802.11 based APs. APs generally function as an electronic device that is adapted to allow wireless devices to connect to a wired network via various communications standards.

As used herein the term interconnect or used descriptively as interconnected is generally defined as a communication pathway established over an information carrying medium. The interconnect may be a wired interconnect wherein the medium is a physical medium e.g. electrical wire optical fiber cable bus traces etc. a wireless interconnect e.g. air in combination with wireless signaling technology or a combination of these technologies.

As used herein information is generally defined as data address control management e.g. statistics or any combination thereof. For transmission information may be transmitted as a message namely a collection of bits in a predetermined format. One type of message namely a wireless message includes a header and payload data having a predetermined number of bits of information. The wireless message may be placed in a format as one or more packets frames or cells.

As used herein wireless local area network WLAN generally refers to a communications network links two or more devices using some wireless distribution method for example spread spectrum or orthogonal frequency division multiplexing radio and usually providing a connection through an access point to the Internet and thus providing users with the mobility to move around within a local coverage area and still stay connected to the network.

As used herein the term mechanism generally refers to a component of a system or device to serve one or more functions including but not limited to software components electronic components electrical components mechanical components electro mechanical components etc.

As used herein the term embodiment generally refers an embodiment that serves to illustrate by way of example but not limitation.

It will be appreciated to those skilled in the art that the preceding examples and embodiments are exemplary and not limiting to the scope of the present disclosure. It is intended that all permutations enhancements equivalents and improvements thereto that are apparent to those skilled in the art upon a reading of the specification and a study of the drawings are included within the true spirit and scope of the present disclosure. It is therefore intended that the following appended claims include all such modifications permutations and equivalents as fall within the true spirit and scope of the present disclosure.

While the present disclosure has been described in terms of various embodiments the present disclosure should not be limited to only those embodiments described but can be practiced with modification and alteration within the spirit and scope of the appended claims. Likewise where a reference to a standard is made in the present disclosure the reference is generally made to the current version of the standard as applicable to the disclosed technology area. However the described embodiments may be practiced under subsequent development of the standard within the spirit and scope of the description and appended claims. The description is thus to be regarded as illustrative rather than limiting.

