---

title: Measurement of video quality at customer premises
abstract: A video signal is provided to a set top box. An instruction to record a specified portion of the video signal, thereby creating a video sample, is provided to the set top box. The video sample is received from the set top box. Reference video corresponding to the video sample is obtained. A comparison of the video sample and the reference video is performed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08793751&OS=08793751&RS=08793751
owner: Verizon Laboratories Inc.
number: 08793751
owner_city: Waltham
owner_country: US
publication_date: 20130314
---
This application is a continuation of U.S. patent application Ser. No. 11 510 361 filed on Aug. 25 2006 which is hereby incorporated by reference in its entirety.

Video services such as video on demand broadcast video etc. may be provided to customers via a variety of different kinds of video distribution networks. One factor in determining the quality of a video signal provided to a customer is the quality of the video feed supplied to the head end of a video distribution network. A video feed may be supplied to a head end by satellite and therefore is subject to the quality of satellite communications and further may be subject to natural phenomena such as solar flares depending on the location of a satellite and the location of a head end. Further in certain kinds of video distribution networks such as a digital optical network network congestion can adversely affect video quality.

Moreover a video distribution network used to provide video services generally includes a number of different components that may affect video quality. For example after entering a video distribution network at a head end a video signal may traverse a number of different links and switches and in some cases is converted from an analog signal to a digital signal or vice versa. Moreover the configuration of components in a video distribution network may affect the quality of video received at customer premises. For example a digital switch may be configured to fail over to another switch when a bit error rate exceeds a predetermined threshold although the quality of video that is received by the customer may be affected before the predetermined threshold is reached. Similarly it will be understood that the carrier to noise ratio allowed in a video distribution network may affect the quality of video that may be received by a customer.

Unfortunately it is presently difficult to determine the quality of video actually received at customer premises. Certain methods that purport to directly measure video quality at a customer premises in fact directly measure quality at some point in a video distribution network upstream of the customer premises and then apply mathematical techniques to predict rather than actually measure video quality at a customer premises. At best only indirect indicators of signal quality such as signal to noise ratio carrier to noise ratio signal level etc. may presently be measured at a customer premises.

For example various performance metrics are identified in ITU T Prepublished Recommendation G.1050 Network model for evaluating multimedia transmission performance over internet protocol published by the International Telecommunications Union ITU of Geneva Switzerland in November 2005 and fully incorporated herein by reference in its entirety. Such performance metrics include one way latency jitter variability in latency duration of sequential packet loss burst rate frequency of sequential packet loss proportion of packets lost and proportion of reordered packets etc. Some vendors sell equipment for measuring certain of these metrics e.g. Spirent Communications of West Sussex United Kingdom.

However known performance metrics are unfortunately at best imperfect predictors of the subjective quality of the output video as viewed by human observers. Full reference video quality metrics FR VQM e.g. metrics that directly measure video quality are generally thought to be better predictors of subjective quality. However while systems and methods for correlating network performance metrics and FR VQM are generally known and include graphical scatter plots and computed Pearson and Spearman correlation coefficients present systems and methods do not provide any way to correlate network performance metrics such as mentioned above and high quality full reference metrics in a video network because present systems and methods provide for no way in which to acquire and evaluate high quality video that has gone end to end i.e. from a head end to a customer premises equipment and back. Having both a full reference metric and network performance metrics would be quite valuable because a full reference metric gives a more reliable indicator of subjective quality of the output video while network performance metrics provide more useful diagnostic information for identifying and addressing network problems.

Video signal is provided to head end from an external source such as a satellite. Head end generally includes recording device for recording video signal . Recording device may be any suitable known device for recording video signal such as a digital video recorder. Head end provides video signal to video distribution network in a known manner. Video distribution network may include one or more components for known types of video networks such as digital optical or analog networks. Further video signal may be converted from analog to digital or vice versa within video distribution network . Video distribution network provides signal to set top box STB . STB is usually although not necessarily located at a customer premises such as a residence hotel office etc. subscribing to video services provided via network .

STB generally includes a processor capable of executing computer executable instructions and well as a medium for storing such instructions. STB is connected to or includes digital video recorder DVR and receives video signal from video distribution network . Video signal may be output to a monitor or television for display to a user and may also additionally or alternatively be stored on DVR in sample video files . As should be apparent DVR includes a computer readable medium for storing digital data including computer executable instructions and sample video files . DVR is generally known for storing video files although it should be understood that the computer readable medium DVR need only be capable of storing snippets of video of sufficient size to allow for the testing and evaluation discussed below.

Sample video files may be in any one of a variety of known formats such as MPEG 2 or MPEG 4 promulgated by the Motion Picture Experts Group. In the event that signal does not provide video data in a format appropriate for storage on DVR either DVR or STB may include hardware and or software as known to those skilled in the art for converting signal to a format appropriate for storage on DVR . However in some embodiments video signal is received by STB and stored by DVR in an MPEG format. Further such embodiments include a known decoder for decoding video signal for viewing or for decoding files transmission to quality server and comparison to reference files as described further below.

STB is also connected to packet switched network . It is to be understood that embodiments are possible in which networks and are in fact a single network used both for providing video signal to STB and for allowing STB to communicate with other network devices. Network is a digital network and preferably an internet protocol IP network.

Quality server communicates with STB through packet switched network . Quality server includes computer hardware and software for querying STB for sample video files . Quality server further communicates either through network or some other connection known to those skilled in the art such as a local area network LAN with data warehouse . Further embodiments are possible in which quality server and data warehouse are located on the same physical computing device.

Video reference files may be provided to data warehouse from several sources. For example known techniques for configuring switches in head end allow for video signal to be captured by recording device thereby creating video reference files . Recording device included in head end may be connected to network but in any event may be provided with a way to send video reference files to data warehouse e.g. in response to a query from quality server according to a scheduled job etc. Further video reference files may be provided to data warehouse from other devices such as a server that provides video on demand VoD to a user of STB .

Quality server may query data warehouse for video reference files for comparison to sample files retrieved from DVR . Reference files comprise video images copied from video signal as it is provided to head end as is discussed in further detail below. Accordingly as also discussed in further detail below a comparison of sample files to reference files allows for a determination of the quality of video signal as it is received by STB .

Computing devices such as STB and those required for quality server and data warehouse may employ any of a number of computer operating systems known to those skilled in the art including but by no means limited to known versions and or varieties of the Microsoft Windows operating system the Unix operating system e.g. the Solaris operating system distributed by Sun Microsystems of Menlo Park Calif. the AIX UNIX operating system distributed by International Business Machines of Armonk N.Y. and the Linux operating system. Computing devices may include any one of a number of computing devices known to those skilled in the art including without limitation a computer workstation a desktop notebook laptop or handheld computer or some other computing device known to those skilled in the art. STB generally is a specialized device for receiving video signals from head end via network and may be provided with a proprietary or specialized operating system other than those enumerated above. For example in one embodiment STB is provided with a real time operating system RTOS such as is known. However it is to be understood that STB may be a computing device such as one of those enumerated above so long as the computing device is capable of receiving video signals from network and storing sample files .

Computing devices such as STB and those required for quality server and data warehouse generally each include instructions executable by one or more computing devices such as those listed above. Computer executable instructions may be compiled or interpreted from computer programs created using a variety of programming languages and or technologies known to those skilled in the art including without limitation and either alone or in combination Java C C Visual Basic Java Script Perl etc. In general a processor e.g. a microprocessor receives instructions e.g. from a memory a computer readable medium etc. and executes these instructions thereby performing one or more processes including one or more of the processes described herein. Such instructions and other data may be stored and transmitted using a variety of known computer readable media.

A computer readable medium includes any medium that participates in providing data e.g. instructions which may be read by a computer. Such a medium may take many forms including but not limited to non volatile media volatile media and transmission media. Non volatile media include for example optical or magnetic disks and other persistent memory. Volatile media include dynamic random access memory DRAM which typically constitutes a main memory. Transmission media include coaxial cables copper wire and fiber optics including the wires that comprise a system bus coupled to the processor. Transmission media may include or convey acoustic waves light waves and electromagnetic emissions such as those generated during radio frequency RF and infrared IR data communications. Common forms of computer readable media include for example a floppy disk a flexible disk hard disk magnetic tape any other magnetic medium a CD ROM DVD any other optical medium punch cards paper tape any other physical medium with patterns of holes a RAM a PROM an EPROM a FLASH EEPROM any other memory chip or cartridge a carrier wave as described hereinafter or any other medium from which a computer can read.

In step quality server formulates a set of one or more instructions to a plurality of STBs to provide video sample files . It is generally preferable that STBs at various customer premises sufficient to provide a valid statistical sample of STBs are queried for sample video files . It further may be desirable to obtain sample video files that represent video that customers are actually watching. Accordingly identified STBs could be limited to a particular geographic region or part of network in which case a predetermined number of STBs in the geographic region could be randomly selected. Further a set of instructions could be formulated based on knowledge of what programming customers are likely to be watching. In general it may be desirable to obtain sample video files relating to a variety of programming e.g. programming on different channels at different times and relating to different subject matters. By providing such variety in sample files it is less likely that evaluations and comparisons of a particular sample file will incorrectly suggest that STB is or is not providing video of sufficient quality to a user. Further such variety will increase the likelihood that if video quality for a particular program or channel is particularly degraded such quality issue will be detected.

In any event the set of instructions formulated in step generally includes instructions to record particular snippets of video received in video signal on DVR as sample video files .

Next in step quality server sends the set of instructions formulated in step to STBs that have been determined as recipients for the instructions. The set of instructions is generally sent via network it will be understood that various addressing schemes are available for locating STB on network e.g. IP addresses may be associated with STB quality server and any other devices on network .

It may be preferable for performing process in general and step in particular for STB to be equipped with a plurality of tuners for receiving video signal via network . When STB is recording video signal e.g. snippet for testing a digital tuner in STB is tuned to the snippet program for recording and therefore that tuner may not be available to a user of STB for receiving and viewing desired programming. Accordingly if STB is equipped with only one tuner it may be desirable for instructions in step of to make provision for the tuner being in use e.g. preventing video snippets from being recorded at such time as would interfere with a customer for video services being able to receive desired programming. In general it is preferable to allow STB to communicate to quality server a refusal to comply with instructions sent in step along with reasons for such refusal e.g. disk space unavailable tuner occupied network difficulties etc. Known protocols may be used to support such communications such as simple object access protocol SOAP over hypertext transfer protocol HTTP etc.

Instructions provided by quality server may be provided according to DSL Forum TR 069 CPE WAN Management Protocol May 2004 produced by the DSLHome Technical Working Group Eds. Jeff Bernstein and Tim Spets published by the Digital Subscriber Line Forum of Fremont Calif. and fully incorporated by reference herein in its entirety. TR 069 is a wide area network WAN side customer premises equipment CPE management protocol i.e. a protocol designed for communication between a CPE and an auto configuration server ACS . As is known TR 069 is useful because it provides standardized interoperable messaging between a remote management system such as an ACS or quality server and CPE that may have been provided by different vendors. TR 069 thereby enables service providers to invest in a remote management platform that will give them the flexibility to pick and choose amongst available hardware vendors depending on business goals. Accordingly an ACS in network may control and monitor CPE using TR 069. Quality server may be in communication with or included within an ACS.

Next in step STB records video sample files on DVR according to the instructions received from quality server in step . For example quality server may instruct STB to record video signal for a specified television channel during a specified time period e.g. using the TR 069 standard as described above. The recorded signal may be stored in a compressed form on DVR although it may be preferable to provide video in decoded form to server . Although sending a video sample back to server in decoded form generally uses more bandwidth than providing video in encoded form it will be understood that sending video in decoded form will likely avoid artifacts in video signal that are due to the encoding decoding cycle.

When recorded by STB video sample files are generally associated with an identifier according to which video sample file may sent to quality server and stored in data warehouse . Further video sample files are generally stored according to a standard digital video format such as one of the well known formats promulgated by the Motion Picture Experts Group MPEG e.g. MPEG 2 or MPEG 4. It is to be understood that STB may include known hardware and or software components for converting video signal to an appropriate format for storage as files . In one embodiment video signal is provided in a digital format e.g. MPEG Transport Streams MPEG TS and video signal may be saved in the form in which it is provided via network .

Next or often contemporaneously with step in step quality server creates reference files and stores them in data warehouse . For example a graphical user interface GUI may be provided at quality server for a user to identify snippets of video from which reference files are created. Generally a user selects video programming most frequently viewed or likely to be viewed by customers of network although any video programming provided through network could be selected. In some embodiments because a GUI can be a cumbersome way to operate a large scale network monitoring system an automated network management system NMS or the like such as is known to interact through a network monitoring system through a shell language an application programming interface API etc. may be used to select and store snippets of video from which reference files are created. Upon selection of video for creation of a reference file program instructions on quality server are executed to receive a video reference file from recording device in head end containing selected video snippets.

In general video could be selected for reference files in a variety of ways. For example video samples could be selected by a human operator e.g. a user of quality server or by a computer such as quality server that is programmed to select video according to one or more heuristics. Bases for selecting video may include the time of day known to be correlated with certain patterns of network traffic and or sizes of a viewing audience complexity of the video signal i.e. video with more information per unit time is more difficult for compression algorithms to encode and decode correctly information per unit time being determined by the amount of static detail in the video image the amount of movement of the images per unit time and scene cuts among other factors and or by the typicality of video material e.g. as given by the number of hours per day of similar material presented by one or more channels over video network .

Next in step STB sends sample video files to quality server . Transmission of files could be initiated in a variety of ways. For example instructions provided by quality server to STB in step may include instructions to send sample video files to quality server after such files have been stored on DVR . Alternatively quality server may request sample video files from STB at a time following a time when such files were to have been recorded on DVR according to the instructions sent in step . Further even without instructions from quality server to provide files to quality server STB may be programmed to provide files to quality server at regular intervals at times when files are available etc. It should be understood that use of known protocols such as Transfer Control Protocol TCP will ensure that files are received in a complete and undegraded state by quality server .

Moreover it is to be understood that embodiments are possible in which a stream of sample video rather than a video sample file that has been stored on DVR is sent to quality server . In such embodiments STB essentially forwards a selected channel of video signal to quality server at selected times. Further a stream of reference video in lieu of reference file could be similarly provided. However the appropriate stream segment from video signal would need to be stored while quality server awaited transmission of a streaming video sample from STB . Accordingly embodiments are possible in which quality server is placed near head end so that quality server may directly receive. If quality server is too far away from head end it is possible that reference video would be impaired to the same extent as video samples received from STB thereby potentially degrading the measurement capability of system .

Next in step quality server obtains from data warehouse reference files to be compared to sample video files downloaded from STB in step . Reference files to be obtained may be identified in a variety of ways e.g. according to a key or identifier included in sample video files by STB according to instructions provided by quality server according to a naming convention etc. Then once quality server has received sample video files from STB the key or identifier for each file may be extracted from the file and used to retrieve a corresponding reference file .

Next in step corresponding reference files and sample files are compared and the result of this comparison are used to make a determination of end to end video quality provided to STB which determination is then recorded in data warehouse . For example methods documented in International Telecommunications Union Recommendation J.144 Rev. 1 January 2004 J.144 may be used to make a determination of video quality. J.144 is published by the International Telecommunications Union of Geneva Switzerland and is fully incorporated herein by reference in its entirety. Methods discussed in J.144 compute a quality index based on a pixel by pixel comparison between an original reference image and a received image. In addition it will be understood that there are many possible approaches to combining the pixel by pixel differences and the all important details differ among the algorithms.

Next in step end to end quality measurements made in step are correlated to network performance metrics corresponding to times when respective sample video files were recorded on DVR . It should be understood that end to end measurements of video quality such as those discussed in J.144 or full reference video quality metrics FR VQM are generally useful by themselves and do not necessarily require other network performance metrics. However such measurements may be even more valuable when time synched network performance metrics are available. A variety of performance metrics may be useful examples of such performance metrics having been provided above. Accordingly such correlation is useful for determining the relation of video quality received at STB to performance issues in video distribution network . For example if it is known that certain components in network had failed or were not performing according to certain standards at the time a sample video file was recorded a poor quality measurement based on that file may not be cause for concern. However if network performance was believed to be good at the time a video file exhibiting poor quality was recorded then further investigation may be warranted.

Next in step results of a comparison or comparisons made in step are reported. Such results may be reported in a variety of ways including by display in a GUI in an e mail automatically sent to certain users in a web page etc. For example an exemplary report might include one or more columns of text such as a column providing values for a full reference video quality metric obtained using a known heuristic for FR VQM. Additional columns could include columns for packet loss of packets lost jitter variability of the spacing between packets and delay number of milliseconds between sending of a signal and receipt of the signal associated with the FR VQM measurement included in the first column. Further it should be understood that it is possible to compute correlations between FR VQM measurements and one or more network performance metrics and that such correlations could be depicted on a graph such as a scatter plot or the like.

With regard to the processes systems methods heuristics etc. described herein it should be understood that although the steps of such processes etc. have been described as occurring according to a certain ordered sequence such processes could be practiced with the described steps performed in an order other than the order described herein. It further should be understood that certain steps could be performed simultaneously that other steps could be added or that certain steps described herein could be omitted. In other words the descriptions of processes herein are provided for the purpose of illustrating certain embodiments and should in no way be construed so as to limit the claimed invention.

Accordingly it is to be understood that the above description is intended to be illustrative and not restrictive. Many embodiments and applications other than the examples provided would be apparent to those of skill in the art upon reading the above description. The scope of the invention should be determined not with reference to the above description but should instead be determined with reference to the appended claims along with the full scope of equivalents to which such claims are entitled. It is anticipated and intended that future developments will occur in the arts discussed herein and that the disclosed systems and methods will be incorporated into such future embodiments. In sum it should be understood that the invention is capable of modification and variation and is limited only by the following claims.

All terms used in the claims are intended to be given their broadest reasonable constructions and their ordinary meanings as understood by those skilled in the art unless an explicit indication to the contrary in made herein. In particular use of the singular articles such as a the said etc. should be read to recite one or more of the indicated elements unless a claim recites an explicit limitation to the contrary.

