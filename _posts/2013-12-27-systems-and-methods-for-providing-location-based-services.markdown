---

title: Systems and methods for providing location based services
abstract: An subscriber location device for determining location information for User Equipment (UE) in a communication network monitors a network interface between a Mobility Management Entity node and an Evolved Serving Mobile Location Center (E-SMLC) node, receive location information from network interface between the MME node and the E-SMLC node, associates the received location information with corresponding UE to yield associated location information and stores the associated location information in a subscriber location database, indexed according to the UE.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09055547&OS=09055547&RS=09055547
owner: Tektronix, Inc.
number: 09055547
owner_city: Beaverton
owner_country: US
publication_date: 20131227
---
The present disclosure relates generally to communication networks and more specifically to techniques for improving location services.

Long Term Evolution LTE networks generally use 4th generation 4G wireless technologies and are considered a next evolution for GSM Global System for Mobile Communications . LTE builds on the 3GPP family including GSM GPRS General packet radio service EDGE Enhanced Data rates for GSM Evolution etc. and is an all IP standard. LTE provides higher data transmission rates while efficiently utilizing the spectrum thereby supporting a multitude of subscribers than is possible with pre 4G spectral frequencies. LTE is all IP permitting applications such as real time voice video gaming social networking and location based services. LTE networks may also co operate with circuit switched legacy networks and result in a seamless network environment and signals may be exchanged between traditional networks the new 4G network and the Internet seamlessly.

LTE network also support location services and positioning. Positioning refers to a functionality that determines a geographical location of a target UE. Location services refer to any services based on or related to location information which may include any information related to the location of a UE e.g. measurements a location estimate etc. Often it is desirable to find the location of a mobile wireless or wired device for various reasons such as improved network performance part of many services emergency situations and the like.

With respect to determining location of the UE in LTE networks conventional LoCation Services LCS clients query locations for UE and communicate with for example Gateway Mobile Location Center s GMLCs in order to request the location of the UE. The GMLCs communicate with one or more additional nodes which communicate with the UE as necessary to obtain a location estimate for the UE. The GMLC then returns the location estimate to the LCS client.

Although obtaining location via conventional LCS client requests responses have generally been considered satisfactory for their intended purpose there is still a need in the art for improved location services that for example maintain one or more subscriber location databases for UE.

According to one or more embodiments of the invention a network monitoring system extracts geographical location information associated with User Equipment UE . The extracted location information is stored in a Subscriber Location Database SLD which can subsequently be queried by various network applications that need location based services e.g. via a SLD Application Programming Interface API . The location information is obtained by monitoring a SLs network interface between a Mobility Management Entity MME node and an Evolved Serving Mobile Location Centre E SMLC node. Location information includes but is not limited to geographical coordinates e.g. altitude horizontal speed vertical velocity etc. . The network monitoring system provides the location of particular UE when for example it is queried by applications. Optionally the networking monitoring system can transmit a LCS client request to a Gateway Mobile Location Center GMLC node thereby triggering a location information procedure from the UE discussed in greater detail below.

According to another embodiment of the invention a subscriber location node device determines location information for User Equipment UE in a communication network using improved subscriber location techniques. For example the subscriber location device monitors a network interface between a Mobility Management Entity node and an Evolved Serving Mobile Location Center E SMLC node and receives location information e.g. altitude a horizontal speed and a vertical velocity etc. from network interface between the MME node and the E SMLC node e.g. an SLs network interface etc. . The subscriber location device further associates the received location information with corresponding UE to yield associated location information and stores the associated location information in a subscriber location database indexed according to the UE.

In certain other embodiments the subscriber location device also receives a request for the associated location information for the UE from an application and retrieves e.g. in response to the request the associated location information stored in the subscriber location database. The subscriber location database further provides the associated location information to the application in response to the received request. Additionally in these embodiments the subscriber location device determines the associated location information stored in the subscriber location database needs to be updated using for example trigger criteria that includes a geographical position of the UE a time and a detected handover of the UE in the communication network a geographical position of the UE relative to an emergency situation a geographical position of the UE relative to retail facility etc. Once determined the subscriber location device triggers an update for the associated location information stored in the subscriber location database that causes a location services client to send a location services request to a Gateway Mobile Location Centre GMLC node. In turn the GMLC node causes via the MME node the UE to send location information across the network interface between the MME node and the E SMLC node.

These and other features of the systems and methods of the subject invention will become more readily apparent to those skilled in the art from the following detailed description of the preferred embodiments taken in conjunction with the drawings.

A component or a feature that is common to more than one drawing is indicated with the same reference number in each of the drawings.

This disclosure provides network monitoring systems and techniques employed in communication networks such as cellular 4G LTE communication networks. As discussed in greater detail herein these network monitoring systems and techniques provide for example comprehensive location based services including storing location information for associated User Equipment UE querying UE for updated location information providing event based triggers e.g. cellular network changes handovers time based events geo fencing etc. that update UE location information maintaining precise historical and current location information for UE and the like.

For purposes of explanation and illustration and not limitation component network nodes that support location services for a communication network e.g. a 3GPP network are shown in . Communication network is a geographically distributed collection of nodes interconnected by communication links and segments for transporting data between end nodes such as User Equipment UE or other devices.

As shown User Equipment UE communicates with an Evolved Node B eNB in a radio access network RAN to obtain communication services. The RAN may include other network entities not shown in for simplicity and may also be referred to as an Evolved Universal Terrestrial Radio Access Network E UTRAN . eNB is also referred to as a Node B a base station an access point etc. UE is also referred to as a mobile station a terminal an access terminal a subscriber unit a station etc. and includes for example mobile devices cellular phones laptops wireless devices wireless modems wireless routers and the like.

With respect to location information UE receives and measures signals from one or more satellites and obtains pseudo range measurements for the satellites. Satellite is for example a Global Navigation Satellite System GNSS satellite which uses the United States Global Positioning System GPS the European Galileo system the Russian GLONASS system or some other GNSS. UE can also measure signals from eNBs and obtain timing measurements e.g. for time of arrival TOA or observed time difference of arrival OTDOA signal strength measurements and or signal quality measurements for the eNBs. The pseudo range measurements timing measurements signal strength measurements and or signal quality measurements are used to derive a location estimate e.g. a position estimate a position fix etc. for UE .

The eNB also communicates with a Mobility Management Entity MME node which performs various control functions such as mobility management gateway selection authentication bearer management etc. MME node communicates with an evolved Serving Mobile Location Center E SMLC node a Home Subscriber Server HSS node and a Gateway Mobile Location Center GMLC node . Notably the E SMLC node supports UE based UE assisted network based and or network assisted positioning methods. The E SMLC node also communicates with GMLC node to support location services.

The GMLC node performs various functions to support location services interface with external LCS clients e.g. an LCS client and provide services such as subscriber privacy authorization authentication billing etc. In certain configurations the GMLC node includes a Home GMLC node H GMLC a Visited GMLC node V GMLC and or a Requesting GMLC node R GMLC not shown . HSS node stores subscription information for users performs authentication and authorization of users and provides information about user location and routing information when requested.

A Serving Gateway S GW node performs various functions related to IP data transfer for UE s such as data routing and forwarding mobility anchoring etc. A Packet Data Network PDN Gateway node performs various functions such as maintenance of data connectivity for UEs IP address allocation etc. and facilitates connection to a data network i.e. the Internet .

The SLs network interface is used to convey location requests from the MME node to the E SMLC node and to convey corresponding location reports back from the E SMLC node to the MME node . The SLs interface is also used for tunneling core network measurement requests from the E SMLC node to the RAN eNB using RAN specified protocols transparent to the MME described in 3GPP TS 36.305 . The SLh network interface is the Diameter based interface between the HSS and the GMLC as described in 3GPP TS 29.173. For example the SLh network interface enables HSS node to provide the MME address the VPLMN identity and or other information to GMLC node . The SLg interface enables an H GMLC to provide the MME address to a V GMLC when the location of a particular UE is being requested by the H GMLC.

Notably while shows a specific design of an LTE network architecture i.e. with E SMLC being connected to MME with E SMLC in communication with eNB etc. . However other network architectures may also be used to support location services and positioning and may include network entities that may be coupled in other manners. These various network architectures may also include network entities not shown in .

The network interface s contain the mechanical electrical and signaling circuitry for communicating data over physical and or wireless links coupled to the network . The network interfaces may be configured to transmit and or receive data using a variety of different communication protocols including inter alia TCP IP UDP wireless protocols e.g. IEEE Std. 802.15.4 WiFi Bluetooth Ethernet powerline communication PLC protocols etc.

The memory comprises a plurality of storage locations that are addressable by the processor and the network interfaces for storing software programs and data structures e.g. subscriber information etc. associated with the embodiments described herein. As noted above certain devices may have limited memory or no memory e.g. no memory for storage other than for programs processes operating on the device . The processor may comprise necessary elements or logic adapted to execute the software programs and manipulate data structures such as addresses routes or prefixes notably on capable devices only . An operating system portions of which are typically resident in memory and executed by the processor functionally organizes the device by inter alia invoking operations in support of software processes and or services executing on the device. These software processes and or services include subscriber location process services . It will be apparent to those skilled in the art that other processor and memory types including various computer readable media may be used to store and execute program instructions pertaining to the techniques described herein. Also while the description illustrates various processes it is expressly contemplated that various processes may be embodied as modules configured to operate in accordance with the techniques herein e.g. according to the functionality of a similar process .

Illustratively the techniques described herein may be performed by hardware software and or firmware such as in accordance with the subscriber location which may contain computer executable instructions executed by the processor or independent processor of network interfaces to perform functions relating to the techniques described herein.

Referring now to a signaling diagram illustrates various call flows or messages that support location services and positioning. Each call flow may include a sequence of messages exchanged between various network node entities. As discussed above different network architectures may support communication between different network entities. However for clarity the description below is for the network architecture shown in with E SMLC being able to communicate directly with MME but not eNB or GMLC .

In response MME node eNB RAN and UE perform network triggered service requests step notification and privacy verifications step etc. For example if UE is in an idle state then MME node may perform a network triggered service request procedure in order to establish a signaling connection for UE and to assign a specific eNB e.g. eNB to UE step . If the PSL message indicates that UE should either be notified or be notified with privacy verification step then MME may notify UE of the location request and may verify its privacy preference. Step may also include sending a Location Notification Invoke message to UE . UE may wait for the user to grant or withhold permission and may then return a Location Notification Return Result message to MME .

In step MME node selects E SMLC node and sends a Location Request message to E SMLC . The Location Request message includes the type of location information being requested the requested LCS QoS the identity of the serving eNB the UE positioning capabilities etc. If the requested location information and location accuracy within the LCS QoS can be satisfied based on parameters e.g. eNB identity received from MME node then E SMLC node send a Location Response message immediately not shown in . Otherwise E SMLC may determine one or more positioning methods to use and prompt a positioning procedure for the positioning method s step . E SMLC node may receive measurements from the positioning procedure and may determine a location estimate for UE based on the measurements. If E SMLC node fails to receive measurements then it may use the current eNB identity to obtain an approximate location estimate for UE . E SMLC node also receives a location estimate from UE which may be obtained with a UE based positioning method and may verify consistency of this location estimate with the current eNB location. If the location estimate does not satisfy the requested accuracy and sufficient response time still remains then E SMLC node may instigate another positioning procedure using the same or different positioning method. After completing the positioning procedure in step E SMLC node sends a Location Response message to MME step . The Location Response message includes a location estimate for UE obtained from the positioning procedure an indication of whether the location estimate satisfies the requested accuracy the positioning method used to obtain the location estimate a failure cause if a location estimate could not be obtained etc.

At step MME node returns the requested location information to GMLC node . MME may return an error response to GMLC node if for example permission is not granted by the user or is not received from UE for the privacy verification in step or a valid location estimate is not obtained from E SMLC node in step . MME node may also return the last known location of UE if allowed and if a valid location estimate is not obtained. MME node may record charging information. The common MT LR procedure in PS and CS domain is then performed to return the location information to LCS client step .

As noted above although obtaining location via conventional LCS client requests responses have generally been considered satisfactory for their intended purpose there is still a need in the art for improved location services. Accordingly the subject disclosure provides improved location services techniques to obtain location information for UE s maintain the location information for the UE s in a location services database and trigger location information lookup for UE s based on specific events e.g. network changes handovers time based geo fencing etc. . Further these improved location services techniques provide historical and current geographical location information for UE make on demand location requests when location information is not readily available in the location services database and provide information location data to third party applications.

Referring now to the communication network shown in is provided along with a subscriber location device . As discussed above subscriber location device can comprise the components of device node shown in . Additionally subscriber location device can include any number of additional remote or resident devices nodes etc. For example as shown subscriber location device incorporates the LCS client as well as a subscriber location database .

Subscriber location device extracts key location information e.g. geographical information for UE s and store the location information in the subscriber location database . The subscriber location database is queried by a variety of applications e.g. network operations other applications etc. . The subscriber location database can include for example an application programming interface API .

Operatively location information for UE s is obtained by monitoring via the subscriber location device the diameter SLs network interface between E SMLC node and MME node . Such location information includes for example precise geographical coordinates such as altitude horizontal speed and vertical velocity of UE . Subscriber location device location monitors location information via a tap probe on the SLs network interface and stores the location information in the subscriber location database . Typically the location information is for example stored and indexed according to an associated UE.

An application queries subscriber location device for location information for UE e.g. UE . If the location information associated with UE is not up to date or otherwise unavailable subscriber location device optionally launches or triggers the LCS Client to request location information to from the GMLC node .

Notably in certain embodiments the application and or the subscriber location device can also establish trigger criteria which causes a request for updated location information for the UE. For example trigger criteria can include out of date subscriber location information a geographical position of the UE e.g. geo fencing etc. a time a detected handover of the UE in a communication network a geographical location of the UE relative to an emergency situation a retail facility etc. In addition the subscriber location database can work in conjunction with the application e.g. via the application programming interface API to support online near real time complex event processing e.g. the application can configure certain triggers based on subscriber events . Additionally application can include a complex event processing engine that triggers dynamic queries to the network to fetch e.g. update subscriber data.

The GMLC node receives the request and operates to obtain location information e.g. exchanging messages between MME node eNB RAN E SMLC node UE etc. . Subscriber location device continues to monitor the SLs network interface for updated location information for UE and receives the location information e.g. an altitude a horizontal speed and a vertical velocity etc. . The subscriber location device further associates the received location information with the corresponding UE to yield associated location information stores the updated location information e.g. indexed according to the associated UE and sends the updated location information to the application.

With respect to triggers applications and or subscriber location device establish criteria to trigger requests for location information for UEs. For example as previously discussed if the location information does not exist and or if the location information is out of date a trigger is executed to obtain location information. In other embodiments the triggers can be based on UE position e.g. geo fencing a time e.g. a time of day a detected handover for the UE in the communication network e.g. moving from coverage areas and or moving from 3GPP to non 3GPP coverage etc. or even advertisement based location triggering e.g. vicinity to a shopping center etc. .

In particular the subscriber location device triggers via the LCS client a location request i.e. LCS service request at step . As discussed above subscriber location device also monitors the SLs network interface between E SMLC node and MME node for location information. For example as shown in signaling diagram the subscriber location device monitors the location requests step the positioning procedure step and the location response step . In this fashion the subscriber location device receives location information for UE . Further as discussed above the location information is subsequently stored in subscriber location database and can be queried by third party applications.

Procedure starts at step and continues to step where as discussed above the subscriber location device monitors a network interface between a Mobility Management Entity MME node and an Evolved Serving Mobile Location Center E SMLC node e.g. SLs network interface etc. . The subscriber location device receives in step location information e.g. an altitude a horizontal speed and a vertical velocity etc. from network interface between the MME node and the E SMLC node. At step the subscriber location device associates the received location information with corresponding UE to yield associated location information and stores the associated location information in a subscriber location database e.g. subscriber location database indexed according to the UE.

In certain embodiments the subscriber location device receive at step a request for the associated location information for the UE from an application e.g. applications and determines at step that the associated location information stored in the subscriber location database needs to be updated e.g. based on trigger criteria such as out of date subscriber location information based on a geographical position of the UE a time a detected handover of the UE in a communication network geographical location relative to an emergency situation geographical location relative to a retail facility etc. . Once determined the subscriber location device triggers at step an update for the associated location information stored in the subscriber location database that causes a location services client to send a location services request to a Gateway Mobile Location Centre GMLC node. As discussed above the GMLC node subsequently causes via the MME node the UE to send location information across the network interface between the MME node and the E SMLC node.

At step the subscriber location device retrieves the associated location information stored in the subscriber location database and at step the subscriber location device provides the associated location information to the application in response to the received request. Subsequently procedure ends at step or it can subsequently proceed to step where the subscriber location device monitors the network interface between the MME node and the E SMLC node discussed above.

It should be noted that while certain steps within procedure may be optional as described above the steps shown in are merely examples for illustration and certain other steps may be included or excluded as desired. Further while a particular order of the steps is shown this ordering is merely illustrative and any suitable arrangement of the steps may be utilized without departing from the scope of the embodiments herein.

The techniques described herein therefore provide for improved location services using a subscriber location device. In particular the techniques herein provide for storing and otherwise making available subscriber location information of UE for third party applications which can be used in various types of location based uses e.g. geo fencing emergency situations targeted retailing etc. . Moreover these techniques are scalable to various other types of networks and obviate restrictive permissions of service providers.

While there have been shown and described illustrative embodiments that provide for improved location services it is to be understood that various other adaptations and modifications may be made within the spirit and scope of the embodiments herein. For example the embodiments have been shown and described herein with relation to a using a subscriber location device that monitors and stores subscriber location information for LTE 3GPP networks. However the embodiments in their broader sense are not as limited and may in fact be used with other types of networks and or protocols.

The foregoing description has been directed to specific embodiments. It will be apparent however that other variations and modifications may be made to the described embodiments with the attainment of some or all of their advantages. For instance it is expressly contemplated that the components and or elements described herein can be implemented as software being stored on a tangible non transitory computer readable medium e.g. disks CDs RAM EEPROM etc. having program instructions executing on a computer hardware firmware or a combination thereof. Accordingly this description is to be taken only by way of example and not to otherwise limit the scope of the embodiments herein. Therefore it is the object of the appended claims to cover all such variations and modifications as come within the true spirit and scope of the embodiments herein.

