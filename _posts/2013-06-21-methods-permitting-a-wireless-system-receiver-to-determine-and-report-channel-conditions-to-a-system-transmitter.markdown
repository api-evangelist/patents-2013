---

title: Methods permitting a wireless system receiver to determine and report channel conditions to a system transmitter
abstract: A method of providing feedback on channel observations to a transmitter includes observing a channel at a receiver based on received signals from the transmitter and determining whether a packet error rate (PER) is rising based on the observing. The receiver determines whether a rising PER is caused by channel noise or interference, and transmits a message to the transmitter indicating the cause of the rising PER. The cause may be encoded in reserved bits of a block acknowledgement (BA) frame or an Acknowledge (ACK) frame, or in a modulation coding scheme (MCS) used to transmit the message. The cause may be detected in response to SNR/RSSI level of received signals, or a number of receiver restarts. The transmitter may change the transmit rate adaptation algorithm to use a lower MCS if channel noise causes the rising PER, and a higher MCS if interference causes the rising PER.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09191146&OS=09191146&RS=09191146
owner: QUALCOMM Incorporated
number: 09191146
owner_city: San Diego
owner_country: US
publication_date: 20130621
---
This application claims priority under 35 U.S.C. 119 e to U.S. Provisional Application Ser. No. 61 780 902 entitled Methods Permitting A Wireless System Receiver To Determine And Report Channel Conditions To A System Transmitter filed on Mar. 13 2013 which is herein incorporated by reference in its entirety.

The invention relates generally to wireless communication systems such as multi user Wi Fi systems and more particularly to methods for providing feedback on channel observations from a wireless receiver to a wireless transmitter.

Performance of a wireless network e.g. a wireless network complying with an IEEE 802.11 standard depends on channel noise and interference present on the wireless medium. Both channel noise and interference can cause decoding errors in received packets thereby increasing the packet error rate PER in a receiving wireless station.

Channel noise is relatively constant background noise that interferes with the reception of a transmitted signal at a receiving wireless station. In general channel noise cannot be decoded to provide a meaningful signal. Every object emits some spectrum of radiation waves heat energy referred to as thermal noise which contributes to channel noise. Another possible source of channel noise includes energy emitted from microwave ovens. In general channel noise cannot be avoided by a receiving wireless station.

In contrast interference as defined herein is an intermittently transmitted signal which is generally capable of being decoded by some receiver but which temporarily interferes with the reception of a transmitted signal at an intended receiving wireless station. Examples of interference signals include signals transmitted by hidden nodes in a Wi Fi system signals transmitted on adjacent channels in a Wi Fi system and signals transmitted by other technologies such as Bluetooth which operate in the same frequency band as a Wi Fi system. In general interference can be avoided in some manner for example by techniques such as the request to send clear to send RTS CTS mechanism of the IEEE 802.11 specification which addresses hidden node interference changing the communication channel in response to the detected interference which addresses interference from signals transmitted on adjacent channels or implementing co existence mechanisms which allow interfering signals to share the channel with the receiving wireless station .

The receiving wireless station typically does not determine a packet error rate of a received packet. Rather for each received packet the receiving wireless station transmits a block acknowledge BA frame to the transmitting wireless station wherein the BA frame includes a bit map that indicates whether or not specific sub frames of the packet were successfully received. The transmitting wireless station calculates the packet error rate in response to the bit map of the received BA frame. The transmitting wireless station then uses the calculated packet error rate in a rate adaptation algorithm to select a modulation coding scheme MCS used to transmit future packets. If the packet error rate becomes high the rate adaptation algorithm determines that the channel condition has deteriorated and in response the transmitting wireless station reduces the physical layer PHY data rate with higher coding gain to transmit future packets.

As described above the transmitting wireless station is informed of packet errors but is not informed whether these packet errors occurred as a result of channel noise or interference. As long as the packet error rate increased as a result of channel noise reducing the PHY data rate with higher coding gain should result in a reduced packet error rate for subsequently transmitted packets. However if the packet error rate increased as a result of interference and the transmitting wireless station reduces the PHY data rate of the subsequently transmitted packets the transmission time of these subsequently transmitted packets will increase undesirably increasing the chance that these transmitted packets will encounter more interference further increasing the packet error rate. It would therefore be desirable to have a method and apparatus for overcoming this problem. More specifically it would be desirable to have a wireless system that allows a transmitting wireless station to adjust the MCS used to transmit packets in a manner that takes into account whether an increased packet error rate is a result of channel noise or interference.

In accordance with one embodiment of the present invention a method is provided for sending feedback on channel observations in a wireless system to a system transmitter. A system receiver observes the condition of a wireless communication channel based on the signals received from the transmitter. The receiver determines whether a packet error rate PER of the received data is rising i.e. channel worsening and if so determines whether the PER is rising as a result of channel noise or interference. The receiver transmits a message to the transmitter indicating whether the rising PER is the result of channel noise or interference. If the rising PER is the result of channel noise the transmitter may respond by transmitting at a lower MCS with higher gain. Conversely if the rising PER is the result of interference the transmitter may respond by transmitting at a higher MCS.

The message transmitted to the receiver may include one or more reserved bits of a block acknowledgement BA frame or an acknowledgement ACK frame which are used to indicate whether the rising PER is caused by channel noise or interference. In another embodiment the MCS used to transmit the message identifies whether the rising PER is caused by channel noise or interference.

In one embodiment the receiver determines whether the rising PER is caused by channel noise or interference by monitoring a signal to noise ratio SNR and or received signal strength indicator RSSI associated with the received packets. If the SNR RSSI is less than a predefined threshold value the cause of the rising PER is designated as channel noise. Conversely if the SNR RSSI is greater than the threshold value the cause of the rising PER is designated as channel interference.

In another embodiment the receiver determines whether the rising PER is caused by channel noise or interference by monitoring the number of times the receiver restarts during a predefined time period. If the receiver restarts a predetermined number of times during the predefined time period then the cause of the rising PER is designated as interference. Conversely if the receiver restarts fewer than the predetermined number of times during the predefined time period the cause of the rising PER is designated as channel noise.

In accordance with other embodiments structures for implementing the above described methods are provided.

The present invention will be more fully understood in view of the following description and drawings.

In wireless networks such as Wi Fi interference and channel noise can both cause decoding errors in received packets. In accordance with one embodiment of the present invention different corrective actions are taken to compensate for errors resulting from channel noise and errors resulting from interference. More specifically if a packet error is caused by channel noise the wireless transmitter will reduce the PHY data rate with higher coding gain. If the packet error is caused by interference which is typically intermittent in nature the wireless transmitter will increase the PHY data rate thereby reducing the required transmission time of subsequently transmitted packets such that it is less likely that these subsequently transmitted packets are adversely affected by the intermittent interference.

Channel noise and or interference may exist within WLAN system and adversely affect the transmission of packet on channel . The operation of WLAN system will now be described in more detail.

If error correlation circuitry determines that the PER is rising YES branch then error correlation circuitry monitors one or more operating parameters of WLAN device to determine whether the increasing PER is a result of channel noise or interference . Various methods used by error correlation circuitry to determine whether increasing PER is a result of channel noise or interference are described in more detail below in connection with .

If the SNR RSSI level is equal to or greater than the level K NO branch then error correlation circuit determines that the increasing PER is the result of interference . This determination is made because it is expected that even if the intermittent interference is significant enough to result in reception errors many of the packets will be received without being adversely affected by the intermittent interference resulting in a relatively high SNR RSSI level.

In error correlation circuitry determines whether the receiver circuitry of WLAN device e.g. the circuitry used to receive packet has been restarted . In general the receiver circuitry of WLAN device is restarted when interference disrupts the reception of packet . In accordance with one embodiment restart detection circuitry within WLAN device detects each restart and in response provides an activated RESTART signal to error correlation circuitry .

If error correlation circuitry determines that the receiver circuitry of WLAN device has not been restarted NO branch then error correlation circuitry determines whether a predetermined time period Thas elapsed . If not NO branch processing returns to . If time period Telapses and WLAN device does not restart the receiver circuitry during this time period T YES branch then error correlation circuit determines that the increasing PER is the result of channel noise . This determination is made because there were no detected instances of interference disrupting the reception of a packet i.e. no detected restarts .

If error correlation circuitry determines that the receiver circuitry of WLAN device has been restarted YES branch then error correlation circuitry increments a restart count by one and determines whether the restart count reaches a predetermined value K . If the restart count has not reached the predetermined value K NO branch then error correlation circuitry determines whether the time period Thas elapsed .

If time period Thas not elapsed NO branch then processing returns to and error correlation circuitry is able to detect up to Krestarts during the time period T.

If error correlation circuit fails to detect Krestarts during the time period T YES branch then error correlation circuit determines that the increasing PER is the result of channel noise . This determination is made because there were not a significant number of detected instances of interference disrupting the reception of a packet i.e. the number of detected restarts

If error correlation circuitry detects Krestarts during the time period T YES branch then error correlation circuit determines that the increasing PER is the result of interference . This determination is made because there were a significant number of detected instances of interference disrupting the reception of a packet i.e. the number of detected restarts K . Although not illustrated in it is understood that the restart count and time period Tare reset after each determination and processing returns to .

Although the present invention has been described in connection with an error correlation circuit that implements either the method of or the method of it is understood that in other embodiments a combination of these methods and can be used to determine whether the increasing PER is a result of channel noise or interference .

Returning to upon determining the cause of the increasing PER error correlation circuitry generates an error acknowledgement message which is transmitted to WLAN device . The error acknowledgement message includes an indication of the detected PER as well as an indication of whether the errors associated with the PER were caused by channel noise or interference . In various embodiments the error acknowledgement message may be a block acknowledgement BA frame or an acknowledgement ACK frame in accordance with the IEEE 802.11 specification.

In accordance with one embodiment of the present invention the indication of whether the increase in the PER was caused by channel noise or interference is provided by one or more indicator bits IB included in the error acknowledgement message . For example if error acknowledgement message is implemented using a BA frame in accordance with the IEEE 802.11 specification then the indicator bits may be implemented using one or more of the 9 reserved bits in the control field of the BA frame. Note that in this embodiment the BA frame may also include a bit map that indicates whether or not specific sub frames of the packet were successfully received.

In accordance with another embodiment of the present invention the indication of whether the increase in the PER was caused by channel noise or interference is provided by transmitting the error acknowledgement message using a first MCS MCS if the increasing PER was caused by channel noise and transmitting the error acknowledgement message using a second MCS MCS different than MCS if the increasing PER was caused by interference . is a flow diagram illustrating this method wherein error correlation circuitry determines whether the rising PER was caused by interference . If so YES branch then error correlation circuitry causes WLAN device to transmit the error acknowledgement message using the second MCS MCS . If error correlation circuitry determines whether the rising PER was not caused by interference NO branch then error correlation circuitry causes WLAN device to transmit the error acknowledgement message using the first MCS MCS . In one embodiment the first MCS MCS is selected to specify a relatively low data rate when the rising PER is caused by channel noise and the second MCS MCSB is selected to specify a relatively high data rate when the rising PER is caused by interference .

Within WLAN device error acknowledgement decoder receives the error acknowledgement message and in response determines whether the increasing PER was caused by signal noise or interference . Note that error acknowledgement decoder can make this determination by decoding the indicator bits of error acknowledgement message or by determining whether the error acknowledgement message is transmitted using MCSor MCS depending on the particular method used to encode this information.

Error acknowledgement decoder then selects a MCS to be implemented by WLAN device to transmit subsequent packets to WLAN device wherein this MCS is selected in response to the cause of the increasing PER .

Conversely if error acknowledgement decoder determines that the increasing PER was caused by channel noise NO branch then error acknowledgement decoder instructs MCS selection logic to use a low MCS i.e. an MCS having a low PHY data rate with a high coding gain to transmit subsequent packets to WLAN device . In this case the subsequent packets transmitted from WLAN device are more likely to be received by WLAN without errors due to the low MCS high coding gain overcoming the channel noise .

In accordance with another embodiment of the present invention WLAN device changes how aggressively error acknowledgement decoder lowers the MCS in response to detected channel noise based on the rate of increase in the PER. For example the error acknowledgement decoder may aggressively lower the MCS e.g. the PHY data rate if the PER increases rapidly in response to channel noise .

In accordance with another embodiment WLAN device may cause error acknowledgement decoder to remove the lowest MCS in response to detecting that the increased PER was caused by interference effectively requiring the use of a high MCS in the manner required by above.

In accordance with another embodiment of the present invention WLAN device as a wireless AP upon determining that the increased PER was caused by interference can elect to move from channel to another channel that is either farther away from the interference channel or the same as the interference channel.

In accordance with another embodiment of the present invention WLAN device as a wireless STA upon determining that the increased PER was caused by interference can elect to search for and associate with another wireless AP.

In accordance with another embodiment of the present invention WLAN device can make other observations regarding channel such as channel rank wherein a high rank channel can support more spatial streams while a low rank channel can support fewer spatial streams. WLAN device transmits the channel rank to WLAN device e.g. in error acknowledge message . In response WLAN device changes its rate adaptation algorithm by using a different subset of the rate table. For instance if WLAN device indicates that channel is a low rank channel WLAN device can modify its rate table e.g. MCS select logic to include more MCSs that implement two spatial streams Nss 2 while excluding MCSs that implement three spatial streams Nss 3 .

Those of skill in the art would understand that information and signals may be represented using any of a variety of different technologies and techniques. For example data instructions commands information signals bits symbols and chips that may be referenced throughout the above description may be represented by voltages currents electromagnetic waves magnetic fields or particles optical fields or particles or any combination thereof.

Those of skill would further appreciate that the various illustrative logical blocks modules circuits and algorithm steps described in connection with the embodiments disclosed herein may be implemented as electronic hardware computer software or combinations of both. To clearly illustrate this interchangeability of hardware and software various illustrative components blocks modules circuits and steps have been described above generally in terms of their functionality. Whether such functionality is implemented as hardware or software depends upon the particular application and design constraints imposed on the overall system. Skilled artisans may implement the described functionality in varying ways for each particular application but such implementation decisions should not be interpreted as causing a departure from the scope of the present disclosure.

The various illustrative logical blocks modules and circuits described in connection with the embodiments disclosed herein may be implemented or performed with a general purpose processor a digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or other programmable logic device discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. A general purpose processor may be a microprocessor but in the alternative the processor may be any conventional processor controller microcontroller or state machine. A processor may also be implemented as a combination of computing devices e.g. a combination of a DSP and a microprocessor a plurality of microprocessors one or more microprocessors in conjunction with a DSP core or any other such configuration.

The steps of a method or algorithm described in connection with the embodiments disclosed herein may be embodied directly in hardware in a software module executed by a processor or in a combination of the two. A software module may reside in RAM memory flash memory ROM memory EPROM memory EEPROM memory registers hard disk a removable disk a CD ROM or any other form of storage medium known in the art. An exemplary storage medium is coupled to the processor such that the processor can read information from and write information to the storage medium. In the alternative the storage medium may be integral to the processor. The processor and the storage medium may reside in an ASIC. The ASIC may reside in a user terminal. In the alternative the processor and the storage medium may reside as discrete components in a user terminal.

In one or more exemplary embodiments the functions described may be implemented in hardware software firmware or any combination thereof. If implemented in software the functions may be stored on or transmitted over as one or more instructions or code on a computer readable medium. Computer readable media includes both computer storage media and communication media including any medium that facilitates transfer of a computer program from one place to another. A storage media may be any available media that can be accessed by a computer. By way of example and not limitation such computer readable media can comprise RAM ROM EEPROM CD ROM or other optical disk storage magnetic disk storage or other magnetic storage devices or any other medium that can be used to carry or store desired program code in the form of instructions or data structures and that can be accessed by a computer. In addition any connection is properly termed a computer readable medium. For example if the software is transmitted from a website server or other remote source using a coaxial cable fiber optic cable twisted pair digital subscriber line DSL or wireless technologies such as infrared radio and microwave then the coaxial cable fiber optic cable twisted pair DSL or wireless technologies such as infrared radio and microwave are included in the definition of medium. Disk and disc as used herein includes compact disc CD laser disc optical disc digital versatile disc DVD floppy disk and Blu Ray disc where disks usually reproduce data magnetically while discs reproduce data optically with lasers. Combinations of the above should also be included within the scope of computer readable media.

The previous description of the disclosed embodiments is provided to enable any person skilled in the art to make or use the present disclosure. Various modifications to these embodiments will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other embodiments without departing from the spirit or scope of the disclosure. Thus the present disclosure is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

