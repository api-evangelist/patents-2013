---

title: Techniques for attesting to information
abstract: Systems and methods for attesting to information about a computing resource involve electronically signed documents. For a computing resource, a document containing information about the resource is generated and electronically signed. The document may be provided to one or more entities as an attestation to at least some of the information contained in the document. Attestation to information in the document may be a prerequisite for performance of one or more actions that may be taken in connection with the computing resource.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09443074&OS=09443074&RS=09443074
owner: Amazon Technologies, Inc.
number: 09443074
owner_city: Reno
owner_country: US
publication_date: 20131206
---
This application is a continuation of co pending U.S. application Ser. No. 13 038 277 filed on Mar. 1 2011 titled TECHNIQUES FOR ATTESTING TO INFORMATION and issuing as U.S. Pat. No. 8 607 067 on Dec. 10 2013 ATTY DOCKET NO. 90204 794049 021500US and incorporates by reference U.S. application Ser. No. 12 981 231 filed on Dec. 29 2010 titled TECHNIQUES FOR CREDENTIAL GENERATION ATTY DOCKET NO. 90204 793799 019300US the contents of each are hereby incorporated in their entirety by reference.

Modern computing networks provide access to a wide variety of computing resources such as data archives search engines data processing data management communications and electronic marketplaces as well as media and entertainment services. As the number and size of such computing resources and their user communities have grown and as these resources and communities become more sophisticated a need has arisen to establish increasingly sophisticated usage policies. For example such policies may include policies that address security privacy access regulatory and cost concerns.

Often policy enforcement in connection with computing resources involves the attestation to one or more properties of a computing resource. As an example a computing resource may be required to have one or more properties before a particular action can be taken in connection with the computing resource. Entities able to provide updates to computing applications for instance often require that the applications being updated are properly licensed. Traditional techniques for attesting to such properties such as techniques utilizing manual registration can be cumbersome and inconvenient. Moreover modern computer networks often involve the control and administration of multiple devices including multiple virtual devices. Therefore the disadvantages of traditional techniques for attesting to various properties are even more pronounced in multiple device environments such as Infrastructure as a Service IaaS and other environments.

Same numbers are used throughout the disclosure and figures to reference like components and features but such repetition of number is for purposes of simplicity of explanation and understanding and should not be viewed as a limitation on the various embodiments.

In the following description various embodiments will be described. For purposes of explanation specific configurations and details are set forth in order to provide a thorough understanding of the embodiments. However it will also be apparent to one skilled in the art that the embodiments may be practiced without the specific details. Furthermore well known features may be omitted or simplified in order not to obscure the embodiment being described.

Techniques described and suggested herein include systems and methods for attesting to one or more properties and for using such attestations. The properties may be properties of or relating to one or more computing resources such as of one or more virtual machine instances. The properties may for example relate to an identity of a computing resource characteristics of the computing resource s configuration the timing of one or more events in connection with the computing resource the location and or role of the computing resource in a network capabilities of the computing resource licensing information and or other characteristics relating to the computing resource. The properties may also relate to characteristics of groups of computing resources such as networks and other collections of computing resources. Generally the techniques described and suggested herein may be used to attest to any type of information data or content.

In an embodiment a document is generated that encodes one or more properties of a computing resource. The document may be generated by a device in a control environment of a remote computing services provider that provides hardware and other resources for operation of the computing resource for which the document is generated. The document may encode the one or more properties in a format that is both human readable and machine readable although any manner of encoding the one or more properties may be used. At a time after the document is generated in an embodiment the document is cryptographically signed. A public key document signature algorithm may be used to sign the document and a corresponding public key may be made available to one or more entities such that an entity having the document a signature of the document and the public key may process the document accordingly to determine whether the document has been altered since the time the document was signed. The signature of the document may be separate from the document or part of the document.

In an embodiment the signed document is made available to the computing resource or other resource operating in connection with the computing resource for attestation to one or more properties encoded by the document. The document and its signature may be for example provided to the computing resource to enable the computing resource to provide the document as necessary. The document may otherwise be made available for use. For instance the document may be made available to a service that may provide the document upon request of the computing resource and or another resource.

As noted a signed document that has been generated for a computing resource may be used to attest to one or more properties encoded by the document. Attestation to one or more of the properties encoded by the document may be a prerequisite to one or more actions being taken. Information in the document may for example be used in one or more authentication processes to allow the computing resource to access one or more other computing resources. The document may also be used to verify various characteristics about the computing resource such as whether the computing resource has a requisite configuration requisite capabilities requisite licenses for one or more components of or utilized by the computing resource and or any characteristics about the computing resource.

To attest to one or more properties in a signed document that has been generated for a computing resource in an embodiment the document is provided to a device operable to process the document to determine whether any requisite properties are indicated by the document. The device may be for example a device that is a third party to a remote computing services provider that provides the use of hardware to operate the computing resource. The device may also be a device of the remote computing services provider or generally any device operable to process the document. As noted above the device that has received the signed document may verify that the document has not been altered since the document has been signed. If the document is determined to be unaltered the device may determine whether any requisite properties are encoded by the document. The device may in some embodiments take one or more additional actions with respect to the document. For instance in an embodiment a remote computing services provider that generated the document may provide a service that enables the verification of information in or relating to the document. The service may for instance be callable by a device to determine whether information contained in the document is still valid whether the document is expired whether the document corresponds to a currently operating computing resource and generally any suitable information that the service may be configured to provide.

As noted if requisite properties are encoded by the document the device may perform or cause to be performed by another device one or more actions. An update to a component of the computing resource may in one embodiment be provided with an update from an update repository. In another example a load balancer may begin directing network traffic to the computing resource. As yet another example a network connection with the computing resource may be established to enable the computing resource to access one or more other computing resources. Generally any action that may be made contingent at least in part on information contained in the document may be taken.

Variations of the above description are also described and suggested herein. For example in some embodiments multiple documents are generated for a computing resource. As an example a document may be generated for each of a plurality of services to which the computing resource may need to attest to one or more properties. The information in each of the documents may be specific to the service for which the document is used. When an action for which attestation to one or more properties is a prerequisite is to be taken one or more documents that encode the one or more prerequisite properties may be selected. In this manner unnecessarily providing unneeded information may be at least partially avoided. As another example in some embodiments documents are generated and signed on demand. The information in documents generated on demand may vary according to the reason for which the documents were generated. Documents generated on demand may for example contain only that information which is necessary for one or more actions to be performed. Other variations are contemplated as being within the scope of the present disclosure including those described in more detail below.

Various approaches may be implemented in various environments for various applications. For example illustrates aspects of an example environment for implementing aspects in accordance with various embodiments. As will be appreciated although a Web based environment may be utilized for purposes of explanation different environments may be utilized as appropriate to implement various embodiments. The environment shown includes both a testing or a development portion or side and a production portion. The production portion includes an electronic client device which may include any appropriate device operable to send and receive requests messages or information over an appropriate network and convey information back to a user of the device . Examples of such client devices include personal computers cell phones smart phones handheld messaging devices laptop computers tablet computers set top boxes personal data assistants electronic book readers and the like.

The network may include any appropriate network including an intranet the Internet a cellular network a local area network a wide area network a wireless data network or any other such network or combination thereof. Components utilized for such a system may depend at least in part upon the type of network and or environment selected. Protocols and components for communicating via such a network are well known and will not be discussed herein in detail. Communication over the network may be enabled by wired or wireless connections and combinations thereof. In this example the network includes the Internet as the environment includes a Web server for receiving requests and serving content in response thereto although for other networks an alternative device serving a similar purpose could be utilized as would be apparent to one of ordinary skill in the art.

The illustrative environment includes at least one application server and a data store . It should be understood that there may be several application servers layers or other elements processes or components which may be chained or otherwise configured which may interact to perform tasks such as obtaining data from an appropriate data store. As used herein the term data store refers to any device or combination of devices capable of storing accessing and or retrieving data which may include any combination and number of data servers databases data storage devices and data storage media in any standard distributed or clustered environment.

The application server may include any appropriate hardware and software for integrating with the data store as needed to execute aspects of one or more applications for the client device and may even handle a majority of the data access and business logic for an application. The application server provides access control services in cooperation with the data store and is able to generate content such as text graphics audio and or video to be transferred to the user which may be served to the user by the Web server in the form of HTML XML or another appropriate structured language in this example.

The handling of all requests and responses as well as the delivery of content between the client device and the application server may be handled by the Web server . It should be understood that the Web and application servers are not required and are merely example components as structured code discussed herein may be executed on any appropriate device or host machine as discussed elsewhere herein. Further the environment may be architected in such a way that a test automation framework may be provided as a service to which a user or application may subscribe. A test automation framework may be provided as an implementation of any of the various testing patterns discussed herein although various other implementations may be utilized as well as discussed or suggested herein.

The environment may also include a development and or testing side which includes a user device allowing a user such as a developer data administrator or tester to access the system. The user device may be any appropriate device or machine such as is described above with respect to the client device . The environment may also include a development server which functions similar to the application server but typically runs code during development and testing before the code is deployed and executed on the production side and becomes accessible to outside users for example. In some embodiments an application server may function as a development server and separate production and testing storage may not be utilized.

The data store may include several separate data tables databases or other data storage mechanisms and media for storing data relating to a particular aspect. For example the data store illustrated includes mechanisms for storing production data and user information which may be utilized to serve content for the production side. The data store also is shown to include a mechanism for storing testing data which may be utilized with the user information for the testing side. It should be understood that there may be many other aspects that are stored in the data store such as for page image information and access right information which may be stored in any of the above listed mechanisms as appropriate or in additional mechanisms in the data store .

The data store is operable through logic associated therewith to receive instructions from the application server or development server and obtain update or otherwise process data in response thereto. In one example a user might submit a search request for a certain type of item. In this case the data store might access the user information to verify the identity of the user and may access the catalog detail information to obtain information about items of that type. The information then may be returned to the user such as in a results listing on a Web page that the user is able to view via a browser on the user device . Information for a particular item of interest may be viewed in a dedicated page or window of the browser.

Each server typically will include an operating system that provides executable program instructions for the general administration and operation of that server and typically will include a computer readable medium storing instructions that when executed by a processor of the server allow the server to perform its intended functions. Suitable implementations for the operating system and general functionality of the servers are known or commercially available and are readily implemented by persons having ordinary skill in the art particularly in light of the disclosure herein.

The environment in one embodiment is a distributed computing environment utilizing several computer systems and components that are interconnected via communication links using one or more computer networks or direct connections. However it will be appreciated by those of ordinary skill in the art that such a system could operate equally well in a system having fewer or a greater number of components than are illustrated in . Thus the depiction of the system in should be taken as being illustrative in nature and not limiting to the scope of the disclosure.

In at least one embodiment one or more aspects of the environment may incorporate and or be incorporated into a virtual computing resources architecture. depicts aspects of an example virtual computing resources architecture in accordance with at least one embodiment. The example virtual computing resources architecture includes a virtual resource provider enabling various clients to interact with provisioned computing resources over a network . The provisioned computing resources may include multiple types of virtual resource such as virtual computing systems and clusters virtual file system volumes virtual private networks data object stores notification services and suitable combinations thereof. The ellipsis between the types of virtual resource and indicates that the virtual resource provider may maintain any suitable number of such computing resource types and or instances. Ellipses are used similarly throughout the drawings.

The virtual resource provider may be implemented at least in part with server computers such as the Web server and the application server described above with reference to and one or more data stores such as the data store of interconnected by a relatively high speed data network not shown in . The server computers and or data store s implementing the virtual resource provider may include different types and or configurations of server computers and or data stores allocated to different virtual resource types and to a control plane of the virtual resource provider . The control plane may include multiple user interfaces that enable the clients to interact with the virtual resource provider including provisioning and interacting with the virtual resources as well as setting policies with respect to the virtual resources . depicts further aspects of a control plane in accordance with at least one embodiment.

The user interfaces of the control plane may include any suitable type of user interface. For example the user interface may include graphical user interfaces GUIs Web based interfaces programmatic interfaces such as application programming interfaces APIs and or sets of remote procedure calls RPCs corresponding to interface elements messaging interfaces in which the interface elements correspond to messages of a communication protocol and or suitable combinations thereof. The user interfaces may include multiple resource interfaces enabling user interaction with the virtual resources . For example there may be one of the resource interfaces for each of the types of virtual resource . As another example one or more of the resource interfaces may enable interaction with multiple virtual resource types . Alternatively or in addition one or more of the types of virtual resource may incorporate interfaces enabling direct interaction e.g. by the clients without mediation by one of the user interfaces .

The user interfaces may further include a provisioning interface enabling authorized users to provision configure re configure and or de provision collectively provision the virtual resources . Although the example control plane includes one such provisioning interface embodiments may include any suitable number of such provisioning interfaces including a provisioning interface for each type of virtual resource . Alternatively or in addition the resource interface corresponding to a particular type of virtual resource may incorporate the provisioning interface for that virtual resource type . The user interfaces of the control plane may still further include a policy management interface enabling establishment viewing editing and or deletion collectively maintenance of virtual resource provider policies including policies with respect to the virtual resources and with respect to policy management. Again although the example control plane includes one such policy management interface embodiments may include any suitable number of policy management interfaces including a policy management interface for each type of virtual resource . The resource interface corresponding to a particular type of virtual resource may incorporate the policy management interface for that virtual resource type .

The control plane may include a policy management component configured at least to provide centralized policy management for the virtual resource provider . The policy management component may receive user specified policies for example specified with the policy management interface and transform user specified policies into a normal form. The policy management component may then optimize the set of normal form policies for example for indexing and or with respect to set size and index the set of normal form policies based at least in part on one or more policy elements of the normal form. The policy management component may then distribute the optimized normal form policies to a set of policy enforcement components in a manner based at least in part on the index.

The control plane may further include a verification mode component configured at least to facilitate verification mode reporting. The verification mode component may collect request evaluation results normal form policies and or decision data map normal form policies to user specified policies and generate reports at specified levels of detail. For example verification mode report detail levels may include a low detail level corresponding to an evaluation result and basic contextual information a medium detail level that adds a set of policies considered to determine the evaluation result a high detail level that further adds a set of decision data considered to determine the evaluation result and a very high detail level that further adds virtual resource provider operational information that may assist anomalous behavior diagnosis e.g. debugging . For example such operational information may include an identification of the set of policy enforcement components involved in evaluating a request associated with the report. In at least one embodiment verification mode may be a mechanism by which authorized users are permitted access to such virtual resource provider operation information. Verification mode may correspond to a sandbox mode in the software development and or testing sense enabling configuration verification and or testing without possible high cost consequences e.g. in terms of financial and or resource costs .

The verification mode component may be further configured to process requests for verification mode tokens e.g. cryptographic tokens and to authenticate such tokens. For example a verification mode token may be submitted with a request in order to indicate that the request is to be processed in verification mode. Alternatively or in addition verification mode tokens may authorize substitution of decision data or at least a portion of the decision data utilized when evaluating a request with respect to a set of policies. For example the verification mode token may authorize substitution of decision data related to user identity thus enabling an administrator to verify that a particular policy set has an intended effect with respect to a particular user.

The control plane may include a workflow management component configured at least to establish and maintain workflows such as resource workflows provisioning workflows and or policy management workflows established responsive to user interaction with the resource interfaces the provisioning interface and or the policy management interface respectively. Workflows may include one or more sequences of tasks to be executed to perform a job such as virtual resource configuration provisioning or policy management. A workflow as the term is used herein is not the tasks themselves but a task control structure that may control flow of information to and from tasks as well as the order of execution of the tasks it controls. For example a workflow may be considered a state machine that can manage and return the state of a process at any time during execution. Workflows may be created from workflow templates. For example a policy management workflow may be created from a policy management workflow template configured with parameters by the policy management component .

The workflow management component may modify further specify and or further configure established workflows. For example the workflow management component may select particular implementation resources of the virtual resource provider to execute and or be assigned to particular tasks. Such selection may be based at least in part on the computing resource needs of the particular task as assessed by the workflow management component . As another example the workflow management component may add additional and or duplicate tasks to an established workflow and or reconfigure information flow between tasks in the established workflow. Such modification of established workflows may be based at least in part on an execution efficiency analysis by the workflow management component . For example some tasks may be efficiently performed in parallel while other tasks depend on the successful completion of previous tasks.

The normal form of a policy may include a defined set of policy elements. depicts aspects of an example normal form policy in accordance with at least one embodiment. The policy includes a policy identifier uniquely identifying the policy one or more effects of the policy reference to one or more principals or actors governed by the policy a specification of one or more actions governed by the policy reference to one or more resources governed by the policy a specification of one or more conditions to be satisfied before the policy is enforced and a set of element modifiers corresponding to the policy elements respectively. The policy may have an alphanumeric and or Unicode representation and or encoding sometimes called the policy document.

The policy identifier may be any suitable identifier uniquely identifying the policy . For example the policy identifier may correspond to an alphanumeric and or Unicode collectively alphanumeric string or integer number. The policy identifier may be utilized to reference the policy . Examples of policy effects include permit and deny. The effect s element of the policy may specify such policy effects. For example a particular policy may permit one or more principals to take one or more actions with respect to one or more resources while another policy may deny a set of actions to a set of principals .

The principal s element of the policy may specify one or more entities known to the virtual resource provider that are capable of making requests of the virtual resource provider . Such entities may include users having a user account with the virtual resource provider customers having a commercial account e.g. a cost tracking account with the virtual resource provider and groups of users and or customers including role based groups such as administrators. Virtual machine instances or other virtual resources other resources and or groups thereof may be also be principals. Such entities may be specified with any suitable identifier including user identifiers customer account numbers group identifiers and alphanumeric strings.

The action s element of the policy may specify one or more actions capable of being performed by the virtual resource provider . Such actions may include actions capable of being performed by the virtual resources of the virtual resource provider and or actions that may be requested with the user interfaces of the virtual resource provider including policy management actions. In at least one embodiment actions specified by the action s element correspond to elements of the user interfaces . Such actions may be specified with any suitable action identifier including interface element identifiers and alphanumeric strings.

The resource s element of the policy may specify one or more resources of the virtual resource provider for which one or more of the action s is valid. Such resources may include virtual resources implementation resources policies and verification mode tokens. Such resources may be specified with any suitable resource identifier including resource identifiers in accordance with a uniform resource identifier URI standard such as Berners Lee et al. Uniform Resource Identifier URI Generic Syntax Request for Comments RFC 3986 Network Working Group January 2005.

The condition s element of the policy may specify a set of conditions to be satisfied before the policy is enforced. For example the condition s may specify the conditions under which the principal s are permitted to perform the action s with respect to the resource s . Such conditions may be specified with any suitable condition specification language including suitable programming languages and may include compound conditions for example specified with Boolean operators. Condition parameters may include any suitable data available to the virtual resource provider . Condition parameter examples include environmental data such as calendar date and time of day and request associated data such as originating network address originating geographical location originating political and or administrative division and communication protocol employed.

By default the policy effect s may be enforced when the specified principal s request the specified action s with respect to the specified resource s and the specified set of condition s are satisfied. However the element modifiers may indicate that the corresponding policy elements specify exceptions. That is that the policy effect s be enforced unless the specified principal s are the actors unless the specified action s are requested unless the specified resource s are the subject of action and or unless the specified set of conditions is satisfied. In addition policy element specifications may include wildcard values. For example a wildcard value may match all and or any valid values of the policy element . Alternatively or in addition wildcard values may be matched contextually. For example a wildcard value may match all and or any values of the policy element that are valid with respect to a particular user customer group and or other context of a particular request.

As described above with reference to the policy management component may transform user specified policies into normal form policies and optimize sets of normal form policies. The optimized set of normal form policies may differ significantly from the supplied set of user specified policies. A single user specified policy can result in the addition of multiple normal form policies. A single normal form policy can participate in enforcing multiple user specified policies. In at least one embodiment each normal form policy maintains a set of references to parent policies which the normal form policy participates in enforcing. For example the set of parent policies may be updated during user specified policy transformation and normal form policy set optimization operations.

The virtual resource provider may be implemented as a collection of networked services. depicts aspects of an example virtual resource provider implemented in accordance with at least one embodiment. The virtual resource provider includes multiple virtual resource services a policy management service an authentication service a set of decision data providers and a verification mode service each interconnected by a network . The arrow indicates that the network is connected to the network of .

Each virtual resource service may maintain a set of provisioned resources and incorporate a resource interface . For example each virtual resource service may maintain one type of virtual resource as described above with reference to and incorporate a corresponding one of the resource interfaces described above with reference to . The policy management service may incorporate a policy management interface corresponding to the policy management interface of .

The policy management service may act as a centralized policy management service for the virtual resource provider managing transforming optimizing and distributing one or more sets of policies to other services of the virtual resource provider . In addition in at least one embodiment services of the virtual resource provider other than the policy management service may maintain policies. For example the virtual resource services may each maintain a set of policies that are relevant to the respective set of provisioned resources . Such policies may be established viewed edited and deleted with policy management interface functionality integrated into the associated resource interface . Such policies may be compatible with the policies maintained by the policy management service . For example the policies may each have a form corresponding to the normal form policy . Further in addition in at least one embodiment policies may be maintained at a location external to the virtual resource provider and supplied for enforcement as part of interactions with the services of the virtual resource provider . For example request incorporates such a policy .

The authentication service may provide authentication services for the virtual resource provider . For example the authentication service may authenticate an integrity and or an authenticity of policies . In addition the authentication service may authenticate an identity of clients customers and or users of the virtual resource provider . For example the policy management interface and or the resource interfaces may utilize the authentication service to establish and or verify an identify and or authority of a user with respect to policies and or provisioned resources . The authentication service may utilize any suitable authentication mechanism including any suitable cryptographic authentication mechanism to provide the authentication services. Such authentication mechanisms are well known in the art and need not be detailed here.

The decision data providers may provide data required by policy enforcement components to evaluate requests that are subject to policies. For example the provisioned resources may be associated with various labeling and or naming schemes resource names and the decision data providers may include a name resolution provider that maps or resolves such resource names to locations e.g. network locations within the virtual resource provider . The decision data providers may further include providers of data required to determine whether the condition s of the policy are satisfied. For example a particular policy may deny interaction with a particular resource from a specified set of geographic locations and or regions collectively geographic locations . In such a case the decision data providers may include a geographic resolution provider capable of identifying a set of geographic locations associated with the request .

The verification mode service may provide verification mode functionality e.g. as described above with reference to the verification mode component of as a service to the other services of the virtual resource provider . For example the resource interfaces and or the policy management interface may query the verification mode service to authenticate a verification mode token and or may provide evaluation results for reporting in response to a request. An example verification mode service is described below in more detail with reference to . However the description first turns to further aspects of the policy management service in accordance with at least one embodiment.

The policy management service of is an example of the policy management service of and includes a policy management interface corresponding to the policy management interface of . Users of the virtual resource provider may interact with the policy management interface to specify view edit and or delete policies in a user specified policy set maintained by the policy management service . The policy management service may further maintain a normalized policy set corresponding to the user specified set . The normalized policy set may be maintained by a policy normalization component . The policy management service may participate in policy enforcement for example the policy management service may include a policy enforcement component corresponding to one of the policy enforcement components of . In particular the policy enforcement component may enforce policies referencing actions that may be requested with the policy management interface . Furthermore in at least one embodiment at least a portion of the normalized policy set or a copy thereof is distributed to policy enforcement components located throughout the virtual resource provider . The policy management service may include a policy distribution component configured at least to distribute the normalized policy set throughout the virtual resource provider for example based at least in part on a policy index .

Policies in the user specified policy set may be specified with alphanumeric strings. A first example of such a policy is 

The policy normalization component may generate sets of normalized policies corresponding to user specified policies and store the normalized policies in the normalized policy set . For example each policy in the normalized policy set may have a form corresponding to the normal form policy of . The policy normalization component may generate multiple normal form policies corresponding to a user specified policy for example due to decompounding with respect to policy elements . The fourth user specified policy example described above may be decompounded to generate two normal form policies both with the effect element specifying a permit effect the principal element specifying the user with identifier msmith and the action element specifying the configure action. For example the resource element of one of the normal form policies may specify all virtual computer systems associated with the customer identifier example corp the resource element of the other of the normal form policies may specify all block data volumes associated with the customer identifier example corp . In this example the user specified policy has been decompounded with respect to the resource element. As another example the policy normalization component may be configured to decompound the first user specified policy example described above with respect to the action element and or the resource element.

Wildcards may be first expanded into a set of values for example based on a context of the user specified policy before being decompounded. The decompounding need not be complete with respect to policy element values. For example the policy normalization component may be configured to protect particular subsets of policy element values policy element atoms or indivisibles from decompounding. As one example the set of actions corresponding to create read write delete may be protected from decompounding.

The policy normalization component may reduce a size of the normalized policy set for example by reducing redundancy in the normalized policy set . The policy normalization component may detect that a newly added normal form policy is contained within the scope of one or more of the normalized policy set and delete the newly added normal form policy from the normalized policy set . Normal form policies such as the normal form policy of may correspond to sets of points in one or more policy spaces for example spaces having dimensions corresponding to the policy elements of the normal form and or Boolean valued functions over the policy spaces. Each effect element value may correspond to such a policy space. For example there may be a permit space and a deny space. The policy enforcement components may be configured to require an explicit permit in the absence of a deny in order to permit a particular action that is to require a point in a permit space without a corresponding point in the deny space. Wildcards may correspond to regions of such policy spaces. Element modifiers may be used to define complimentary sets of the policy spaces. The policy normalization component may detect whether the normal form policy is within in the scope of a set of normal form policies e.g. the normalized policy set by determining whether the set of points corresponding to the normal form policy is contained within the set of points corresponding to the set of normal form policies.

The policy normalization component may further reduce the size of the normalized policy set by compounding and or recompounding normal form policies in the normalized policy set with respect to policy elements . Some policy element values may correspond to multiple other policy element values so that a single normal form policy may correspond to a same policy space region as multiple other normal form policies. For example a principal element value corresponding to a group may be equivalent to multiple principal element values corresponding to individual users. The policy normalization component may be configured to detect compoundable subsets of the normalized policy set and to compound the detected subsets along policy element dimensions to configured granularities which need not be the coarsest available granularity . Throughout generation and or transformation of the normalized policy set the policy normalization component may be configured to maintain the set of parent policies of each normal form policy . For example the set of parent policies may include the identifier of each user specified policy that the normal form policy participates in enforcing.

Different regions of the policy space s may be enforced by different policy enforcement components . Different policy enforcement components may enforce overlapping and even same regions of the policy space s . However in at least one embodiment different policy enforcement components enforce disjoint regions of the policy space s . The policy distribution component may determine regions of the policy space s and corresponding subsets of the normalized policy set to assign and or distribute to the policy enforcement components . To facilitate such distribution the policy distribution component may establish and maintain the policy index . The policy index may index the normalized policy set with respect to policy element values and or subsets thereof. For example the policy index may index the normalized policy set with respect to resource and or resource type. Policies in the normalized policy set may be multiply indexed for example with respect to multiple different policy element values and or value subsets. The policy distribution component may distribute the normalized policy set to the policy enforcement components based at least in part on the policy index . For example sets of indices of the policy index may define policy enforcement domains corresponding to subsets of the normalized policy set and the policy distribution component may distribute such subsets to the policy enforcement components as units. In at least one embodiment each normal form policy incorporates its indexing information and or the policy index is incorporated into the normalized policy set .

The distributed nature of policy enforcement in the virtual resource provider can complicate efforts to verify that a particular set of user specified polices has its intended consequences. depicts aspects of an example verification mode service in accordance with at least one embodiment that can facilitate such verification. The verification mode service may include a token management component accessible through a token interface . The token management component may issue verification mode tokens in response to authorized requests record the issued tokens in an issued token database and authenticate the issued tokens upon request. Following processing of the request in verification mode a reporting component of the verification mode service may prepare a verification mode report at a specified level of detail. Requests for such reports as well as level of detail specification may be made with a reporting interface of the verification mode service . Such report requests may not include all the data required by the reporting component . The verification mode service may further include a data collection component configured to interact with other services of the virtual resource provider to obtain the required data.

Policies with respect to actions that may be requested with the token interface and or the reporting interface may be enforced by a policy enforcement component corresponding to one of the policy enforcement components of . For example such policies may define a set of users of the virtual resource provider authorized to be issued verification mode tokens and may require an authentic verification mode token before providing the verification mode report. The token management component may issue multiple types of tokens for example tokens authorizing verification mode reporting may be a separate type from tokens authorizing substitution of decision data during verification mode processing of the request . Tokens authorizing substitution of different subsets and or types of decision data may also be separate types. Verification mode policies may distinguish between different types of tokens. Generation issuance authentication and revocation of cryptographic tokens are well known in the art and need not be described here in detail.

Requests at the reporting interface may specify a type of report and or level of reporting detail. For example the workflow management component may generate the request in response to detecting a verification mode request at one of the resource interfaces . The reporting component may generate the requested report based on a corresponding report template utilizing the data collection component to collect data as necessary. Fields that may be included in the verification mode report include one or more results of evaluation of the verification mode request by one or more of the policy enforcement components a subset of the normalized policy set and or the user specified policy set relevant to the verification mode request and or utilized during the evaluation by the one or more policy enforcement components decision data utilized during the evaluation virtual resource provider contextual operating data capable of influencing the evaluation and or versions thereof filtered and or summarized to the specified level of detail. The reporting component may be configured to map a set of normal form policies to a corresponding set of user specified policies based at least in part on the set of parent policies referenced by each normal form policy .

Each virtual resource service may be implemented with a collection of physical server computers and or network elements. depicts aspects of an example virtual resource service in accordance with at least one embodiment. The virtual resource service depicted in is an example of the virtual resource service of . The example virtual resource service includes multiple virtual resource servers and one or more interface servers interconnected by a network . The provisioned resources and policies of may be distributed across the virtual resource servers of utilizing any suitable data distribution technique. For example each virtual resource server may maintain a subset of the provisioned resources and a corresponding subset of the policies . Such subsets may deliberately overlap for various purposes including data durability and service capability.

The interface server s may collectively maintain a resource interface and a policy enforcement component . The resource interface may correspond to one of the resource interfaces of . Similarly the policy enforcement component may correspond to one of the policy enforcement components of . The policy enforcement component of may enforce policies referencing actions that may be requested with the resource interface of . Such policies may include policies distributed by the policy management service policies stored on the virtual resource servers and policies accompanying requests to the resource interface such as the policy of . For example the resource interface may require a permit evaluation by the policy enforcement component before further processing a request.

Clients may utilize the configure resource interface element to request a configuration and or reconfiguration of one or more of the provisioned resources . For example if the provisioned resources include data object stores the configure resource interface element may enable clients to set a maximum size of a data object store over which they have authority. Clients may utilize the read resource attribute s interface element to request a read or view of one or more attributes of one or more of the provisioned resources . For example the read resource attribute s interface element may enable clients to obtain copies of specified data objects from specified data object stores. Clients may utilize the update resource attribute s interface element to request an update of one or more attributes of one or more of the provisioned resources . For example the update resource attribute s interface element may enable clients to update specified data objects and or create specified data objects in specified data object stores.

Some provisioned resources may have functionality that can be activated and the activate resource functionality interface element may be utilized to request an activation of that functionality. For example some types of data object store may have a capability to analyze stored data objects and the activate resource functionality interface element may enable authorized clients to start stop suspend and or perform the analysis. The delete resource attribute s interface element may enable clients to request a deletion and or re initialization of one or more attributes of one or more of the provisioned resources . For example clients with sufficient authorization may delete specified data objects from specified data object stores.

In the example resource interface utilization of the verification mode versions of the interface elements indicates that the corresponding request is to be processed in the verification mode is a verification mode request . For example the resource interface may submit the request to the policy enforcement component as usual but inhibit any actions that would usually result from a permit evaluation result. Regardless of the evaluation result the resource interface may respond to the request with a verification mode report. For example the resource interface and or a controlling workflow may invoke an interface element of the verification mode reporting interface to generate the verification mode report. The use of dedicated interface elements is only one technique for indicating that a request is to be processed in verification mode. Alternate embodiments may utilize any suitable technique. For example interface elements may incorporate an explicit indicator e.g. a flag for indicating the request is a verification mode request. The resource interface may include an explicit set of interface elements not shown in for activating and deactivating verification mode processing. As a further alternative or in addition receipt of a verification mode token e.g. issued by the verification mode service may act as an indication that an associated request is to be processed in verification mode.

Each interface element may correspond to a request e.g. the request of subject to a subset of the policies . In order to evaluate the request with respect to the subset of the policies the resource interface receiving the request may submit the request to the policy enforcement component . depicts aspects of an example policy enforcement component in accordance with at least one embodiment. The policy enforcement component of is an example of the policy enforcement component of .

The policy enforcement component may include a policy collector configured at least to collect relevant policies from locations throughout the virtual resource provider and store them local to a decision engine in a policy cache . Collected policies may not be in normal form . The policy enforcement component may further include a policy normalization component having functionality corresponding to that of the policy normalization component of the policy management service . The policy normalization component may normalize the set of policies in the policy cache . The decision engine may evaluate requests submitted to the policy enforcement component with respect to relevant policies in the policy cache . At times additional data may be required to support particular decisions with respect to particular policies. The policy enforcement component may still further include one or more decision data collectors configured at least to collect the required decision support data decision data from locations throughout the virtual resource provider . Collected decision data may be stored local to the decision engine in a decision data cache .

The policy collector may update the policy cache responsive to policy update notifications for example received from the policy management service and or the virtual resource servers . The policy collector may subscribe to notifications of updates to relevant policies and or policy sets maintained at the policy management service and or the virtual resource servers . Alternatively or in addition the policy collector may periodically search for changes to policies in the policy cache and or for newly relevant policies.

The decision data collector s may include one or more data collectors configured to interact with the decision data providers . The decision data collector s may collect decision data responsive to requests by the decision engine for example requests by the decision engine for decision data that is not present in the decision data cache and or that is out of date. The decision data collector s may furthermore maintain one or more subsets and or types of decision data in the decision data cache for example responsive to update notifications from the decision data providers and or with updates discovered by periodic searching.

As described above with reference to the control plane may be facilitated by one or more workflows maintained by the workflow management component . depicts example steps for workflow management in accordance with at least one embodiment. At step a request may be received by an interface of the control plane . For example one of the user interfaces of the control plane may receive the request from a user customer and or administrator of the virtual resource provider . The request may be a call to a programmatic interface such as an application programming interface API or a Web services interface e.g. utilizing a Simple Object Access Protocol SOAP call. Alternatively or in addition the request may be received through a graphical user interface GUI such as a Web based GUI. At step the request may be analyzed to determine one or more actions required to successfully complete the request. For example the provisioning interface may analyze the request and determine a set of actions required to provision a set of virtual resources . When an interface element receiving the request corresponds to a specific action to be performed the interface may extract information from the request to be utilized in determining aspects and or parameters of the action to be performed.

At step a request may be sent to create a workflow based at least in part on the one or more actions determined at step . For example provisioning interface may send the request to the workflow management component . The request to create the workflow may include the action s action metadata such as type of action and or action parameters. In at least one embodiment the control plane and or the workflow management component maintains a job queue for such requests and workflows are created responsive to new additions to the job queue. At step a workflow and one or more component tasks may be created. For example the workflow management component may analyze the request of step to determine the appropriate workflow and component tasks to create.

At step execution of the component task s may be guided in accordance with the workflow. For example the workflow management component may activate elements of interfaces of various implementation resources to provision the set of virtual resources. Alternatively or in addition the workflow management component may manage bids for execution of the component task s by components of the virtual resource provider . At step it may be determined whether the workflow has finished. For example the workflow management component may determine whether a final task in a sequence of tasks managed by the workflow has completed. If so a procedure incorporating step may progress to step . Otherwise the procedure may return to step for a next task and or task sequence. Workflows may guide multiple task sequences executing in parallel. In this case it may be that the workflow is not finished until each of the multiple task sequences completes and or an explicit workflow finished flag is set by one of the component tasks. At step the sender of the request of step may be informed of result s of the action s .

In an embodiment the process includes receiving a request for a set of virtual machine instances. The request for the set of virtual machine instances may be made for instance by a customer of a remote computing services provider. The request for a set of virtual machine instances may specify one or more actions to be taken in connection with the requested set of virtual machine instances such as provisioning the virtual machine instances. Other information may also be received as part of or generally in connection with the request such as one or more machine images to be used with the set of virtual machine instances and other configuration details. However the request may be any general request that identifies a set of virtual machine instances.

In an embodiment authorization specifications for the requested virtual machine instances are received . The authorization specifications may be received separately from or as a part of the request for virtual machine instances. In embodiments the authorization specifications include information specifying a policy and or granularity information. Information specified in the policy may be in accordance with the above description although any method of specifying actions that may or may not be taken by one or more virtual machine instances possibly under one or more conditions may be used. As an example the policy may specify that all users may use the virtual machine instances to read a particular storage volume that is maintained by a block data storage service. Similarly another policy may specify that only certain users may use the identified virtual machine instances to write to the storage volume. Generally the policy may specify one or more actions that may be taken by one or more virtual machine instances. The actions may specify for example application programming interface API calls that may be made. The API calls may be selected from a plurality of possible calls that may be made in connection with various services provided by a remote computing services provider or generally any operator of computing services. As a specific example a policy may state that any virtual machine instance having particular credentials may make certain API calls that can terminate stop and or otherwise affect other virtual machine instances.

The granularity information in an embodiment is information which may be used to determine how credentials for the requested virtual machine instances are to be distributed. For a set of one or more virtual machine instances in an embodiment the granularity information is determinative of how many sets of credentials are to be generated for the set of virtual machine instances and is determinative of one or more subsets of the set of virtual machine instances to which the credentials are to be distributed. As an example the granularity information may specify that each of the requested virtual machine instances should receive a corresponding unique set of credentials. The granularity information may also specify other levels of granularity. For instance granularity information may specify that one or more groups of the requested virtual machine instances should receive a corresponding set of credentials for some definition of the groups which may be user defined and or selected. For instance the granularity information may identify a plurality of subsets of the set of virtual machine instances where each subset of the set of requested virtual machine instances is to receive a separate set of credentials. The subsets may be identified based at least in part on one or more characteristics of the subsets and generally the parameters for the granularity information may include information identifying a host class a placement group or other logical grouping of computing resources a geographic location one or more hardware characteristics for hardware used to provision the virtual machines and generally any information which may differentiate virtual machine instances from one another including but not limited to user assigned tags for the virtual machine instances. Users may also define subsets by selecting virtual machine instances for each subset.

In an embodiment the set of virtual machine instances is provisioned . Provisioning may be accomplished by allocating hardware resources to the requested virtual machine instances as described above. In addition in an embodiment credentials for the virtual machine instances are generated in accordance with an embodiment. The credentials may be generated according to the authorization specifications. Continuing with an example provided above if the authorization specifications indicate that each of the virtual machine instances should have their own credentials credentials may be generated for each of the virtual machine instances. Generally if the authorization specifications indicate that each of a plurality of subsets of the virtual machine instances should receive their own credentials credentials may be generated for each subset. It should be noted that while generating credentials for the virtual machine instances is shown as a set occurring subsequent to other steps in the process credential generation may occur at other times. For instance credentials may be pre generated and assigned as needed. In this example generating credentials may comprise assigning already generated credentials as necessary based at least in part on granularity information.

Once the credentials for the virtual machine instances are generated the generated credentials are distributed to the virtual machine instances. Distribution of the credentials for virtual machine instances may be accomplished in any suitable manner such as by sending over a communications network the credentials to the virtual machine instances for use by the virtual machine instances in authenticating themselves with respect to one or more virtual resource services such as in a manner described above. The distributed credentials may be made available to one or more processes executing on the virtual machine instances such as by configuring a virtual machine instance that has received the credentials to be able to provide the credentials to the one or more processes and or storing the distributed credentials in a data store accessible to the virtual machine instance. As another example the credentials may be distributed and or otherwise made available via an unauthenticated web server located at a well known network location such as a predetermined IP address for a server configured to provide credentials to virtual machine instances and or other computing resources. Credentials may also be made available via a public key cryptography system PKCS interface. In an embodiment the public key cryptography system interface is an interface that complies with PKCS 11 and or other suitable standards. The distributed credentials may be maintained in a manner wherein the distributed credentials are accessible only by the virtual machine instances to which the distributed credentials were distributed possibly subject to one or more exceptions. For example the distributed credentials may be accessible by a computer system involved in the management and distribution. Thus another virtual machine instance to which the credentials have not been distributed may be prevented from accessing the credentials unless another machine instance to which the credentials were distributed has provided the credentials to the other virtual machine instance and any applicable policies allow such distribution. Distribution of the generated credentials may be done in a secure manner such as over a secure shell SSH connection and generally may be done in any suitable manner which results in credentials being usable by virtual machine instances for authentication. Distribution of credentials may also include updating one or more systems used for authentication such as an authentication service described above which may maintain a mapping of credentials to virtual machine instances such as by one or more database tables. In an embodiment one or more data structures such as a relational database table are used to associate either directly or indirectly credentials with one or more actions that may be taken by virtual machine instances or other resources that are able to provide the credentials possibly subject to one or more other conditions. An authentication service may utilize the one or more data structures in one or more determinations whether to provide access to a virtual machine instance requesting the access. Upon distribution of credentials such data structures may be updated.

In an embodiment one or more policies applicable to the authorization specifications are updated . For instance if the authorization specification specifies that one or more subsets of the requested virtual machine instances will have certain privileges one or more stored policies may be updated to reflect the privileges granted to the requested virtual machine instances. As noted one or more policies may be based at least in part on credentials. As an example a policy may permit or deny one or more actions to virtual machine instances having a particular set of credentials and or a certain class of credentials. Accordingly updating policies may include identifying in the policies information that allows specific credential based conditions to be checked. Updating policies may also include for one or more policies associated with the credentials assigning one or more virtual machine instances to which credentials have been distributed as principals of the one or more policies. As with other steps in the process and generally with steps of other processes described herein updating policies is shown in a particular place in connection with a series of steps. However policy updates may be made at any suitable time.

Additional actions may be taken in connection with the process or variations thereof. For example the credentials may be received from the virtual computing instances and used in an authentication process as described below. In addition more than one set of credentials may be provided to one or more virtual machine instances. Further while various embodiments described herein focus on authentication in connection with services of a remote computing services provider credentials distributed in accordance with the various embodiments may be used in other instances such as for authentication with third parties and generally any process in which credentials are used.

As noted above credentials may be generated in accordance with information specifying a granularity for such credentials. Accordingly shows an illustrative example of the process which may be used to generate and distribute credentials according to granularity information specified by the user. In an embodiment a granular unit is identified . A granular unit may be a set of one or more virtual machine instances associated with a set of credentials used by all of the virtual machine instances in the set. The granular unit may be based in part on granularity information provided by a user in connection with the request for one or more virtual machine instances. For example if the granularity information indicates that each virtual machine instance is to receive its own set of credentials a granular unit may be a virtual machine instance. Granular units may also be sets of multiple virtual machine instances such as indicated by the granularity information. A granular unit may be for example a set of all virtual machine instances of a customer of a remote computing services provider that are implemented using a particular class of host hardware or a subset of such virtual machine instances. As another example a granular unit may be a set of a customer s or generally user s virtual machine instances located in a particular data center or having been assigned with a tag. As yet another example a granular unit may be a set of a user s virtual machine instances having a particular property or combination of properties or generally satisfying a set of one or more criteria.

In an embodiment credentials for the identified granular unit are generated in accordance with an embodiment. Generation of the credentials may be performed in any suitable manner which may depend on one or more protocols for which the credentials will be used. In an embodiment credentials are generated as unique identifiers for corresponding sets of virtual machine instances. Credentials may be or include a key for an authentication algorithm such as a key for a public key cryptography algorithm. Thus for an identified granular unit the credentials are a unique identifier string to be shared by the virtual machine instances of the identified granular unit. However the credentials may be any set of credentials that may be used with an authentication protocol. In addition the credentials may encode at least some information representative of metadata of resources in the granular unit. For instance if the granular unit is a virtual machine the credentials may encode an Internet Protocol IP address for the virtual machine instance and if the identified granular unit includes a plurality of virtual machine instances the credentials may encode a set of IP addresses for the virtual machine instances of the identified granular unit. Generally the credentials may encode any information about any virtual machine instances associated with the credentials. In an embodiment credentials encode one or more policies. For instance if a virtual machine instance is implemented on a host machine credentials accessible by the virtual machine may encode a token that may be required to be used with a key provided by the host machine in an authentication procedure. In this manner the credentials encode a policy that requires use of the credentials to be limited to virtual machines implemented by the host. Such credentials may be provided to multiple virtual machines on the same host. Thus if another virtual machine provides the credentials from another host that does not have the corresponding key authentication may fail. In addition to the above as noted credentials or portions thereof may be pre generated and assigned as needed instead of generated upon identification of a granular unit as illustrated in .

In an embodiment the generated credentials are added to a credentials mapping. As discussed the mapping may associate credentials of virtual machine instances with the instances themselves. For instance the mapping may associate credentials to a set of IP addresses and or other identifiers of virtual machine instances. As noted above the mapping may be maintained by an authentication service. For a virtual machine the mapping may be used in accordance with the above description to verify for instance that a request made by a virtual machine using the credentials is associated with the credentials to ensure that a virtual machine has the proper privileges to perform any actions requested by the virtual machine and or to allow the virtual machine to establish a connection such as an SSH HTTP or other connection with another system such as a system providing a virtual resource service as described above.

In an embodiment a determination is made whether there are additional granular units for which credentials could be generated. If for example credentials have not been generated to all granular units specified by authentication information specified by a customer the determination may be that there are additional granular units. In an embodiment if the determination is that there are additional granular units for which credentials should be generated the next granular unit is identified in accordance with an embodiment. The next granular unit may be the same type as the previously identified granular unit although it may be of a different type. For instance if the previously identified granular unit was a set of one or more virtual machines another identified granular unit may have more or less members of a set of one or more virtual machines. With the next granular unit identified credentials for the identified granular unit are generated such as in a manner described above. If however it is determined that there are no additional granular units then the generated credentials are distributed to the computing resources of the granular unit or units for which credentials were generated. As an example if credentials were generated for each of a plurality of virtual machine instances the generated credentials would be distributed to each of the virtual machine instances. Similarly if credentials were generated for a granular unit having multiple virtual machine instances the credentials generated for the granular unit may be distributed to the virtual machines of the granular unit. In this last example each virtual machine instance in the granular unit may receive the same credentials such as the same unique identifier while virtual machines may receive other credentials.

As discussed credentials distributed to virtual machine instances in accordance with various embodiments described herein can be used in various ways. shows an illustrative example of one such process which shows how credentials generated in accordance with the various embodiments may be used. In an embodiment the process includes receiving credentials in connection with a request to access a computing resource. A request to access a computing resource may be received such as in the manner described above. For instance a resource interface of a virtual resource service may receive a request generated from another virtual resource service that operates virtual machine instances on behalf of one or more customers and or other users. As a concrete example a resource service for virtual machine instances may send a request originating from one of the virtual machine instances to a block storage or other storage resource. In an embodiment the request includes the credentials from a virtual machine instance that made the request although the credentials may be provided separately from the request such as before the request or after a subsequent authentication request for credentials from the receiver of the request. Generally the credentials may be received in any suitable manner and the manner by which credentials are received may vary according to various protocols being used in accordance with the various embodiments.

When the credentials in connection with the request to access the computing resource are received in an embodiment a determination is made whether the requester has a privilege allowing the requested access. Determination may be made for instance by a policy enforcement component of a virtual resource service such as in the manner described above in connection with . The policy enforcement component may utilize an authentication service to authenticate the credentials and if successfully authenticated establish a connection with the virtual machine instance that provided the credentials at least for a period of time. In some embodiments however the receiver of the credentials may authenticate a virtual machine supplying the credentials itself instead of using a separate authentication service. Generally any process for determining whether the credentials received are valid may be used.

If it is determined that the requester has a privilege allowing the requested access the requested access may be provided . Providing the requested access may be performed in any suitable manner. In an embodiment providing the requested access includes establishing an SSH or other connection with a computing device of a resource such as a server operating in connection with a virtual computing resource. As another example the virtual machine instance requesting the access may be provided read write and or other access to a data store of a data storage service. As another example a virtual machine instance running one or more applications such as Red Hat Enterprise Linux RHEL may be provided access to an update service for the one or more applications such as an RHEL update repository. In this manner the virtual machine instance can use its credentials to update applications running on the virtual machine instance. It should be noted that credentials may be used in different ways in different circumstances. For instance credentials at some times may be used to establish a connection with another computing device while at other times credentials may be used to simply cause performance of one or more operations at another computing resource.

If it is determined that the requester does not have a privilege allowing the requested access then the requested access is denied . As illustrated in although not necessary one or more other actions may be completed in addition to denying the requested access. For instance as illustrated one or more users are notified of a security violation. Users may receive for example an electronic message specifying that a security violation has occurred and including details of the security violation. In addition as an example remedial action may be taken in accordance with an embodiment. As an example if the request to access a computing resource included a set of credentials and those credentials were used to make the determination that the requestor did not have a privilege allowing the requested access the credentials may be permanently or temporarily invalidated so that the credentials are not used in attempts to access other computing resources. Generally any remedial action may be taken. Further as with other processes described herein the process is shown in a simplified manner and variations are contemplated as being within the scope of the present disclosure. For instance any remedial action taken may be based at least in part on additional information such as a number of failed authentication attempts the type of access requested information encoded in the request such as an IP address or other information and the like.

In some instances it may be desirable to manage the validity of credentials in order to increase security. For instance in an embodiment if credentials belong to a single virtual machine instance and the virtual machine instance currently is not provisioned but stored in a data store for potential future use the virtual machine may be unable to use the credentials. Thus it may be desirable to prevent the credentials from being used when no virtual machine is able to use the credentials to authenticate itself either because of a state of one or more virtual machines having the credentials and or because of one or more policies. Accordingly shows an illustrative example of a process for managing credentials in accordance with an embodiment. In this illustrative example the process includes distributing credentials to one or more virtual machine instances. Distribution of the credentials may be performed in any suitable manner such as those described above.

In an embodiment provisioning of virtual machine instances is detected . Detection of provisioning of the computing resources may be performed in any suitable manner. In an embodiment provisioning a virtual machine instance is accomplished according to a workflow that includes sending a message that the virtual machine instance has been successfully provisioned. Accordingly detecting the provisioning of virtual machine instances may be performed by receiving one or more such messages. It should be noted that while detecting provisioning of virtual machine instances is used to illustrate an embodiment of the present disclosure other actions may be taken in place of detection of provisioning the virtual machine instances such as receiving a request to provision the virtual machine instances or generally receiving any signal indicative of a part of a provisioning process.

In an embodiment when the provisioning of the virtual machine instances is detected or generally when an event in connection with the provisioning of the virtual machine instances is detected the credentials are activated for the virtual machine instances. Activating the credentials may be performed for instance by updating a credentials mapping of credentials to virtual machine instances to reflect the credentials being active. Such may be accomplished by adding the credentials into the mapping by tagging the credentials in a mapping as active or generally in any suitable manner. As a concrete example a database table or other mechanism of an authentication service that associates credentials with virtual machine instances may be updated to reflect whether the credentials are currently active by adding an appropriate number of rows into the table or setting a value for the credentials to indicate that the credentials are active. If credentials are active then virtual machine instances having the credentials may use the credentials for authentication. If the credentials are inactive then any device attempting to use the credentials for authentication should be unable to authenticate. Generally activating the credentials for the provision of computing resources can be done in any manner that allows the provisioned computing resources to utilize the credentials for authentication with one or more other virtual resource services. For instance if a virtual machine wants to access a data store of a storage service the virtual machine may use the credentials to authenticate itself with the storage service because the credentials are active. The credentials may remain active as long as the computing resources remain provisioned.

In an embodiment deprovisioning of one or more of the provisioned virtual machine instances s detected . While deprovisioning is used for the purpose of illustration any suitable action may be detected including but not limited to actions related to but not necessarily equivalent to the deprovisioning of provisioned virtual machine instances. An example includes receiving a command to deprovision one or more of the provisioned virtual machine instances. Returning to the illustrated example detection of deprovisioning of the one or more provisioned virtual machine instances may be made when hardware for a virtual machine instance is deallocated from the virtual machine instance and a memory state of the virtual machine instance is stored for future use.

In an embodiment upon detection of the deprovisioning of one or more of the deprovisioned virtual machine instances the credentials for the deprovisioned virtual machine instances are deactivated in order to ensure that credentials cannot be used by any other computing resources. In this manner if a security breach occurs with respect to a deprovisioned virtual machine the credentials cannot be used to gain unauthorized access to one or more computing resources. For example if all of the virtual machine instances sharing the same credentials are deprovisioned then the credentials would not be active for any virtual machine and therefore cannot be used for unauthorized authentication. Similarly in embodiments where virtual machines authenticate themselves using the credentials and information about themselves such as an IP address for authentication authentication using the credentials may be impossible or at least more difficult. In one embodiment if less than all of the provisioned virtual machine instances sharing the same credentials are deprovisioned the credentials may be deactivated only for the deprovisioned virtual machine instances while the remaining provisioned virtual machine instances may continue to use the credentials.

In some instances it may be desirable to take different actions with respect to credentials when different events occur. For instance in some instances it may be desirable to invalidate credentials upon detection of a security breach while in other instances it may be desirable to keep credentials valid while taking other remedial action. Accordingly illustrates an illustrative example of a process for managing credentials in accordance with an embodiment. In an embodiment a security breach of a virtual machine instance is detected . A detection of a security breach may be done in any suitable manner or combination thereof. For instance detection of the security breach may be made upon a determination that credentials used in a request to access a computing resource were unsuccessfully used. As another example the security breach may be detected based at least in part on access to a virtual machine instance by an unauthorized user. Other ways of detecting the security breach may be used as well including but not limited to manual detection detection of abnormal operation and or other automatic methods and or generally any suitable method.

In an embodiment a determination is made which action to take upon detection of the security breach. The determination may be based at least in part on one or more parameters such as a type of breach that is detected. While for the purpose of illustration three different actions are shown there may be greater than or fewer than three actions and the actions may be different than those illustrated. In an embodiment upon detection of the security breach one of several actions are selected. The selection may be made from actions such as invalidating the credentials used when the security breach was detected modifying an access policy associated with a virtual machine instance involved with the security breach or rotating credentials involved with the security breach. If the determination is made to invalidate the credentials then the credentials are invalidated . For instance credentials may be deleted from a mapping that associates credentials with virtual machine instances may be marked as inactive or otherwise invalidated. In an embodiment if the determination is to modify an access policy then the policy is modified in order to revoke privileges from the instance involved in the security breach. Using the illustrated policies described above as an example a condition s component of a policy may be modified to revoke one or more privileges from one or more virtual machine instances. An action s component or other applicable component of a policy may also be updated. Generally the policy may be updated in any suitable manner.

If the determination is to rotate the credentials then new credentials are generated in accordance with an embodiment although as discussed credentials may have been pregenerated and stored for use when needed. In an embodiment when new credentials are generated a determination is made whether to distribute the new generated credentials to the compromised instance. The determination may be made based at least in part on the type of security breach that was detected. For instance if it would present an undue risk to provide new credentials to a compromised virtual machine instance the determination may be to not distribute the new generated credentials to the compromised instance. An example of such an undue risk includes an instance that was compromised virtual machine instance in such a way that one or more unauthorized applications have been loaded on the compromised instance. If it would not create an undue risk to provide new credentials to the compromised virtual machine instance then the determination may be to provide new generated credentials to the compromised virtual machine instance. If it is determined to distribute the new credentials to the compromised instance then the generated credentials are distributed to all instances in a granular unit of the compromised instance. For instance the new credentials may be provided to all virtual computing instances that shared the credentials involved in the detected security breach.

If however a determination is not to distribute the new credentials to the compromised instance then the credentials are distributed to all instances in a granular unit of the compromised instance except for the compromised instance. For example the new credentials may be provided to all virtual machine instances sharing the credentials involved in the detected in the security breach except for the compromised virtual machine instance. If the granular unit only contains the compromised instance then the generated credentials may not be distributed at all and in some embodiments may not have been generated.

While not illustrated in the figure the generation and distribution of new credentials may also include invalidation of previous credentials as described above. In addition as mentioned other variations are also contemplated as being within the spirit of the present disclosure. For instance actions different from those discussed above may be taken in response to detection of a security breach. In addition combinations of actions may be taken in response to detection of a security breach. For instance credentials may be rotated one or more policies may be modified and credentials involved in the security breach may be invalidated all in response to the security breach being detected.

As noted above credentials and other information may be provided in various ways. In one embodiment information used in an authentication process or generally any process in which information about a computing resource is verified may be provided in an instance identity document an illustrative example of which is shown in . An instance identity document in an embodiment is an electronic file or other collection of information that contains information about one or more properties of or related to a virtual machine instance or other computing resource. It should be known that for the purpose of illustration examples of instance identity documents and their use in connection with virtual machine instances are used throughout this disclosure. However instance identity documents may be used in similar manners in connection with other computing resources. Generally instance identity documents may be used to attest to properties of any computing resource.

In the present example an instance identity document in an embodiment contains information about properties of a virtual machine instance and related properties. Example information that may be included in an instance identity document is provided in . In an embodiment the instance identity document includes information about the document itself. For instance the instance identity document in this example includes a document identifier Document ID which in an embodiment is a unique identifier for the instance identity document. A computing system may associate the document identifier with the virtual machine instance to which the document corresponds. The association may be used for instance as discussed below to verify information related to the instance identity document. It should be noted that the document identifier may not be included in an instance identity document as other information such as information discussed below may be used to associate the document with a virtual machine instance. In an embodiment the instance identity document includes an expiration value Document Exp. which may identify a time after which the instance identity document is not considered to be valid.

As shown in the instance identity document includes various information about the virtual machine instance to which the document corresponds such as a private IP address Private IP which may correspond to a private IP address assigned to the virtual machine instance. An identifier of the virtual machine instance Instance ID may also be provided in the instance identity document . The identifier may be for example a unique identifier of the virtual machine instance used by a computing services provider or information corresponding to such an identifier. The instance identity document may also include an identifier Image ID of a machine image virtual appliance used to instantiate the corresponding virtual machine instance. Similarly the instance identity document may include a value identifying an owner of the virtual machine instance Owner ID . The owner may be as an example a customer of a computing services provider that operates hardware for executing the virtual machine instance on behalf of the customer. In this example the owner identifier may be a unique identifier used by the computing services provider to identify the owner or information corresponding to such an identifier. The owner identifier or another value may also be an identifier used by another entity such as an entity that receives the instance identity document to verify one or more properties about the virtual machine instance.

Also shown in the illustrative example of the instance identity document also includes an instance launch date which identifies the date on which the virtual machine instance corresponding to the instance identity document was created. Other information on the instance identity document includes in this example information about operating systems and other applications utilized by the virtual machine instance which may identify software versions identifiers of software licenses version numbers and other attributes about software used by the virtual machine instance. For example if a virtual machine instance utilizes a particular operating system in order to execute one or more applications detailed information about the operating system and or applications may be provided in the instance identity document. Information about various levels of support for one or more applications may also be included in the instance identity document . As will be discussed in more detail an entity that has received the instance identity document may verify for instance that the virtual machine instance has a properly licensed operating system and or other application. Geographic information relating to a data center in which the virtual machine instance is provisioned may also be included in an instance identity document.

It should be understood that the example information provided in is for the purpose of illustration and less or more information may be included with an instance identity document. Further values for various fields may be of data types different from those illustrated and generally may differ from that which is shown for the purpose of illustration. In addition an instance identity document may also contain custom fields for information and may include information that is specified by the owner of the virtual machine instance a user associated with the owner or anyone authorized to supply such information. For example the owner of the virtual machine instance to which the instance identity document corresponds may include information such as whether the virtual machine instance is the customer s primary database instance and or other information that the owner or another interested entity may find useful. Credentials such as credentials discussed above are another example of information that may be included in an instance identity document. For instance credentials for use in any of the embodiments described herein may be made available to a virtual machine instance via an instance identity document. The virtual machine instance may obtain the credentials from the document and provide the credentials as needed and or may provide the document itself in order to provide credentials.

The following shows possible encoding of information of an instance identity document in JSON format 

As discussed instance identity documents may be used to attest to various properties of a virtual machine instance or other computing resource. The instance identity document may be used for example to attest to one or more properties of a virtual machine instance that are necessary before one or more actions dependant on the existence of those properties are taken. accordingly provides an illustrative example of a process for utilizing an instance identity document in accordance with an embodiment. In an embodiment a property changing event for a virtual machine instance is detected . The property changing event may be related to provisioning and or deprovisioning of the virtual machine instance. However the other property changing events may also be detected. Generally any event by which a property of a virtual machine instance may change may be detected. Examples of properties that may change and therefore trigger detection of a property changing event are provided above in . For instance if one or more software applications are installed on the virtual machine instance installation may be detected. Application upgrades and or support agreements may also be detected. Another event that may be detected includes an event in connection with a user specifying one or more properties of a virtual machine instance for use in an instance identity document. For instance the owner of a virtual machine instance may wish to include one or more custom properties in an instance identity document for various reasons such as to attest to the custom properties to a third party and the user supplying the one or more properties may be detected. Generally any event in connection with a property change of a virtual machine instance may be detected.

Returning to the example of in an embodiment information about the virtual machine instance is obtained . For instance a control plane environment used to monitor and or control various aspects of one or more computing resources as described above may provide information about the virtual machine instance such as some or all of the information discussed above in connection with . A metadata service of the control plane for example may store such information and provide the information when the information is needed by a computing resource. In an embodiment once information about the virtual machine instance is obtained an instance identity document is created with the obtained information. Creating the instance identity document may for instance be accomplished by encoding the obtained information in a machine readable and human readable format such as JSON in an electronic file.

Once the instance identity document has been created in an embodiment the created instance identity document is cryptographically signed . Cryptographically signing the instance identity document may be accomplished in any suitable manner. For example one of various digital signature schemes may be used to electronically sign the instance identity document. Example digital signature standards include the digital signature standard DSS the El Gamal signature scheme and the Rivest Shamir and Adleman RSA digital signature scheme. In an embodiment the signature is a Base64 encoded raw signature generated according to the PKCS 1 standard using the 256 bit Secure Hash Algorithm SHA hash function SHA 256 with RSA encryption. Generally the document may be electronically signed using any suitable method which allows for the verification that allows a computing device that has received the instance identity document to verify that the contents of the instance identity document have not been answered. Public key private key or other digital signature schemes may be used. In an embodiment a public key digital signature scheme is utilized to sign the instance identity document. A device in a control plane signs the document using a private key that is generally not available outside of the control plane by using the private key to generate a signature.

In an embodiment once the instance identity document has been cryptographically signed in an embodiment the instance identity document and a signature of the instance identity document are made available to the virtual machine instance. In an embodiment the document signature is part of the instance identity document. For example the document may be the signature of some canonicalized subset of the complete instance identity document. The signature of the instance identity document may also be provided as a detached signature that is provided as or in a separate file. In one embodiment the instance identity document and signature are provided to the virtual machine instance and the virtual machine instance may then on its own provide the instance identity document and signature as needed. The instance identity document and signature may be made available in other ways. For instance in another embodiment the instance identity document is not provided to the virtual machine instance but the instance identity document is maintained by another computing device. For example an instance identity document and its signature may be maintained using a metadata service of a computing services provider. The metadata service may be accessed in order to obtain the instance identity document and its signature using a web service protocol. In this example the virtual machine instance may when necessary instruct the other computing device to provide the instance identity document and signature when needed. In an embodiment the instance identity document is made available only to a corresponding virtual machine instance. Thus in this embodiment a user may not obtain an instance identity document corresponding to a virtual machine instance without instructing the virtual machine instance to obtain the instance identity document. Generally any suitable manner of making the instance identity document and signature available to the virtual machine instance may be used.

As noted in an embodiment a public key cryptographic digital signature scheme is utilized in order to sign the instance identity document. In such an example in an embodiment a public key corresponding to the private key used to generate the signature of the document is made available to interested entities. The public key may be encoded in a certificate such as a an X.509 format certificate that is distributed to one or more interested entities. As noted an interested entity may be for example an owner of a cloud software repository or generally any entity which may utilize the instance identity document for any suitable reason. In this manner as will be discussed in more detail below the interested entities may use the public key that has been made available to verify the validity of the instance identity document when provided to them.

Accordingly provides an illustrative example of a process for utilizing an instance identity document. In the illustrative example of an instance identity document and signature of the instance identity document in connection with a request to perform an action and signature are received . An interested entity may for example have received the instance identity document from a virtual machine instance in connection with a request to perform an action such as providing an application update. In addition in an embodiment a public key corresponding to the signature of the instance identity document is obtained . As an example the public key may have been published by a computing device that generated the signature or a related device. The public key may be available from the entity that generated the signature or another entity. In an embodiment a control plane environment includes a public key server that is operable to receive requests for public keys and respond to the requests by providing the public keys. The requests may identify information that enables locating a proper key such as an identifier of a signature corresponding to the public key an identifier of the virtual machine instance for which the document was signed and the like.

Once the instance identity document has been received and the public key has been obtained in an embodiment the document is processed . Processing the document may include using an appropriate signature verifying algorithm that is able to verify from the document signature and public key that the document is authentic e.g. that the document has not been modified since being signed. The following Java code which depends on the Apache Commons Codec 1.3 or above for Base64 encoding may be used with the Sun Java Development Kit JDK version 1.6 and above to validate a signature.

Accordingly in an embodiment once the document is processed a determination is made whether the received instance identity document is in fact valid. A determination whether the received instance identity document is valid may be based at least in part on the document being authentic unaltered and or other information examples of which are provided below. If it is determined that the instance identity document is valid then a determination is made whether the received instance identity document contains necessary properties for performing the requested action. A determination may be made for example whether information in the instance identity document indicates that the corresponding virtual machine instance contains a properly licensed version of an application whether the instance identity document is expired whether the document was received from an IP address identified in the instance identity document and or whether other information in the instance identity document identifies other properties of the instance identity document and or the corresponding virtual machine instance.

If it is determined that the received instance identity document contains the necessary properties then in an embodiment the requested action is performed . If however it is determined that the instance identity document is not valid or it has been determined that the instance identity document does not contain necessary properties then alternative action may be taken . For instance the requested action may simply not be performed. One or more notifications about the instance identity document not being valid and or not containing the necessary properties may be sent to an interested entity such as the owner of the virtual machine instance in order to provide an alert of the reason why the requested action was not performed and possibly to provide notification of a security breach which may be the reason why the instance identity document was determined not to be valid. Generally any alternate action may be taken.

As with any process described herein variations are considered as being within the scope of the present disclosure. For instance actions other than those illustrated in the flowchart of may be taken in connection with the process illustrated in . For instance illustrates a variation of the process discussed above in connection with while illustrates an example environment where the variation to the process may be performed and an illustrative example of the flow of information in accordance with an embodiment. Beginning with an illustrative example of a process for utilizing an instance identity document is illustrated. In this example a request to update an application and information for verification of an instance identity document is received . The information may include a signature for the instance identity document a public key for processing the signature and or the instance identity document itself. In an embodiment the information for verifying the instance identity document is used to make a determination whether the instance identity document is unaltered since the signature for the instance identity was generated. If it is determined that the instance identity document is unaltered in an embodiment an API call to a document verification validation service is made and a reply is received . The document verification service may be a service implemented using one or more computer systems that are operable to provide information about the validity of a document. The document verification service may be implemented for example as a web service. The document verification service may for example be able to receive information identifying an instance identity document or information that is otherwise associated with the instance identity document and use that information to reference a data store to determine information about the instance identity document. The document verification service may for instance use received information to reference a data store to determine whether the document is expired and or whether the document corresponds to a currently active virtual machine instance. Generally the document verification service may be able to provide any information of about and or associated with an instance identity document.

In an embodiment when the API of the document verification service is called a reply indicating the validity of the instance identity document may be received from the document verification service. Using examples discussed above the reply may include information that indicates whether the instance identity is expired whether the instance identity document corresponds to a currently active virtual machine instance and or other information related to the instance identity document. Accordingly once the reply to the API call is received in an embodiment a determination is made based at least in part on the reply whether the instance identity document is valid. If it is determined that the instance identity document is valid in an embodiment a determination is made whether the instance identity document indicates one or more properties necessary for performance of the requested update. For instance a determination may be made whether the instance identity document indicates that the corresponding virtual machine instance has installed a properly licensed copy of one or more applications to be updated. Generally however a determination may be made whether any property or set of properties is attested to in the instance identity document.

In an embodiment if it is determined that the instance identity document indicates the necessary properties then the requested update is provided . One or more electronic files may such as a package of update installation files for example be provided to the virtual machine instance for which the update was requested. The one or more files may include one or more executable files drivers plugins configuration files links to information sources and or other information used to update one or more applications. Generally any set of information that may be used to update the virtual machine instance may be provided.

In an embodiment when one or more reasons preclude providing the requested update then one or more alternate actions may be taken. For example if a determination is made that the instance identity document has been altered if a determination is made that the instance identity document is invalid and or if a determination is made that the instance identity document does not indicate one or more properties necessary for providing the requested update then one or more alternate actions may be taken. Alternate actions may include for instance refusing to provide the requested update sending an error message which may indicate one or more reasons why the requested update was not provided and or any other alternative actions including inaction.

As noted above shows an environment in which the process illustrated in of variations thereof may be performed. As illustrated the environment includes a remote computing services provider such as the virtual resource provider described above in connection with that operates hardware used to provision the virtual machine instance. In an embodiment the remote computing services provider includes hardware used by the remote computing services provider to operate a plurality of virtual machine instances on behalf of one or more customers. In addition the remote computing services provider includes a control plane such as a control plane having properties and capabilities discussed above. In this particular example however the control plane includes a document service with which communication may be made using a document generation interface and a verification interface of a verification service such as described above. Either or both of the document generation interface and the verification interface may be implemented as web service or other interfaces. For example the verification interface may be implemented as a web services API over SOAP representational state transfer REST or another web service protocol.

As illustrated in an embodiment a virtual machine instance communicates with the document generation interface in order to have an instance identity document made available to the virtual machine instance . For instance an instance identity document may be provided to the virtual machine instance over the document generation interface . In some embodiments the document generation interface allows users and or virtual machine instances to specify information that should be included in an instance identity document. A user may select or a virtual machine instance may be configured to select a subset of a set of information that is available for inclusion in instance identity documents.

In an embodiment the virtual machine instance having its instance identity document provides the instance identity document and any other information such as a signature necessary to verify the validity of the instance identity document to an update repository . The update repository in an embodiment is one or more computing devices collectively operable to provide information that may be used to update one or more applications. While illustrated as outside of the remote computing services provider the update repository may in some embodiments be implemented using computing resources of the remote computing services provider . For example the update repository may be implemented using computing resources of a data center of the remote computing service provider . The update repository may be maintained and operated by the remote computing service provider or another entity such as a vendor of one or more applications. In an embodiment the update repository uses appropriate information in order to verify that the instance identity document provided by the virtual machine instance is valid. The update repository may for instance utilize a signature of a provided instance identity document and a public key made available to the update repository to verify that the instance identity document has not been altered since the instance identity document has been signed.

As illustrated in the update repository may take additional action in connection with verifying the validity of the instance identity document . In an embodiment upon receiving the instance identity document the update repository provides the instance identity document or information identifying instance identity document such as a unique identifier of the instance identity document and information contained in the instance identity document to the document service . For example the update repository may make an API call to the verification interface providing information necessary to further determine the validity of the instance identity document. For instance the update repository may make an API call of the verification interface in order to determine that the instance identity document is not expired to determine that the instance identity document corresponds to a currently active virtual machine instance and or to make other determinations and or receive other information. Upon verifying that the instance identity document is valid the update repository may then provide an update requested by the virtual machine instance to the virtual machine instance. For example the update repository may provide one or more files to be used by the virtual machine instance to update one or more applications.

Several variations of use of instance identity documents are contemplated as being within the scope of the present disclosure. For example provides an illustrative example of a process by which instance identity documents may be used. In this example multiple different instance identity documents corresponding to a virtual machine instance may be available and one or more of the available instance identity documents may be selected. However as noted below the process is not limited to situations where multiple instance identity documents corresponding to a virtual machine instance are available. Accordingly in an embodiment the process includes determining a need to provide an instance identity document. The need to provide an instance identity document may be determined in connection with requesting information from a service that requires attestations to one or more properties about a corresponding virtual machine instance. As another example an instance identity document may have been requested from an update or other service in response to a request that was made to the update or other service. Generally determining the need to provide the instance identity document may be any suitable manner.

In embodiments once it has been determined that an instance identity document needs to be provided a document to provide is determined . For example an embodiment in which each virtual machine instance has a single instance identity document that single document may be identified. In an embodiment however if a virtual machine instance has multiple instance identity documents determining the documents to provide may include selecting from the multiple documents a suitable document for providing based at least in part on one or more criteria. Examples of selecting from multiple available instance identity documents are discussed further below. Once the document to provide has been determined in an embodiment the determined instance identity document is obtained and provided . The virtual machine instance corresponding to the determined instance identity document may be retrieved from memory accessible by a host of the virtual machine instance and sent over a communications network to an appropriate network location which may for instance correspond to an IP address of a service that requires the instance identity document. For instance the obtained instance identity document may be provided to an update repository as discussed above. As another example the virtual machine instance may send a request to a service that is operable to provide instance identity documents on behalf of virtual machine instance thereby causing the service to provide the instance identity document as appropriate. Generally any suitable manner of obtaining and or providing an instance identity document may be used.

Upon determination of the set of one or more attributes in an embodiment a document having the determined attributes may then be requested . For instance in the example provided above in a virtual machine instance may make a call to a document interface of a document service. The call or other communication to the document interface may identify or otherwise indicate the determined attributes. Communication between the virtual machine instance and the document service may be over a secure channel such as an secure socket layer SSL connection. The document service may retrieve from memory and or generate an appropriate instance identity document that has the determined attributes. As an alternative information necessary for generating or digitally signing an instance identity document may be provided to a host machine of the virtual machine instance to allow the host machine upon request of the virtual machine instance to generate and sign an appropriate instance identity document that has the determined set of one or more attributes. In this example the host machine may have or have access to an appropriate key used to sign the instance identity document or may provide a generated instance identity document to a service that is operable to sign instance identity documents. Other variations of requesting a document having the determined attributes are considered as being within the scope of the present disclosure. In an embodiment at a time after the instance identity document has been requested the instance identity document having the determined attributes is received from an appropriate device such as from a device to which the request was made.

In an embodiment a document having a minimal set of attributes that contains the determined set of attributes is selected . In this manner a document containing the least amount of information necessary is selected and in an embodiment the selected instance identity document is obtained such as in a manner described above. Variations of selecting an appropriate instance identity document are also considered as being within the scope of the present disclosure. For example in an embodiment each of a plurality of documents corresponding to a virtual machine instance may be assigned various security levels. The levels may correspond to various levels of sensitivity of the information contained in the documents. In this example in an embodiment a document having the lowest security level least sensitive but that still contains the determined set of attributes is selected. Generally any manner of selecting an instance identity document from a plurality of instance identity documents corresponding to a virtual machine instance may be used.

As noted instance identity documents may be updated over time. As noted instance identity documents may be used to attest to one or more properties of a virtual machine instance. If those properties change over time one or more instance identity documents may be updated accordingly. therefore provides an illustrative example of a process for updating an instance identity document for a virtual machine instance. In an embodiment the process includes detecting a change to a virtual machine instance. The changes may be as a result of a control plane monitoring one or more events in connection with the virtual machine instance. For example a change of an update of one or more applications utilized by the virtual machine instance may be detected. Generally any property of a virtual machine instance that has changed may be detected including but not limited to the properties described above.

In an embodiment once the change to the virtual machine instance has been detected a new instance identity document corresponding to the virtual machine instance is generated . The new instance identity document in an embodiment includes information corresponding to one or more properties about the virtual machine instance that have changed. Generation of the new instance identity document may be performed in any suitable manner such as in a manner described above. In addition in instances where an API or other interface is available for validation of instance identity documents by entities that have received the instance identity document a document validation service such as the verification interface discussed above in connection with may be updated accordingly. In this manner should an entity attempt to verify the validity of the new instance identity document the validation service will be current and will provide a correct response regarding the validity of the document. In an embodiment once the document validation service has been updated the instance identity document is made available to the virtual machine instance corresponding to the new instance identity document such as in a manner discussed above.

As noted variations of the descriptions above are considered as being within the scope of the present disclosure. For example the above illustrative examples describe various aspects in terms of providing a single instance identity document to attest to one or more properties of a virtual machine instance or other computing resource. However multiple instance identity documents may be provided to attest to various properties of computing resources. The information contained in the multiple instance identity documents differ among the instance identity documents. As just one example each of a plurality of documents may be used to attest to one or more corresponding properties of a virtual machine instance. In addition one or more instance identity documents may be used to attest to one or more properties of multiple computing resources such as multiple virtual machine instances. Such variations and other variations may be implemented using variations of the examples described above.

Other variations are also contemplated as being within the spirit of the present disclosure. For instance for the purpose of illustration various embodiments are discussed in connection with virtual machine instances. However various other embodiments may involve other virtual computing resources. For instance any virtual computing resource that uses credentials to access another virtual computing resource may utilize various embodiments described herein and variations thereof. Generally techniques described and suggested herein are not limited to virtual computing instances. In addition various techniques described and suggested herein may be used in connection with virtual computing resources in addition to virtual machine instances.

Generally the various embodiments described herein may be implemented in a wide variety of operating environments which in some cases may include one or more user computers computing devices or processing devices which may be utilized to operate any of a number of applications. User or client devices may include any of a number of general purpose personal computers such as desktop or laptop computers running a standard operating system as well as cellular wireless and handheld devices running mobile software and capable of supporting a number of networking and messaging protocols. Such a system also may include a number of workstations running any of a variety of commercially available operating systems and other known applications for purposes such as development and database management. These devices also may include other electronic devices such as dummy terminals thin clients gaming systems and other devices capable of communicating via a network.

Most embodiments utilize at least one network that would be familiar to those skilled in the art for supporting communications using any of a variety of commercially available protocols such as TCP IP OSI FTP UPnP NFS CIFS and AppleTalk. Such a network may include for example a local area network a wide area network a virtual private network the Internet an intranet an extranet a public switched telephone network an infrared network a wireless network and any combination thereof. The network may furthermore incorporate any suitable network topology. Examples of suitable network topologies include but are not limited to simple point to point star topology self organizing peer to peer topologies and combinations thereof.

In embodiments utilizing a Web server the Web server may run any of a variety of server or mid tier applications including HTTP servers FTP servers CGI servers data servers Java servers and business application servers. The server s also may be capable of executing programs or scripts in response requests from user devices such as by executing one or more Web applications that may be implemented as one or more scripts or programs written in any programming language such as Java C C or C or any scripting language such as Perl Python or TCL as well as combinations thereof. The server s may also include database servers including without limitation those commercially available from Oracle Microsoft Sybase and IBM .

The environment may include a variety of data stores and other memory and storage media as discussed above. These may reside in a variety of locations such as on a storage medium local to and or resident in one or more of the computers or remote from any or all of the computers across the network. In a particular set of embodiments the information may reside in a storage area network SAN familiar to those skilled in the art. Similarly any necessary files for performing the functions attributed to the computers servers or other network devices may be stored locally and or remotely as appropriate. Where a system includes computerized devices each such device may include hardware elements that may be electrically coupled via a bus the elements including for example at least one central processing unit CPU at least one input device e.g. a mouse keyboard controller touch screen or keypad and at least one output device e.g. a display device printer or speaker . Such a system may also include one or more storage devices such as disk drives optical storage devices and solid state storage devices such as random access memory RAM or read only memory ROM as well as removable media devices memory cards flash cards etc.

Such devices also may include a computer readable storage media reader a communications device e.g. a modem a network card wireless or wired an infrared communication device etc. and working memory as described above. The computer readable storage media reader may be connected with or configured to receive a computer readable storage medium representing remote local fixed and or removable storage devices as well as storage media for temporarily and or more permanently containing storing transmitting and retrieving computer readable information. The system and various devices also typically will include a number of software applications modules including program modules services or other elements located within at least one working memory device including an operating system and application programs such as a client application or Web browser. It should be appreciated that alternate embodiments may have numerous variations from that described above. For example customized hardware might also be utilized and or particular elements might be implemented in hardware software including portable software such as applets or both. Further connection to other computing devices such as network input output devices may be employed.

Storage media and computer readable media for containing code or portions of code may include any appropriate media known or used in the art including storage media and communication media such as but not limited to volatile and non volatile removable and non removable media implemented in any method or technology for storage and or transmission of information such as computer readable instructions data structures program modules or other data including RAM ROM EEPROM flash memory or other memory technology CD ROM digital versatile disk DVD or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which may be utilized to store the desired information and which may be accessed by the a system device. Program modules program components and or programmatic objects may include computer readable and or computer executable instructions of and or corresponding to any suitable computer programming language. In at least one embodiment each computer readable medium may be tangible. In at least one embodiment each computer readable medium may be non transitory in time. Based on the disclosure and teachings provided herein a person of ordinary skill in the art will appreciate other ways and or methods to implement the various embodiments.

The specification and drawings are accordingly to be regarded in an illustrative rather than a restrictive sense. It will however be evident that various modifications and changes may be made thereunto without departing from the broader spirit and scope of the invention as set forth in the claims.

The use of the terms a and an and the and similar referents in the context of describing embodiments especially in the context of the following claims are to be construed to cover both the singular and the plural unless otherwise indicated herein or clearly contradicted by context. The terms comprising having including and containing are to be construed as open ended terms i.e. meaning including but not limited to unless otherwise noted. The term connected is to be construed as partly or wholly contained within attached to or joined together even if there is something intervening. Recitation of ranges of values herein are merely intended to serve as a shorthand method of referring individually to each separate value falling within the range unless otherwise indicated herein and each separate value is incorporated into the specification as if it were individually recited herein. All methods described herein can be performed in any suitable order unless otherwise indicated herein or otherwise clearly contradicted by context. The use of any and all examples or exemplary language e.g. such as provided herein is intended merely to better illuminate embodiments and does not pose a limitation on the scope unless otherwise claimed. No language in the specification should be construed as indicating any non claimed element as essential to the practice of at least one embodiment.

Preferred embodiments are described herein including the best mode known to the inventors. Variations of those preferred embodiments may become apparent to those of ordinary skill in the art upon reading the foregoing description. The inventors expect skilled artisans to employ such variations as appropriate and the inventors intend for embodiments to be constructed otherwise than as specifically described herein. Accordingly suitable embodiments include all modifications and equivalents of the subject matter recited in the claims appended hereto as permitted by applicable law. Moreover any combination of the above described elements in all possible variations thereof is contemplated as being incorporated into some suitable embodiment unless otherwise indicated herein or otherwise clearly contradicted by context.

All references including publications patent applications and patents cited herein are hereby incorporated by reference to the same extent as if each reference were individually and specifically indicated to be incorporated by reference and were set forth in its entirety herein.

For the Examiner s convenience Applicants note that this application is a continuation of U.S. Pat. No. 8 607 067 and incorporates by reference U.S. application Ser. No. 12 981 231. The claims of the present application are different and possibly at least in some aspects broader in scope than the claims pursued in the parent application. To the extent any prior amendments or characterizations of the scope of any claim of the parent or any cited documents could be construed as a disclaimer of any subject matter supported by the present disclosure Applicants hereby rescind and retract such disclaimer. Accordingly the references previously presented in the parent applications may need to be revisited.

