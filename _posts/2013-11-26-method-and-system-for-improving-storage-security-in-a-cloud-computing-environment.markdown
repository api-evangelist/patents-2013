---

title: Method and system for improving storage security in a cloud computing environment
abstract: A method of improving storage security in a cloud environment includes interfacing a secure microcontroller with a storage controller associated with a client device in the cloud environment to authenticate a platform associated with the storage controller and registering the storage controller with an authentication server configured to be set up in the cloud environment. The method also includes authenticating the storage controller based on a communication protocol between the client device, the authentication server and the storage controller, and obtaining, at the client device, a signature data of the storage controller following the authentication thereof. The signature data is configured to be stored in the secure microcontroller interfaced with the storage controller.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09055052&OS=09055052&RS=09055052
owner: NETAPP, INC.
number: 09055052
owner_city: Sunnyvale
owner_country: US
publication_date: 20131126
---
This patent application claims priority of and is a continuation of U.S. patent application Ser. No. 12 951 089 filed on Nov. 22 2010 and now U.S. Pat. No. 8 601 265 the disclosure of which is incorporated herein by reference in its entirety.

This disclosure relates generally to cloud computing and more particularly to a method an apparatus and or a system of improving storage security in a cloud computing environment.

In a cloud computing environment storage requirements of one or more client device s may be met through a corresponding one or more storage controller s configured to host one or more virtual server s appropriately provisioned thereto. A cloud administrator may have the requisite privileges to configure a virtual server associated with a client device on any storage controller. Also for example the cloud administrator may accidentally or maliciously run destructive commands configured to compromise the security of data associated with the client device. An unauthorized outsider user may also break into the system and perform the aforementioned act of malice.

Tampering of the hardware and or software associated with a storage controller may result in a customer of the cloud service operating at the client device experiencing a compromised quality of service To address the aforementioned problems a set of capabilities may be defined in a role and assigned to a customer of the cloud service. Although the role based model may provide structure the unauthorized outsider user may still possess the requisite means to access data associated with the customer that resides on the storage controllers. The incapability of the customer to remotely verify the integrity and the confidentiality of cloud resources e.g. storage controller s configured to process and or store data associated therewith may imply that the customer possesses no means to ensure the integrity and the confidentiality of his her data and the computation associated therewith.

Disclosed are a method an apparatus and or a system of improving storage security in a cloud computing environment.

In one aspect a method of improving storage security in a cloud environment includes interfacing a secure microcontroller with a storage controller associated with a client device in the cloud environment to authenticate a platform associated with the storage controller and registering the storage controller with an authentication server configured to be set up in the cloud environment. The method also includes authenticating the storage controller based on a communication protocol between the client device the authentication server and the storage controller and obtaining at the client device a signature data of the storage controller following the authentication thereof. The signature data is configured to be stored in the secure microcontroller interfaced with the storage controller.

In another aspect a method of verifying integrity of a storage controller associated with a client device in a cloud environment includes configuring the storage controller with information associated with an authentication server set up in the cloud environment. The information is associated with a signature data of the authentication server. The method also includes configuring the authentication server with a signature data associated with the storage controller registering the storage controller with the authentication server to establish a trusted key pair therebetween and attesting the storage controller through the authentication server based on the established trusted key pair. Further the method includes obtaining at the client device the signature data of the storage controller following the attestation thereof.

In yet another aspect a cloud environment with improved storage security includes a client device a cloud manager configured to provision storage associated with the client device and a storage controller associated with the client device. The storage controller includes a secure microcontroller interfaced therewith to authenticate a platform associated therewith. The cloud environment also includes an authentication server configured to register the storage controller and to authenticate the storage controller based on a communication protocol between the client device the storage controller and the authentication server.

The client device is automatically configured to obtain a signature data of the storage controller following the authentication thereof and or is configured to obtain the signature data of the storage controller following the authentication thereof upon querying the storage controller. The secure microcontroller is configured to store the signature data of the storage controller therein.

The methods and systems disclosed herein may be implemented in any means for achieving various aspects and may be executed in a form of a machine readable medium embodying a set of instructions that when executed by a machine cause the machine to perform any of the operations disclosed herein. Other features will be apparent from the accompanying drawings and from the detailed description that follows.

Other features of the present embodiments will be apparent from the accompanying drawings and from the detailed description that follows.

Example embodiments as described below may be used to improve storage security in a cloud computing environment. Although the present embodiments have been described with reference to specific example embodiments it will be evident that various modifications and changes may be made to these embodiments without departing from the broader spirit and scope of the various embodiments.

In one or more embodiments host devices may indicate customers of services provided through network or users departments associated with an organization e.g. an Information Technology IT organization . In one or more embodiments each host device may have storage associated therewith. For the aforementioned purpose in one or more embodiments isolated logical virtual storage partitions not shown may be created on storage system through an operating system e.g. NetApp s Data ONTAP operating system associated therewith. In one or more embodiments therefore each virtual storage partition may be associated with a host device . In one or more embodiments information on a secured virtual storage partition may solely be accessed by the host device associated therewith.

In one or more embodiments storage system may include a storage server e.g. file server and may be associated with a set of mass storage devices e.g. disks . In one or more embodiments file server may be configured to receive read write requests from host devices and to respond appropriately. In one or more embodiments the requests may be directed to data stored in to be stored in disks . Disks may be for example conventional magnetic disks optical disks such as compact disks read only memory CD ROM or digital versatile video disks DVD based storage magneto optical MO storage or any other type of non volatile storage devices suitable for storing large quantities of data. In one or more embodiments file server may be construed as the manager of storage system . In one or more embodiments a main purpose of file server may be to provide a location or location s for shared disk access e.g. shared storage of computer data configured to be accessed by host devices .

In one or more embodiments the operating system associated with storage system may support data sets associated with protocols including but not limited to Network File System NFS protocol Common Internet File System CIFS protocol Internet Small Computer System Interface iSCSI protocol Hypertext Transfer HTTP protocol File Transfer Protocol FTP FTP Secure FTPS protocol Secure File Transfer Protocol SFTP and Network Data Management Protocol NDMP . In one or more embodiments a host device may be configured to interact with storage system according to a client server model of information delivery. For example host device may request the services of storage system and storage system may return the results e.g. through packets through network .

In one or more embodiments cloud manager may enable the one or more client devices to self provision computing resources thereof. In one or more embodiments cloud manager may manage cloud portion s e.g. cloud 1 cloud 2 associated with client 1 and client 2 . Client 1 and or client 2 may log into a console associated with cloud manager to access cloud 1 and or cloud 2 and virtual machines VMs therein through a public network e.g. Internet . The client devices and or VMs as discussed below associated therewith provided in cloud environment may be analogous to host devices of . The VMs for example may run applications application programs associated with the client devices. As a VM may be a software implementation of a physical machine the VM may share physical resources with one or more VM s .

In order to address storage requirements requests associated with client 1 and client 2 cloud manager may be configured to appropriately provision vserver 1206 vserver 2 vserver 3 vserver 4 and vserver 5 and allocate to client 1 and client 2 . The aforementioned vservers may be virtualized entities utilized by client 1 and client 2 to meet storage requirements thereof. Multi tenancy may allow for a storage controller to have multiple vservers e.g. vserver 1 and vserver 3 associated with storage controller and vserver 2 vserver 4 and vserver 5 associated with storage controller associated therewith. A portion of the cloud e.g. cloud 1 including vserver 1 vserver 2 and virtual machines VMs e.g. VM VM associated therewith may be associated with client 1 and a portion of the cloud e.g. cloud 2 including vserver 3 vserver 4 and vserver 5 and VMs e.g. VM VM VM associated therewith may be associated with client 2 . In one or more embodiments VMs may reside on storage exposed by vserver s . It is obvious that physical machines may be associated with the clients e.g. client 1 client 2 instead of VMs.

The aforementioned cloud portions may be logical subsets of the cloud and may include VMs implemented with operating systems e.g. Linux Microsoft s Windows . Cloud as used herein may refer to the large pool of configurable computing resources e.g. virtualized computing resources that may be subjected to a pay per use model in which client s may enter into service agreement s with service provider s . The portion of the cloud therefore may refer to the pool of resources associated with a particular client. It is obvious that client 1 and or client 2 may be entities e.g. corporations and that there may be a number of host devices associated with each of client 1 and or client 2 .

Cloud 1 and or cloud 2 may span across several geographic regions. In one or more embodiments the aforementioned cloud portions may span multiple countries under differing jurisdictional guidelines. For example a jurisdictional guideline may deem that a vserver needs to be launched on hardware e.g. storage controller located in the same jurisdiction as the corresponding client s . In one or more embodiments administrators of cloud environment may possess the authority to launch one or more vservers on any of storage controller and storage controller irrespective of the location s thereof. Further in one or more embodiments the aforementioned one or more vservers may be associated with one or more versions of a storage operating system e.g. NetApp s Data ONTAP operating system .

For example an administrator may modify the version of the storage operating system and or configuration settings on storage controller and or storage controller . In another example an administrator may provision a vserver on a storage controller offering lower performance and or located in a geographic region different from that of a client device.

Other threats arising from the unsecure state of cloud environment may include an administrator configuring storage through a storage controller having a tampered version of a storage operating system associated therewith and or a tampered version of a Basic Input Output System BIOS associated therewith and or a storage controller having compromised security settings. For example the administrator may perform configuration changes to vserver 1 so that client 2 may also access vserver 1 . Client 1 may not be aware of the unsecure state of cloud environment the unsecure state being caused due to at least the abovemenioned reasons.

In one or more embodiments incorporating a secure microcontroller e.g. a Trusted Platform Module TPM chip on storage controller s associated with the one or more client device s and a set of authentication protocols may enable a client device e.g. a cloud customer to verify the authenticity of the storage controller s owned by the cloud service provider. In one or more embodiments the secure microcontroller may be configured to store authentication and or attestation data associated with the storage controller s as will be discussed below. In one or more embodiments the aforementioned data may include passwords certificates and or encryption keys. In one or more embodiments the secure microcontroller may be utilized to ensure the trustworthiness of the platform associated with the storage controller through storing and comparing a platform measurement list. In one or more embodiments the platform measurement list may be a sequence of signatures e.g. hashes of the set of instructions involved in the boot sequence viz. the BIOS the boot loader and or the software implementing the platform. In one or more embodiments the secure microcontroller may utilize an RSA algorithm a Secure Hash Algorithm SHA e.g. SHA 1 and or a Hash based Method Authentication Code HMAC algorithm for cryptography purposes.

In one or more embodiments the secure microcontroller may not be able to control the set of instructions e.g. software executing on the storage controller s . Although the secure microcontroller may be configured to store pre runtime configuration parameters associated with the storage controller s policies associated with the aforementioned parameters may be determined and implemented through other applications. In one or more embodiments the secure microcontroller may expose standard Application Programming Interfaces APIs configured to be utilized by an application to interact therewith.

In one or more embodiments interfacing the secure microcontroller with the storage controller s may be accomplished through a permanent soldering of the motherboard associated with the storage controller hardware. In one or more embodiments thus a one on one mapping between the secure microcontroller and the platform interfaced therewith may be provided. In one or more embodiments data bound to a particular platform may solely be accessible to that platform. In one or more embodiments if the data is configured to migrate to a different platform and or if the binding conditions associated with the particular platform are not met the data may not be accessible. In an example embodiment when the secure microcontroller is utilized for platform attestation a software stack associated therewith may be configured to calculate information about the platform and or to store a measurement list associated with the storage controller in a configuration register available within the secure microcontroller.

 Signature data may be a broad term encompassing measurement list. Although measurement list is used frequently below measurement list may be construed to indicate signature data. For example measurement list of a storage controller is an example of signature data associated with the storage controller.

Thus in one or more embodiments the secure microcontroller may be utilized on the storage controller s for platform authentication purposes. In one or more embodiments the storage controller s may need to be capable of responding to requests from the client device s associated with authentication of the hardware. For example the client e.g. a customer may want to verify specific information associated with the appropriate storage controller s including but not limited to the BIOS version the storage operating system version the configuration information and hardware identification information to ensure that data served thereto is as per the agreement with the cloud service provider.

In one or more embodiments to enable attestation of the one or more storage controller s through the one or more client device s the one or more storage controller s configured to serve the one or more client device s may need to undergo a registration process with an authentication server configured to be set up in the cloud jointly by a client and a cloud service provider based on an agreement. In one or more embodiments the authentication server may be based on any operating system e.g. Microsoft s Windo Linux and may also include a secure microcontroller. In one or more embodiments as agreed by the client and the cloud service provider only authorized persons may be allowed to access the authentication server. For example A may be the cloud service provider and B may maintain the authentication server. The authentication server maintained by third party B may be accessible both from the services side A and from the customer side e.g. client .

In one or more embodiments whenever a storage controller is added to the cloud associated with the client device e.g. cloud 1 associated with client 1 an administrator may configure the storage controller with authentication information including an encrypted measurement list associated with the authentication server. In one or more embodiments an administrator of the authentication server may configure the authentication server with an encrypted measurement list associated with the storage controller. In one or more embodiments the storage controller may then undergo a registration process with the authentication server. shows the exchange of messages between authentication server and a storage controller analogous to the storage controllers of and during the registration process according to one or more embodiments. In one or more embodiments storage controller may include a secure microcontroller not shown associated therewith.

In one or more embodiments the aforementioned registration process may establish a trusted key pair as will be discussed below. In one example embodiment the measurement lists associated with authentication server and storage controller may be compared in an analogous manner to for example checking of passwords during a login process associated with Linux. In one or more embodiments once storage controller is attested authentication server may be configured to add storage controller to a list of trusted storage controller s and store the trusted key pair in a memory associated therewith. In one or more embodiments the key pairs generated during the attestation may be temporary and authentication server or storage controller may have to undergo the registration process again during a reboot thereof to establish a new key pair. In one or more embodiments if the configuration the software and or other attributes associated with storage controller changes the registration process may fail and the client s may immediately be cognizant of the change in the cloud associated therewith.

In one or more embodiments whenever a client e.g. a user at a client device wants to verify the authenticity of a storage controller a series of messages may be exchanged between the client authentication server and storage controller . In one or more embodiments the client may obtain the measurement list of storage controller and may verify the measurement list. In one or more embodiments upon verification of the measurement list of storage controller the authenticity of storage controller may in turn be verified.

In one or more embodiments the registration process may be in the form of a protocol. In one or more embodiments discussion of the registration protocol may be carried out with reference to . In one or more embodiments the registration process may commence with storage controller transmitting a challenge message to authentication server . The challenge message may include a random number or a pseudo random number e.g. nonce n . In one or more embodiments authentication server may now generate a private key thereof obtain a measurement list thereof and encrypt the data with the private key generated along with nonce n. In one or more embodiments also authentication server may transmit a challenge to storage controller with an own random number or a pseudo random number e.g. nonce n encrypted using the generated private key.

In one or more embodiments storage controller while generating nonce n may have generated keys therefor. Therefore in one or more embodiments when authentication server transmits the encrypted message thereof to storage controller storage controller may be configured to decrypt the message using a public part of the key s generated during generation of nonce nand to check whether nonce nmatches with a number in the encrypted message transmitted thereto. In one or more embodiments if there is a match storage controller may be configured to check the measurement list of authentication server to authenticate authentication server .

Now in one or more embodiments if authentication server is authenticated after nonce nis matched storage controller may be configured to transmit the measurement list thereof with nonce n received from authentication server encrypted with the private key to authentication server . In one or more embodiments authentication server may be configured to decrypt the message from authentication server using the public portion of the key s and to match a measurement list associated therewith in a database thereof. In one or more embodiments again authentication server may be configured to match nonce nin the message received from storage controller . In one or more embodiments if both result in matches authentication server may be configured to transmit a confirmation message indicating that storage controller is trusted. 

In one or more embodiments operation may then involve checking as to whether nonce ntransmitted from storage controller matches with a content of the message received from authentication server . In one or more embodiments the measurement list of authentication server may also be checked to authenticate authentication server . In one or more embodiments if there is a match of n operation may then involve storage controller replying with a measurement list thereof and nonce nreceived from authentication server encrypted with the private key to authentication server as a message.

In one or more embodiments authentication server may then be configured to decrypt the message from storage controller using the public portion of the key s in operation . In one or more embodiments operation may involve checking as to whether nonce nfirst transmitted from authentication server matches with a content of the message received from storage controller . In one or more embodiments the measurement list of storage controller may also be matched with a database at authentication server . In one or more embodiments following a match of nonce nand the measurement list of storage controller operation may involve transmitting a message from authentication server to storage controller indicating that storage controller is trusted. In one or more embodiments in case of failures associated with the nonce matches an error message e.g. registration failure may be generated.

As discussed above in one or more embodiments when a client wants to verify the authenticity of storage controller a series of messages may be exchanged between the client authentication server and storage controller . illustrates the exchange of messages between client analogous to client 1 and client 2 cloud manager e.g. cloud manager authentication server and storage controller . In one or more embodiments cloud manager authentication server and storage controller may be part of a cloud . As shown in numbers 1 6 along the arrows between client cloud manager authentication server and storage controller may indicate a sequential order to data flow associated with cloud .

In one or more embodiments client may initiate an authentication request to cloud manager . In one or more embodiments cloud manager may then request authentication server for purposes of attesting storage controller . In one or more embodiments authentication server may then transmit an authentication request to storage controller with a nonce n may may not be the same as ndiscussed with regard to and a measurement list thereof encrypted using the private key established during the registration process discussed with regard to and . In one or more embodiments storage controller may then be configured to decrypt the message transmitted from authentication server using the public portion of the key shared between authentication server and storage controller and to verify the measurement list of authentication server . In one or more embodiments storage controller may also transmit a measurement list thereof and the challenge message with the nonce nencrypted using the private key thereof.

In one or more embodiments authentication server may then be configured to decrypt the message from storage controller using the public key shared therebetween. In one or more embodiments if nmatches with the challenge message previously transmitted from authentication server and if the measurement list of storage controller matches with the stored copy at authentication server authentication server may be configured to transmit a message to storage controller indicating that storage controller is trusted as discussed above.

In one or more embodiments cloud manager may then transmit the signature data e.g. measurement list shown as signature data obtained in sequence in of storage controller to the client. In one or more embodiments thus the client may be able to verify the integrity of storage controller e.g. storage controller configured to host one or more vserver s e.g. vserver 1 associated with the client e.g. client 1 .

In one or more embodiments operation may involve decryption of the message transmitted from authentication server at storage controller using the public portion of the key. In one or more embodiments the measurement list of authentication server may also be verified at storage controller . In one or more embodiments operation may then involve transmitting from storage controller to authentication server the measurement list of storage controller along with nonce nassociated with the previous transmission from authentication server encrypted using the private key thereof.

In one or more embodiments operation may involve decrypting the message from storage controller at authentication server using the public portion of the key. In one or more embodiments operation may involve verifying as to whether a content of the message matches with nonce ntransmitted first from authentication server to storage controller . In one or more embodiments the measurement list of storage controller may also be verified for a match with the stored copy at authentication server . In one or more embodiments if both are matches operation may involve transmitting a message from authentication server to storage controller indicating that storage controller is trusted. 

In one or more embodiments operation may then involve transmitting the measurement list of storage controller from authentication server to cloud manager . In one or more embodiments operation may involve transmitting the measurement list of storage controller to client e.g. client 1 . In one or more embodiments if the abovementioned nonce match fails an error message e.g. authentication failure may be generated.

In one or more embodiments secure microcontroller aware application may also communicate with secure microcontroller and BIOS of storage controller through device driver s written therefor for purposes of storing and retrieving security data e.g. keys platform measurement list s . In one or more embodiments device driver s may be a part of the kernel associated with storage operating system configured to execute on storage controller .

When one or more storage controller s are associated with a cloud the exemplary embodiments discussed above may aid in a customer e.g. client of the cloud remotely verifying that the one or more storage controller s are trustworthy. In one or more embodiments the cloud customer may verify attributes of the one or more storage controller s such as the BIOS version the operating system version and or physical hardware identification attributes. In one or more embodiments thus customers seeking sensitivity security of data may consider opting for cloud computing to meet storage requirements thereof.

In one or more embodiments as discussed above secure microcontroller may be a TPM chip. Therefore in one or more embodiments cloud customers may utilize software configured to communicate with the servers having TPM modules associated therewith to fetch information associated with the hosts. As TPM modules have found wide technological use already existing software may be remodeled quickly in order to verify authenticity of the one or more storage controller s . Thus the exemplary embodiments may provide for a consistent and secure cloud computing system which may be completely TPM based.

It is obvious that the capability of the client s to query the one or more storage controllers s to obtain a measurement list is the same as the capability of the client s to query the vserver s associated with the one or more storage controller s to obtain the measurement list. Further it is obvious that the measurement list of storage controller may also be transmitted to a client device periodically without the client device querying storage controller .

In one or more embodiments operation may involve authenticating storage controller based on a communication protocol between the client device authentication server and storage controller . In one or more embodiments operation may then involve obtaining at the client device a signature data e.g. measurement list discussed above of storage controller following the authentication thereof. In one or more embodiments the signature data is configured to be stored in secure microcontroller interfaced with storage controller .

In one or more embodiments operation may involve registering storage controller with authentication server to establish a trusted key pair therebetween. In one or more embodiments operation may involve attesting storage controller through authentication server based on the established trusted key pair. In one or more embodiments operation may then involve obtaining at the client device the signature data of storage controller following the attestation thereof.

Although the present embodiments have been described with reference to specific example embodiments it will be evident that various modifications and changes may be made to these embodiments without departing from the broader spirit and scope of the various embodiments. Also for example the various devices and modules described herein may be enabled and operated using hardware circuitry e.g. CMOS based logic circuitry firmware software or any combination of hardware firmware and software e.g. embodied in a machine readable medium . For example the various electrical structure and methods may be embodied using transistors logic gates and electrical circuits e.g. application specific integrated ASIC circuitry and or in Digital Signal Processor DSP circuitry .

In addition it will be appreciated that the various operations processes and methods disclosed herein may be embodied in a machine readable medium and or a machine accessible medium compatible with a data processing system e.g. a computer devices and may be performed in any order e.g. including using means for achieving the various operations . Accordingly the specification and drawings are to be regarded in an illustrative rather than a restrictive sense.

