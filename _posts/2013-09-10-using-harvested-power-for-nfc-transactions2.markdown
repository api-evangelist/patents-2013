---

title: Using harvested power for NFC transactions
abstract: In some embodiments, a system includes a mobile communication device and a secure element physically coupled to the mobile communication device. The mobile communication device includes a first wireless transceiver, first processor, and first memory. The secure element includes a second wireless transceiver, second processor, and second memory. The mobile communication device is configured to transmit data via the first wireless transceiver to the secure element in packets, using a packet protocol. The secure element is configured to transmit data via the second wireless transceiver to the mobile communication device in messages, using a messaging protocol distinct from the packet protocol.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09626672&OS=09626672&RS=09626672
owner: 
number: 09626672
owner_city: Marina Del Rey
owner_country: US
publication_date: 20130910
---
This application is a continuation and claims priority to U.S. patent application Ser. No. 12 948 717 titled Wireless Bidirectional Communications between a Mobile Device and Associated Secure Element filed on Nov. 17 2010 which is a continuation in part of U.S. patent application Ser. No. 11 933 321 titled Method and System for Adapting a Wireless Mobile Communication Device for Wireless Transactions filed Oct. 31 2007 which is a continuation in part of U.S. patent application Ser. No. 11 467 441 titled Method and Apparatus for Completing a Transaction Using a Wireless Mobile Communication Channel and Another Communication Channel filed Aug. 25 2006 which claims priority to U.S. Provisional Patent Application No. 60 766 171 titled Mobile Credit Card Account Installer filed Dec. 31 2005 and Application No. 60 766 172 titled Mobile Ticket filed Dec. 31 2005. All of the above referenced patent applications are incorporated by reference herein in their entirety.

The disclosed embodiments relate generally to wireless communications for a mobile device and more particularly to wireless communications between a mobile device and an associated secure element using multiple communication protocols.

A secure element can be physically coupled to a mobile communication device to allow for transactions with remote terminals such as point of sale and point of entry terminals. Implementing wireless communications between the mobile communication device and the secure element however presents challenges. For example it is desirable to address messages transmitted between the mobile communication device and the secure element in a manner that allows for easy receipt of the messages. Also a method of communication between the mobile communication device and the secure element should allow for convenient activation of the secure element and remote deactivation of the secure element.

Disclosed embodiments allow a mobile communication device to communicate wirelessly with a secure element that is physically coupled to the mobile communication device. Communications from the mobile communication device to the secure element use a different protocol than communications from the secure element to the mobile communication device.

In some embodiments a system includes a mobile communication device and a secure element physically coupled to the mobile communication device. The mobile communication device includes a first wireless transceiver first processor and first memory. The secure element includes a second wireless transceiver second processor and second memory. The mobile communication device is configured to transmit data via the first wireless transceiver to the secure element in packets using a packet protocol. The secure element is configured to transmit data via the second wireless transceiver to the mobile communication device in messages using a messaging protocol distinct from the packet protocol.

In some embodiments a method of communicating between a mobile communication device and a secure element physically coupled to the mobile communication device is performed. The mobile communication device includes a first wireless transceiver first processor and first memory and the secure element includes a second wireless transceiver second processor and second memory. The method includes wirelessly transmitting a packet from the mobile communication device via the first wireless transceiver to the secure element using a packet protocol. The method also includes wirelessly transmitting a message from the secure element via the second wireless transceiver to the mobile communication device using a messaging protocol distinct from the packet protocol.

Reference will now be made in detail to various embodiments examples of which are illustrated in the accompanying drawings. In the following detailed description numerous specific details are set forth in order to provide a thorough understanding of the present inventions. However it will be apparent to one of ordinary skill in the art that the present inventions may be practiced without these specific details. In other instances well known methods procedures components and circuits have not been described in detail so as not to unnecessarily obscure aspects of the embodiments.

A secure element is physically coupled to the mobile communication device . In some embodiments the secure element is externally attached to the mobile communication device . For example the secure element is adhesively affixed or mechanically secured to the housing of the mobile communication device . Alternatively the secure element is housed within the mobile communication device . The secure element includes an antenna for wireless communication. While the antenna is shown as extending from the secure element for visual clarity the antenna may be implemented internally within the secure element . Also the secure element may include more than one antenna . Communication occurs wirelessly between the secure element and the mobile communication device via respective antennas and over a direct wireless channel between the mobile communication device and the secure element . Thus in some embodiments the channel does not pass through a network.

The secure element also can communicate wirelessly with different point of sale POS or point of entry POE terminals to N via the antenna . In some embodiments a POS terminal receives a transaction request signal from the secure element and transmits the transaction request signal to a transaction server over a network . Alternatively a POE terminal receives an entry request signal from the secure element and transmits the entry request signal to the transaction server over the network . The network is any suitable wired and or wireless network and may include for example a local area network LAN wide area network WAN virtual private network VPN the Internet a metropolitan area network MAN or any combination of these or similar networks. The transaction server verifies the request and forwards a verification signal to the management server via the network . The management server identifies the user corresponding to the verification signal and provides a response signal back to the mobile communication device which the mobile communication device receives via the antenna . The response signal thus is communicated back to the mobile communication device using a communication channel that is different from the communication channel used to initiate the transaction. Alternatively the response signal is communicated back to the mobile communication device using communication channels from the management server to the secure element through the network and POS terminal and then from the secure element to the mobile communication device via the antennas and .

In the example of an entry request signal received at a POE terminal the entry request is verified by the POE terminal or the transaction server upon which the POE terminal admits the user of the mobile communication device to the corresponding venue or facility.

The processor has the capability to perform not only the radio communication services necessary to allow for phone and data communications e.g. via the transceivers and or but also to execute various application programs e.g. applications that are stored in the memory . These application programs can receive inputs from the user via the display and or keypad . In some embodiments application programs stored in the memory and run on the processor are for example iPhone Android Windows Mobile BREW J2ME or other mobile applications and can encompass a broad array of application types. Examples of these applications include e commerce applications games enterprise applications and multimedia applications . E commerce applications can include ticketing applications content item and service purchase applications and or payment management applications. One example of an e commerce application that runs on the processor and is stored in the memory is an event application that provides event information and ticketing e.g. for movies concerts sports airplanes busses trains etc. . In some implementations the processor recognizes secure communications e.g. as received via the transceiver and or and transmits data from the secure communications to the secure element for storage therein. The processor also processes data received from the secure element .

In some embodiments the secure element includes one or more additional transceivers e.g. radio Bluetooth and or WiFi transceivers and associated antennas . The one or more additional transceivers are adapted to communicate wirelessly with the mobile communication device e.g. via the transceiver and or in the mobile communication device .

The memory stores one or more applications including one or more e commerce applications e.g. applications to be executed by the processor . Associated with respective e commerce applications are respective application programming interfaces APIs for interacting with corresponding applications run on the processor in the mobile communication device and with POS or POE terminals . Examples of such interactions are provided below with respect to .

In some embodiments the mobile communication device establishes a point to point connection with the secure element via the wireless channel using Point to Point Protocol PPP . Using PPP the mobile communication device tunnels packets e.g. IP packets to the secure element . After transmission of the packets is complete and acknowledgements confirming the packets have been received from the secure element the PPP connection is disabled. Alternatively Transmission Control Protocol Internet Protocol TCP IP is used to tunnel the packets from the mobile communication device to the secure element . In other embodiments the mobile communication device establishes a Virtual Private Network VPN or a General Packet Radio Service GPRS connection with the secure element which is used to tunnel the packets. In still other embodiments the mobile communication device uses WiFi Bluetooth ZigBee i.e. the IEEE 802.15.4 2003 standard or non directed infrared to transmit the packets e.g. via the transceiver to the secure element and thus to communicate with the secure element . In some embodiments the secure element also uses WiFi Bluetooth ZigBee or non directed infrared respectively to communicate with the mobile communication device .

In some embodiments the mobile communication device transmits data to the secure element over the direct wireless channel using a first communications protocol while the secure element transmits data to the mobile communication device over the direct wireless channel using a second communications protocol distinct from the first protocol. For example the device transmits data to the secure element using a packet protocol e.g. Internet Protocol IP in which an identifier of the secure element e.g. as stored in the memory element and also in the memory is used as a local private IP address for the secure element . The processor in the device creates packets with the identifier as a destination address and the data as the packet s payload and delivers the packets to the transceiver or which transmits the packets to the secure element . The secure element receives the packets via the transceiver or which provides the packets to the processor . The processor disassembles the packets and processes the data contained in the packets. In some embodiments however transmissions from the secure element to the device do not use the packet protocol. Instead for example the secure element uses a messaging protocol. Examples of messaging protocols include Short Message Service SMS and Multimedia Messaging Service MMS . The processor in the secure element creates messages addressed to the phone number associated with the device and provides the messages to the transceiver or which transmits the messages to the device . In some implementations the messages are SMS messages with or fewer characters. The device receives the messages at the transceiver or and provides the messages to the processor which extracts and processes the data contained in the messages. The device typically includes multiple ports associated with the transceiver . In some embodiments the device receives the messages from the secure element via a port of the transceiver that is separate from a port of the transceiver used to receive messages e.g. SMS or MMS messages transmitted to the device over a carrier network e.g. a cellular network . The use of different protocols depending on the direction of communication between the device and secure element allows communications to be addressed using readily available information the identifier of the secure element and the phone number of the device . In some embodiments the mobile communication device uses Dual Transfer Mode DTM to transmit the packets at a frequency different from a frequency used for cellular communication.

In some embodiments standard AT commands are used in the secure element and the mobile communication device . An API in the secure element uses AT commands to create and transmit messages e.g. SMS or MMS messages to a specified port number associated with the radio transceiver of the mobile communication device . The messages are sent directly from the secure element to the mobile communication device via the channel e.g. using a PPP connection or other connection . Alternatively if the API in the secure element determines that a carrier network e.g. a cellular network or wireless e.g. WiFi network is available the API will detect this and format the messages for delivery over the network e.g. using Http https to a Short Message Service Center SMSC or other message service center and then to the mobile communication device and or the management server . For example the API composes the SMS packets such that they are compliant with standard SMS protocol which includes a unique 5 digit shortcode approved by an authorized shortcode agency.

In some embodiments the secure element while physically coupled to the mobile communication device is not electrically coupled to the device and does not receive power from the device . Instead for example the secure element receives RF power from a remote terminal e.g. a POS or POE terminal when in proximity to the remote terminal and uses this power to operate the processor memory and transceivers and . In the absence of another power source the secure element thus communicates with the mobile communication device only when receiving power from a remote terminal. In some embodiments a secure element includes the components of the secure element and also includes a battery as shown in . The battery is charged inductively e.g. using a power mat which allows the battery to be encased within the housing or body of the secure element . In some embodiments the battery is surrounded by or encased in RF shielding to prevent interference with antennae in the secure element . The secure element also may include one or more light emitting diodes LEDs to indicate a charge status of the battery . In other embodiments a secure element includes the components of the secure element and also includes power harvesting circuitry as shown in . The power harvesting circuitry harvests power from ambient radio frequency RF signals and uses the harvested power to power the other components of the secure element . In some embodiments a secure element includes both a battery and power harvesting circuitry the power harvesting circuitry is used to recharge the battery. In the power bussing between the battery or power harvesting circuitry and other components is not shown for visual clarity.

In some embodiments the components of the secure element are implemented on a single integrated circuit IC this single integrated circuit is sometimes referred to as a smart chip. The smart chip and any other components e.g. the battery or power harvesting circuitry of the secure element are encased within a card referred to as a smart card that serves as a housing of the secure element . In some embodiments the smart card is adhesively affixed to the mobile communication device and is referred to as a sticker.

In some embodiments the transceivers and or in the smart chip are low power RF transceivers. Their low power output makes them susceptible to RF interference from neighboring devices such as the mobile communication device to which the smart card is attached. Thus in some implementations the smart card includes an RF shield to insulate the smart chip from external interference. In one implementation a lining of the smart chip is composed of an RF absorbent material. In general each phone has different levels of interference and a material size and thickness of the RF lining can determine an effectiveness of the RF shield. Alternatively instead of incorporating an RF shield within the smart card an RF shield can be placed between the smart card and the mobile communication device .

Given the abuse a mobile communication device can take smart cards that are attached externally to a mobile communication device are designed to withstand some abuse. In some embodiments the smart card includes a ruggedized shell that encases the smart chip . In some implementations the shell is formed of a composite plastic or polymer. The shell can be hard and substantially inflexible or soft and pliable . In some implementations the shell includes a protective membrane for the smart chip which prevents damage to internal circuitry of the smart chip a surface to adhere to an RF lining and or the mobile communication device with appropriate adhesive and a surface that faces outward when the smart card is attached to the mobile communication device on which to print branding and advertising. Types of adhesives that can be used to affix the smart card to the mobile communication device include for example paper glue super glue adhesive polymers and the like. In one implementation the shell has a maximum width or diameter of 25 mm and has a maximum thickness or depth of 5 mm.

In some embodiments instead of being externally attached to the mobile communication device a secure element is physically coupled to the mobile communication device by being disposed internally within a body of the mobile communication device . For example as shown in in accordance with some embodiments the mobile communication device includes a slot into which a secure element is inserted. The secure element is an example of a secure element or . Even though the secure element is physically housed within the slot the secure element and the mobile communication device still communicate wirelessly with each other. Accordingly in some implementations the slot only provides for physical insertion and mechanical connection of the secure element to the body of the mobile communication device and does not electrically couple the secure element to the mobile communication device .

Attention is now directed to methods of communication between various elements of the system including the mobile communication device and the secure element . illustrate examples of transactions involving the mobile communication device the secure element and other elements of the system .

Various operations shown in including operations and involving sending messages from the secure element to the mobile communication device . In some embodiments these messages are addressed to the phone number and or an identifier of the device and also are directed to a specified port of the device e.g. a specified port of the transceiver which may be distinct from the port e.g. of the transceiver that the device uses to receive messages via a carrier network e.g. from a cellular provider . In some embodiments these messages are generated using standard modem AT commands. The transceiver or transmits the messages. In some embodiments if an API running on the processor of the secure element detects that a carrier network or other wireless network is available the API formats the messages to comply with a standard messaging protocol e.g. standard SMS or MMS protocol and the messages are delivered from the secure element using the carrier network to the mobile communication device and or the management server e.g. using http https etc. . The messages may include a numeric shortcode e.g. a 5 digit shortcode approved by an authorized shortcode agency. Alternatively the messages are transmitted directly from the secure element to the mobile communication device via the channel e.g. using a PPP or other connection between the secure element to the mobile communication device .

In some embodiments the messages include a character in the first position of the message to indicate that the message originated from the secure element . The first character may be calculated as a function of an identifier e.g. serial number of the secure element and of a second number such as the date. For example the digits of the date are added together to provide an index value and the digit of the identifier specified by the index value is used as the first character. In one example if the date is Oct. 15 2010 the index value is 1 5 6 and the 6th digit of the identifier is used as the first character.

Examples provided in the following description of describe embodiments in which packets transmitted from the mobile communication device to the secure element use a different protocol than the messages transmitted from the secure element to the mobile communication device . For example the packets are IP packets e.g. 128 byte IP packets while the messages are SMS e.g. 130 character SMS or MMS messages. In other embodiments however the messages are packets formatted using the same protocol as the packets from the device . For example an API in the secure element creates IP packets e.g. 128 byte IP packets as the messages and transmits them to the device via the wireless channel using a connection e.g. a PPP VPN or GPRS connection established between the device and the secure element . The IP packets created by the API in the secure element are addressed to an IP address associated with a transceiver in the device . In still other embodiments SMS or MMS packets are used in both directions for communications between the mobile communication device and the secure element . In such embodiments the secure element includes a listener application to listen for messages from the device . Each message includes for example a shortcode approved by an authorized agency and an identifier in the first position of the message to indicate the origin of the message and distinguish the message from other messages.

In some embodiments the secure element selects a protocol to be used for a data transmission to the mobile communication device based on the amount of data to be transmitted. For example if the data can be transmitted using a predefined number of characters or less e.g. 130 characters or less the data are transmitted in an SMS message or similar message. If the data requires more than the predefined number of characters the data is transmitted in a packet e.g. a 128 byte IP packet .

The user orders a secure element . The order is placed for example using the application. The management server stores an identifier of the secure element to be provided to the user. For example the management server stores a serial number of a smart chip in a smart card to be provided to the user. Alternatively the user obtains the secure element and enters a code printed on the secure element into the application which transmits the code to the management server where it is stored. The management server uses the code to look up the identifier e.g. the serial number of the secure element . The identifier e.g. the serial number of the secure element will serve as an address e.g. a private internet protocol IP address of the secure element packets sent from the mobile communication device to the secure element will be addressed to this address. In some embodiments the serial number of the secure element is 128 bits and the private IP address of the secure element is the serial number.

Upon receiving the secure element the user attaches the secure element to the mobile communication device . For example the user adhesively affixes a smart card to the mobile communication device . In another example the user inserts a secure element into a slot in the mobile communication device . If the secure element includes a battery the battery and thus the secure element is charged .

After the secure element has been installed in accordance with the method the secure element is activated. is a flow diagram illustrating a method of activating a secure element in accordance with some embodiments. In the method the user uses the application running on the processor to query the management server for the identifier of the secure element and in some embodiments the mobile communication device . In response the management server retrieves the stored identifier s and transmits the identifier s to the mobile communication device .

At the mobile communication device the processor creates a packet e.g. an IP packet addressed to the identifier of the secure element that includes the phone number e.g. cellular phone number and in some embodiments the identifier of the mobile communication device . The packet is transmitted via the transceiver or . The secure element receives the packet via the transceiver or and verifies that the packet is addressed to the secure element by comparing the packet s address to the identifier stored in the memory element . An API running on the processor disassembles the packet and stores the phone number and identifier of the mobile communication device as provided by the packet in the memory . For example the phone number is stored in another memory element of the memory distinct from the memory element .

The API running on the processor creates a message e.g. an SMS or MMS message confirming that the secure element received the packet transmitted in operation . The message is transmitted by the transceiver or .

The mobile communication device receives the confirmation message at the specified port of the transceiver . A listener application e.g. on the device listens on the specified port for the message and upon receiving the message unpacks it. If the mobile device does not receive the confirmation message it retransmits the packet as described in operation . After receiving the confirmation the device then composes a message compliant with the format used for delivery e.g. via a public carrier network to the management server and transmits the confirmation of activation of the secure element to the management server which receives and stores the confirmation of activation of the secure element .

Once the secure element has been activated and its activation confirmed in accordance with the method the secure element may be used for purchases at terminals such as a POS or POE terminal . is a flow diagram illustrating a method of using a secure element for a purchase in accordance with some embodiments.

In the method the user instructs an application running on the processor of the mobile communication device to load value e.g. money or credits onto the secure element . The application creates one or more packets e.g. one or more IP packets addressed to the identifier of the secure element specifying the value to be loaded onto the secure element the packet s are transmitted via the transceiver or . The secure element receives the packet s via the transceiver or FIGS. A C and disassembles the packet. An application or corresponding API running on the processor updates the stored value of the secure element by the amount specified in the packet. In some embodiments the secure element transmits a confirmation message not shown to the mobile communication device . If the mobile communication device does not receive the confirmation message from the secure element it retransmits the packet s as described in operation .

To purchase an item or gain entry to a venue or facility the user brings the mobile communication device with its attached secure element into proximity with a POS or POE terminal . The terminal requests the amount of purchase or entry from the secure element . The secure element receives this request directly from the terminal via the transceiver or alternatively . After authenticating the request the secure element debits its stored value by the requested amount and transmits the requested amount to the terminal which receives the amount.

An application or corresponding API running on the processor of the secure element creates one or more messages e.g. one or more SMS or MMS messages with transaction data for the purchase e.g. the amount the date and time identification of the terminal etc. . The one or more messages are transmitted by the transceiver or .

The listener application e.g. listener application on the mobile communication device listens on the specific port for messages. When it receives the one or more messages at the specified port of the transceiver it unpacks the message confirms the messages and displays the transaction data contained in the message to the user. The device transmits a copy of the transaction data to the management server not shown in which stores the transaction data. The device also sends a confirmation that it received the messages to the secure element .

The method of thus illustrates a purchase performed using the device and secure element . In some embodiments data is provided to the secure element for subsequent use or reference in a transaction such as the purchase of the method . is a flow diagram illustrating a method of providing data to a secure element in accordance with some embodiments.

In the method the management server sends data to the mobile communication device which receives the data. In some embodiments the data is e commerce data e.g. a ticket such as a ticket for a movie concert sporting event airplane bus train etc. a new value for a stored value card credit card or debit card a coupon or an advertisement . If the data includes a coupon the coupon may include a merchant ID promotion code date of coupon delivery time of coupon delivery GPS coordinates associated with coupon delivery etc. Other examples of the data include but are not limited to locations of smart posters a code to unlock a door computer or vehicle a code to start a vehicle start a copy machine withdraw funds from an ATM or release medical records to a specific person or device a list of authorized cell phone numbers IMEI numbers and or serial numbers associated with secure elements for peer to peer funds transfer or an instruction to disable the secure element if the mobile device has been reported as lost or stolen. The device receives the data for example over a cellular network via the transceiver or over an Internet connection via the transceiver . Instead of immediately forwarding the received data to the secure element the device first transmits a wake up packet to the secure element in case the secure element is in a sleep mode. The wake up packet e.g. an IP packet is addressed to the identifier of the secure element and is transmitted via the transceiver or using the IP address of the transceiver or of the secure element .

The secure element receives the packet via the transceiver or and in response exits sleep mode. The processor creates a message e.g. an SMS or MMS message confirming that the device has exited sleep mode and thus woken up. The message is transmitted by the transceiver or .

The mobile communication device receives the message at the specified port of the transceiver . In response the processor creates one or more packets e.g. one or more IP packets containing the data received in the operation . The one or more packets are addressed to the identifier of the secure element and transmitted via the transceiver or using the IP address of the transceiver or of the secure element .

The secure element receives the packet s containing the data via the transceiver or and disassembles the packet s to access the data. Using an application e.g. an e commerce application or corresponding API running on the processor the secure element performs a task associated with the received data. For example the data are stored in the memory . If the data contain an instruction to disable the secure element the secure element disables itself thus preventing the secure element from being able to interact with a remote terminal e.g. a POS or POE terminal . If the data contain a ticket e.g. for a movie concert sports airplane bus train etc. or coupon the secure element stores the ticket or coupon in the memory and subsequently redeems the ticket or coupon at a POS or POE terminal even if the mobile communication device does not have network access and thus is offline. If the data contain instructions to increase or decrease the value of a stored value account debit card or credit card the value as stored in the memory is increased or decreased accordingly. If the data contain updates to information about a financial account e.g. expiration date billing address etc. the information is updated in the memory . If the data include one or more user defined payment limits an e commerce application on the secure element uses the payment limits to prevent transactions above the limits or to require entry of a PIN code to authorize transactions above the limits. If the data include a list of authorized cell phone numbers IMEI numbers and or serial numbers associated with secure elements that are authorized for peer to peer transactions e.g. funds transfers the secure element stores the list in the memory and subsequently uses the list to perform peer to peer transactions with other secure element equipped mobile communications devices that are placed in proximity to the device . If the data include a access code e.g. to provide access to a building office apartment room vehicle safety deposit box etc. the secure element stores the access code in the memory and subsequently provides the access code to a POE terminal to request access. If the data includes a code to operate an apparatus e.g. a vehicle or electronic appliance such as a computer copy machine washing machine ATM machine etc. the secure element stores the code in the memory and subsequently provides the code to a remote terminal associated with the apparatus to initiate use of the apparatus. If the data includes a code to provide access to computerized records e.g. medical records the secure element stores the code in the memory and subsequently provides the code to a computer to request access to the records.

The secure element creates and transmits a message e.g. an SMS or MMS message to the mobile communication device confirming that the task has been performed. The device receives the message at the specified port of the transceiver and forwards the confirmation to the management server which updates its records accordingly.

The method is performed at a system that includes a mobile communication device and a secure element physically coupled to the mobile communication device . The mobile communication device includes a first wireless transceiver e.g. the transceiver first processor e.g. the processor and first memory e.g. the memory . In some embodiments the mobile communication device includes a plurality of transceivers e.g. the transceivers and . The secure element includes a second wireless transceiver e.g. the transceiver or second processor e.g. the processor and second memory e.g. the memory . In some embodiments the secure element includes a plurality of transceivers e.g. the transceivers and .

In the method a packet or a plurality of packets is wirelessly transmitted from the mobile communication device via the first wireless transceiver to the secure element using a packet protocol e.g. PPP TCP IP . In some embodiments the packet has a destination address that corresponds to an identifier associated with the secure element e.g. an IP address of the transceiver or and stored in a memory element e.g. the memory element of the second memory. For example the destination address is the identifier. In some examples all or a portion of the identifier is used as a private IP address assigned to the secure element. In some examples the secure element includes a chip e.g. a smart chip configured for near field communications that includes the second wireless transceiver second processor and second memory. Because the chip is configured for near field communications it is referred to as an NFC chip. The identifier is the serial number of the NFC chip for example the serial number of the NFC chip is 128 bits these 128 bits are used as a 128 bit IP address of the secure element . This 128 bit IP address is used as the destination address in the header of TCP IP packets sent to the secure element .

Examples of packets transmitted in the operation include the packets transmitted in the operations and .

In some embodiments the packet has a payload specifying a phone number of the mobile communication device e.g. as for the operation .

In some embodiments the packet has a payload including a command to disable an application e.g. an application such as an e commerce application stored in the second memory e.g. as described with respect to the operation . In response the application is disabled in the secure element e.g. in the operation .

The secure element receives the packet via the second transceiver e.g. transceiver or alternatively via another transceiver distinct from the second transceiver e.g. transceiver .

A message or a plurality of messages is wirelessly transmitted from the secure element via the second wireless transceiver to the mobile communication device using a standard messaging protocol e.g. SMS or MMS distinct from the packet protocol or a variant of a standard messaging protocol. The message is transmitted for example using AT commands. In some embodiments the message is addressed to the phone number of the mobile communication device . In some embodiments the first character of the message will include a unique identifier e.g. a specific letter to identify that the message has been sent from the secure element . The first character may be randomly generated according to a pre determined algorithm to prevent spoofing.

Examples of messages transmitted in the operation include the messages transmitted in the operations and .

In some embodiments the packet s have payload including data e.g. e commerce data . Examples of data included in the payload include those data described with respect to operations and in the method . An application stored in the second memory is executed on the second processor in the secure element to process the data e.g. as in the operation . The message confirms that the application processed the data e.g. as in the operation .

In some embodiments prior to the operation the secure element counts the number of characters to be used in the message. If the number of characters exceeds the number of characters allowed for the message using the messaging protocol the secure element does not transmit the message but instead creates and transmits a packet with a payload larger than the number of characters allowed for the message using the messaging protocol. For example an IP packet is created and transmitted. Alternatively if the number of characters exceeds the number of characters allowed for the message using the messaging protocol the secure element creates and transmits a plurality of messages.

In some embodiments the message provides transaction data e.g. as in the operation . The transaction data are associated with an e commerce or other transaction. For example the message provides a receipt from an e commerce transaction the receipt includes for example a transaction number transaction amount transaction date transaction time merchant ID merchant name product id product name location of transaction merchant and or cashier ID. In another example the message provides an indication of redemption of an electronic coupon. Other examples of transaction data are described with respect to operations in the method .

The mobile communication device receives the message via the first transceiver e.g. transceiver or alternatively via another transceiver distinct from the first transceiver e.g. transceiver . In some embodiments the device receives messages from a cellular service provider e.g. forward by the cellular service provider but initially transmitted by another party at a first port and receives the message from the secure element at a second port distinct from the first port.

In some embodiments the secure element receives power from a remote terminal e.g. a POS or POE terminal . For example the secure element receives power via RF signals transmitted by the remote terminal. The wireless transmission of the message in operation is performed using the power received from the remote terminal when the secure element is in proximity to the remote terminal. In other embodiments the secure element harvests power from ambient RF signals e.g. using power harvesting circuitry . The wireless transmission of the message in operation is performed using the harvested power. In still other embodiments the secure element includes a battery e.g. a battery and the wireless transmission of the message in operation is performed using power from the battery. For example the secure element determines whether power is available from a nearby remote terminal. If power is not available from the nearby terminal the message is wirelessly transmitted using power from the battery.

The method thus allows for wireless bi directional communication between a mobile communication device and associated secure element using a different protocol in each direction. While the method includes a number of operations that appear to occur in a specific order it should be apparent that the method can include more or fewer operations which can be executed serially or in parallel. An order of two or more operations may be changed and two or more operations may be combined into a single operation. For example the order of the operations and may be reversed.

The communication module includes a listener application to listen on a specified port of a transceiver e.g. the transceiver for messages from the secure element . The communication module also stores an identifier of a secure element that is physically coupled to the mobile communication device for use in transmitting packets to the secure element and the phone number of the mobile communication device for use in receiving messages from the secure element .

Associated with the e commerce application s are corresponding APIs for processing data received from other devices e.g. the secure element and the management server and data to be transmitted to the other devices. Similar APIs may be associated with the other applications and or .

In some embodiments the non transitory computer readable storage medium of the memory includes instructions for performing all or a portion of the operations shown in the mobile device communication columns in except for the attaching operation . Likewise the memory includes instructions for performing all or a portion of the operations in the method .

Each of the above identified elements in may be stored in one or more of the previously mentioned memory devices in the memory . Each of the above identified modules corresponds to a set of instructions for performing functions described above. The above identified modules or programs i.e. sets of instructions need not be implemented as separate software programs procedures or modules and thus various subsets of these modules may be combined or otherwise re arranged in various embodiments. In some embodiments the memory may store a subset of the modules and data structures identified above. Furthermore the memory may store additional modules and data structures not described above.

The communication module stores an identifier of the secure element e.g. an identifier of the transceiver or for use in receiving packets from the mobile communication device to which the secure element is physically coupled and also stores the phone number and identifier of the mobile communication device for use in transmitting messages to the mobile communication device .

In some embodiments the memory includes instructions for performing all of the operations shown in the secure element columns in except for the attaching operation and charging operation . Likewise the memory includes instructions for performing all or a portion of the operations in the method .

Each of the above identified elements in may be stored in one or more of the previously mentioned components of the memory . Each of the above identified modules corresponds to a set of instructions for performing functions described above. The above identified modules or programs i.e. sets of instructions need not be implemented as separate software programs procedures or modules and thus various subsets of these modules may be combined or otherwise re arranged in various embodiments. In some embodiments the memory may store a subset of the modules and data structures identified above. Furthermore the memory may store additional modules and data structures not described above.

The foregoing description for purpose of explanation has been described with reference to specific embodiments. However the illustrative discussions above are not intended to be exhaustive or to limit the inventions to the precise forms disclosed. Many modifications and variations are possible in view of the above teachings. The embodiments were chosen and described in order to best explain the principles of the inventions and their practical applications to thereby enable others skilled in the art to best utilize the inventions and various embodiments with various modifications as are suited to the particular use contemplated.

