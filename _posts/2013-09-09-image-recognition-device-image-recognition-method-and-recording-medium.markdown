---

title: Image recognition device, image recognition method, and recording medium
abstract: A delivery device according to the present invention includes a learning image storage unit, a first recognition unit, a second recognition unit, and a registration unit. The learning image storage unit stores at least one piece of learning image. The first recognition unit recognizes a recognition target image using the learning image stored in the learning image storage unit. The second recognition unit recognizes the recognition target image with finer precision than that of the first recognition unit, when the first recognition unit fails to recognize the recognition target image. When the second recognition unit succeeds in recognizing the recognition target image, the registration unit registers information on the successfully recognized recognition target image in a storage unit.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09355338&OS=09355338&RS=09355338
owner: YAHOO JAPAN CORPORATION
number: 09355338
owner_city: Tokyo
owner_country: JP
publication_date: 20130909
---
The present application claims priority to and incorporates by reference the entire contents of Japanese Patent Application No. 2013 177361 filed in Japan on Aug. 28 2013.

The present invention relates to an image recognition device an image recognition method and a recording medium.

An image recognition for extracting a feature of a target object image on which a target object is delineated and for recognizing the target object has been known. For example the target object is a commodity of a recognition target and is a bag and so on as an example. As a technique related to such image recognition a technique adding a dictionary data has been known. Specifically such technique cuts out a local area from the target object image calculates a feature amount for recognizing the target object from the local area for each image calculates similarity between the feature amounts which are calculated for each image for each local area registers one of the feature amounts in each local area as the dictionary data with respect to the target object when feature amounts whose similarity is equal to or higher than a threshold value are present.

In related art described above however the high precision image recognition has not been always performed at high speed. Specifically since the above described technique calculates the similarity between the feature amount of the local area of the target object image and the feature amount of the local area registered in the dictionary data for each local area it takes a long time to recognize the target object image because of great operation quantities. In the above described technique furthermore if lowering recognition precision so as to performing the image recognition at high speed it is unable to recognize a coarse image which is photographed under different conditions resulting in lacking practicality. For these reasons in the above described related art the high precision image recognition has not been always performed at high speed.

It is an object of the present invention to at least partially solve the problems in the conventional technology.

The above and other objects features advantages and technical and industrial significance of this invention will be better understood by reading the following detailed description of presently preferred embodiments of the invention when considered in connection with the accompanying drawings.

An exemplary embodiment hereinafter referred to as an embodiment for carrying out an image recognition device an image recognition method and a recording medium according to the present invention will be described below in detail with reference to drawings. Further the image recognition device the image recognition method and the recording medium according to the invention are not limited to the embodiment. In addition the same components will be denoted with the same reference numerals in each of the following embodiments and the duplicated description will not be presented.

First an example of a registration processing according to a first embodiment will be described with reference to . is an explanatory diagram illustrating the example of the registration processing by a delivery system according to the embodiment. In the example of the registration processing is carried out to register intonation on a recognition target image which is transmitted from a terminal device in a learning image storage unit through a delivery device .

In the example of the terminal device transmits a recognition target image P on which a bag C is delineated by a user operating the terminal device to the delivery device . Further the recognition target image P is photographed by for example a camera embedded in the terminal device .

The delivery device stores a learning image P in the learning image storage unit . Moreover the learning image P is previously registered by an administrator who administers the delivery device . In addition the delivery device generates a BoF Bag of Features from the learning image P. For example the delivery device generates the BoF of the learning image P using a Visual Words. Then the delivery device stores the learning image P and BoF in association with each other.

In addition when the recognition target image P is received from the terminal device the delivery device performs a first recognition which recognizes the recognition target image P. For example the delivery device generates a BoF from the received recognition target image P. Then the delivery device searches a BoF similar to the BoF from BoFs of the learning image stored in the learning image storage unit . Subsequently the delivery device calculates first certainty factors by matching the BoF with each searched BoF. Further the delivery device determines whether or not the maximum certainty factor which is the largest value among the calculated first certainty factors is higher than a determination threshold value.

Here the BoF of the maximum certainty factor is assumed to be the BoF. In addition the maximum certainty factor of the BoF is assumed to be higher than the determination threshold value. In this case the delivery device assumes the learning image P corresponding to the BoF of the maximum certainty factor as a recognition result of the recognition target image P. That is the delivery device recognizes the bag C delineated on the recognition target image P as the bag C delineated on the learning image P corresponding to the BoF.

On the other hand when the maximum certainty factor of the BoF is lower than the determination threshold value the delivery device determines that the recognition of the recognition target image P is failed. For example the delivery device fails to recognize the recognition target image in a case where the recognition target image is faint because the image is photographed under a dark photographing location and a bad photographing condition.

Then when the recognition of the recognition target image P is failed the delivery device performs a second recognition which is matched finer than the first recognition. For example the delivery device extracts a local feature amount from all of the learning images corresponding to the first certainty factor higher than a re determination threshold value. Then the delivery device allows a feature amount similar to the extracted local feature amount to be associated with the learning image and the recognition target image P and then matches coordinates to calculate second certainty factors. Then the delivery device determines whether or not the maximum certainty factor which is the largest value among the calculated second certainty factors is higher than a learning determination threshold value.

Here the BoF of the maximum certainty factor is assumed to be the BoF. In addition the maximum certainty factor of the BoF is assumed to be higher than the learning determination threshold value. In this case the delivery device assumes the learning image P corresponding to the BoF of the maximum certainty factor as a recognition result of the recognition target image P. That is the delivery device recognizes the bag C delineated on the recognition target image P as the bag C delineated on the learning image P corresponding to the BoF. Then the delivery device registers the successfully recognized recognition target image P and the BoF in the learning image storage unit in association with a tag of the bag C which is a form of meta information attached to the successfully recognized learning image P.

For this reason since the delivery device according to the embodiment performs the first recognition using the BoF it is possible to recognize the recognition target image at high speed such that an operation quantity is small as compared with the recognition using the local feature amount. In addition since the delivery device performs the second recognition finer than the first recognition even though the recognition of the recognition target image is failed by the first recognition it is possible to recognize with high precision even in a case of the recognition target image different in the photographing condition from the learning image. For this reason the delivery device can register even the recognition target image different in the photographing condition from the learning image as the learning image. In addition since the delivery device registers the recognized recognition target image as the learning image hence in a case of receiving an image similar to the recognition target image it is possible to recognize such image at high speed. Thus the delivery device can perform the high precision image recognition at high speed.

Next a delivery system according to the first embodiment will be described with reference to . is a diagram illustrating a configuration example of the delivery system according to the first embodiment. As illustrated in the delivery system includes a terminal device and the delivery device . The terminal device and the delivery device each are connected to a network N to be wirelessly communicated. In furthermore the delivery system includes one terminal device and one delivery device as an example but the delivery system may include a plurality of terminal devices or a plurality of delivery devices .

For example the terminal device is an information processing device such as a smart phone a tablet terminal a notebook PC a mobile telephone a PDA Personal Digital Assistant . For example the terminal device generates the recognition target image on which a recognition target is delineated by photographing the recognition target to be recognized by the user using an embedded camera. Then the terminal device transmits the generated recognition target image to the delivery device . Furthermore the terminal device may transmit an image acquired through an internet to the delivery device as the recognition target image. In addition the terminal device displays a commodity page which is a web page relating to an online shopping delivered from the delivery device on a display unit for example liquid crystal display .

The delivery device is a server device which delivers the commodity page to the terminal device . Specifically the delivery device performs the recognition of the commodity delineated on the recognition target image and delivers the commodity page relating to the recognized commodity to the terminal device when the recognition target image is transmitted from the terminal device .

Next a configuration of the delivery device according to the embodiment will be described with reference to . is a diagram illustrating a configuration example of the delivery device according to the embodiment. As illustrated in the delivery device includes a communication unit the learning image storage unit and a control unit . Furthermore the delivery device may include an input unit for example keyboard or mouse for receiving various operations from the administrator using the delivery device or a display unit for example liquid crystal display for displaying various types of information.

The communication unit is implemented by for example NIC Network Interface Card . Such communication unit is connected to a network N by wired or wireless and performs transmission and reception to from the terminal device through the network N.

The learning image storage unit is implemented by for example a semiconductor memory device such as a RAM Random Access Memory or a flash memory or a storage device such as a hard disk or an optical disk. Such learning image storage unit stores at least one piece of learning image used as a comparison target of the recognition target image. For example the learning image is an image of the commodity which is sold on the online shopping site. Furthermore the learning image is input from the administrator who administers the delivery device or an operator who operates an online shopping.

Here illustrates an example of the learning image storage unit according to the embodiment. In the example illustrated in the learning image storage unit includes an item such as a learning image a BoF and a tag .

The learning image indicates a learning image input from the administrator or the operator. In the example illustrated in as an example conceptual information such as a P or P is stored in the learning image but in fact a file path name indicating a storage location of still image or image is stored therein.

The BoF indicates a BoF generated from the learning image. For example when the learning image is input the BoF is generated by extracting the local feature amount from the learning image and is previously stored in the learning image storage unit . In the example illustrated in as an example conceptual information such as a B or B is stored in the BoF but in fact the BoF indicates a feature vector group extracted from the learning image. The tag indicates meta information attached to the learning image. For example a JAN code of the commodity is set in the tag as a form of meta information to identify the commodity delineated on the learning image.

That is illustrates an example in which the learning image P and the BoF of the commodity identified by the tag J are stored.

The control unit is implemented by for example a CPU Central Processing Unit or an MPU Micro Processing Unit in such a manner that various programs corresponding to an example of an advertisement extracting program stored in the storage device provided inside the delivery device are executed using a RAM as a work area. In addition the control unit is implemented by for example an integrated circuit such as an ASIC Application Specific Integrated Circuit or an FPGA Field Programmable Gate Array .

As illustrated in such a control unit includes a receiving unit a first recognition unit a second recognition unit a registration unit and a delivery unit and implements or executes functions or operations of information processing which will be described below. Furthermore an internal configuration of the control unit is not limited to the configuration illustrated in but another configuration may be adapted as long as it performs information processing described below. In addition a connection relation of each processing unit provided in the control unit is not limited to the connection relation illustrated in but another connection relation may be adapted.

The receiving unit receives the recognition target image from the terminal device . For example the receiving unit receives the recognition target image by receiving a mail to which the recognition target image is attached from the terminal device . In addition the receiving unit may receive the recognition target image by uploading the image through a protocol such as HTTP from a terminal device for example.

When the recognition target image is received by the receiving unit the first recognition unit recognizes the commodity delineated on the received recognition target image. Specifically the first recognition unit recognizes the commodity delineated on the received recognition target image by matching the recognition target image with the learning image stored in the learning image storage unit .

By way of example the first recognition unit generates the BoF from the received recognition target image. Specifically the first recognition unit extracts a feature point from the recognition target image. Subsequently the first recognition unit extracts a feature point periphery pattern as an SIFT feature vector local feature amount by SIFT descriptor. Then the first recognition unit quantizes the SIFT feature vector on the basis of the previously calculated Visual Words. Subsequently the first recognition unit generates the BoF by generating a histogram indicating an appearance frequency of the Visual Words in the recognition target image.

Further for example the Visual Words is a cluster which is generated by extracting the SIFT feature vector acting as the local feature amount from all of the learning images stored in the learning image storage unit and then mapping and clustering the extracted SIFT feature vector on a feature amount space. IDs are allocated to this cluster to extract the local feature amount from the image which is a generation target of the BoF and to search a cluster Visual Words having a most similar local feature amount and thus the BoF is generated by vector representing the appearance frequency of the local feature amount with respect to each ID of the searched cluster. By using the BoF generated using the Visual Words the certainty factor can more easily be calculated using the vector represented BoF than in a complicated computation for individually calculating the certainty factor by matching the local feature amounts extracted from the image among the images. Here when the number of learning images stored in the learning image storage unit is large the SIFT feature vector may be extracted from the learning image which is randomly sampled.

Then the first recognition unit searches a BoF similar to the BoF generated by the first recognition unit from the BoFs of the learning image stored in the learning image storage unit .

Subsequently the first recognition unit calculates the first certainty factors by matching each of the searched BoFs with the BoF. Then the first recognition unit determines whether or not the maximum certainty factor which is the largest value among the calculated first certainty factors is higher than the determination threshold value. Further the determination threshold value is set as a value obtained in consideration of recognition precision or recognition time depending on the intended use obtained by for example experiment.

Here when the maximum certainty factor is higher than the determination threshold value the first recognition unit assumes the learning image corresponding to the BoF of the maximum certainty factor as a recognition result of the recognition target image. That is the first recognition unit recognizes the commodity delineated on the recognition target image as that delineated on the learning image corresponding to the BoF of the maximum certainty factor. Like this since the first recognition unit recognizes the recognition target image using the BoF it is possible to recognize the recognition target image at high speed as compared with the recognition using the local feature amount.

On the other hand when the maximum certainty factor of the BoF is lower than the determination threshold value the first recognition unit recognizes the second recognition by a second recognition unit which will be described below.

Furthermore the first recognition unit is not limited to the first certainty factor calculated on the basis of the above described BoF but may calculate the first certainty factor by matching coordinates of the feature point of the recognition target image and the feature point of the learning image stored in the learning image storage unit .

In addition the first recognition unit may calculate the certainty factor on the basis of the BoF calculate the first certainty factor on the basis of the coordinate of the feature point and calculate the first certainty factor by calculating an average value between the certainty factor calculated on the basis of the BoF and the certainty factor calculated on the basis of the coordinate of the feature point.

The second recognition unit recognizes the commodity delineated on the recognition target image with finer precision than that of the first recognition unit when the first recognition unit fails to recognize the recognition target image. Specifically the second recognition unit recognizes the commodity delineated on the recognition target image by matching the recognition target image and the learning image stored in the learning image storage unit with each other.

By way of example the second recognition unit determines whether or not the first certainty factor which is higher than the re determination threshold value among the first certainty factors calculated by the first recognition unit is present. Further the re determination threshold value is set to a value lower than the determination threshold value used in the recognition by the first recognition unit . Here the second recognition unit extracts the local feature amount from all of the learning images corresponding to the certainty factor higher than the re determination threshold value when the first certainty factor higher than the re determination threshold value is present.

Then the second recognition unit allows the feature amount similar to the extracted local feature amount to be associated with the learning image and the recognition target image. And then the second recognition unit calculates the second certainty factors by matching the coordinate among the feature amount associated and the learning image with the feature amount associated with the recognition target image. Then the second recognition unit determines whether or not the maximum certainty factor which is the largest value among the calculated second certainty factors is higher than the learning determination threshold value.

Here when the maximum certainty factor is higher than the learning determination threshold value the second recognition unit assumes the learning image corresponding to the maximum certainty factor as a recognition result of the recognition target image. That is the second recognition unit recognizes the commodity delineated on the recognition target image as that delineated on the learning image corresponding to the maximum certainty factor.

On the other hand when the maximum certainty factor is lower than the learning determination threshold value the second recognition unit terminates the second recognition processing.

When the recognition result of the recognition target image is present the registration unit stores information on such recognition target image in the learning image storage unit . For example when the recognition result of the recognition target image is present the registration unit registers the recognition target image and the BoF of the recognition target image which are associated with the tag of the commodity in the learning image storage unit .

In addition when the recognition result of the recognition target image is present the registration unit may extract and register a portion corresponding to the learning image area assumed as the recognition result from the recognition target image. Accordingly since the registration unit registers the image in which the portion of the recognition target is cutout by exclusion of a background included in the recognition target image as the learning image it is possible to increase recognition precision.

When the commodity delineated on the recognition target image is recognized by the first recognition unit or the second recognition unit the delivery unit delivers the commodity page of such commodity to the terminal device acting as a transmission source of the recognition target image.

An example of the recognition processing by the above described first recognition unit and second recognition unit will be described with reference to . is an explanatory diagram illustrating an example of the recognition processing by the delivery device according to the embodiment. As illustrated in the delivery device receives the recognition target image P from the terminal device . In this case the first recognition unit generates the BoF from the received recognition target image P. Then the first recognition unit searches the BoF similar to the BoF from the BoF of the learning image stored in the learning image storage unit .

Here it is assumed that the BoF of the learning image P the BoF of the learning image P and the BoF of the learning image P are searched by the first recognition unit . In this case the first recognition unit calculates the first certainty factors by matching the searched BoF BoF and BoF with the BoF.

Then the first recognition unit determines whether or not the maximum certainty factor which is the largest value among the calculated first certainty factors is higher than a predetermined determination threshold value. Here the BoF of the maximum certainty factor is assumed to be the BoF. In addition the maximum certainty factor of the BoF is assumed to be lower than the determination threshold value.

In this case the first recognition unit determines that the recognition of the recognition target image P is failed. Then when the recognition of the recognition target image is failed the second recognition unit performs the second recognition which is matched finer than the first recognition. Specifically the second recognition unit determines whether or not the BoF of the first certainty factor which is higher than the re determination threshold value is present. Here the first certainty factor of the BoF and the BoF is assumed to be higher than the re determination threshold value.

In this case the second recognition unit extracts the local feature amount from the learning image P and the learning image P corresponding to the BoF and the BoF. Further the second recognition unit does not extract the local feature amount of the learning image P corresponding to the BoF lower than the re determination threshold value.

Then the second recognition unit allows the feature amounts similar to the local feature amounts of the extracted BoF and BoF to be associated with the feature amount of the recognition target image P and then matches the coordinates to calculate the second certainty factors. Then the second recognition unit determines whether or not the maximum certainty factor which is the largest value among the calculated second certainty factors is higher than the predetermined learning determination threshold value.

Here the BoF of the maximum certainty factor is assumed to be the BoF. In addition the maximum certainty factor of the BoF is assumed to be higher than the predetermined learning determination threshold value. In this case the second recognition unit assumes the learning image P corresponding to the BoF of the maximum certainty factor as the recognition result of the recognition target image P. Then the registration unit registers the recognition target image P and the BoF in the learning image storage unit in association with the tag J of the bag C.

Next a processing procedure by the delivery device according to the embodiment will be described with reference to . is a flowchart illustrating the delivery processing procedure by the delivery device according to the embodiment.

As illustrated in the delivery device executes a first recognition processing Step S . Subsequently the delivery device determines whether or not the recognition result of the recognition target image is present Step S . Here when the recognition result of the recognition target image is present Yes in step S the delivery device delivers the commodity page of the recognized commodity to the terminal device Step S .

On the other hand when the recognition result of the recognition target image is not present No in step S the delivery device determines whether or not the first certainty factor higher than the re determination threshold value is present Step S . Here when the first certainty factor higher than the re determination threshold value is not present the delivery device terminates the delivery processing No in Step S .

On the other hand when the first certainty factor higher than the re determination threshold value is present the delivery device executes a second recognition processing Step S . Subsequently the delivery device determines whether or not the recognition result of the recognition target image is present Step S . Here when the recognition result of the recognition target image is not present the delivery device terminates the delivery processing No in Step S .

On the other hand when the recognition result of the recognition target image is present the delivery device registers the recognition target image and the BoF of the recognition target image in the learning image storage unit Step S . In addition the delivery device delivers the commodity page of the commodity recognized in step S or step S to the terminal device . Thus the terminal device displays the commodity page delivered in step S on the display unit.

Next a processing procedure by the delivery device according to the embodiment will be described with reference to . is a flowchart illustrating a first recognition processing procedure by the delivery device according to the embodiment.

As illustrated in the delivery device extracts the local feature amount of the recognition target image Step S . Then the delivery device generates the BoF of the recognition target image Step S .

Subsequently the delivery device searches a BoF similar to the generated BoF from the BoFs stored in the learning image storage unit Step S . For example this search employs an inverted index using the BoF as an index. Then the delivery device calculates the first certainty factors for each of the searched BoFs Step S .

Subsequently the delivery device determines whether or not the maximum certainty factor of the calculated first certainty factors is higher than the determination threshold value Step S . Here when the maximum certainty factor is lower than the determination threshold value the delivery device terminates the first recognition processing procedure No in Step S .

On the other hand when the maximum certainty factor is higher than the determination threshold value the delivery device assumes the learning image corresponding to the maximum certainty factor as the recognition result Step S .

Next a processing procedure by the delivery device according to the embodiment will be described with reference to . is a flowchart illustrating a second recognition processing procedure by the delivery device according to the embodiment.

As illustrated in the delivery device extracts the local feature amount from a learning image of first certainty factor higher than the re determination threshold value Step S . Then the delivery device allows the feature amount similar to the local feature amount to be associated with the learning image and the recognition target image Step S .

Subsequently the delivery device calculates the second certainty factors by matching the coordinates of the feature amounts which are associated with the learning image and the recognition target image Step S . Then the delivery device determines whether or not the maximum certainty factor of the calculated second certainty factors is higher than the learning determination threshold value Step S .

Here when the maximum certainty factor is lower than the learning determination threshold value the delivery device terminates the second recognition processing No in Step S .

On the other hand when the maximum certainty factor is higher than the learning determination threshold value the delivery device assumes the learning image corresponding to the maximum certainty factor as the recognition result Step S .

As described above the delivery device according to the embodiment includes the learning image storage unit corresponding to an example of storage unit the first recognition unit the second recognition unit and the registration unit . The learning image storage unit stores the learning image. The first recognition unit recognizes the recognition target image using the learning image stored in the learning image storage unit . The second recognition unit recognizes the recognition target image with finer precision than that of the first recognition unit when the first recognition unit fails to recognize the recognition target image. When the second recognition unit succeeds in recognizing the recognition target image the registration unit registers the information on the successfully recognized recognition target image in the storage unit.

For this reason since the delivery device according to the embodiment performs the second recognition finer than the first recognition even though the recognition of the recognition target image is failed by the first recognition it is possible to recognize with high precision even in the case of the recognition target image different in the photographing condition from the learning image. For this reason the delivery device can register even the recognition target image different in the photographing condition from the learning image as the learning image. In addition since the delivery device registers the recognized recognition target image as the learning image hence it is possible to recognize such image at high speed in the case of receiving the image similar to the recognition target image. Thus the delivery device can perform the high precision image recognition at high speed. In addition the user of the terminal device can know the commodity delineated on the recognition target image. Moreover the administrator of the online shopping can improve the user s motivation to purchase the commodity.

Furthermore in the delivery device according to the embodiment the first recognition unit calculates the first certainty factor on the basis of the learning image and the recognition target image. The second recognition unit recognizes the recognition target image with finer precision than that of the first recognition unit when the first certainty factor calculated by the first recognition unit is higher than the predetermined re determination threshold value which is the value lower than the predetermined determination threshold value.

For this reason since the delivery device according to the embodiment performs the first recognition more coarse than the second recognition it is possible to recognize the recognition target image at high speed such that the operation quantity is small as compared with the image recognition using the local feature amount. In addition since the delivery device according to the embodiment performs the second recognition finer than that of the first recognition even though the recognition of the recognition target image is failed by the first recognition it is possible to recognize with high precision even in a case where the recognition target image is different in the photographing condition from the learning image. For this reason the delivery device according to the embodiment can register even recognition target image which is different in the photographing condition from the learning image as the learning image. In addition since the delivery device according to the embodiment registers the successfully recognized recognition target image in the learning image storage unit hereinafter even in a case of receiving the image similar to the recognition target image having a coarse image quality it is possible to recognize such image at high speed.

Furthermore in the delivery device according to the embodiment the learning image storage unit further stores the BoFs of the learning image. The first recognition unit generates the BoF of the recognition target image and calculates the first certainty factor on the basis of the generated BoF of the recognition target image and the BoFs of the learning image stored in the learning image storage unit . The second recognition unit calculates the second certainty factor on the basis of the feature amount of the learning image and the feature amount of the recognition target image.

For this reason since the delivery device according to the embodiment performs the first recognition using BoF it is possible to recognize the recognition target image at high speed such that the operation quantity is small as compared with the image recognition using the local feature amount. In addition since the delivery device performs the second recognition using the feature amount it is possible to recognize the recognition target image with high precision.

Furthermore in the delivery device according to the embodiment the first recognition unit extracts the local feature amount of the recognition target image generates the BoF from the extracted local feature amount searches the generated BoF from the BoFs of the learning image stored in the learning image storage unit calculates the first certainty factors between the each searched BoF and the BoF of the recognition target image and when the maximum certainty factor which is the largest value among the calculated first certainty factors is higher than the predetermined determination threshold value recognizes the recognition target image as the learning image corresponding to the BoF of the maximum certainty factor.

Therefore since the delivery device according to the embodiment performs the first recognition using BoF it is possible to recognize the recognition target image at high speed with the small operation quantity.

Furthermore in the delivery device according to the embodiment the first recognition unit extracts the local feature amount of the recognition target image generates the BoF from the extracted local feature amount searches the generated BoF from the BoFs of the learning image stored in the learning image storage unit calculates the first certainty factors by matching the coordinate of the feature point of each learning image corresponding to the searched BoF with the coordinate of the feature point of the recognition target image and when the maximum certainty factor which is the largest value among the calculated first certainty factors is higher than the determination threshold value recognizes the recognition target image as the learning image corresponding to the maximum certainty factor.

For this reason since the delivery device according to the embodiment performs the first recognition using the coordinate of the feature point it is possible to recognize the recognition target image with high precision.

Furthermore in the delivery device according to the embodiment the first recognition unit extracts the local feature amount of the recognition target image generates the BoF from the extracted local feature amount searches the generated BoF from the BoFs of the learning image stored in the learning image storage unit calculates the BoF certainty factor between the each searched BoF and the BoF of the recognition target image and the certainty factor of feature amount by matching the coordinate of the feature point of each learning image corresponding to the searched BoF with the coordinate of the feature amount of the recognition target image calculates the first certainty factors by calculating the average between the BoF certainty factor and the certainty factor of feature amount the BoF certainty factor and when the maximum certainty factor which is the largest value among the calculated first certainty factors is higher than the determination threshold value recognizes the recognition target image as the learning image corresponding to the maximum certainty factor.

For this reason since the delivery device according to the embodiment performs the first recognition using the BoF and the coordinate of the feature point it is possible to recognize the recognition target image with high precision.

Furthermore in the delivery device according to the embodiment the second recognition unit extracts the local feature amount from the learning image corresponding to the first certainty factor higher than the re determination threshold value which is the value lower than the determination threshold value allows the feature amount similar to the extracted local feature amount to be associated with the learning image and the recognition target image and then matches the coordinates to calculate the second certainty factors and when the maximum certainty factor which is the largest value among the calculated second certainty factors is higher than the predetermined learning determination threshold value recognizes the recognition target image as the learning image corresponding to the maximum certainty factor.

For this reason since the delivery device according to the embodiment performs the second recognition using the feature amount it is possible to recognize the recognition target image with high precision.

Furthermore in the delivery device according to the embodiment when the second recognition unit succeeds in recognizing the recognition target image the registration unit registers the successfully recognized recognition target image and the BoF corresponding to the recognition target image in the learning image storage unit .

For this reason since the delivery device according to the embodiment registers the successfully recognized recognition target image hereinafter even in a case of receiving the image similar to the recognition target image having a coarse image quality it is possible to recognize such image at high speed.

Furthermore in the delivery device according to the embodiment when the second recognition unit succeeds in recognizing the recognition target image the registration unit registers the successfully recognized recognition target image in the learning image storage unit in association with meta information attached to the successfully recognized learning image.

For this reason the delivery device according to the embodiment can identify the recognition target delineated on the recognition target image on the basis of the meta information.

In each processing described in the above embodiment all or some of the automatic types of processing can be carried out manually or all or some of the manual types of processing can be carried out automatically by a known method. In addition to this the processing procedures specific names information including various types of data or parameters which are illustrated in the above description or drawings may be arbitrarily changed unless otherwise specified.

In addition each component of each device illustrated in the drawings is merely a functional concept and thus may be not required to be physically configured as illustrated in the drawings. That is specific types of dispersion or integration of each device are not limited to those illustrated in the drawings. Each device may be configured in a way that all or some are functionally or physically dispersed or integrated with an arbitrary basis according to various loads or usage status.

For example the learning image storage unit illustrated in may be held in a storage server without being held in the delivery device . In this case the delivery device acquires the information on the learning image by an access to the storage server.

In addition the delivery device may be a recognition device which performs only the recognition processing by the first recognition unit and the second recognition unit without performing the delivery processing of the commodity page. In this case the recognition device does not include at least the registration unit and the delivery unit . Then the registration device including the registration unit stores the recognition target image successfully recognized by the recognition unit in the learning image storage unit . In addition the delivery device including the delivery unit delivers the commodity page of the commodity which is recognized by the recognition unit to the terminal device or the like.

Further the delivery device according to the above embodiment is implemented by a computer which is configured as illustrated in for example. is a diagram of a hardware configuration illustrating an example of the computer which implements functions of the delivery device . The computer D is provided with a CPU a RAM a Read Only Memory ROM a Hard Disk Drive HDD a communication interface I F an input output interface I F and a media interface I F .

The CPU operates on the basis of a program stored in the ROM or the HDD to control each unit. The ROM stores a boot program which is executed by the CPU at the time of activation of the computer or a program which is dependent on the hardware of the computer .

The HDD stores programs executed by the CPU and data used by these programs. The communication interface receives data from other devices through a communication line N to send the received data to the CPU and transmits the data generated by the CPU to other devices through the communication line N.

The CPU controls an output device such as a display or a printer and an input device such as a keyboard or a mouse through the input output interface . The CPU acquires data from the input device through the input output interface . In addition the CPU outputs the generated data to the output device through the input output interface .

The media interface reads out a program or data stored in a recording medium and provides the read program or data to the CPU through the RAM . The CPU loads the program into the RAM from the recording medium through the media interface and executes the loaded program. The recording medium is for example an optical recording medium such as a Digital Versatile Disc DVD or a Phase change rewritable Disk PD a magneto optical recording medium such as a Magneto Optical disk MO a tape medium a magnetic recording medium or semiconductor memory.

In a case where the computer functions as the delivery device in the embodiment the CPU of the computer implements each function of the receiving unit the first recognition unit the second recognition unit the registration unit and the delivery unit by executing the program loaded into the RAM . In addition data within the learning image storage unit is stored in the HDD .

The CPU of the computer reads out these programs from the recording medium and executes the read programs but as another example may acquire these programs from other devices through the communication line N.

In addition the configuration of the above described delivery device can be flexibly changed such that the delivery device may be implemented by a plurality of server computers and by calling out an external platform using an Application Programming Interface API or a network computing depending on the function.

In addition the section module or unit described in claims can be read into a means or a circuit . For example the receiving unit can be read into a receiving means or a receiving circuit.

According to one aspect of embodiments an effect capable of performing high precision image recognition at high speed is achieved.

Although the invention has been described with respect to specific embodiments for a complete and clear disclosure the appended claims are not to be thus limited but are to be construed as embodying all modifications and alternative constructions that may occur to one skilled in the art that fairly fall within the basic teaching herein set forth.

