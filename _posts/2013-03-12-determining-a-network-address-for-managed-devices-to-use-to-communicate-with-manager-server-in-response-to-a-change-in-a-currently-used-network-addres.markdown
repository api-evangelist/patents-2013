---

title: Determining a network address for managed devices to use to communicate with manager server in response to a change in a currently used network address
abstract: A plurality of network addresses identify a source device in the network. A plurality of subscriptions for the source device to receive messages from the target devices each identify one of the target devices and one of the source network addresses the identified target device uses to communicate with the source device. Upon detecting a change to a changed network address, a determination is made of a subscription indicating the changed network address and the target device indicated in the determined subscription is determined. A selection is made of a selected network address, other than the changed network address is selected. If the selected network address can be used to communicate between the determined target device and the source device, then the selected network address is used and provided to the determined target device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08769062&OS=08769062&RS=08769062
owner: International Business Machines Corporation
number: 08769062
owner_city: Armonk
owner_country: US
publication_date: 20130312
---
This application is a continuation of U.S. patent application Ser. No. 13 456 167 filed Apr. 25 2012 which patent application is incorporated herein by reference in its entirety.

The present invention relates to a computer program product system and method for determining a network address for managed devices to use to communicate with a management server in response to a change in a currently used network address.

A management server may manage multiple connected managed devices over one or more networks. The management server establishes network connections with the managed devices so that the managed devices can transmit event notifications to the management server so that the server may perform typical management operations such as configuring the managed devices in the networks providing updates handling failover and failback procedures etc.

The management server maintains separate subscriptions and protocols on multiple networks to receive notifications from the managed devices. Subscriptions provide information on connections with the managed devices and on the communication protocols used to communicate with the managed devices such as Storage Management Initiative Specification SMI S Common Information Model CIM proxy providers native Application Programming Interface API providers Tivoli Storage Productivity Center TPC Storage Resource Groups and direct event subscription on devices.

There is a need in the art for improved techniques for maintaining network addresses used by the managed devices to initiate a connection to communicate with the management server such as for sending alerts and notifications.

Provided are a computer program product system and method for determining a network address for managed devices to use to communicate with a management server in response to a change in a currently used network address. A plurality of network addresses identify a source device in the network. A plurality of subscriptions for the source device to receive messages from the target devices each identify one of the target devices and one of the source network addresses the identified target device uses to communicate with the source device. Upon detecting a change to a changed network address a determination is made of a subscription indicating the changed network address for communication with one of the target device. The target device indicated in the determined subscription is determined and a selected network address comprising one of the network addresses other than the changed network address is selected. A determination is made as to whether the selected network address can be used to establish a connection that enables communication between the determined target device and the source device. In response to determining that the selected network address can be used to establish the connection indication is made to use the selected network address for communication with the determined target device and the selected network address is provided to the determined target device indicated in the determined subscription for the determined target device to use to send messages to the source device.

Described embodiments provide techniques to determine a source network address for a source device to use to connect to one or more target devices over a network in the event that one of the source network addresses being used for communication with target devices has changed such as is no longer available. Described embodiments consider the available source network addresses and target network configuration settings to select a source network address that a given target device uses to communicate to the source device.

The server includes a management server process to provide management of heterogeneous or similar device types. The managed devices may comprise device types such as storage switch printer database copy services backup services and other computational services and managed elements. Each device includes a provider comprising a device specific handler that serves as a plug in used by a management server process to interface with the device . . . being managed. In certain embodiments the provider is a proxy provider comprising a program installed on another server instead of being embedded in the device. Further the provider may be located outside of the device and may be installed on another server in the network.

The server includes the management server process to manage the devices using one or more management and communication protocols such as the Common Information Model CIM Storage Management Initiative Specification SMI S Secure Shell Protocol SSH etc. The management server process spawns event listeners to listen for events and notifications from the devices that are being managed. There may be one event listener for each subscription to monitor for messages and notifications to a source network address from the device using that source network address to communicate with the server . The management server process maintains subscriptions providing information on each connection such as the source and destination addresses to one of the managed devices and the target network configuration settings for the subscription. The target network configuration settings for a managed device provide information on the one or more destination network addresses and communication protocols used to communicate with the managed device . Source network address information provides information on each source network address that may be used to reach the server through one of the adaptors . The management server process further maintains connectivity test procedures for the different communication protocols that provide communication protocol specific operations to test the ability of the managed device to communicate with the server using the specified communication protocol. Each connectivity test procedure provides protocol specific methods and operations to invoke methods on the communication protocol provider to test a connection using a specified source network address and communication protocol.

The networks may comprise a same type of network e.g. Local Area Network LAN Storage Area Network SAN use a different network protocol such as Internet Protocol version 4 IPv4 Internet Protocol version 6 IPv6 or may comprise different types of networks that use different network protocols to communicate.

For a determined target device TD a source network address is selected at block comprising one of the source network addresses other than the changed network address that has not yet been considered for the target device TD . The selected source network address may comprise a new address an unchanged previously existing address or a newly changed address. If a network address is added to the server as part of the detected change to the source network addresses then in one embodiment the first source network address to consider may comprise the new source network address added to the server by adding or changing the configuration of an adaptor . The management server process further selects at block one of the target network configuration settings for the target device not yet considered. The first selected protocol to try may comprise the communication protocol used for the subscription being updated. The management server process determines at block whether the selected source network address and the target network address and communication protocol from the selected network configuration settings can be used to establish communication between the source device to the target device using the target network address of the target network configuration settings . This may involve testing both the connectivity from the server to the device and from the device to the server . If at block communication was established then the management server process invalidates the determined subscription and any event listeners for the target device . The management server process creates at block a subscription indicating to use the selected source network address target network address and communication protocol. Further the selected source network address is passed to the device to use to communicate with the server . The management server process further generates at block an event listener to listen for and handle messages form the determined target device on the selected source network address. From block control proceeds at block back to block to consider the next determined target device in a subscription whose source network address has changed.

If at block the management server process cannot establish communication with the determined target device TD then the management server process determines at block whether there are network configuration settings for the target device TDi that have not yet been considered. If there are yet unconsidered target network configuration settings for the target device TD then control proceeds back to block to select another network configuration setting for the target device TD . If there are no further target network configuration settings to consider for the target device TD then the management server process determines whether there are source network addresses that have not yet been considered for connection with the target device TD . If at block there are yet unconsidered source network addresses to consider to connect to the target device TD then control proceeds back to block to select another source network address to consider for connection to the target device TD .

If at block there are no further source network addresses to consider for connecting to the target device TD then control proceeds to block in where the management server process determines target network configuration settings previously used to communicate with the determined target device TD before detecting the change. The management server process then selects at block best matching target network configuration settings . In one embodiment the best matching target network configuration settings may be determined by comparing a subnet of one of the available network addresses with subnets of the target network addresses indicated in the instances of the target network configuration settings for the determined target device TDi . If a new source network address has been added to the server then the operation at block may be performed by comparing the subnet of the new source network address to the subnets of the target network addresses. The management server process determines at block one of the target network addresses of the determined target device TD having a subnet matching the subnet of the considered source network address. Devices on the same subnet will have a greater likelihood of successfully communicating. The current determined subscription is invalidated at block and a new subscription is created at block indicating to use the selected source network address and the determined target network address and communication protocol indicated in the target network configuration settings for the determined target network address. Alternatively the management server process may update the subscription having the outdated source network address instead of deleting the old subscription . The selected source network address is provided at block to the target device TDi to use. Control then proceeds back to block in to select a next target device TDi to consider.

If at block the server can communicate with the target device TD then the management server process determines at block the communication protocol for the selected target network configuration settings . The management server process then determines at block the connectivity test procedure provided for the determined communication protocol supported by the target device TD . The management server process executes at block the determined connectivity test procedure to cause the target device TD to invoke a connectivity test method to communicate a message such as a test message to the selected source network address. The operations of the connectivity test procedure are communication protocol specific. For instance for SSH managed devices the connectivity test procedure may invoke a method on the target device TDi to ping and port test the new source network address. For CIM managed devices the connectivity test procedure may cause the target device TDi CIM provider to invoke a connectivity test method implemented in the CIM protocol. illustrates a further embodiment of a connectivity test procedure for protocols that do not provide a certain connectivity test method for the devices to implement.

After executing the determined connectivity test procedure if at block the test message is received from the target device TD using the selected network address then control proceeds at block to block in to create a subscription for the selected network address and target network configuration settings . Otherwise if the test failed then control proceeds to block to consider if there are any further target network configuration settings or source network addresses to consider for connection with the target device TD .

Described embodiments provide techniques to automatically determine a new source network address and target network configuration settings to use to connect from the managed devices to the management server if a currently used source network address has changed or become unavailable or invalid. For instance if there is a failure in the network used by the source network address then that source network address is no longer available and needs to be replaced with a new source network address created by adding another network adaptor or by using any available source network address. With described embodiments the subscription information for managed devices is automatically updated so that the managed devices can continue sending messages and notifications to the management server process .

The computer is operational with numerous other general purpose or special purpose computing system environments or configurations. Examples of well known computing systems environments and or configurations that may be suitable for use with computer system server include but are not limited to personal computer systems server computer systems thin sources thick sources handheld or laptop devices multiprocessor systems microprocessor based systems set top boxes programmable consumer electronics network PCs minicomputer systems mainframe computer systems and distributed cloud computing environments that include any of the above systems or devices and the like.

Computer may be described in the general context of computer system executable instructions such as program modules being executed by a computer system. Generally program modules may include routines programs objects components logic data structures and so on that perform particular tasks or implement particular abstract data types. Computer system may be practiced in cloud computing environments where tasks are performed by remote processing devices that are linked through a communications network. In a distributed cloud computing environment program modules may be located in both local and remote computer system storage media including memory storage devices.

As shown in computer is shown in the form of a general purpose computing device. The components of computer may include but are not limited to one or more processors or processing units a system memory and a bus that couples various system components including system memory to processor .

Bus represents one or more of any of several types of bus structures including a memory bus or memory controller a peripheral bus an accelerated graphics port and a processor or local bus using any of a variety of bus architectures. By way of example and not limitation such architectures include Industry Standard Architecture ISA bus Micro Channel Architecture MCA bus Enhanced ISA EISA bus Video Electronics Standards Association VESA local bus and Peripheral Component Interconnects PCI bus.

Computer typically includes a variety of computer system readable media. Such media may be any available media that is accessible by computer system server and it includes both volatile and non volatile media removable and non removable media.

System memory can include computer system readable media in the form of volatile memory such as random access memory RAM and or cache memory . Computer system server may further include other removable non removable volatile non volatile computer system storage media. By way of example only storage system can be provided for reading from and writing to a non removable non volatile magnetic media not shown and typically called a hard drive . Although not shown a magnetic disk drive for reading from and writing to a removable non volatile magnetic disk e.g. a floppy disk and an optical disk drive for reading from or writing to a removable non volatile optical disk such as a CD ROM DVD ROM or other optical media can be provided. In such instances each can be connected to bus by one or more data media interfaces. As will be further depicted and described below memory may include at least one program product having a set e.g. at least one of program modules that are configured to carry out the functions of embodiments of the invention.

Program utility having a set at least one of program modules may be stored in memory by way of example and not limitation as well as an operating system one or more application programs other program modules and program data. Each of the operating system one or more application programs other program modules and program data or some combination thereof may include an implementation of a networking environment. Program modules generally carry out the functions and or methodologies of embodiments of the invention as described herein.

Computer may also communicate with one or more external devices such as a keyboard a pointing device a display etc. one or more devices that enable a user to interact with computer system server and or any devices e.g. network card modem etc. that enable computer system server to communicate with one or more other computing devices. Such communication can occur via Input Output I O interfaces . Still yet computer system server can communicate with one or more networks such as a local area network LAN a general wide area network WAN and or a public network e.g. the Internet via network adapter . As depicted network adapter communicates with the other components of computer system server via bus . It should be understood that although not shown other hardware and or software components could be used in conjunction with computer system server . Examples include but are not limited to microcode device drivers redundant processing units external disk drive arrays RAID systems tape drives and data archival storage systems etc.

The described operations may be implemented as a method apparatus or computer program product using standard programming and or engineering techniques to produce software firmware hardware or any combination thereof. Accordingly aspects of the embodiments may take the form of an entirely hardware embodiment an entirely software embodiment including firmware resident software micro code etc. or an embodiment combining software and hardware aspects that may all generally be referred to herein as a circuit module or system. Furthermore aspects of the embodiments may take the form of a computer program product embodied in one or more computer readable medium s having computer readable program code embodied thereon.

Any combination of one or more computer readable medium s may be utilized. The computer readable medium may be a computer readable signal medium or a computer readable storage medium. A computer readable storage medium may be for example but not limited to an electronic magnetic optical electromagnetic infrared or semiconductor system apparatus or device or any suitable combination of the foregoing. More specific examples a non exhaustive list of the computer readable storage medium would include the following an electrical connection having one or more wires a portable computer diskette a hard disk a random access memory RAM a read only memory ROM an erasable programmable read only memory EPROM or Flash memory an optical fiber a portable compact disc read only memory CD ROM an optical storage device a magnetic storage device or any suitable combination of the foregoing. In the context of this document a computer readable storage medium may be any tangible medium that can contain or store a program for use by or in connection with an instruction execution system apparatus or device.

A computer readable signal medium may include a propagated data signal with computer readable program code embodied therein for example in baseband or as part of a carrier wave. Such a propagated signal may take any of a variety of forms including but not limited to electro magnetic optical or any suitable combination thereof. A computer readable signal medium may be any computer readable medium that is not a computer readable storage medium and that can communicate propagate or transport a program for use by or in connection with an instruction execution system apparatus or device.

Program code embodied on a computer readable medium may be transmitted using any appropriate medium including but not limited to wireless wireline optical fiber cable RF etc. or any suitable combination of the foregoing.

Computer program code for carrying out operations for aspects of the present invention may be written in any combination of one or more programming languages including an object oriented programming language such as Java Smalltalk C or the like and conventional procedural programming languages such as the C programming language or similar programming languages. The program code may execute entirely on the user s computer partly on the user s computer as a stand alone software package partly on the user s computer and partly on a remote computer or entirely on the remote computer or server. In the latter scenario the remote computer may be connected to the user s computer through any type of network including a local area network LAN or a wide area network WAN or the connection may be made to an external computer for example through the Internet using an Internet Service Provider .

Aspects of the present invention are described above with reference to flowchart illustrations and or block diagrams of methods apparatus systems and computer program products according to embodiments of the invention. It will be understood that each block of the flowchart illustrations and or block diagrams and combinations of blocks in the flowchart illustrations and or block diagrams can be implemented by computer program instructions. These computer program instructions may be provided to a processor of a general purpose computer special purpose computer or other programmable data processing apparatus to produce a machine such that the instructions which execute via the processor of the computer or other programmable data processing apparatus create means for implementing the functions acts specified in the flowchart and or block diagram block or blocks.

These computer program instructions may also be stored in a computer readable medium that can direct a computer other programmable data processing apparatus or other devices to function in a particular manner such that the instructions stored in the computer readable medium produce an article of manufacture including instructions which implement the function act specified in the flowchart and or block diagram block or blocks.

The computer program instructions may also be loaded onto a computer other programmable data processing apparatus or other devices to cause a series of operational steps to be performed on the computer other programmable apparatus or other devices to produce a computer implemented process such that the instructions which execute on the computer or other programmable apparatus provide processes for implementing the functions acts specified in the flowchart and or block diagram block or blocks.

The terms an embodiment embodiment embodiments the embodiment the embodiments one or more embodiments some embodiments and one embodiment mean one or more but not all embodiments of the present invention s unless expressly specified otherwise.

The terms including comprising having and variations thereof mean including but not limited to unless expressly specified otherwise.

The enumerated listing of items does not imply that any or all of the items are mutually exclusive unless expressly specified otherwise.

Devices that are in communication with each other need not be in continuous communication with each other unless expressly specified otherwise. In addition devices that are in communication with each other may communicate directly or indirectly through one or more intermediaries.

A description of an embodiment with several components in communication with each other does not imply that all such components are required. On the contrary a variety of optional components are described to illustrate the wide variety of possible embodiments of the present invention.

Further although process steps method steps algorithms or the like may be described in a sequential order such processes methods and algorithms may be configured to work in alternate orders. In other words any sequence or order of steps that may be described does not necessarily indicate a requirement that the steps be performed in that order. The steps of processes described herein may be performed in any order practical. Further some steps may be performed simultaneously.

When a single device or article is described herein it will be readily apparent that more than one device article whether or not they cooperate may be used in place of a single device article. Similarly where more than one device or article is described herein whether or not they cooperate it will be readily apparent that a single device article may be used in place of the more than one device or article or a different number of devices articles may be used instead of the shown number of devices or programs. The functionality and or the features of a device may be alternatively embodied by one or more other devices which are not explicitly described as having such functionality features. Thus other embodiments of the present invention need not include the device itself.

The illustrated operations of the figures show certain events occurring in a certain order. In alternative embodiments certain operations may be performed in a different order modified or removed. Moreover steps may be added to the above described logic and still conform to the described embodiments. Further operations described herein may occur sequentially or certain operations may be processed in parallel. Yet further operations may be performed by a single processing unit or by distributed processing units.

The foregoing description of various embodiments of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description but rather by the claims appended hereto. The above specification examples and data provide a complete description of the manufacture and use of the composition of the invention. Since many embodiments of the invention can be made without departing from the spirit and scope of the invention the invention resides in the claims herein after appended.

