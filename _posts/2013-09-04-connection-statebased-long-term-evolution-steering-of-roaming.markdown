---

title: Connection state-based long term evolution steering of roaming
abstract: A method, a device, and a non-transitory storage medium comprising instructions that provide steering of roaming services based on connection state data pertaining to Diameter connections between visited networks and an internetwork. The steering of roaming services include accepting or denying a request of a roaming user seeking to attach to a visited network and managing and deploying preferred visited network lists to user devices.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09191803&OS=09191803&RS=09191803
owner: Cellco Partnership
number: 09191803
owner_city: Basking Ridge
owner_country: US
publication_date: 20130904
---
Roaming allows mobile wireless users to receive services when users are outside of a service area covered by the users home network provider. Mobile wireless service providers enter into roaming agreements with each other so that their users are able to roam and receive seamless service regardless of their users location.

The following detailed description refers to the accompanying drawings. The same reference numbers in different drawings may identify the same or similar elements. Also the following detailed description does not limit the invention.

Steering of roaming refers to a process by which a roaming user of a home network is steered to a visited network to provide service for the roaming user. Long Term Evolution LTE roaming is at a very early stage in the wireless industry.

As described herein reference is made to an exemplary embodiment embodiments etc. which may include a particular feature structure or characteristic in connection with an embodiment s . However the use of the phrase or the term an embodiment embodiments etc. in various places herein does not necessarily refer to all embodiments described nor does it necessarily refer to the same embodiment nor are separate or alternative embodiments necessarily mutually exclusive of other embodiment s . The same applies to the term implementation implementations etc.

According to an exemplary embodiment a device a method and a non transitory storage medium storing instruction thereon determines to which visited network a roaming user attaches based on connection state data. According to an exemplary embodiment the connection state data pertains to Diameter connections between an Internetwork and visited networks. According to an exemplary embodiment a steering of roaming decision is based on business rules and steering data which includes the connection state data. According to an exemplary embodiment the steering of roaming decision includes determining whether to update a preferred visited network list. According to an exemplary embodiment a preferred visited network list is transmitted to a user device in response to various events as described herein. User devices store and use preferred visited network lists when selecting a visited network to which to attach.

Environment may include wireless links or wireless and wired links among the devices and networks illustrated. A link may be direct or indirect and may involve intermediary device s and or intermediary network s not illustrated in . The links illustrated in environment are exemplary.

Each of visited networks includes a wireless network. For example visited network may be implemented to include a Long Term Evolution LTE network i.e. a 4G wireless infrastructure an LTE Advanced network or future generation wireless network architecture. Each of network devices provides signaling to support the establishment and maintenance of connections with roaming users. For example each of network devices may be implemented to include a Diameter Edge Agent DEA or similarly functioning network element e.g. a proprietary network element etc. . Although not illustrated in each of visited networks includes other network elements e.g. logic to provide among other services a wireless connection service such as a base station e.g. an evolved Node B eNB etc. a serving gateway SGW etc. a billing service such as a Policy Charging and Rules Function PCRF etc.

Internetwork includes a network that provides an interconnection service between visited networks and home network . For example internetwork may be implemented as an Internetwork Packet Exchange IPX Sequenced Packet Exchange SPX network an Internet Protocol IP exchange IPX network or other suitable network that may provide an interconnection service. Network device provides a signaling service. For example network device may be implemented to include a Diameter Agent e.g. a Diameter Relay Agent DRA a Diameter Proxy Agent DPA etc. . The Diameter Agent includes a stateful agent. For example the Diameter Agent may maintain session state data pertaining to active sessions. Additionally for example the Diameter Agent monitors a connection state pertaining to links between visited networks and internetwork . For example the Diameter Agent may use keep alive messages and time out mechanisms to identify when a connection is up or down. The connections via the links between visited networks and internetwork may be persistent connections.

According to an exemplary embodiment the Diameter Agent includes a notification service pertaining to the connection state of links between visited networks and internetwork . The notification service may be an add on application to the specifications of the Diameter protocol. The notification service may be configured with a dictionary interface or module e.g. generated based on a dictionary file using a diametric utility that allows Diameter messages and attribute value pairs AVPs to be defined and input into a Diameter message. The service configuration of the notification service is also supported by a transport interface that provides for the transport e.g. over TCP etc. of the Diameter messaging.

According to an exemplary embodiment the Diameter Agent generates and transmits a Capabilities Exchange Request CER message to network device in response to detecting a change in connection state of a link e.g. link up to link down or link down to link up between visited network and internetwork . According to an exemplary embodiment the CER is generated when a failover procedure e.g. to route messages to an alternate Diameter agent has been unsuccessful. The CER message may include an AVP to identify the visited network whose link state has changed e.g. a mobile network code MNC a mobile country code MCC and an AVP e.g. a vendor specific AVP to indicate the state of the link e.g. up down . The CER message may also include other data pertaining to the connection failure state as described herein using appropriate AVPs etc. According to other embodiments the Diameter Agent may generate and transmit a different type of Diameter message. For example the Diameter Agent may generate and transmit an error message to network device having a result code AVP which indicates that Diameter is unable to deliver i.e. to visited network .

Although not illustrated in internetwork may include other network elements e.g. logic to provide among other services interconnection services such as border controllers media gateways session accounting services security services Internet Protocol IPv4 IPv6 interworking transcoding etc. According to an exemplary embodiment network device also includes a network element e.g. a connection manager that provides a communicative interface to network device as described further below. Alternatively according to an embodiment network device includes the connection manager.

Network device provides steering of roaming services. For example network device makes steering decision based on connection states between internetwork and visited networks . Network device uses other steering data such as business rules to make steering decisions pertaining to roaming users. Network device manages preferred visited network lists. Network device provides preferred visited network lists to roaming users via user devices . Network device includes a Diameter Agent. The Diameter Agent may generate and transmit a Capability Exchange Answer CEA to network device in response to receiving the CER from the Diameter Agent of network device .

Home network includes a wireless network. For example home network may be implemented to include an LTE network an LTE Advanced network or future generation wireless network architecture. Network device provides a signaling service. For example network device may be implemented to include a Diameter Agent e.g. a DRA a DPA etc. . Although not illustrated in home network may include other network elements to provide among other services a wireless connection service such as a base station a Packet Data Network gateway PGW etc. authentication authorization and accounting AAA services such as a home subscriber server HSS etc.

User device includes a mobile communication device. For example user device may be implemented as a wireless phone e.g. a radio phone a smartphone etc. a computer e.g. a tablet a netbook a laptop computer etc. a vehicular communication system etc. According to an exemplary embodiment user device stores a preferred visited network list. As described further below user device uses the preferred visited network list to select a visited network when roaming.

The number of devices and configuration in environment is exemplary and provided for simplicity. According to other embodiments environment may include additional devices fewer devices different devices and or differently arranged devices than those illustrated in . Additionally according to other embodiments environment may include additional networks fewer networks different networks and or differently arranged networks than those illustrated in . For example according to an embodiment environment includes multiple internetworks .

A device as described herein may be implemented according to a centralized computing architecture a distributed computing architecture or a cloud computing architecture. A device may be implemented according to one or multiple network architectures e.g. a client device a server device a peer device a proxy device or some combination thereof . According to other embodiments a single device may be implemented as multiple devices and or multiple devices may be implemented as a single device.

Also according to other embodiments one or more functions and or processes described as being performed by a particular device or a particular network element may be performed by a different device or some combination of devices which may or may not include the particular device.

While exemplary embodiments described may be implemented based on the use of a particular network architecture platform protocol etc. such implementations are not intended to be restrictive or provide an exhaustive treatment as such. In other words the embodiments described herein may be implemented using other suitable network architectures platforms protocol etc. which may not be specifically described.

Referring to network device receives the message and transmits the message to network device . As illustrated network device determines whether visited network is an acceptable network to which the roaming user can attach. For example network device applies business rules pertaining to steering of roaming to determine whether visited network is an acceptable network. Network device may use other steering data e.g. connection state data between internetwork and visited network to determine whether visited network is an acceptable network.

According to this scenario network device determines that visited network is acceptable and transmits a message to an authentication device e.g. a Home Subscriber Server HSS not illustrated of home network . The message indicates to the authentication device that visited network is an acceptable network to which the roaming user can attach. The authentication device receives and interprets the message. In response the authentication device performs authentication authorization etc. The authentication device transmits a message not illustrated to network device . For example the message may include subscription data pertaining to the roaming user. Network device generates and transmits a message to network device . For example the message includes among other data a command e.g. an update location answer ULA . Network device receives the message and transmits the message to network device . Network device receives the message and visited network completes the authentication procedure. As illustrated user device attaches to visited network .

According to an exemplary embodiment the connection manager of network device or network monitors the Diameter Agent. In response to identifying the presence of the connection state data the connection manager obtains the connection state data. The connection manager may also obtain other data from other network devices regarding the connection state failure. For example connection manager may obtain other data such as data indicating the reason for the connection failure etc. By way of example the connection failure may stem from a device failure in visited network a device failure in internetwork an intermediary node an intermediary link an upgrade maintenance etc. The connection manager generates a message that indicates that the connection has failed a date and time etc. The connection manager transmits the message to network device .

According to another exemplary embodiment in response to the connection failure the Diameter Agent of network device generates and transmits a CER message to network . For example the CER message includes an AVP that identifies visited network and an AVP that indicates that the link is in a down state.

Network device receives the message e.g. the CER message or the message from the connection manager . In response to receiving the message network device stores the connection state data. Additionally network device makes a steering decision in response to receiving the message. For example the steering decision may include whether to update a preferred visited network list which may be used by roaming users. Network device may make the steering decision based on a set of business rules pertaining to the management of preferred visited network lists. Additionally network device may make the steering decision based on other steering data. For example the steering data includes the connection state data and other types of data e.g. historical state data etc. as described further below.

Referring to according to this example based on the application of the business rules and the connection state data network device determines to update a preferred visited network list. For example assume that visited network is listed first i.e. the most preferred in a current preferred visited network list. In view of the failed connection network device may for example remove visited network from the preferred visited network list or change the order in which visited network appears in the preferred visited network list e.g. place visited network at the bottom of the preferred visited network list . Network device may store the updated preferred visited network list. Additionally for this example assume that a business rule indicates that a preferred visited network list for users roaming in a particular country or other geographic region will receive an over the air update of the preferred visited network list. In this way the steering of roaming service proactively enhances the experience of roaming users by providing roaming users with an update to avoid visited network since it is in a down state. By way of example user device may include a smart card e.g. a Subscriber Identity Module SIM card an integrated circuit card ICC a universal integrated circuit card UICC or a removable user identity module RUIM card or other storage medium that stores preferred visited network lists. User device may include a device management client or other suitable logic to manage and configure user device based on the preferred visited network lists.

Referring to based on this business rule network device transmits the updated preferred visited network list illustrated as UPDATE MSG to internetwork . The update message may also designate a geographic region in which the update message is to be distributed. According to this example internetwork transmits the update message to visited network N which in turn transmits the update message to user device . User device updates a stored preferred visited network list with the received preferred visited network list. Additionally or alternatively network device transmits the update message to appropriate users via home network . For example home network may include a server device not illustrated that manages over the air OTA updates. In response to receiving the update message the server device of home network would provide the updated preferred visited network list to appropriate users. In this way user devices may avoid unnecessary network scans e.g. with regard to visited network based on the updated preferred visited network list. As an example assume that user device attempted to attach to visited network during the connection failure. In response to an unsuccessful attachment user device eventually attaches to visited network N. User device receives the updated preferred visited network list and is informed not seek attachment to visited network until the connection is restored and user device is updated again to add back visited network to the preferred visited network list.

Environment may include wireless links or wireless and wired links among the devices and networks illustrated. A link may be direct or indirect and may involve intermediary device s and or intermediary network s not illustrated in . The links illustrated in environment are exemplary. Additionally as illustrated in devices network elements may include a particular interface e.g. S S to communicate with other devices network elements. For example the Sinterface enables the transfer of subscriber related data between MME and Diameter Agent etc.

Each of visited networks include LTE based network elements such as an enhanced Node B eNB a serving gateway SGW a packet data network PDN gateway PGW and a mobility management entity MME . Additionally each of visited networks may include a policy and charging rules function PCRF and a domain name system DNS . Also each of visited networks includes a Diameter Agent . Diameter Agent may be implemented as a Diameter Edge Agent DEA .

IPX network includes a Diameter Agent and a domain name system DNS 250. Diameter Agent may be implemented as a Diameter Relay Agent DRA a Diameter Proxy Agent DPA etc. Diameter Agent includes a stateful agent. For example Diameter Agent may maintain session state data pertaining to active sessions. Additionally Diameter Agent monitors a connection state pertaining to links between visited networks and IPX . For example Diameter Agent may use keep alive messages and time out mechanisms to identify when a connection is up or down. The connections via the links between visited networks and IPX network may be persistent connections. In this way as described herein a steering engine of steering platform may steer roaming users to a particular visited network based on the connection state s of links between IPX network and visited networks . According to an exemplary embodiment Diameter Agent includes the notification service as described herein.

Home network includes a Diameter Agent an HSS a DNS and a list server . Diameter Agent may be implemented as a DRA a DPA etc. HSS may be implemented as a home subscriber server. For example HSS may store user subscription data perform authentication and authorization etc. List server may manage updates of preferred visited network lists. For example a preferred visited network list may be updated on UE via a Short Messaging Service SMS via an over the air OTA update and or via other well known techniques.

Steering platform includes a Diameter Agent a steering engine a connection manager and a data storage . Connection manager includes an interface e.g. an application programming interface API etc. to Diameter Agent that allows connection manager to obtain connection state data and session state data. According to an exemplary implementation connection manager acts as a proxy between Diameter Agent and steering engine . Connection manager notifies steering engine of the state of the connections between IPX network and visited networks . For example a connection state change e.g. from up to down or from down to up causes connection manager to notify steering engine . According to other embodiments connection manager may reside in IPX network . Diameter Agent may be implemented as a Diameter Relay Agent DRA a Diameter Proxy Agent DPA etc.

Steering engine provides steering of roaming pertaining to roaming users. Steering engine makes steering decisions based on business rules and other steering data stored in data storage . Steering engine manages preferred network lists and updates preferred visited network lists. Steering engine is described further below.

Data storage stores various types of data that is used by steering engine . For example data storage may store business rules that pertain to the management of preferred visited network lists. Data storage may store historical state data pertaining to the connection state of links between IPX and visited networks . Data storage may also store network data. For example network data may indicate attributes of visited networks . Data storage may also store preferred visited network lists. Data storage is described further below. UE is a mobile device. For example UE may be implemented as user device .

The number of devices and configuration in environment is exemplary and provided for simplicity. According to other embodiments environment may include additional devices fewer devices different devices and or differently arranged devices than those illustrated in . For example environment may not include connection manager but use the notification service of Diameter Agent to communicate with steering platform . Additionally according to other embodiments environment may include additional networks fewer networks different networks and or differently arranged networks than those illustrated in . For example according to an embodiment environment includes multiple IPX networks . Additionally as previously described a device may be implemented according to various computing architectures and network architectures. Also a single device may be implemented as multiple devices and or multiple devices may be implemented as a single device. For example steering platform may be implemented as a single device or multiple devices.

Business rules include business policies or procedures pertaining to the steering of roaming users. For example business rules may include policies pertaining to steering when a connection between IPX and visited network is flapping e.g. going down coming up etc. policies pertaining to determining when a flapping condition has stopped policies pertaining to steering depending on the type of roaming user e.g. pre paid post paid customer employee etc. policies pertaining to when to update a preferred visited network list policies pertaining to which roaming users to provide an updated preferred visited network list policies pertaining to the generation of an updated preferred visited network list etc.

Historical data indicates the historical connection states between IPX and each of visited networks . For example historical data may indicate time periods e.g. date and time when a connection was up and time periods when a connection was down. Additionally historical data may indicate the number of times the connection went up and down. Historical data may indicate the reason for a failure e.g. maintenance link failure device failure software failure power outage upgrade etc. .

Historical data may also include a reliability parameter. For example the reliability parameter may have a value e.g. from one to ten or some other numerical range that indicates a degree of reliability of a connection based on the historical data for that connection. By way of further example a reliability parameter having a value of one indicates the lowest degree of reliability and a value of ten indicates the highest degree of reliability. Historical data includes data indicating the current state of a connection e.g. up or down .

Steering engine may store data as historical data that indicates that a connection is in a flapping state e.g. fluctuating between an up and a down state based on the duration of each up and down state as well as the number of times e.g. a counter this occurs within a particular period of time. For example steering engine may apply thresholds pertaining to time periods and frequency. Historical data may also include a stable state parameter that steering engine may use before steering roaming users to a previously identified flapping of a connection. For example the previously identified flapping state of a connection should remain in a stable state i.e. an up state for a certain time period before steering engine steers roaming users to that connection.

Network data indicates characteristics of a visited network . For example network data may indicate the type of network the size of the network e.g. geographic reach the services provided performance metrics etc. Network data may also indicate other types of data such as maintenance schedules upgrade schedules average response time to correct failures etc.

Preferred visited network lists include lists that indicate a preferred order of visited networks from which UEs of roaming users can select. According to an exemplary implementation preferred visited network lists may include different versions of a preferred visited network list that are correlated. For example there may be an original version of a preferred visited network list and a modified version of a preferred visited network list. The steering data of preferred visited network lists is described further below in relation to and .

User preferences data indicate preferences of users when roaming. For example users may indicate that steering be based on monetary cost performance metrics e.g. data speeds for upload download etc. network services applications e.g. security location service application servers etc. type of coverage and or other types of criteria.

Although illustrates particular types of steering data stored by data storage according to other embodiments data storage may include additional types of data fewer types of data and or different types of data than the types of data illustrated and described. For example data storage may store data pertaining to roaming agreements between a home network service provider and a visited network service provider. For example a roaming agreement may specify that an operator commit to steer an agreed volume of roaming traffic to a preferred partner and the preferred partner may give a discount on roaming prices. Data storage may store near real time roaming data that indicates usage data of a preferred visited network. For example IPX may include a roaming intelligence service that generates roaming reports. Steering engine may use this additional data to manage steering and preferred visited network lists.

As further illustrated connection manager monitors Diameter Agent . For example connection manager may have an inter process communication with Diameter Agent that allows connection manager to detect when a failure occurs. Connection manager may also detect when a failover procedure is unsuccessful. In response thereto Connection manager may obtain data stored by Diameter Agent relating to the failure event. Connection manager may also obtain data from other devices or network elements in IPX that pertains to the failure event. For example IPX may include a roaming intelligence service that monitors and generates alert notices when failure events occur. Connection manager generates a message based on the data that is obtained. Connection manager may transmit the message to steering engine via various protocols e.g. Simple Object Access Protocol SOAP Extensible Markup Language XML over Hypertext Transfer Protocol HTTP an HTTP post get etc. .

Referring to steering engine receives the message from connection manager . Steering engine calculates a steering response in response to receiving the message. For example steering engine may extract data from the message and store data as historical data . Steering engine may also update other steering data e.g. a reliability parameter etc. . Steering engine may apply for example business rules historical data and network data to determine whether a preferred visited network list should be updated or whether no update is necessary.

In the event that steering engine determines to update a preferred visited network list steering engine may use business rules historical data network data preferred visited network lists and or user preferences data to generate an updated preferred visited network list. Steering engine may use other data such as the location of roaming users when available. For example a location service in visited network and or data from home network may be obtained by steering engine . In this way steering engine may use user preferences data when generating the updated preferred visited network list.

Steering engine may select one or multiple preferred visited network lists from preferred visited network lists to modify when generating the updated preferred visited network list. The selection of the preferred visited network list may include a criterion that the visited network with which the failure event is associated is included in the preferred visited network list. Additionally or alternatively the selection of the preferred visited network list may include a criterion that the preferred visited network list pertains to a geographic region which may not necessarily include the visited network with which the failure event is associated but is in a proximity thereto e.g. within X miles etc. .

Steering engine modifies the selected preferred visited network list in some manner such as removing a visited network from the list e.g. visited network associated with the failure event adding a new visited network to the list and or rearranging the order of the preferred visited networks .

Steering engine stores the updated preferred visited network list in preferred visited network lists . Additionally the updated preferred visited network list may have a correlation or a link to the previous list e.g. the selected preferred visited network list which is described further below in relation to . Steering engine may provide the previous list as an update to roaming users subsequent to a recovery of the failure event.

As illustrated in steering engine generates an update message. For example the update message includes the updated preferred visited network list. The update message may be a broadcast multicast or unicast message. Steering engine transmits the update message illustrated as UPDATE MSG to IPX network e.g. an IPX Router Manager . The update message is received by IPX network and transmitted to UEs through Y via visited network . Additionally or alternatively steering engine transmits the update message to list server of home network . In response to receiving the update message list server would provide the updated preferred list to appropriate users. For example if a link down state is detected for a visited network e.g. in Germany the update message which includes the updated visited network list may be sent to active roamers attached to other networks in Germany and or to neighboring countries e.g. in the Netherlands Belgium France etc. so that those roaming users in these geographical areas would not attempt to register on visited network whose link outage has been detected. Additionally the update message may include other parameters such as for example time period for update e.g. 2 hours etc. global update e.g. all active roaming users etc. selective update e.g. based on geographic area etc. and or designation of a level of service e.g. target only certain roaming users having at least a certain level of service etc. . In this way the update message may be sent to roaming users that are not currently attached to a network only to active roaming users etc. depending on parameter settings.

Referring to assume that the failure is remedied and Diameter Agent re establishes a connection status and generates a notification. In a manner similar to that previously described connection manager monitors Diameter Agent and generates a message which is transmitted to steering engine . Referring back to steering engine receives the message from connection manager and calculates a steering response. According to an exemplary embodiment steering engine stores a log of messages transmitted to and received from connection manager . In this way steering engine may identify a sequence of events e.g. failures recoveries updates lists etc. pertaining to the management of steering.

According to an exemplary scenario assume that the failure lasted one day. That is the failure and subsequent recovery of the connection did not constitute flapping of the connection. Also assume that steering engine had no other failures recoveries updates etc. to manage during the one day outage. Based on these circumstances steering engine determines that a preferred visited network list should be provided to roaming users. However in this case steering engine may simply select the previous list from preferred visited network lists instead of generating an updated preferred list. For example steering engine may identify the existence of the link or the correlation of the previous list with the previously transmitted updated preferred list. In this way steering engine may update UEs of roaming users with a preferred list with minimal latency. Additionally since the sequence of a failure event followed by a recovery event with respect to a particular connection is likely to be the natural order of events steering engine may also minimize the use of resources e.g. processing etc. by relying on previously generated preferred visited network lists.

In response to the detection and or logging of the failure event the notification service of Diameter Agent generates a message. For example the message may be implemented as a CER message as previously described. For example the CER message may include an AVP that identifies visited network associated with the link failure e.g. an MCC an MNC etc. and an AVP e.g. a vendor specific AVP that indicates the state of the link e.g. down . The notification service may also include an interface to obtain other failure data pertaining to the failure event. For example a device or a service in IPX network may obtain additional failure data e.g. reason for link failure such as a device failure physical break in link power outage estimated time of repair etc. that may be provided to the notification service and packaged in the CER using AVPs etc. Alternatively steering engine may obtain the additional failure data e.g. from the device or the service in IPX network etc. . As illustrated in Diameter Agent transmits the message e.g. the CER message to steering engine or to steering engine via Diameter Agent .

As specified in the Diameter standard the purpose of the capabilities negotiation e.g. using CER and CEA messaging is to exchange identities and capabilities between Diameter nodes. However since the CER message is used to carry the failure data according to an exemplary embodiment steering platform may not respond with a CEA message. That is once steering platform obtains the CER message there may be no need to maintain a communicative link with Diameter Agent . For example Diameter Agent of steering platform may not generate and transmit a CEA message which in turn may cause a disconnection. In this way the transport layer connection may be purposely disconnected. Alternatively Diameter Agent or steering engine may generate and transmit a CEA message that causes the transport layer connection to be disconnected e.g. using certain result code AVPs such as diameter no common application no common security etc. . In this way the transport layer connection may be short lived. Diameter Agent may include an add on application to provide this functionality.

In response to obtaining the failure data via the notification service of Diameter Agent steering engine calculates a steering response in a manner previously described in and elsewhere in this description. A similar process may be executed by the notification service of Diameter Agent when the failure is remedied. According to this example it may be assumed that a transport layer connection does not exist. Diameter Agent re establishes a connection and generates a notification. For example Diameter Agent generates a CER message that identifies the visited network and indicates that the connection is in an up state. Diameter Agent transmits the CER message to steering platform e.g. Diameter Agent etc. .

Referring back to the previous scenario in which the connection recovered according to other circumstances steering engine may determine not to provide a preferred visited network list to roaming users or may determine to generate an updated preferred visited network list. By way of example according to an exemplary scenario the connection may be flapping e.g. going up and going down repetitively within short time frames . Under such circumstances despite the fact that the connection recovered steering engine may determine not to provide a preferred visited network list to roaming users. The steering response may then constitute merely storing the data included in the update message to historical data or storing the data and updating the steering data e.g. the reliability parameter network data etc. . According to another scenario upon receiving the message indicating that the connection recovered steering engine may determine to generate an updated preferred visited network list. For example when storing the data included in the update message to historical data steering engine may determine that the reliability parameter needs to be updated. Steering engine recalculates a value for the reliability parameter. Thereafter steering engine determines that an updated preferred visited network list should be generated. Additionally or alternatively other data stored in data storage may have been updated during the outage e.g. user preferences data network data and business rules which may provide a basis to generate an updated preferred visited network list.

Referring back to in response to receiving the ULR message steering engine calculates a steering response. For example steering engine may extract data e.g. the IMSI from the URL message and determines whether the roaming user of UE should attach to visited network . Steering engine may use the steering data stored in data storage to make a determination. For example as previously described in relation to preferred lists stored in preferred visited network lists may be associated with metadata e.g. connection state IMSIs etc . The user identifiers IMSIs user device identifiers etc. may be categorized such as very important person VIP type roaming users and default type roaming users. The default type roaming users may be mapped to different preferred visited network lists in a given geographic area e.g. a country etc. than VIP type roaming users. Depending on the visited network to which the roaming user wishes to attach vis vis the metadata and preferred visited network list steering engine may determine whether to accept or deny the attachment. For example if visited network is not included in a particular preferred list or another visited network is ranked higher then steering engine may deny attachment. Alternatively if visited network is included in a particular preferred list or is ranked highest in the preferred list steering engine may accept the attachment.

Steering engine may also use historical data to determine whether to accept or deny attachment. By way of example although the connection between Diameter Agent and Diameter Agent may be up since the ULR reached steering engine historical data may indicate that the connection is in a flapping state. Thus under such circumstances steering engine may deny the request to attach or wait a back off period before accepting the request to attach.

Referring to steering engine does not validate the attachment of the roaming user to visited network . For example steering engine may not validate the attachment based on user preferences data historical data e.g. the reliability parameter and the metadata of preferred visited network lists . In this case steering engine generates a ULA which indicates that the roaming user is not authorized to attach to visited network . In contrast to steering engine does not transmit the ULA to HSS . Rather steering engine transmits the ULA to Diameter Agent . As illustrated in the ULA propagates to MME of visited network . Thereafter UE may attempt to connect to another visited network . Steering platform may transmit an updated preferred visited network list to UE when UE attaches to another visited network not illustrated .

Processor includes one or multiple processors microprocessors data processors co processors multi core processors application specific integrated circuits ASICs controllers programmable logic devices chipsets field programmable gate arrays FPGAs system on chips SoCs programmable logic devices PLSs microcontrollers application specific instruction set processors ASIPs central processing units CPUs or some other component that interprets and or executes instructions and or data. Processor may be implemented as hardware e.g. a microprocessor etc. or a combination of hardware and software e.g. a SoC an ASIC etc. . Processor may include one or multiple memories e.g. memory storage etc.

Processor may control the overall operation or a portion of operation s performed by device . Processor may perform one or multiple operations based on an operating system and or various applications or programs e.g. software . Processor may access instructions from memory storage from other components of device and or from a source external to device e.g. another device a network etc. .

Memory storage includes one or multiple memories and or one or multiple other types of storage mediums. For example memory storage may include one or multiple types of memories such as random access memory RAM dynamic random access memory DRAM cache read only memory ROM a programmable read only memory PROM a static random access memory SRAM a single in line memory module SIMM a dual in line memory module DIMM a flash memory and or some other type of memory. Memory storage may include a hard disk e.g. a magnetic disk an optical disk a magneto optic disk a solid state disk etc. and a corresponding drive. Memory storage may include a hard disk e.g. a magnetic disk an optical disk a magneto optic disk a solid state disk etc. a Micro Electromechanical System MEMS based storage medium and or a nanotechnology based storage medium. Memory storage may include drives for reading from and writing to the storage medium.

Memory storage may be external to and or removable from device such as for example a Universal Serial Bus USB memory stick a dongle a hard disk mass storage off line storage or some other type of storage medium e.g. a compact disk CD a digital versatile disk DVD a Blu Ray disk BD etc. . Memory storage may store data software and or instructions related to the operation of device

Software includes an application or a program that provides a function and or a process. Software may include firmware. For example with reference to steering engine software may include an application that when executed by processor provides the functions of steering engine as described herein.

Communication interface permits device to communicate with other devices networks systems and or the like. Communication interface includes one or multiple wireless interface s and or wired interface s . For example communication interface may include one or multiple transmitter s and receiver s or transceiver s .

Input provides an input into device . For example input may include a keyboard a keypad a touchscreen a touch pad a touchless screen a mouse an input port a button a switch a microphone a knob and or some other type of input.

Output provides an output from device . For example output may include a display a speaker a light e.g. light emitting diode s etc. an output port a vibratory mechanism and or some other type of output.

Device may perform a function or a process in response to processor executing software instructions stored by memory storage . For example the software instructions may be read into memory storage from another memory storage or read from another device via communication interface . The software instructions stored in memory storage may cause processor to perform processes described herein. Alternatively according to another implementation device may perform a process or a function based on the execution of hardware e.g. processor etc. .

Referring to in block process begins with a request to attach being received by a visited network. For example as previously described a roaming user of UE initiates an attachment process with visited network .

In block a Diameter message is received by a Diameter Agent of the visited network. For example as previously described MME of visited network generates and transmits a ULR message to Diameter Agent of visited network .

In block the Diameter message is transmitted by the Diameter Agent via an internetwork to a Diameter Agent of a home network. For example as previously described Diameter Agent transmits the ULR message to Diameter Agent via Diameter Agent of IPX network .

In block the Diameter message is transmitted by the Diameter Agent of the home network to a steering of roaming SOR device. For example as previously described Diameter Agent transmits the ULR message to a Diameter Agent of steering platform . Diameter Agent transmits the ULR message to a steering engine .

In block the SOR device stores a database that includes SOR business rules and other steering data. For example as previously described steering platform includes data storage . According to an exemplary embodiment as previously described data storage stores business rules and other steering data e.g. historical data network data preferred visited network lists and or user preferences data .

In block the Diameter message is received by the SOR device. For example as previously described steering engine receives the ULR from Diameter Agent .

Referring to in block the SOR device uses the Diameter message and the database to calculate a steering response. For example as previously described steering engine uses data included in the Diameter message e.g. an IMSI of the roaming user and the steering data stored in data storage to calculate a steering response. By way of example steering engine may use the IMSI included in the Diameter message in combination with preferred visited network listed stored in preferred visited network lists to determine whether to accept or deny the attachment to visited network . For example as previously described preferred lists may be associated with metadata that includes IMSIs e.g. VIP type roaming users etc. . Additionally or alternatively steering engine may make a determination whether to accept or deny attachment based on the other types of steering data e.g. reliability parameter user preferences network data e.g. geographic size etc. etc.

As illustrated in process includes two separate flows based on the steering response to accept attachment or deny attachment. The accept flow and the deny flow are described below. Referring to the accept flow in block the SOR device generates a Diameter message that indicates to accept the attachment. For example as previously described steering engine generates an update location answer ULA message which indicates that the roaming user may attach to visited network .

In block the SOR device transmits the Diameter message to an HSS. For example as previously described steering engine transmits the ULA message to HSS . Thereafter HSS performs authentication authorization etc. as previously described. HSS transmits a ULA message to Diameter Agent . Diameter Agent transmits the ULA message to MME of visited network . UE attaches to visited network .

Referring to the deny flow in block the SOR device generates a Diameter message that indicates to deny the attachment. For example as previously described steering engine generates an update location answer ULA message which indicates that the roaming user is not authorized to attach to visited network .

In block the SOR device transmits the Diameter message to the Diameter Agent of the home network. As previously described in contrast to the accept flow steering engine does not transmit the ULA message to HSS . Rather steering engine transmits the ULA message to Diameter Agent . Diameter Agent transmits the ULA message to MME of visited network . UE is unable to attach to visited network .

Although illustrate an exemplary process according to other implementations process may include additional operations fewer operations and or different operations than those illustrated in and described herein.

Referring to in block process begins with identifying by a Diameter Agent of an internetwork a connection state between a visited network and the internetwork. For example as previously described Diameter Agent of IPX network monitors connections to visited networks . For example Diameter Agent may use a watchdog algorithm lower layer services and other functionality provided by the Diameter standard.

In block the Diameter Agent generates a notification indicating the connection state. For example as previously described Diameter Agent may store a state table that indicates a failure event with respect to a failed connection.

In block data indicating the connection state is obtained by a steering of roaming SOR device. For example as previously described connection manager monitors Diameter Agent . According to an exemplary implementation connection manager may have an inter process communication with Diameter Agent . Connection manager obtains data pertaining to the failed connection from Diameter Agent . Connection manager may obtain additional data from other network elements services provided by IPX . Connection manager generates a connection state message based on the obtained data. Connection manager transmits the connection state message to steering engine .

Alternatively the notification service of Diameter Agent generates and transmits a message to steering engine . For example the message may be implemented as a CER message. The message may include an AVP that identifies visited network associated with the failure event and an AVP that indicates the connection state e.g. down . The message may also include additional failure data.

In block the SOR device stores a database that includes SOR business rules and other steering data. For example as previously described steering platform includes data storage . According to an exemplary embodiment as previously described data storage stores business rules and other steering data e.g. historical data network data preferred visited network lists and or user preferences data .

In block the SOR device uses the obtained data and the database to calculate an SOR response. For example as previously described steering engine uses the data included in the connection state message and the steering data stored in data storage to calculate a steering response.

As illustrated in process includes two separate flows based on the steering response to generate an updated preferred list or not to generate an updated preferred list e.g. to select another version of a preferred list . The update flow and the no update flow are described below. Referring to the update flow in block the SOR device generates an updated preferred visited network list based on a calculation or a determination. For example as previously described steering engine may use the steering data stored in data storage to generate the updated preferred visited network list. By way of further example steering engine may use preferred visited network lists and business historical data network data and or user preferences data . Steering engine may select one or multiple preferred visited network lists from preferred visited network lists to modify when generating the updated preferred visited network list. Steering engine may update the selected preferred visited network list in some manner such as removing a visited network from the list e.g. visited network associated with the failure event adding a new visited network to the list and or rearranging the order of the preferred visited networks .

In block the SOR device transmits the updated preferred visited network list to a user device. For example as previously described steering engine generates an update message which includes the updated preferred visited network list. The update message may be a broadcast multicast or unicast message. Steering engine transmits the update message and UE receives the update message.

Referring to the no update flow in block the SOR device selects a different version of the preferred visited network list based on a calculation or a determination. For example as previously described steering engine may use the steering data stored in data storage to select a different version e.g. relative to a last transmitted currently deployed etc. of the preferred visited network list. By way of further example steering engine may use the metadata associated with preferred lists and the links between preferred lists to select a different version of the preferred visited network list.

In block the SOR device transmits the different version of the preferred visited network list to a user device. For example as previously described steering engine generates an update message which includes the updated preferred visited network list. The update message may be a broadcast multicast or unicast message. Steering engine transmits the update message and UE receives the update message.

Although illustrates an exemplary process according to other implementations process may include additional operations fewer operations and or different operations than those illustrated in and described herein. For example process may include in the update flow and or the no update flow operations to update the steering data stored in data storage as previously described. For example steering engine may use the metadata e.g. the last updated data associated with the preferred lists stored in preferred visited network lists as a basis to update the steering data. For example assume that the last updated date indicates a time period of over six months and during that time a number of failures occurred. The last updated data may serve as another basis to update the reliability parameter stored in historical data .

The foregoing description of implementations provides illustration but is not intended to be exhaustive or to limit the implementations to the precise form disclosed. Accordingly modifications to the implementations described herein may be possible.

The terms a an and the are intended to be interpreted to include one or more items. Further the phrase based on is intended to be interpreted as based at least in part on unless explicitly stated otherwise. The term and or is intended to be interpreted to include any and all combinations of one or more of the associated items.

In addition while series of blocks are described with regard to the processes illustrated in B and the order of the blocks may be modified in other implementations. Further non dependent blocks may be performed in parallel. Additionally with respect to other processes described in this description the order of operations may be different according to other implementations and non dependent operations may be performed in parallel.

The embodiments described herein may be implemented in many different forms of software and or firmware executed by hardware. For example a process or a function may be implemented as logic or as a component. The logic or the component may include for example hardware e.g. processor etc. or a combination of hardware and software e.g. software . The embodiments have been described without reference to the specific software code since software can be designed to implement the embodiments based on the description herein.

Additionally embodiments described herein may be implemented as a non transitory storage medium that stores data and or information such as instructions program code data structures program modules an application etc. A non transitory storage medium includes one or more of the storage mediums described in relation to memory storage .

Various embodiments have been described with reference to the accompanying drawings. However various modifications and changes may be made thereto and additional embodiments may be implemented without departing from the broader scope of the invention as set forth in the claims that follow. The specification and drawings are accordingly to be regarded as illustrative rather than restrictive.

Use of ordinal terms such as first second third etc. in the claims to modify a claim element does not by itself connote any priority precedence or order of one claim element over another or the temporal order in which acts of a method are performed but are used merely as labels to distinguish one claim element having a certain name from another element having a same name but for use of the ordinal term to distinguish the claim elements.

No element act operation or instruction described in the present application should be construed as critical or essential to the embodiments described herein unless explicitly described as such.

