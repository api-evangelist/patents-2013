---

title: Systems, methods, and computer program products for congestion control of media gateway resources
abstract: A method is disclosed for managing a plurality of resources in a media gateway, the method comprising: determining that a utilization of a resource exceeds a first threshold, wherein the resource is one of the plurality of resources; determining a reduction in load to communicate to a media gateway controller (MGC) coupled to the media gateway, wherein the reduction is based on the resource and the first threshold; and sending a message indicating the reduction and the resource to the MGC.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09356874&OS=09356874&RS=09356874
owner: GENBAND US LLC
number: 09356874
owner_city: Frisco
owner_country: US
publication_date: 20131219
---
The present description relates in general to computer systems that manage media resources and more specifically to techniques for control of resources in media gateways.

Internet protocol IP networks and other types of networks such as asynchronous transfer mode ATM networks or time division multiplexing TDM networks can be used to carry data for different types of calls such as voice and video communications and conferencing and streaming services including audio and video streaming. For example communication of audio may use a suitable digital audio format such as MP3 and communication of video may use any suitable digital video format such as those defined by H.264 MPEG 4 Part 10. Media gateways may be used to provide for transmission of media between disparate communications networks e.g. by converting digital media calls between disparate communications networks. For example a media gateway may perform different types of services for transmission of calls including transcoding transrating and encryption.

The volume of media traffic carried by communications networks continues to increase at a rapid pace giving rise to a need for media gateways to provide ever greater capability to handle media traffic. Thus there is a continuing need to manage the resources on media gateways as efficiently as possible.

According to one embodiment a method is disclosed for managing a plurality of resources in a media gateway the method comprising determining that a utilization of a resource exceeds a first threshold wherein the resource is one of the plurality of resources determining a reduction in load to communicate to a media gateway controller MGC coupled to the media gateway wherein the reduction is based on the resource and the first threshold and sending a message indicating the reduction and the resource to the MGC.

According to another embodiment a system is disclosed comprising a media gateway configured to couple to an MGC the media gateway comprising a plurality of resources comprising a digital signal processing resource a cryptographic resource an internet protocol IP resource and an asynchronous transfer mode ATM resource a processor configured to monitor a utilization for each of the plurality of resources determine that a resource in one of the plurality of resources is congested based on a corresponding one of the utilizations and in response to determining that the resource is congested determine a reduction in load to communicate to the MGC wherein the reduction is based on the resource and the utilization of the resource and a transceiver configured to send a request to the MGC wherein the request comprises the reduction and an indication of the type of the resource.

According to another embodiment a computer program product is disclosed having a computer readable medium tangibly recording computer program logic for managing a plurality of resources in a media gateway coupled to a first MGC and a second MGC the computer program product including code to determine whether a first utilization of a first resource resides in a range of values wherein the first resource is one of the plurality of resources code to in response to determining that the first utilization resides in the range of values select which of the first MGC and the second MGC should be sent a request to reduce a load corresponding to the first resource wherein the selection is based on types of calls controlled by each MGC in the media gateway and wherein the request comprises a requested percentage reduction in the load and code to send the request to the selected MGC.

The following disclosure provides many different embodiments or examples for implementing different features of the invention. Specific examples of components and arrangements are described below to simplify the present disclosure. These are of course merely examples and are not intended to be limiting. In addition the present disclosure may repeat reference numerals and or letters in the various examples. This repetition is for the purpose of simplicity and clarity and does not in itself dictate a relationship between the various embodiments and or configurations discussed.

ITU T Recommendation H.248.10 entitled Gateway control protocol Media gateway resource congestion handling package suggests an approach to address resource capacity overload conditions in media gateways MGs . The approach suggested by H.248.10 involves arbitrary global congestion thresholds that when attained trigger an MG to request that a controlling media gateway controller MGC reduce the load towards the MG. The request contains a parameter that represents a percentage of the load that the MGC is requested to block rejects or deflects to another MG . A limitation of this approach is that it targets only congestion of general resources used by all calls in a MG.

Various embodiments disclosed herein include systems methods and computer program products for providing resource congestion control in media gateways. Congestion control may be accomplished by recognizing that different resources in a media gateway MG may be consumed by different types of calls controlled by different media gateway controllers MGCs . Resources in a MG include digital signal processing DSP resources for transcoded calls or streams cryptographic resources such as hardware accelerators for encryption and other security measures internet protocol IP resources asynchronous transfer mode ATM resources and resources that are consumed for any type of MG calls including main processor or central processing unit CPU resources and available bandwidth. For the purposes of congestion control resources are classified as one of two types 1 resources that are used on a subset of MG calls e.g. DSP for transcoded calls hardware accelerator for encryption dedicated IP hardware and dedicated ATM hardware and 2 resources for servicing any type of MG call e.g. main processor CPU and link bandwidth . Furthermore a MG may be controlled by more than one MGC in which case the MG has better information about resource consumption in the MG and which MGC is responsible for calls consuming the various types of resources. That is an MG is in a better position than any controlling MGC to determine what type of reduction must be applied by the MGC since the MG is the only entity that knows how its resources are used and which MGC s use the resources. Thus various resources in a MG can be monitored by the MG and the MG can make a request to at least one MGC that indicates a requested reduction in usage corresponding to the congested resource. In some embodiments an MGC receiving a request for a reduction knows the types of calls that have the largest impact on the indicated resource and therefore can deflect e.g. either re route or block those types of calls.

Regardless of the source of a call entering a MG via a media bearer the MG can perform various services for the call. As an example an MG can perform transcoding and or transrating of a call between disparate networks or devices. As one of ordinary skill in the art would appreciate transcoding includes conversion between different transmission and or coding types and transrating includes bit rate conversion. For example representative MG such as MG may receive a call from network wherein the call uses a first type of encoding and transcode the call into a second type of encoding for communication to another MG another network or an endpoint. Likewise MG may in addition or alternatively encrypt and or perform another form of security on the call for communication to another MG another network or an endpoint. For example MG may use secure real time transport protocol SRTP to provide encryption and authentication. In this example a call may include any communication of digital data over a connection between end users such as a voice conversation a multimedia session or any combination thereof.

Calls in and among the various MGs can be coordinated by the MGCs . In case of congestion on one of its controlled MGs the MGC can deflect or distribute the load across the remaining MGs. The MGCs can communicate with each other via call signaling. The MGCs can be directly connected to each other or connected to each other through intermediate nodes or other MGCs.

The control of MGs by MGCs can take various forms and representative examples are presented in . For example a single MG can be controlled by more than one MGC as explained further below. For example MG is controlled by MGC and MGC. Furthermore a single MGC can control all or part of more than one MG e.g. MGC controls part of MG and all of MG and MGC controls all of MG. These are representative examples and generally an MG can be controlled by any number of MGCs and an MGC can control any number of MGs.

According to H.248 a MG can be connected to at most one MGC while a MGC may be connected to any number of MG s. Even though the H.248 protocol does not have an explicit mechanism to support multiple MGCs controlling a physical MG it has been designed to support multiple logical MGs within a single physical MG that can be associated with different MGCs via use or creation of VMGs. In an embodiment a single physical MG can be controlled by more than one MGC provided that the physical MG has been virtually portioned so it looks to the MGCs as if this MG was in fact two different MGs. This can be done by creating two different identifiers referred to as CIDs for each virtual MG so they appear as two MGs to the MGCs even though the two MGs are indeed on one physical MG.

As illustrated in MG is divided into VMG and VMG each of which has access to the media gateway resources labeled as R R . . . Rn where n is an integer greater than 0 As discussed earlier the resources of an MG include DSP resources cryptographic and other security related processing resources referred to herein as crypto resources IP resources that transport packets on an IP network e.g. hardware used to provide terminations with the media address type IP4 or IP6 ATM resources that transport packets on an ATM network e.g. hardware used to provide terminations with the media network type of ATM and general resources including central processing unit CPU resources one or more types of memory and link bandwidth e.g. measured in bits sec . General resources may be classified as those that are needed to service any type of call whereas the other resources are those that may be used on only a subset of MG calls. For example in some embodiments DSP resources are used primarily for calls that require transcoding and crypto resources are used primarily for calls that require speech encryption. One of ordinary skill in the art will recognize that there could be other types of resources available. The media bearers illustrated coupled to VMG and VMG can be logical media bearers that share bandwidth in a physical link.

Each VMG is controlled by a different MGC. One MGC may not be aware that another MGC is sharing the same resources on a MG. For example each of MGC and MGC may not be aware that the other MGC is sharing resources on MG . It may be the case that only the MG is aware that its resources are being shared by more than one MGC. Thus in the control of MG resources a MG may be better placed than an MGC to decide what type of reduction in load should be applied and by how much. If a MG is controlled by more than one MGC the MG can select different reductions in load for each MGC.

In action MG determines that a utilization of a resource is in a range of values. After the utilization is determined in one embodiment whether the utilization is in a range and an action to be taken is determined from a lookup table stored in the MG. In action the range may be such that at least one MGC should be notified to adjust a load. In action MG determines load reductions for each of MGC and MGC . In action the MG and its VMGs may use call statistics such as the calls per second CPS the average hold time AVHT call types codecs used features used etc. applied by each VMG for each resource to decide the reduction percentage that would the most rapidly resolve the congestion condition. For a more concrete example embodiment suppose for example MGC is making 100 CPS with an AVHT of 2 minutes on MG using VMG while MGC is only making 10 CPS at 1 min AVHT on MG using VMG and that all calls are transcoded and therefore using DSP resources. Knowing that MGC is mainly responsible for the overload condition and also knowing that reducing the call rate from MGC would be much more helpful to resolve the overload condition than asking the same from MGC the MG may request a larger reduction from MGC by sending a notification or request message as compared with MGC. Therefore in an embodiment MG may request reductions from both MGC and MGC but with a larger reduction from MGC than MGC in which case a request would also be transmitted to MGC . For example MG may request a reduction of 50 from MGC and reduction of 10 from MGC as applied to calls that consume DSP resources. Thus a MG may determine call statistics for calls directed by each MGC that controls the MG and select reductions based on call statistics. Alternatively in this example the determined load reduction for MGC may be zero so there may be no reason to send a load reduction request to MGC .

In an embodiment the load reduction is derived from one or more lookup tables stored in MG . An example table of DSP utilization and corresponding reduction percentages is presented in Table 1. In this example Table 1 is stored in each MG and used to select reduction percentages for various levels of DSP utilization. For example if it is determined that DSP utilization is between 80 and 90 in action and there is one MGC controlling the MG a load reduction is determined in action and a request is sent to the MGC in action to request a 25 reduction in calls that utilize the DSP resource. Reductions may be requested from different MGCs to effect the 25 reduction in a scenario in which there are multiple MGCs controlling a MG. Any level of utilization above the lowest threshold can be considered a congestion condition. In some embodiments there are potentially mappings of reduction percentages to resource utilization for each type of resource. For example there may be different tables stored for each resource with different reduction percentages versus utilizations. That the MG makes the selection of reduction percentage emphasizes that the MG is a better place to decide how much reduction percentage to apply than any MGC.

Furthermore for any given resource there can be different mappings depending on the type of congestion for the given resource. For example suppose a DSP resource is congested at a certain level. If the DSP resource is congested due to the CPU congestion may be requested to be reduced by X percent but if the DSP resource is congested due to DSP internal bandwidth congestion congestion may be requested to be reduced by Y percent where the values of X and Y are potentially different. A DSP resource is used as an illustrative example but the same concept applies to other resources. The potential for this type of selection further emphasizes that a MG is better positioned to decide how much reduction percentage to apply than any MGC.

Techniques to determine a load reduction are not limited to consulting lookup tables and may use parameters other than DSP usage. Other embodiments may use a formula or other intelligence to generate a load reduction request number from any appropriate resource usage parameter. In fact any appropriate technique to calculate or otherwise determine a load reduction request number is within the scope of embodiments.

In action MG requests load reductions from the MGCs . There is potentially a request for each of the controlling MGCs. A request in comprises at least one message that indicates both a load reduction and a type of resource. Finally in action MGC adjusts the load corresponding to the resource indicated in the notification message in action and according to the indicated reduction percentage. Likewise MGC adjusts it load according to the indicated resource and the reduction percentage indicated for MGC . In this example a focus is placed on MGC for illustration with the understanding the MGC takes similar actions. The load is adjusted by MGC by either blocking calls that consumes the resource or redirecting calls to another MG at the rate specified by the reduction percentage. If calls are redirected to other MGs in one embodiment calls are redirected until the resource of interest in the other MGs is congested as well in which case transcoded calls are rejected by the MGC . MGC communicates with at least one other MGC to redirect calls to the at least one other MGC but as stated earlier MGC may instead block calls to adjust a load in which case MGC does not necessarily communicate with another MGC.

By way of another example suppose 90 of MG s DSP resources and 90 of MG s crypto resources are being utilized and suppose that MGC is primarily responsible for calls that consume DSP resources and MGC is primarily responsible for calls that consume crypto resources. Using the method illustrated in MG could notify MGC of a call reduction percentage that MGC could apply to calls that heavily consume DSP resources and MG could notify MGC of a smaller call reduction percentage for its calls that consume DSP resources. Likewise MG could notify MGC of a call reduction percentage that MGC could apply to calls that heavily consume crypto resources and MG could notify MGC of a smaller call reduction percentage for its calls that consume crypto resources.

Similarly by way of further example suppose 90 of MG s IP resources and 90 of MG s ATM resources are being utilized and suppose that MGC is primarily responsible for the IP calls in MG and MGC is primarily responsible for the ATM calls in MG . Using the method illustrated in MG would notify MGC of a reduction percentage to apply to IP calls and MG would notify MGC of a reduction percentage to apply to ATM calls.

Various embodiments may add omit rearrange or modify the actions of method . For example as one of ordinary skill in the art would readily recognize if an MG is controlled by only one MGC the method is simplified in that communications with a second MGC and actions taken by a second MGC are not performed. Furthermore in an embodiment if another MG has not been registered under an MGC then calls are rejected otherwise calls are deflected to one or more other registered MGs until the one or more other MGs become congested for the same type of resources in which case calls are rejected at that point. Finally the actions in may be repeated for each of the plurality of resources.

If the resource in action is a general resource the MGC responsible for the most calls in general may be selected in action . In at least one embodiment for general resources the selected MGC would adjust overall load to MG without distinguishing between types of calls. In at least one other embodiment general resources can be further subdivided e.g. into CPU and bandwidth resources because some types of calls require a lot of bandwidth but not a lot of CPU resources and vice versa. For example in a lawful intercept wiretapping scenario a call can be tapped by many different agencies in which case the call consumes a disproportionate share of bandwidth as opposed to CPU resources. Therefore instead of indicating a resource as a general resource to an MGC the resource may be indicated as bandwidth or CPU .

An MG determines resource utilization for each resource type at various times e.g. at predefined time intervals for example every second or minute or a trigger may occur within the MG when utilization of a resource exceeds predefined thresholds. Regardless actions can be repeated when utilization of a resource changes numerical ranges such that a load needs to be adjusted at periodic times or based on any appropriate setting.

The approach of method is superior to conventional approaches such as the approach outlined in ITU T Recommendation H.248.10 which was described previously. The approach of H.248.10 does not discriminate between types of resources so the approach of H.248.10 applies only to general congestion in MGs. By adding to the ITU T Recommendation H.248.10 a source parameter either proprietary or by requesting an update to the standard to H.248 e.g. to the H.248 message referred to as Congestion Event an MG could inform an MGC of the particular component or resource of the MG being congested. The MGC could then offload the MG by a specified reduction percentage but only if a new call requires using the congested component for example if DSP utilization is at 80 offload the DSP of this MG by sending transcoded call to a secondary MG and still process non transcoded calls on the primary MG . In a distributed model where a single physical MG can be broken down in a plurality of VMGs located on different Advanced Telecommunications Computing Architecture ATCA blades and can be controlled by many MGCs this solution would allow for better use of the resources available. Example syntax for a request or notification message from an MG to an MGC that revises H.248.10 to include a source parameter is as follows. In the notation that follows Reduction x implies a requested reduction percentage of x for the resource type indicated which is DSP in this example.

In an embodiment a notified MGC need only to perform per resources type of congestion management if the congestion source is known by both the MGC and the MG. In the examples previously presented the known source indicator would indicate DSP resources crypto resources IP resources ATM resources or general resources. In cases where an unknown congestion source was received or if the source event was not specified every new call can be deflected or prevented at the rate specified by the reduction percentage as if they were general congestions. Thus the MGC would be able to apply congestion control even if unaware of the source of the problem in this case applying general resource congestion management on the unknown sources ensuring compatibility with MGCs that do not support specific resource indications.

The secondary storage may comprise one or more disk drives or tape drives and is used for non volatile storage of data and as an over flow data storage device if the RAM is not large enough to hold all working data. The RAM may be static RAM dynamic RAM or the like and the ROM may be programmable ROM PROM erasable PROM EPROM electrically EPROM EEPROM or the like. The secondary storage may be used to store programs that are loaded into the RAM when such programs are selected for execution. The ROM is used to store instructions and perhaps data that are read during program execution. The ROM is a non volatile memory device that typically has a small memory capacity relative to the larger memory capacity of the secondary storage. The RAM is used to store volatile data and perhaps to store instructions. Access to both the ROM and the RAM is typically faster than to the secondary storage .

In an embodiment the computer system includes a plurality of transceivers labeled as transceiver through transceiver k where k is an integer greater than one. There may be a transceiver for each communication line e.g. electrical or optical coupled to the computer system . A transceiver may be bidirectional or unidirectional depending on the embodiment. Each transceiver is adapted to couple computer system to a communication link e.g. a wired or wireless communication link . The CPU is adapted to monitor bandwidth usage e.g. measured in bits sec averaged over a period of time of the various communications links. The computer system may be coupled to only one communications link in which case there is only one transceiver .

The I O devices may include a keyboard a computer mouse a microphone and or a display device for allowing a user to provide input to and receive output from the computer system .

It is understood that by programming and or loading executable instructions onto the computer system at least one of the CPU the RAM and or the secondary storage are changed transforming the computer system in part into a particular machine or apparatus e.g. MG or MGC having the functionality taught by the present disclosure. The executable instructions may be stored on the RAM or secondary storage and loaded into the CPU for execution. A VMG may be implemented as a software application running on the CPU and using the RAM the ROM and or secondary storage . It is fundamental to the electrical engineering and software engineering arts that functionality that can be implemented by loading executable software into a computer can be converted to a hardware implementation by well known design rules. Decisions between implementing a concept in software versus hardware typically hinge on considerations of stability of the design and numbers of units to be produced rather than any issues involved in translating from the software domain to the hardware domain. Generally a design that is still subject to frequent change may be preferred to be implemented in software because re spinning a hardware implementation is more expensive than re spinning a software design. Generally a design that is stable that will be produced in large volume may be preferred to be implemented in hardware for example in an ASIC because for large production runs the hardware implementation may be less expensive than the software implementation. Often a design may be developed and tested in a software form and later transformed by well known design rules to an equivalent hardware implementation in an application specific integrated circuit that hardwires the instructions of the software. In the same manner as a machine controlled by a new ASIC is a particular machine or apparatus likewise a computer that has been programmed and or loaded with executable instructions may be viewed as a particular machine or apparatus. Logic may be encoded in a non transitory computer readable medium such as RAM and or secondary storage . Such a medium can take many forms including but not limited to non volatile media and volatile media. In various implementations non volatile media includes optical or magnetic disks such as secondary storage and volatile media includes dynamic memory such as various types of RAM . CPU reads application code from the readable medium and executes the code to provide the described functionality.

The foregoing outlines features of several embodiments so that those skilled in the art may better understand the aspects of the present disclosure. Those skilled in the art should appreciate that they may readily use the present disclosure as a basis for designing or modifying other processes and structures for carrying out the same purposes and or achieving the same advantages of the embodiments introduced herein. Those skilled in the art should also realize that such equivalent constructions do not depart from the spirit and scope of the present disclosure and that they may make various changes substitutions and alterations herein without departing from the spirit and scope of the present disclosure.

