---

title: Simultaneous communications over licensed and unlicensed spectrum
abstract: Techniques to perform simultaneous communications over licensed and unlicensed spectrum are disclosed. A bandwidth monitor measures the amount of bandwidth available from a first communications connection over licensed spectrum, and the amount of bandwidth available from a second communications connection over unlicensed spectrum. Upon receiving a bandwidth request, an optimizer generates a recommendation on how to allocate bandwidth from the first and second communications connections. A load balancer then executes the allocation over the first and second communications requests based at least on the generated recommendation. Various optimization embodiments are further disclosed. Variations on bandwidth monitoring, including polling and notifications are also disclosed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08965390&OS=08965390&RS=08965390
owner: T-Mobile USA, Inc.
number: 08965390
owner_city: Belevue
owner_country: US
publication_date: 20130129
---
This non provisional utility patent application claims priority to provisional patent application 61 592 460 filed Jan. 30 2012 titled Simultaneous Communications over Licensed and Unlicensed Spectrum which is incorporated by reference in its entirety herein.

Presently there is a proliferation of mobile devices having one or more communications connections. Some communications connections may be dedicated to a single purpose such as a Global Positioning Satellite GPS receiver for GPS data or an Ethernet connection for digital data. Other communications connections may be multipurpose such as a cellular connection supporting both voice and digital data components.

These mobile devices may include smart phones laptop personal computers wireless enabled tablets portable audio devices as well as many others all with applications requiring data access to local area networks and or to the Internet. This ecosystem in turn has encourages a proliferation of more and more applications using more and more bandwidth. A user once satisfied with accessing text only electronic mail begins to demand fast download bandwidth of still digital images then digital audio and then video. As digital capture devices such as still cameras and video cameras are integrated into mobile devices users begin to demand more and more upload bandwidth.

Since mobile devices by their very nature were meant to operate in different locations and environments mobile devices are increasing equipped with many different communications connections. A mobile device may have a data connection perhaps over a 3G cellular communications connection. That same mobile device may have or a data connection using a Wi Fi communications connection via a local wireless access point. For compatibility and roaming purposes some mobile devices have both 3G and 4G radios each with its own communications connection and may switch between the two depending on service plan and the base station type of the local cell.

Although a mobile device might be flexible enough to use various communications connections the mobile device may typically use only one communications connection for a particular application despite multiple communications connections being available. For example a user accessing electronic mail via a cellular communications connection might walk into a coffee shop and continue the electronic mail session by switching over to a Wi Fi communications connection. Thus the user might use either a cellular or a Wi Fi communications connection but not both simultaneously.

Where a mobile device uses multiple communications connections simultaneously the mobile device does not load balance between those communications connections. For example a mobile device might use a cellular communications connection to browse the Internet a Bluetooth connection to receive mouse input and a Global Positioning Satellite GPS connection to receive geolocation data. But the mobile device does not use GPS bandwidth for mouse input if a Bluetooth channel is saturated. Similarly the mobile device does not use the GPS connection or the Bluetooth connection when the cellular data connection is insufficient. This is because the GPS connection and the Bluetooth connection do not have access to the same endpoints and or the same data as the cellular communications connection. Specifically neither the GPS nor the Bluetooth connections have access to Internet servers.

However there is a class of communications connections with access to the same end points whose respective networks overlap each other. Some of these communications connections are licensed spectrum connections that make use of public spectrum licensed by a government entity such as the Federal Communications Commission FCC in the United States which may include a 4G network cell or a 3G network cell at a particular location. Others are unlicensed spectrum connections that use private bandwidth such as Wi Fi via a private local access point. In many locations a mobile device may have access to licensed and unlicensed communications connections with the same end points. However presently a mobile device does not load balance the licensed spectrum and unlicensed spectrum communications connections.

Electronic devices typically communicate with other electronic devices by modulating signals over electro magnetic frequencies EMF . Some signals may be over physical wires or cables such as an Ethernet connection for a local network or a fiber connection communications trunk. However for mobile device scenarios including those utilizing smart phones tablets laptops and the like the goal is for the mobile device to be able to effect communications without searching for a physical network tap. In these scenarios mobile devices typically choose to communicate over EMF frequencies that can be carried over the air. Accordingly the frequencies comprising over the air spectrum are called wireless spectrum.

Since wireless spectrum is finite there is the possibility that one mobile device may interfere with the communications of another device. Accordingly most jurisdictions regulate wireless spectrum. Typically a government will auction spectrum bands for various locations to a cellular operator or other entity. Alternatively the government will grant or otherwise convey a license to use the spectrum. If a cellular operator successfully bids for or otherwise acquires the licensed spectrum the cellular operator will then construct and or operate infrastructure such as base stations to utilize the licensed spectrum.

Licensed spectrum covers long distance high power radiation emitters which may include cellular base stations on standards such as Code Division Multiple Access 2000 CDMA2000 Wideband Code Division Multiple Access W CDMA High Speed Packet Access Plus HSPA and Long Term Evolution LTE base stations. For purposes of this patent application licensed spectrum refers to any EMF that relates to frequencies whose use is amenable to long distance and or high power radiation emission as to be regulated by license by a government.

In contrast relatively short distance low power radiation emitters have less risk of interfering with other mobile devices. While still regulated these EMF frequencies are typically not subject to license. For example in the United States the Federal Communications Commission FCC regulates unlicensed spectrum via Title 47 of the Code of Federal Regulations Part 15 47 CFR .

Unlicensed emitters include Wi Fi Bluetooth cordless phones and frequency modulation FM bands for used for low distance coverage encompassing a single business locale a residence or shorter. Also contemplated are transmitters which may have longer range capability but whose focus limits diffusion and therefore limits the potential to interfere with other communications. An example may include laser based communications where the laser intensity is sufficiently low not to cause health hazards. For purposes of this patent application unlicensed spectrum refers to any EMF that relates to frequencies whose use is amenable to low distance and or low power radiation emission as not to be regulated by license by a government.

A communications connection is an electronic connection between at least two endpoints or communicating electronic devices. A communications connection may comprise multiple individual communications serial sub connections where data from an originating electronic device is relayed from one sub connection to a subsequent sub connection until the data is ultimately received by the intended receiving electronic device. In wireless communications typically the only wireless portion of the communications connection is the sub communications connection from the mobile device to the next sub communications connection. Subsequent sub communications connections in the wireless communications connection are typically over wire.

For cellular communications much of the intervening sub communications connections are managed by a cellular operator s infrastructure. For data communications one endpoint may be a destination on the Internet where communications dispatching and relaying is managed by an Internet Service Provider ISP . Note that a communications connection may be characterized by the direction of the flow of the communications data. For purposes of this patent application communications data flowing from the mobile device to the other endpoint is an upload. Conversely communications data flowing to the mobile device from the other endpoint is a download.

A user may wish to engage in wireless communications via mobile device . Mobile device may have multiple radios capable of wireless communications some over licensed spectrum and others over unlicensed spectrum. Mobile device will have an optimizer load balancer resident on the mobile device . Optimizer load balancer monitors available bandwidth on the radios on the mobile device . In particular optimizer load balancer notes which radios on the mobile device are capable of communicating over substantially the same endpoints as described below. Bandwidth relates to the volume of data for a particular period of time. For example bandwidth might be measured in bits per second.

If mobile device is located within Cell A as with base station A utilizing licensed spectrum the optimizer load balancer may determine whether a communications connection via bases station A could provide access to a particular Internet universal resource locator URL or destination.

At the same time mobile device may also be located within Cell B with base station B utilizing licensed spectrum. Cell A may be a 3G cellular network and Cell B may be a 4G cellular network. Alternatively Cell A may be owned by one licensed cellular operator and Cell B may be owned by another licensed cellular operator. Regardless the optimizer load balancer determines if the mobile device may engage in a communication connection via both Cell A and Cell B and whether one both or neither could provide access to a particular URL or destination.

Similarly mobile device may also be with range of an unlicensed spectrum access point such as a Wi Fi access point. Again the optimizer load balancer determines if the mobile device may engage in a communication connection with the Wi Fi access point and whether it could provide access to a particular Internet universal resource locator URL or destination.

Note that if the user desires to access a particular URL or destination the different potential communications connections to that URL or destination may have different intervening sub communication connections and therefore may have access to different endpoints. For example a cellular data link via base station A may be available via user s private plan and may have unlimited access to the Internet. In contrast access point may be operated by a business that limits certain Internet traffic with a customized firewall. However optimizer load balancer may consider both connections to have substantially the same endpoints if the URL s or destinations desired by user may be supported by both communications connections regardless if exactly the same URLs or destinations are not supported respectively.

Accordingly optimizer load balancer may now receive and manage bandwidth requests from applications running on mobile device . Applications may include Internet browsers and electronic mail clients. Note that applications running on the mobile device such as Internet browsers may in turn run client side scripts from applications served from the Internet.

Based on the amount of bandwidth requested by the bandwidth requests and whether the bandwidth requests are requests to upload data download data or both optimizer load balancer may now cause the bandwidth requests to be satisfied by some combination of a simultaneous connection A via base station A a simultaneous connection B via base station B and a simultaneous connection A via access point . Thus optimizer load balancer can load balance bandwidth requests via simultaneous communications connections over both licensed and unlicensed spectrum.

The mobile device may have one or more processors capable of reading and executing computer readable instructions. The mobile device may also support communications over a plurality of radios . Some radios such as radio and radio may communicate over licensed spectrum. It is not unusual for mobile devices such as smart phones to have multiple radios for licensed spectrum. For example a mobile device may have a radio supporting present cellular standard such as LTE and a second radio supporting a legacy standard such as CDMA. Alternatively a mobile device may have a radio supporting domestic frequencies and a second radio support foreign frequencies. However to support simultaneous communications over licensed and unlicensed spectrum one licensed spectrum radio is sufficient.

The mobile device may support one or more unlicensed spectrum radios such as radio global positioning satellite GPS radio and ISM band e.q. Bluetooth radio . A Wi Fi radio is a common radio that operates over unlicensed spectrum and connects to communications subconnection to the Internet.

The mobile device is not limited to the radios thus far enumerated and may have other radios which may include satellite radios shortwave citizens band and frequency modulation radios.

The mobile device is not limited to wireless communications and may also have a network interface card to participate in wired networks such as a home or corporate local area network LAN . Example network interface cards include Ethernet and token ring cards. There are even other wired communications interface not explicitly illustrated in which may include modems a universal serial bus USB and Firewire.

The mobile device has a memory which comprises any computer readable media with which to read and perform computer readable instructions and to store data. Computer readable media includes at least two types of computer readable media namely computer storage media and communications media. Computer storage media includes volatile and non volatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Computer storage media includes but is not limited to Random Access Memory RAM Read Only Memory ROM Easily Erasable and Programmable ROM EEPROM flash memory or other memory technology Compact Disk ROM CD ROM digital versatile disks DVD or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other non transmission medium that can be used to store information for access by a computing device. In contrast communication media may embody computer readable instructions data structures program modules or other data in a modulated data signal such as a carrier wave or other transmission mechanism. As defined in this patent application computer storage media does not include communication media.

Computer readable instructions in memory may include an operating system such as a general purpose operating system such as Windows from Microsoft or a mobile device operating system such as Android from Google . Computer readable instructions in memory may include one or more user applications that make bandwidth requests over communications connections such as Internet browsers and electronic mail clients. One such application includes the software comprising the optimizer load balancer and related software components. Memory may also have space reserved for other storage long term and otherwise.

The optimizer load balancer may be operated fully as software or fully as hardware or as a combination of the two. For the latter two combinations the mobile client may include optimizer load balancer specific hardware . Example optimizer load balancer specific hardware may include hardware monitors such as a power monitor to determine power draw against a local battery or a co processor to perform load balancing optimization specific calculations.

Operational flow may commence with one or more applications such as Application A and Application B initiating bandwidth requests and respectively. Bandwidth requests and are programmatic invocations to allocate deallocate or reserve bandwidth from one or more communications connections. Bandwidth requests and need not be solely for requesting bandwidth and may be incorporated in an invocation that includes other purposes. For example bandwidth requests and or may be part of a single invocation to create a communications channel and to obtain bandwidth. Alternatively bandwidth requests and or may send a message over the network in addition to allocating bandwidth.

The programmatic invocations are typically via an application programming interface API where the API call includes opening a communications port and streaming or receiving data over the port. Since Application A and or Application B may be programmed to monitor their respective states they may send state information as to how their respective bandwidth requests and may be satisfied. For example a bandwidth request and or may include a priority level or a reservation of the direction of data flow such as upload download or both. The bandwidth request and or may include additional state and information specific to the optimizer load balancer such as a specific recommendation of a particular type of radio connection to prioritize and or a profile of how to subdivide the bandwidth request and or between licensed and unlicensed spectrum. An example recommendation of a bandwidth request and or might be to reserve downloads via unlicensed spectrum and uploads via licensed. Another example recommendation of a bandwidth request and or might be to indicate that a large amount of data is to be downloaded and to maximize download over both a licensed and an unlicensed communications connection.

Bandwidth requests and are typically handled by an operating system . An operating system may include a resource manager . Typical resources managed by a resource manager on an operating system are processes memory and input output I O . Resources managed by a resource manager may also include a network stack . Example network stacks include transport control protocol internet protocol TCP IP and internetwork packet exchange sequenced packet exchange IPX SPX .

The resource manager may forward execute bandwidth request and or through the network stack via the radio interface layer a series of drivers and components that expose and manage functionality for radios. However an optimizer may intercept bandwidth request and or and develop a recommendation of how to load balance the bandwidth request and or among the various communications connection available by the various radios. The optimizer then forwards the recommendation to the load balancer to route network stack calls to particular communications channels as exposed by the radio interface layer .

The optimizer develops load balancing recommendations based on monitoring the state of mobile device. Some state may come from the applications themselves via application recommendations carried in via the bandwidth requests and or . Other state may come from the network stack and the radio interface layer . Yet other state may cover from other monitors which provide interfaces to optimizer load balancer hardware such as power battery monitors. Alternatively other state may come in the form of billing information from the operator or third parties.

A bandwidth monitor may provide state specific to the various communications connections. The bandwidth monitor may be an extension of the radio interface layer or a separate component supplementing the radio interface layer . The bandwidth monitor may pass calls to through unchanged to the radio interface layer or may intercept monitor and potentially modify the calls. In this way the bandwidth monitor may provide the optimizer with any communications connection state information not readily available via the radio interface layer or to perform preliminary analysis of the communications connections.

Bandwidth monitor may monitor various communications connections which may include radio X communicatively connected to base station X radio Y communicatively connected to base station Y and radio Z communicatively connected to access point Z. Radio X and radio Y may operate over licensed spectrum although not necessarily the same spectrum. Radio Z may operate over unlicensed spectrum such as to a local Wi Fi access point .

In the case of licensed spectrum the operator may send Quality of Service QoS measurements to the mobile device. The bandwidth monitor may intercept these calls and forward some of the information from the intercepted QoS measurements to the optimizer . In this way the optimizer can optimize load balancing taking into account reported conditions from the base station cellular core network and portions of a cellular communications connection from a cellular operator.

The optimizer may receive one or more bandwidth requests. In blocks and the optimizer receives a first bandwidth request from a first application and a second bandwidth request from a second application respectively.

In order to generate a load balancing recommendation the optimizer will receive a number of inputs in form of messages. The optimizer will interpret the message to extract out data relevant to an optimization calculation. Interpretation may be in the form of parsing the data in the message extracting out relevant data converting the data to a format amenable for performing calculations and storing the data.

Since applications and or may programmatically monitor their own state an application and or may generate a recommendation for how to load balance a bandwidth request allocations and or . The allocation recommendation may be included in the bandwidth request and or or sent in a separate message. Regardless the application and or originates and transmits a load balancing allocation recommendation. In blocks and the optimizer receives and interprets the application originated allocation recommendation of the first bandwidth request and second bandwidth request respectively .

In addition to receiving allocation hints from applications the optimizer may receive server originated quality of service measurements . Typically server originated quality of service measurements are generated by cellular operator servers that perform quality of service operations and may transmit quality of service measurements to mobile client. In block the optimizer receives and interprets server originated quality of service measurements.

The optimizer may still receive yet other data. One example is to monitor devices on the mobile device such as the power draw on a local battery. Another example is to receive external data such as data plan pricing information. Specifically a first communications connection may have a first monetary data rate cost and a second communications connection may have a second monetary data rate cost. Accordingly the optimizer may optimize bandwidth allocations to favor the communications connection with the lesser monetary data rate cost. In block the optimizer interprets these other inputs.

While the optimizer may maintain simultaneous communications with the first communications connection and the second communications connection if the bandwidth from the connection with the lesser monetary data rate cost satisfies the present communications needs the other connection may be placed in an inactive state. However the optimizer and or the load balancer will maintain a handle to both connections at all times such that when traffic capacity may be sufficiently handled by the connection with the lesser monetary data rate the other connection may be activated re activated substantially in real time. In this way simultaneous communications over both the first and second communications connections are maintained during low traffic conditions.

Once the optimizer interprets all inputs the optimizer may then generate a load balancing recommendation in block . The recommendation will enumerate all pending bandwidth requests. In this case these are the first and second bandwidth requests. The recommendation will then map the first and second bandwidth requests to a recommended allocation of from a first communications connection and a recommended allocation from a second communications connection. In some cases the first bandwidth request may be mapped solely to the first communications connection. In other cases the first bandwidth request may be mapped solely to the second communications connection. Alternatively the first bandwidth request may be mapped to some combination of the first and second communications connections. The recommendations may have separate mappings for upload and download. For example the first communications connection may solely perform download operations for the first bandwidth request and the second communications connection may solely perform upload operations for the first bandwidth request.

Upon generating a recommendation in block the load balancer performs the recommendation. Specifically the load balancer retrieves the bandwidth according to the recommendation from the radio interface layer . The load balancer then returns the bandwidth allocations from the radio interface layer to the network stack for return to the calling applications and or via the resource manager .

The optimizer may be directed towards power savings. In such situations in block the optimizer may shut off radios for one or more communications connections. Specifically if a single communications connection is sufficient to handle bandwidth requests and or the optimizer may opt to turn off redundant radios.

One of the inputs to the optimizer load balancer is the amount of bandwidth available from the communications connection over licensed spectrum and the communications connection over unlicensed spectrum. Bandwidth may be measured by querying the radio interface layer . However a large number of queries to the radio interface layer may slow down communications processing by the radio interface layer . However since the load balancer allocates bandwidth the amount of bandwidth available may be updated by subtracting allocations as reported by the load balancer with a previous bandwidth measurement. is a flowchart of an exemplary process to limit radio interface layer queries by estimating available bandwidth based on information from the load balancer.

In blocks and the bandwidth monitor measures the bandwidth for a first wireless connection and a second wireless connection respectively. The measurement may be an API call to the radio interface layer . Alternatively the bandwidth monitor may receive a notification from the radio interface layer in the form of an event.

In block the bandwidth monitor receives a message from the load balancer of how much bandwidth will be allocated from the first wireless connection and how much bandwidth will be allocated from the second wireless connection.

In block the bandwidth monitor estimates a new available bandwidth for the first wireless connection and the second wireless connection. For example the bandwidth monitor may subtract the bandwidth allocation from the first wireless connection to the bandwidth monitor measurement in block . The bandwidth monitor similarly subtracts the bandwidth allocation from the second wireless connection to the bandwidth monitor measurement in block . Alternatively the bandwidth monitor may make an analogous addition of bandwidth allocation based on monitoring completed allocation requests. After a predetermined number of iterations estimating available bandwidth from load balancer performing load balancing recommendations the actual available bandwidth is measured by invoking the radio interface layer .

In this way available bandwidth estimates may be made while reducing the load on the radio interface layer .

Based on the foregoing a mobile client may load balance one or more bandwidth requests simultaneously over communications connections over licensed and unlicensed spectrum. The following describes exemplary embodiments applying simultaneous communications over licensed and unlicensed spectrum.

Bandwidth Spike Internet data traffic tends to be bursty. In other words rather than utilizing a constant level of bandwidth Internet applications tend to have a massive bandwidth spike followed by low or zero bandwidth utilization. For example a user may trigger a spike when requesting a webpage followed by no bandwidth utilization while the user reads the received webpage. Similarly when a user downloads a photo from a server there is a bandwidth download spike followed by relatively low bandwidth utilization. The same is true in reverse when a user uploads a photo. In these bandwidth spike situations one optimization is to maximize allocations of all connections to satisfy the bandwidth spike by maximizing bandwidth allocations on all available connections. A bandwidth spike could be determined by receiving a bandwidth request that exceeds a predetermined threshold. The predetermined threshold could be set via a user profile. It may also be set by an operator having historical data as to what constitutes a burst. Alternatively the mobile device may store its own historical data and may generate the threshold based on a statistical analysis of its historical data.

Depending on the application the bandwidth spike may only be in one direction of the communications connection. Accordingly the allocation may be limited for either upload or for download. Accordingly the allocation may be for a balance of upload and download.

Quality of Service Optimization Another optimization is to allocate bandwidth to maximize quality of service. For example the optimizer could make a quality of service measurement for a first communications connection and a second communications connection. If the first communications connection had a substantially higher quality of service measurement the optimizer might maximize allocation to the first communications connection. Similarly if the second communications connection had a substantially higher quality of service measurement the optimizer might maximize allocation to the second communications connection. For example the optimizer might receive a measure of communications connection latency such as the time for the round trip of an internet protocol IP packet. Alternatively the optimizer might receive a latency measurement from a server from a cellular operator from one of the communications connections. Regardless of the source the optimizer might maximize allocation to the communications connection with the lowest latency.

Offloading Based on Data Rate Monetary Cost The optimizer may also optimize by minimizing data cost to the user. The mobile device may receive information regarding the monetary cost of data over a first communications connection and the monetary cost of data over a second communications connection. The optimizer could maximize bandwidth allocation on over the communications connection with the lowest monetary cost of data in this case reducing the overall data cost to the user.

Power Optimization The optimizer may also optimize by minimizing the power draw against a mobile devices battery. Specifically the optimizer could receive measurements of the power draw of a first communications connection and of a second communications connection. For example different radios will have different rates of power draw. For example a cellular radio which must transmit over longer distances may use significantly more power than a Wi Fi radio which need only transmit a few yards. The optimizer may receive measurements via a user profile via a static setting by a cellular operator or alternatively by dynamically measuring power draw via monitors . The optimizer could maximize bandwidth allocation on over the communications connection with the lowest power draw in this case reducing the overall power draw of the mobile device and thereby extending the power lifetime of the battery.

Tethering Counts One external measure to estimate bandwidth requirements is to count the number of devices tethered to a mobile device . Where a larger number of devices are tethered the optimizer may establish a larger number of communications connections. Where a smaller number of devices are tethered the optimizer may disconnect some of the communications connections.

Shutting Off Redundant Radios In some cases the optimizer may determine that a communications connection is not needed. For example where a user is primarily engaged in text services such as short message service SMS messaging that user does not use a large amount of bandwidth. On a mobile device with a first communications connection and a second communications connection active the optimizer may determine that the one communications connection is sufficient to map to the bandwidth requests. In this case the optimizer may shut the radio corresponding to the redundant second radio off thereby reducing overall power draw of the mobile device and thereby extending the power lifetime of the battery.

Failover The theme of creating and deallocating communications connections applies also to failover. Specifically an optimizer may make a quality of service measurement on a first communications connection and on a second communications connection. If the quality of service measurement for the second communications connection is significantly lower than the first communications connection the optimizer may simply turn off the second communications connection to favor the first communications connection with the higher quality of service measure. In the event the first communications connection did not have sufficient bandwidth to honor bandwidth requests the optimizer might store the previous quality of service measurement for the second communications connection and may opt to create a third communications connection anticipating that the third communications connection would have a higher quality of service than the second communications connection.

Although the subject matter has been described in language specific to structural features and or methodological acts it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather the specific features and acts described above are disclosed as example forms of implementing the claims.

