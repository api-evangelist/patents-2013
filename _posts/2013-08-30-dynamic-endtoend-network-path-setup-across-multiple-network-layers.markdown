---

title: Dynamic end-to-end network path setup across multiple network layers
abstract: A centralized controller provides dynamic end-to-end network path setup across multiple network layers. In particular, the centralized controller manages end-to-end network path setup that provisions a path at both the transport network layer (e.g., optical) and the service network layer (e.g., IP/MPLS). The centralized controller performs path computation for an optical path at the transport network layer and for a path at the service network layer that transports network traffic on the underlying optical transport path, based on information obtained by the centralized controller from the underlying network components at both layers.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09258238&OS=09258238&RS=09258238
owner: Juniper Networks, Inc.
number: 09258238
owner_city: Sunnyvale
owner_country: US
publication_date: 20130830
---
The disclosure relates to computer networks and more particularly to forwarding network traffic within computer networks.

A computer network is composed of a set of nodes and a set of links that connect one node to another. For instance a computer network may be composed of a set of routers while the set of links may be cables between the routers. When a first node in the network sends a message to a second node in the network the message may pass through many links and many nodes. The set of links and nodes that the message passes through while traveling from the first node to the second node is referred to as a path through the network.

Networks contain physical transport elements that are managed and arranged as needed to provide paths for transporting network data. For example a network may utilize various optical switching components so as to provide an underlying optical network for transporting network traffic. Once configured various higher level network services are transported over the optical paths such as Internet Protocol IP Virtual Private Network VPN pseudowires and others.

As one example many networks use label switching protocols for traffic engineering the network services provided via the underlying transport elements. In a label switching network label switching routers LSRs use Multi Protocol Label Switching MPLS signaling protocols to establish label switched paths LSPs which refer to defined packet flows carried on the underlying physical network elements and the physical paths provided by those elements. The LSRs receive MPLS label mappings from downstream LSRs and advertise MPLS label mappings to upstream LSRs. When an LSR receives traffic in the form of an MPLS packet from an upstream router it switches the MPLS label according to the information in its forwarding table and forwards the MPLS packet to the appropriate downstream LSR.

Today the management and arrangement of the physical transport paths e.g. the optical paths of a computer network and the traffic engineered flows e.g. MPLS paths of the network traffic traversing those physical paths are typically set up and controlled by different network administrative entities using different administrative systems. As a result in order to set up an MPLS path or other traffic engineering flow through a network the IP MPLS network administrative entity may first need to request the optical transport network administrative entity to provide and allocate network resources for an underlying optical path which may involve some delay and require additional coordination and resources.

In general techniques are described for dynamic end to end network path setup across multiple network layers. For example a single network element such as a centralized controller manages end to end network path setup by provisioning a path at both the transport network layer e.g. optical and the service network layer e.g. IP MPLS . The centralized controller performs path computation for a path at both the transport network layer and the service network layer based on information obtained from the underlying network components at both layers. Moreover based on the computed path the controller may automatically initiate allocation of a new physical path when necessary. Once connectivity is established the centralized controller further provisions the necessary network elements e.g. LSRs to provide the required traffic engineered services e.g. MPLS.

The techniques of this disclosure may provide one or more advantages. For example the techniques of this disclosure may provide more efficient use of network and administrative resources. Rather than optical paths being pre established and potentially only being used much later in time the techniques of this disclosure allow for dynamic setup of network paths on an as needed basis. Moreover the centralized controller can tear down optical paths when not needed thereby saving energy on lighting the optical path. This may allow for actual optical path usage that more accurately reflects the needs of customer devices.

In this way the central control may in some implementations provide complete control of all aspects of network paths provisioning from a single network element. In addition a centralized controller that manages multi layer path construction may offer optimization improvements such as in terms of path resiliency resource utilization and fault tolerance path diversity . The centralized controller described herein automates end to end path setup without necessarily requiring coordination between network administrative entities from two different network domains. The techniques may also allow for a closer binding and association of multi layer events and failure correlations e.g. alarms . By using information from multiple layers it is possible to determine that a failure observed in a higher layer is caused by a failure in the lower layer and then a service call can be directed to the correct team e.g. optical vs. MPLS .

In one aspect a method includes receiving by a centralized controller network device of a network a request for network connectivity between network sites sending by the centralized controller network device one or more messages containing a first set of parameters to establish an optical transport path for the requested network connectivity sending by the centralized controller network device one or more messages containing a second set of parameters to establish a traffic engineered service path for the requested network connectivity wherein the service path is established to send network traffic over the optical transport path and responsive to determining that both the optical transport path and the service path have been established sending by the centralized controller network device an indication that the request for network connectivity is granted to permit use of the service path and the optical transport path for sending network traffic between the network sites.

In another aspect a network device includes a network services interface to receive a request for network connectivity between network sites an optical layer module to send one or more messages containing a first set of parameters to establish an optical transport path for the requested network connectivity an Internet Protocol IP Multiprotocol Label Switching MPLS layer module to send one or more messages containing a second set of parameters to establish a traffic engineered service path for the requested network connectivity wherein the service path is established to send network traffic over the optical transport path and wherein responsive to determining that both the optical transport path and the service path have been established the network services interface sends an indication that the request for network connectivity is granted to permit use of the service path and the optical transport path for sending network traffic between the network sites.

In another aspect a computer readable storage medium includes instructions. The instructions cause a programmable processor of a centralized controller network device of a network to receive a request for network connectivity between network sites send one or more messages containing a first set of parameters to establish an optical transport path for the requested network connectivity send one or more messages containing a second set of parameters to establish a traffic engineered service path for the requested network connectivity wherein the service path is established to send network traffic over the optical transport path and responsive to determining that both the optical transport path and the service path have been established send an indication that the request for network connectivity is granted to permit use of the service path and the optical transport path for sending network traffic between the network sites.

The details of one or more examples are set forth in the accompanying drawings and the description below. Other features objects and advantages will be apparent from the description and drawings and from the claims.

Network devices are coupled by a number of physical and logical communication links that interconnect network devices to facilitate control and data communication between network devices . Physical links A E of network may include for example optical fibers Ethernet PHY Synchronous Optical Networking SONET Synchronous Digital Hierarchy SDH Lambda or other Layer 2 data links that include packet transport capability. The remainder of this description assumes that physical links A E are optical fibers optical fibers . Network also includes one or more logical links A B such as for example pseudowires an Ethernet Virtual local area network VLAN a Multi Protocol Label Switching MPLS Label Switched Path LSP or an MPLS traffic engineered TE LSP. The remainder of this description assumes that logical links A B are MPLS LSPs and these will be referred to as LSPs A B LSPs . Network system may also include additional components optical fibers and communication links that are not shown.

Each of network devices may represent devices such as routers switches repeaters optical cross connects OXCs optical add drop multiplexers OADMs multiplexing device or other types of devices within network that forward network traffic e.g. optical data. For example network devices may be layer three L3 routers optically connected by an intermediate OXC.

In the example of system may include one or more source devices not shown that send network traffic into network e.g. through an access network not shown and one or more receiver devices not shown that receive the network traffic from network devices e.g. through an access network not shown . The network traffic may be for example video or multimedia traffic. Network may be a service provider network that operates as a private network that provides packet based network services to receiver devices not shown which may be subscriber devices for example. Receiver devices may be for example any of personal computers laptop computers or other types of computing device associated with subscribers. Subscriber devices may comprise for example mobile telephones laptop or desktop computers having e.g. a 3G wireless card wireless capable netbooks video game devices pagers smart phones personal data assistants PDAs or the like. Subscriber devices may run a variety of software applications such as word processing and other office support software web browsing software software to support voice calls video games videoconferencing and email among others.

Network management system NMS device may be a computing device that provides a platform for network management software for managing the devices within network . For example NMS device may comprise a server a workstation a personal computer a laptop computer a tablet computer a smartphone or another type of computing device.

Each of network devices may comprise multiple line cards not shown also referred to as interface cards. The term line card may refer to a modular electronic circuit board that provides one or more physical interfaces between a network device and a communications link such as an optical fiber. Each line card of network devices is associated with one or more ports. Each of the ports provides a physical connection between a network device and an optical fiber. NMS may also include multiple line cards. Each line card of NMS may be associated with one or more ports.

In the simplified example of optical fiber A connects one of the ports of one of the line cards of network device A to one of the ports of one of the line cards of network device C for example. Similarly other optical fibers connect one of the ports of one of the line cards of other network devices to one of the ports of one of the line cards of another one of network devices . Thus network devices and optical fibers form at least part of optical network .

Network devices are configured to output optical signals onto optical fibers . In some examples the optical signals output by network devices have different carrier wavelengths. Network devices may modulate the carrier wavelengths of the optical signals in order to convey data. In some examples the optical signals may conform to a Synchronous Optical Networking SONET protocol or a Synchronous Digital Hierarchy SDH protocol.

When network devices A and B output wavelength modulated optical signals on optical fibers A and B for example a receiving one of network devices for example network device C receives the optical signals. In some aspects the receiving network device C provides a cross connect that multiplexes optical signals received on optical fibers A and B into a single multiplexed optical signal that network device C outputs on optical fiber C for example. The multiplexed optical signal may include multiple optical signals having different carrier wavelengths. In some examples network device C may receive an optical signal from network device A on optical fiber A and network device C demultiplexes the optical signal and outputs separate optical signals on optical fibers C and D.

To provide centralized control of the optical transport network and the IP MPLS network controller obtains data indicating an accurate topology of the optical network of service provider network including the particular ports that are used to interconnect the infrastructure devices within the optical network and controller also obtains data indicating an accurate topology of the IP MPLS network of service provider network including links nodes and LSPs within the IP MPLS network.

For example the data indicating the topology of the optical network of service provider network may include data that indicate that network device A is physically connected to network device C. In another example the data indicating the topology of optical network may include data that indicate that optical fiber E connects a given line card and port of network device D to a given line card and port of network device E.

Controller can use knowledge of the topology of the optical network when establishing routes through the optical network diagnosing and remedying problems in the optical network and for performing other network management tasks. Controller may determine the topology of the optical network in various ways. In some examples controller may obtain the data indicating topology of the optical network by network devices sending wavelength modulated optical signals on various ports of the network devices . The wavelength modulated optical signal sent on a given port of the sending device encodes information that identifies the sending device and the given port. If a device receives the modulated optical signal on a given port the receiving device demodulates the optical signal and outputs a report message to a network management system NMS . The report message indicates that an optical fiber connects the given port of the receiving device to the given port of the sending device. The NMS may use such messages to generate topology data for the optical network. In other examples controller may obtain the data indicating topology of the optical network by exchanging with an NMS messages having optical pulse patterns that the NMS maps to one or more network devices.

Controller can use knowledge of the topology of the IP MPLS network when establishing routes through the IP MPLS network diagnosing and remedying problems in the IP MPLS network and for performing other network management tasks. For example controller can learn topology of the network using an interior gateway protocol for example. Details of topology learning are described in further details below.

At the direction of controller or based on local configuration network devices may establish LSPs along selected paths for concurrently sending network traffic from ingress network devices A B respectively to egress network device E. Network devices A B can dynamically recalculate LSPs e.g. responsive to detecting changes to the topology of network or at the direction of controller . MPLS LSPs are established as a logical layer over the physical optical transport layer components of network . e.g. using an MPLS signaling protocol such as for example the Label Distribution Protocol LDP Resource ReserVation Protocol with Traffic Engineering extensions RSVP TE RSVP TE Border Gateway Protocol Labeled Unicast BGP LU or other MPLS signaling protocol.

In some aspects network devices may be IP routers that implement MPLS techniques and operate as label switching routers LSRs . For example ingress devices can assign a label to each incoming packet received from source device based on the destination of the packets and the forwarding equivalence classes of the labels before forwarding the packet to a next hop transit node . Each network device makes a forwarding selection and determines a new substitute label by using the label found in the incoming packet as a reference to a label forwarding table that includes this information. The paths taken by packets that traverse the network in this manner are referred to as LSPs.

In some examples controller receives a connectivity request from the service provider s NMS . For example the connectivity request may request a path from router A to router E. In some examples the connectivity request may indicate an amount of bandwidth and or other constraint for the path. Controller may in some examples maintain one or more topology databases that contain information about IP MPLS links nodes and or information about optical links nodes. Controller determines based on information stored in the topology database if there is already an existing IP MPLS path between the requested sites that can be reused to accommodate the connectivity request. In some aspects where an IP MPLS path already exists controller may update path reservations of LSP A to increase an amount of reserved bandwidth on LSP A to accommodate the connectivity request such as by causing an ingress router A to send a new RSVP TE PATH message along the requested path. Responsive to determining that an IP MPLS path already exists that can accommodate the connectivity request controller may indicate to NMS that the connectivity request is granted such as by sending connectivity confirmation message to NMS .

If controller determines that no IP MPLS path exists between the requested sites controller may then determine whether an optical path from router A to router E is already in place such that an IP MPLS path can be established over the existing optical network topology. For example controller may reference a topology database stored locally or may interact with an external optical topology management device to obtain this information. If an optical path is already in place controller can signal the desired IP MPLS path e.g. LSP A over the existing optical path. Controller may indicate to NMS that the connectivity request is granted such as by sending connectivity confirmation message to NMS .

If an optical path is not already in place controller may compute an optical path based on stored optical network topology information and program an optical path between the requested sites such as by using Generalized Multi Protocol Label Switching GMPLS or other mechanism. Alternatively controller may request an external optical topology management device to compute the optical path and program the needed optical path between the requested sites and the optical topology management device may in turn compute and program the optical path between the requested sites such as by using GMPLS or other mechanism. After the optical path is programmed controller can signal the desired IP MPLS path e.g. LSP A over the existing optical path. Controller may indicate to the NMS that the connectivity request is granted such as by sending connectivity confirmation message to NMS .

After establishing the LSPs ingress network devices A for example may receive data traffic from a source device not shown and ingress network devices A can forward the data traffic along LSP A. The data traffic is ultimately received along LSP A at network device E and network device E may pop remove the MPLS label s from the received traffic and forward the decapsulated traffic to a receiver device not shown .

When controller determines there is no need of connectivity between sites controller can tear down the unused optical paths or optical path segments. In this manner controller can dynamically configure both the optical and MPLS paths on an as need basis.

Controller includes a control unit coupled to network interfaces A B network interfaces to exchange packets with other network devices by inbound links and outbound links . Control unit may include one or more processors not shown in that execute software instructions such as those used to define a software or computer program stored to a computer readable storage medium again not shown in such as non transitory computer readable mediums including a storage device e.g. a disk drive or an optical drive or a memory such as Flash memory or random access memory RAM or any other type of volatile or non volatile memory that stores instructions to cause the one or more processors to perform the techniques described herein. Alternatively or additionally control unit may comprise dedicated hardware such as one or more integrated circuits one or more Application Specific Integrated Circuits ASICs one or more Application Specific Special Processors ASSPs one or more Field Programmable Gate Arrays FPGAs or any combination of one or more of the foregoing examples of dedicated hardware for performing the techniques described herein.

Control unit provides an operating environment for network services applications IP MPLS layer element and optical layer element . In the example of IP MPLS layer element includes topology module A path computation module A traffic engineering module A and path provisioning module A. Optical layer element includes topology module B path computation module B and path provisioning module B. Although shown as separate modules associated with the separate layers in some examples one or more of path computation modules A B topology modules A B and path provisioning modules A B may be a single module shared between IP MPLS layer element and optical layer element . Further although shown as separated into distinct path computation path provisioning topology and traffic engineering modules in some examples one or more of these different modules may be combined within a given layer of controller .

In some examples the modules of controller may be implemented as one or more processes executing on one or more virtual machines of one or more servers. That is while generally illustrated and described as executing on a single controller aspects of these modules may be delegated to other computing devices.

Network services applications may communicate with NMS to receive a connectivity request such as for setting up connectivity between two locations or network sites. IP MPLS layer element of controller communicates via network interface A to direct routers to establish one or more of LSPs A B LSPs or to directly install forwarding state to routers for LSPs . Optical layer element of controller communicates via network interface B to direct program one or more of optical fibers .

Network services applications represent one or more processes that provide services to clients of a service provider network that includes controller to manage connectivity in the path computation domain. Network services applications may provide for instance include Voice over IP VoIP Video on Demand VOD bulk transport walled open garden IP Mobility Subsystem IMS and other mobility services and Internet services to clients of the service provider network. Networks services applications may require services provided by one or both of path computation modules A B such as node management session management and policy enforcement. Each of network services applications may include a client interface not shown by which one or more client applications request services. For example controller may receive a request such as connectivity request from NMS via the client interface and may send a message such as connectivity confirmation message . The client interface may represent a command line interface CLI or graphical user interface GUI for instance. The client interface may also or alternatively provide an application programming interface API such as a web service to client applications.

In some examples network services applications may issue path requests to one or both of path computation modules A B path computation modules of optical layer element and IP MPLS layer element to request paths in a path computation domain controlled by controller . Path computation modules accept path requests from network services applications to establish paths between the endpoints over the path computation domain. In some aspects path computation modules may reconcile path requests from network services applications to multiplex requested paths onto the path computation domain based on requested path parameters and anticipated network resource availability.

To intelligently compute and establish paths through the IP MPLS layer path computation domain IP MPLS layer element includes topology module A to receive topology information describing available resources of the path computation domain including network devices interfaces thereof and interconnecting communication links. Similarly to intelligently compute and establish paths through the optical layer path computation domain optical layer element includes topology module B to receive topology information describing available resources of the path computation domain including optical components e.g. network devices and optical fibers .

For example network services applications may receive a path request e.g. path request from NMS for a path between network devices A and E. IP MPLS layer element and optical layer element of controller may cooperate to service the path request. Topology module A may determine whether an IP MPLS path already exists between network devices A and E e.g. an LSP . If not topology module B of optical layer element may determine whether an optical path exists between the requested sites such that an IP MPLS path can be established over the existing optical network topology. For example topology module B may access a locally stored topology database to determine whether the necessary optical fibers are turned on and operational on a path between the requested sites.

If an optical path is already in place path computation module A can compute the desired IP MPLS path and path provisioning module can signal the desired IP MPLS path e.g. one of LSPs over the existing optical path. Path computation module A of IP MPLS layer element may compute requested paths through the path computation domain such as based on stored topology information obtained by topology module A. In general paths are unidirectional. Upon computing paths path computation module A may schedule the paths for provisioning by path provisioning module A. A computed path includes path information usable by path provisioning module A to establish the path in the network. In some examples path provisioning module A may install MPLS labels and next hops directly in the routing information and or forwarding plane of network devices . In other examples traffic engineering module A may provide an explicit route object ERO to an ingress network device and configure the ingress network device to signal a path using the ERO such as using RSVP TE. The path computation module A computing paths based on traffic engineering constraints perhaps provided by TE module A and the path provisioning module A is converting the path into an ERO for TE paths or just labels for direct installation on the network devices .

If an optical path is not already in place path computation module B may compute an optical path based on stored optical network topology information obtained from topology module B and path provisioning module B can program an optical path between the requested sites such as by using Generalized Multi Protocol Label Switching GMPLS or other mechanism. For example programming the optical path may include path provisioning module B instructing components of the optical network along the computed paths to turn on optical signals e.g. light on one or more of optical fibers and or to enable one or more additional different wavelengths on an optical port associated with one of optical fibers .

Topology module B of optical layer can keep track of resource availability in the optical network system such as bandwidth multiplexing capability ports shared risk link group SRLG and other characteristics of optical network components. Topology module B can in some examples collect traffic statistics from network elements such as OXCs and can aggregate and or analyze the traffic statistics. Path computation module B of optical layer may also analyze the traffic statistics to determine whether and how to reconfigure network elements for ensuring that the necessary optical paths are set up. Path provisioning module B may make use of wavelength assignment algorithm s to select a wavelength for a given light path either after an optical route has been determined or in parallel with finding a route.

Path computation module B can aid in computing and or establishing an optical path that meets certain traffic engineering constraints and or connection parameters such as minimum available bandwidth SRLG and the like as specified by the path request.

Path provisioning module B may include GMPLS control plane functions and services such as connection management and connection restoration for example. In some aspects path provisioning module B can provide connection creation modification status query and deletion functions in the optical network layer. Path provisioning module B can provide information to optical network elements that is used for signaling among corresponding nodes to establish the connection on the computed path. Path provisioning module B may in some examples output messages containing one or more parameters that the network devices can use to establish a connection that will be used as an optical transport path to transfer data between a source destination node pair. For example for establishing such a connection a light path needs to be established by allocating the same wavelength throughout the route of the transmitted data or selecting the proper wavelength conversion capable nodes across the path. Light paths can span more than one fiber link and may be entirely optical from end to end in some examples.

Path provisioning module B may send messages to the optical network devices with the parameters being the allocated wavelength for example for setting up the optical transport path. In some examples path provisioning module B may send messages specifying generalized label objects that include a generalized label request the generalized label an explicit label control and a protection flag. Upon the optical network devices e.g. OXCs receiving the generalized label objects the OXCs may translate label assignments into corresponding wavelength assignments and set up generalized LSPs G LSPs using their local control interfaces to other optical switching devices.

In some examples GMPLS can support traffic engineering by allowing the node at the network ingress to specify the route that a G LSP will take by using explicit light path routing. An explicit route is specified by the ingress as a sequence of hops and wavelengths that must be used to reach the egress. In some examples path provisioning module B can send messages to directly configure each optical network component along a light path whereas in other examples path provisioning module B can send messages to an ingress optical network device to trigger the ingress device to perform the signaling of the light path. For example in some examples path provisioning module B of optical layer may provide the explicit light path route similar to an ERO to the ingress optical network devices.

In some aspects path provisioning module B can implement protection by establishing one or more pre signaled backup paths for the optical network connections for fast reroute failure protection in which case the protection flag may be set.

IP MPLS layer element and optical layer element of controller can communicate with each other to facilitate the setup and teardown of optical paths and LSPs established over the optical paths in a network. In some examples path computation module B of optical layer element may notify path computation module A of IP MPLS layer element that an optical transport path is in place and path computation module A may in turn proceed with computing and signaling an IP MPLS path over the underlying optical transport path.

Provisioning a path may require path validation prior to committing the path to provide for packet transport. For example path provisioning modules may wait to receive a confirmation from each of the relevant network devices that forwarding state for a path has been installed before allowing network traffic to be sent on the path. Upon receiving confirmation from optical layer element and or IP MPLS layer element that the requested path is ready for network traffic to be sent on it network services applications of controller can indicate to the corresponding network service application on NMS that the connectivity request is granted such as by sending connectivity confirmation message .

In addition when IP MPLS layer element and or optical layer element determine there is no longer any need of connectivity between sites components of IP MPLS layer element and or optical layer element can tear down the unused optical paths or optical path segments over the optical fibers. For example controller may also receive path withdrawal messages via network services applications and in response IP MPLS layer element and or optical layer element may determine if there are no longer any requestors that are using the path. As another example topology modules A B may analyze network traffic statistics on various paths in the IP MPLS and optical layers and may determine that network traffic is no longer being sent on one or more paths or optical path segments. In response path provisioning modules may tear down the paths in the network. Tearing down an optical path segment may include instructing components of the optical network to turn off optical signals light on one or more of optical fibers . In this manner controller can dynamically configure both the optical and MPLS paths on an as need basis. Turning off optical fibers when not in use can save energy and associated costs.

Path computation module B includes data structures to store path information for computing and establishing requested paths. These data structures include constraints path requirements operational configuration and path export . Network services applications may invoke northbound API to install query data from these data structures. Constraints represent a data structure that describes external constraints upon path computation. Constraints allow network services applications to e.g. modify optical path segment attributes before path computation module B computes a set of paths. Network services applications may specify attributes needed in path links and this will effect resulting traffic engineering computations. In such instances optical path segment attributes may override attributes received from topology indication module and remain in effect for the duration of the node attendant port in the topology. Operational configuration represents a data structure that provides configuration information to optical layer element to configure the path computation algorithm used by path engine .

Path requirements represent an interface that receives path requests for paths to be computed by path computation module B and provides these path requests including path requirements to path engine for computation. Path requirements may be received via northbound API . In such instances a path requirement message may include a path descriptor having an ingress node identifier and egress node identifier for the nodes terminating the specified path along with request parameters such as Class of Service CoS value and bandwidth. A path requirement message may add to or delete from existing path requirements for the specified path. For example a path requirement message may indicate that a path is needed that more bandwidth is needed on an existing path that less bandwidth is needed or that the path is not needed at all.

Topology module B includes topology indication module to handle topology discovery and where needed to maintain control channels between optical layer element and nodes of the path computation domain. Topology indication module may include an interface to describe received topologies to path computation module B. In some examples topology indication module may poll the network devices periodically to determine which components are up and which are down.

In some examples topology indication module may use a topology discovery protocol to describe the path computation domain topology to path computation module B. Topology indication module may for example obtain the data indicating topology of the optical network by network devices sending wavelength modulated optical signals on various ports of the network devices . In other examples topology indication module may obtain the data indicating topology of the optical network by exchanging with an NMS messages having optical pulse patterns that the NMS maps to one or more network devices. Examples for determining topology of an optical network are described in U.S. application Ser. No. 13 288 856 filed Nov. 3 2011 entitled TOPOLOGY DETERMINATION FOR AN OPTICAL NETWORK the entire contents of which are incorporated by reference herein.

Topology data stores topology information received by topology indication module for a network that constitutes a path computation domain for controller to a computer readable storage medium not shown . Topology data may include one or more link state databases LSDBs where link and node data is received in routing protocol advertisements received from a topology server and or discovered by link layer entities such as an overlay controller and then provided to topology indication module . In some instances an operator may configure traffic engineering or other topology information within topology data via a client interface.

Path engine accepts the current topology snapshot of the path computation domain in the form of topology data and may compute using topology data CoS aware traffic engineered paths between nodes as indicated by configured node specific policy constraints and or through dynamic networking with external modules via APIs. Path engine may further compute detours for all primary paths on a per CoS basis according to configured failover and capacity requirements as specified in operational configuration and path requirements respectively .

In general to compute a requested path path engine determines based on topology data and all specified constraints whether there exists a path in the layer that satisfies the TE specifications for the requested path for the duration of the requested time. Path engine may use the Djikstra constrained shortest path first CSPF path computation algorithms for identifying satisfactory paths though the path computation domain. If there are no TE constraints path engine may revert to shortest path first SPF algorithm. If a satisfactory computed path for the requested path exists path engine provides a path descriptor for the computed path to path manager to establish the path using path provisioning module B. A path computed by path engine may be referred to as a computed path until such time as path provisioning module A programs the scheduled path into the network whereupon the scheduled path becomes an active or committed path. A scheduled or active path is a temporarily dedicated bandwidth channel for the scheduled time in which the path is or is to become operational to transport flows.

Path manager establishes computed scheduled paths using path provisioning module B which in the example of includes GMPLS module . In some examples path manager may select a set of parameters based on the computed optical transport path and path provisioning module B outputs one or more messages containing a set of parameters to establish an optical transport path for the requested network connectivity. GMPLS module may program optical components of network devices of the path computation domain in accordance with the parameters. For example GMPLS module may send messages to network devices using GMPLS to program the optical components such as by sending instructions to turn on optical signals at one or more wavelengths on optical fibers . In some examples GMPLS module may send messages including wavelength labels for signaling an optical path. In other examples GMPLS module may send messages to an ingress network device with information and instructions to allow the ingress network device to signal the optical path. Further details on GMPLS are described in T. Otani Generalized Labels for Lambda Switch Capable LSC Label Switching Routers IETF RFC 6205 March 2011 and D. Papadimitriou Generalized Multi Protocol Label Switching GMPLS Signaling Extensions for G.709 Optical Transport Networks Control Network Working Group RFC 4328 January 2006 the entire contents of each of which are incorporated by reference herein.

Path provisioning module B may in addition or alternatively implement other interface types such as a Simple Network Management Protocol SNMP interface path computation element protocol PCEP interface a Device Management Interface DMI a CLI Interface to the Routing System I2RS or any other node configuration interface. In some examples proprietary mechanisms may be used for optical path configuration. In some examples GMPLS module establishes communication sessions with network devices to install optical configuration information to receive path setup event information such as confirmation that received optical configuration information has been successfully installed or that received optical configuration information cannot be installed indicating optical configuration failure . Additional details regarding PCEP may be found in J. Medved et al. U.S. patent application Ser. No. 13 324 861 PATH COMPUTATION ELEMENT COMMUNICATION PROTOCOL PCEP EXTENSIONS FOR STATEFUL LABEL SWITCHED PATH MANAGEMENT filed Dec. 13 2011 and in Path Computation Element PCE Communication Protocol PCEP Network Working Group Request for Comment 5440 March 2009 the entire contents of each of which being incorporated by reference herein. Additional details regarding I2RS are found in Interface to the Routing System Framework Network Working Group Internet draft Jul. 30 2012 which is incorporated by reference as if fully set forth herein.

In this manner path provisioning module B of controller can output one or more messages to cause an optical transport path to be established or activated to facilitate the requested network connectivity.

Path computation module A includes data structures to store path information for computing and establishing requested paths. These data structures include constraints path requirements operational configuration and path export . Network services applications may invoke northbound API to install query data from these data structures. Constraints represent a data structure that describes external constraints upon path computation. Constraints allow network services applications to e.g. use links with specific attributes before path computation module A computes a set of paths. For examples Radio Frequency RF modules not shown may edit links to indicate that resources are shared between a group and resources must be allocated accordingly. Network services applications may specify required attributes of links to effect resulting traffic engineering computations. In such instances link attributes may override attributes received from topology indication module and remain in effect for the duration of the node attendant port in the topology. Operational configuration represents a data structure that provides configuration information to path computation element to configure the path computation algorithm used by path engine .

Path requirements represent an interface that receives path requests for paths to be computed by path computation module A and provides these path requests including path requirements to path engine for computation. Path requirements may be received via northbound API . In such instances a path requirement message may include a path descriptor having an ingress node identifier and egress node identifier for the nodes terminating the specified path along with request parameters such as Class of Service CoS value and bandwidth. A path requirement message may add to or delete from existing path requirements for the specified path. For example a path requirement message may indicate that a path is needed that more bandwidth is needed on an existing path that less bandwidth is needed or that the path is not needed at all.

Topology module A includes topology indication module to handle topology discovery and where needed to maintain control channels between path computation element and nodes of the path computation domain. Topology indication module may include an interface to describe received topologies to path computation module A.

Topology indication module may use a topology discovery protocol to describe the path computation domain topology to path computation module A. Topology indication module may communicate with a topology server such as a routing protocol route reflector to receive topology information for a network layer of the network. Topology indication module may include a routing protocol process that executes a routing protocol to receive routing protocol advertisements such as Open Shortest Path First OSPF or Intermediate System to Intermediate System IS IS link state advertisements LSAs or Border Gateway Protocol BGP UPDATE messages. Topology indication module may in some instances be a passive listener that neither forwards nor originates routing protocol advertisements. In some instances topology indication module may alternatively or additionally execute a topology discovery mechanism such as an interface for an Application Layer Traffic Optimization ALTO service. Topology indication module may therefore receive a digest of topology information collected by a topology server e.g. an ALTO server rather than executing a routing protocol to receive routing protocol advertisements directly. In some examples topology indication module may poll the network devices periodically to determine which components are up and which are down.

In some examples topology indication module receives topology information that includes traffic engineering TE information. Topology indication module may for example execute Intermediate System to Intermediate System with TE extensions IS IS TE or Open Shortest Path First with TE extensions OSPF TE to receive TE information for advertised links. Such TE information includes one or more of the link state administrative attributes and metrics such as bandwidth available for use at various LSP priority levels of links connecting routers of the path computation domain. In some instances indication module executes Border Gateway Protocol for Traffic Engineering BGP TE to receive advertised TE information for inter autonomous system and other out of network links. Additional details regarding executing BGP to receive TE info are found in U.S. patent application Ser. No. 13 110 987 filed May 19 2011 and entitled DYNAMICALLY GENERATING APPLICATION LAYER TRAFFIC OPTIMIZATION PROTOCOL MAPS which is incorporated herein by reference in its entirety.

Traffic engineering database TED stores topology information received by topology indication module for a network that constitutes a path computation domain for controller to a computer readable storage medium not shown . TED may include one or more link state databases LSDBs where link and node data is received in routing protocol advertisements received from a topology server and or discovered by link layer entities such as an overlay controller and then provided to topology indication module . In some instances an operator may configure traffic engineering or other topology information within TED via a client interface.

Path engine accepts the current topology snapshot of the path computation domain in the form of TED and may compute using TED CoS aware traffic engineered paths between nodes as indicated by configured node specific policy constraints and or through dynamic networking with external modules via APIs. Path engine may further compute detours for all primary paths on a per CoS basis according to configured failover and capacity requirements as specified in operational configuration and path requirements respectively .

In general to compute a requested path path engine determines based on TED and all specified constraints whether there exists a path in the layer that satisfies the TE specifications for the requested path for the duration of the requested time. Path engine may use the Djikstra constrained shortest path first CSPF path computation algorithms for identifying satisfactory paths though the path computation domain. If there are no TE constraints path engine may revert to shortest path first SPF algorithm. If a satisfactory computed path for the requested path exists path engine provides a path descriptor for the computed path to path manager to establish the path using path provisioning module . A path computed by path engine may be referred to as a computed path until such time as path provisioning module A programs the scheduled path into the network whereupon the scheduled path becomes an active or committed path. A scheduled or active path is a temporarily dedicated bandwidth channel for the scheduled time in which the path is or is to become operational to transport flows.

Path manager establishes computed scheduled paths using path provisioning module A which in the example of includes forwarding information base FIB configuration module illustrated as FIB CONFIG. policer configuration module illustrated as POLICER CONFIG. and CoS scheduler configuration module illustrated as COS SCHEDULER CONFIG. . Path manager may select a set of parameters based on the computed optical transport path. In some examples path provisioning module A outputs one or more messages containing the set of parameters to establish a traffic engineered service path for the requested network connectivity wherein the service path is established to send network traffic over the previously established optical transport path.

FIB configuration module programs forwarding information to data planes of network devices of the path computation domain. The FIB of network devices includes the MPLS switching table the detour path for each primary LSP the CoS scheduler per interface and policers at LSP ingress. FIB configuration module may implement for instance a software defined networking SDN protocol such as the OpenFlow protocol to provide and direct the nodes to install forwarding information to their respective data planes. Accordingly the FIB may refer to forwarding tables in the form of for instance one or more OpenFlow flow tables each comprising one or more flow table entries that specify handling of matching packets.

FIB configuration module may in addition or alternatively implement other interface types such as a Simple Network Management Protocol SNMP interface path computation element protocol PCEP interface a Device Management Interface DMI a CLI Interface to the Routing System I2RS or any other node configuration interface. FIB configuration module interface establishes communication sessions with network devices to install forwarding information to receive path setup event information such as confirmation that received forwarding information has been successfully installed or that received forwarding information cannot be installed indicating FIB configuration failure . Additional details regarding PCEP may be found in J. Medved et al. U.S. patent application Ser. No. 13 324 861 PATH COMPUTATION ELEMENT COMMUNICATION PROTOCOL PCEP EXTENSIONS FOR STATEFUL LABEL SWITCHED PATH MANAGEMENT filed Dec. 13 2011 and in Path Computation Element PCE Communication Protocol PCEP Network Working Group Request for Comment 5440 March 2009 the entire contents of each of which being incorporated by reference herein. Additional details regarding I2RS are found in Interface to the Routing System Framework Network Working Group Internet draft Jul. 30 2012 which is incorporated by reference as if fully set forth herein.

FIB configuration module may add change i.e. implicit add or delete forwarding table entries in accordance with information received from path computation module A. In some examples a FIB configuration message from path computation module A to FIB configuration module may specify an event type add or delete a node identifier a path identifier one or more forwarding table entries each including an ingress port index ingress label egress port index and egress label and a detour path specifying a path identifier and CoS mode.

In this manner path provisioning module A of controller can output one or more messages to cause a service path for the requested network connectivity to be established wherein the service path is established so as to send network traffic over the optical transport path.

In some examples policer configuration module may be invoked by path computation module to request a policer be installed on a particular aggregation node or access node for a particular LSP ingress. As noted above the FIBs for aggregation nodes or access nodes include policers at LSP ingress. Policer configuration module may receive policer configuration requests. A policer configuration request message may specify an event type add change or delete a node identifier an LSP identifier and for each class of service a list of policer information including CoS value maximum bandwidth burst and drop remark. FIB configuration module configures the policers in accordance with the policer configuration requests.

In some examples CoS scheduler configuration module may be invoked by path computation module to request configuration of CoS scheduler on the aggregation nodes or access nodes. CoS scheduler configuration module may receive the CoS scheduler configuration information. A scheduling configuration request message may specify an event type change a node identifier a port identity value port index and configuration information specifying bandwidth queue depth and scheduling discipline for instance.

Controller receives a connectivity request from the service provider s NMS . For example the connectivity request may request a path from router A to router E. Controller may in some examples maintain one or more topology databases that contain information about IP MPLS links nodes and or information about optical links nodes. Controller determines based on information stored in the topology database if there is already an existing IP MPLS path between the requested sites that can be reused to accommodate the connectivity request . In some aspects where an IP MPLS path already exists e.g. LSP A of controller may update path reservations of LSP A to increase an amount of reserved bandwidth on LSP A to accommodate the connectivity request such as by causing an ingress router A to send a new RSVP TE PATH message along the requested path. Responsive to determining that an IP MPLS path already exists that can accommodate the connectivity request YES branch of controller may indicate to NMS that the connectivity request is granted such as by sending connectivity confirmation message .

If controller determines that no IP MPLS path exists between the requested sites NO branch of controller may then determine whether an optical path from router A to router E is already in place such that an IP MPLS path can be established over the existing optical network topology. For example controller may reference a topology database stored locally or may interact with an external optical topology management device to obtain this information. If an optical path is already in place YES branch of controller can signal the desired IP MPLS path e.g. LSP A over the existing optical path . Controller may indicate to NMS that the connectivity request is granted such as by sending connectivity confirmation message .

If an optical path is not already in place NO branch of controller may compute an optical path based on stored optical network topology information and program an optical path between the requested sites such as by using Generalized Multi Protocol Label Switching GMPLS or other mechanism. Alternatively controller may request an external optical topology management device to compute the optical path and program the needed optical path between the requested sites and the optical topology management device may in turn compute and program the optical path between the requested sites such as by using GMPLS or other mechanism. After the optical path is programmed controller can signal the desired IP MPLS path e.g. LSP A over the existing optical path . Controller may indicate to the NMS that the connectivity request is granted such as by sending connectivity confirmation message .

When controller determines there is no need of connectivity between sites controller can tear down the unused optical paths or optical path segments . In this manner controller can dynamically configure both the optical and MPLS paths on an as need basis.

The techniques described in this disclosure may be implemented at least in part in hardware software firmware or any combination thereof. For example various aspects of the described techniques may be implemented within one or more processors including one or more microprocessors digital signal processors DSPs application specific integrated circuits ASICs field programmable gate arrays FPGAs or any other equivalent integrated or discrete logic circuitry as well as any combinations of such components. The term processor or processing circuitry may generally refer to any of the foregoing logic circuitry alone or in combination with other logic circuitry or any other equivalent circuitry. A control unit comprising hardware may also perform one or more of the techniques of this disclosure.

Such hardware software and firmware may be implemented within the same device or within separate devices to support the various operations and functions described in this disclosure. In addition any of the described units modules or components may be implemented together or separately as discrete but interoperable logic devices. Depiction of different features as modules or units is intended to highlight different functional aspects and does not necessarily imply that such modules or units must be realized by separate hardware or software components. Rather functionality associated with one or more modules or units may be performed by separate hardware or software components or integrated within common or separate hardware or software components.

The techniques described in this disclosure may also be embodied or encoded in a computer readable medium such as a computer readable storage medium containing instructions. Instructions embedded or encoded in a computer readable medium may cause a programmable processor or other processor to perform the method e.g. when the instructions are executed. Computer readable media may include non transitory computer readable storage media and transient communication media. Computer readable storage media which is tangible and non transitory may include random access memory RAM read only memory ROM programmable read only memory PROM erasable programmable read only memory EPROM electronically erasable programmable read only memory EEPROM flash memory a hard disk a CD ROM a floppy disk a cassette magnetic media optical media or other computer readable storage media. It should be understood that the term computer readable storage media refers to physical storage media and not signals carrier waves or other transient media.

Various aspects of this disclosure have been described. These and other aspects are within the scope of the following claims.

