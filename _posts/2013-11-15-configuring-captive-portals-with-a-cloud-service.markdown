---

title: Configuring captive portals with a cloud service
abstract: Embodiments provision captive portals on network access points (NAPs). In response to a request from a NAP owner, a cloud service associates a NAP with the NAP owner and provides a control channel for configuring the NAP. The NAP owner inputs configuration settings describing the captive portal. The cloud service processes the configuration settings to generate configuration data. The cloud service transmits the configuration data to the NAP. The NAP applies the configuration data to configure the NAP. Some embodiments configure Wi-Fi hotspots with captive portals for gated access to the Internet.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09369342&OS=09369342&RS=09369342
owner: MICROSOFT TECHNOLOGY LICENSING, LLC
number: 09369342
owner_city: Redmond
owner_country: US
publication_date: 20131115
---
The availability of network access points such as wireless fidelity Wi Fi hotspots has increased significantly. Many of these Wi Fi hotspots are gated and require user intervention for connection to the Internet or other networks via click through interfaces. For example when a user of a mobile device accesses the Internet at a hotel the mobile device is redirected by the Wi Fi hotspot to a captive portal web page. The captive portal web page may present advertisements receive acceptance of terms and or conditions of use present confirmation screens accept text input and the like before allowing the user to connect to the Internet. Such captive portal functionality however is not enabled by default with the Wi Fi hotspots. Further creating and configuring the captive portals remains a cumbersome and difficult task that is often left to the owner of a business wanting to provide Wi Fi access to customers.

Embodiments of the disclosure provision a captive portal associated with a network access point NAP . A cloud service receives from a NAP owner device a NAP identifier and a NAP owner identifier. The cloud service provides a control channel to the NAP owner device and receives from the NAP owner device via the provided control channel configuration settings for a captive portal associated with the NAP. The captive portal provides access to a network. The cloud service processes the received configuration settings to generate configuration data for the NAP. The cloud service transmits the generated configuration data from the cloud service to the NAP. The NAP applies the transmitted configuration data to configure the NAP.

This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used as an aid in determining the scope of the claimed subject matter.

Referring to the figures embodiments of the disclosure enable setup configuration and or maintenance of captive portals implemented on network access points NAPs via a cloud service . Setup of the captive portal includes for example associating a new NAP or a new captive portal with a NAP owner and or NAP owner device . Configuration includes for example defining access characteristics of the captive portal . Maintenance includes for example monitoring and or filtering network traffic based on the defined access characteristics viewing log files monetizing network access and the like.

In some embodiments the cloud service provides authentication and or authorization services to the NAP . The cloud service may also attempt to monetize the network access on behalf of the NAP owner if the NAP provides access to a particular user group e.g. subscribers of service providers . The cloud service may also enable the NAP to share access through the captive portal among different devices without having each device authenticate separately e.g. mobile telephone tablet gaming console such as with a token or other shared secret.

Aspects of the disclosure further enable simplified setup configuration and maintenance of the NAPs by the NAP owners in part by abstracting the details of such operations from the NAP owners . Aspects of the disclosure further enable the NAP owners to attract customers to businesses with the promise of wireless fidelity Wi Fi access. The NAP owners can also serve advertisements to users to monetize the Wi Fi access while content owners e.g. mobile operators target the users with advertisements by offering to subsidize Wi Fi access at particular businesses in return for delivering the advertisements. In operation some embodiments customize the captive portals e.g. landing pages based on credentials supplied by the users .

Referring next to an exemplary block diagram illustrates the cloud service communicating with mobile computing devices that connect to networks . In the example of the user interacts with the mobile computing device or any other computing device of the user to access content via the network . The mobile computing device connects to one or more of the networks through one or more NAPs such as a Wi Fi beacon and a cellular tower. For each NAP the mobile computing device may execute one or more instructions or otherwise perform a series of actions or commands to gain access via the NAP to the network associated with the NAP . After gaining access to the network through the NAP the mobile computing device is able to transmit and receive the content . In this manner the NAP acts as a captive portal .

Communication between the mobile computing device and other devices may occur using any protocol or mechanism over any wired or wireless connection. For example the mobile computing device may attempt to transmit and or receive data over a Wi Fi network a cellular network a satellite network a whitespace network or any network . In some embodiments a NAP is defined to include all NAPs that share the same service set identifier SSID within a particular geographic area e.g. 100 meter radius . For example a plurality of NAPs within an airport may share the same SSID.

Referring next to an exemplary block diagram illustrates the cloud service communicating with the NAP owner device to configure the NAP implementing the captive portal . In the example of the NAP owner device includes any computing device of the NAP owner such as a laptop tablet mobile telephone and the like. The NAP owner device is in communication with the NAP and the cloud service . For example the NAP owner device may connect to the NAP via a wired or wireless connection and may be co located with the NAP e.g. in the same room at the same location of a business entity or remote from the NAP .

The NAP owner device communicates with the cloud service to configure the NAP as described herein but is also capable of communication with the NAP to configure the NAP . In some examples the NAP owner device sends the configuration settings to the cloud service and the cloud service transmits configuration data to the NAP to configure the NAP . In other examples the NAP owner device sends the configuration settings to the cloud service and the cloud service transmits the configuration data to the NAP owner device . The NAP owner device then applies the configuration data to the NAP to configure the NAP .

The NAP implements one or more of the captive portals . The captive portals gate access to the networks . In some embodiments the captive portals provide authentication services and or authorization services to determine which mobile computing devices are allowed to access the networks .

Aspects of the disclosure are operable with different configurations of the NAP . In one example all network traffic between the mobile computing devices and the networks is routed via the cloud service . In such an example the NAP routes the network traffic from the mobile computing devices to the cloud service and the cloud service routes the network traffic to the networks . The captive portal implemented by the NAP thus acts as a virtual private network VPN endpoint to the cloud service . In this example the cloud service is able to directly monitor and adjust the network traffic e.g. based on the usage rules described below .

In another configuration the control traffic is routed from the NAP owner device to the cloud service but all other network traffic is routed from the NAP to the networks .

Referring next to an exemplary block diagram illustrates the cloud service storing the configuration data associated with the captive portal implemented by the NAP . In the example of the cloud service provisions the captive portal associated with one of the NAPs . The cloud service represents any device executing instructions e.g. as application programs operating system functionality or both to implement the operations and functionality associated with the cloud service . Such a device may also be a peer device to the mobile computing devices . The cloud service may also represent a group of processing units or other computing devices. In another example the cloud service may include a mobile computing device or any other portable device such as a mobile telephone laptop tablet computing pad netbook gaming device and or portable media player. Alternatively or in addition the cloud service may include less portable devices such as desktop personal computers kiosks tabletop devices industrial control devices wireless charging stations and electric automobile charging stations.

In some embodiments the cloud service has at least one processor and a memory area . The processor includes any quantity of processing units and is programmed to execute computer executable instructions for implementing aspects of the disclosure. The instructions may be performed by the processor or by multiple processors associated with the cloud service . In some embodiments the processor is programmed to execute instructions such as those illustrated in the figures e.g. .

In some embodiments the processor represents an implementation of analog techniques to perform the operations described herein. For example the operations may be performed by an analog computing device and or a digital computing device.

The cloud service further has one or more computer readable media such as the memory area . The memory area includes any quantity of media associated with or accessible by the cloud service . The memory area may be internal to the cloud service as shown in external to the cloud service not shown or both not shown . In some embodiments the memory area includes read only memory and or memory wired into an analog computing device.

The memory area stores among other data correlations between NAP owner identifiers and NAP identifiers . That is the correlations relate each of the NAP owners to one or more of the NAPs . In this manner the cloud service is able to determine which NAPs are associated with which NAP owners . For example one of the NAP owners may install a plurality of NAPs in a particular location and the memory area stores correlations between the NAP owner identifier and the plurality of the NAP identifiers .

The memory area further stores the configuration data for each of the NAPs . The configuration data for each of the NAPs is generated from configuration settings provided by the NAP owner e.g. transmitted via the NAP owner device . The configuration settings describe the network access characteristics desired by the NAP owner . For example the NAP owner may describe Wi Fi characteristics.

The configuration data generated from the configuration settings includes code such as extensible markup language XML expressions that is applied to the NAP to configure the NAP . In some embodiments the configuration data defines one or more usage rules describing conditions of access by the mobile computing devices to the networks through one or more of the captive portals implemented by the NAP . For example the usage rules may define one or more of the following maximum data rate maximum cumulative network data consumption before throttling of network connections occurs maximum time duration for access by each of the users maximum quantity of simultaneous users times during which network access through the captive portal is allowed and or times during which network access through the captive portal is not allowed. The usage rules may also define opt out conditions to prevent prohibit or otherwise deny access to the network through the captive portal for particular users or groups of users . Other conditions of access not specifically described herein are within the scope of the configuration data .

The cloud service further stores computer executable components in the memory area . The components include a user interface component a communications interface component a configuration component and a report component . In some embodiments the communications interface component includes a network interface card and or computer executable instructions e.g. a driver for operating the network interface card. Operation of these components when executed is described below with reference to .

Referring next to an exemplary flow chart illustrates operation of the cloud service to configure the captive portal associated with the NAP . The operations illustrated in are described with reference to execution by the cloud service . However aspects of the disclosure contemplate execution of the operations by other devices or processors such as by one or more of the mobile computing devices . Further while some operations are described with reference to execution of the computer executable components embodied or otherwise stored in the memory area of the cloud service one or more of the operations may be performed by other components or modules of the cloud service .

At the cloud service receives from the NAP owner device a request to provision setup or otherwise configure at least one of the NAPs . In an example scenario the NAP owner e.g. a restaurant owner has purchased a new NAP e.g. a wireless router and is ready to configure the NAP to implement the captive portal to provide gated access to the network e.g. the Internet for an establishment e.g. a restaurant . The NAP owner uses the NAP owner device e.g. a laptop to send the request to the cloud service . The NAP owner identifies the destination of the request via for example a near field communications NFC tag a quick response QR code on the NAP and or a uniform resource locator URL . The NFC tag QR code and URL may be located on the NAP itself or on packaging of the NAP .

In some embodiments the request includes the NAP owner identifier e.g. a login user name email address etc. and the NAP identifier e.g. a serial number media access control address etc. . The request may include additional information such as a current location of the NAP make model of the NAP date of purchase and more.

At the cloud service provides a control channel to the NAP owner device . For example the cloud service provides the NAP owner device with an interface such as application programming interface API and or a user interface UI . The API and UI enable the NAP owner device to send the configuration settings to the cloud service . Aspects of the disclosure are operable with any API including representational state transfer REST styles e.g. RESTful and other design models.

For example an API in accordance with embodiments of the disclosure includes commands for the NAP owner to define the configuration settings. The commands convey input from the NAP owner . As another example a UI in accordance with embodiments of the disclosure displays one or more configuration options to the NAP owner . The NAP owner navigates one or more menus of the UI to identify the available configuration options and to enter configuration settings for one or more of the configuration options.

At the cloud service receives the configuration settings from the NAP owner device via the control channel. At the cloud service processes the received configuration settings to generate the configuration data . In some embodiments the configuration settings identify a plurality of service providers with which the NAP owner has a contractual agreement. In such embodiments processing the received configuration settings includes generating a landing page for each of the plurality of service providers. In operation the landing page for a particular one of the service providers is provided to the mobile computing device after the user of the mobile computing device provides credentials identifying the particular one of the service providers. The landing page may include executable scripts for retrieving current promotions of the service provider or other advertisements.

At the cloud service transmits the generated configuration data to the NAP . The NAP applies the configuration data to configure the NAP . In some embodiments the configuration data includes machine readable data such as XML code that the NAP is capable of understanding to configure the NAP . Alternatively or in addition the cloud service transmits the generated configuration data to the NAP owner device . The NAP owner device then communicates with the NAP to apply the configuration data to the NAP .

In some embodiments the cloud service transmits the generated configuration data to the NAP as an image e.g. firmware to be applied to the NAP . Installing the image applies the configuration data while maintaining user settings. In some embodiments the image is an operating system image that represents a full re imaging of the NAP e.g. router .

In some scenarios the cloud service receives a set of application identifiers from the NAP owner as part of the configuration settings. The set of application identifiers correspond to those applications to be allowed access through the captive portal . For example the application identifiers may include string names for applications such as messaging applications audio streaming applications and video streaming applications.

In some embodiments the set of application identifiers corresponds to those applications the NAP will allow through the captive portal without authentication of the mobile computing device and or user . As an example the NAP owner may allow access to social media applications without redirecting the mobile computing devices to the captive portal web page for authentication. In another example the NAP owner may allow access to a video teleconferencing application without authentication of the mobile computing device and or user based on an agreement with one of the service providers associated with the video teleconferencing application. In this manner transparent network access is provided to the users executing the video teleconferencing application.

In another scenario the NAP owner identifies one or more mobile operators or other service providers in the configuration settings. Users associated with the identified service providers are allowed to connect through the captive portal to access the network without paying a fee or other requirements such as viewing an advertisement accepting terms of service etc. In such scenarios the NAP owner charges the service providers a fee for allowing customers e.g. the users of the service providers to connect through the captive portal . In this manner aspects of the disclosure enable reverse billing or otherwise operate to subsidize a cost associated with access to the network by allotting a portion of the cost to the service providers.

In still another scenario the NAP is associated with a business entity and the NAP owner specifies the hours of operation for the business entity in the configuration settings. After the configuration settings are applied to the NAP the NAP disables access to the network outside the hours of operation.

After the NAP has been configured via the configuration data the cloud service monitors network traffic through the captive portal at . For example the NAP intermittently or periodically sends the cloud service reports detailing the network traffic by a plurality of the user through the captive portal . The cloud service analyzes the network traffic and in some embodiments enforces the usage rules against the users based on the monitored network traffic. For example the cloud service may instruct the NAP to offload one or more of the current users to another network or NAP to restrict access e.g. throttle bandwidth by one or more of the current users and or prevent one or more future users from obtaining access through the captive portal .

After configuration of the NAP the cloud service may further use the control channel to deliver information to the NAP . In some scenarios the cloud service provides a redirect web page e.g. a landing page to the mobile computing device through the control channel when the user attempts to access the network via the NAP . The NAP then uses the control channel to perform authentication of the users and or authorization of the mobile computing devices to connect through the captive portal . For example after being presented with user credentials via the control channel the cloud service may provide instructions to the NAP that this particular user using the mobile computing device having a particular MAC address is allowed to connect through the captive portal to the network for a particular duration or until a particular amount of network data has been consumed. The NAP then provides the user with network access in accordance with the instructions received via the control channel.

In some embodiments the components illustrated in execute to perform one or more of the operations illustrated in . For example the user interface component when executed by the processor of the cloud service causes the processor to provide a user interface for display on the NAP owner device . In some embodiments the user interface component provides user interface elements e.g. menus popups dialog boxes entry fields etc. for receiving a bandwidth configuration from the NAP owner for receiving a request from the NAP owner to add another captive portal to the NAP and more.

The NAP owner device receives the configuration settings for the NAP from the NAP owner via the provided user interface. The communications interface component when executed by the processor of the cloud service causes the processor to receive the configuration settings from the NAP owner device . The configuration component when executed by the processor of the cloud service causes the processor to process the configuration settings received by the communications interface component to generate the configuration data for the NAP . In some embodiments the configuration component further creates a correlation between the NAP and the NAP owner e.g. between the NAP identifier and the NAP owner identifier .

The communications interface component further executes to transmit the configuration data generated by the configuration component from the cloud service to the NAP . The NAP applies the transmitted configuration data to configure the NAP . Alternatively or in addition the communications interface component transmits the configuration data to the NAP owner device . In such an example the NAP owner device applies the configuration data to the NAP to configure the NAP .

In some embodiments the user interface component provides data to the user or receives data from the user via one or more of the following hardware elements on the NAP owner device speakers a sound card a camera a microphone a vibration motor one or more accelerometers a BLUETOOTH brand communication module global positioning system GPS hardware and a photoreceptive light sensor. For example the NAP owner may input commands or manipulate data by moving the NAP owner device in a particular way.

The report component when executed by the processor of the cloud service causes the processor to generate one or more reports. The reports are based on data collected from the NAP and or the cloud service . An exemplary report indicates an amount of network traffic through the NAP from the users . The report may further identify an amount of network traffic affiliated with different service providers. For example the report indicates that the users associated with Service Provider A generated 20 of overall network traffic through the NAP whereas the users associated with Service Provider B generated 30 of the overall network traffic through the NAP .

In some embodiments the cloud service provides one or more of the reports to the NAP owner e.g. transmitted to the NAP owner device . Continuing the above example with Service Providers A and B the cloud service provides the report e.g. a monetization report to the NAP owner showing an amount e.g. percentage of network traffic associated with the users who are affiliated with at least one of the service providers.

In some embodiments each service provider pays a subsidy or other fee to the NAP owner to allow the users of the service provider to connect through the captive portal of the NAP . In such embodiments the report component provides one or more of the reports to the service providers on behalf of the NAP owner . In this manner the cloud service markets the NAP to the service providers for additional or increased subsidies from the service providers by emphasizing for example the quantity of the users of the service providers who frequent the NAP .

The report component may also allow the NAP owner device to connect to the cloud service through the control channel to view the reports. For example the NAP owner may login to the cloud service via the control channel to view log files or other accumulated or derived data.

In an example scenario a bakery owner wants to provide Wi Fi access to customers of the bakery. The bakery owner purchases a wireless router designed for hotspot service and connects the wireless router to the Internet. The wireless router is pre configured by the manufacturer to automatically attempt to connect to the cloud service upon initial power up. After connection to the cloud service the wireless router sends information describing the wireless router such as serial number MAC address date of manufacture make model hardware software revision information and the like.

The bakery owner uses the NAP owner device e.g. a laptop or tablet and logs into the cloud service to provide credentials to the cloud service e.g. via the control channel . The cloud service associates the credentials with the information provided by the wireless router thereby creating a correlation between the bakery owner and the hotspot. The bakery owner provides the configuration settings for the captive portal to the cloud service which generates and applies the configuration data to the wireless router to implement the captive portal . The configured wireless router is then ready to provide Wi Fi access to the customers of the bakery. In this scenario the cloud service provides the bakery owner with a fully functional captive portal along with network traffic monitoring and filtering in accordance with the supplied configuration settings.

Some embodiments support auto provisioning of additional NAPs . For example after applying the configuration data to at least one NAP the cloud service or NAP owner device stores the configuration data and can apply the same configuration data when the NAP owner adds a new NAP or a new captive portal to an existing NAP . In such an example the NAP owner may tap the NAP owner device onto an NFC tag of the new or existing NAP to automatically apply the stored configuration data to the new or existing NAP .

In some embodiments the control channel includes a portable storage medium such as a universal serial bus USB flash drive or a subscriber identity module SIM that allows the NAP owner to contact the cloud service to provision the NAP . For example the USB flash drive and SIM includes an application that when executed contacts the cloud service to establish the control channel. The USB flash drive and or SIM may be included with the packaging of the NAP upon purchase.

Aspects of the disclosure further contemplate an economic model for incentivizing an owner of the captive portal to encourage the users to connect through the captive portal. For example as the volume of the users connecting through a particular captive portal increases the cloud service provides additional benefits and or services to the users and or the owner of that captive portal. The additional benefits and or services include but are not limited to higher tiers of quality of service QoS reserved bandwidth for the owner or other users identified by the owner and the like.

At least a portion of the functionality of the various elements in the figures may be performed by other elements in the figures or an entity e.g. processor web service server application program computing device etc. not shown in the figures.

In some embodiments the operations illustrated in may be implemented as software instructions encoded on a computer readable medium in hardware programmed or designed to perform the operations or both. For example aspects of the disclosure may be implemented as a system on a chip or other circuitry including a plurality of interconnected electrically conductive elements.

The term Wi Fi as used herein refers in some embodiments to a wireless local area network using high frequency radio signals for the transmission of data. The term BLUETOOTH as used herein refers in some embodiments to a wireless technology standard for exchanging data over short distances using short wavelength radio transmission. The term NFC as used herein refers in some embodiments to a short range high frequency wireless communication technology for the exchange of data over short distances.

While no personally identifiable information is tracked by aspects of the disclosure embodiments have been described with reference to data monitored and or collected from the users . In some embodiments notice may be provided to the users of the collection of the data e.g. via a dialog box or preference setting and users are given the opportunity to give or deny consent for the monitoring and or collection. The consent may take the form of opt in consent or opt out consent.

Exemplary computer readable media include flash memory drives digital versatile discs DVDs compact discs CDs floppy disks and tape cassettes. By way of example and not limitation computer readable media comprise computer storage media and communication media. Computer storage media include volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Computer storage media are tangible and mutually exclusive to communication media. In some embodiments computer storage media are implemented in hardware. Exemplary computer storage media include hard disks flash drives and other solid state memory. In contrast communication media embody computer readable instructions data structures program modules or other data in a modulated data signal such as a carrier wave or other transport mechanism and include any information delivery media.

Although described in connection with an exemplary computing system environment embodiments of the disclosure are capable of implementation with numerous other general purpose or special purpose computing system environments configurations or devices.

Examples of well known computing systems environments and or configurations that may be suitable for use with aspects of the invention include but are not limited to mobile computing devices personal computers server computers hand held or laptop devices multiprocessor systems gaming consoles microprocessor based systems set top boxes programmable consumer electronics mobile telephones mobile computing and or communication devices in wearable or accessory form factors e.g. watches glasses headsets or earphones network PCs minicomputers mainframe computers distributed computing environments that include any of the above systems or devices and the like. Such systems or devices may accept input from the user in any way including from input devices such as a keyboard or pointing device via gesture input proximity input such as by hovering and or via voice input.

Embodiments of the invention may be described in the general context of computer executable instructions such as program modules executed by one or more computers or other devices in software firmware hardware or a combination thereof. The computer executable instructions may be organized into one or more computer executable components or modules. Generally program modules include but are not limited to routines programs objects components and data structures that perform particular tasks or implement particular abstract data types. Aspects of the invention may be implemented with any number and organization of such components or modules. For example aspects of the invention are not limited to the specific computer executable instructions or the specific components or modules illustrated in the figures and described herein. Other embodiments of the invention may include different computer executable instructions or components having more or less functionality than illustrated and described herein.

Aspects of the invention transform a general purpose computer into a special purpose computing device when configured to execute the instructions described herein.

The embodiments illustrated and described herein as well as embodiments not specifically described herein but within the scope of aspects of the invention constitute exemplary means for provisioning captive portals associated with the NAPs . For example one or more of the embodiments contemplate means for receiving a request from the NAP owner device to configure the NAP receiving from the NAP owner device via a control channel configuration settings for the captive portal processing the received configuration settings to generate configuration data for the NAP transmitting the generated configuration data to the NAP the NAP applying the transmitted configuration data to configure the NAP monitoring network traffic from the users through the captive portal and enforcing the usage rules against the users based on the monitored network traffic.

The order of execution or performance of the operations in embodiments of the invention illustrated and described herein is not essential unless otherwise specified. That is the operations may be performed in any order unless otherwise specified and embodiments of the invention may include additional or fewer operations than those disclosed herein. For example it is contemplated that executing or performing a particular operation before contemporaneously with or after another operation is within the scope of aspects of the invention.

When introducing elements of aspects of the invention or the embodiments thereof the articles a an the and said are intended to mean that there are one or more of the elements. The terms comprising including and having are intended to be inclusive and mean that there may be additional elements other than the listed elements. The term exemplary is intended to mean an example of The phrase one or more of the following A B and C means at least one of A and or at least one of B and or at least one of C. 

Having described aspects of the invention in detail it will be apparent that modifications and variations are possible without departing from the scope of aspects of the invention as defined in the appended claims. As various changes could be made in the above constructions products and methods without departing from the scope of aspects of the invention it is intended that all matter contained in the above description and shown in the accompanying drawings shall be interpreted as illustrative and not in a limiting sense.

