---

title: Online advertising associated with electronic mapping systems
abstract: Various methods, systems and apparatus for displaying online advertising content associated with a point-of-interest (“POI”) in a digital mapping system, are disclosed. One such method may include detecting a change in the zoom level of an electronic map displayed on a computing device (e.g. desktop/laptop, smart phone, etc. operation on Windows®, Linux®, Mac OS®, iOS®, Android®, etc.) determining if the new zoom-level is at a pre-determined zoom level (e.g. at maximum zoom), identifying a POI on the map, retrieving advertisement content associated with the POI (“POI advertisement content”) and displaying the POI advertisement content. A POI may be a specific point of interest; or, an entire geographic region of a map displayed at a high zoom level. The method may further include detecting a change in the zoom, or pan, of the digital map while POI advertisement content is displayed, and removing or repositioning the POI advertisement content in response.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09449333&OS=09449333&RS=09449333
owner: 
number: 09449333
owner_city: 
owner_country: 
publication_date: 20130531
---
This application is a continuation in part of and claims priority to U.S. patent application Ser. No. 12 592 894 filed on Dec. 3 2009 titled Displaying Content Associated with Electronic Mapping Systems and U.S. patent application Ser. No. 12 012 353 filed on Feb. 1 2008 titled Method and System for Associating Content with Map Zoom Function . The disclosure of the prior applications is considered part of and is incorporated by reference in the disclosure of this application.

The present invention generally relates to mapping on electronic devices. More particularly the present invention relates to associating online advertising content pertaining to a point of interest or to a visible portion of an electronic map and displaying the content in response to a change in the electronic map s zoom level.

Popular mapping services include Google Maps Yahoo Maps Windows Live Search Maps MapQuest and others. Mapping services are typically available to a user through a web browser running on a computer or a portable electronic device such a cellular smart phone e.g. Apple iPhone Android based smart phone etc. personal digital assistant etc. Mapping services allow a user to view a map in various formats e.g. 2D 3D aerial road street view etc. . Functionality provided includes zoom in and zoom out which allows the user to see a smaller region at a greater level of detail and larger region in less detail respectively. Zooming in and out is often accomplished with the help of a control e.g. a graphic control which the user can manipulate with an input device such as a mouse keyboard stylus by touch etc. Zooming in may be limited by settings defining minimum maximum zoom levels and or by the physical limitation of zoom data available. For example urban areas are often available for zoom up to the maximum street level i.e. one or more streets with individual buildings are clearly visible whereas remote areas may be available for zooming at a lower maximum level. Online advertising also known as online advertisement internet marketing online marketing or e marketing is the marketing and promotion of products or services over the Internet. Examples of online advertising include contextual ads on search engine results pages banner ads blogs rich media ads social network advertising interstitial ads online classified advertising advertising networks dynamic banner ads cross platform ads and e mail marketing including e mail spam. Many of these types of ads are delivered by an ad server.

The present invention provides various methods systems and apparatus for displaying advertisement content associated with a point of interest POI in a digital mapping system. In response to a zoom in command received by a map display application displaying a selected area of the map at a magnification beyond a predetermined zoom level advertisement content associated with a POI on the map POI advertisement content may be retrieved and displayed. In one embodiment POI advertisement content may be retrieved from a data store containing various POI advertisement content for multiple POIs. In another embodiment POI advertisement content may be derived from a website associated with the POI through an automated process. POI advertisement content may be in the form of media a photograph audio video etc. . POI advertisement content may be associated with a region of a displayed area of a map the region collectively being considered a POI.

In one embodiment POI advertisement content may be displayed overlaying a portion of the map allowing some parts of the map to remain visible. In another embodiment the POI advertisement content may replace the map or overlay its entirety. In response to various commands e.g. zoom out pan etc. the POI advertisement content may be hidden from view restoring the map to its visual state prior to the POI advertisement content having been displayed. POI advertisement content may include images media web content KML for Keyhole Markup Language files documents etc.

Map may be generated and displayed by computer code e.g. using technologies such as AJAX javascript http requests DHTML XML VML Flash etc. in a map display application e.g. a browser application. Map may be composed of graphical images known as map tiles that may be received by the client device from the mapping service and assembled and displayed as a map . Images e.g. a location marker pictures icons Flash media files etc. may be generated by the mapping service as graphics e.g. PNG or GIF files and transmitted to the electronic device to be displayed on map .

Map may display points of interest. A point of interest POI may be designated by a location marker . A POI may be generated in multiple ways. A POI may be selected by the user e.g. by touching the screen using a pointing device etc. A POI may correspond to a physical address or landmark. In yet another possible embodiment a POI may comprise an area of a map. For example in a case where a map at the highest zoom level displaying one or more houses the houses or a visible segment of a street where the houses are may be collectively considered a POI. A POI may be designated by the mapping service providing map . For example the mapping service may generate designate a POI in response to a user query e.g. the user may enter a search query such as shopping mall and the mapping service may mark one or more shopping malls on map as POIs. 

In the presently preferred embodiment a POI may also be designated implicitly for example when a map is displayed in the highest zoom level a landmark most prominent e.g. occupying largest area of the map may automatically be designated a POI. In an alternate embodiment a landmark closest to the center of the map may be automatically designated a POI. In yet another embodiment a landmark closest to the center of the map with which the mapping service has associated information may automatically be designated a POI.

Map may be manipulated by the user of electronic device . For example the user may use a control and or pointing device e.g. stylus fingers touching the screen mechanical electronic controls etc. to pan across or zoom into a map .

A map is commonly capable of being displayed in various zoom levels. In response to a user s selecting a zoom level the map display application may determine the new region to be displayed request the corresponding map tiles from the mapping service and display the received map tiles over the previous map tiles which were displayed at the previous zoom level.

Zooming is generally supported within limits. A zoom level may be designated by a number for example in the range of 0 20 where 20 may represent the highest supported zoom level and 0 may be the lowest supported zoom level. For example zoom level 0 may show a view of Planet Earth while zoom level 10 may show a map view of the area equivalent to an average State zoom level 15 may show a map of a city and the highest zoom level 20 may show one or more streets and or a large building.

At present integers denoting a zoom level may be arbitrary and change over time. Zoom levels may be correlated to a physical scale. For example a zoom level of 0 may correspond to a map scale of 1 inch 20 000 miles. A zoom level of 10 might be 1 inch 200 miles 15 can correspond to 1 inch 20 miles 20 might be 1 inch 200 yards etc.

In the most common implementations of mapping technology at present a user attempting to zoom in past the highest zoom level i.e. the map is displayed at the highest zoom level example 20 and the user attempts to further zoom in may be displayed one of two things in some cases the display may remain unchanged with an occasional accompaniment of an audible signal e.g. a beep sound to indicate to the user no further zooming is available. In another common implementation new map tiles are displayed indicating to the user no map image is available in the current zoom level. In accordance with applicant s previous invention publications Ser. No. 12 592 894 and Ser. No. 12 012 353 additional content may be displayed in response to reaching the highest zoom level.

In one presently preferred embodiment advertising content POI advertisement content associated with a POI on the map e.g. a POI demarked by location marker may be displayed in electronic device in response to a request to zoom in while the current zoom level is at a pre determined maximum. The POI advertisement content may be from a service such as Google Ad Words wherein the content of the POI advertisement content may include advertising contextual to the POI . e.g. an advertisement such as 50 off on men s mountain bikes at REI matching search criteria set by Google s ad engine in this example displaying the ad associated with sport store REI as the latter is included in geographic proximity to the location marker . 

In an alternate embodiment POI advertisement content may be displayed in response to a request to zoom to the highest zoom level i.e. in this alternate embodiment POI advertisement content may be displayed at a zoom level where map data may still be available. 

In yet another alternate embodiment POI advertisement content may be displayed in response to a request to zoom to a pre determined zoom level. Pre determined zoom levels may be set by a user may be default settings may be set dynamically based on POI content provider preferences etc.

In yet another possible alternate embodiment referring now to social network advertising e.g. Ads by Facebook may be displayed in response to reaching a maximum zoom level for the map . In response to a user s zooming to a map s maximum zoom level a social network advertisement engine may produce an advertisement related to a user of the electronic device deriving data from the user s social graph and or any geographic content on the map . For example the social network advertisement may read Sydney Brandon and 10 more friends like Yoga at the mall wherein the Yoga reference may be related to a Yoga studio located in proximity to the location market .

Electronic device may include a map display application e.g. a browser an application capable of displaying a map generated by a remote mapping service etc. In the presently preferred embodiment map display application may support the display of various map types and images including graphical images extraneous to maps generated by a mapping service.

Referring to a map may be displayed in map display application . Map may be displayed at various zoom levels. For example zoom level indicator may indicate a zoom level of 20 In this example map is displayed in a satellite image hybrid map format for illustrative purposes only the present invention supports any type of map format e.g. a 2D map a 3D map an aerial map a hybrid map a road map etc. 

Referring now to map display application displays a map on device . In this example zoom level indicator may display Zoom Level 70 . Accordingly the reader will notice that map is displayed at a higher zoom level than map in . i.e. the word ocean an entire airport perimeter and the word airport are visible in map whereas only a portion of the airport appearing larger is visible in map . The user may have used various controls to issue a command to increase the zoom level e.g. controls such as keyboard touch screen mouse stylus voice command etc. 

Referring now to zoom level indicator may read Zoom level 100 . Accordingly map displayed in map display application on device may be displayed at the highest possible zoom level i.e. a small portion of the airport image in map is displayed over the same screen area as map allowing for a greater level of detail to show. 

In map display application illustrated in a zoom level may change in response to a user s input e.g. via an input device such as a mouse stylus touching a touch screen mechanical control keyboard etc. in accordance with the common operation of mapping systems in the prior art domain. Sequential user input interpreted as a commands to increase the zoom level may cause the zoom level to increase in a sequence as illustrated in illustrates map at zoom level 20 illustrates a map at zoom level 70 illustrates a map at zoom level 100 . 

In all presently existing prior art a user s input command to increase the zoom level of the map beyond the maximum supported zoom level i.e. map zoom level is 100 prior to user s invoking a command to zoom in does not display additional mapping information or content associated with POIs on the map.

Referring now to in the presently preferred embodiment additional content may be displayed in response to the user s invoking a zoom in command past the highest supported zoom level. Map display application on electronic device may display content associated with a POI on the map POI advertisement content .

In the presently preferred embodiment POI advertisement content may be content associated with a POI most prominent on the map which is displayed at the highest zoom level e.g. map in In alternate embodiments as will be shown in later figures various other methods may be used to determine a POI whose associated POI advertisement content may be displayed.

In this example POI advertisement content e.g. an airline ad as in Fly Virgin London from 799 displayed in map display application may be associated with the airport in maps and in respectively. While maps and may be satellite images of an airport with map labeled Zoom level 100 displaying the highest resolution map e.g. image of the airport terminal POI advertisement content at a zoom level labeled Zoom level past Max for illustrative purposes may display advertisement from various ad engines services such as Google AdWords AdSense Facebook etc.

As will be discussed in later figures POI advertisement content which may be displayed when the user invokes a zoom in command past the highest available zoom level may be an image a website Flash content PDF content any form of active content etc.

In the presently preferred embodiment in a case where the area of map display application is relatively small e.g. on the screen of a smart phone or PDA POI advertisement content may display in the entire display area of map display application i.e. entirely obscuring the map in . In alternate embodiments as shown in other figures POI advertisement content may display overlaying map i.e. displayed on top of map obscuring a portion of map . 

Please note that both in map display applications and represent the same map display application in two different states the map display application is denoted as when displaying a map and as when displaying POI advertisement content.

Referring to both a user s electronic device may communicate with a mapping server over a network e.g. the world wide web. A map display application running on user s electronic device may receive mapping data from mapping server and display the mapping data as a map . The mapping data may generally include mapping tiles or images which map display application may then display stitched together to form a map.

Map display application may receive input from the user e.g. pan zoom new locations coordinate to display etc. In response to the user input map display application may request mapping information from mapping server and display the received mapping information.

Please note that it is common practice for map display applications to use caching to store various mapping data. Once mapping data is received from the mapping server for the first time it may be stored in local cache. Subsequent request for the same data may receive the data from local cache and not from the mapping server. Since caching is out of scope for this discussion we describe all data as transmitted from a server disregarding the fact that in an actual implementation some of the data may be retrieved from a local cache.

Referring now to in one presently preferred embodiment a map display application on the client device may receive data i.e. mapping data and various other data from various sources and display the received data. For example data used for rendering a map may be received from a mapping server whereas other data such as POI advertisement content may be received from other offline and online sources. The map display application may determine the sources from which to receive various types of data.

A map display application may obtain and display mapping data as map from mapping server . POI advertisement content may be obtained and displayed by the map display application from search words location based advertising data sources e.g. Google s AdWords or any other source of advertisement which serves advertisement in connection with any search words associated with the map display application and or physical location of the device and or location shown in the map In this example map display application may display mapping data as a map showing a shopping center titled Great Mall . In response to input requesting zooming in past the highest allowed zoom level map display application may retrieve POI advertisement content from the search words location based advertising data sources and display the POI advertisement content in this example 50 off on men s mountain bikes at the Great Mall. 

Referring now to in another possible embodiment a map display application may display advertisements derived from a social network advertisement engine service in conjunction with zooming in functionality. In this embodiment user input e.g. pan zoom inputted location name etc. may be transmitted by the map display application to a mapping server . Mapping server may retrieve POI advertisement content as needed from a social network advertisement service e.g. Facebook advertising engine service and transmit back to map display application images containing POI advertisement content

A map display application may obtain and display mapping data as map from mapping server as discussed previously. Map display application may transmit user input to mapping server in response to which mapping server may construct and transmit back new display images. Mapping server upon receiving from map display application a user request to zoom in past the highest allowed zoom level may 1 obtain POI advertisement content from the social network advertisement service and 2 construct new display images containing POI advertisement content and 3 transmit the new images for display by the map display application as POI advertisement content

In this example mapping server may transmit to map display application mapping data forming map showing a shopping center titled Great Mall . In response to input requesting zooming in past the highest allowed zoom level mapping server may obtain POI advertisement content from the social network advertisement service and transmit content containing the POI advertisement content to map display application for display as POI advertisement content e.g Sydney Brandon and 10 more friends like Yoga at the Great Mall. 

Referring to the logic in flow diagram may be invoked by a zoom in event e.g. the map display application receives user input invoking a zoom in command. 

At step it may be determined whether the highest allowed zoom level has been reached prior to the zoom in event. If it is determined that the highest allowed zoom level has not been reached prior to the zoom in event at step other logic not depicted in this flow diagram as it is out of scope for this discussion may be invoked.

If it is determined at step that the highest allowed zoom level has been reached prior to the zoom in event at step the center of the map may be determined. A map is commonly displayed as tiled images representing a range of longitude latitude values. The center of the map may be determined mathematically by calculating the mean horizontal display coordinate and mean vertical display coordinate.

At step the center of the map determined in display coordinates at step may be transformed into longitude latitude coordinates.

Please note that the process of determining the center of a displayed map in screen coordinates and translating the screen coordinates into longitude latitude values is well established and is commonly used in prior art.

At step a database of POIs may be scanned to determine if a POI matching the longitude latitude coordinates determined at step exists. For example a POI database may include a list of POIs e.g. shopping centers airports amusement parks etc. including the longitude latitude coordinates of the POI.

At step a list of all POIs within the coordinate range displayed on the map may be retrieved and in the event more than one POI is determined to be within the coordinate range the POI closest to the center coordinates determined at step may be selected.

If at step it is determined that at least one matching POI has been found at step at step advertisement content association with the determined at step may be retrieved from one or more advertising services such as Google AdWords Facebook AdSense AdMob etc. The advertising content may be related to one or more of the POI at step and or one or more users and or social connections of one or more users and or physical connection of the electronic device assumed in .

At step the advertisement content associated with the POI POI advertisement content retrieved at step may be displayed by the map display application. In the presently preferred embodiment the POI advertisement content may be displayed overlapping a part of or the entirety of the map displayed by the map display application. In an alternate embodiment the POI advertisement content may be displayed replacing the map previously displayed by the map display application. In another embodiment the POI advertisement content may be displayed externally to the map displayed by the map display application.

If at step it is determined that no POI has been found at step at step the flow may terminate. In alternate embodiments at step the user may be notified no POI has been found for example audibly as in a beep sound or via a message indicating no POI advertisement content is available etc.

Referring now to flow diagram may be invoked when a zoom event is received by the map display application. If at step it is determined that a zoom out function has been invoked at step the POI advertisement content may be removed or hidden depending on the POI advertisement content display method used at step in . 

At step the map ordinarily displayed at the highest allowed zoom level may be displayed to the user unobstructed by POI advertisement content.

In alternate embodiments as discussed in other figures the logic of flow diagram may be used in response to other events such as a user panning the map inputting a different geographic region to map etc.

Flow diagram A illustrates an embodiment in which advertisement content associated with a specific POI on a map is retrieved and displayed. In response to a zoom in event at step e.g. a user invoking a zoom in command on their map displaying electronic device at step it may be determined whether the highest allowable zoom level has been reached. In alternate embodiments it may be determined whether the highest allowable zoom level has been surpassed i.e. in one embodiment zooming to the highest allowable zoom level may display POI advertisement content whereas in another embodiment attempting to zoom in once at the highest allowable zoom level may display POI advertisement content. 

If at step it is determined the highest allowable zoom level has been reached surpassed see discussion in earlier section at step the POI in focus may be determined see example logic for determining POI in focus in flow diagram in . 

At step advertising engine e.g. an online service such as Google AdWords or a social network like Facebook Facebook s Ad Exchange etc. may be searched for advertisement content associated with the POI in focus identified at step . In one embodiment a database may contain various types of advertisement content associated with various types of POIs. For example POIs representing shopping malls may have associated POI advertisement content associated with stores such as sales. The advertisement content may be served via any popular contextual advertising service such as Google s AdWords Facebook etc.

Information gathered from the electronic device e.g. its GPS location and or user of the electronic device e.g. user s friends on Facebook may be used at step to retrieve the advertisement content.

If at step it is determined that at step POI advertisement content associated with the POI in focus has been found at step the POI advertisement content may be retrieved. At step the POI advertisement content may be displayed.

If at step it is determined that no POI advertisement content has been found at step at step a website associated with POI advertisement content may be sought. At step the website found at step may be crawled to obtain content relevant to the POI. Please see for discussion on automatically identifying and retrieving POI advertisement content from the internet. 

Referring now to flow diagram illustrates an alternate embodiment in which POI advertisement content applies to an entire visible portion of a map. For example POIs may not be displayed on a zoomed in portion of a map for various reasons no POIs may exist for that portion of the map and or the user may have turned off an option to display POIs and or mapping settings preferences may have been set to treat a zoomed in portion of a map as a single POI. In such embodiment POI advertisement content e.g. street photograph which applies to the entire visible zoomed in region may be displayed.

At step a user command to zoom in a map may be received. For example on a hand held device such as the iPhone the user may perform a pinching out movement indicating a zoom in command. In response at step it may be determined whether a maximum zoom level has been reached i.e. no further map tiles with mapping satellite data are available at the newly requested zoom level . In an alternate embodiment a logical maximum zoom level may be defined as an alternative to a physical zoom in limitation defined by the lack of new map tiles data to represent the newly desired zoom level.

If at step it is determined that the maximum zoom level has been reached at step it may be determined that content associated with the entire visible section of the map as opposed to content associated with a specific POI on the map should be retrieved.

At step the visible section of the map may be identified. For example in a map showing city streets an entire city street or visible portion thereof may be identified as a collective POI. as opposed to a specific POI such as an individual house store landmark etc. 

At step advertisement content associated with the collective POI i.e. visible section of the displayed map may be retrieved and at step the content may be displayed to the user.

At step a zoom in zoom out or a pan event occurs. For example the user increases the zoom level of a map or decreases the zoom level of a map or pans the map in any direction.

At step a query containing the new range of coordinates visible on a map may be submitted to a POI advertisement content data store e.g. an online server connected to a database containing POI advertisement content locally cached POI advertisement content etc. 

At step a list of POIs e.g. containing at minimum the coordinates of each POI may be retrieved. In one embodiment a database engine associated with the POI data store may execute a query to return all POIs whose coordinates are within the range submitted at step . In alternate embodiments the returned list may include other data associated with the POIs such as thumb nail photos etc.

At step all POIs on the list at step may be flagged on the map. For example a location marker such as a pushpin icon may be displayed on the map at the coordinates corresponding with every POI on the list at step .

At step flow may end. In alternate embodiments the POIs flagged on a map based on the availability of POI advertisement content for these POIs may be grouped by or delimited by an association among the POIs. For example POIs flagged on a map may represent POIs that have associated POI advertisement content and that have been defined by a social networking group Please see for further discussion. For example a dozen bars in a city block may have POI advertisement content associated with them but only five of them may be flagged on a map that is being used by the members of a social network frequenting only these five bars.

Another advantage of displaying POI advertisement content as a separate image superimposed on a map may be the increased speed for redrawing the map once the POI advertisement content is removed. When POI advertisement content needs to be removed or hidden for example when a user pans the map or zooms out it may be faster to hide remove an overlay showing POI advertisement content as discussed in this embodiment than to redraw the map as may be required in an embodiment where map content is replaced with POI advertisement content.

Referring to map display application may display a map . In response to a zoom in event past the highest allowable zoom level for example as indicated by the zoom indication bar labeled Layout POI advertisement content may be displayed over map in map display application .

In the presently preferred embodiment POI advertisement content may be displayed centered over the POI location it is associated with i.e. the center of the POI advertisement content may be at the coordinates as the center of the POI location. In alternate embodiments POI advertisement content may be displayed at other locations on the map for example in a corner of the map in an attempt to keep the POI location associated with POI advertisement content un obscured from the user s view. In another embodiment the user may be able to set preferences for the default placement of POI advertisement content. In yet another possible embodiment the user may be able to use a pointing device to move the POI advertisement content on the map.

Referring now to in commonly used mapping technologies e.g. used by mapping services such as Google Maps Yahoo Maps Windows Live Search Maps etc. a map is composed of map tiles e.g. map tile x1 y1 z which is part of a matrix of twenty map tiles x1 y1 z1 x5 y4 z1 In response to user requests such as zoom pan and selecting new locations new map tiles may be loaded and displayed by mapping application . Technologies such as AJAX HTML DHTML Javascript etc. may be used to render a map from map tiles generated by a mapping server.

In the presently preferred embodiment POI advertisement content may be displayed as a map overlay object. An overlay object is an object on the map that is tied to latitude longitude coordinates so it can move when the map is dragged i.e. panned or zoomed. An overlay object may display content for example an image whose source is different from the source of the map. Various types of overlays may be used in the implementation of the present invention for example custom overlays layer overlays etc.

According to the present invention map may be constructed from map tiles transmitted to map display application from a mapping server while overlay object may display POI advertisement content as an image or in the form of other media transmitted to map display application from a different source than the mapping server.

Various styles and methods may be used to construct present and hide POI advertisement content to the user. Overlay object displaying POI advertisement content may be constructed i.e. rendered with POI advertisement content in the device s memory invisible to the user. Overlay object may become visible to the user only once all POI advertisement content has been retrieved and rendered on the memory resident overlay object.

An overlay object may be removed from the user s view using various methods including but not limited to invoking the hide or similar method of the overlay object invoking the remove or similar method of overlay object by unloading the overlay object from memory etc.

A shadow effect graphic may be displayed in proximity of overlay object . Shadow effect graphic may comprise a graphics displayed as translucent such that map tiles obscured by shadow effect graphic e.g. map tile x5 y2 z may be partially visible. Shadow effects may be used both for aesthetics and to help delineate for the user POI advertisement content from the map.

Map display application may display a selected area of a map . Map may display a pushpin indicating the existence of information associated with a POI in this example Great Mall . In response to a user command to zoom in to past the highest allowed zoom level an automatic process may search the internet for content associated with the POI in focus in this example the POI associated with the pushpin and display the content to the user.

Map display application may perform electronic searches on the internet . Various searches may be conducted to identify a website associated with the POI in focus e.g. marked by pushpin For example online versions of yellow pages search engines such as Google and online directories mashing search engine information with geographic locations may be searched to identify a website associated with a POI.

A website associated with a POI is likely to have a main landing page usually named index.htm index.htm etc. containing un compiled computer code e.g. HTML DHTML Javascript XML etc. The code of the landing page may be scanned for terms associated with content. For example terms including directory map content layout etc. that are part of hyperlinks and that contain suffixes e.g. .html .htm .asp .aspx etc. may point to another web page containing relevant content or links to relevant content. For example term directory.asp on page index.html is part of a link http www.greatmall.co.com html storedirectory.asp to web page storedirectory.asp .

Pages on the websites may be further crawled to identify relevant content. Page storedirectory.asp 816 may be scanned for terms identifying graphics e.g. .jpg .gif .png etc. A hyperlink containing a graphics suffixes e.g. http www.greatmall.co.com maps thumbs 1607.jpg containing suffix .jpg may be followed to the associated graphic. In this example image 1607.jpg may be retrieved by map display application and displayed as POI advertisement content .

Please note that the process of crawling a website to identify a specific type of content as summarized in the two preceding paragraphs is well understood in prior art and is used widely by the majority of the search engines thus the present invention may rely on this process to derive POI advertisement content.

In another embodiment crawling websites to identify POI advertisement content may be performed routinely in a manner analogous to the crawling performed by web search engines such as Google to index general web sites and POI advertisement content identified may be aggregated into one or more data stores dedicated to POI advertisement content. Future searches for POI advertisement content may be performed against such dedicated POI advertisement content data stores.

Map display application displaying a map may display a context menu in response to a user action e.g. a pointing device action such as right clicking the mouse. At present in common mapping applications context menu may include functions such as Add a pushpin Drive from . . . Drive to . . . 1 click directions Center map here Zoom to street level Zoom to city level etc. A user s selecting one of the functions above from the context menu may cause the map display application to perform the requested function which may result in the retrieval of more data from online resources and the display of additional information.

In previous embodiments of the present invention the discussion included a user s zoom in action which in turn may cause the display of POI advertisement content. In an alternate embodiment illustrated in a user may choose a function from the context menu to display POI advertisement content.

For example the function Zoom to layout may display on context menu associated with map display application . In response to a user s selection of the Zoom to layout function map display application may retrieve and display POI advertisement content e.g. associated with a location marked on the map 

Similarly keyboard shortcuts may be used to invoke a function to display POI advertisement content associated with a location on the map. Keyboard shortcuts are commonly used on computing devices allowing a user to send a command to an application with a simple keystroke. For example the key combination control c is commonly used as a copy function. In an analogous manner a different key combination may be defined in the map display application allowing a user to use a key combination to invoke the display of POI advertisement content associated with a map or location on a map displayed by the map display application.

In a portable device e.g. a smart phone such as the iPhone Palm device etc. a touch screen may be used to invoke the display of POI content on a map displayed on the device. For example certain input received from the touch screen resulting from a user s touch and or stylus touch may generate a command to display POI advertisement content on the map.

Referring to map display application may display a map . In most commonly used mapping applications the user is allowed to choose a zoom level for the display of the map. For example zoom levels may be quantified b zoom terms such as USA State City Street etc. A user may select a zoom term and in response the map may be zoomed to a pre determined zoom level. For example the user may choose zoom term Street causing map to display a map at a street level i.e. generally the highest obtainable zoom level commonly displaying one or more houses and a few streets. 

Referring now to the user may select a zoom term associated with POI advertisement content. For example the user may select the zoom term labeled Home which in this example may display real estate related information.

In response to a user s selecting a zoom term associated with POI advertisement content a POI advertisement content menu listing all available POI advertisement content types may be displayed. In this example POI advertisement content menu may list content type terms such as Home Layout Information Real Estate Co Finance etc.

In the presently preferred embodiment a POI advertisement content menu may be rendered dynamically depending on the types of POI advertisement content associated with a location on a map. In alternate embodiments services providing a mapping service and POI advertisement content for example real estate companies may specify the content of a POI advertisement content menu. In other embodiments other methods may be used to display the content type terms used in a POI advertisement content menu.

In this example a user s selecting content type term Home Layout may cause a layout map of the house at the focal point of the map to be displayed as POI advertisement content . POI advertisement content may be an image media KML for Keyhole Markup Language file document etc.

In the presently preferred embodiment POI advertisement content may display over the map possibly leaving portions of the map visible to the user. In alternate embodiments POI advertisement content may be displayed in place of map or over the entirety of map obscuring map completely. 

Referring now to a user may select a different content type term e.g. Information from POI advertisement content menu which may cause a different POI advertisement content to be displayed. In this example selecting content type term Information may cause POI advertisement content to display. POI advertisement content may contain information on the house at the focal point of the map .

Referring now to a user may select a different content type term e.g. Real Estate Co from POI advertisement content menu which may cause a different POI advertisement content to be displayed. In this example selecting content type term Real Estate Co may cause POI advertisement content to display. POI advertisement content may contain for example information on the real estate company listing the house at the focal point of the map .

In alternate embodiments map display application may store the last user selection of content type term from POI advertisement content menu . In response to a user zoom in action at the Home level the POI advertisement content displayed may correspond to the last type of POI advertisement content displayed previously. For example a user may select content type term Information from the POI advertisement content menu . Then the user may zoom out causing POI advertisement content to not be displayed. The user may pan the map until another house becomes the focal point of the map. The user may zoom in to the Home level and the POI advertisement content displayed may be Information pertaining to the house which is now the focal point.

Please note that in one map display application is shown in two phases as map display application and then as map display application . Items related to the map display application are labeled and when displayed in conjunction with one phase of the map display application . When displayed in conjunction with the second phase of the map display application the items above are labeled and respectively.

A map display application may display a map . Map may include geographic content POI e.g. buildings landmarks etc. POI may be marked e.g. by pushpins denoting POI advertisement content associated with the POI

Map may be displayed at the maximum zoom level e.g. as indicated by the zoom level Street Attempting to zoom past the maximum zoom level e.g. as indicated by the zoom level Layout may cause the display of POI advertisement content on map in map display application . POI advertisement content may be associated with the POI at the focal point of the map and or with a pushpin suggesting availability of POI advertisement content associated with the POI

While the displaying of the POI advertisement content at the maximum zoom level has been described above there are various other conditions under which the POI advertisement content can be displayed. As zoom technology improves it may be possible to obtain very detailed maps and it may be more useful to display the POI advertisement content at a zoom level lower than the maximum zoom. For example the POI advertisement content may be displayed when a predetermined zoom level has been exceeded which the user can set. In one embodiment the user may wish to have POI information at all zoom levels. Alternatively the user may set the POI advertisement content to only be displayed when a predetermined zoom level is met such as street level or a predetermined viewing scale. The scale of the display is a ratio of physical size to displayed size. Thus a map of a city street may be displayed at a scale of 1 10 000 or 1 inch 1 000 feet or any other ratio.

As discussed above the zoom level can correspond to a specific scale and in an embodiment the POI information can be set to any zoom level by the user. At the lowest zoom level the entire planet may be displayed and POI information can be the Earth s physical characteristics diameter volume mass speed of rotation etc. As the user zooms in continents may be displayed and the POI information may include information about each displayed continent such as population area climate number of countries etc. Similar POI information may be provided for zoom levels that display cities districts streets blocks and buildings.

POI advertisement content may be related to social networking. For example if POI were the place of residence of one of the members of an online network group POI advertisement content may present the member s information blog website etc. In another example POI may be a sports stadium concert hall restaurant bar meeting place of significant to members of a social network whereby POI advertisement content may be information related to the meeting place such as venue menu hours of operation website etc.

In the presently preferred embodiment map may be automatically centered within map display application in response to a zoom action to the Layout level. Map may be automatically repositioned panned such that POI is at the center as compared to the previous display position of the POI shown right and top of center on map displayed at a Street zoom level.

Mapping services e.g. Google Maps Yahoo Maps Windows Live Search Maps etc. provide application programming interface API to allow a web page to interface with a the mapping service. The example below illustrates interfacing with Yahoo Maps however APIs provided by other mapping services may be used to implement the present invention to work with all other mapping services.

In the presently preferred embodiment a web browser map display application may be enabled for displaying a map off of a remote mapping server. Code may be added to a web page to allow the web page to display a map off of a remote mapping server while executing within the map display application. An example of one possible implementation of creating a map enabled web page 

Referring to flow chart illustrates one example of initializing a map display application registering zoom and pan events and creating an overlay object for future display of POI advertisement content. 

At step map creation and initialization steps may take place. For example initialization steps may include referencing the Yahoo Maps AJAX API library with a unique code id line 4 in the code snippet above creating a map object line 17 adding a zoom control to the map line 21 adding a pan control line 23 setting the type of map to be displayed line 26 etc.

At step a zoom range for the map may be set line 28 . A zoom range is a value pair with one value specifying the lowest minimum zoom level and one specifying the highest maximum zoom level. In this example Yahoo Maps API is used thus code map.setZoomRange 0 16 line 28 indicates the highest maximum zoom level being 0 and lowest minimum being 16. In other examples where other mapping services API is used e.g. Google Maps API other conventions may be used e.g. lower number indicating the minimum zoom level such as zero for Earth from space and the higher number indicating the maximum zoom level. 

At step the geocoded location of the map may be transmitted to the mapping server line 30 and map tiles may be received from the mapping server and displayed at step .

User commands such as zoom and pan transmitted to the map display application e.g. via an input device such as keyboard touch screen stylus mouse etc. may be used to trigger the logic for displaying POI advertisement content. Sample code to capture events i.e. events generated by user commands such as zoom and pan may include in one implementation 

At step zoom and pan events may be registered to be captured and in response functions to handle the events may be assigned. For example a function POIContentZoom to be called upon a user zoom event may be assigned line 41 . Another function POIContentPan may be assigned to handle user pan events line 43 .

POI advertisement content may be displayed as an overlay object. An overlay object is an objects on the map that is tied to latitude longitude coordinates so it can move when the map is dragged i.e. panned or zoomed. An overlay object may display content for example an image whose source is different from the source of the map. Various types of overlay objects may be used in the implementation of the present invention for example custom overlays layer overlays etc. An example of one possible implementation of creating an overlay object on a map 

At step an overlay object may be added to the map displayed at step . In this example the coordinates on the map where POI advertisement content would later be displayed may be defined line 50 an overlay object may be declared as an image line 52 the source i.e. URL of a blank placeholder image may be defined line 54 the overlay image may be set to size zero lines 55 and 56 overlay properties may be assigned to the overlay object line 58 and the overlay object may be added to the map object line 60 .

In this example a dummy image may be assigned to an overlay object as a placeholder for future POI advertisement content and the overlay object being of size zero may be added to the map. Using this algorithm of pre creating a blank invisible overlay object before any POI advertisement content is selected then when POI advertisement content becomes available rendering of POI advertisement content and resizing the overlay object to make the POI advertisement content visible may make the rendering of POI advertisement content faster.

In alternate embodiments other algorithms may be used for example hiding the overlay object until POI advertisement content needs to be displayed creating an overlay object only at the time POI advertisement content needs to be displayed using other types of overlays e.g. to store media and assigning various styles to overlays e.g. different styles for different types of POI advertisement content etc.

Referring now to the logic of flowchart may be implemented in response to a zoom event i.e. the operating system notifying the map display application that a zoom command has been issued for example via a user s input device. An example of one possible implementation of the function POIContentZoom assigned to handle zoom events line 41 

At step function POIContentZoom  e  c line 70 may be automatically invoked in response to a user s zoom action. At step if is determined that the maximum zoom level is reached e.g. zoom level is 1 where 1 is the maximum see line 71 at steps the POI advertisement content associated with the POI on the map may be retrieved and displayed.

At step the coordinates and or name and or other identifier POI information of the POI in focus may be obtained line 72 . At step the POI information may be transmitted to a server e.g. mapping server POI advertisement content server database etc. to identify the POI and search for POI advertisement content associated with the POI information.

At step POI advertisement content i.e. a link to an image or any other media file may be received from the server. At step the image media POI advertisement content received may be assigned to the overlay object line 73 .

At step the overlay object may be made visible to the user line 74 . At step additional functionality may be added. For example the overlay object may be repositioned and or resized with respect to the POI on the map line 75 . An internally defined variable tracking the visibility of the overlay object may be set to true line 77 to indicate the overlay object is visible.

If at step it is determined the maximum level of the map has not been reached referring now to the logic of flow diagram may be invoked.

If at step it is determined an overlay object is visible line 78 at step the overlay object may be hidden made invisible line 80 . At step other functionality may be invoked to restore the map to its previous state line 81 . An internally defined variable tracking the visibility of the overlay object may be set to false line 82 to indicate the overlay object is not visible.

If at step it is determined the overlay object is not visible at step the flow of the present invention may end other functionality outside the scope of the present invention may be invoked e.g. updating routes traffic information etc. .

Referring now to flow diagram illustrates logic for handling pan events for example the logic of function POIContentZoom defined in line 43 to be automatically invoked in response to a pan event. 

At step a pan event handling function e.g. POIContentZoom 0 is called in response to a pan event. If at step it is determined the overlay object is visible steps may be executed.

If at step it is determined the current POI i.e. the POI associated with the POI advertisement content displayed in the overlay object is visible at step it may be determined whether another POI new POI on the visible map is closer to the new center of the map than the current POI. If a new POI is determined at step at step information on the new POI is obtained e.g. coordinates name etc. and at step step in may be invoked to display POI advertisement content associated with the new POI. If at step it is determined no new POI exists flow may terminate.

If at step it is determined the current POI is not visible on the map at step the overlay object may be terminated e.g. hidden from view unloaded from memory etc. 

Following step or if at step it is determined no overlay is visible at step it may be determined whether another POI is in focus. If it is determined at step another POI is in focus step in may be invoked to display new POI advertisement content associated with the other POI determined to be in focus at step .

The flow diagrams depicted in and any associated computer code listed are examples of one way of implementing the present invention many other implementations logical flows and code are possible without departing from the spirit of the invention. Yahoo Maps API was chosen for illustrative purposes only and other mapping services APIs may be used with minor modification to the code illustrated here.

In present mapping technologies a link may exist between a POI on a map and a web site associated with the POI. For example searching for the term pizza in a city on Google Maps may display markers in all locations where pizza restaurants were found. Clicking on a marker displays standardized information about the POI such as link to a website address links to reviews links to driving directions links to contacting the POI etc.

Please note that in one map display application is shown in two phases as map display application and then as map display application . Items related to the map display application are labeled and when displayed in conjunction with one phase of the map display application . When displayed in conjunction with the second phase of the map display application the items above are labeled respectively.

Map display application may display a map containing a POI . Map display application may also display a zoom control . In this example zoom control may display a series of bars to indicate the current zoom level. The right most and largest bar is not colored indicating the highest zoom level has not been reached. 

Once the map in map display application has been zoomed in to the maximum level e.g. as indicated by zoom control where the right most bar is in solid color POI advertisement content associated with the POI may be displayed.

In this example POI is a restaurant and the associated POI advertisement content is the restaurant s menu. In other examples POI may be any type of business and the associated POI advertisement content may be any text image media etc. associated with the POI .

POI advertisement content may reside in a web page on the world wide web . In other possible embodiments POI advertisement content may reside elsewhere on the world wide web and be pointed to from web page ex. via a hyperlink. 

In yet another possible embodiment web page may contain a tag for example true indicating to map display application that content on and or pointed to from web page is to be used as POI advertisement content . In such embodiment a business may tag a web page with a pre determined tag indicating to map display applications that a tagged web page is to be displayed as POI advertisement content.

For example a restaurant may add a web page to its website containing POI advertisement content such as a menu. That web page may be tagged with a pre determined tags e.g. true indicating to map display applications that POI advertisement content is contained in that web page. When a map displaying a POI is zoomed to past the highest zoom level map display application may search the world wide web for a website associated with the POI . The website may then be searched for a web page tagged as the POI advertisement content containing page and the content in the webpage may then be displayed by the map display application as POI advertisement content . In this example the restaurant s menu is the POI advertisement content. 

In alternate embodiments other methods may be used to allow businesses to provide their individual POI advertisement content for display when a map showing their business is zoomed into POI advertisement content display mode.

Map tiles of a geographic region not supported by a certain zoom level are often blank i.e. show no geographic data other than text such as we are sorry but we don t have imagery at this zoom level for this region. Try zooming out for a broader look. 

Referring to a four phase sequence is shown where a map display application is shown in four different phases at different zoom levels. In each phase map tiles are retrieved from the mapping server or local cache if a map tile had already been retrieved from the mapping server and saved locally and are stitched together to form a map.

In the first phase map display application may display a map e.g. an aerial view of an airport at a zoom level corresponding to 75 of the maxim zoom level as shown by zoom indicator 75 . 

In the second phase map display application may display a zoomed in map e.g. the same airport in map but shown in a higher zoom level at a zoom level corresponding to 100 of the maxim zoom level as shown by zoom indicator 100 . 

In the third phase in accordance with the methodology used in prior art in response to a user s zoom in command past the highest supported zoom level as illustrated by zoom indicator Max 1 to indicate a zoom level exceeding the normal maximum zoom level of the map. the mapping server may return blank map tiles commonly notifying the user in plain text that no imagery is available at the present zoom level. 

In the fourth phase in response to a user s zoom out command map display application may display map identical to map at a 100 zoom level as shown by zoom indicator 100 . 

While the sequence shown in illustrates the operation of prior art a user zooms in multiple times with each increased zoom level showing a closer up view. At a certain zoom level the user sees blank tiles with text indicating no data is available at that zoom level. The user then realizes they have zoomed in too far so they zoom out and see map imagery at the highest supported zoom level illustrates a similar sequence benefiting from the art disclosed in the present invention.

Referring now to map display application may display map at a 100 zoom level. Let us assume that is the highest zoom level for which a mapping server can display a map of that region. A subsequent zoom in command may then display POI advertisement content e.g. an airline ad as in Fly Virgin London from 799 A zoom indictor may be labeled Max 1 to indicate zooming is past the normal highest zoomable level of the map.

In the presently preferred embodiment map tiles at a zoom level for which no geographic mapping content is available may be rendered with POI advertisement content by the mapping server. Thus a map display application on a user s device requesting map tiles corresponding to a given zoom level from a mapping server may receive map imagery at one zoom level and POI advertisement content at another zoom level.

In alternate embodiments a map display application on a user s device in response to receiving blank map tiles from a mapping server may then obtain and display POI advertisement content from another source.

The examples above demonstrate the power and flexibility of the present invention in retrieving and displaying POI advertisement content associated with one or more POIs on a map.

The invention has been described with reference to particular embodiments. However it will be readily apparent to those skilled in the art that it is possible to embody the invention in specific forms other than those of the preferred embodiments described above. This may be done without departing from the spirit of the invention.

Thus the preferred embodiment is merely illustrative and should not be considered restrictive in any way. The scope of the invention is given by the appended claims rather than the preceding description and all variations and equivalents which fall within the range of the claims are intended to be embraced therein.

