---

title: Multipoint interface shortest pulse width priority resolution
abstract: System, methods and apparatus are described that facilitate transmission of data, particularly between two devices within an electronic apparatus. Each device can contend for control of a communications link by driving a data signal to a first voltage level. If the data signal or a clock signal changes before an arbitration time period has elapsed, one or more devices yield control of the communications link to another contender. The arbitration time period for each contender is different and indicates a priority of the message to be transmitted. A shorter arbitration time period indicates higher priority. Arbitration may commence after clock and data signals of the communications link remain in an idle or other predefined state for a minimum idle time. The minimum idle time may be different for different nodes and may be shorter for high priority messages or nodes.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09497710&OS=09497710&RS=09497710
owner: QUALCOMM Incorporated
number: 09497710
owner_city: San Diego
owner_country: US
publication_date: 20131125
---
The present disclosure relates generally to high speed data communications interfaces and more particularly multipoint data communication links connecting multiple devices.

Manufacturers of mobile devices such as cellular phones may obtain components of the mobile devices from various sources including different manufacturers. For example an application processor in a cellular phone may be obtained from a first manufacturer while the display for the cellular phone may be obtained from a second manufacturer. The application processor and a display display driver or other device may be interconnected using a standards based or proprietary physical interface. One example of a physical interface is the Multipoint Coexistence Management Interface MP CxMi which may be used within a device or components of a device.

A simple network of CxMi nodes associated with modems or other functions may be employed for fully integrated chips and non integrated devices. The use of a standard interface allows common software to be developed to manage or interact with different devices. CxMi interfaces may use simple complementary metal oxide semiconductor CMOS signals and run at a data rate of approximately 50 Mbps. However there is typically no bus master and bus arbitration processes may be prolonged thereby affecting throughput.

Embodiments disclosed herein provide systems methods and apparatus that enable improved transmission rates on physical interfaces between devices within an apparatus. The apparatus may comprise a mobile terminal having multiple Integrated Circuit IC devices which may be collocated in an electronic apparatus and communicatively coupled through one or more data links.

In an aspect of the disclosure a method for data communications includes steps of contending for control of a communications link by driving a data signal to a first voltage level monitoring the data signal and a clock signal for a first period of time yielding control of the communications link if the voltage of the data signal or the clock signal is not at the first voltage level upon expiration of the first period of time asserting control over the communications link by driving the data signal to a second voltage level if the voltage of the data signal is at the first voltage level at the expiration of the first period of time and transmitting a message on the communications after asserting control of the communications link. The duration of the first period of time may correspond to a priority of the message. Control of the communications link may include control of the data signal and or control of the clock signal.

In an aspect of the disclosure contending for control of the communications link includes determining that the data signal and a clock signal of the communications link have been idle for a second period of time before driving the data signal to the first voltage level. The second period of time may be calculated based on a priority of the message or a priority associated with a node configured to transmit the message on the communications link. The second period of time may be shorter for higher priorities than for lower priorities.

In an aspect of the disclosure the first period of time may be defined differently for two or more nodes contending for control of the communications link. The first period of time may be calculated as a multiple of a transmission timing unit defined for timing activities associated with the communications link. The data signal may be driven to the first voltage level for less than one transmission timing unit. The communications link may connect nodes located on different integrated circuit devices. The nodes located on the different integrated circuit devices may operate at different internal clock rates. The transmission timing unit may be equal to or greater than the clock period of a slowest of the internal clocks.

In an aspect of the disclosure the first period of time is calculated as a weighted sum of the priority of the message and an address of a node configured to transmit the message on the communications link. The first period of time may be shorter for higher priority messages than for lower priority messages. The first period of time may be shorter for higher priority nodes than for lower priority nodes.

In an aspect of the disclosure monitoring the data signal for the first period of time may include causing a node configured to transmit the message on the communications link to enter a high impedance state.

In an aspect of the disclosure an apparatus for data communications includes means for contending for control of a communications link by driving a data signal to a first voltage level means for monitoring the data signal and a clock signal for a first period of time means for yielding control of the communications link if the voltage of the data signal or the clock signal is not at the first voltage level at the expiration of the first period of time means for asserting control over the communications link by driving the data signal to a second voltage level if the voltage of the data signal is at the first voltage level at the expiration of the first period of time and means for transmitting a message on the communications after asserting control of the communications link. The duration of the first period of time may correspond to a priority of the message. The means for contending for control of the communications link may be configured to determine that the data signal and the clock signal have been idle for a second period of time before driving the data signal to the first voltage level.

In an aspect of the disclosure an apparatus for data communications includes a processing circuit configured to contend for control of a communications link by driving a data signal to a first voltage level monitor the data signal and a clock signal for a first period of time yield control of the communications link if the voltage of the data signal or the clock signal is not at the first voltage level at the expiration of the first period of time assert control over the communications link by driving the data signal to a second voltage level if the voltage of the data signal is at the first voltage level at the expiration of the first period of time and transmit a message on the communications after asserting control of the communications link. The duration of the first period of time may correspond to a priority of the message. The processor may be configured to determine that the data signal and a clock signal of the communications link have been idle for a second period of time before the data signal is driven to the first voltage level.

In an aspect of the disclosure a non transitory machine readable storage medium has instructions stored thereon which when executed by at least one processing circuit cause the at least one processing circuit to contend for control of a communications link by driving a data signal to a first voltage level monitor the data signal and a clock signal for a first period of time yield control of the communications link if the voltage of the data signal or the clock signal is not at the first voltage level at the expiration of the first period of time assert control over the communications link by driving the data signal to a second voltage level if the voltage of the data signal is at the first voltage level at the expiration of the first period of time and transmit a message on the communications after asserting control of the communications link. The duration of the first period of time corresponds to a priority of the message.

Various aspects are now described with reference to the drawings. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of one or more aspects. It may be evident however that such aspects may be practiced without these specific details.

As used in this application the terms component module system and the like are intended to include a computer related entity such as but not limited to hardware firmware a combination of hardware and software software or software in execution. For example a component may be but is not limited to being a process running on a processor a processor an object an executable a thread of execution a program and or a computer. By way of illustration both an application running on a computing device and the computing device can be a component. One or more components can reside within a process and or thread of execution and a component may be localized on one computer and or distributed between two or more computers. In addition these components can execute from various computer readable media having various data structures stored thereon. The components may communicate by way of local and or remote processes such as in accordance with a signal having one or more data packets such as data from one component interacting with another component in a local system distributed system and or across a network such as the Internet with other systems by way of the signal.

Moreover the term or is intended to mean an inclusive or rather than an exclusive or. That is unless specified otherwise or clear from the context the phrase X employs A or B is intended to mean any of the natural inclusive permutations. That is the phrase X employs A or B is satisfied by any of the following instances X employs A X employs B or X employs both A and B. In addition the articles a and an as used in this application and the appended claims should generally be construed to mean one or more unless specified otherwise or clear from the context to be directed to a singular form.

Certain aspects of the invention may be applicable to communications links deployed between electronic devices that may include subcomponents of an apparatus such as a telephone a mobile computing device an appliance automobile electronics avionics systems etc.

The apparatus may include a plurality of processing circuits transceivers modems and other devices that communicate with one another. Each processing circuit may be implemented as a plurality of IC devices including one or more ASICs processors sequencers state machines microcontrollers and other logic elements. A variety of different elements devices circuits modules and functions may be adapted to interconnect with one another in order to pass transfer route relay or otherwise communicate data and control information within the apparatus . In some instances the different elements devices circuits modules and functions are clocked at different frequencies and or are capable of communicating at different data rates. Accordingly data communications links that interconnect elements devices circuits modules and functions must typically be adaptable to provide access to a variable number of connected elements devices circuits modules and functions.

The IC devices and may each include functional components that may be configured to communicate with other components of the same IC device or and with components of the other IC devices and or through the external data link . The components within each IC device or may include processing circuits and storage transceivers modems UARTs device drivers and so on shown generally as components and . In one example a general processing device may be provided as an ASIC that includes one or more processing circuits such as a digital signal processor DSP microprocessor microcontroller sequencer logic state machines etc. and support circuits including the storage device . In another example the general processing device may be a memory controller or memory subsystem that provides bulk storage using dynamic random access memory DRAM or other storage devices and one or more processing circuits . Internal components of the IC devices and may communicate with one another using internal data links and which may include a parallel or serial bus or a communication link configured according to certain aspects disclosed herein.

One or more of the IC devices and or may have a gateway circuit or component and to provide an interface between internal data links and or and the external data link . In some instances a gateway or may provide bus translation capabilities that may include parallel to serial conversion serial to parallel conversion data buffering to accommodate clock rate differences logic level translation line drivers and so on. In some example the gateway or may provide address translation and or address resolution including when internal data links and or and the external data link have a common architecture. In one example the internal data links and or and the external data link may include MP CxMi data links.

Various elements devices circuits modules and functions of the apparatus may be interconnected using an MP CxMi communications link . One external MP CxMi communications link may interconnect the IC devices and while internal MP CxMi communications links and extend the external MP CxMi communications link to interconnect elements devices circuits modules and functions within corresponding IC devices and respectively.

The resultant MP CxMi network of CxMi nodes may be configured to support point to point P2P and multicast communications. The CxMi nodes may be associated with modems or other functions. Each IC device and may support one or more internal CxMi nodes and the number of CxMi nodes may be based on the number of functions handled by the IC device and .

The IC devices and may each comprise a processor or other processing and or computing circuit or device that can be configured to manage operations of one or more CxMi nodes. In some instances one or more CxMi nodes may be controlled by a sequencer or state machine.

An MP CxMi communications system may be used with fully integrated and non integrated IC devices and and a common host controller interface HCI may be defined for the apparatus . Accordingly higher level software may be used to control the apparatus . A common interface software may be used regardless of the combination of types of modems transceivers that may be deployed within the apparatus . For example the apparatus may include the GSM and or LTE modems as well as a wireless local area network WLAN transceiver a Bluetooth transceiver and other end point modems or transceivers may be integrated and respond to the common HCI through the MP CxMi communications link and or 

In certain examples the external MP CxMi communications link or may operate using simple CMOS signals without a requirement for special physical layer drivers and other devices. The external MP CxMi communications link or may be configured to carry data at a data rate of 50 megabits per second Mbps or more. The MP CxMi communications link or may be flexibly designed and the data rate may be determined by a transmitting CxMi node. Delay and hold off parameters may also be flexibly configured and in one example may be configured by parameters maintained by configuration registers.

In one mode of operation a transmitting CxMi node sources the transmit clock. No predefined bus master is employed and the transmitting CxMi node may control or master the bus for the duration of a message transmission. Contention resolution is performed before every message is transmitted whereby only those CxMi Nodes that wish to transmit on the bus participate in the contention resolution at the time of transmission of a message participate in contention resolution.

Each CxMi node has a unique address which can be programmed or configured through an HCI register. Each CxMi node can direct a message to one other node in a P2P mode or multicast a message to all nodes in a point to multi point P2MP mode. P2MP transmissions may be facilitated using multicast addresses and many different multicast addresses can be defined in order to define subnets within the network of CxMi Nodes. In one example coexistence elements may be assigned one subnet sensors to another subnet and thermal management elements to another subnet etc. The various subnets may be connected or coupled through the same two wires of the external MP CxMi communications link or and within each IC device or on a corresponding internal MP CxMi communications link or . Accordingly communications between all IC devices and subnets may be effected using the same two wires between IC devices and or .

Each IC device or may have a processor or other processing and or computing circuit or device and storage media including transitory and or non transitory storage devices that may be adapted to maintain instructions and data used by respective processors on the IC devices and or and or other components of the IC devices and .

Gateways and or and nodes and or may be controlled by one or more state machines or other controllers or sequencers. The state machines can efficiently send simple real time events with low latency. State machines may be communicatively coupled to a node associated modem or to a communication processor configured for sending messages.

A message priority may be defined that enables higher priority real time messages to be sent first when multiple nodes attempt to send messages simultaneously. The message priority field may include a 3 bit priority value that is sent in every message . In one example lower priority values correspond to higher priorities such that a 0 priority value is associated with the highest available priority and or the most urgent priority while a priority value of 7 is the lowest and least urgent priority. A system designer may choose appropriate priorities for each message type to ensure efficient delivery of messages that correspond to real time events. For example Type 0 WCI 2 messages may be assigned the highest priority and Type 2 WCI 2 messages may be assigned the lowest priority. A system designer may use less than the 8 available priority levels provided by a 3 bit priority field and or may to utilize a small subset of priority levels to reduce the overhead of the arbitration phase on the external MP CxMi bus .

The priority of each message type can be set in various ways. For simplicity of description it will be assumed that the node receives a 3 bit priority field from the device side of the node interface circuits in parallel with receiving the message data to be sent.

According to certain aspects disclosed herein a shortest pulse width method may be used to arbitrate access to an external MP CxMi bus when multiple devices and are connected to the MP CxMi bus . Priority for the plurality of devices and or wishing to transmit at the same time may be resolved when the higher priority messages are identified by the shortest assert pulse. Using shorter pulses for higher priority messages can reduce the overhead for high priority messages. In some instances the actual digital content of the message priority field is transmitted only on an internal CxMi bus and or and not on the external MP CxMi bus . When a message is to be transmitted on the external bus the message priority may be converted to an assert pulse width in an arbitration phase because this field is no longer needed after the message passes through the external bus to the receiving gateways and or .

In one example a first CxMi Node or with an address set to 3 may transmit a P2P message to a second CxMi Node or that has an address set to 5 . The message destination address field may be set to 5 and the source address field may be set to 3. When the CxMi node or sends the message it is routed through a gateway and or the external MP CxMi bus and corresponding internal MP CxMi busses and or such that all receiving nodes and or can see the message .

A pulse width based contention resolution scheme in accordance with one or more aspects disclosed herein can resolve priority on the external MP CxMi bus . Each node i.e. gateways and or contending for control of the external MP CxMi bus performs a level set and monitor procedure to determine whether a higher priority node or has taken control of the bus . The I O pad circuit for coupling MP CxMi signals to the external MP CxMi bus may include a standard CMOS I O pad circuit with high impedance capability. A keeper circuit see may be configured to maintain the state of the bus at a data high state or at a data low state when all data driver circuits including contending nodes and or are in the high impedance state. The clock signal of the external MP CxMi bus may be configured with a pull down current source that holds the clock in a low state when no device is driving the clock including during the contention process.

The arbitration phase can resolve message priority for messages to be sent over the MP CxMi communications bus by a plurality of CxMi nodes and or contending for control of the necessary MP CxMi communications links and or using an arbitration process that ensures that the highest priority message is transmitted first. Priority may be resolved based on timing generated from a combination of the content or value of the Message Priority field of the message and a gateway address assigned to a transmitting gateway or . In one example a relatively simple algorithm applied to the numerical gateway address and message priority variables may generate a calculated priority value that determines the priority of the message .

The highest calculated priority value may determine which contending CxMi node or wins the arbitration for the MP CxMi communications links and or . A CxMi node or that wins the arbitration for the MP CxMi communications links and or can control access to the external MP CxMi communications link and or one or more of the internal MP CxMi communications links and or . The Node Source Address may be used to break a tie when two or more messages have the same calculated priority value.

CxMi messages may be transmitted during the data phase . In the example illustrated in the fields of a CxMi message include a Very Short Header VSH field which may be synthesized by the CxMi gateway or for data compression over the external MP CxMi communications link . The VSH field is typically transmitted first. In one example if the VSH field has a value from 0 to 6 then the Message Type field Destination Node Address field Source Node Address field and Message Data Length field need not be transmitted because these fields can be obtained from one of 7 sets of registers in the HCI. However if the VSH field has a value of 7 then a Message Type field is transmitted in the next field of the data phase followed by fields including Destination Node Address field Source Node Address field and Message Data Length field . The lengths of message header fields for the Message Type field Destination Node Address field Source Node Address field and Message Data Length field are typically specified by registers in the HCI.

When the transmitted VSH field has a value of 7 optional fields include the Message Type field Destination Node Address field Source Node Address field and the Message Data Length field .

The Message Type field identifies the type of message or the protocol that is tunneled through the MP CxMi interface.

The Destination Node Address field specifies the Node Address of the CxMi Node and or that is the intended recipient of the message. The address may also be a multicast address that causes multiple CxMi Nodes and or to receive the message .

The Source Node Address field includes the Node Address of the CxMi Node or from which the message originated.

The Message Data Length field includes the number of bytes of Message Data that follow. The Message Data includes the payload of the message .

Messages are sent over the external MP CxMi bus after a contending CxMi Node or has acquired control of the external MP CxMi bus by winning a bus arbitration process that precedes each transmission of an MP CxMi message . Each CxMi gateway and or that has a message to be transmitted may participate in bus arbitration. Any CxMi gateway and or that has no CxMi message to send may ignore the bus activity and enter or remain in sleep mode. A CxMi gateway and or may monitor bus activity to determine when transmission of the current CxMi message is complete particularly when the monitoring CxMi Node or has or receives a message to send.

A contending CxMi Node and or that does not win the arbitration process may enter a sleep mode. In the sleep mode the CxMi Node and or can receive messages. The receiver can determine whether a message is addressed to it when the logic is powered on even if the logic is clocked only by a CxMi interface clock where for example an internal clock is disabled to conserve power. In some instances a CxMi Node and or may be configured to exit sleep mode upon receipt of any message. In some instances a CxMi Node and or may be configured to exit sleep mode upon receipt of certain predetermined wakeup messages. A message that causes a CxMi Node and or to exit sleep mode may carry additional data that the CxMi Node and or can evaluate after waking up.

The period of time during which the data signal and the clock signal remains low or in another idle state prior to an arbitration process can be variable. In one example a plurality of contending CxMi gateways and or may be configured to initiate the arbitration process after observing the idle state on the data signal and the clock signal for different periods of time. The CxMi gateways and or may be assigned different priorities and higher priority CxMi gateways and or may initiate the arbitration process before lower priority CxMi gateways and or thereby preempting the lower priority CxMi gateways and or . In another example the CxMi gateways and or may be configured to initiate the arbitration process after observing the idle state on the data signal and the clock signal for a period of time determined based on the priority of a message to be transmitted. In this manner a message with lower priority can have a longer monitor period than a message with higher priority.

In the example depicted in each of the contending CxMi gateways and participates in an arbitration process . The CxMi gateways and may enter contention arbitration after determining that the data signal and the clock signal have remained idle for two or more TUs. Arbitration begins when at least one of the contending CxMi gateways and drives the data signal high to contend for control of the MP CxMi communications link . Some or all of the contending CxMi gateways and may simultaneously and or concurrently drive the data signal high to assert their respective contention for control of the MP CxMi communications link . Each participating CxMi gateway and then waits for a period of time determined by calculating a priority value for its corresponding message before driving the data signal low. If the data signal is already low after the period of time then the corresponding CxMi gateway and or yields control of the MP CxMi communications link to a higher priority transmitter of a CxMi message .

The period of time that a CxMi gateway and waits before driving the data signal low may be determined using an algorithm to calculate a width of an arbitration pulse or . In the depicted example the algorithm calculates the duration t of the arbitration pulse or as Message Priority Gateway Address 1 where Nis the number of CxMi gateways and connected to the MP CxMi communications link . The weighting in this algorithm emphasizes message priority over gateway address. However gateway address can serve as a tiebreaker between messages that have the same message priority. For example when two messages from different CxMi gateways and or have the same message priority the message sent from the CxMi gateway or that has the lowest gateway address may prevail in the arbitration process because it generates the shortest of the arbitration pulses or .

The depicted arbitration process relates to an example of arbitration between three CxMi gateways and N 3 which have messages to be transmitted where 

The depicted arbitration process begins after the data signal and clock signal are pulled low for a predetermined period of time. During this idle period all CxMi gateways and are typically in a high impedance state and no bus master is defined. The data signal and the clock signal may be maintained by respective keeper circuits see when all CxMi gateways and enter the high impedance state. In one example the three CxMi gateways and may be configured to remain in the high impedance state and observe the data signal at the idle state e.g. low level for at least 2 TU. In another example the three CxMi gateways and may be configured to remain in the high impedance state and observe the data signal at the idle state e.g. low level for different or variable periods of time. The CxMi gateways and may simultaneously and or concurrently drive the data signal high to contend for control of the MP CxMi communications link . The first CxMi gateway pulls the data signal low after a 1 TU period has elapsed. The second and third CxMi gateways and detect that the data signal has been driven low and remain in the high impedance state until the beginning of the next arbitration phase . The dashed lines on the data waveforms and of the second and third CxMi gateways and indicate the form of pulses and that would have been generated if no higher priority message is determined to be available for transmission. The first CxMi gateway typically does not drive the clock signal until it has completed bus acquisition which may occur after a delay of 1 TU or more.

According to certain aspects disclosed herein the arbitration assert pulse is initiated by one or more of the CxMi gateways and or and is terminated by the CxMi gateway or that has the shortest calculated arbitration assert pulse or . In the example shown in the first CxMi gateway generates the waveform that has the shortest arbitration assert pulse and continues to drive the data signal low for 1 TU before entering the data phase . The first CxMi gateway then sends a VSH field of the CxMi Message . In each arbitration process the total elapsed time of the arbitration phase is variable and its length is governed by the Message Priority and the Gateway Address associated with the message that prevails in the arbitration process.

Second and third CxMi gateways and may be contending to send a lower priority message at the same time that the first CxMi gateway wishes to send a higher priority message. The second CxMi gateway may initiate a pulse and the third CxMi gateway may initiate a pulse on the external MP CxMi communications link . The second and third CxMi gateways and may then observe the data signal until the time period of its respective pulse or is to expire. However in the example the data signal is first driven low by the higher priority first CxMi gateway depriving the second CxMi gateway and the third CxMi gateway of the opportunity to switch the data signal from a high level to a low level and precluding the second CxMi gateway from acquiring control of the bus . Having observed that the first CxMi gateway has driven the data signal low before the time when the lower priority second CxMi gateway and third CxMi gateway would have attempted to drive the data signal low the second CxMi gateway and the third CxMi gateway remain in high impedance state and monitor the transmission by the first CxMi gateway and subsequently the idle states of the data signal and clock signal to determine when the next contention process can begin.

For each CxMi gateway and the duration of one TU may be determined using a clock divider configured or programmed to divide an internal clock. The internal clock and the clock divider may be configured through a gateway configuration register in the Gateway HCI. A TU is typically selected to have a duration that can be generated by the slowest available clock of all CxMi gateways and or in the apparatus . A fractional divider may be used provided the peak to peak variation of the synthesized clock produces a period of sufficient accuracy and if the sampling window for detecting pulses from other CxMi gateways and or is sufficiently accurate.

According to certain aspects disclosed herein the contending CxMi gateways and or drive the data signal high and enter a high impedance state within 0.5 TU. In order to maintain the state of the undriven data signal and or the undriven clock signal one or more keeper circuits may be provided. A keeper circuit may be deployed internally on an IC device or externally to maintain the data signal condition when all CxMi gateways and have entered high impedance mode. During arbitration the keeper circuit holds a signal line high until the CxMi gateway or serving the highest priority event drives the signal line low thus producing the shortest pulse. In the illustrated example the keeper circuit may include a non inverting gate with a high impedance feedback resistor that maintains the data signal in its last driven state. The resistor has a sufficiently high resistance that it adds negligible load to the signal line and is easily overcome by an active CxMi gateway output.

At the end of the period of the shortest pulse the CxMi gateway or associated with the shortest pulse exits the high impedance state and drives the signal line . For example the CxMi gateway or that wins the arbitration process drives the data signal low for 0.5 TU and drives the clock signal after the termination of the arbitration phase . Contending CxMi gateways and or with lower priority messages to send may detect that the data signal has been driven low and exit the arbitration process . The CxMi gateways and or that do not prevail in the arbitration process typically maintain their data outputs in a high impedance state until after the winning message is transmitted. By driving the bus only when a signal transition is needed it is possible for the CxMi gateways or with the most urgent message to drive a shorter pulse on the data signal line than the pulse driven by the other CxMi gateways and or .

At step the IC device or may monitor the data signal and a clock signal for a first period of time. The duration of the first period of time corresponds to a priority of the message. The first period of time may be defined differently for two or more nodes contending for control of the communications link. The first period of time may be calculated as a multiple of a transmission timing unit defined for timing activities associated with the communications link. The data signal may be driven to the first voltage level for less than one transmission timing unit. The communications link may be adapted to connect nodes located on different IC devices. The nodes located on the different IC devices operate at different internal clock rates. The transmission timing unit may be equal to or greater than the clock period of a slowest of the internal clocks used by the different IC devices. The first period of time may be calculated as a weighted sum of the priority of the message and an address of a node configured to transmit the message on the communications link. The first period of time may be shorter for higher priority messages or higher priority nodes.

In an aspect of the disclosure a node configured to transmit the message on the communications link may be caused to enter a high impedance state while the data signal is monitored for the first period of time.

In an aspect of the disclosure contending for control of the communications link may include determining that the data signal and a clock signal of the communications link have been idle for a second period of time before driving the data signal to the first voltage level. For example one or more nodes in the IC devices and or that have a message to be transmitted may wait until the clock and data signals are idle driven low or driven high etc. for the duration of the second period of time. The second period of time may be calculated based on a priority of the message or a priority associated with a node configured to transmit the message on the communications link. The second period of time may be shorter for higher priority nodes and or higher priority messages.

At step the IC device or may determine if the voltage of the data signal or the clock signal remains at the first voltage level at the expiration of the first period of time. If the voltage of the data signal or the clock signal has not remained at the first voltage level at the expiration of the period of time the method proceeds to step and the IC device or may yield control of the communications link and waits for a next arbitration phase at step . Yielding control of the communications link may include yielding control of the data signal and a clock signal associated with the communications link.

If at step it was determined that the voltage of the data signal and the clock signal remains at the first voltage level at the expiration of the first period of time the method proceeds to step . At step the IC device or may assert control over the communications link by driving the data signal to a second voltage level. Asserting control of the communications link may include controlling the data signal and a clock signal associated with the communications link.

At step the IC device or may transmit a message on the communications after asserting control of the communications link.

The processor may include a microprocessor a controller a digital signal processor a sequencer a state machine etc. The processor is responsible for general processing including the execution of software stored on the computer readable storage medium . The software when executed by the processor causes the processing circuit to perform the various functions described supra for any particular apparatus. The computer readable storage medium may also be used for storing data that is manipulated by the processor when executing software. The processing circuit further includes at least one of the modules and . Certain modules and or may be software modules running in the processor resident stored in the computer readable storage medium one or more hardware modules coupled to the processor or some combination thereof.

In one configuration the apparatus in the diagram includes means for contending for control of a communications link by driving a data signal to a first voltage level means for monitoring the data signal and a clock signal for a period of time means for yielding control of the communications link if the voltage of the data signal or the clock signal is not at the first voltage level at the expiration of the first period of time means for asserting control over the communications link by driving the data signal to the second voltage level if the voltage of the data signal is at the first voltage level at the expiration of the period of time and means and for transmitting a message on the communications after asserting control of the communications link.

The aforementioned means may be implemented for example using some combination of a processing circuit and or see gateways see gateways see and storage media see .

It is understood that the specific order or hierarchy of steps in the processes disclosed is an illustration of exemplary approaches. Based upon design preferences it is understood that the specific order or hierarchy of steps in the processes may be rearranged. The accompanying method claims present elements of the various steps in a sample order and are not meant to be limited to the specific order or hierarchy presented.

The previous description is provided to enable any person skilled in the art to practice the various aspects described herein. Various modifications to these aspects will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other aspects. Thus the claims are not intended to be limited to the aspects shown herein but is to be accorded the full scope consistent with the language claims wherein reference to an element in the singular is not intended to mean one and only one unless specifically so stated but rather one or more. Unless specifically stated otherwise the term some refers to one or more. All structural and functional equivalents to the elements of the various aspects described throughout this disclosure that are known or later come to be known to those of ordinary skill in the art are expressly incorporated herein by reference and are intended to be encompassed by the claims. Moreover nothing disclosed herein is intended to be dedicated to the public regardless of whether such disclosure is explicitly recited in the claims. No claim element is to be construed as a means plus function unless the element is expressly recited using the phrase means for. 

