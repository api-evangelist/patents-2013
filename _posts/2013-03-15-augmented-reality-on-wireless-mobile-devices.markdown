---

title: Augmented reality on wireless mobile devices
abstract: An augmented reality control system in which the generation and utilization of simple geometric forms of real world objects at the enterprise level are layered onto or based on real world objects. Digital data is aligned to real world objects via surrogate of simplified geometric forms.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09129429&OS=09129429&RS=09129429
owner: Exelis, Inc.
number: 09129429
owner_city: McLean
owner_country: US
publication_date: 20130315
---
The present invention claims priority to U.S. Provisional Application No. 61 717 788 entitled Augmented Reality Control Systems and filed on 24 Oct. 2012 the disclosure of which is incorporated herein by reference in its entirety.

The present invention relates to relates to a process of capturing and rendering data on a mobile device and in particular an augmented reality system that registers external information with real objects.

Augmented Reality AR enhances a user s perception of and interaction with the real world. Virtual objects are used to display information utilized to perform real world tasks. When based on an optical approach a user directly sees the real world through optics with graphics combined within the user s field of view. Spatially and temporally correct display of digital information on real world objects however is difficult to achieve on mobile AR devices. It would be desirable to have system that is device independent phone head mounted display etc. and that provides transport efficient minimized data sets to address growing mobile network bandwidth issues along with high speed download and process bandwidth efficient simplified processing to maintain mobile device battery life and to provide low latency geo spatial registration of digital data onto real world objects.

The present invention is directed toward an augmented reality control system including a mobile device that communicates with an enterprise system and via a wireless network. The enterprise system generates a wireframe model or other simplified representation of real world objects i.e. surface models designed to register digital content with the real world. In operation the mobile device communicates with the enterprise system to provide location and directional information that in turn is utilized by the enterprise system to identify a corresponding wireframe model and send it to the mobile device. The use of the above wireframe process enables data sets with smaller bandwidth requirements for their processing transmission and reception. This in turn minimizes latency in the device as well as lessens power requirements of the device. In addition simple data sets facilitate locking the coordinate systems together making for better spatial correctness.

Specifically the enterprise system generates a wireframe model or other simplified representation of real world objects i.e. surface models designed to register digital content with the real world. In the wireframe model geographic image sources are assigned coordinate points to key data set features i.e. every endpoint of lines of wireframe where the coordinates are based on GPS location information. For example the edges of a building include distinct coordinate values as does the edges of a street. The enterprise system extracts these coordinate values from the image sources to generate a wireframe representation of the world. Stated another way the enterprise system creates a simplified geometry of the real world objects synthetic geometry from sources other than the mobile device. For example LiDAR data from aircraft or video imagery from aircraft is used as the source for the geometry set. This wireframe representation is a mathematically efficient geo target set.

In operation the mobile device communicates with the enterprise system to provide location and directional information that in turn is utilized by the enterprise system to identify a corresponding wireframe model and send it to the mobile device. Specifically the camera on the mobile device captures the scene being viewed by a wearer. Software on the mobile device performs an edge extraction routine or other geometry matching on the captured imagery identifying edges or key points of the object being viewed. This extracted edge data is transmitted to the enterprise system along with the user s location information obtained via the device s GPS or IMU and nominal direction information obtained via the compass .

At the server the extracted edge data along with the user s location and nominal directional information correlate the extracted edges to the wireframe model based on the nominal direction. Alternatively the correlation may be accomplished on the mobile device. When correlated the camera view is linked to the digital coordinate system registering the user s view with wireframe model. Digital data is then superimposed onto the user s field of view via the display system. The user may select from the displayed data pulling further information from the web.

The use of the wireframe process enables data sets with smaller bandwidth requirements for their processing transmission and reception. This in turn minimizes latency in the device as well as lessens power requirements of the device. In addition simple data sets facilitate locking the coordinate systems together making for better spatial correctness.

Referring to the augmented reality system includes an enterprise system and a mobile device that communicates via a wireless network. The enterprise system also called a synthetic geometry or geo registration server generates and hosts the geometry or model with the geometry being created outside of the system . This synthetic geometry may exist in several different forms and may be hosted on the same system with software access to any or all of the forms. The generation of the synthetic geometry may be accomplished using real world data or entirely synthesized data i.e. 3D models or a combination of the two. Specifically synthetic geometry may be initially created from external real world data via e.g. synthetic aperture radar SAR or light detection and ranging LIDAR . By way of example LIDAR point clouds may be processed into surface geometry or wireframes or two dimensional imagery may be processed to create surface or texture models.

The synthetic geometry may include one or more layers or models of increasing complexity and or detail. Referring to showing a geometry configuration in accordance with and embodiment of the invention the synthetic geometry includes as its nominal base form a wire frame representation or model . Additional layers moreover may be set for various detail levels. As shown the higher levels may include surface models texture models and imagery based models . The imagery based model or layer may take in imagery from a number of sources and moreover may contain geo location coordinates. These models may be used in a layer like context with more detailed layers on top of simpler less detailed layers resulting in transport efficiency that increases from the top imagery layer toward the bottom wireframe layer. In the illustrated embodiment while the simplest geometric representations is a wireframe model it should be understood that the layers may be further simplified to a smaller group of lines or even reference points that can have their real world versions extracted from video imagery. In addition the model may contain any number of models 1.

The synthetic geometry is based on a digital coordinate system . That is the key imagery points derived from the synthetic geometry are used for the digital coordinate system data points. The digital coordinate system may be the same as a GPS coordinate system or at a minimum or may be correlated to a GPS coordinate system the GPS coordinate system may be simplified to any general external widespread coordinate system i.e. an accessible ubiquitous coordinate system .

The enterprise system then generates a wireframe model or other simplified representation of real world objects i.e. surface models designed to register digital content with the real world. In the wireframe model geographic image sources are assigned coordinate points to key data set features i.e. every endpoint of lines of wireframe where the coordinates are based on GPS location information. For example the edges of a building include distinct coordinate values as does the edges of a street. The enterprise system extracts these coordinate values from the image sources to generate a wireframe representation of the world. Stated another way the enterprise system creates a simplified geometry of the real world objects synthetic geometry from sources other than the mobile device. The wireframe representation then is a mathematically efficient geo target set.

Content authoring tools software development kits or SDKs may use this synthetic geometry construct to create and geo register content with the content containing links to the digital coordinate system to control placement of the digital data. The layer construct may be used in the same way that animation software constructs content by first working with wireframe geometry and then incrementally adds geometry details such as shading and texturing to minimize processing when generating the content. This processing minimization is primarily performed to minimize the development time from the time required to render the images. The effect of using the simplified geometry sets or layers for content generation will be to allow accurate content placement and faster development of the content giving developers the ability to control the accuracy and duration of their work.

The content authoring tools may be given access to the synthetic geometry databases via an Application Programming Interface API that enables web based access. The web basis for this is required so that the database is always kept up to date and the content developers always access the most up to date geometry. Content generator web access will also enable the connections necessary for end user access and tracking.

In this manner the content authoring tools may be utilized to develop digital content information utilizing the synthetic geometry which is then saved on the enterprise system in a layered structure with data existing on one or many layers . This digital data information is then associated with the geometry model e.g. the nominal layer of the model . Specifically n 1 data layers may be created. Referring to a first digital data layer including content A and content B a second digital data layer including content B and content C a third digital data layer and a fourth digital data layer 1 including content B may be provided. As shown in the digital data the content A B B B C may be selective associated with one or more of the geometry model layers 1 . The digital data layers 1 are essentially filters being selected and organized via the content authoring tools. Digital data layers 1 may be organized in any number of ways including by importance location nearest item taking priority temporal based etc.

In operation user filters on the mobile device may be used to select the predefined digital data layers or to generate new selection filters that cross multiple digital data layers or filter within a layer. All of the content includes metadata with the geo location information along with the nominal layer and grouping information.

The mobile device may include one or more processing devices for executing a software application i.e. software program instructions . In an embodiment the mobile device includes a mobile telephone such as a smartphone or a tablet computer. In the embodiment illustrated in the mobile device is a head up display in the form of eyewear including one or more cameras and a display system configured to display images on the lenses of the eyewear. For example the display system may be an OLED microdisplay that projects an illuminated image toward the lens. In other embodiments the mobile device may also be a mobile phone tablet or other portable computing device that includes a display.

The mobile device is equipped with one or more of a global positioning system GPS device a compass and an inertial measurement unit IMU . In addition the mobile device includes a data transceiver operable to wirelessly transmit data to e.g. GPS and camera image data and to receive data digital data from the enterprise system . Additionally the mobile device may be configured to engage in wireless communications such as sending and receiving telephone calls and or wireless data in conjunction with text messages such as emails short message service SMS messages pages and other data messages that may include multimedia attachments documents audio files video files images and other graphics. Accordingly the mobile device may include a wireless transceiver for communicating over a long range wireless network such as a cellular PCS CDMA GPRS GSM iDEN or other wireless communications network. Alternatively or in addition to the wireless communication may further include a transceiver for communicating over a short range wireless network such as an IEEE 802.11 compatible network a Wimax network another wireless local area network connection or other communications link. By way of example the mobile device may include a short or medium range transceiver operating in conjunction with a communication standard such Bluetooth or other standard short or medium range communication protocol.

The mobile device further includes executable software that initiates the data transfer process. The software may be stored on the mobile device in the form of a specialized application or may be executed via HTML5. In operation as shown in the on device process flow provided in in Steps and the device software will selectively read the GPS IMU and magnetometers e.g. a compass and or other sensors disposed on the mobile device . For example the software reads the IMU and magnetometer to determine the location and pointing vector of the user and reads the GPS to determine the user s location. Alternatively the mobile device may use other methods for determining its location such as WLAN WI FI or other technologies. When navigating indoors the system could use WLAN information to download indoor layouts and use multiple WLAN sources or other RF for image based sources for navigation reference points.

In Step this location information will be sent to the enterprise system i.e. the synthetic geometry server . The enterprise system pulls geometry data for the area surrounding the user Step and then sends back to the user a nominal geometry set Step which is received by the mobile device Step . For example the enterprise system pulls and sends a 2 km diameter wireframe representation of the user s geo location. This query to the enterprise system may serve to trigger user tracking initiation.

In the case of a user moving into areas with poor connectivity the user may download the synthetic geometry in advance or the range or area of the synthetic geometry may be increased relevant data for the area may also be downloaded for later use . The surrounding geometry and extra information including geometry beyond the original set may be saved or cached within the mobile device to improve the load times when the user is moving through different areas. The mobile device may pull this extra information based on dynamic bandwidth measurement i.e. pulling information if there is available bandwidth.

An additional method for reducing the downloaded dataset is to use a prefetch function that downloads information based on previous user requests for a particular area. Based on system expectations of where the user is going i.e. from the destination address etc. the system may download the information for that location in advance.

As noted above the IMU and magnetometers will set the user s pointing vector where the user is looking based on the orientation of the mobile device i.e. what the screen shows on a mobile phone or imagery from cameras on a head mounted system . Alternatively the pointing vector may be determined from the GPS position of the user and a comparison of imagery from the camera on the mobile device to imagery databases. The original query for information may also operate on this pointing vector to reduce the overall data download requirements i.e. download a smaller geometry set. The mobile device could select the level of data to download based on dynamic bandwidth measurements. The mobile device may start with the data around the pointing vector and sequentially load in the geometry and additional information outside the pointing vector.

The software on the mobile device enters a loop extracting the synthetic geometry and generating a pre filter that is a reduced data set enabling simplified computation on the mobile device Step . This pre filtering for example may entail hidden line removal and perspective setting for wireframe geometry. The resulting pre filtered data is used for a geometry correlation engine on the mobile device. The pre filtering reduces the size of the data set required for correlation and provides the targets for correlation. The correlation will look at the synthetic geometry and try to match real world geometry to it i.e. the edges of buildings as lines of wireframes may be matched to real building edges. The real world geometry used in the correlation engine is extracted from one or more cameras or imagers on the mobile device.

The camera on the mobile device captures frames of video Step from which the geometry is extracted. The extraction may be accomplished on each single frame alternatively if there is no movement sensed by the device sensors the frequency of extraction may be reduced. Algorithms for geometry extraction e.g. edge extraction face extraction etc. implemented in code extract the relevant information from geometric objects such as buildings in the imager s field of view i.e. extraction of the edges from the sides and roof of a building . Additionally other sensors may provide inputs to the correlation engine such as the accelerometers to provide the nominal gravity vector. Additional processing routines FFTs wavelet transforms etc. may additionally be used to help find the desired geometries. Processing routines may also be used to find predominating orientation vectors such as verticals and horizontals that will aid in establishing the user s pose i.e. find the dominate features assuming predominate orientations of those frequencies . Additionally more advanced imaging capabilities such as polarimetry may be used to help in determining orientation.

The filtered geometry is overlaid on the video frame and geometry matching i.e. overlaid onto edges is performed Step with the filtered geometry data coordinate system then being applied to the video image Step . If the location of the pointing vector of the mobile device has changed the process is directed back into the loop step the process determines whether the movement is beyond the range of the geometry data set Step and if so reenters the loop .

If the location of the pointing vector has not moved out of the range of the filter the process continues into another loop in which the next video frame being grabbed Step and the coordinate system synchronization maintained by continuous comparison to filtered geometry location information and through electronic image stabilization techniques Step .

An alternate process flow where the initial matching or subsequent occasional matching is performed off of the mobile device i.e. at the enterprise or other similar level e.g. cloud based processing is shown in B and C. The offloading of the processing from the mobile device onto external resources may be partitioned in any number of ways in order to optimize on device power consumption processing bandwidth transport bandwidth etc. As illustrated the mobile device determines its location coordinates via e.g. GPS Step as well as reads the device s IMU and or compass Step . After capturing image frames Step the device determines its pointing vector Step and sends this information to the enterprise system Step . The enterprise server extracts geometry data for the area surrounding the user Step and then performs geometric filtering Step . The filtered geometry is overlaid onto the video frame and geometry matching is executed Step and then supplied to the video image Step .

At this stage the enterprise system sends the geometry data to the mobile device along with the initial coordinate system matching Step the data being received by the mobile device Step . Additionally digital information is sent to Step and received by Step the mobile device . The mobile device tracks any pointing vector changes from the frames sent to the enterprise server during the initial coordinate system matching Step and then matches the coordinate system based on any changes that occurred during off device process Step . The mobile device now displays digital data overlaying it onto the real world view Step . The process continues entering a feedback loop Steps as needed. That is to improve system accuracy a feedback loop may be included between the GPS IMU and magnetometers. As the GPS is periodically updated during movement a path may be correlated to the IMU and magnetometer signals.

At this point the process may enter another loop with the next video frame being grabbed Step and the coordinate system being maintained as indicated Step .

The user may be given the option of performing a manual overlay of the geometry onto the real world imagery if the system cannot perform an adequate lock. Other methods of providing a lock may incorporate a calibration process an example of which may be accomplished through the image capture of a known object at a known location . The scaling of the object may provide distance while the edges or other geometry information may be used to set orientation of the user. The use of multiple objects may further increase accuracy.

Another feedback loop using existing photographic databases may be constructed. Correlation edges and or image correlation from known poses and positional data incorporated in metadata associated with 2D imagery may be used to correlate the user s position and pose.

The use of synthetic geometry may additionally be used for indoor registration and the setting of way points or otherwise used for navigation. The edges of walls doors pillars windows etc. from architectural or design drawings a form of synthetic geometry may be used for the edge matching filters on the mobile device. The geometry of the building may be downloaded to the mobile device and the same processing as is done for outdoor geometry may be used to geo register the mobile device i.e. hidden line removal perspective setting geometry correlation etc. With the geometry of the interior structure known distances between features will also be known so that as the geometry is correlated the user s changing position within the structure may also be correlated allowing the user to navigate within the building.

Additional information regarding the system and its functioning is provided in the attached appendix.

While the invention has been described in detail and with reference to specific embodiments thereof it will be apparent to one skilled in the art that various changes and modifications can be made therein without departing from the spirit and scope thereof. For example while a mobile device is illustrated the instructions for performing application functions may be included in any computer program product configured for execution by one or more processors.

Thus it is intended that the present invention cover the modifications and variations of this invention that come within the scope of the appended claims and their equivalents. It is to be understood that terms such as left right top bottom front rear side height length width upper lower interior exterior inner outer and the like as may be used herein merely describe points of reference and do not limit the present invention to any particular orientation or configuration.

