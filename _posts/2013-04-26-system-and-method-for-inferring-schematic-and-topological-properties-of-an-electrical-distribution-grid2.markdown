---

title: System and method for inferring schematic and topological properties of an electrical distribution grid
abstract: A system and method for inferring schematic and topological properties of an electrical distribution grid is provided. The system may include Remote Hubs, Subordinate Remotes, a Substation Receiver, and an associated Computing Platform and Concentrator. At least one intelligent edge transmitter, called a Remote Hub Edge Transmitter, may transmit messages on the electrical distribution grid by injecting a modulated current into a power main that supplies an electric meter. The Subordinate Remotes, Remote Hubs, the Substation Receiver, and the associated Computing Platform and Concentrator may contain processing units which execute stored instructions allowing each node in the network to implement methods for organizing the on-grid network and transmitting and receiving messages on the network. The Substation Receiver, Computing Platform and Concentrator may detect and infer schematic grid location attributes of the network and publish the detected and inferred attributes to other application systems including geospatial information systems maintaining the logical and physical network model.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09614586&OS=09614586&RS=09614586
owner: Dominion Resources Services, Inc.
number: 09614586
owner_city: Richmond
owner_country: US
publication_date: 20130426
---
This application claims priority to U.S. Provisional Application No. 61 766 551 filed on Feb. 19 2013 and U.S. Provisional Application No. 61 779 222 filed on Mar. 13 2013 the contents of which are incorporated herein by reference.

The present invention is directed toward employing the electrical distribution grid as a short and long range transmission medium and data bearing network and further toward the use of signals and messages on the network for the purpose of inferring schematic and topological properties of the distribution grid which vary over time.

The power grid is generally considered to be composed of two logical regions the Transmission Grid s and the Distribution Grid s . The Transmission Grid originates at large generation points such as hydroelectric dams nuclear reactors wind farms and coal fired or gas fired power plants. Power from the generation point is transmitted as high voltage alternating current AC over a loosely connected network of long high voltage lines to points where demand for power exists such as factories farms and population centers. At the edges of the Transmission Grid there is a collection of Distribution Substations. Distribution Substations contain one or more Substation Transformers which step down the voltage from high transmission line levels typically 130 kV to 700 kV to the medium voltage levels typically from 4 kV to about 35 kV at which power is distributed to consumers within a distribution service area. At the edge of the Distribution Grid are a number of Service Transformers which transform the medium voltage of the distribution grid to the low voltages in the US typically 120V 208V 240V 277V or 480V . Other voltages in addition to some of these can be used elsewhere in the world. In some cases a tier of one or more transformers called step down transformers lying schematically between the Substation Transformers and the Service Transformers create intermediate voltage reductions between the Substation and the Service Transformers. Each Service Transformer powers one or more metered loads. A load can be a dwelling a commercial or industrial building an element of municipal infrastructure such as a series of street lamps or agricultural apparatus such as irrigation systems. A typical distribution grid includes other elements used to balance and regulate the flow of power. Examples of such elements are capacitor banks voltage regulators switches and reclosers. illustrates a typical segment of the power grid.

Distribution grids have been designed and deployed in a variety of topological configurations. In the United States distribution grid types are typically characterized as radial loop or networked. Other emerging cases are the campus grid and the microgrid. Additional topologies not described are used elsewhere in the world.

A distribution substation receives high voltage power from the transmission grid into one or more large power transformers. A distribution transformer may incorporate a type of regulator called a load tap changer which alters the voltage the transformer delivers to a power distribution bus the substation bus by including or excluding some turns of the secondary winding circuit of the transformer thereby changing the ratio of input to output voltage. One or more feeders depend from the substation bus. If too many feeders are required additional transformers and busses are used.

In order to monitor and control the components of the grid current transformers CTs or other current sensors such as Hall effect sensors are attached to power bearing conductors within the substation. The CTs output a low current on a looped conductor which is accurately proportional to the current delivered at the high voltage conductor being monitored. These low current outputs are suitable for connecting to data acquisition subsystems associated with Supervisory Control and Data Acquisition SCADA systems in the substation. Primary monitoring CTs are designed and built into the substation because changing or adding CTs to the high voltage components is impossible or dangerous while current is flowing. On the other hand additional CTs may be safely added to the low current SCADA loops as needed without impacting power delivery.

In addition to the power lines themselves the distribution grid contains numerous other devices intended to regulate isolate stabilize and divert the flow of power. These devices include switches reclosers capacitor banks usually for power factor correction and secondary voltage regulators. All these devices affect the behavior of the distribution grid when considered as a data bearing network as do the various loads and secondary power sources on the grid. Devices that have abrupt state changes will introduce impulse noise on the grid as can loads turning on and off. Some devices such as transformers and capacitor banks filter and attenuate signals at certain frequencies.

Other than the wires connecting a consumer load and the associated meter to a service transformer the service transformer is the outermost element of the distribution grid before the power is actually delivered to a consumer. The meter is attached at the point where the power from the service transformer is delivered to the consumer. Service transformers can be three phase dual phase or single phase as can meters.

Traditionally reading meters was one of the largest operational costs incurred by electrical utilities. Original electric meters were analog devices with an optical read out that had to be manually examined monthly to drive the utility billing process. Beginning in the 1970s mechanisms for digitizing meter data and automating its collection began to be deployed. These mechanisms evolved from walk by or drive by systems where the meter would broadcast its current reading using a short range radio signal which was received by a device carried by the meter reader. These early systems were known as Automated Meter Reading systems or AMRs. Later a variety of purpose built data collection networks employing a combination of short range RF repeaters in a mesh configuration with collection points equipped with broadband backhaul means for transporting aggregated readings began to be deployed.

These networks were capable of two way communication between the metering head end at a utility service center and the meters at the edge of this data collection network which is generally called the Advanced Metering Infrastructure or AMI. AMIs can collect and store readings frequently typically as often as every 15 minutes and can report them nearly that often. They can read any meter on demand provided that this feature is used sparingly and can connect or disconnect any meter on demand as well. AMI meters can pass signals to consumer devices for the purpose of energy conservation demand management and variable rate billing. Because the AMI network is separate from the power distribution grid AMI meters are neither aware of nor sensitive to changes in the grid topology or certain conditions on the grid. Nonetheless the introduction of AMI is generally considered to be the beginning of the Smart Grid.

Many characteristics of the electrical distribution infrastructure have limited the success of efforts to use the grid itself as a communications medium. First the grid is a noisy environment. As already noted state changes in loads on the grid as well as control and regulation artifacts on the grid itself cause impulse noise on the power line. Normal operation of loads like electrical motors simple variations in the overall load and ambient RF noise chiefly from lightening and other weather related causes add up to significant Gaussian noise. The measured noise floor at a typical substation in the United States sits at about 80 90 dB below the maximum amplitude of the 60 Hz fundamental. The complex impedance of the grid varies across both the frequency and time domains. This may lead to loss of signal at a receiver sited at a higher voltage point on the grid when impedance increases or alternately force the transmitter to use more energy than would be necessary on the average. Capacitor banks sited at points along the grid for the purpose of optimizing the power factor can cause signal attenuation. Most significantly transformers act as low pass filters dramatically attenuating signals above a certain frequency. The threshold frequency is not the same on every distribution grid because different arrangements and types of transformers are employed and because the transformers themselves are not deliberately tuned to filter at a specified frequency. All these variables impact the frequency response of the medium.

Additionally injecting modulated current signals on the grid may cause interference between the injected signals themselves. One problematic phenomenon is crosstalk where a signal injected on one power line is detectable on another line. When crosstalk occurs on two or more phases of the same feeder it can be caused by inductive and capacitive coupling as the phase lines run alongside one another for most of the length of the feeder. Crosstalk may also be due to multiple phase windings on the same transformer core. Feeder to feeder crosstalk has also been measured and may be caused by reflection of the injected signal off the power bus at the substation. Given the complexity diversity and age of the distribution grids in the United States and the world less is known about these phenomena than might be expected.

Finally using the distribution grid as a communications medium often has side effects which interfere with the primary purpose of the grid which of course is delivering clean reliable power to consumers. If devices under power resonate with an injected current a phenomenon called flicker results. LED CFL incandescent and fluorescent lighting visibly flickers in response to certain frequencies. This is annoying and sometimes dangerous as visual flicker has been demonstrated to cause both seizures and vertigo. Other types of devices such as fans and speakers also resonate at certain frequencies causing an audible hum. ANSI IEEE standard 519 requires any device whether intended as a communication device or not that injects current on the grid to avoid doing so at certain frequencies and amplitudes to avoid causing flicker. Specifically ANSI IEEE standard 519 requires that no noise be added to the odd harmonics of the fundamental at or below the eleventh harmonic.

Despite the many engineering difficulties inherent in using the power grid as a communications medium it has remained attractive to electrical utilities because the utility already owns the infrastructure and it is present at all the points where the utility needs to collect data. Further the regulatory and cost structure of publicly owned utilities POUs strongly favors them using owned assets which can be profitably purchased and maintained via service rate increases as opposed to paying operating expenses to a third party communications provider such as a telephone or cable provider.

High frequency transmissions above 1 MHz are attractive because theoretically high data rates can be achieved. Such schemes called BPL for Broadband over Power Lines offer a potential theoretical bandwidth sufficient to deliver internet access to consumers via a gateway located in their electrical meter. In the early years of the twenty first century the Federal Communications Commission FCC in the U.S. actively promoted the concept of Access BPL as a means of delivering high speed Internet access to rural American families. Long range transmission of BPL signals however is impractical and expensive because every transformer between the transmitter and the receiver must be fitted with a bypass or repeater mechanism or the low pass filtering characteristics of the transformer will block the signal. In the United States where the number of consumers per service transformer tends to be very small in rural areas often only one the cost to implement BPL becomes prohibitive. Additionally RF interference caused by BPL transmission has created opposition from aviation commercial radio amateur radio and other sectors. The FCC has attempted to be supportive of BPL technology but new compromise rules requiring BPL installations to be capable of notching out avoiding frequencies where interference is reported have increased the complexity of managing a BPL service. Several attempts at deploying BPL consumer services have been abandoned.

Under the umbrella name Power Line Communication or PLC some medium frequency power line protocols have been used with success for Smart Grid applications especially in Europe and other locales with European style grid architectures where the number of consumers per service transformer is much larger than in the United States. The two most commonly used medium frequency PLC initiatives are PRIME and G3 both promoted by commercial alliances based in Europe. PRIME uses orthogonal frequency division multiplexing OFDM at the physical layer with 512 differential phase shift keyed channels DPSK . PRIME achieves data rates as high as 128.6 kbps but is most reliable at 21.4 kbps. Its frequency range is 42 89 kHz. G3 uses a similar physical layer combination of OFDM and DPSK offering 256 channels between 35 and 91 k Hz with a data rate of 33.4 kbps. Both G3 and PRIME are still sharply attenuated by transformers though in most cases a receiver located on the medium voltage side of a service transformer can successfully read meter transmissions from low voltage sites served by that transformer provided that the receiver is sited close enough to the service transformer. For these reasons Smart Grid technologies based on these protocols are common in Europe and Asia. PLC protocols are also well adapted to short range power line applications such as arbitrating the charging of electric vehicles.

At the other end of the spectrum are ultra low frequency systems chiefly used for control systems because they have little data bearing capacity. Audio Frequency Ripple Control AFRC systems are used mostly in rural areas for load management to turn off high consumption devices such as electric heaters and air conditioners during peak load times or to control use of other constrained resources such as automated farm irrigation systems. An AFRC transmitter sits on the high voltage side of a substation or transmission transformer and may service multiple substations. AFRC data rates vary from 2 to 10 bits per second and the maximum message length is about 100 bits. After such a transmission the transmitter requires a long idle period before it can transmit again with a maximum duty cycle on the order of 10 . AFRC systems cause obvious flicker but not at a dangerous frequency. Because they are typically used in areas of low population density and transmissions are infrequent the side effects are tolerated. AFRC is a broadcast technology operable from high voltage to low voltage and thus cannot be used for collecting meter data or other data about edge conditions because that requires transmitting from low voltage to higher voltage.

Aclara s TWACS technology operates by injecting pulses onto the power line when the fundamental power carrier crosses the zero point twice per 50 Hz or 60 Hz cycle. This method operates either from substation to edge or edge to substation and uses a polling protocol to avoid having one edge transmission interfere with another. It is slow because it is tied to the fundamental and because of the polling architecture. It has been criticized by consumer groups for the amount of impulse and broadband noise it introduces onto the grid.

Landis Gyr employs a low cost low frequency edge transmitter originally developed by Hunt technologies intended to operate in conjunction with AFRC to provide two way communication over long distances on the grid. The data transmission method using this transmitter is cheap and reliable but limited. It induces sympathetic current oscillations by connecting variable impedance to the power line. The data rate is low because the transmitter is dependent on a voltage relative to the power carrier so that only a few pulses can be injected per 50 Hz or 60 Hz cycle. To achieve enough redundancy for detection at the receiver the same signal must be repeated for several cycles resulting in a data rate measurable in cycles per bit rather than bits per cycle. The method is also very noisy in that each pulse resonates across a broad frequency band.

Despite their limitations low frequency systems such as those from Aclara and Landis Gyr have achieved market penetration in rural areas where wireless systems are cost prohibitive.

The problems with and limitations of the high medium and low frequency PLC methods as discussed above have led in the 21century to rapid development of custom built wireless networks for AMI data collection in the U.S. High frequency on grid methods have proven to be too expensive not sufficiently reliable and too fraught with error and uncertainty to be commercially viable. Low frequency methods can be implemented with low cost edge to substation transmitters but these lack the data bearing capacity required by modern AMI and on grid low frequency substation to edge transmitters like AFRC are large expensive and have undesirable side effects which limit their use in urban settings. One possible option would be to use high frequency substation to edge transmitters in conjunction with low frequency edge to substation transmitters. However in the U.S. market forces have led to the rapid penetration of wireless AMI systems especially in urban and suburban areas.

Cost constraints and availability of unregulated spectrum have dictated the use of mesh architectures at the edge of the AMI networks with neighborhood concentrators that collect data from the meters and use traditional infrastructure fiber or cellular for backhaul to data centers. Mesh architecture means that although the RF transceivers used have individually high data rates the edge networks are easily saturated. Most of the available data bearing capacity in these networks is used just for reporting meter interval data with limited capacity reserved for firmware updates and control packets for applications such as demand management.

Two major factors limit the utility of the existing AMI infrastructures. The first is of course the capacity limitations of the mesh. The second and more significant is the fact that the AMI network is not congruent with the electrical grid. It is capable of providing little information about the operational state of the grid. This is unnecessary for meter reading but more sophisticated Smart Grid applications for energy conservation asset protection load balancing fault isolation and recovery management require accurate information about the schematic relationship of grid assets load and conditions on the several segments of the grid and the current state of bi modal and multi modal assets. This information together with the geospatial locations of the same assets is called the Grid Map.

Utilities typically maintain two maps or models of the Grid. A Physical Network Model PNM aggregates the geospatial location of the assets on the grid. PNMs thanks to modern GPS technology are reasonably accurate with respect to point assets such as substations capacitor banks transformers and even individual meters. Inaccuracies stem from failure to update the maps when repairs or changes are made. For example a service transformer may move from one side of a street to the other as a result of street widening. Longitudinal assets especially buried cables are less well represented in the PNM. The PNM can contain as designed data but since in many places the cable was laid before global positioning technology had matured the designs were based on ground level survey and the original maps may or may not have been updated to reflect changes. Subsequent surface changes complicate the problem of verifying the geographic path taken by medium voltage distribution lines.

The second model is the Logical Network Model or LNM. LNMs describe how grid components are connected without reference to their geospatial location. The LNM changes frequently. During the course of repairs the way transformers attach to taps and laterals and meters attach to transformers may be altered. Such changes affect both the LNM and the PNM. In many utilities such changes are recorded manually by field agents. The manual reports may or may not be updated in the LNM and PNM and when updates are made the time lag between maintenance occurring and its being recorded is variable. Additionally many grid components especially regulators switches and reclosers change state automatically. Unless these components are instrumented with communications back to a data center rather than simply being subject to local control systems such dynamic changes are not reflected in the LNM. They do however affect the power path the load and environmental stress on other components of the distribution grid and the service level to consumers.

Examples of significant but not reliably known aspects of the actual Grid Map are the feeder and phase by which each meter is currently powered the relative load on each phase of each feeder especially on subordinate branches laterals of the grid the actual voltage supplied to each meter the power factor along the edges of the grid whether all the power drawn at a transformer is metered and the state of switch sets especially after a weather event that has caused outages. If this information were reliably known utilities could conserve energy much of the savings from which would pass on to consumers save maintenance costs prolong the life of equipment in the field improve the efficiency and life of utility and consumer equipment avoid outages and reduce recovery times after unavoidable outages.

The problem of automated dynamic grid mapping is not solved by wireless Smart Meters. Smart meters can measure and record current voltage and power factor or phase angle at the meter but because they have limitations on how much data they can store and how much data capacity is available for transmission utilities may choose not to program the meters to report these data. The other data elements described cannot be detected by most modern AMI systems. U.S. Pat. No. 7 948 255 to Coolidge et al. discloses instruments for phase detection. However the instruments in Coolidge are intended to be used by field engineers rather than incorporated into the Smart Grid.

The consensus among utilities is that the volatility of the LNM is such that using field engineers to measure and monitor changing attributes of the grid map is not a cost effective or workable solution. For example conservation voltage regulation efforts were undertaken in the 1990s based on static measurements and subsequently abandoned because the measurements became outdated too quickly. Today utilities habitually oversupply consumers delivering an average effective voltage of 122vAC to a 15 or 20 amp rated circuit in a residence to ensure that fluctuations in load power losses in the home wiring etc. do not result in some consumers service falling below 110vAC effective at individual outlets inside the building which is generally the optimum for home appliances and the like. The goal of a well instrumented fine grained conservation voltage regulation system might be to reduce the typical effective voltage at a single phase meter to 114vAC as measured from one leg of the typical 240vAC service to neutral. 114vAC effective at the meter is as low as it is reasonable to go without risking under powering some outlets in the building i.e. not less than 110vAC at any outlet due to additional losses which are typical inside the home or office.

Since electrical devices consume more energy when powered at the high end of their rated range this practice of over delivering impacts consumers electric bills directly as well as forcing generation poor utilities to buy power increasing their costs. Ultimately the practice results in more fossil fuel being consumed than necessary.

Cost constraints also dictate that placing SCADA instrumentation at every medium voltage field asset is impractical. The touch points on the distribution grid are for better or worse largely the meters at the edge and the instrumentation in the substations. This dictates that techniques for power line communication be revisited because signals traveling on the power line can be used both to infer and to report grid mapping information not detectable by means of wireless AMI. The ubiquitous presence of wireless AMI for reporting meter data can be considered as a benefit in the search for effective grid mapping technology in that it frees the limited data bearing capacity of low frequency on grid transmission methods to support grid mapping systems instead. It is however needful to identify a transmission method that is low cost at the edge coexists with the AMR or AMI and does not trigger any of the above noted pitfalls of on grid transmission requirements for intermediate devices such as repeaters between the edge and the substation unacceptable flicker RF interference impulse noise etc. Finally the transmission must require very little power because the energy expended driving the transmitters reduces the energy conservation benefits obtained.

As discussed above some existing PLC methods have adapted radio modulation techniques and channel access methods to the medium of the electrical distribution grid. For example PRIME uses FDMA with DPSK.

In addition Code Division Multiple Access CDMA is a channel access method most famously used in cellular telephony standards cdmaOne WCDMA and CDMA2000. CDMA spreads its signal across a range or band of frequencies as do other similar technologies hence the term broadband. Multiple access means that more than one transmitter can use the same channel here a power line without the signal from one transmitter destructively interfering with the signal of another transmitter. In CDMA each transmitter which uses the same band is assigned a distinct reference code or chip. The transmitted signal equals the exclusive OR XOR of the chip with the data signal. If the chips treated as binary vectors are mathematically orthogonal then the receiver can separate out the several data signals from the additive received waveform. A requirement of standard CDMA as used in a wireless application is that there is a dynamic feedback loop from receiver to transmitter to ensure that the power of the several signals received from the different transmitters is the same or nearly the same at the receiver. The feedback loop permits the transmitters to rapidly and dynamically adjust their transmission power to maintain the balance.

Frequency Division Multiple Access FDMA means that multiple channels in a medium are created by having different transmitters use different frequencies or different frequency bands . A signal injected on the power line creates harmonic signals of different amplitudes. If the frequency division bands are incorrectly chosen then the harmonics from different bands can coincide and create false signals that interfere destructively with the intended signals. The obvious means of eliminating this effect is to place the channels far apart on the frequency spectrum. This however reduces the overall data bearing capability of the medium by wasting spectrum.

A third channel access method is Time Division Multiple Access or TDMA. In TDMA the channel is divided cyclically over time with each transmitter sharing the channel assigned a specific time slot in the cycle where that transmitter uniquely has permission to transmit. TDMA requires that all the transmitters have system clocks which are synchronized with one another within a close enough tolerance that one channel accessor does not overlap its transmission with that of another channel accessor.

The present invention includes a system comprising at least one intelligent edge transmitter called a Remote Hub Edge Transmitter each small enough to reside inside a Smart Meter. A Smart Meter that contains a Remote Hub Edge Transmitter is called a Remote Hub GLA Smart Meter or simply a Remote Hub. The Remote Hub transmits by injecting a modulated current into a power main that supplies an electric meter. The system also includes at least one receiver sited at at least one electrical distribution substation operable to receive transmissions from the intelligent transmitters. No additions or alterations to the distribution grid between the Smart Meters and the substation are required to allow the receiver to reliably detect and decode transmissions from the edge transmitters. The system further comprises one Computing Platform for each substation that contains at least one receiver the Computing Platform having access to a conventional high speed network such as the Internet for transmitting data acquired from the at least one receivers to a data center at which the received data is used by a Concentrating Computer System or Concentrator to update other utility systems such as but not limited to the LNM and PNM. In some microgrid deployments the Computing Platform and the Concentrator may be the same server with the data center sited inside the service area of the microgrid. The system may additionally comprise Smart Meters or other devices such as field deployed switches and voltage regulators which are not Remote Hubs augmented by intelligent platforms operable to employ short range PLC transmissions using a well known protocol such as G3 or PRIME to communicate with at least one Remote Hub. Such augmented devices which are not Remote Hubs are designated as Subordinate Remotes and any augmented device without regard for whether it is a Subordinate Remote or a Remote Hub may be referred to generally as a Remote. Each Remote Hub manages only Remotes powered by the same service transformer as the Remote Hub. A short range on grid network consisting of a collection of Remotes comprising at least one Remote Hub and zero or more Subordinate Remotes is called a Transformer Area Network or TAN.

Subordinate Remotes Remote Hubs the Substation Receiver and the associated Computing Platform and Concentrator all contain stored programs on non volatile computer readable memory on which are stored instructions for operating a Grid Location Aware GLA network. The Subordinate Remotes Remote Hubs the Substation Receiver and the associated Computing Platform and Concentrator also contain processing units CPUs which execute the stored instructions allowing each node in the network to implement methods for organizing the on grid network and transmitting and receiving messages on the network in order to permit other methods embodied as stored programs and executing on the at least one Substation Receiver Computing Platform and Concentrator to detect and infer schematic grid location attributes of the network and publish the detected and inferred attributes to other application systems including geospatial information systems maintaining the logical and physical network model.

One method implemented by the Remote Hubs and the Substation Receiver provides for channelizing and modulating current signals transmitted from the at least one Remote Hub in the service area of an electrical distribution substation such that the signals are received at the Substation Receiver and the Substation Receiver is able to infer the electrical phase of the specific feeder upon which the signal was transmitted. The signal is transmitted on a broad band of the frequency spectrum called a channel but the frequency bands of channels are selected so that the frequency is lower than the low pass threshold of the service transformer that powers the Edge Transmitter. Several modulation techniques have been used in this context including frequency spread modulation Binary Phase Shift Keying BPSK and Quadrature Phase Shift Keying QPSK . Higher order modes of phase shift keying mPSK may be used. However BPSK and QPSK may be preferred embodiments along with frequency spreading because higher order PSKs require more power at the transmitter in order to achieve the same signal strength at the receiver. According to some embodiments of the methods an Edge Transmitter is capable of encoding at least 80 bits per second of post FEC forward error correction data in a burst transmission at low but adequate current so that the signal is not so significantly attenuated by intermediate transformers capacitors long lines underground wiring and the like to prevent reception by the Substation Receiver. In other embodiments an Edge Transmitter may be capable of encoding at lower bit rates. Encoding at lower bit rates improves reliability but limits the amount of data transmitted. In order to obtain the same post FEC message success rate while transmitting at at least 80 bps different modulation types may require different Forward Error Correction rates. The method requires little power to inject the signal so that the signals as modulated do not radiate energy in the RF spectrum or cause flicker or hum on devices in proximity to the transmissions or exhibit any of the other undesirable characteristics of prior art methods of on grid messaging. The method works on all the grid topologies described herein above and can support a sufficient number of Remote Hubs per substation transformer that even the largest substations can be fully covered by the resulting Grid Location Aware network.

The Substation Receiver may also implement a variety of methods of sampling the ambient waveforms at a multiplicity of frequency bands on the power lines filtering out the high energy harmonics of the fundamental power wave detecting the signal on one or more of a plurality of power lines comprising each of the three phase lines of each feeder emanating from each bus of a given substation transformer inferring the phase and feeder combination on which the signal was transmitted based upon a comparative analysis of each of the power lines ranking them based on the signal quality error performance and or amplitude versus frequency at a multiplicity of points throughout the spectrum of interest. When the Substation Receiver has completely processed a transmission it packages the decoded transmission together with any additional information about the message inferred by the receiver logic such as the phase and feeder on which the message was transmitted the channel on which the message was transmitted and an indication of the parameters of the modulation method used for that transmission. The Substation Receiver forwards the entire message package to the substation Computing Platform using a normal TCP IP based protocol such as HTTP.

Another aspect of the invention is a method of identifying which frequency bands are the best data carriers at each substation transformer defining at least one data bearing channel on the candidate frequency bands optionally defining a series of time slots on each channel in which edge devices may transmit selecting a modulation technique and if frequency spreading is the chosen modulation technique defining a set of at least one orthogonal codes or chips per channel to be used for modulating transmissions. The combined channelization model is then employed by the method to provision the collection of GLA Smart Meters including both Remote Hubs and Subordinate Remotes supplied with power by a substation to assign to each of the at least one Remote Hubs a policy describing on which frequency based data bearing channel s the Remote Hub may transmit and under what circumstances the Remote Hub must transmit. The policy describes multiple aspects of the channels including modulation method frequency bands chip selection algorithm if chips are used and message preamble pattern. Frequency based channels and chips must be assigned in such a way that transmissions are not destructive when segments of the grid are for example switched from one substation transformer to another. The provisioning scheme anticipates and minimizes the problem of crosstalk and provides means for logic on the Substation Receivers the substation Computing Platforms and the Concentrator to hierarchically process the messages received from each Remote Hub and use them to infer the state of stateful non edge features of the grid such as switches reclosers and breaks in the power lines. Other properties of the transmission are determined dynamically by firmware and instrumentation on the Remote Hub. For example the power used when transmitting may be related to the impedance of the line as measured immediately prior to transmitting.

In some embodiments of the invention a number of techniques may be employed for managing channel quality depending on the availability of Substation to Edge broadcast capability from adjacent networks such as an AMI AMR and or radio broadcast transmitter. Software on the Substation Receivers and Computing Platform may monitor aspects of the channel quality and take measures to ensure that messages from the Remote Hubs experience an acceptably high success rate. According to one aspect of the invention an acceptably high success rate may be ensured by rotating the responsibilities of the several channels except that at least one non structured channel is not rotated but remains dedicated to provisioning and alerting. For example if two data bearing channels have been identified and one data bearing channel demonstrates a higher success rate than the other then the network may be provisioned to have Remote Hubs alternate between transmitting on the better channel and the other channel. This reduces the overall probability of a given Remote Hub experiencing an unacceptably high message failure rate.

Other options for channel management may be to alter the definition of a channel so that the channel has a wider frequency spread and or uses more FEC bits per burst. Still another option is to move a channel to a different place in the spectrum either permanently or at different times of the day based on an observed cycle in impedance impulse noise or some other characteristic of the channel relevant to message success rate. None of these mechanisms require a fast feedback loop between the Edge Transmitters and the substations as is the rule with some modulation techniques such as CDMA. Rather the apparatus at the substation conducts a time duration analysis of the behavior of the network and then broadcasts new provisioning policy based on the analysis. Many characteristics of the network may be taken into account when making a policy change such as observed patterns of crosstalk variations in impedance harmonic mixing and the like. A policy change may impact multiple substations which may be interconnected by switching systems or other forms of redundancy.

Yet another aspect of the invention is a method employed by the stored programs at each of the at least one Remote Hubs to integrate the Edge to Substation GLA network with adjacent networks such as the AMI regardless of the AMI architecture and the higher frequency PLC based Transformer Area Network as well as with the native intelligence of the Smart Meter platforms themselves. In this method the Remote Hub whose high frequency PLC protocol stack e.g. PRIME enables it to act as the master node in the TAN carries out the TAN management activities. TAN management activities include but are not limited to polling the PLC protocol stack to detect newly discovered Subordinate Remotes. The Remote Hub also polls the local native Smart Meter intelligence to obtain local data such as current voltage and phase angle and polls the reachable population of Subordinate Remotes to obtain similar data from the native Smart Meter intelligence at the Subordinate Remotes. The Remote Hub stores compresses and or processes the gathered data according to the policies and application algorithms on the Remote Hub until the operable policy dictates that the gathered data and or derived results of the gathered data may be transmitted to the Substation Receiver by the Edge Transmitter module of the Remote Hub. The Remote Hub is further responsible for using its provisioned policy and discovered TAN configuration data to determine when it is appropriate to format encode and transmit an alert message on an edge to substation channel. Such messages may include pairing messages which report the discovery of a new Subordinate Remote pairing alerts which report the loss of communication with a known Subordinate Remote other alerts which report changes in the TAN or at meters such as power surges sags and spikes and scheduled data reports which transmit the data collected from the native Smart Meter intelligence in the TAN to the apparatus at the substation. In some embodiments of the invention channels are not time slotted and Remote Hubs may transmit only exception reports or computed data reports on a randomized posting schedule in which an adequate number of transmissions are performed to provide an acceptable probability of achieving at least one successful transmission at the desired rate.

If slotted channels and or time scheduled transmission policies are used the Remote Hub may require a method of synchronizing its system clock to a known tolerance with other Remote Hubs in the same service area. Each Remote Hub may poll the local meter or AMI network to obtain the AMI network time which the Remote Hub uses to determine when scheduled transmissions must occur and to obtain data blocks received via the AMI which are intended for the Grid Location Aware intelligence on the Remote Hub or on the Subordinate Hubs. Such data blocks may include firmware updates and changes in network policy or provisioning which will affect the subsequent behavior of the Subordinate Remote. The Remote Hub distributes firmware updates and policy changes to the Subordinate Remotes as necessary via the local PLC channel of the TAN. Additionally Remote Hubs may synchronize based on a wireless broadcast signal. If no synchronization method is available channel access may not be based on time slots at all. This reduces the data bearing capability of the network but does not impact the ability of the system to provide grid location data. In some embodiments Remote Hubs and or Subordinate Remotes may contain a Global Positioning System GPS receiver. The GPS signal may be used for synchronizing the Remote Hubs in addition to providing means to associate the logical network model with the physical network model.

In still another aspect of the invention the Computing Platforms and the Concentrator maintain two master data tables which can be initially extracted from the utility s PNM and or LNM or which can be entirely accumulated from reports from the Remote Hubs. These data tables are the Inventory which is a table of all the Remote Hubs and Subordinate Remotes which have been detected and the Grid Map which is a schematic representation of the grid s topology and state similar to an LNM. The Grid Map and Inventory at substation Computing Platforms may be partial representing only the portion of the grid accessible to the substation at least at certain times. The Grid Map and Inventory at the Concentrator generally represent the entire utility service area although gaps in the Grid Map may exist if instrumentation of the service area with Remote Hubs and Subordinate Remotes is incomplete. When the Computing Platform at a substation receives any message from a Subordinate Remote it compares the data in the message and the message enhancements inferred by the Substation Receiver with the data in the Inventory and Grid Map. The logic and policy on the Computing Platform are used to determine if the local copy of the Grid Map and Inventory need to be updated and whether the update must be sent on to the Concentrator to update the master Grid Map and Inventory. If the policy in effect at the Computing Platform so dictates the data collected from the edge is also forwarded to the Concentrator. The Concentrator in turn carries out policies dictating which events and scheduled reports must be published out to other data center applications.

The present invention comprises a system and methods for constructing and operating an on grid data collection network in such a way as to integrate the network with other adjacent networks and devices present at the edge substations and features of an electrical distribution network wherein the other networks and devices may include Smart Meters and the AMI and a conventional network such as the Internet. The system and methods further integrate the data collected by the on grid data collection network at a data center and may publish the collected data to other applications. The system and methods may also employ the capabilities of the integrated networks to infer otherwise unknown static and transient attributes of the electrical distribution grid and report them via the integrated networks for the purpose of improving the physical and logical network models of the Smart Grid. This leads to the ability of the models to support Smart Grid applications such as conservation voltage reduction volt Var optimization load balancing fault isolation and recovery management.

Still referring to the substation tier comprises at least one Substation Receiver operable to receive transmissions from the Remote Hubs in the edge tier without recourse to any signal amplifiers bypass mechanisms or bridges installed on the medium voltage infrastructure of the electrical distribution grid. The Substation Receiver s connect via a local area network to a Computing Platform containing non volatile computer readable memory and a CPU for storing and executing the software which maintains the Inventory and Grid Map databases and carries out the tasks of provisioning and managing the converged data network. Additionally the Computing Platform stores and executes software which processes the Inventory and Grid Map data in combination with messages received from the Substation Receiver to infer information about the state of the Grid over and above what the Substation Receiver alone can detect based only on incoming transmissions. In some embodiments of the invention the computer based components of the Substation Receiver and the Computing Platform components are hosted on the same server. In such embodiments the communications protocol such as HTTP used to transfer data between the Substation Receiver and the Computing Platform software components need not change even though there is no physical local area network required. Computing Platform connects to a conventional wide area network such as the Internet for the purpose of communicating with a Concentrator in the data center tier . In some embodiments of the invention and regardless of whether the Computing Platform and Substation Receiver are the same server or separate servers the servers may be configured in a redundant cluster to ensure continuous operation of the system.

Referring again to the Concentrator hosts software with an analogous architecture to the software in the substation s comprising a network and data management component providing software services to one or more applications for Grid Location Awareness. The applications use conventional network based messaging protocols such as but not limited to JMS SOAP and REST to publish information to subscriber applications such as a Geospatial Information System . The data and network management component may integrate with AMI head end for the purpose of causing the AMI network to broadcast data blocks to the Remote Hubs in the edge tier . Data and network management component may integrate with AMI head end using a standard protocol and or a proprietary interface defined by the AMI vendor.

Other embodiments of the invention may include the convergence of alternative ancillary network components. For example Substation to Edge broadcast capability and or time synchronization from the substations to the Remote Hubs may be provided by medium voltage PLC transmitters attached to the feeders at the substation rather than using an AMI for this purpose. Likewise a separate radio transmitter broadcasting messages originating at the substation may be employed. The radio transmitter does not need to be physically located at the substation as long as there is a low latency network connection from the Computing Platform at the substation to the transmitter. The same radio transmitter may serve as the Substation to Edge channel for a multiplicity of substations. When the Substation to Edge channel is not an AMI synchronization of the Remote Hub clocks may be provided as described in U.S. patent application Ser. No. 13 566 481 titled System and Methods for Synchronizing Edge Devices on Channels without Carrier Sense which is incorporated herein by reference. In embodiments of the invention where channels are not slotted clock synchronization is unnecessary.

Still referring to Data Manager may be responsible for synchronizing the several processes access to the data stored on the ramdisks and so that each process at a given time is operating on completed data that was output by its predecessor process rather than attempting to access stale or volatile buffers. The Data Manager also can copy data from the ramdisks to a large archive disk for later study and post processing. By the time the messages have been demodulated and written to ramdisk they have been enhanced with enough information to identify the transmitter and infer the feeder and phase on which the message was transmitted as described in more detail below. The message bundle for each feeder phase on which the message was received may include but is not limited to the signal amplitude at characteristic frequencies within the frequency band the signal quality as determined by Demodulator figure of merit measurements the time the signal was received and the chip if any with which the message was encoded. These message bundles are passed to the Network Management and Grid Location Awareness software via interface . These software components not shown in but shown as and respectively in use the provisioning policies of the edge transmitters together with the message properties and the message content to determine which Remote Hub edge transmitter sent the message and compare the signal characteristics of the copies of the message received on each different feeder phase input where it was detectable in order to establish on which feeder and phase the message was actually transmitted. This conclusion is compared with the information in the grid map to determine if a change in grid topology or state has occurred. This allows the Grid Location Awareness algorithm to infer not only the phase of a meter where the phase was previously unknown but also changes in switch states in loop or networked configurations and schematic alterations in any type of grid resulting from repairs and maintenance.

Referring once again to the software components and on the Computing Platform decode the demodulated error corrected message received from the Substation Receiver at the semantic level. The semantic decoding may include decryption and a CRC check on the decrypted message. This helps preclude the introduction of false data for example due to tampering with the firmware on the Remote Hubs or installation of a meter from a different service area on the network for malicious purposes. Once the message has passed this level of decoding the data payload in the message may yield additional grid awareness information. A pairing message indicates that a new meter has been installed successfully or that a known meter is now connected to a different service transformer or a different phase of a multi phase transformer. Scheduled data messages may provide information about voltage levels demand and power factor at the edge as well as any other data or results computed from data available from the instruments at the Remotes limited only by the data bearing capacity of the channels. Even the failure of a scheduled message to arrive is informative indicating that there may be an outage. Any copy of the message may be used to extract data not only the copy from the feeder and phase on which the message was determined to have been transmitted. Sometimes the main copy may contain bit errors while crossover copies do not.

When all the information has been extracted from a message bundle at the substation the software components on the Computing Platform apply a policy to determine what data to forward to the Concentrator via conventional network for further processing and publication. In addition to carrying out data management policies Computing Platform may analyze the archived raw and enhanced signal quality data in order to determine whether beneficial changes in channel management ought to be made. When such changes are identified Computing Platform may forward recommendations to the Concentrator to ensure that the impact of all contemplated policy changes is understood at every substation that may be affected before the policy is put into effect.

Considering now the devices at the edge of the network shows an elevation of a single phase form 2s GLA Smart Meter which is operable to act as a Remote Hub in a Grid Location Aware network. Form 2s is standard format for a residential single phase meter in the United States. Other embodiments of the Remote Hub device may integrate with three phase meters or not be associated with a meter at all but plug into a 120V or 240V or other voltage outlet located at a building especially in a microgrid setting where the edge of the network is defined with a higher resolution than in a typical utility service area. In still other embodiments the Remote Hub device may be integrated with other devices and instruments on the distribution grid such as voltage regulators capacitor banks step down transformers and the like.

A typical Smart Meter has a layered design of circuit boards conformal to the meter housing such as a cylindrical transparent dome constructed of glass or Lucite. In the depicted embodiment the dome may be approximately 1.5 taller than usual to accommodate the height of the Edge Transmitter module . However the height of the meter housing varies from one manufacturer and model to another and does not place the meter in violation of the form standard. Nearest the top of the housing is the Calculation and Display Board which is part of every Smart Meter. Typically the display features on the Calculation and Display board such as indicator lights and a digital readout may be accessed by other components in the housing via interface . The Communications module contains the AMI transceiver circuitry and intelligence. In some Smart Meters the components of the Communications module are contained on the Calculation and Display Board but other smart meters can accommodate multiple types of Communications Modules by placing the communication components on a separate board as shown. Both configurations are common. If on a separate board Communications Module communicates with logic on the Calculation and Display board via an interface and cable . Other types of component to component interfaces are possible internal to the Smart Meter. The Edge Transmitter module contains the long range GLA edge transmitter and also the short range PLC transceiver for the TAN communications. Module also has a CPU microcontroller with nonvolatile memory that hosts and executes the stored programs of the Remote Hub control logic controlling the Edge Transmitter and the PLC transceiver and the interface to the other logic boards and .

Still referring to a typical frequency based channel of the present invention may span a wide enough area of the spectrum that several harmonics of the power fundamental occur within the channel. Because it is important to keep the amplitude of the injected modulated current as near as possible to the noise floor and to minimize the amount of power used to transmit in some embodiments of the present invention no signal is added to the spectrum at harmonics of the power fundamental. A shaping filter may be beneficially applied by the Edge Transmitter to avoid injecting current over the harmonics. This technique is also beneficial at the Substation Receiver which may apply comb filtering so that the preamble detector and demodulator are not required to process the signal on the harmonics. This saves valuable processor capacity in the compute intensive demodulation process.

When the modulation technique used is frequency spreading each frequency band such as and which is used as a channel is assigned at least one patterned code or chip. The rate of frequency variation of the chip is much higher than the rate of variation of the data signal. The actual frequency spread transmission injected as current on the channel is the exclusive or XOR of the channel s chip and the data signal. Adjacent and nearby channels are assigned mathematically orthogonal chips. The amplitude of the frequency spread current signals is as close as possible to the noise floor of the power line. This is beneficial in eliminating the problems associated with prior art PLC methods. For example if a transmission on one channel is folded over into another channel due to crosstalk the different encoding chips used causes the receiver to interpret the stray signal as noise allowing the receiver to still extract the correct signal. Additionally and regardless of the modulation technique any harmonics from one channel which extend into adjacent channels will also be interpreted as noise. The result of this combination of channel access restrictions and modulation techniques is one or more low frequency high quality current modulated channels which can bear in individual bursts a raw data rate of 120 bits per second or more or by example 80 bps after forward error correction using interleaving techniques to distribute data bits and FEC bits to minimize the probability of loss of related bits due to impulse noise. Time duration testing on a radial distribution grid transmitting an average distance of 3.5 miles line of sight from the substation yielded a frame error rate of 1.6e 6 using an FEC rate of with frequency spread modulation. It is recognized that the method and apparatus described may additionally be operated at lower data rates than cited.

Two of the channels in have a scheduled organization. This means that each Remote Hub is assigned specific time slots in which it may transmit on the channel. A third channel is still organized into slots but any Remote Hub with an exceptional condition to report may attempt to transmit in any time slot provided that it has not alerted recently. Specifically channel is organized by the method known as slotted aloha. Alerts when received at the substation are typically acknowledged via a Substation to Edge channel such as a wireless AMI network. If available other methods for acknowledging alerts may be employed. If no mechanism for acknowledging alerts is available then each alert can simply be transmitted multiple times with a randomly selected number of slots having elapsed between the transmissions. This however reduces the data bearing capacity of the alerting channel because in standard slotted aloha alerts are retransmitted only if they are not acknowledged. The rate of message failure will be the frame error rate of the channel already disclosed to be very low plus the rate of collisions. The rate of collisions in turn depends on the offered load which is based on the probability that more than one Remote Hub will attempt to transmit in a given slot. The optimum number of unacknowledged retransmissions to maximize message success rate is likely to be a small number such as two or three because with higher transmission rates channel saturation may occur.

The organization of an unscheduled channel may also use an un slotted protocol similar to pure aloha wherein the channel is not divided into time slots but wherein a transmitter may attempt to transmit at any time given that it has not already transmitted within a predefined recent interval. In this organization alerts may preferably be retransmitted only if not acknowledged within a predetermined period of elapsed time or they may routinely be transmitted a multiplicity of times if acknowledging alerts is impossible or undesirable.

The number and organization of channels described is by example only. On some substations only one reliable channel may be available. When only one channel is used either because of conditions or by design a plurality of time slots may be reserved for alerting while other time slots are scheduled. On some substations a plurality of reliable channels will be identifiable. The number of scheduled channels needed depends on the number of Remote Hubs and the number of scheduled messages each Remote Hub must send in a 24 hour period. In one embodiment two channels are sufficient to permit 12 000 hubs to transmit twice daily. If as is usual the substation transformer supplies many fewer than 12 000 hubs fewer channels than are available are required for scheduled messages alert thresholds may be lowered and more than one channel may be dedicated to alerts to accommodate the higher offered load. shows four alerts transmitted in the time interval shown. Two of the alerts have a high probability of being detected at the substation receiver. The alerts have collided in and will not be received correctly. conversely illustrates how the use of chips selected by means of the modulus of the time slot prevents some collisions. Here because of poor synchronization of clocks message transmitted in an even numbered slot of random slotted channel has overlapped with message transmitted on the same channel in the subsequent odd numbered slot. Both messages are decipherable at the substation because they were encoded using orthogonal chips. This is in contrast with the situation in where the intent of the two transmitters of messages was clearly to attempt to transmit in the same slot. These messages would still collide even if multiple chips were in use. In yet another embodiment of the invention an unscheduled unslotted channel might use frequency spread modulation and be assigned a plurality of orthogonal chips. A transmitter offering a message would select a chip from the plurality of chips at random thereby reducing the probability that the message would collide with another transmission on the same channel at an overlapping time.

Remote Hub has the capability to function in multiple operating modes. The Remote Hub may function as a Subordinate Remote. The Remote Hub may also function as a hybrid of Remote Hub and Subordinate Remote called a Proxy Hub. When a Remote Hub is first installed it monitors the PLC frequencies on the TAN for a period of time sufficient to determine whether another Remote Hub is already present. The wait time consists of a fixed period of time plus an additional period of time computed by a randomization function when the device is powered on. The fixed period of time is sufficient to ensure that a Remote Hub operating in the master mode would have executed its discovery algorithm which would be detected by the newly installed Remote Hub if another Remote Hub is operating within range. Typically within range means powered by the same service transformer but exceptions occur. The means of handling the exceptions are described herein below.

If a first Remote Hub is already present Remote Hub indicates by means of a light or digital display on the face of the Smart Meter that another Remote Hub is present. At this point an installer may elect to leave redundant Remote Hub in place or replace it with a Subordinate Remote unit. If left in place as a spare Remote Hub continues to function as a Subordinate Remote and the first Remote Hub continues to act as the Remote Hub and master node in the TAN. If no other Remote Hub is present Remote Hub begins to operate as a master PLC node on the TAN discovering and storing a list of any Subordinate Remotes in the same TAN. A Remote Hub may also enter a third mode Proxy Hub as described below. As soon as it takes on the master or hub role Remote Hub obtains the network system time if available for example by querying the AMI logic in the Smart Meter and formats encodes and transmits a provisioning request on an Edge to Substation channel reserved for provisioning requests and alerts. When a Substation Receiver detects the provisioning request it may cause a provisioning response to be sent either via the AMI or via an available on grid or wireless Substation to Edge channel. Provisioning data may also be supplied to a Remote Hub by means of a handheld device or drive by transmitter employed by the installer. The handheld device uses a personal area wired or wireless protocol such as Bluetooth infrared USB or RS232 to program the Remote Hub. In embodiments of the invention where the Substation to Edge channel is absent or very constrained the Remote Hub may be provisioned via handheld without knowledge of the inferred grid location of the Remote Hub. The same short range protocol in a handheld or drive by device may be used to distribute firmware or policy updates to Remote Hubs that lack a permanent Substation to Edge channel. It is sometimes desirable to activate a policy or program change simultaneously on a collection of Remote Hubs. If the Remote Hubs must be updated by means of a personal area protocol the programming device converts the desired future activation time to a relative wait time as each Remote Hub is programmed so that even though the Remote Hubs were programmed at different times they will activate the updated programming at approximately the same future time. Remote Hubs may be manufactured with a default policy or pre loaded with a default policy after manufacturing but before installation so that if no policy is provided at or subsequent to installation the Remote Hub still has a rule for operating.

The provisioning data provides the Remote Hub with the information it needs to manage the TAN including the location of and organization of other channels on the Edge to Substation network and the ordinal or sequence number of slots on scheduled channels on which this Remote Hub has permission to transmit. When the Remote Hub discovers Subordinate Remotes it transmits pairing messages on the Edge to Substation channel to inform the Computing Platform that it is in communication with the newly discovered Subordinate Remotes. Pairing messages may be transmitted on an alerting channel or on a scheduled channel depending on a policy established by the network. When a Remote Hub acting in the master role has discovered another Remote Hub on the same transformer and phase operating in the subordinate role the resulting pairing message indicates this. Including the presence of spare Remote Hubs in the Grid Map may provide a cost savings and more rapid recovery in that if the master Remote Hub should fail the TAN may be reconstructed by allowing the spare Remote Hub to assume the master role. The master Remote Hub may cache its policy information on a spare Remote Hub if present in order to allow the failover to occur even without re provisioning the TAN.

Hereinafter are disclosed methods for properly partitioning Remote devices into TAN groupings. PLC transmission power is controlled in order to keep the signal that gets through the Service Transformer low enough to avoid interference with other TANs. Specifically unless special accommodations in configuration are made as described herein below a Remote Hub must poll and collect data from only Subordinate Remotes on the same phase of the same service transformer as the Remote Hub. However at certain sites on some grids it may happen that at PLC standard power and frequencies the PLC transceivers in the Remotes may be able to discover Subordinate Remotes and Remote Hubs on other phases of the same service transformer or even on adjacent or nearby service transformers. In this aspect of the invention the detectable remotes may be partitioned wherever possible so that each TAN comprises exactly one master Remote Hub and all Subordinate Remotes or Remote Hubs acting as Subordinate Remotes on the same phase of the same service transformer and no Remotes of any type which are on a different phase or a different service transformer.

In one embodiment of the invention a Remote Hub s PLC protocol stack executes its discovery process which involves transmitting a beacon tone or message that causes other nodes in the vicinity to respond. The first time this is executed a standard initial power level is used. The TAN management layer of the Remote Hub operating above the PLC protocol stack obtains the list of discovered Remotes of any type. The Edge Transmitter of the Remote Hub is then employed to send a pilot signal at sufficiently low amplitude and high frequency that the pilot signal will not be detectable on the high voltage side of the service transformer. This pilot tone is not the same as a PLC discovery beacon. The pilot signal begins on a zero crossing of the power fundamental of the phase on which the transmitter resides. Other Remotes of any type which detect the pilot signal test to determine if the received signal began on the zero crossing of the phase on which the receiving Remote resides. If so the receiving Remote sends a positive response on the PLC channel and records the identity of the Hub Remote that sent the pilot tone. Another Remote Hub on the same phase as the pilot transmitter enters Subordinate Remote mode and will be considered a spare. Subordinate Remotes on other phases do not respond to the pilot tone. A Remote Hub that detects the pilot tone but is on a different phase sends a negative response. The transmitting Remote Hub uses the responses to update its inventory of TAN devices discovered automatically by the PLC discovery process recording the list of Subordinate Remotes and spares on its home phase and the list of Remote Hubs on other phases of the same service transformer. Remote Hubs which sent neither a negative nor a positive response are presumed to be on another service transformer. If this case exists the value of the initial power level amplitude for the PLC discovery beacon is reduced so that next time the full discovery process is executed it will be less likely that any Remotes on other service transformers will respond.

Next the first Remote Hub that transmitted the pilot tone examines the list of negative responders that is of Remote Hubs on a different phase. It selects one such second Remote Hub and orders it via the PLC protocol to transmit a pilot tone of its own. The first Remote Hub still the master node of at least all the nodes on the service transformer collects the resulting positive and negative responses and updates its inventory and partitioning data. At this point any spare Remote Hubs on the same phase as the second Remote Hub have also entered Subordinate Remote mode and the first Remote Hub now has a complete partitioning of Remote Hubs according to phases the Remote Hubs on the third phase if present being the intersection of the Remote Hubs sending negative responses to the first Remote Hub with the Remote Hubs sending negative responses to the second Remote Hub.

If a third phase is present the first Remote Hub now selects a third Remote Hub from the third phase and orders it via the PLC protocol to transmit a pilot tone and return the list of negative and positive responses it received. At this point a positive response will have been received from every Subordinate Remote on the service transformer the phase and mode of every device on the service transformer is known and a potential master Remote Hub for each single phase TAN has been identified. Additionally any node which responded to the original PLC discovery process from outside the transformer area has been identified.

Now the first Remote Hub sets its PLC transmission amplitude to a very low level and polls each remote. This first amplitude should be so low that no remotes respond. The first Remote Hub increases its transmission amplitude until ideally all remotes on the same phase and no remotes on another phase respond. The first Remote Hub records this low threshold level and then continues to increase the amplitude until a remote on another phase responds. The first Remote Hub records this as its high threshold level.

Now the first Remote Hub commands the second Remote Hub via PLC to attempt to take on the role of PLC master node for its phase sending in the command the low and high threshold amplitudes. This is called the partitioning command. The second Remote Hub sets the PLC transmission amplitude to the low threshold amplitude and restarts its PLC stack as a master node conducting a PLC discovery process of its own. If the second Remote Hub discovers all the Subordinate Remotes and spares on its own phase and no nodes on any other phase then has become the master of a single phase TAN and the partitioning step has succeeded. Otherwise it raises its PLC transmission amplitude and repeats the process until the partitioning step succeeds. If the second Remote Hub reaches the High Threshold amplitude without having discovered all the Remotes on its phase or if at any amplitude a Remote from a different phase is discovered when no lower amplitude discovers all the Remotes on the same phase then the partitioning command has failed. The second Remote Hub signals the failure of the partitioning command to the first Remote Hub by using its Edge Transmitter to transmit a status beacon detectable by the First Remote Hub since the first and second Remote Hubs can no longer communicate via PLC.

If the first Remote Hub detects no failure beacon from the second Remote Hub and a third phase is present the first Remote Hub sends a partitioning command to the third Remote Hub which carries out the partitioning step as described.

When the first Remote Hub has partitioned the other phases present without having received a failure beacon then it carries out the partitioning step itself. If the first Remote Hub s partitioning step succeeds then the service transformer is successfully partitioned into three single phase TANs as shown in . In another embodiment of the invention the second and third Remote Hubs may employ a failure beacon and a success beacon. Use of the success beacon may shorten the time required to complete the partitioning steps.

Referring now to which is a simplified schematic drawing of a three phase service transformer and the meters that it supplies with power. This service area contains three TANs and one for each phase of the service transformer. Each TAN contains a Remote Hub and zero or more Subordinate Remotes . Any Subordinate Remote may actually be a spare Remote Hub. illustrates a proper partitioning of the Remotes powered by a three phase transformer following the discovery and partitioning algorithm described herein above.

As is clear from the above description of a discovery and partitioning algorithm it is possible that for some multi phase transformers there is no set of PLC transmission frequencies that will yield a clean partitioning of the Remotes on the service transformer into single phase TANs. When the partitioning algorithm fails at any step the first Remote Hub attempts to form a multi phase TAN which includes all Remotes on all phases of the service transformer but no Remotes which are not on the service transformer. Refer now to which illustrates a multi phase TAN. Recall that the first Remote Hub already has an inventory of all Remotes on any phase of the service transformer and that it further is aware which node on each phase are Remote Hubs. Beginning with the previously recorded initial PLC transmission amplitude the first Remote Hub initiates a PLC discovery process. If any Remotes are discovered which are on a different service transformer the first Remote Hub lowers the PLC transmission amplitude superseding the old value of the initial amplitude and restarts the discovery process repeating this until all and only the Remotes known to be on the service transformer are discovered. If a new Remote never before detected is found the pilot beacon method above is used to determine the phase of the new Remote and whether it is on the same service transformer as the first Remote. If no transmission amplitude can be found that discovers all and only Remotes on the same service transformer as the first Remote Hub the first Remote Hub transmits a distress alert on an Edge to Substation channel and organizes the TAN at the highest amplitude which does not discover any nodes outside the service transformer even if some nodes on the service transformer are unresponsive.

For Grid Location Awareness and the energy management applications that depend on the Grid Map to be effective probe transmissions must originate from each phase of the Service Transformer. To accomplish this the first Remote Hub Master in sends commands to the second and third if present Remote Hubs causing them to operate as Proxy Hubs. A Proxy Hub behaves like a Subordinate Remote on the TAN except that it is responsive to certain commands from its master Remote Hub that allow the Remote Hub to control the Proxy Hub s Edge Transmitter. Remote Hub stores the Edge to Substation provisioning policies that would normally be carried out by the Proxy Hubs . Remote Hub carries out all the TAN management activities such as polling the Subordinate Remotes distributing updates and computing derived results for the Remotes including Proxy Hubs on all phases present. When it is time for a Proxy Hub to send an Edge to Substation transmission the first Remote Hub formats the appropriate message and sends it to the Proxy Hub over the TAN. The Proxy Hub then retransmits the message on the Edge to Substation channel. In this way Edge to Substation transmissions are always transmitted on the correct phase even though the TAN master is on a different phase.

The partitioning and discovery methods disclosed above are designed to accommodate a standards based PLC protocol stack such as PRIME. Use of alternative short range PLC protocol stacks may require minor modifications to the methods. More straightforward methods may also be used in cases where customizations to the lower layers of the protocol stack are allowable.

Another aspect of a Remote Hub s channel management capability is that the Remote hub may pre modulate and store certain messages which do not contain variable data and may be sent repeatedly. Examples of pre recordable messages include messages sent on the provisioning channel such as the provisioning request and standard alerts on conditions such as sags over voltages and the like. This strategy saves computing power at the Remote Hub. When policy changes such as changes in chip channel placement baud rate FEC rate and bandwidth occur pre modulated recordings may need to be discarded and re computed. This may be done during idle periods when the Edge Transmitter s microcontroller CPU is not busy with preparing scheduled messages. To accommodate this such policy changes may be announced in advance to take effect at a known future time as opposed to becoming effective immediately.

In some embodiments a Remote Hub may not be integrated into a GLA Smart Meter but instead may be associated with another feature of a medium voltage distribution grid such as a capacitor bank step down transformer voltage regulator storage battery local generator or switch set. The Remote Hub may be integrated with local or remotely controlled SCADA systems associated with the feature. The SCADA system may provide an Edge to Substation channel for provisioning Remote Hubs used in this manner or the Edge to Substation channel associated with Remote Hubs in Smart Meters may also be operable to communicate with such feature based Remote Hubs. Such Remote Hubs may incorporate a version of a Substation Receiver and be operable to send Pairing Messages associating the grid feature with other Remote Hubs electrically and schematically subordinate to the grid feature. A Remote Hub may also be embodied as a standalone device plugged into an electrical outlet. A form of Substation Receiver may additionally be associated with such medium voltage grid features or any intermediate point on the medium voltage distribution grid. Such an intermediate Receiver may collect information regarding which Transformer Area Networks are impacted by an associated medium voltage grid feature. The combination of such a secondary Receiver and Remote Hub may be employed to control intermediate grid features such as using a switch or relay to isolate a microgrid or balance the load on a plurality of substations or to alter the set point on a voltage regulator.

In a further aspect of the invention a Remote Hub may carry out line measurements to determine locally optimum conditions for transmitting. The Remote Hub always has the option to vary the amplitude of the injected signal and may additionally have the option to vary the frequency band of the data bearing segment of the transmission.

To conduct the measurements the Remote Hub transmits a sequence or simultaneous combination of pure tones. These tones may be independent of an actual message transmission or they may be incorporated in the message preamble. Recall that the bandwidth of the preamble may be different than the bandwidth of the data bearing segment of the transmission. If there is an opportunity to choose the frequency band of the data bearing segment then the tones must span the entire available spectrum. When the tones are transmitted the current generated at the requested voltage is measured. The relationship between the requested voltage and the generated current is calculated at each frequency. The result will be proportional to the line impedance of the grid at the Remote Hub for each frequency. This allows the Remote Hub to determine both how much drive voltage is required to generate the desired current at each frequency in the available frequency band and if there is a choice of frequency bands to use to select the frequency range that requires the least voltage to achieve the desired current. In some embodiments where a Substation to Edge channel is available and has sufficient capacity the Computing Platform may from time to time send feedback from the Substation Receiver about the messages as received. This may allow the Remote Hub to refine and calibrate its measurement process. Outcomes of this feedback may include changing the slot assignments and or modulation methods of individual Remote Hubs and or an entire channel to improve message success rate.

The foregoing description of the invention has been presented for purposes of illustration and description and is not intended to be exhaustive or to limit the invention to the precise forms disclosed. Obviously many modifications and variations are possible in light of the above teaching. The embodiments were chosen and described in order to best explain the principles of the invention and its practical application to thereby enable others skilled in the art to best utilize the invention in various embodiments and with various modifications as are suited to the particular use contemplated. It is intended that the scope of the invention be defined by the claims appended hereto.

