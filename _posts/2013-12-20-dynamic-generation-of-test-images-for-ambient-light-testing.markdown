---

title: Dynamic generation of test images for ambient light testing
abstract: In a remote access environment that includes a server, a client device may remotely access, e.g., medical images from the server and may be provided with a mechanism to retrieve a test image, such as the TG-18 CT or TG-18 MP sample test patterns. The client device communicates display size information to the server, which generates the test image on-the-fly for the particular display size of the client device. For example, components in the test image and borders may be scaled to create an appropriate test image for any client device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09411549&OS=09411549&RS=09411549
owner: Calgary Scientific Inc.
number: 09411549
owner_city: Calgary, AB
owner_country: CA
publication_date: 20131220
---
The present disclosure claims priority to U.S. Provisional Patent Application 61 740 893 filed Dec. 21 2012 entitled DYNAMIC GENERATION OF TEST IMAGES FOR AMBIENT LIGHT TESTING which is incorporated herein by reference in its entirety.

Medical images housed within Picture Archiving and Communication Systems PACS are typically accessed by specialized display workstations under controlled lighting conditions the so called radiology reading room . Such conditions are maintained to provide predetermined level of display image quality as part of the diagnostic imaging practice as it is important to ensure that electronic display at the display workstations does not compromise image quality. In furtherance of that goal display standards have been created such as that of the American Association of Physicists in Medicine AAPM Task Group 18 TG 18 . Information about the TG 18 display performance standards may be found in Assessment of Display Performance for Medical Imaging Systems American Association of Physicists in Medicine April 2005 which is incorporated herein by reference in its entirety. The TG 18 provided guidelines to end users for in field performance evaluation of electronic display devices intended for medical use. The TG 18 testing methods include test images for evaluating the performance of electronic display devices and recommended minimum performance requirements for utilization of electronic displays in medical and radiologic applications. The AAPM provides the test images as downloadable files from designated servers.

However the TG 18 test images were designed for specific display resolutions. Now with the growing use of mobile devices to remotely access medical image data from PACS systems the TG 18 test images are not properly scaled for use on the overwhelming number of display sizes of the mobile devices.

Disclosed herein are systems and methods for providing a test image such as the TG 18 CT or TG 18 MP sample test patterns to client devices in a remote access environment. The client device communicates display size information to a server in the environment which generates the test image on the fly for the particular display size of the client device. For example components and borders in the test image may be scaled to create an appropriate test image for any client device.

In accordance with some implementations there is provided a method of dynamically generating a test image for a client device from a standard test image on a server the standard test image having components therein and a border defined by a horizontal margin and a vertical margin. The method includes receiving at a server display dimensions from a client device determining if a minimum dimension of the display dimensions is less than a first predetermined value if the minimum dimension is less than the first predetermined value then reducing a size of the components by a factor of the minimum dimension divided by the predetermined value for rendering the test image for display at the client device and if the minimum dimension is not less than the first predetermined value then determining if the minimum dimension is less than or equal to a second predetermined value. If the minimum dimension is less than or equal to the second predetermined value then adjusting at least one of the vertical margin and the horizontal margin to maintain an array of boxes in a centered position with respect to the test image for rendering the test image for display at the client device and if the minimum dimension is not less than or equal to the second predetermined value then increasing a size of the components by a factor of the minimum dimension divided by the second predetermined value for rendering the test image for display at the client device.

In accordance with some implementations there is provided a method of generating a test image where the test image has components therein defining a component width and a component height and the test image has a border defined by a horizontal margin and a vertical margin. The method includes receiving at a server display dimensions from a client device determining if a minimum dimension of the display dimensions is greater than a first predetermined value if the minimum dimension is greater than the first predetermined value then increasing a size of the component width and the component height by a factor of the minimum dimension divided by the predetermined value rounding down to a nearest multiple of a second predetermined number and adding a third predetermined number of pixels to the border scaling the components to fit within a new size of the component width and the component height and displaying the test image at the client device. If the minimum dimension is less than the first predetermined value then determining if a display width is less than the component width and if so iteratively reducing the component width by the second predetermined value until the display width is not less than the component width determining if a display height is less than the component height and if so iteratively reducing the component width by the second predetermined value until the display width is not less than the component width scaling the components to fit within a new size of the component width and the component height and displaying the test image at the client device.

In accordance with some implementations there is provided a method of generating a test image the test image having components therein and having a horizontal margin and a vertical margin the method comprising receiving at a server display dimensions from a client device determining if a minimum dimension of the display dimensions is less than a first predetermined value and if not increasing a size of the components in accordance with the a first factor determined in accordance with the minimum dimension and the first predetermined value and if the minimum dimension of the display dimensions is less than the first predetermined value reducing a size of the components in accordance with a first factor determined in accordance with the minimum dimension or reducing the size of the components in accordance with a second factor determined in accordance with the minimum dimension and a second predetermined value.

Other systems methods features and or advantages will be or may become apparent to one with skill in the art upon examination of the following drawings and detailed description. It is intended that all such additional systems methods features and or advantages be included within this description and be protected by the accompanying claims.

Unless defined otherwise all technical and scientific terms used herein have the same meaning as commonly understood by one of ordinary skill in the art. Methods and materials similar or equivalent to those described herein can be used in the practice or testing of the present disclosure. While implementations will be described for remotely accessing applications it will become evident to those skilled in the art that the implementations are not limited thereto but are applicable for remotely accessing any type of data or service via a remote device.

In accordance with aspects of the present disclosure in a remote access environment a client device may be provided with a mechanism to retrieve a test image such as the TG 18 CT or TG 18 MP sample test patterns. The test image is generated on the fly for the particular display size of the client device. Thus an appropriate test image can be created for any client device as described below.

With the above overview as an introduction provides a diagram of an exemplary image viewing network over which processes and systems consistent with the presently disclosed dynamic test image rendering service may be implemented. As illustrated in image viewing network may include a plurality of devices that may be communicatively coupled to one another or to a centralized server to facilitate the distribution of data such as imaging data between or among the constituent devices. According to one embodiment image viewing network may include a server and one or more client devices each of which may be communicatively coupled to communication network . The listing of components illustrated in is exemplary only and not intended to be limiting. Indeed it is contemplated that additional fewer and or different devices than those shown in may be included as part of image viewing network without departing from the scope of the present disclosure.

Communication network may include or embody any data or telecommunications network that allows any number of network compatible devices such as server and client devices to exchange data with other network compatible devices both internal and external to image viewing network . For example communication network may provide a gateway for coupling server and or client devices with one or more servers on the World Wide Web using any combination wired or wireless communication platforms. Communication network may include a wireless networking platform such as for example a satellite communication system a cellular communication system or any other platform for communicating data with one or more geographically dispersed assets e.g. Bluetooth microwave point to point wireless point to multipoint wireless multipoint to multipoint wireless. Alternatively or additionally communication network may include or embody wireline networks such as for example Ethernet fiber optic waveguide or any other type of wired communication network.

The server may include any processor based computer system suitable for configuration as a centralized node for distributing and or sharing data such imaging data with one or more other computer systems. The server may further include a remote access application to enable the client devices to remotely access services offered by the server . Still further the server may include an imaging application that processes the image data for viewing by one or more end users using one of the client devices . In general server may be configured to perform server side image processing and rendering functions and deliver and or serve the processed image information to the requesting client device. According to one embodiment server may include a Windows or Linux based multi processor computing platform that is coupled to an imaging database. In the above an example remote access application may be part of the PureWeb architecture available from Calgary Scientific Inc. Calgary Alberta Canada. An example imaging application is ResolutionMD available from Calgary Scientific Inc. of Calgary Alberta Canada

Client devices may each include any processor based computing device suitable for receiving image data from server and render the image data on a display. Client devices may be configured for establishing a secure connection with server and or other client devices coupled to communication network in order to send and receive image information across communication network . Client devices may be include smart phones tablets laptop desktop netbook computing devices wearable media consumption devices e.g. optical head mounted display OHMD smart watch etc. or any other types of processor based computing system suitable for accessing server and rendering images and related data on a display associated with the respective device.

As further shown in a state model may be communicated between the server and or client devices . The state model contains application state information that is updated in accordance with user input data received from a user interface program or imagery currently being displayed by the client device . The remote access server also updates the state model in accordance with the screen or application data and provides the same to the client device for display.

In the environment of the present disclosure the state model may contain information about images being viewed by a user of the client device i.e. the current view. The state model may also contain information about the display area of the client device . This information may be used when rendering image data and test images at the server and or the client . Thus information in the state model may be used to enable test images to be rendered on either the client or the server and switching therebetween.

In some implementations the environment of may be used to view diagnostic images. In such environments there is a need to insure that the client device displays do not compromise image quality and ultimately patient care. As such standard test images such as those described below have been published to provide for testing and quality control of client devices on which diagnostic image data is displayed.

The image test pattern has a defined height and width . For example the height and width is 1024 pixels. The array of boxes is positioned having a vertical margin and a horizontal margin from respective edges of the image test pattern . Each box in the array has a side having a length of 102 pixels. The boxes are separated by a distance of 51 pixels. The circle within each box a representative circle emphasized for purposes of the present disclosure has a diameter of 34 pixels and the four corner boxes have sides having a dimension of 10 pixels. As will be described below when an image test pattern is generated on the fly for a particular display size in accordance with the present disclosure the various dimensions described above are adjusted scaled to maintain relative sizes of the boxes circle corner box and spacing between the boxes. Thus the image test pattern may be scaled to create an appropriate test image for any client device

If at the minimum dimension is less than 663 pixels then the process continues at where the box size spacing corner box size and circle diameter are reduce by multiplying the minimum dimension determined at by 663. With reference to the block size spacing corner box size and circle diameter are reduced in accordance with the relationship of the minimum dimension divided by 663. The process continues at where the test image is rendered. For example the server may render a test image in accordance with the sizes determined at . At the test image is displayed at the client device. In some implementations the test image may be rendered at the client device at and displayed at .

If at the minimum dimension is not less than 663 pixels then the process continues at where is determined if the minimum dimension is less than or equal to 1024 pixels. If the minimum dimension is less or equal to than or equal to 1024 pixels then at the vertical and or horizontal margins are adjusted to maintain the image in a center position and to maintain the center contents at default sizes. For example the vertical margin and or the horizontal margin may be adjusted to center the array of boxes within the test image. The process continues at where the test image is rendered. For example the server may render test image in accordance with the sizes determined at . At the test image is displayed at the client device. In some implementations the test image may be rendered at the client device at and displayed at .

If that 410 the minimum dimension is not less than or equal to 1024 pixels then at the box size spacing corner box size and circle diameter multiplied by a factor of the minimum dimension divided by 1024. With reference to the block size spacing corner box size and circle diameter are multiplied by a factor of the minimum dimension divided by 1024. The process continues at where the test image is rendered. For example the server may render test image in accordance with sizes determined at . At the test image is displayed at the client device. In some implementations the test image may be rendered at the client device at and displayed at . After the test image is sent to the client device the process ends at .

Thus the operational flow provides a method for generating TG18 CT on the fly in accordance with a display size of the client device. The operational flow serves to adjust the various components of the test image such that they appropriately sized for the display.

If at the minimum dimension is not greater than 1024 pixels then at it is determined if the display width is less than the main box with. The main box width is shown in by reference numeral . If the display width is less than the main box width then the main box with is iteratively reduced at by a factor of 16. The iterative process at continues until the display width is not less than the main box width at which time the process continues at where it is determined if the display height is less than the main box height . If at the display height is less than the main box height then at the main box height is iteratively reduced by a factor of 16 until the display height is not less than the main box height . When this condition is met at the process flows to where the ramp boxes are scaled to fit within the main box width and height from and respectively. At the process continues where the test image is rendered. At the test image is displayed at the client device. In some implementations the test image may be rendered at the client device at and displayed at . At the process ends.

Thus the operational flow provides a method for generating TG18 MP on the fly in accordance with a display size of the client device. The operational flow serves to adjust the various components of the test image such that they are appropriately sized for the display.

Numerous other general purpose or special purpose computing system environments or configurations may be used. Examples of well known computing systems environments and or configurations that may be suitable for use include but are not limited to personal computers server computers handheld or laptop devices multiprocessor systems microprocessor based systems network personal computers PCs minicomputers mainframe computers embedded systems distributed computing environments that include any of the above systems or devices and the like.

Computer executable instructions such as program modules being executed by a computer may be used. Generally program modules include routines programs objects components data structures etc. that perform particular tasks or implement particular abstract data types. Distributed computing environments may be used where tasks are performed by remote processing devices that are linked through a communications network or other data transmission medium. In a distributed computing environment program modules and other data may be located in both local and remote computer storage media including memory storage devices.

With reference to an exemplary system for implementing aspects described herein includes a computing device such as computing device . In its most basic configuration computing device typically includes at least one processing unit and memory . Depending on the exact configuration and type of computing device memory may be volatile such as random access memory RAM non volatile such as read only memory ROM flash memory etc. or some combination of the two. This most basic configuration is illustrated in by dashed line .

Computing device may have additional features functionality. For example computing device may include additional storage removable and or non removable including but not limited to magnetic or optical disks or tape. Such additional storage is illustrated in by removable storage and non removable storage .

Computing device typically includes a variety of computer readable media. Computer readable media can be any available media that can be accessed by device and includes both volatile and non volatile media removable and non removable media.

Computer storage media include volatile and non volatile and removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Memory removable storage and non removable storage are all examples of computer storage media. Computer storage media include but are not limited to RAM ROM electrically erasable program read only memory EEPROM flash memory or other memory technology CD ROM digital versatile disks DVD or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store the desired information and which can be accessed by computing device . Any such computer storage media may be part of computing device .

Computing device may contain communications connection s that allow the device to communicate with other devices. Computing device may also have input device s such as a keyboard mouse pen voice input device touch input device etc. Output device s such as a display speakers printer etc. may also be included. All these devices are well known in the art and need not be discussed at length here.

It should be understood that the various techniques described herein may be implemented in connection with hardware or software or where appropriate with a combination of both. Thus the methods and apparatus of the presently disclosed subject matter or certain aspects or portions thereof may take the form of program code i.e. instructions embodied in tangible media such as floppy diskettes CD ROMs hard drives or any other machine readable storage medium wherein when the program code is loaded into and executed by a machine such as a computer the machine becomes an apparatus for practicing the presently disclosed subject matter. In the case of program code execution on programmable computers the computing device generally includes a processor a storage medium readable by the processor including volatile and non volatile memory and or storage elements at least one input device and at least one output device. One or more programs may implement or utilize the processes described in connection with the presently disclosed subject matter e.g. through the use of an application programming interface API reusable controls or the like. Such programs may be implemented in a high level procedural or object oriented programming language to communicate with a computer system. However the program s can be implemented in assembly or machine language if desired. In any case the language may be a compiled or interpreted language and it may be combined with hardware implementations.

Although the subject matter has been described in language specific to structural features and or methodological acts it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather the specific features and acts described above are disclosed as example forms of implementing the claims.

