---

title: Routing framework for objects
abstract: Particular embodiments store a business object attachment in a specific storage location associated with a business object. In this embodiment a computer receives an attachment for the business object along with information regarding the business object. The information regarding the business object may include a business object identifier and a business object type identifier. With this information, the computer defines routing attribute fields for the attachment. Using the routing attribute fields and the business object type identifier, the computer calculates a target content repository and a target path for the attachment. The computer then determines which content management system contains the target repository and interfaces with that target content management system to direct that content management system to store the attachment in the target repository at the target path.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09442939&OS=09442939&RS=09442939
owner: SAP SE
number: 09442939
owner_city: Walldorf
owner_country: DE
publication_date: 20131024
---
Unless otherwise indicated herein the approaches described in this section are not prior art to the claims in this application and are not admitted to be prior art by inclusion in this section.

An attachment to a business object is not typically stored with the business object in a business object repository. Instead the attachment is directed to a content repository within a content management system. The file location and file ID may then be stored with the business object but the location of the attachment is determined by the content management system. Allowing the content management system to arbitrarily determine where to store an attachment may not be desirable.

Particular embodiments store a business object attachment in a specific storage location associated with a business object. In this embodiment a computer receives an attachment for the business object along with information regarding the business object. The information regarding the business object may include a business object identifier and a business object type identifier. With this information the computer defines routing attribute fields for the attachment. Using the routing attribute fields and the business object type identifier the computer calculates a target content repository and a target path for the attachment. The computer then determines which content management system contains the target repository and interfaces with that target content management system to direct that content management system to store the attachment in the target repository at the target path.

The following detailed description and accompanying drawings provide a better understanding of the nature and advantages of the embodiments.

Described herein are techniques for a routing framework. The apparatuses methods and techniques described below may be implemented as a computer program software executing on one or more computers. The computer program may further be stored on a tangible non transitory computer readable medium such as a memory or disk for example. A computer readable medium may include instructions for performing the processes described below. In the following description for purposes of explanation numerous examples and specific details are set forth in order to provide a thorough understanding of the embodiments. It will be evident however to one skilled in the art that the subject matter as defined by the claims may include some or all of the features in these examples alone or in combination with other features described below and may further include modifications and equivalents of the features and concepts described herein.

The present disclosure relates to a routing framework and in particular to a routing framework than allows an attachment to a business object to be stored according to a defined routing rule in a content repository and at a path that is specific for attachments that satisfy the defined rule. For example an embodiment allows the routing of attachments for business objects to different content management repositories and to different paths e.g. unique locations in defined folder hierarchies depending on chosen attributes of the business object.

Content management systems and store attachments for the business objects. For example content repositories and store the business object attachments for the business objects. A business object attachment may be information that relates to a business object. For example the business object may summarize a transaction for the business such as the sale of a product. The business object attachment may be a scanned invoice for the transaction. In contrast to the business object the business object attachment may be unstructured data. In this case the business object attachment cannot be stored in business object repository because repository stores data in a relational database format e.g. a structured database format .

Enterprise system includes a business application in communication with a business object repository . Business application may create business objects and related attachments. For example business application creates financial statements and related financial documents. In one embodiment the business object can be globally identified by identifiers such as a business object identifier a business object type identifier and or a business object system identifier. A business object identifier is assigned to a business object when it is created and is used to identify and retrieve the business object. A business object type identifier identifies the type of business object such as a business entity e.g. a financial document an employee or a sales order . Business object types break a business object system down into smaller disjunctive units. Also a business object system identifier identifies the enterprise system from which the business object originated. Although a business object identifier a business object type identifier and or a business object system identifier are mentioned not all of the identifiers may be used. For example the business object system identifier may not be needed.

To store a business object and its attachment enterprise system sends the business object and the attachment to an attachment service along with information for the business object such as the business object identifier business object type identifier and business object system identifier. Attachment service may store the business objects in a business object repository . Also attachment service forwards attachments to such business objects for storage by content management systems or . To determine the correct content management system attachment service communicates with a routing rule engine to determine which particular content management system and at what path within the content management system to store an attachment.

Routing rule engine is in communication with a routing rule repository . Routing rule repository includes routing rules or rules which routing rule engine consults in determining which particular content management system and at what path within the content management system to store an attachment. The rules may be based on certain requirements that govern where and how business objects should be stored based on their associated business object. In one embodiment the company may need to adhere to certain rules or regulations regarding the business object attachments. For example a legal requirement may state that the business object attachment s physical storage location is in the country where the financial documents are stored. Routing rule engine may determine applicable rules for the business object attachment based on information for the associated business object for the attachment. Once determining the applicable rules routing rule engine evaluates the rules to determine where to route the business object attachment. For example routing rule engine returns a set of routing attribute fields associated with the attachment to attachment service . The routing attribute fields may be variables in which information for the associated business object can be inserted into. For example the attribute fields may list target path fields and a target repository.

Attachment service is also in communication with a content management integration layer CMI layer that includes an application programming interface API . API exposes a unified interface to allow attachment service to access different repositories through a single interface. Attachment service may fill in the attribute fields to generate a target repository and a target path for the attachment using information for the associated business object. For example attachment service fills in a year associated with the business object and a company region. In one embodiment the target path may be USA1 2011 where USA1 is the region in which a transaction for the business object took place and 2011 is the year the transaction occurred.

CMI layer also includes service provider interfaces SPI and for interfacing with content management systems and respectively. The different SPIs allow CMI layer to interface with different types of content management systems. For example different content management systems may use different protocols formats. Different SPIs are used to communicate in the different protocols formats.

CMI layer can manipulate i.e. read write or delete attachments and metadata on content management systems and for storage. Content management systems and are systems that allow the storage and manipulation read write modify and delete of content from a central interface. Content management system includes a content management runtime manager and content repositories and . Content management system includes a content management runtime manager and content repository . However content management systems may include various numbers of repositories. Content management runtime managers and cause a runtime application not shown to interact with content repositories and according to instructions from CMI layer . For example content repositories and store the business object attachments at the paths determined by attachment service . SPIs and communicate via network interfaces which will be described in more detail below.

Attachment service forwards the attachment information to routing rule engine . With the attachment information routing rule engine searches routing rule repository for a routing rule that applies. With an applicable routing rule at routing rule engine defines routing attribute fields for the attachment based on the attachment information. At attachment service calculates a target repository e.g. content repository and a target path for the attachment using the routing attribute fields and information for the business object. At attachment service interfaces via CMI layer with the content management system i.e. content management system which was determined by CMI layer based on the target repository. As the interface CMI layer receives the target repository and target path information along with the attachment from business object repository . CMI layer then interprets the target repository information and selects an appropriate SPI for communicating with the content management system containing the target repository i.e. SPI . CMI layer then directs the content management system through the SPI to store the attachment in the target repository at the target path.

Routing rule engine then determines applicable rules in rule repository based on the information received from attachment service . For example routing rule engine determines applicable rules based on the business object type identifier. In this case rules and are applicable because the object type for these rules is Financial Document. Rules and are not applicable because the object type for these rules is SalesOrder which is different from the business object type identifier.

Routing rule engine then evaluates the rules using information related to the business object. For example the routing rule for rule evaluates whether the company code is less than or equal to 100. In this case routing rule engine determines that the company code of 150 is not less than or equal to 100. Thus routing rule engine determines that rule is not satisfied. Rule states the company code should be less than or equal to 200 and greater than 100. In this case routing rule engine determines the company code of 150 satisfies the rule. Thus routing rule engine determines rules is satisfied.

When a rule is satisfied routing rule engine determines target path fields and a target repository. The target path fields list fields in which information from the business object can be inserted. For example the fields for rule are a fiscal year and a company code. The target repository lists the target repository in which the business object attachment should be stored. In this case the target repository is USA1. Once determining the valid rules routing rule engine returns the target path fields and target repository for the valid rules to attachment service .

Attachment service may then generate the target path by filling in the target path fields. For example attachment service determines the values for the fields based on information from the business object. Attachment service may insert 2013 for the field FiscalYear 150 for the field CompanyCode and US1 for the field  SystemID. The value for the field  SystemID may be the business object system identifier. Attachment service then sends the path and repository to CMI layer .

CMI layer may have adapters for each type of repository. In this case the target repository USA1 is a repository format 1 using a first content management format. CMI layer thus uses a format 1 repository adapter instead of a format 2 repository adapter and a format 3 repository adapter .

Content management system receives the business object attachment the target repository and the target path. Content management runtime manager then determines where to store the business object attachment. For example content management runtime manager determines a content repository corresponding to the repository identifier. In this case content management runtime manager determines the repository is USA1. Content management runtime manager then uses the target path to determine where to store the business object attachment in the content repository USA1. For example the USA1 repository includes a file system and content management runtime manager uses the target path to traverse the file system and store the business object attachment in a destination folder corresponding to the target path at . In this case content management runtime manager stores the business object attachment in the folder US1.

ERP system may route different attachments to different repositories to satisfy different rules. depicts an example of routing attachments to different repositories according to one embodiment. Below two different examples are for two different business object attachments 1 and 2. Example 1 is associated with a business object for a company USA1 and a year 2011. Example 2 is associated with a business object for a company EUR2 and a year 2012. The following summarize the target paths and target repositories for the two business object attachments 

The two business object attachments are associated with different repositories. In CMI layer routes a first business object attachment 1 for example 1 through SPI to a content management system which may be in the USA. Then content management system stores the business object attachment 1 in the target repository USA at the target path of USA1 2011 in content repository . CMI layer routes the business object attachment 2 via SPI to content management system which may be in Europe. Then content management system stores the second business object attachment in the target repository EUR at the target path of EUR2 2012 in content repository .

Particular embodiments segregate attachments to business objects into storage locations according to defined rules contained by routing rule repository . This ability allows a storage location i.e. content repository and path to be the sole storage location for all attachments that satisfy a given rule. For example if attachments to certain financial business objects that originate from the European Union EU must remain physically stored in the EU a rule may be defined within rule repository that specifies such documents be stored in a content management system located in the EU. This ability also allows the transfer en masse of all attachments that were stored according to a given rule. For example a rule may be defined within rule repository specifying that all attachments created by Company A be stored in a content repository . Thus if Company A is purchased all attachments created by Company A may be transferred to the purchaser by transferring the contents of the appropriate storage location. Accordingly the embodiment may reduce or avoid the need to search multiple repositories for content if content was stored according to a rule in routing rule repository .

Another aspect of an embodiment is that a company responding to an ongoing discovery request may create an appropriate rule in routing rule repository . An appropriate rule might include creating copies of responsive documents and storing those copies in a storage location specific to the discovery request. There may also be reason to store attachments in a storage location according to a common feature. The common feature may be for example a company a business department such as finance R D etc. an origination date the originating ERP system the originating business application or the originating business object or any combination of common features.

Computer system may be coupled via bus to a display for displaying information to a computer user. An input device such as a keyboard touchscreen and or mouse is coupled to bus for communicating information and command selections from the user to processor . The combination of these components allows the user to communicate with the system. In some systems bus represents multiple specialized buses for example.

Computer system also includes a network interface coupled with bus . Network interface may provide two way data communication between computer system and a local network . The network interface may be a wireless or wired connection for example. Computer system can send and receive information through the network interface across a local area network an Intranet a cellular network or the Internet for example. One example implementation may include a browser executing on a computing system . A browser for example may access data and features on backend systems that may reside on multiple different hardware servers across the network. Servers and server applications may also reside in a cloud computing environment for example.

The above description illustrates various embodiments of the present invention along with examples of how aspects of the present invention may be implemented. The above examples and embodiments should not be deemed to be the only embodiments and are presented to illustrate the flexibility and advantages of the present invention as defined by the following claims. Based on the above disclosure and the following claims other arrangements embodiments implementations and equivalents will be evident to those skilled in the art and may be employed without departing from the spirit and scope of the invention as defined by the claims.

