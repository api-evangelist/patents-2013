---

title: Hybrid automatic repeat request (HARQ) mapping for carrier aggregation (CA)
abstract: Technology to support mapping for Hybrid Automatic Retransmission re-Quest (HARQ) for Carrier Aggregation (CA) is disclosed. One method can include a user equipment (UE) identifying, within a radio frame, a type 2 DownLink (DL) sub-frame within a virtual bundling window associated with a Secondary Component Carrier (SCC). The type 2 DL sub-frame can be virtually moved from a Primary Component Carrier (PCC) for HARQ-ACKnowledge (HARQ-ACK) multiplexing of the virtual bundling window. The UE can extract a Component Carrier Element (CCE) number for a first CCE used by a Physical Downlink Control CHannel (PDCCH) transmission corresponding to the type 2 DL sub-frame. The UE can determine a Physical Uplink Control CHannel (PUCCH) resource for carrying a HARQ-ACK multiplexing message based on the CCE number when a PCC window size of the PCC is greater than an SCC window size of the SCC.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09094960&OS=09094960&RS=09094960
owner: INTEL CORPORATION
number: 09094960
owner_city: Santa Clara
owner_country: US
publication_date: 20130329
---
This application claims the benefit of and hereby incorporates by reference U.S. Provisional Patent Application Ser. No. 61 653 369 filed May 30 2012 and U.S. Provisional Patent Application Ser. No. 61 667 325 filed Jul. 2 2012.

Wireless mobile communication technology uses various standards and protocols to transmit data between a node e.g. a transmission station and a wireless device e.g. a mobile device . Some wireless devices communicate using orthogonal frequency division multiple access OFDMA in a downlink DL transmission and single carrier frequency division multiple access SC FDMA in an uplink UL transmission. Standards and protocols that use orthogonal frequency division multiplexing OFDM for signal transmission include the third generation partnership project 3GPP long term evolution LTE the Institute of Electrical and Electronics Engineers IEEE 802.16 standard e.g. 802.16e 802.16m which is commonly known to industry groups as WiMAX Worldwide interoperability for Microwave Access and the IEEE 802.11 standard which is commonly known to industry groups as WiFi.

In 3GPP radio access network RAN LTE systems the node can be a combination of Evolved Universal Terrestrial Radio Access Network E UTRAN Node Bs also commonly denoted as evolved Node Bs enhanced Node Bs eNodeBs or eNBs and Radio Network Controllers RNCs which communicates with the wireless device known as a user equipment UE . The downlink DL transmission can be a communication from the node e.g. eNodeB to the wireless device e.g. UE and the uplink UL transmission can be a communication from the wireless device to the node.

In LTE data can be transmitted from the eNodeB to the UE via a physical downlink shared channel PDSCH . A physical uplink control channel PUCCH can be used to acknowledge that data was received. Downlink and uplink channels or transmissions can use time division duplexing TDD or frequency division duplexing FDD . Time division duplexing TDD is an application of time division multiplexing TDM to separate downlink and uplink signals or separate signals to a UE or from the UE in D2D communication . In TDD downlink signals and uplink signals may be carried on a same carrier frequency i.e. shared carrier frequency where the downlink signals use a different time interval from the uplink signals so the downlink signals and the uplink signals do not generate interference for each other. TDM is a type of digital multiplexing in which two or more bit streams or signals such as a downlink or uplink are transferred apparently simultaneously as sub channels in one communication channel but are physically transmitted on different resources. In frequency division duplexing FDD an uplink transmission and a downlink transmission or a transmission to and from a UE in D2D communication can operate using different frequency carriers i.e. separate carrier frequency for each transmission direction . In FDD interference can be avoided because the downlink signals use a different frequency carrier from the uplink signals.

Reference will now be made to the exemplary embodiments illustrated and specific language will be used herein to describe the same. It will nevertheless be understood that no limitation of the scope of the invention is thereby intended.

Before the present invention is disclosed and described it is to be understood that this invention is not limited to the particular structures process steps or materials disclosed herein but is extended to equivalents thereof as would be recognized by those ordinarily skilled in the relevant arts. It should also be understood that terminology employed herein is used for the purpose of describing particular examples only and is not intended to be limiting. The same reference numerals in different drawings represent the same element. Numbers provided in flow charts and processes are provided for clarity in illustrating steps and operations and do not necessarily indicate a particular order or sequence.

An initial overview of technology embodiments is provided below and then specific technology embodiments are described in further detail later. This initial summary is intended to aid readers in understanding the technology more quickly but is not intended to identify key features or essential features of the technology nor is it intended to limit the scope of the claimed subject matter.

An increase in the amount of wireless data transmission has created congestion in wireless networks using licensed spectrum to provide wireless communication services for wireless devices such as smart phones and tablet devices. The congestion is especially apparent in high density and high use locations such as urban locations and universities.

One technique for providing additional bandwidth capacity to wireless devices is through the use carrier aggregation of multiple smaller bandwidths to form a virtual wideband channel at a wireless device e.g. UE . In carrier aggregation CA multiple component carriers CC can be aggregated and jointly used for transmission to from a single terminal. Carriers can be signals in permitted frequency domains onto which information is placed. The amount of information that can be placed on a carrier can be determined by the aggregated carrier s bandwidth in the frequency domain. The permitted frequency domains are often limited in bandwidth. The bandwidth limitations can become more severe when a large number of users are simultaneously using the bandwidth in the permitted frequency domains.

Carrier aggregation CA enables multiple carrier signals to be simultaneously communicated between a user s wireless device and a node. Multiple different carriers can be used. In some instances the carriers may be from different permitted frequency domains. Carrier aggregation provides a broader choice to the wireless devices enabling more bandwidth to be obtained. The greater bandwidth can be used to communicate bandwidth intensive operations such as streaming video or communicating large data files.

Network symmetric or asymmetric carrier aggregation can be defined by a number of downlink DL and uplink UL component carriers offered by a network in a sector. UE symmetric or asymmetric carrier aggregation can be defined by a number of downlink DL and uplink UL component carriers configured for a UE. The number of DL CCs may be at least the number of UL CCs. A system information block type 2 SIB2 can provide specific linking between the DL and the UL. illustrates a block diagram of a symmetric asymmetric carrier aggregation configuration where the carrier aggregation is symmetric between the DL and UL for the network and asymmetric between the DL and UL for the UE. illustrates a block diagram of an asymmetric symmetric carrier aggregation configuration where the carrier aggregation is asymmetric between the DL and UL for the network and symmetric between the DL and UL for the UE.

For each UE a CC can be defined as a primary cell PCell . Different UEs may not necessarily use a same CC as their PCell. The PCell can be regarded as an anchor carrier for the UE and the PCell can thus be used for control signaling functionalities such as radio link failure monitoring hybrid automatic repeat request acknowledgement HARQ ACK and PUCCH resource allocations RA . If more than one CC is configured for a UE the additional CCs can be denoted as secondary cells SCells for the UE.

A component carrier can be used to carry channel information via a radio frame structure transmitted on the physical PHY layer in a uplink transmission between a node e.g. eNodeB and the wireless device e.g. UE using a generic long term evolution LTE frame structure as illustrated in . While an LTE frame structure is illustrated a frame structure for an IEEE 802.16 standard WiMax an IEEE 802.11 standard WiFi or another type of communication standard using SC FDMA or OFDMA may also be used.

An uplink signal or channel can include data on a Physical Uplink Shared CHannel PUSCH or control information on a Physical Uplink Control CHannel PUCCH . In LTE the uplink physical channel PUCCH carrying uplink control information UCI can include channel state information CSI reports Hybrid Automatic Retransmission reQuest HARQ ACKnowledgment Negative ACKnowledgment ACK NACK and uplink scheduling requests SR .

The wireless device e.g. UE can provide HARQ ACK feedback for a PDSCH using a PUCCH. The PUCCH can support multiple formats i.e. PUCCH format with various modulation and coding schemes MCS as shown for LTE in Table 1. Similar information to Table 1 can be shown in 3GPP LTE standard Release 11 e.g. V11.1.0 2012 December Technical Specification TS 36.211 Table 5.4 1. For example PUCCH format 1b can be used to convey a two bit HARQ ACK which can be used for carrier aggregation.

Legacy LTE TDD can support asymmetric UL DL allocations by providing seven different semi statically configured uplink downlink configurations. Table 2 illustrates seven UL DL configurations used in LTE where D represents a downlink subframe S represents a special subframe and U represents an uplink subframe. In an example the special subframe can operate or be treated as a downlink subframe. Similar information to Table 2 can be shown in 3GPP LTE TS 36.211 Table 4.2 2.

As illustrated by Table 2 UL DL configuration 0 can include 6 uplink subframes in subframes 2 3 4 7 8 and 9 and 4 downlink and special subframes in subframes 0 1 5 and 6 and UL DL configuration 5 can include one uplink subframe in subframe 2 and 9 downlink and special subframes in subframes 0 1 and 3 9.

As an underlying requirement in some examples cells of the network can change UL DL TDD configurations synchronously in order to avoid the interference. However such a requirement can constrain the traffic management capabilities in different cells of the network. The legacy LTE TDD set of configurations can provide DL subframe allocations in the range between 40 and 90 as shown in Table 2. The UL and DL subframes allocation within a radio frame can be reconfigured through system information broadcast signaling e.g. system information block SIB . Hence the UL DL allocation once configured can be expected to vary semi statically.

A property of TDD is that a number of UL and DL subframes can be different as shown in Table 2 and often the number of DL subframes can be more than the number of UL subframes for a radio frame. In configurations where more DL subframes are used than UL subframes multiple DL subframes can be associated with one single UL subframe for the transmission of a corresponding control signals. A configuration specific HARQ ACK timing relationship can be defined e.g. 3GPP LTE standard Release 11 e.g. V11.1.0 2012 December TS 36.213 Table 10.1.3.1 1 . If a UE is scheduled in a multiple of DL subframes which can be associated with one UL subframe the UE can transmit multiple ACK NAK ACK NACK bits in that UL subframe. A number of DL subframes with HARQ ACK feedback on one single UL subframe can comprise one bundling window.

As shown in the subframe 0 and 1 can comprise one bundling window on a PCell according a predefined HARQ ACK timing relation for UL DL configuration 1 while correspondingly subframe 9 of previous radio frame subframe 0 1 and 3 comprise the HARQ ACK bundling window on a SCell according to the HARQ ACK timing defined for configuration 2 for uplink subframe 7. In an example HARQ ACK bundling window may not be used for configuration 5 with 9 DL subframes.

An advantage of a Time Division Duplex TDD system can be a flexible resource utilization through different TDD configurations to better match the uplink and downlink traffic characteristics of the cell. By configuring different TDD configurations the ratio between available UpLink UL and DownLink DL resources can range from 3UL 2DL 6UL 4DL to 1 UL 9DL. In legacy LTE TDD e.g. LTE Release 10 Rel 10 specification only the aggregation of TDD Component Carriers CCs of a same UL DL configuration may be defined and supported. While the same UL DL configuration can simplify a design and operation of CC the same UL DL configuration can also impose some limitations.

In an example inter band carrier aggregation CA for a TDD system with different uplink downlink configurations on different bands can be supported. For instance more than one TDD carrier can be deployed by a single TDD operator and the carriers can be aggregated at a single base station e.g. node . Besides a separation between two carrier frequencies can be large enough to avoid UL DL interference from a same device. Some of the benefits of inter band CA with different TDD configurations on different bands can be include 1 legacy system co existence 2 heterogeneous network HetNet support 3 aggregation of traffic dependent carriers 4 flexible configuration e.g. more UL subframe in lower bands for better coverage and more DL subframes in higher bands and 5 higher peak rate.

Supporting Inter band TDD Carrier Aggregation CA with different uplink downlink configurations can be used to aggregate component carriers CC with different DL UL configurations. To provide high peak data rate enhancement benefits to both full and half duplex UEs HARQ Hybrid Automatic Repeat reQuest ACK NACK feedback for downlink DL data may use a PUCCH only transmitted on Primary Cell PCell use legacy HARQ ACK timing for PCell PDSCH by following a PCell SIB type 1 SIB1 UL DL configuration and use HARQ ACK timing for the PDSCH of a Secondary Cell SCell following a specific reference UL DL configuration e.g. PCell and SCell UL DL configuration as shown in Table 3 illustrated in .

Interband TDD CA with different UL DL configurations in different bands can be supported. For example an SCell PDSCH HARQ reference timing can be determined from a PCell UL DL configuration and a SCell UL DL configuration as shown in Table 3 illustrated in . Table 3 i.e. illustrates the UL DL configuration number of PDSCH HARQ ACK timing reference for SCell. A HARQ ACK timing of PCell PDSCH the scheduling timing of PCell PUSCH the HARQ timing of PCell PUSCH can use the PCell SIB1 configuration. A UE can be configured with PUCCH format 3 or PUCCH format 1b with channel selection CS for HARQ ACK transmission for TDD inter band carrier aggregation CA with different UL DL configurations on different bands.

According to the HARQ ACK timing table i.e. Table 3 for the SCell PDSCH the size of HARQ ACK bundling window can be different between PCell and SCell. illustrates an example where the PCell is configured with TDD UL DL configuration 1 and SCell is configured with TDD UL DL configuration 2. Since the SCell can follow a different DL HARQ timing from the PCell not only the bundling window of the SCell can be different from the PCell but also the number of the HARQ ACK bits corresponding to the number of the DL subframes in the SCell bundling window can be different from the PCell bundling window. As a result legacy HARQ ACK bit mapping and bundling rules may no longer applicable for a SCell UL DL configuration with a different UL DL configuration from the PCell or legacy HARQ ACK bit mapping and bundling rules may no longer support a case with the SCell UL DL configuration different from the PCell UL DL configuration.

Several solutions can be used in a case where the SCell UL DL configuration differs from the PCell UL DL configuration. For example a virtual HARQ ACK bundling window generation operation or HARQ ACK look up mapping table can be proposed to improve a Downlink DL throughput. An additional issue for PUCCH format 1b channel selection mode b can be PUCCH resources mapping for mode b. In a legacy intra band CA the PUCCH resource mapping in case of non cross CC scheduling can include Two PUCCH resources for PCell that can be implicitly derived from PDCCHs having DAI 1 2 DAI is a downlink assignment index for PCell when the PDSCH without PDCCH e.g. semi persistent scheduling SPS is not present two PUCCH resources for PCell that can be derived from a SPS resource and a PDCCH having DAI 1 for a PCell when PDSCH without PDCCH e.g. SPS is present or two PUCCH resources for SCell that can be indicated by a ARI ACK NACK Resource Indicator .

A legacy PUCCH resource mapping method may not be directly applied for a virtual HARQ ACK bundling window generation method. illustrates an example of a virtual HARQ ACK bundling window generation method. As shown in the right of a DL subframe with DAI 2 in the PCell bundling window can be virtually taken from the SCell the DAI value can be counted based on the generated virtual bundling. However a corresponding PUCCH resources in a PUCCH resource mapping table may not be implicitly derived from the PDCCHs having DAI 2 on PCell to avoid a potential PUCCH resource collision between CA and none CA capable UEs. PUCCH resources mapping methods for various PUCCH feedback schemes can be defined to complete a PUCCH channel selection with a format 1b design for inter band CA.

To facilitate the descriptions and illustrations used herein two types of PDSCH subframes can be defined per CC according to a particular downlink subframe handing in a virtual HARQ ACK bundling window construction process as shown in . A type 1 subframe can include a subframe which is not removed from one Cell to the other e.g. from the PCell to the SCell or the SCell to the PCell for virtual HARQ ACK bundling window construction. A type 2 subframe can be a subframe which is virtually removed from one Cell to the other e.g. from the PCell to the SCell or the SCell to the PCell to generate the virtual HARQ ACK bundling window.

Various methods at least four different methods for deriving PUCCH resources can be performed for a corresponding PDCCH with the DAI value equal to 1 or 2 is carried on a type 2 subframe after a cross CC DAI counting operation.

In a first method i.e. method 1 PUCCH resources corresponding to type 2 subframe s can be signaled by Radio Resource Control RRC signaling. As shown in Table 4 illustrated in four sets of PUCCH channels indexed by a transmit power control TPC command e.g. 00 01 10 and 11 can be configured by RRC signaling with a one to one association between type 2 downlink subframes and each set of PUCCH channels. Each set of PUCCH channels can comprise of

Case A can apply without semi persistence scheduling SPS PDSCH transmission on both the PCell and the SCell. After a virtual bundling window operation if the downlink assignment index DAI value in the PDCCH of type 2 subframe i 0 i M 1 equal to j j 1 or 2 then a corresponding PUCCH channel value can be determined by Expression 1 

Case B can apply when one of the type 2 subframes is a PDSCH transmission without a corresponding PDCCH detected i.e. the subframe is scheduled by semi persistent scheduling SPS as illustrated in . Case B can occurs when M M 2. A similar PUCCH resources mapping operation to Case A can be applied to Case B except the following operations can be used A HARQ ACK 0 can be an acknowledgement ACK Negative ACK NACK or discontinuous transmission DTX response i.e. ACK NACK DTX response for a SPS PDSCH transmission and the corresponding value of ncan be determined according to PUCCH resources configured by a higher layer denoted as n. A n nwhen DAI 1 is detected in the PDCCH of type 2 subframe i 0 i M 1 . Using an example with the configuration 4 on the PCell and the configuration 0 on the SCell case B can be illustrated in with a type 2 subframe used as SPS PDSCH. illustrates an example PUCCH resources mapping for HARQ ACK feedback in the Case B.

In an alternate first method i.e. method 1 1 or another explicit resource allocation method a maximum of two PUCCH resources can be given by RRC signaling and the ARI usage. The TPC values in downlink control information DCI for the PCell can be used as real TPC and the TPC values for the SCell can be used as ARI. In an example where M M 2 where M 1 M 1 the type 2 subframe can be virtually moved from the SCell to the PCell. If the DAI value in type 2 subframe is 1 or 2 the PUCCH resource induced by a type 2 subframe may not be obtained since the maximum number of explicit PUCCH resources is two. Therefore another solution can be The eNB configures four sets of PUCCH resources and each set consists of three PUCCH resources then the TPC field in DL assignment used as the ARI e.g. for the SCell and for the type 2 subframe indicates actual PUCCH resource set to be used e.g. using Table 5 illustrated in and the ARIs can be the same for the DL subframes except for the DL subframes used as real TPC. Table 5 i.e. illustrates a table of a PUCCH resource value according to the ARI e.g. the TPC command for PUCCH .

In another method e.g. second method or method 2 flexible PUCCH resources mapping can be associated with type 2 subframe s . Method 1 can provide a common PUCCH resources mapping solution to enable a virtual bundling window method applicable for the various UL DL configurations combinations e.g. PCell and SCell UL DL configurations combinations . For method 1 the control overhead can be large considering the PUCCH resources associated with type 2 subframes can be reserved by the eNB e.g. node if PUCCH format 1b with channel selection is configured. Another solution can be used to reduce the control overhead in a case where M M as illustrated below.

If the type 2 PDSCH is a PDSCH transmission indicated by the detection of corresponding PDCCH or a PDCCH indicates a downlink SPS release the PUCCH resources associated with the type 2 subframe i 0 i M 1 can be implicitly mapped using Expression 2. 1 Expression 2 

For a PUCCH resource associated with type 2 PDSCH without a corresponding PDCCH detected e.g. SPS explicit PUCCH resource can be configured by RRC signaling as in the method 1. For a case of M

After the corresponding PUCCH resources n . . . n are generated a same one to one mapping method between n0 i 3 and n 0 j M 1 as in method 1 can be used for the HARQ ACK feedback to utilize a legacy mapping table e.g. Tables 9 16 illustrated in .

In another method e.g. third method or method 3 a common HARQ ACK bundling window selection with a specific HARQ ACK states padding operation can be used. The third method can differ from previous methods and may not be based on a PUCCH resources mapping of virtual bundling windows generation method. In method 3 a HARQ ACK feedback candidate scheme can be used for inter band TDD CA. Compared with method 1 and method 2 a legacy PUCCH resources mapping rule for PUCCH format 1b with channel selection can be fully reused by method 3 which can use less standardization for legacy HARQ ACK multiplexing tables.

As shown in and for illustration purposes a smaller bundling window size can be referred to as Mand the size of the corresponding larger bundling window associated with a same single uplink subframe for PUCCH HARQ ACK transmission can be referred to as M. schematically illustrates a HARQ ACK bundling window size for inter band TDD CA.

In an example the UE can determine a HARQ ACK j where 0 j M 1 for each serving cell. In a first operation e.g. step 1 a common bundling window size can be determined where one common HARQ ACK bundling window size M is determined as M max M M . According to the definition of Mand M the expression or equation for a common bundling window size calculation can be further simplified as M M . The UE can perform channel selection according to a legacy channel selection mapping tables e.g. Tables 9 16 illustrated in corresponding to bundling window size M .

In a second operation e.g. step 2 spatial HARQ ACK bundling across multiple codewords within a DL subframe can be performed when the transmission mode TM configured for the serving cell supports up to two transmission blocks TBs . In another example spatial HARQ ACK bundling across multiple codewords within a DL subframe can be performed when the transmission mode TM configured with the serving cell as one of the cells with M 0 and M 1.

In a third operation e.g. step 3 the HARQ ACK j can be generated where 0 j M 1. The third operation can transform the bundling window size Mfor the smaller cell e.g. PCell or SCell to the bundling window size Mfor the larger cell. The bundling window size min M M can be different from a legacy design. For illustration purposes M

For case 1 in step 3 1 instead of DTX appending ACK NACK is further mapped to ACK DTX DTX DTX and NACK ACK is mapped to ACK ACK ACK NACK DTX . Or alternatively ACK NACK is further mapped to ACK ACK ACK NACK DTX and NACK ACK is mapped to ACK DTX DTX DTX . Without the a special rule the ACK NACK can be automatically mapped to ACK NACK DTX DTX according to a DTX padding principle. For a case that M 2 and M 4 the HARQ ACK j where 0 j M 1 can be summarized in Table 6 illustrated in . Table 6 i.e. illustrates a table used for HARQ ACK generation for the cell with M 2 in the case of M 2 and M 4.

In case 2 M 2 M 3 and the HARQ ACK 0 HARQ ACK 1 can be mapped as NACK ACK for the cell with M 2 in step 3 0 by following a legacy LTE Release 10 Rel 10 HARQ ACK mapping method.

For case 2 the UE can further map the HARQ ACK feedback to a corresponding HARQ ACK state as HARQ ACK 0 HARQ ACK 1 HARQ ACK 2 ACK ACK ACK in step 3 1. For a case that M 2 M 3 a HARQ ACK states generation can be summarized in Table 7 illustrated in . Table 7 i.e. illustrates a table used for HARQ ACK generation for the cell with M 2 in the case of M 2 and M 3.

In a fourth operation e.g. step 4 the UE can perform channel selection using legacy channel selection mapping tables corresponding to bundling window size M according to the mapped HARQ ACK j in step 3 for each cell where 0 j M 1. The PUCCH resource mapping method can fully reused a legacy scheme for PUCCH format 1b with channel selection. In an example a scheme for PUCCH format 1b with channel selection can be described in section 10.1.3.2.1 of 3GPP LTE TS 36.213 V11.1.0 Release 11 .

In another example the UE can determine the bundling window size for M in carrier aggregation by max M M . For the serving cell having the smaller bundling window size the predetermined state e.g. DTX can be padded by max M M min M M with exception of certain states. For example in case of min M M 2 and max M M 4 the state of ACK NACK for the serving cell with min M M 2 can be mapped to ACK DTX DTX DTX for the legacy mapping table. In case of min M M 2 and max M M 4 the state of NACK ACK for the serving cell with min M M 2 can be mapped to ACK ACK ACK NACK DTX for the legacy mapping table. In case of min M M 2 and max M M 3 the state of NACK ACK for the serving cell with min M M 2 can be mapped to ACK ACK ACK for the legacy mapping table. Then the legacy mapping table can be applied for channel selection where ACK represents a successful decoding for the corresponding PDSCH the NACK represents decoding failure for the corresponding PDSCH and DTX represents that the UE does not transmit any acknowledgement to PDSCH due to decoding fail for the corresponding PDCCH.

In an alternative example the UE can determine the bundling window size for M in carrier aggregation by max M M . For the serving cell with smaller bundling window size the predetermined state e.g. DTX can be padded by max M M min M M with exception of certain states. For example in case of min M M 2 and max M M 4 the state of ACK NACK for the serving cell with min M M 2 can be mapped to ACK ACK ACK NACK DTX for the legacy mapping table. In case of min M M 2 and max M M 4 the state of NACK ACK for the serving cell with min M M 2 can be mapped to ACK DTX DTX DTX for the legacy mapping table. In case of min M M 2 and max M M 3 the state of NACK ACK for the serving cell with min M M 2 can be mapped to ACK ACK ACK for the legacy mapping table. Then the legacy mapping table can be applied for channel selection where ACK represents a successful decoding for the corresponding PDSCH the NACK represents decoding failure for the corresponding PDSCH and DTX represents that UE does not transmit any acknowledgement to PDSCH due to decoding fail for the corresponding PDCCH.

In another method e.g. fourth method or method 4 a HARQ ACK look up mapping table can be defined before reusing the legacy mapping table. illustrates a HARQ ACK look up mapping table shown as Table 8. Table 8 illustrates a HARQ ACK look up mapping table for different UL DL configuration of inter band TDD CA. For a UE configured with PUCCH format 1b with channel selection for HARQ ACK transmission a procedure to determine the PUCCH resources can be described by four operation e.g. steps .

In a first operation e.g. step 1 the UE can selects the legacy mapping table with M max M M Mfor HARQ feedback on PUCCH where Mis the number of PDSCH subframe for the cell with smaller HARQ ACK bundling window size and Mis the number of PDSCH subframe for the cell with the larger HARQ ACK bundling window size.

In a third operation e.g. step 3 the HARQ ACK mapping for the CC with bundling window size Mcan be a same size as a legacy HARQ ACK mapping table and marked as HARQ ACK m 0 m

In a fourth operation e.g. step 4 the UE can perform channel selection based on the HARQ ACK states HARQ ACK k 0 k

Table 17 i.e. can summarize a legacy HARQ ACK mapping table for more than one configured serving cell case. As shown in Table 17 an overlapped state can occur for both of N any any any and A D N any any except for A D D D last row of Table 17 . An overlap state can occur when a state represents more than one state. Taking into account the overlap mapped state in Table 17 some performance degradations on the serving cell characteristic of the smaller bundling window size can occur due to DTX state padding in the first solution above.

For instance padding additional HARQ ACK states with DTX can result in the HARQ ACK state being unknown at a node e.g. eNB side and therefore the scheduling of PDSCHs on PCell can be potentially restricted at the eNB resulting in substantial DL throughput loss as the PCell may not be practically usable. In another example carrier aggregation functionality can be severely impacted or almost disabled implicitly when DTX padding method e.g. first solution is used for PUCCH format 1b with channel selection.

Based on the issue with the described DTX padding method some mechanisms and solutions e.g. method 3 or 4 can be used to alleviate the issue to enable CA functionality when PUCCH format 1b with channel selection and more than one CC with different UL DL configurations are configured for the UE.

Another example provides a method to support implicit mapping for Hybrid Automatic Retransmission re Quest HARQ with Carrier Aggregation CA at a User Equipment UE as shown in the flow chart in . The method may be executed as instructions on a machine computer circuitry or a processor for the UE where the instructions are included on at least one computer readable medium or one non transitory machine readable storage medium. The method includes the operation of identifying within a radio frame a type 2 DownLink DL sub frame within a virtual bundling window associated with a Secondary Component Carrier SCC wherein the type 2 DL sub frame is virtually moved from a Primary Component Carrier PCC for HARQ ACKnowledge HARQ ACK multiplexing of the virtual bundling window as in block . The operation of extracting a Component Carrier Element CCE number for a first CCE used by a Physical Downlink Control CHannel PDCCH transmission corresponding to the type 2 DL sub frame follows as in block . The next operation of the method can be determining a Physical Uplink Control CHannel PUCCH resource for carrying a HARQ ACK multiplexing message based on the CCE number when a PCC window size of the PCC is greater than an SCC window size of the SCC as in block .

In an example a selected number of DL sub frames from the second bundling window can be selected from an end of the second bundling window and added to an end of DL sub frames in the first bundling window. The first bundling window and the second bundling window can include multiple DL sub frame sets associated with one UpLink UL sub frame to carry the HARQ ACK feedback according to Third Generation Partnership Project 3GPP Long Term Evolution LTE standard Release 10 or Release 11 for cell specific Physical Downlink Shared CHannel PDSCH HARQ timing.

In another example the method can further include Extracting a Downlink Assignment Index DAI value from the PDCCH transmission corresponding to the type 2 DL sub frame and assigning the PUCCH resource to a channel value used in a legacy mapping table for HARQ ACK multiplexing using the DAI value. the PUCCH resource nassociated with the type 2 DL sub frame is represented by n M m 1 N m N n N or an integer i where 0 i M 1 Nis configured by a higher layer N max0 N N p 4 36 max is a maximum function Nis a downlink bandwidth configuration expressed in units of N Nis a resource block size in the frequency domain expressed as a number of subcarriers p is a value out of 0 1 2 3 which makes N n

In another configuration the method can further include Receiving a type 2 Physical Downlink Shared CHannel PDSCH transmission indicated by a corresponding PDCCH or receiving a DL Semi Persistent Scheduling SPS release indicated by a corresponding PDCCH. In another example the method can further include mapping the virtual bundling window to a legacy HARQ ACK table from HARQ ACK multiplexing tables 10.1.3 2 to 10.1.3 7 specified in Technical Specification TS 36.213 of Release 10 of Third Generation Partnership Project 3GPP Long Term Evolution LTE standards e.g. Tables 9 14 illustrated in .

Another example provides functionality of computer circuitry of a processor on a user equipment UE operable to provide Hybrid Automatic Retransmission re Quest ACKnowledge HARQ ACK responses as shown in the flow chart in . The functionality may be implemented as a method or the functionality may be executed as instructions on a machine where the instructions are included on at least one computer readable medium or one non transitory machine readable storage medium. The computer circuitry can be configured to determine a maximum size and a minimum size of a first bundling window on a first Component Carrier CC and a second bundling window on a second CC within a same radio frame the first CC and the second CC having differing UpLink UL DownLink DL configurations within the same radio frame as in block . The computer circuitry can be further configured to map decoded DL sub frames in a smaller of the first bundling window and the second bundling window with the minimum size to a small ordered series of HARQ ACK states provided in a first legacy HARQ ACK table using the minimum size as in block . The computer circuitry can also be configured to re map the small ordered series of HARQ ACK states corresponding to the first legacy HARQ ACK table to a padded ordered series of HARQ ACK states provided in a second legacy HARQ ACK table using the maximum size as in block .

In an example the computer circuitry configured to re map the first ordered series of HARQ ACK states can be further configured to Pad the small ordered series of HARQ ACK states with a number of instances of a predetermined HARQ ACK state to form the padded ordered series of HARQ ACK states map the padded ordered series of HARQ ACK states corresponding to the small ordered series of HARQ ACK states using the second legacy HARQ ACK table when the first ordered series does not include both an ACK state and a Negative ACK NACK state and the minimum is not two and re map the first ordered series of HARQ ACK states to a predefined ordered series of HARQ ACK states corresponding to the second legacy HARQ ACK table when the minimum is two and the first ordered series includes both the ACK state and at least one of the NACK state and a Discontinuous Transmission DTX state.

In another example the computer circuitry configured to re map the first ordered series of HARQ ACK states to the predefined ordered series of HARQ ACK states for the minimum size of two and the maximum size of four can be further configured to Determine a case when the first ordered series of HARQ ACK states comprises HARQ ACK 0 HARQ ACK 1 equal to one of one of ACK NACK ACK DTX and NACK ACK as provided in the first legacy HARQ ACK table re map the first ordered series of HARQ ACK states to the predefined ordered series of HARQ ACK states comprising HARQ ACK 0 HARQ ACK 1 HARQ ACK 2 HARQ ACK 3 equal to ACK DTX DTX DTX as provided by the second legacy HARQ ACK table when HARQ ACK 0 HARQ ACK 1 of the first ordered series of HARQ ACK states equals ACK NACK or ACK DTX and re map the first ordered series of HARQ ACK states to the predefined ordered series of HARQ ACK states comprising HARQ ACK 0 HARQ ACK 1 HARQ ACK 2 HARQ ACK 3 equal to one of ACK ACK ACK NACK and ACK ACK ACK DTX as provided by the second legacy HARQ ACK table when HARQ ACK 0 HARQ ACK 1 of the first ordered series of HARQ ACK states equals NACK ACK .

In another configuration the computer circuitry configured to re map the first ordered series of HARQ ACK states to the predefined ordered series of HARQ ACK states for the minimum size of two and the maximum size of four can be further configured to Determine a case when the first ordered series of HARQ ACK states comprises HARQ ACK 0 HARQ ACK 1 equal to one of one of ACK NACK ACK DTX and NACK ACK as provided in the first legacy HARQ ACK table re map the first ordered series of HARQ ACK states to the predefined ordered series of HARQ ACK states comprising HARQ ACK 0 HARQ ACK 1 HARQ ACK 2 HARQ ACK 3 equal to one of ACK ACK ACK NACK and ACK ACK ACK DTX as provided by the second legacy HARQ ACK table when HARQ ACK 0 HARQ ACK 1 of the first ordered series of HARQ ACK states equals ACK NACK or ACK DTX and re map the first ordered series of HARQ ACK states to the predefined ordered series of HARQ ACK states comprising HARQ ACK 0 HARQ ACK 1 HARQ ACK 2 HARQ ACK 3 equal to ACK DTX DTX DTX as provided by the second legacy HARQ ACK table when HARQ ACK 0 HARQ ACK 1 of the first ordered series of HARQ ACK states equals NACK ACK .

In another example the computer circuitry configured to re map the first ordered series of HARQ ACK states to the predefined ordered series of HARQ ACK states for the minimum size of two and the maximum size of three can be further configured to Determine a case when the first ordered series of HARQ ACK states comprises HARQ ACK 0 HARQ ACK 1 equal to NACK ACK as provided in the first legacy HARQ ACK table and re map the first ordered series of HARQ ACK states to the predefined ordered series of HARQ ACK states comprising HARQ ACK 0 HARQ ACK 1 HARQ ACK 2 equal to ACK ACK ACK as provided by the second legacy HARQ ACK table when HARQ ACK 0 HARQ ACK 1 of the first ordered series of HARQ ACK states equals NACK ACK .

In another configuration the computer circuitry can be further configured to perform spatial HARQ ACK bundling across multiple codewords within DL sub frames in the radio frame when a corresponding Transmission Mode TM on at least one of the first CC and the second CC supports up to two Transmission Blocks TBs per sub frame and the minimum size does not equal zero and the maximum size does not equal one on a CC with a TM supporting up to two TBs.

In another example the computer circuitry can be further configured to Perform channel selection using a channel value corresponding to the padded or predefined ordered series of HARQ ACK states provided in the second legacy HARQ ACK table and prepare a Physical Uplink Control CHannel PUCCH format 1b message with a constellation point consistent with the padded or predefined ordered series of HARQ ACK states provided in the second legacy HARQ ACK table for transmission on a channel consistent with the channel selection.

In another configuration the computer circuitry can be further configured to select the first legacy HARQ ACK table and the second legacy HARQ ACK table from HARQ ACK multiplexing tables 10.1.3 2 to 10.1.3 7 specified in Technical Specification TS 36.213 of Release 10 of Third Generation Partnership Project 3GPP Long Term Evolution LTE standards e.g. Tables 9 14 illustrated in based on the minimum size for the first legacy HARQ ACK table and the maximum size for the second legacy HARQ ACK table.

In another example the computer circuitry can be further configured to determine the number of instances of the predetermined HARQ ACK state by which to pad the first series of ordered HARQ ACK states as equal to the maximum size less the minimum size when spatial bundling is performed or one of the first CC and the second CC with the minimum size is configured for a single Transmission Block TB per DL sub frame within the radio frame.

In another configuration the computer circuitry can be further configured to determine the number of instances of the predetermined HARQ ACK state by which to pad the first series of ordered HARQ ACK states as equal to twice the maximum size less twice the minimum size where one of the first CC and the second CC with the minimum size is configured for two Transmission Blocks TBs per DL sub frame within the radio frame and spatial bundling has not been performed. In another example the predetermined HARQ ACK state is Discontinuous Transmission DTX .

The wireless device can include a transceiver and a processor . The wireless device i.e. device can be configured to support explicit mapping for Hybrid Automatic Retransmission re Quest HARQ for Carrier Aggregation CA . The processor can include a type module a selection module an index module a read module a comparison module a map module a decoding module a message module a counting module and an association module .

The type module can be configured to detect a type 2 set of DownLink DL sub frames of a radio frame for a virtual HARQ ACKnowledge HARQ ACK bundling window. The HARQ ACK bundling window can comprise a type 1 set of DL sub frames transmitted from a first Component Carrier CC and the type 2 set of DL sub frames transmitted from an additional CC and the type 2 set can be bundled with a HARQ ACK bundling window for the first CC. The selection module can be configured to select a set of Physical Uplink Control CHannel PUCCH resources from multiple sets of PUCCH resources configured by Radio Resource Control RRC signaling depending on the Transmit Power Control TPC field value in the Downlink Control Information DCI format of a corresponding Physical Downlink Control CHannel PDCCH . Each PUCCH resource in the set can have a one to one relationship associated with a DL frame in the type 2 set. The index module can be configured to index a PUCCH resource to a channel value used in a legacy mapping table for HARQ ACK multiplexing wherein the PUCCH resource includes HARQ ACK feedback for the type 2 set of the DL sub frames.

In another example read module can be configured to read a Downlink Assignment Index DAI value in a PDCCH transmission corresponding to the DL sub frame in the one to one relationship. The comparison module can be configured to determine a larger window size between a HARQ ACK bundling window for a Primary CC PCC with a PCC window size Mand a HARQ ACK bundling window for a Secondary CC SCC with a SCC window size M. Each of the first CC and the additional CC can be one of the PCC or the SCC to the exclusion of the other. The index module can be further configured where the DAI value is equal to one of one and two to index a PUCCH resource in the one to one relationship to one of A channel value equal to the DAI value minus one where the SCC window size Mis the larger window size or a channel value equal to the DAI value plus one where the PCC window size Mis the larger window size.

In another example read module can be configured to determine that a Semi Persistent Scheduling SPS DL sub frame in the type 2 set carries a Physical Downlink Shared CHannel PDSCH transmission without a corresponding Physical Downlink Control CHannel PDCCH transmission. The comparison module can be configured determine a larger window size between a HARQ ACK bundling window for a Primary CC PCC with a PCC window size Mand a HARQ ACK bundling window for a Secondary CC SCC with a SCC window size M. Each of the first CC and the additional CC being one of the PCC or the SCC to the exclusion of the other. The selection module can be further configured to select a set of Physical Uplink Control CHannel PUCCH resources from four sets of PUCCH resources with a PUCCH resource comprising a channel in a one to one relationship with the SPS DL sub frame. The index module can be further configured to index a PUCCH resources in the one to one relationship with the SPS DL sub frame to a channel value for HARQ ACK multiplexing according to the legacy mapping table for HARQ ACK multiplexing when M M 2.

In another example the map module can be configured to select a mapped state from the legacy mapping table for HARQ ACK multiplexing corresponding to HARQ ACK states for DL sub frames in the virtual window. The map module can be further configured to interpret a HARQ state for the SPS DL sub frame as corresponding to a HARQ ACK 0 position on the legacy mapping table for HARQ ACK multiplexing. The index module can be further configured to index a PUCCH resource nrepresented by n nwhen a Downlink Assignment Index DAI value equals one is detected in the PDCCH of the type 2 sub frame i where 0 i M 1 .

In another configuration the decoding module can be configured to generate HARQ ACK states from the DL sub frames on the first CC and the additional CC. The map module can be configured to Select the legacy mapping table from HARQ ACK multiplexing tables 10.1.3 2 to 10.1.3 7 specified in Technical Specification TS 36.213 of Release 10 of Third Generation Partnership Project 3GPP Long Term Evolution LTE standards e.g. Tables 9 14 illustrated in based on a size of the virtual bundling window and select a first mapped state from the legacy mapping table corresponding to HARQ ACK states for DL sub frames in the virtual window for two CCs. The message module can be configured to embed a constellation point corresponding to the first mapped state in a PUCCH format 1b message on a PUCCH resource indexed to a PUCCH resource channel value corresponding to the first mapped state.

In another example the counting module can be configured to assign a unique number M to a DL sub frame in the type 2 set represented by

In another configuration the selection module selects a set of PUCCH resources with three PUCCH resources from four sets of PUCCH resources known to the UE where each set of PUCCH resources in the four sets of PUCCH resources comprise three PUCCH resources when M M 2 where Mrepresents the bundling window size for a HARQ ACK bundling window for a Primary CC PCC and Mrepresents the bundling window size for a HARQ ACK bundling window for a Secondary CC SCC . Each of the first CC and the additional CC being one of the PCC or the SCC to the exclusion of the other.

Various techniques or certain aspects or portions thereof may take the form of program code i.e. instructions embodied in tangible media such as floppy diskettes CD ROMs hard drives non transitory computer readable storage medium or any other machine readable storage medium wherein when the program code is loaded into and executed by a machine such as a computer the machine becomes an apparatus for practicing the various techniques. Circuitry can include hardware firmware program code executable code computer instructions and or software. A non transitory computer readable storage medium can be a computer readable storage medium that does not include signal. In the case of program code execution on programmable computers the computing device may include a processor a storage medium readable by the processor including volatile and non volatile memory and or storage elements at least one input device and at least one output device. The volatile and non volatile memory and or storage elements may be a RAM EPROM flash drive optical drive magnetic hard drive solid state drive or other medium for storing electronic data. The node and wireless device may also include a transceiver module a counter module a processing module and or a clock module or timer module. One or more programs that may implement or utilize the various techniques described herein may use an application programming interface API reusable controls and the like. Such programs may be implemented in a high level procedural or object oriented programming language to communicate with a computer system. However the program s may be implemented in assembly or machine language if desired. In any case the language may be a compiled or interpreted language and combined with hardware implementations.

It should be understood that many of the functional units described in this specification have been labeled as modules in order to more particularly emphasize their implementation independence. For example a module may be implemented as a hardware circuit comprising custom VLSI circuits or gate arrays off the shelf semiconductors such as logic chips transistors or other discrete components. A module may also be implemented in programmable hardware devices such as field programmable gate arrays programmable array logic programmable logic devices or the like.

Modules may also be implemented in software for execution by various types of processors. An identified module of executable code may for instance comprise one or more physical or logical blocks of computer instructions which may for instance be organized as an object procedure or function. Nevertheless the executables of an identified module need not be physically located together but may comprise disparate instructions stored in different locations which when joined logically together comprise the module and achieve the stated purpose for the module.

Indeed a module of executable code may be a single instruction or many instructions and may even be distributed over several different code segments among different programs and across several memory devices. Similarly operational data may be identified and illustrated herein within modules and may be embodied in any suitable form and organized within any suitable type of data structure. The operational data may be collected as a single data set or may be distributed over different locations including over different storage devices and may exist at least partially merely as electronic signals on a system or network. The modules may be passive or active including agents operable to perform desired functions.

Reference throughout this specification to an example means that a particular feature structure or characteristic described in connection with the example is included in at least one embodiment of the present invention. Thus appearances of the phrases in an example in various places throughout this specification are not necessarily all referring to the same embodiment.

As used herein a plurality of items structural elements compositional elements and or materials may be presented in a common list for convenience. However these lists should be construed as though each member of the list is individually identified as a separate and unique member. Thus no individual member of such list should be construed as a de facto equivalent of any other member of the same list solely based on their presentation in a common group without indications to the contrary. In addition various embodiments and example of the present invention may be referred to herein along with alternatives for the various components thereof. It is understood that such embodiments examples and alternatives are not to be construed as defacto equivalents of one another but are to be considered as separate and autonomous representations of the present invention.

Furthermore the described features structures or characteristics may be combined in any suitable manner in one or more embodiments. In the following description numerous specific details are provided such as examples of layouts distances network examples etc. to provide a thorough understanding of embodiments of the invention. One skilled in the relevant art will recognize however that the invention can be practiced without one or more of the specific details or with other methods components layouts etc. In other instances well known structures materials or operations are not shown or described in detail to avoid obscuring aspects of the invention.

While the forgoing examples are illustrative of the principles of the present invention in one or more particular applications it will be apparent to those of ordinary skill in the art that numerous modifications in form usage and details of implementation can be made without the exercise of inventive faculty and without departing from the principles and concepts of the invention. Accordingly it is not intended that the invention be limited except as by the claims set forth below.

