---

title: System, server, communication device and computer readable medium therefor
abstract: Computer-readable instructions, when executed by a processor of a server, cause the server to receive a request from a terminal device, using a protocol configured to be used by a browser of the terminal device. The computer-readable instructions cause the server to generate, in response to receiving the request, specific data. The specific data comprises first location information for location of a web data configured to display a message screen for transmitting target data from the terminal device to a communication device using a short-range wireless communication, and the target data is stored in a memory of the server associated with authentication information configured to authenticate the communication device to a service providing server. The specific data configured to be in a format for transmission using the protocol.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09232395&OS=09232395&RS=09232395
owner: BROTHER KOGYO KABUSHIKI KAISHA
number: 09232395
owner_city: Nagoya-Shi, Aichi-Ken
owner_country: JP
publication_date: 20130906
---
This application claims priority to Japanese Patent Application No. 2012 218125 filed on Sep. 28 2012 which is incorporated herein by reference.

The specification discloses a server configured to transmit web data to a terminal device and further discloses a communication device configured to perform wireless communication with the terminal device.

For example in a known technique a system includes a personal computer PC a relay device a multifunction peripheral MFP and a service providing device. The PC transmits a temporary registration ID issue request to the relay device. Upon receipt of the temporary registration ID issue request the relay device generates a temporary registration ID and transmits the temporary registration ID to the PC. Thus the PC displays the temporary registration ID thereon. A user inputs the temporary registration ID displayed on the PC into the MFP by operating the MFP. Upon receipt of the temporary registration ID the MFP transmits the temporary registration ID to the relay device. Upon receipt of the temporary registration ID the relay device acquires an access token from the service providing device using the temporary registration ID. In the known technique the user may need to operate the MFP to input the temporary registration ID into the MFP.

Embodiments of the disclosure provide for a technique of providing target data to a communication device using a new method. For a more complete understanding of the present disclosure and the objects features and advantages thereof reference now is made to the following descriptions taken in connection with the accompanying drawings.

One exemplary embodiment of the present disclosure is to provide a system comprising a server and a communication device. The server comprises a first processor and a first memory. The first memory is configured to store authentication information configured to authenticate the communication device to a service providing server target data associated with the authentication information and first computer readable instructions therein. The first computer readable instructions when executed by the first processor cause the server to receive a request from a terminal device using a protocol configured to be used by a browser of the terminal device. The first computer readable instructions cause the server to generate in response to receiving the request specific data. The specific data comprises first location information for location on the server of storing web data configured to display a message screen for transmitting target data from the terminal device to a communication device using a short range wireless communication and the target data is stored in the first memory associated with the authentication information. The specific data is configured to be in a format for transmission using the protocol. The first computer readable instructions cause the server to transmit the specific data to the terminal device. The communication device comprises a second processor and a second memory. The second memory is configured to store second computer readable instructions therein that when executed by the second processor cause the communication device to receive the specific data from the terminal device using the short range wireless communication between the terminal device and the communication device the specific data comprising the target data. The second computer readable instructions cause the communication device to transmit the target data to a server. The first computer readable instructions cause the server to receive from the communication device the target data transmitted by the server to the terminal device. The first computer readable instructions cause the server to transmit to the communication device the authentication information associated with the received target data. The second computer readable instructions cause the communication device to receive the authentication information from the server and request authentication to the service providing server using the received authentication information.

Another exemplary embodiment of the disclosure is to provide a non transitory computer readable medium storing computer readable instructions therein. The computer readable instructions when executed by a processor of a server cause the server to receive a request from a terminal device using a protocol configured to be used by a browser of the terminal device. The computer readable instructions cause the server to generate in response to receiving the request specific data. The specific data comprises first location information for location of a web data configured to display a message screen for transmitting target data from the terminal device to a communication device using a short range wireless communication and the target data is stored in a memory of the server associated with authentication information configured to authenticate the communication device to a service providing server. The specific data is configured to be in a format for transmission using the protocol. The computer readable instructions cause the server to transmit the specific data including the target data to the terminal device. The computer readable instructions cause the server to receive from the communication device the target data transmitted by the server to the terminal device and transmit to the communication device the authentication information from the memory the authentication information associated with the received target data.

A further exemplary embodiment of the disclosure is to provide a communication device comprises a processor and a memory. The memory is configured to store computer readable instructions therein. The computer readable instructions when executed by the processor cause the communication device to receive specific data from the terminal device using a short range wireless communication between a terminal device and the communication device. The specific data comprises target data associated with authentication information. The specific data is configured to be in a format for transmission using a protocol configured to be used by a browser of the terminal device. The computer readable instructions cause the communication device to transmit the target data to a server using a network communication. The computer readable instructions cause the communication device to receive the authentication information associated with the target data from the server using the network communication and request authentication to a service providing server using the received authentication information using the network communication.

A first illustrative embodiment will be described below. As depicted in a communication system comprises a multifunction peripheral MFP an intermediary server a plurality of service providing servers and a mobile terminal and a personal computer PC . Each of the devices and is configured to be accessible to the Internet. Further each of the MFP and the mobile terminal is configured to perform communication using Near Field Communication NFC system hereinafter referred to as NFC .

The MFP is a peripheral device configured to perform multiple functions such as one or more of a printing function a scanning function a copying function and a facsimile function. The MFP comprises an operation portion a display portion an NFC interface I F a printing execution portion a scanning execution portion a network interface I F and a control device . The operation portion comprises a plurality of keys. A user is allowed to input various instructions into the MFP by operating the operation portion . The display portion comprises a display configured to display various information thereon. The printing execution portion comprises a printing mechanism of one of an inkjet type and a laser type. The scanning execution portion comprises a scanning mechanism using one of a charged coupled device CCD and a contact image sensor CIS .

The NFC I F is configured to enable the MFP to perform wireless communication using an NFC system. The NFC system is one of wireless communication systems for so called short range wireless communication and in compliance with the International standards e.g. ISO IEC 21481 and ISO IEC 18092. The network I F is configured to enable the MFP to connect to a local area network LAN . The network I F is configured to enable the MFP to connect to one of a wired LAN and a wireless LAN. The MFP is configured to be accessible to the Internet via the network I F i.e. the LAN .

The control device comprises a central processing unit CPU and a memory . The CPU is configured to perform various processing in accordance with programs stored in the memory . Each function of a reception portion a processing execution portion and an extraction portion is implemented by the CPU to perform processing in accordance with the programs.

The MFP is allowed to obtain service from one or more service providing servers e.g. the service providing server by performing processing depicted in . For example the MFP is allowed to download image data from a service providing server and to print an image represented by the image data onto a printing medium hereinafter referred to as a downloading and printing process . That is the MFP is configured to perform the downloading and printing process in response to data supply service offered by the service providing server. Further for example the MFP is allowed to upload image data generated by scanning to the service providing server hereinafter referred to as a scanning and uploading process . That is the MFP is configured to perform the scanning and uploading process in response to data storage service offered by the service providing server.

The intermediary server is provided by a vender of the MFP . The intermediary server is configured to mediate service from the one or more service providing servers e.g. one or more of the service providing servers and to the MFP . The intermediary server functions as a Web server configured to provide web data to the mobile terminal and the PC . The intermediary server comprises a network interface I F and a control device . The intermediary server is configured to be accessible to the Internet via the network I F .

The control device comprises a CPU and a memory . The CPU is configured to perform various processing in accordance with programs stored in the memory . Each function of a first reception portion a second reception portion a first transmission portion a second transmission portion a preparation portion a generation portion an acquirement portion and a determination portion is implemented by the CPU to perform processing in accordance with the programs.

Each service providing server are examples of Evernote Evernote is a registered trademark owned by Evernote Corporation of Redwood City Calif. Google Docs Google Docs is a trademark owned by Google Inc. of Mountain View Calif. PICASA PICASA is a registered trademark owned by Google Inc. of Mountain View Calif. and Facebook Facebook is a registered trademark owned by Facebook Inc. of Menlo Park Calif. . In the first illustrative embodiment names of the service providing servers and i.e. a service name are AAA and BBB respectively. The service providing server is configured to offer one or more of data supply service for supplying data to a communication device e.g. the MFP and data storage service for storing data acquired from a communication device.

The service providing server is provided by a first service provider i.e. a first company . The service providing server is provided by a second service provider i.e. a second company that is a different company from the first service provider. The first service provider opens its first application programming interface API to a communication device such that the communication device becomes enabled to obtain service from the service providing server . The second service provider also opens its second API to a communication device such that the communication device becomes enabled to obtain service from the service providing server . The first service provider is a different company from the second service provider. Therefore generally the first API and the second API are different from each other. A communication device needs to support both of the first and second APIs to obtain service from both of the service providing servers and for example. That is the communication device needs to be equipped with both a program for using the first API and a program for using the second API.

Accordingly to obtain service from a plurality of service providing servers e.g. the service providing servers and the MFP needs to support a plurality of APIs. Therefore the MFP needs to store a plurality of programs in the memory . However generally a storage capacity of the memory of the MFP is less than a storage capacity of a memory of the PC . Therefore in the first illustrative embodiment the intermediary server is provided to enable the MFP to obtain service from the plurality of service providing servers e.g. the service providing servers and without storing a plurality of programs in the memory of the MFP .

That is the intermediary server is configured to support a plurality of APIs for the plurality of service providing servers e.g. the service providing servers and . The intermediary server is configured to perform communication e.g. communication to acquire an access token with one or more of the service providing servers and using an appropriate one of the APIs of the service providing servers and to enable the MFP to obtain service from one or more of the service providing servers and . Thus the MFP can obtain service from one or more of the service providing servers and although the MFP does not support the APIs for the service providing servers and i.e. the MFP does not store the plurality of programs therein . Further when specifications of one or more of the service providing servers and are changed the only requirement is to change the program of the intermediary server . With the change of the program of the intermediary server the MFP can respond to the specification change of one or more of the service providing servers and while the programs of the MFP are not changed. Furthermore the program of the intermediary server is changed to support one or more APIs of one or more new service providing servers. With this program change in the intermediary server the MFP becomes enabled to obtain service from one or more of the new service providing servers while the programs of the MFP are not changed.

The mobile terminal is a portable terminal device. The portable terminal device comprises for example a mobile phone e.g. a smartphone a personal digital assistant PDA a notebook PC a tablet PC a portable audio player and a portable video player. The mobile terminal comprises an interface for performing NFC and an interface for wireless communication in compliance with a wireless communication standard created by the Wi Fi Alliance. Hereinafter wireless communication is referred to as Wi Fi communication .

The mobile terminal comprises a known operating system OS program e.g. Android operating system Android is a trademark owned by Google Inc. of Mountain View Calif. that supports both of NFC and Wi Fi communication. The mobile terminal further comprises a known Web browser program. Nevertheless the mobile terminal does not comprise a special application program for extracting a temporary ID from web data and transmitting the temporary ID to the MFP via NFC. The mobile terminal is configured to perform Wi Fi communication to access the Internet. Nevertheless in the first illustrative embodiment it is assumed that the mobile terminal is connected to the LAN that is different from the LAN to which the MFP is connected.

Here difference between NFC and Wi Fi communication is described. NFC is wireless communication in compliance with the International standards e.g. ISO IEC 21481 and ISO IEC 18092 as described above. Wi Fi communication is for example wireless communication in compliance with the standard IEEE 802.11 and its family standards e.g. IEEE 802.11a 802.11b 802.11g 802.11n IEEE stands for The Institute of Electrical and Electronics Engineers Inc. . A communication speed e.g. a maximum communication speed 100 to 424 Kbps of NFC is typically slower than a communication speed e.g. a maximum communication speed 11 to 600 Mbps of Wi Fi communication. A frequency of a carrier e.g. 13.56 MHz band in NFC is different from a frequency of a carrier e.g. 2.4 GHz band or 5.0 GHz band in Wi Fi communication. A communicable range of NFC e.g. 10 cm or shorter is shorter than a communicable range of Wi Fi communication e.g. 100 m or shorter . HTTP communication that is communication using HTTP protocol can be performed using Wi Fi communication.

The PC is a terminal device that comprises for example a desktop PC a notebook PC and a tablet PC. The PC is configured not to perform NFC in contrast to the mobile terminal . The PC comprises a known operating system OS program e.g. Windows operating system Windows is a registered trademark owned by Microsoft corporation of Redmond Wash. that supports Wi Fi communication. The PC further comprises a known Web browser program. The PC is configured to be accessible to the Internet by performing Wi Fi communication. In the first illustrative embodiment it is assumed that the PC is connected to a LAN that is different from the LAN to which the MFP is connected.

The user needs to prepare the MFP to obtain service from each of the service providing servers and as described below. The user accesses for example the service providing server by using a terminal device for example one of the mobile terminal and the PC to enter a login ID and a password into the service providing server using a known method. With the completion of the preparation the user is then allowed to obtain service from the service providing server through the terminal device. For example the user is allowed to upload a file including image data to the service providing server in response to the data storage service from the service providing server . After that when the user desires to let the MFP print the uploaded file i.e. when the user allows the MFP to perform the downloading and printing process each of the devices and performs processing depicted in .

The MFP needs to acquire an access token generated by the service providing server in order to perform the downloading and printing process in response to the data supply service from the service providing server . A method of providing the MFP with an access token comprises a method using the mobile terminal configured to perform NFC and a method using the PC not configured to perform NFC. Hereinafter first the method using the mobile terminal will be described with reference to and the method using the PC will be then described with reference to .

Referring to case A in which the mobile terminal is used will be described. The user of the mobile terminal brings the mobile terminal closer to the MFP to establish an NFC connection between the mobile terminal and the MFP . While the power of the MFP is on the NFC I F of the MFP issues detection radio waves to detect a device that can perform NFC e.g. the mobile terminal . An NFC I F not depicted of the mobile terminal also issues detection radio waves to detect a device that can perform NFC e.g. the MFP . When a distance between the MFP and the mobile terminal becomes a distance that their detection radio waves are detected at the devices each other or shorter e.g. 10 cm one of the MFP and the mobile terminal receives radio waves from the other of the MFP and the mobile terminal and transmits response radio waves to the other of the MFP and the mobile terminal . Thus in step S of an NFC connection is established between the MFP and the mobile terminal .

The memory of the MFP prestores a uniform resource locator URL for example http wwwaacom of the intermediary server . When an NFC connection is established between the MFP and the mobile terminal in step S of the control device of the MFP transmits the URL of the intermediary server stored in the memory to the mobile terminal using the NFC.

In step S of when the URL of the intermediary server is received as a result of NFC the OS program of the mobile terminal starts a Web browser of the mobile terminal . Such a Web browser start mechanism is preinstalled in the OS program. Therefore the OS program of the mobile terminal is enabled to start the Web browser without a special application program installed on the mobile terminal .

The mobile terminal accesses the URL of the intermediary server using the Web browser. Hereinafter the OS program of the mobile terminal and the browser program of the mobile terminal are referred to as a mobile terminal OS and a mobile terminal browser respectively. The method by which the mobile terminal browser accesses the URL of the intermediary server will be described below.

The mobile terminal browser acquires an IP address of the intermediary server from a domain name system DNS server using a server name www.aa.com of the URL http wwwaacom of the intermediary server . Then the mobile terminal browser generates a GET command of a hypertext transfer protocol HTTP comprising the acquired IP address as a sending destination IP address. Therefore the GET command comprises the IP address of the intermediary server but does not comprises the exact URL of the intermediary server . Nevertheless the IP address of the intermediary server is acquired by which the name of the URL of the intermediary server is changed. Therefore the IP address of the intermediary server is information that is equivalent to the URL of the intermediary server . Thus it could be suggested that a situation where the GET command comprises the IP address of the intermediary server is equivalent to a situation where the GET command comprises the URL of the intermediary server . Accordingly in the first illustrative embodiment it may be expressed that the GET command comprises the URL under a situation where a device e.g. the mobile terminal accesses a URL to transmit a GET command although the GET command does not comprise the exact URL in reality.

It is assumed that the URL to be accessed using the mobile terminal browser is for example a URL http wwwaacom xxx yyy . Hereinafter in the URL http wwwaacom xxx yyy a part subsequent to the server name wwwaacom e.g. xxx and yyy is referred to as a resource part . The mobile terminal browser acquires an IP address from the DNS server using the server name wwwaacom and generates a GET command comprising the acquired IP address as the sending destination IP address. The GET command further comprises a character string i.e. xxx and yyy representing the resource part in the URL. Therefore the GET command comprises the IP address of the intermediary server and the character string including and subsequent to the resource part in the URL but does not comprises the exact URL. In the first illustrative embodiment such a GET command is also expressed as the GET command comprises the URL . In reality the resource part includes an extension such as .cgi . Nevertheless the extension such as .cgi is omitted from the description and drawings in the first illustrative embodiment.

The mobile terminal browser generates a GET command comprising the URL of the intermediary server as a request destination URL. The GET command comprises the server name wwwaacom of the intermediary server . That is the GET command represents a location in the intermediary server . Therefore in step S of the mobile terminal browser transmits the GET command to the intermediary server via HTTP communication. Thus the mobile terminal browser becomes enabled to access the URL of the intermediary server .

The control device of the intermediary server receives the GET command from the mobile terminal browser using HTTP communication. Upon receipt of the GET command the control device acquires service list data from the memory . The service list data is web data representing a service list screen depicted in and has a format interpretable by the mobile terminal browser . Then in step S of the control device transmits the service list data to the mobile terminal browser using HTTP communication. The service list data comprises the URL of the intermediary server as a page URL of a Web page. More specifically the service list data comprises the same URL as the request destination URL comprised in the GET command as a URL of the service list screen depicted in .

The mobile terminal browser receives the service list data from the intermediary server using HTTP communication. Upon receipt of the service list data the mobile terminal browser displays thereon the service list screen see represented by the service list data . A topmost field on the service list screen represents the URL http wwwaacom in the service list data . The service list screen further comprises the service names i.e. AAA and BBB of the service providing servers and respectively.

The user selects one service name e.g. AAA and then selects an OK button not depicted by operating the mobile terminal while looking at the service list screen on the mobile terminal . Thus the mobile terminal browser generates a POST command comprising the selection result e.g. AAA . After that in step S of the mobile terminal browser transmits the POST command to the intermediary server using HTTP communication.

A script for which the mobile terminal browser generates the POST command is comprised in the service list data . Therefore the mobile terminal browser can generate and transmit the POST command without a special application installed on the mobile terminal .

The control device of the intermediary server receives the POST command from the mobile terminal browser via HTTP communication. Upon receipt of the POST command the control device generates a URL corresponding to the selection result comprised in the POST command . Then the control device generates a redirect command of the HTTP comprising the generated URL as a redirect URL. The redirect command of the HTTP is for instructing an access to the URL i.e. the redirect URL comprised in the redirect command. The redirect URL is for example http wwwbbcom URL http wwwaacom id .

When the selection result comprised in the POST command represents the service name AAA of the service providing server the control device acquires the URL http wwwbbcom of the service providing server from the memory . The control device further acquires a URL for performing processing of step S in hereinafter referred to as a return URL from the memory . The return URL is http wwwaacom id and comprises the server name wwwaacom of the intermediary server . That is the return URL represents a location in the intermediary server . After that the control device generates a first combination URL. More specifically the first combination URL is generated by combination of the URL http wwwbbcom of the service providing server and a query part URL http wwwaacom id in which the return URL is described. Hereinafter in a case where a URL comprises a query part e.g. a part including and subsequent to a part preceding the query part e.g. a part preceding is referred to as a domain part . For example in the first combination URL http wwwbbcom is the domain part and URL http wwwaacom id is the query part.

When the selection result comprised in the POST command represents the service name BBB of the service providing server the control device generates the first combination URL. The first combination URL is generated by combination of a domain part representing a URL not depicted of the service providing server and a query part in which the return URL is described.

The control device generates a redirect command comprising the generated first combination URL as a redirect URL. Then in step S of the control device transmits the redirect command to the mobile terminal browser using HTTP communication.

The mobile terminal browser receives the redirect command from the intermediary server using HTTP communication. Upon receipt of the redirect command the mobile terminal browser accesses the redirect URL i.e. the first combination URL in accordance with the redirect command . That is the mobile terminal browser generates a GET command comprising the first combination URL as the request destination URL. The request destination URL is for example http wwwbbcom URL http wwwaacom id . In an example depicted in the domain part http wwwbbcom of the request destination URL comprises the server name wwwbbcom of the service providing server . That is the domain part http wwwbbcom represents a location in the service providing server . Therefore in step S of the mobile terminal browser transmits the GET command to the service providing server using HTTP communication.

Upon receipt of the GET command from the mobile terminal browser the service providing server acquires login data from a memory not depicted of the service providing server . The login data is web data representing a login screen depicted in . The login data has a format interpretable by the mobile terminal browser . Then in step S of the service providing server transmits the login data to the mobile terminal browser . The login data comprises the first combination URL as a page URL of a Web page. The page URL is for example http wwwbbcom URL http wwwaacom id . More specifically the login data comprises the same URL as the request destination URL comprised in the GET command as the page URL of the login screen depicted in .

The service providing server can acquire the first combination URL comprised in the GET command . Therefore the service providing server can transmit a redirect command depicted in using the return URL http www.aa.com id described in the query part e.g. the part including and subsequent to in the first combination URL. A system of transmitting a redirect command using a URL described in a query part in a request destination URL of a GET command is preinstalled in the service providing server in advance.

The mobile terminal browser receives the login data from the intermediary server using HTTP communication. Upon receipt of the login data the mobile terminal browser displays thereon the login screen see represented by the login data . A topmost field on the login screen represents the URL of the login data i.e. the first combination URL. The login screen comprises a box in which a login ID is inputted and a box in which a password is inputted.

The user inputs a login ID and a password by operating the mobile terminal while looking at the login screen . That is the user inputs the login ID and the password that have been registered in the service providing server in advance in the above described preparation. Then the user selects an OK button not depicted on the login screen . Thus the mobile terminal browser generates a POST command comprising the login ID and the password. A script for which the mobile terminal browser generates the POST command is comprised in the login data . After that in step S of the mobile terminal browser transmits the POST command to the service providing server using HTTP communication.

In step S of when the service providing server receives the POST command from the mobile terminal browser the service providing server performs authentication of the login ID and the password comprised in the POST command . When authentication succeeds in step S of the service providing server generates an access token for the MFP to obtain service from the service providing server . After that in step S of the service providing server transmits the access token to the intermediary server .

The acquirement portion of the intermediary server receives the access token from the service providing server using HTTP communication to acquire the access token . In response to this in step S of the generation portion of the intermediary server generates a temporary ID e.g. a character string xyz in the first illustrative embodiment . For example the temporary ID is generated by random combination of a plurality of characters. Then the generation portion stores in the memory the access token and the temporary ID associated with each other. Thus in when the intermediary server receives an access token request comprising the temporary ID from the MFP the intermediary server can transmit the access token associated with the temporary ID to the MFP .

Referring to case A will be described below. Case A in is a continuation of case A depicted in . As described above the service providing server acquires the first combination URL by receiving the GET command from the mobile terminal browser in . The service providing server extracts the return URL http wwwaacom id comprised in the query part e.g. the part including and subsequent to from the first combination URL. Then as depicted in in step S of the service providing server generates a redirect command comprising the extracted return URL as the redirect URL and transmits the redirect command to the mobile terminal browser .

The mobile terminal browser receives the redirect command from the service providing server via HTTP communication using Wi Fi communication. In response to this the mobile terminal browser accesses the redirect URL i.e. the return URL in accordance with the redirect command . That is the mobile terminal browser generates a GET command comprising the return URL as the request destination URL. The return URL comprises the server name wwwaacom of the intermediary server . Therefore in step S of the mobile terminal browser transmits the GET command to the intermediary server using HTTP communication.

The first reception portion of the intermediary server receives the GET command from the mobile terminal browser using HTTP communication. When the control device of the intermediary server recognizes that the request destination URL i.e. the return URL in the GET command comprises id the control device starts a program for processing of step S of to perform the processing of step S in accordance with the program.

As described above in the first illustrative embodiment the intermediary server transmits the redirect command comprising the return URL i.e. the query part of the first combination URL to the mobile terminal browser see . Thus the mobile terminal browser accesses the return URL after performing communication of each data with the service providing server . Therefore the mobile terminal browser can access the intermediary server to allow the intermediary server to perform the processing of step S of appropriately without an operation in which the user accesses the intermediary server included in the mobile terminal browser . That is the mobile terminal browser can allow the intermediary server to perform the processing of step S of appropriately by transmitting the GET command to the intermediary server .

In step S of the preparation portion of the intermediary server acquires a message URL http wwwaacom message representing a location of message data from the memory . Then the preparation portion acquires the temporary ID xyz generated in step S in from the memory . The preparation portion generates a second combination URL http wwwaacom message ID xyz . Then second combination URL is generated by combination of the domain part representing the message URL and the query part ID xyz in which the temporary ID is described.

After that in step S of the preparation portion generates a redirect command comprising the second combination URL as the redirect URL to prepare the redirect command . Then the first transmission portion of the intermediary server transmits the redirect command to the mobile terminal browser using HTTP communication.

In step S of the preparation portion further generates the message data . The message data is web data representing a message screen depicted in . The message data has a format interpretable by the mobile terminal browser . The message data comprises text data representing a message see and text data representing a message . The message prompts the user to bring the mobile terminal closer to the MFP such that NFC is performed between the mobile terminal and the MFP .

The message prompts the user to input the temporary ID into the MFP by operating the operation portion of the MFP when no reaction occurs although the user brings the mobile terminal closer to the MFP i.e. when NFC is not performed between the mobile terminal and the MFP or when the mobile terminal does not comprise an NFC I F. In the first illustrative embodiment the mobile terminal OS has a system of transmitting a URL of a Web page displayed by a Web browser via NFC when the Web browser is active as a foreground program at the time of the establishment of the NFC connection. Nevertheless an OS program that does not have such a system hereinafter referred to as a non NFC capable OS may be present. When the mobile terminal is equipped with a non NFC capable OS although comprising the NFC I F the mobile terminal cannot transmit the URL of the Web page via NFC. In such a case when no reaction occurs although the user brings the mobile terminal closer to the MFP the message is indicated to prompt the user to input the temporary ID into the MFP .

The memory prestores a template for generating the message data . Then template comprises each text data described above. Nevertheless specific values e.g. xyz of the temporary ID are not generated in the template. Therefore in step S of the preparation portion generates the temporary ID e.g. xyz in the template to generate the message data .

The mobile terminal browser receives the redirect command from the intermediary server via Wi Fi communication i.e. HTTP communication . In response to this the mobile terminal browser accesses the redirect URL i.e. the second combination URL in accordance with the redirect command . That is the mobile terminal browser generates a GET command comprising the second combination URL as the request destination URL. The second combination URL comprises the server name wwwaacom of the intermediary server . Therefore in step S of the mobile terminal browser transmits the GET command to the intermediary server via Wi Fi communication i.e. HTTP communication .

The control device of the intermediary server receives the GET command from the mobile terminal browser using HTTP communication. When the control device recognizes that the request destination URL i.e. the second combination URL in the GET command comprises a resource part message the control device starts a program for transmitting message data . Then in step S of the control device transmits the message data to the mobile terminal browser using HTTP communication in accordance with the program that starts. The message data comprises the second combination URL as the page URL of a Web page. More specifically the message data comprises the same URL as the request destination URL comprised in the GET command as the page URL of the message screen depicted in .

As described above when the intermediary server receives the GET command from the mobile terminal the intermediary server generates the second combination URL and the message data e.g. step S . After that the intermediary server performs communication of the redirect command and the GET command and then transmits the message data comprising the second combination URL to the mobile terminal . Instead of the above configuration it could be conceivable that a configuration in which the intermediary server transmits the message data comprising the second combination URL as a response to the GET command to the mobile terminal is adopted. That is a configuration in which communication of the redirect command and the GET command is omitted is adopted.

Nevertheless in the HTTP system when the Web server e.g. the intermediary server receives a GET command from a client e.g. the mobile terminal and transmits the Web server as a response to the GET command the request destination URL in the GET command needs to be used as a page URL of the web data. Therefore if a configuration in which the message data is transmitted to the intermediary server as a response to the GET command is adopted the intermediary server is forced to describe the return URL http wwwaacom id that is the request destination URL comprised in the GET command as the page URL of the message data and thus cannot describe the second combination URL in which the temporary ID as the page URL of the massage data .

In light of the above circumstances in the first illustrative embodiment a configuration described below is adopted for the intermediary server . More specifically a configuration in which the intermediary server transmits the redirect command comprising the second combination URL as the redirect URL but not web data as a response to the GET command and receives the GET command is adopted as the configuration of the intermediary server . As a result the intermediary server can generate the second combination URL that is the request destination URL in the GET command as the page URL of the message data . Thus the intermediary server can transmit the message data comprising the second combination URL in which the temporary ID is generated to the mobile terminal as the page URL appropriately.

The mobile terminal browser receives the message data from the intermediary server using HTTP communication. In response to this the mobile terminal browser displays thereon the message screen see represented by the message data . A topmost field on the message screen represents a URL in the message data i.e. the second combination URL. The message screen comprises the messages and

The user can notice that the mobile terminal configured to perform NFC needs to be brought closer to the MFP through the message indicated on the message screen . Thus the user brings the mobile terminal closer to the MFP . As a result of this an NFC connection is established again between the MFP and the mobile terminal OS .

When the NFC connection is established therebetween in step S of the mobile terminal OS transmits the URL described on the message screen to the MFP via the NFC connection. More specifically when the NFC connection is established therebetween the mobile terminal OS transmits the second combination URL to the MFP via NFC. As described above a system in which the mobile terminal transmits a second combination URL as a page URL of a Web page via an NFC connection established while the message screen is displayed is installed on the OS program in advance. That is the mobile terminal OS has a system of transmitting a URL of a Web page displayed by an active Web browser via NFC when the Web browser is active as a foreground program at the time of the establishment of an NFC connection. Therefore the mobile terminal OS can transmit the second combination URL to the MFP via NFC without a special application program installed on the mobile terminal . That is the mobile terminal OS can transmit the temporary ID described in the query part of the second combination URL to the MFP via NFC.

The message indicated on the message screen comprises the temporary ID. Therefore it could be conceivable that a configuration in which the mobile terminal extracts the message indicated on the message screen and transmits the message to the MFP via NFC to provide the MFP with the temporary ID is adopted. However when the mobile terminal receives web data i.e. the message data as a result of HTTP communication a special application program needs to be installed on the mobile terminal to transmit one of the web data itself and a part of a character string of the web data via NFC. In light of the above circumstances in the first illustrative embodiment the configuration in which the intermediary server generates the second combination URL in which the temporary ID is generated e.g. step S and transmits the message data comprising the second combination URL as the page URL to the mobile terminal is adopted. With this configuration the mobile terminal OS is configured to transmit the second combination URL to the MFP via NFC without a special application program installed on the mobile terminal . Thus the mobile terminal can provide the MFP with the temporary ID appropriately.

The reception portion of the MFP receives the second combination URL from the mobile terminal OS via NFC. In response to this in step S of the extraction portion of the MFP extracts the temporary ID from the second combination URL. More specifically the extraction portion finds out a character string ID representing a beginning of the temporary ID from the query part of the second combination URL and extracts the character string xyz described subsequent to the character string ID .

Then in step S of the processing execution portion of the MFP generates an access token request comprising the extracted temporary ID and transmits the access token request to the intermediary server using HTTP communication. The access token request may be one of a GET command of the HTTP and a POST command of the HTTP.

The second reception portion of the intermediary server receives the access token request from the MFP using HTTP communication. In response to this the second transmission portion of the intermediary server reads out the access token associated with the temporary ID xyz comprised in the access token request from the memory . Then in step S of the second transmission portion transmits the access token to the MFP using HTTP communication.

For example when a plurality of users perform the processing depicted in at the same time the intermediary server may store a plurality of access tokens for the plurality of users in the memory simultaneously. Therefore if the temporary ID and the access token are not associated with each other in the memory the intermediary server cannot determine which one of the plurality of access tokens should be transmitted to the MFP when the intermediary server receives the access token request . In the first illustrative embodiment in step S in the intermediary server stores in the memory the access token and the temporary ID associated with each other. With this configuration the intermediary server can transmit an appropriate access token associated with the temporary ID to the MFP when receiving the access token request from the MFP .

The processing execution portion of the MFP receives the access token from the intermediary server using HTTP communication. In response to this the processing execution portion performs processing to obtain the data supply service from the service providing server using the access token . That is in step S of the processing execution portion transmits a file acquirement request e.g. a GET command of the HTTP comprising the access token to the service providing server using HTTP communication.

When the service providing server receives the file acquirement request from the MFP the service providing server performs authentication using the access token comprised in the file acquirement request . That is the service providing server determines whether the received access token is an access token generated by the service providing server itself. When authentication of the access token succeeds in step S of the service providing server transmits a file that was uploaded to the service providing server before by the user to the MFP . That is the service providing server offers the data supply service.

When the processing execution portion of the MFP receives the file from the service providing server the processing execution portion provides the printing execution portion with image data comprised in the file . In step S of the printing execution portion prints an image represented by the image data onto a printing medium. Thus the MFP can perform the downloading and printing process in response to the data supply service from the service providing server . That is the user of the mobile terminal can allow the MFP to perform the downloading and printing process via the mobile terminal .

Next referring to case B in which the PC is used will be described. The PC is configured not to perform NFC. Therefore the PC is configured to perform each communication depicted in via Wi Fi communication or via wired communication through the wired LAN.

The user starts a browser of the PC and inputs the URL of the intermediary server by using an operation device such as a keyboard and a mouse. The URL http www.aa.com of the intermediary server inputted at this time is the same as the URL of the intermediary server received by the mobile terminal OS from the MFP as the result of NFC in case A in . The user of the PC is notified in advance of the URL of the intermediary server . For example the URL of the intermediary server is described in an instruction manual of the MFP .

The PC accesses the URL of the intermediary server . That is in step S of the PC transmits a GET command comprising the URL of the intermediary server as the request destination URL to the intermediary server . Details of processing including and subsequent to this processing are similar to the details of the processing performed in case A in .

Referring to case B will be described below. Case B in is a continuation of case B depicted in . A detail of processing in each step until the PC receives the message data from the intermediary server is the same as the detail of the processing in each step in case A in . When the PC receives the message data from the intermediary server the PC displays thereon the message screen see . The user knows that the PC is configured not to perform NFC. Therefore the user inputs the temporary ID xyz by operating the operation portion of the MFP in accordance with the message indicated on the message screen

When the processing execution portion of the MFP receives the temporary ID xyz in step S of the processing execution portion transmits an access token request comprising the temporary ID xyz to the intermediary server similar to case A in . Then in step S of the processing execution portion of the MFP receives the access token from the intermediary server . Details of processing including and subsequent to this processing are similar to the details of the processing performed in case A in . As a result of this the user of the PC is allowed to let the MFP perform the downloading and printing process via the PC .

In the first illustrative embodiment in both of case A in and case B in once the control device of the MFP performs the downloading and printing process using the access token the control device abandons the access token . That is the control device of the MFP erases the access token from the memory . Nevertheless in other embodiments for example the control device may store the access token in the memory continuously with the access token associated with a user name e.g. a user name inputted in the operation portion and the service name of the service providing server . In this case for example when the user desires to let the MFP perform the downloading and printing process again in response to the data supply service from the service providing server the MFP can perform the downloading and printing process using the access token stored in the memory .

According to the first illustrative embodiment when the MFP has a Web server function and the mobile terminal and the MFP are connected to the same LAN the user is allowed to access the Web server of the MFP by using for example the mobile terminal after acquiring the temporary ID from the message see indicated on the message screen . Then the user can provide the MFP with the temporary ID by inputting the temporary ID on a web screen provided by the Web server of the MFP . Nevertheless in the first illustrative embodiment as described above it is assumed that the mobile terminal and the MFP are not connected to the same LAN. Under this condition the mobile terminal cannot access the MFP using HTTP communication. Thus in the first illustrative embodiment as depicted in cases A in a technique that the mobile terminal provides the MFP with the temporary ID appropriately under a condition where the mobile terminal and the MFP are not connected to the same LAN is adopted.

That is when the intermediary server acquires the access token from the service providing server the intermediary server generates the temporary ID xyz . Then the intermediary server stores the temporary ID in the memory with the temporary ID associated with the access token e.g. step S in . Then when the intermediary server receives the GET command from the mobile terminal browser the intermediary server transmits the redirect command comprising the second combination URL in which the temporary ID is generated to the mobile terminal browser . The mobile terminal browser transmits the GET command to the intermediary server to receive the message data from the intermediary server . As a result the mobile terminal browser displays the message screen see thereon.

The user brings the mobile terminal closer to the MFP in accordance with the message indicated on the message screen . As a result the mobile terminal OS transmits the second combination URL to the MFP via NFC to provide the MFP with the temporary ID. Therefore in contrast to the case where the PC is used see the user is not required to input the temporary ID to the MFP by operating the operation portion of the MFP . Therefore the temporary ID can be easily provided to the MFP . Particularly when the temporary ID comprises a large number of characters the technique according to the first illustrative embodiment is effective. According to the first illustrative embodiment convenience to the user can be increased.

In the first illustrative embodiment the temporary ID is described in the query part of the second combination URL. Therefore the mobile terminal can transmit the second combination URL to the MFP in accordance with the system preinstalled on the OS program. That is the mobile terminal can transmit the second combination URL to the MFP in accordance with the system of transmitting the page URL of the message screen that is active in the foreground via NFC. Further the mobile terminal OS can transmit the temporary ID to the MFP via NFC without a special application program installed on the mobile terminal .

As depicted in cases B in there is a possibility that the user desires to allow the MFP to perform the downloading and printing process using the PC not configured to perform NFC. Therefore the intermediary server prepares the message data as well as the message . The message data represents the message screen comprising the message . Thus the user can provide the MFP with the temporary ID appropriately in both of the case where the mobile terminal configured to perform NFC is used and the case where the PC not configured to perform NFC is used.

When the MFP receives the second combination URL from the mobile terminal via NFC the MFP can extract the temporary ID from the second combination URL appropriately. Therefore the MFP can acquire the access token appropriately from the intermediary server using the temporary ID. Further the MFP can perform the downloading and printing process appropriately using the access token in response to the data supply service from the service providing server .

The MFP is an example of a communication device . The intermediary server is an example of a server . The mobile terminal is an example of a terminal device . The redirect command is an example of specific data and an example of a redirect command . The GET command is an example of a request . The access token request is an example of a specific request . The second combination URL is an example of first location information . The message data is an example of web data . The message screen is an example of a message screen . The message is an example of a one or more instructions . The temporary ID is an example of target data . The access token is an example of authentication information . The process of transmitting the access token to the service providing server is an example of a request authentication .

A second illustrative embodiment will be described below. A description will be given mainly for the parts different from the first illustrative embodiment and a description will be omitted for the common parts by assigning the same reference numerals thereto. In the first illustrative embodiment the intermediary server is configured to display the same message screen on both of the mobile terminal and the PC where the mobile terminal is configured to perform NFC is used and where the PC not configured to perform NFC. In the second illustrative embodiment the intermediary server is configured to display different message screens e.g. message screens and see on the mobile terminal and the PC respectively.

Hereinafter referring to case A where the mobile terminal configured to perform NFC is used will be described. Case A in is a continuation of case A depicted in . In case A of each communication and each processing are performed similar to case A in . After that as depicted in when the mobile terminal browser receives the redirect command from the service providing server in step S of the mobile terminal browser transmits the GET command comprising OS information to the intermediary server in step S of . The OS information represents a name and a version of the OS program of the mobile terminal e.g. Android 4.0 Android is a trademark owned by Google Inc. of Mountain View Calif. . Generally a system of transmitting a GET command of the HTTP comprising the OS information is installed on the Web browser. Therefore the mobile terminal browser can transmit the GET command comprising the OS information to the intermediary server without a special application installed on the mobile terminal .

The memory of the intermediary server prestores information for determination. The information for determination is information in which OS information and NFC information are associated with each other. The OS information is information as to various known OS programs. The NFC information represents whether each OS program supports NFC. The vender of the MFP prestores the information for determination in the memory after investigation of the various known OS programs.

When the determination portion of the intermediary server receives the GET command from the mobile terminal browser the determination portion determines whether the OS program of the mobile terminal supports NFC using the OS information comprised in the GET command and the information for determination stored in the memory .

In the information for determination stored in the memory the OS information related to the OS program of the mobile terminal and the NFC information representing that the OS program supports NFC are associated with each other. Therefore in step S of the determination portion determines that the OS program of the mobile terminal supports NFC. In this case in step S of the preparation portion of the intermediary server acquires a message URL representing a location of message data from the memory . The message URL . . . message acquired at this time is different from the message URL . . . message acquired in step S of in the first illustrative embodiment. The character string http wwwaacom is omitted and indicated by . . . . The preparation portion combines a domain part representing the message URL and a query part in which the temporary ID is generated to generate a second combination URL . . . message ID xyz .

The memory prestores a first template and a second template. The first template is for generating the message data representing the message screen see . The second template is for generating message data representing a message screen see . In step S the preparation portion further generates the message data using the first template. The message data comprises text data representing the message and text data representing the message see .

A redirect command and a GET command are similar to the redirect command and the GET command respectively in except the second combination URL. When the control device of the intermediary server receives the GET command from the mobile terminal browser in step Sof the control device transmits the message data to the mobile terminal browser in step Sof .

Thus the mobile terminal displays the message screen see thereon. As a result the user brings the mobile terminal closer to the MFP . Although the OS program supports NFC there may be a case where a device does not contain an NFC I F. Further there may be another case where a device comprises an OS program that is the non NFC capable OS although containing the NFC I F i.e. the device is not configured to transmit a URL of a Web page via NFC. In light of this circumstance in the second illustrative embodiment the first template is configured such that the message screen comprises the message . Details of processing including and subsequent to this processing are the same as the details of the processing performed in case A in .

Next referring to case B where the PC is not configured to perform NFC will be described. Case B in is a continuation of case B depicted in . In case B in each communication and each processing are performed similar to case B in . After that as depicted in step S of the mobile terminal browser transmits the GET command comprising the OS information to the intermediary server .

In the information for determination stored in the memory the OS information related to the OS program e.g. Windows operating system of the PC and the NFC information representing that the OS program does not support NFC are associated with each other. Therefore in step S of the determination portion determines that the OS program of the PC does not support NFC. In this case in step S of the preparation portion of the intermediary server acquires a message URL representing a location of message data from the memory . The acquired message URL . . . message is different from the message URL . . . message acquired in step S of . That is the acquired message URL . . . message is different in the resource part from the message URL . . . message acquired in step S of . In case B in the query part comprising the temporary ID is not required because it is assumed that the temporary ID is not provided to the MFP via NFC. Therefore the preparation portion is not configured to generate the second combination URL comprising the message URL and the query part in contrast to step S of .

In step S of the preparation portion generates the message data using the second template. The message data comprises text data representing a message see . Nevertheless the message data does not comprise the message see related to NFC.

A redirect command and a GET command are similar to the redirect command and the GET command respectively in except that the redirect command and the GET command use the message URL . . . message instead of the second combination URL. When the control device of the intermediary server receives the GET command from the mobile terminal browser in step Sof the control device transmits the message data to the mobile terminal browser in step Sof .

Thus the mobile terminal displays the message screen see thereon. Therefore the user inputs the temporary ID into the MFP by operating the operation portion of the MFP . Details of processing including and subsequent to this processing are the same as the details of processing performed in case B in .

As described above in the second illustrative embodiment when the mobile terminal configured to perform NFC is used the intermediary server can display the message screen comprising the message related to NFC on the mobile terminal appropriately. When the PC not configured to perform NFC is used the intermediary server displays the message screen comprising the message related to the operation of the MFP but not comprising the message related to NFC on the PC appropriately.

In the second illustrative embodiment each of the mobile terminal and the PC is an example of the terminal device . The OS information is an example of program information . The redirect command and the redirect command are examples of the specific data . The message screen and the message screen are examples of the message screen . The message is an example of the one or more instructions . The message is an example of a one or more instructions .

Next a third illustrative embodiment will be described below. In the third illustrative embodiment the intermediary server is configured to display different messages e.g. message screens and see on the mobile terminal and the PC respectively. As depicted in the message screen comprises the message and a message . The message is for prompting the user to input the temporary ID by operating the operation portion of the MFP when no reaction occurs although the mobile terminal is brought closer to the MFP . That is the message is different from the message see . That is when a device does not contain an NFC I F the message comprises a message for a user of a device that does not contain the NFC I F. This configuration is adopted because in the third illustrative embodiment the intermediary server is configured to recognize that the mobile terminal comprises the NFC I F . Hereinafter a description will be given mainly for the parts different from the second illustrative embodiment and a description will be omitted for the common parts by assigning the same reference numerals thereto.

In the case where the mobile terminal is used the memory of the MFP prestores a URL for NFC http wwwaacom nfc as the URL of the intermediary server to be transmitted to the mobile terminal via NFC instead of the URL http wwwaacom of the first illustrative embodiment. Therefore when an NFC connection is established in the control device of the MFP transmits the URL for NFC . . . nfc to the mobile terminal OS via NFC.

Therefore in the request destination URL comprised in the GET command is the URL for NFC . . . nfc . When the control device of the intermediary server receives the GET command comprising the URL for NFC the control device operates in accordance with a program corresponding to a resource part nfc . Then the control device of the intermediary server uses . . . nfc id as the return URL instead of . . . id in the first illustrative embodiment when transmitting the redirect command . As a result in the redirect command and the GET command comprise the URL . . . nfc id . When the preparation portion of the intermediary server receives the GET command comprising the URL . . . nfc id the preparation portion operates in accordance with the program corresponding to the resource part nfc id of the URL. That is in step S of the preparation portion generates the message data representing the message screen see using a third template prestored in the memory . Thus the mobile terminal can display the message screen thereon. Details of other processing are the same as the details of the processing performed in case A in .

In the case where the PC is used a URL for non NFC http wwwaacom nonfc is described in the instruction manual of the MFP instead of the URL http wwwaacom according to the first illustrative embodiment. The URL for non NFC . . . nonfc is different in the resource part from the URL for NFC . . . nfc . In the user inputs the URL for non NFC into the PC .

Therefore in the request destination URL comprised in the GET command is the URL for non NFC . . . nonfc . When the control device of the intermediary server receives the GET command comprising the URL for non NFC the control device operates in accordance with a program corresponding to a resource part nonfc . Then the control device of the intermediary server uses . . . nonfc id as the return URL instead of . . . id according to the first illustrative embodiment when transmitting the redirect command . As a result in the redirect command and the GET command comprise the URL . . . nonfc id . When the preparation portion of the intermediary server receives the GET command comprising the URL . . . nonfc id similar to case B in according to the second illustrative embodiment the preparation portion performs the processing of step S of to prepare the redirect command and the message data . Thus the PC can display the message screen see thereon. Details of other processing are the same as the details of the processing performed in case B in .

As described above in the third illustrative embodiment the two different URLs such as the URL for NFC . . . nfc and the URL for non NFC . . . nonfc are used. Therefore when the URL comprised in the GET command comprises the resource part nfc id the intermediary server can recognize that the mobile terminal comprises the NFC I F . Accordingly when the intermediary server receives the GET command see the intermediary server can display an appropriate one of the message screens and on each of the mobile terminal and PC in accordance with the URL comprised in the GET command . That is the intermediary server can display an appropriate one of the message screens and see on each of the mobile terminal and the PC in accordance with the resource part e.g. the resource part nfc id or nonfc id comprised in the GET command . That is this configuration enables the mobile terminal comprising the NFC I F to display an appropriate message screen e.g. the message screen thereon and enables a device that might not contain the NFC I F to display an appropriate message screen e.g. the message screen thereon. Particularly the message indicated on the message screen does not comprise a message for the user of the device that does not contain the NFC I F. Therefore this configuration can reduce the displaying of an unnecessary message on the mobile terminal comprising the NFC I F.

According to the second illustrative embodiment the vender of the MFP needs to prestore the information for determination in the memory of the intermediary server . Nevertheless according to the third illustrative embodiment the prestorage of the information for determination is not required. Further according to the second illustrative embodiment the message screen see may be displayed on the mobile terminal configured to perform NFC if the details of the information for determination are not correct. Nevertheless according to the third illustrative embodiment the determination based on the information for determination is not performed. Therefore the displaying of the unnecessary message can be reduced. Further the message screens and can be correctly displayed on the mobile terminal and the PC respectively.

In the third illustrative embodiment the mobile terminal is an example of the terminal device configured to support communicating using a wireless communication . The PC is an example of a terminal device not configured to support communicating using a wireless communication . The URL . . . nfc id is an example of second location information . The URL . . . nonfc id is an example of third location information . The GET command comprising the URL . . . nfc id is an example of the first request . The GET command comprising the URL . . . nonfc id is an example of the second request .

While the disclosure has been described in detail with reference to the specific embodiments thereof these are merely examples and various changes arrangements and modifications may be applied therein without departing from the spirit and scope of the disclosure. For example variations described below may be applied.

In the first illustrative embodiment in step S of the preparation portion of the intermediary server is configured to generate the redirect command comprising the second combination URL in which the temporary ID xyz is generated. Thus the message data is transmitted to the mobile terminal browser after communication of the redirect command and the GET command is performed. Nevertheless in other embodiments for example in step S the preparation portion may be configured to prepare the message data to be transmitted as a response to the GET command without generating the second combination URL. That is the preparation portion may be configured to prepare the message data comprising the return URL . . . id in which the temporary ID is not generated as the page URL. Further the preparation portion may be configured to describe the temporary ID xyz in a predetermined part of the message data i.e. a part different from the page URL. The first transmission portion of the intermediary server may be configured to transmit the message data to the mobile terminal as a response to the GET command . That is communication of the redirect command and the GET command may be omitted.

According to the first illustrative embodiment the mobile terminal OS is not configured to perform a series of processing. The series of processing comprises the extraction of the temporary ID from the predetermined part of the message data and the transmission of the temporary ID to the MFP via NFC. That is a special application needs to be installed on the mobile terminal to allow the mobile terminal to perform the series of processing. Nevertheless in other embodiments for example the mobile terminal OS may be configured to perform the series of processing. Therefore the mobile terminal OS may be configured to extract the temporary ID from the predetermined part of the message data and transmit the temporary ID to the MFP via NFC without a special application installed on the mobile terminal . In this case communication of the redirect command and the GET command may can be omitted. In the other embodiments the message data in which the temporary ID xyz is generated in the predetermined part may be an example of the specific data . Generally speaking the specific data may be data comprising target data and for displaying the web screen on the terminal device.

The target data is not limited to the temporary ID. In other embodiments for example the target data may be any data that is to be provided from the server e.g. the intermediary server to the terminal device e.g. the mobile terminal via the communication device e.g. the MFP . For example the server may be configured to store an address book registered by the user. In this case the target data may be for example data representing the address book. The server may be configured to store settings information to be newly used by the communication device. In this case the target data may be for example data representing the settings information. For example printing settings information such as a printing resolution and a sheet size or scanning settings information such as a scanning resolution and a file format of scan data may be an example of the settings information.

The service that the MFP obtains from the service providing server is not limited to the data supply service. In other embodiments for example in case A in the processing execution portion of the MFP may be configured to allow the scanning execution portion to scan a document to generate scan data instead of transmitting the file acquirement request . Then the processing execution portion may be configured to transmit a file storage request e.g. a POST command of the HTTP comprising the scan data and the access token to the service providing server . In this case when authentication of the access token succeeds the service providing server may store a file comprising scan data in a memory not depicted of the service providing server . That is the service providing server may be configured to offer the data storage service. With this configuration the MFP can perform the scanning and uploading process in response to the data storage service of the service providing server . In other words the user can let the MFP perform the scanning and uploading process by using the mobile terminal . In this case the transmission process of the access token and the scanning and uploading process of the access token is an example of the request authentication . The request authentication may be another process e.g. a process of printing target data other than the transmission process and the scanning and uploading process of the access token .

The authentication information is not limited to the access token. In other embodiments for example the authentication information may be another information e.g. the user ID and or the password to be used by the respective service providing servers and .

Wi Fi communication i.e. HTTP communication is applied to the embodiments in this disclosure. In other embodiments for example another wireless communication such as third Generation in compliance with standards of the International Mobile Telecommunication 2000 IMT 2000 may be applied to the embodiments of this disclosure. Instead of HTTP communication communication in accordance with another protocol for web data communication e.g. Hypertext Transfer Protocol Secure HTTPS according to HTTP may be used. The wireless communication is not limited to NFC either. The wireless communication may be for example infrared communication or BlueTooth communication BlueTooth is a registered trademark of BLUETOOTH SIG. INC. of Kirkland Wash. .

In each of the above described illustrative embodiments the message screen comprising the message indicating such that Please bring your mobile terminal closer to the MFP. is an example of the message screen . Nevertheless in other embodiments for example the message screen may comprise a message indicating Please let your mobile terminal perform NFC. That is the web screen may comprise a message indicating that the terminal device is allowed to perform the wireless communication. Generally speaking the message screen may be configured to indicate at least the method of transmitting the target data to the communication device.

In each of the above described illustrative embodiments the intermediary server comprises a single device. Nevertheless in other embodiments for example the intermediary server may comprise two or more devices that are independent from each other. For example the intermediary server may comprise a first device and a second device when the intermediary server receives the GET command in . In this case the first device may be configured to perform a processing of transmitting the service list data . The second device may be configured to receive the GET command in and perform processing of step S and subsequent steps. Generally speaking the specific server may comprises a physically single device or two or more independent devices.

In each of the above described illustrative embodiments each function of the portions to and to is implemented by one of the CPU of the MFP and the CPU of the intermediary server to perform processing in accordance with software. Instead of this part of the functions of the portions to and to may be implemented by hardware such as a logical circuit.

