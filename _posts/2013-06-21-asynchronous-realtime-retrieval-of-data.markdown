---

title: Asynchronous real-time retrieval of data
abstract: A data retrieval system includes a gateway server and an access client. The gateway server is communicatively connected to the access client through a network. The gateway server provides a presentation service (PS) and a real-time service (RTS), which cooperate with the access client to retrieve data from a data store and then provide the retrieved data to a user's remote communication device. More particularly, when a user wishes to retrieve data from the data store or to send data to the data store, the user establishes a communication connection between his or her remote communication device and the gateway server, and then requests the desired data from the gateway server. In response, the gateway server sends a command to the access client, instructing it to retrieve the requested data. The access client retrieves the requested data from the data store, and returns the retrieved data to the gateway server. The gateway server then relays the requested information back to the user's remote communication device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09059956&OS=09059956&RS=09059956
owner: GOOD TECHNOLOGY CORPORATION
number: 09059956
owner_city: Dover
owner_country: US
publication_date: 20130621
---
This application is a Continuation of U.S. application Ser. No. 13 225 786 filed Sep. 6 2011 which is a Continuation of U.S. application Ser. No. 12 708 277 filed Feb. 18 2010 which is a Continuation of U.S. application Ser. No. 12 017 536 filed Jan. 22 2008 which is a Continuation of U.S. application Ser. No. 10 770 841 filed Feb. 2 2004 which claims the benefit of U.S. Application Ser. No. 60 444 213 filed Jan. 31 2003 entitled Asynchronous Real Time Retrieval Of Data the entire contents of each of which are hereby incorporated herein by reference.

The present invention relates to the asynchronous real time retrieval of data. Various aspects of the present invention are particularly applicable to the asynchronous real time retrieval of data from a corporate database to a remote device such as a wireless telephone or personal digital assistant.

Recently digital information has become more and more important to people of all walks of life. As the importance of digital information has increased the need for convenient remote access to a variety of types of digital information has increased as well. For example traveling businessmen may desire continual access to information contained in electronic spreadsheets attorneys may desire access to word processing documents from a client s location and students may want to send or retrieve electronic mail while in school.

In order to address this need many communication service providers allow their customers to access remote digital information through a communication network. For example a wireless telephone service provider may allow its customers to use their wireless telephones or other communication devices to send and receive retrieve electronic mail retrieve image information from a network obtain contact information from a centralized database or the like. Similarly some companies have established remote high speed Internet connections both wired and wireless at public locations such as restaurants hotels and airports which can be accessed by a customer s computer.

While communication service providers have created an infrastructure that potentially allows their customers remote access to digital information many practical issues still prevent this infrastructure from being fully utilized. For example some customers seek to access digital information stored behind a barrier such as digital information stored in their employer s database and protected by a firewall. With this arrangement if the employer s network did not support an access tool allowing external connections through the firewall then a customer would be prevented from accessing the desired digital information through the communication service provider s network. These access tools include for example the use of a virtual private network VPN or similar techniques for enabling secure and authenticated connections from devices not directly connected to the employer s network. Moreover even if the employer s network supported such a tool the customer s communication device could still not access the data if the user s device itself was not configured to support that tool.

In other situations a customer may attempt to use an unsuitable communication device to retrieve data. For example a user may attempt to employ a personal digital assistant or wireless telephone with a relatively simple browser to retrieve a Web page with a large amount of image or audio data. Before the large amount of data can be fully retrieved the personal digital assistant or wireless telephone may time out and sever the connection. Alternately or additionally the user may seek to download more data than the personal digital assistant or wireless telephone may store.

Advantageously various examples of the invention allow a user to more conveniently send data to and retrieve data from a remote data store using a remote communication device. With different aspects of the invention a data retrieval system includes an in box IB server referred to hereafter more generally as a gateway server and a desktop access client DAC referred to hereafter more generally simply as an access client. The gateway server is communicatively connected to the access client through a network. The gateway server provides a presentation service PS and a real time service RTS which cooperate with the access client to retrieve data from a data store and then provide the retrieved data to a user s remote communication device using a presentation protocol appropriate to the device s capabilities.

With various implementations of the invention the access client will create a connection to the gateway server. When the user wishes to retrieve data from the data store or to send data to the data store the user establishes a communication connection between his or her remote communication device and the gateway server and then requests the desired data from the gateway server. In response the gateway server sends a command to the access client instructing it to retrieve the requested data. The access client retrieves the requested data from the data store and returns the retrieved data to the gateway server. The gateway server then relays the requested information back to the user s remote communication device through the presentation server using a presentation protocol appropriate to the device s capabilities.

As shown in this figure the gateway server is communicatively connected to the access client through a network such as a wide area network. The network may be a publicly accessible network such as the Internet. Alternately the network may be a private network often referred to as an intranet or a combination of public and private networks. The gateway server provides a presentation service PS and a real time service RTS each of which will be explained in detail below. The presentation service and the real time service of the gateway server cooperate with the access client to retrieve data from the data store and then provide the retrieved data to the user s remote communication device .

More particularly the access client creates a connection which may be for example a persistent connection to the gateway server through the firewall . The access client then lies dormant until it receives commands from the gateway server to retrieve data from the gateway server or to provide data to the gateway server . When the user wishes to retrieve data from the data store to the user s remote communication device or alternately to send data from the user s remote communication device to the data store the user establishes a communication connection between the remote communication device with the gateway server . Through the user s remote communication device the user then requests the desired data from the gateway server . In response the gateway server sends a command over the connection to the access client instructing the access client to retrieve the requested data. In response the access client retrieves the requested data from the data store and returns the retrieved data to the gateway server . The gateway server then relays the requested information back to the user s remote communication device . This process together with the components of the system will be discussed in more detail below.

As will be appreciated by those of ordinary skill in the art the gateway server may be implemented using one or more computing devices such as a programmable computer that may be programmed to send retrieve and store the data files that make up electronic messages. This type of computer can be embodied by for example an electronic mail account server. shows one example of such a programmable computer system capable of retrieving and caching electronic mail data files from one or more outside electronic mail accounts. The computer system includes a processing unit a system memory and a system bus that couples various system components including the system memory to the processing unit . The system memory may include a read only memory ROM and a random access memory RAM .

A basic input output system BIOS containing the routines that help to transfer information between elements within the computer system such as during startup may be stored in the read only memory ROM . If the computer system is embodied by a personal computer it may further include a hard disk drive for reading from and writing to a hard disk not shown a magnetic disk drive for reading from or writing to a removable magnetic disk not shown an optical disk drive for reading from or writing to a removable optical disk not shown such as a CD ROM or other optical media or a memory card such as a flash memory card.

A number of program modules may be stored on the ROM the hard disk drive the magnetic disk drive and the optical disk drive . A user may enter commands and information into the computer system through an input device such as a keyboard a pointing device a touch screen a microphone a joystick or any other suitable interface device. Of course the computer system may employ a variety of different input devices as is known in the art. An output device such as a monitor or other type of display device is also included to convey information from the computer system to the user. As will be appreciated by those of ordinary skill in the art a variety of output devices such as speakers and printers may alternately or additionally be included in the computer system .

In order to access electronic mail accounts the computer system preferably is capable of operating in a networked environment using logical connections to one or more remote computers such as the remote computer . The computer system may be connectable to the remote computer through a local area network LAN or a wide area network WAN such as the Internet. When used in a networking environment the computer system may be connected to the network through an interface such as a wireless transceiver a modem an Ethernet connection or any other suitable interface. While the interface is illustrated as an internal interface in it may alternately be an external interface as is well known in the art. Of course it will be appreciated that the network connections described above are exemplary and other means of establishing a communications link with other computers may be used.

With various embodiments of the invention the data retrieved from the data store may be requested and received over a wide area network such as the Internet. This type of communication medium is relatively unpredictable however and the existing level of traffic over the network may affect the speed at which the real time service receives requested data. Further a request for data from the user s remote communication device will not typically specify the size of the requested data. For example a user may employ the remote communication device to request his or her most recent email message from the data store without knowing the size of the message. Accordingly when the presentation service receives a request for data from the user s remote communication device the presentation service typically cannot ascertain when it will receive the requested data from the access client .

This uncertainty presents a problem in that the presentation service cannot determine in advance how long to maintain the connection to the user s remote communication device . Typically the remote communication device will maintain an idle connection for only a preset time period before severing the connection. Thus in some situations the time between when the presentation service requests the data from the real time service and when the presentation service receives the requested data in reply may be longer than the amount of time that the user s remote communication device will wait for a reply from the presentation service before severing the connection .

In addition the communications network supporting the communication device also may implement timeout procedures that are configured separately and independently from either the remote communications device or the gateway server . These procedures may be used by communications service providers to prevent idle connections from consuming network resources that might otherwise be allocated to active connections. Thus the communications network itself may timeout and sever the connection to the gateway server before a reply from the presentation service has been received.

Moreover different types of remote communication devices will have different waiting periods before severing an idle connection that is a connection where data is not being exchanged . More particularly some types of remote communication devices may employ a relatively sophisticated communication software application that will maintain an idle connection for several minutes. For example if the remote communication device is a laptop personal computer it may use a version of the Microsoft Internet Explorer browser to communicate with the presentation service . This type of communication software application is typically configured to receive rich data with graphics and colors and thus will wait a relatively long time for a reply from the presentation service before timing out and severing the connection .

On the other hand a less sophisticated remote communication device may employ a communication software application intended to receive only very simple data and that will only briefly maintain an idle connection. For example a wireless telephone may communicate with the presentation service using a streamlined browser that receives only text data and is designed to be navigated with a keypad. This type of simply communication software application will typically wait only a relatively short period of time for a reply from the presentation service before timing out and severing the connection .

To address this discrepancy between different types of remote communication devices and their different supporting communications networks the gateway server according to various embodiments of the invention may employ both the presentation service and the real time service . More particularly with various embodiments of the invention the real time service maintains the connection which may be a persistent connection to the access client . The presentation service then manages the connection with various remote communication devices through various communications networks. Thus the presentation service and the real time service cooperate together to provide asynchronous retrieval of data from the data store to the user s remote communication device . That is the timing of communications between the real time service and the data store through the access client is independent of the timing of communications between the presentation service and a user s remote communication device .

According to various embodiments of the invention the connection the connection or both may be encrypted. For example the connection the connection or both may be encrypted using the Secure Sockets Layer SSL protocol. The encryption may be on a connection by connection basis. Thus the connection may be encrypted using one set of encryption information shared between the access client and the real time service while the connection may be encrypted using another set of encryption information shared between the user s remote communication device and the presentation service . Alternately with various embodiments of the invention the connections and may be commonly encrypted end to end using encryption information shared between the user s remove communication device and the access client .

Referring now to these figures illustrate a flowchart for one process that may occur according to various embodiments of the invention when the user desires to send data to or retrieve data from the data store . As shown in in order to employ the system a user first installs the access client on a computer that has access to the data store that is on the computer in step . For example if the data store is a Microsoft Exchange server that manages the user s electronic mail messages the user will install the access client on a computer that has access to the user s electronic mail account on the data store . As part of the installation process for some embodiments of the invention the user may submit authentication information. This authentication information then later can be used to authenticate the user s identity when the user attempts to retrieve data to or send data from the user s remote communication device .

In many situations the user will employ the system to send or receive electronic mail messages or other data from a data store maintained by the user s employer. Accordingly the data store is illustrated in as being within a corporate network environment which may be behind the firewall as previously noted. In these situations the computer may be the user s personal work computer that is also within the corporate network environment and behind the firewall and thus has easy access to the data store . It should be appreciated however that various embodiments of the invention may be employed to retrieve data from or send data to a data store located within any computing environment. Also any computing device having the desired access to the data store may serve as the computer . Further as will be explained in detail below a user may employ multiple access clients on different computers to retrieve data from or send data to the data store and multiple users may employ a shared access client on a single computer to retrieve data from or send data to the data store .

It should be appreciated that while the access client is described in the illustrated embodiment as a client hosted on a single computer various alternate embodiments of the invention may employ any configuration for the access client . For example the access client may itself be implemented by a server computer that servers other computers in a network. Thus the access client may provide access to the data store for more than one user. Further the access client may provide centralized management and administration tools that enable a system administrator e.g. a system administrator for the data store to manage and control utilization of the access client by individual users by e.g. selecting them from a directory or company address list. Moreover the access client may thus be implemented on a server that performs other functions which may or may not be related to the operation of the access client . For example the access client may be implemented on a public email server such as a Yahoo or Hotmail email server or on a private email server. Still further with different embodiments of the invention the operation of the access client may be distributed among a plurality of computers .

Returning now to once the access client has been installed on the computer in step the access client establishes a secure communication connection to the gateway server in step . More particularly the access client establishes a secure connection with the real time service hosted by the gateway server . An entry for the connection referred to as a real time session also is created in the directory . The directory may be for example an Oracle database or other suitable database or a Novell directory or other suitable directory. The entry for the connection identifies both the user and the gateway server hosting the real time service to which the connection is made.

According to various embodiments of the invention the connection may be a persistent connection that is maintained as long as both the access client and the real time service are operating to provide service to a user. With still other embodiments of the invention however the connection may be established on an as instructed or periodic basis. Thus various embodiments of the invention may employ heuristics to determine when the access client establishes the connection with the real time service . These heuristics may determine for example that the access client will connect every minute or some other time period if it services a user or users who have not frequently retrieved data from the data store . These heuristics may also determine that the access client will persistently maintain connection if it services a user or users who have frequently retrieved data from the data store . Still further various embodiments of the invention may employ these heuristics only under certain conditions such as when network traffic for the network carrying the connection increases above a threshold level or when the real time service reaches some threshold of simultaneous connections with multiple access clients .

In order to subsequently retrieve data from the data store to the user s remote communication device or to send data from the user s remote communication device to the data store the user connects to the gateway server through the user s remote communication device in step . More particularly the user establishes the communication connection from the user s remote communication device to the presentation service hosted by the gateway server .

As will be appreciated by those of ordinary skill in the art in addition to personally initiating a connection with the gateway server and requesting data from the data store one or more software applications running on the user s remote communication device may also initiate the connection to the presentation service hosted by gateway server on the user s behalf. Depending upon the purpose and needs of the particular software application the software application can initiate the connection on a periodic scheduled or event driven basis and make one or more data requests asking to retrieve data from or sending data to the data store . This approach relieves the user of the need to pro actively initiate all connections and data requests or transfers and greatly improves the overall user experience.

In the embodiment illustrated in the user s remote communication device is a wireless communication device that exchanges data or voice information over a wide area wireless telephone communication network . For example the user s remote communication device may be a wireless telephone or a personal digital assistant PDA or portable computer equipped with a wireless communication unit such as a PCMCIA card like the Sierra Wireless AirCard With still other embodiments of the invention however the user s remote communication device may be connected to the gateway server through any suitable connection including a public communication network such as the Internet. For example the user s remote communication device may alternately be connected to the gateway server using a wired connection such as a conventional dial up or DSL telephone connection a high speed broadband connection provided by a cable television service provider or even an optical connection. Further the user s remote communication device may be connected to the gateway server through another communication device such as a public Internet kiosk. Thus rather than connecting to the gateway server over the wireless network the user s remote communication device may connect to the gateway server over any suitable medium including a wireless communication network a wired communication network or a composite wired and wireless communication network.

Similarly the connection between the access client and the real time service can be made over any suitable medium. In the illustrated embodiment the connection is established over a public wide area communication network such as the Internet. With alternate embodiments of the invention however the connection may be the established over for example a private communication network such as a private wireless telephone communication network. Thus the connection also may be established over a wireless communication network a wired communication network or a composite wired wireless communication network.

As will be appreciated by those of ordinary skill in the art a variety of communication techniques and protocols have been developed for exchanging data between devices. For example communications over both high and low bandwidth connections may be made using well known extensible markup language protocols such as the Hypertext Markup Language HTML protocol the Extensible Markup Language XML or the Synchronization Markup Language SyncML or other messaging centric protocols such as the Post Office Protocol POP or the Internet Message Access Protocol IMAP . Similarly communications over lower bandwidth wireless connections such as wireless telephone connections may be made using the well known Wireless Markup Language WML protocol. Any suitable protocol including any of these known protocols may be used to exchange data between the remote communication device and the presentation service and between the access client and the real time service . Thus communications over the connection between the access client and the gateway server may be made using HTML or XML pages while communications over the connection between the user s remote communication device and the gateway server may be made using HTML XML SyncML or WML pages or other protocols including but not limited to IMAP and POP3. Because the equipment and procedures for communicating data between devices using these protocols are well known in the art they will not be described in further detail here.

Returning now to the user authenticates his or her identity for the presentation service in step . For example the presentation service may transmit one or more authentication inquiries to the user s remote communication device . These inquiries which may be contained on a single markup language page may ask the user for a username and password. In response the user transmits the requested authentication information back to the presentation service . Of course the user s remote communication device may alternately or additionally provide one or more software applications for managing and presenting data which includes user interface elements for collecting storing and submitting authentication information to the presentation service without requiring the user to manually reenter the authentication information for each session with the presentation service .

When the user wishes to retrieve data from the data store the user sends a request for the desired data over the connection to the presentation service in step . For example the user may request the header information for the most recent 10 electronic mail messages in the user s electronic mail account on the data store . This request can be made using any suitable technique. For example once the user s remote communication device has established the connection with the presentation service the presentation service may transmit WML pages with prompts to the user s remote communication device . These pages may for example contain a list of possible information that can be requested by the user. After the user selects the prompts corresponding to the desired information the selected prompts are transmitted back to the presentation service as a request for the desired data. Of course still other techniques for retrieved desired information from the data store may be employed including techniques where data is retrieved automatically by an application on the remote communication device without requiring the user s intervention as previously noted.

In step the presentation service establishes a presentation session for the connection with the user s .cndot. remote communication device . The presentation service thus associates all subsequent communications related to the request for the desired data with the user s remote communication device . For example the presentation session may be an entry in memory such as a data table associating the user s username and password with a presentation session value. The presentation session may also identify a location in memory cache at which the desired data will be stored upon retrieval and a flag indicating if the desired data as been stored to the cache . The use of the presentation session to retrieve data from the data store to the remote communication device will be discussed in further detail below.

In step the presentation service checks to see if the desired information has already been cached in the cache . As will be discussed in detail below if the presentation service determines that it already has cached the desired information then in step the presentation service immediately retrieves the desired information from the cache and returns the desired information to the user s remote communication device . When the request for the desired data is initially made to the presentation service however the desired data probably will not have already been cached by the presentation service .

Accordingly when the desired data is not currently in the cache a request for the desired data is sent from the presentation service to the real time service in step . In response the real time service issues a command over the connection to the access client in step instructing the access client to retrieve the desired information from the data store . Upon receiving the command from the real time service the access client retrieves the desired data from the data store in step . Then in step the access client returns the retrieved data to the real time service which in turn provides the retrieved data to the presentation service in step . The presentation service then stores the retrieved data in the cache in step .

In step the presentation service determines if the request for the data is still pending from the user s remote communication device . That is the presentation service determines if the user s remote communication device is still maintaining the connection in wait for the desired data. If the request is still pending then the retrieved data is provided to the user s remote communication device in step .

Thus if the desired data can be retrieved by the gateway server from the data store within the idle time of the user s remote communication device then the desired data can be immediately provided to the user. In many situations however the gateway server will not be able to retrieve the desired data before the idle time for the user s remote communication device expires and the user s remote communication device terminates the connection . As will be discussed in more detail below the presentation service addresses these situations by responding to the user s remote communication device before its idle time expires.

More particularly if the desired data is not retrieved before the user s remote communication device terminates the connection then the presentation service will send a message to the user s remote communication device instructing the user or the user s remote communication device to resubmit the request for the desired data. This response may be repeated until the desired data is retrieved from the data store and stored in the cache . By using the presentations session to associate these subsequent requests with the initial request for the desired data the desired data can be transmitted to the user s remote communication device once it has been stored in the cache . That is the desired data stored in the cache can be transmitted to the user s remote communication device in response to an existing request for the data i.e. over the existing connection or when the request is resubmitted to the presentation service . Accordingly desired data can be retrieved from the data store on a real time basis regardless of the disparity between the idle time of the user s remote communication device and the time required to obtain the desired data from the data store .

As previously noted the presentation service manages communications with the user s remote communication device to ensure that the user s remote communication device does not time out without receiving a reply to its request for data. illustrate a flowchart showing one method that may be employed by the presentation service according to various embodiments of the invention to reliably communicate with the user s remote communication device .

As previously noted in step of the flowchart shown in the user sends the presentation service a request for desired data from the data store . In step the presentation service determines if the request is a new request for the desired data or if it is a resubmission of an earlier request for the desired data. If the request is a new request for the desired data the presentation service creates a presentation session in step and then passes the request along to the real time service to retrieve the desired data from the data store .

According to various embodiments of the invention the process of creating the presentation session in step includes designating the cache to be used for caching information relating to the request for the desired data from the user s remote communication device . As will be appreciated by those of ordinary skill the presentation service may employ any memory resource available to the gateway server . Because the requested data will be stored in the cache for immediate transmission to the user s remote communication device however a memory resource that can be quickly accessed to provide the requested data to the user s remote communication device may conveniently be used for the cache . With various embodiments of the invention the cache may be encrypted or unencrypted.

The process of creating the presentation session in step also includes designating identification information identifying the presentation session. This identification information is then provided to the real time service with the request for the desired information. When the real time service then returns the retrieved data retrieved from the data store it also provides the corresponding presentation session identification information. Using this returned presentation session identification information the presentation service stores the retrieved data in the cache associated with the presentation session. It should be appreciated that any suitable identification information may be used to identify the presentation session for the data request. For example the identification information may be a specific code or password. Alternately with some embodiments of the invention the identification information may be the memory address of the location of the cache for the presentation session.

In step the presentation service also initiates a timer for the user s remote communication device corresponding to the presentation session. As will be discussed in more detail below the timer will be used to predict when the user s remote communication device will time out and sever the connection to the presentation service . Further in step the presentation service determines device type information for the device that has requested the data. That is the presentation service determines information about the type of device making the request that will allow the presentation service to identify operational characteristics for the user s remote communication device .

With some implementations of the invention the presentation service may determine only a general category into which the user s remote communication device can be classified. For example with some embodiments of the invention the presentation service may determine whether the user s remote communication device is employing WML HTML SyncML IMAP or POP or the like to communicate. If the user s remote communication device is using HTML the presentation service then determines if the user s remote communication device is a personal computer or a personal digital assistant PDA . Thus if the user is employing for example a Toshiba PocketPC PDA device to access the presentation service the presentation service may categorize that device as a personal digital assistant HTML device.

Still other embodiments of the invention however may determine different or more detailed information regarding the user s remote communication device . For example with some embodiments of the invention the presentation service may determine the specific browser or other communication software being used by the user s remote communication device to communicate with the presentation service particular settings for that communication software or any other information that might be useful to determine how the user s remote communication device will communicate with the presentation service .

With some embodiments of the invention this device type information may conventionally be provided by the user s remote communication device when it initiates the connection . For example if the user s remote communication device sends a request for data using an HTML page that page may conventionally include information that the presentation service can use to determine the type of browser that the user s remote communication device is employing to communicate with the presentation service . Alternate embodiments of the invention however may employ alternate techniques to provide the device type information to the presentation service .

For example with some implementations of the invention the user may specify the device type information for the user s remote communication device when the user installs the access client on the computer . Alternately or additionally the user may specify the device type information using a survey or questionnaire page such as a HTML page provided to the access client or to the user s remote communication device . Once the user has specified the device type information with the questionnaire page the gateway server may generate and place a cookie on the user s remote communication device . When the user then employs the user s remote communication device to request data from the presentation service thereafter the presentation service can solicit the device type information from the cookie on the user s remote communication device in reply. Of course still other techniques for determining the device type information will be apparent to those of ordinary skill in the art and may be used with various embodiments of the invention.

Once the presentation service has determined the device type information for the user s remote communication device in step the presentation service employs that device type information to determine the communication characteristics of the user s remote communication device in step . Among various communication characteristics that may be identified by the presentation service the presentation service determines how long the user s remote communication device will wait for a reply to the request from the presentation service before severing the connection . That is the presentation service uses the device type information for the user s remote communication device to determine the idle time of the user s remote communication device .

For example as previously noted with the illustrated embodiment of the invention the presentation service may determine if the user s remote communication device is using WML or HTML to communicate and if the user s remote communication device is using HTML whether the user s remote communication device is a personal computer or a personal digital assistant. If the presentation service determines that the user s remote communication device is using WML to communicate then the remote device is probably a wireless telephone using a simple browser software application. Accordingly the presentation service may determine that the user s remote communication device will only wait a small period of time for example 5 seconds after submitting the request to receive a reply from the presentation service before severing the connection . On the other hand if the user s remote communication device is a personal computer employing HTML to communicate then the user s remote communication device is probably using a sophisticated browser software application such as Microsoft Internet Explorer. The presentation service may therefore determine that the user s remote communication device will wait for a relatively long period of time for example two minutes to receive a reply from the presentation service before severing the connection.

Various embodiments of the invention may employ different types of device type information to determine the device communication characteristics as explained in detail above. Accordingly different embodiments of the invention may also determine different types of device communication characteristics from the device type information. For example if the presentation service employs device type information that only identifies the user s remote communication device as one of three broad categories of devices e.g. a WML device an HTML personal digital assistant device or an HTML personal computer device then the presentation service may correspondingly identify only one of three broad types of device communication characteristics. For example it may determine that all WML devices will wait only 5 seconds for a reply all HTML personal digital assistant devices will wait only 90 seconds for a reply and that all HTML personal computer devices will wait only 2 minutes for a reply regardless of the specific configuration of any particular device.

If however the presentation service employs more detailed device type information such as the particular browser being used by the remote communication device then the presentation service may correspondingly employ more specific device communication characteristics information. For example the presentation service may determine that a device using the Microsoft Internet Explorer Version 6.0 will wait only three minutes for a reply from the presentation service before severing the connection while a device using a Sony Ericsson browser for wireless GSM telephones will wait only 45 seconds for a reply from the presentation service before severing the connection . As will be apparent to those of ordinary skill in the art the level of detail of the device characteristics information may depend upon the level of detail of the device type information obtained by the presentation service .

With various embodiments of the invention the presentation service may obtain the device characteristics information from for example a look up table such as the device characteristics table . The table may be populated using any conventional technique. For example the device characteristics in the table may be populated when the server is initialized. Alternately the gateway server may populate the table by seeking the appropriate device characteristics information from a remote source such as for example the Internet for each new type of remote communication device that is employed by a user.

In the illustrated embodiment the table is a component of the presentation service in order to allow the presentation service to more quickly retrieve the device characteristics information. Alternate embodiments of the invention however may have the table located in the real time service an independent database directly or indirectly accessible by the presentation service or even in the access client . Still other embodiments of the invention may employ other techniques to determine the device characteristics information. For example if the user s remote communication device provides a cookie to the presentation service with the device type information as discussed above this cookie may also include the device characteristics information for the device . Further with various embodiments of the invention the use of the device information to determine the device characteristics information may be omitted entirely. Instead for example with these embodiments of the invention the user s remote communication device may provide the appropriate device characteristics information directly to the presentation service when making a request for data.

It should also be appreciated that in addition to the idle time for the user s remote communication device the device characteristics information may include other data as desired. For example the device characteristics information may identify a particular data format employed by the user s remote communication device a transmission speed for transmitting the retrieved data to the user s remote communication device or other useful information corresponding to the device type of the user s remote communication device .

Returning now to when the presentation service has determined the device characteristics for the user s remote communication device the presentation service sets a threshold for the timer in step using the determined device characteristic information for the user s remote communication device . More particularly the presentation service sets a value for the timer at which the presentation service will generate and send a reply to the request for data from the user s remote communication device . The threshold value is selected to allow the presentation service time to reply to the user s remote communication device s request for data before the user s remote communication device times out and severs the connection .

As will be appreciated by those of ordinary skill in the art the specific threshold set for a timer can be predicated upon a variety of factors including the amount of time necessary to prepare and send a suitable reply. Thus if a device is using a sophisticated browser that requires a complex reply including for example graphics then the threshold may be set to allow more time for a reply than when the user s remote communication device is using a simple browser that requires only a text reply.

For example if the presentation service has determined that the user s remote communication device is using a simple browser and will wait only 5 seconds for a reply before severing the connection then the presentation service may set the threshold for the timer to be 3 seconds allowing 2 seconds to generate and send the reply message. If however the presentation service has determined that the user s remote communication device is using a sophisticated browser and will wait two minutes for a reply before severing the connection then the presentation service may set the threshold for the timer to be 1 minute 50 seconds thereby allowing more time i.e. 10 seconds to prepare and send a more complex reply before the user s remote communication device times out and severs the connection .

With various embodiments of the invention still other factors can be taken into account when determining the threshold value for the time including for example current traffic conditions for the network and the degree of reliability desired for the connection . Alternately a single threshold value can be designated for each category of device type. Thus for example all communication devices using WML may have a first threshold value for the timer all communication devices that are HTML using personal digital assistant devices can have a second threshold value for the timer and all communication devices that are HTML using personal computers can have a third threshold value for the timer .

Of course with still other embodiments of the invention a single time period can be used to determine the timer threshold value for all types of communication devices regardless of their individual device communication characteristics. For example the timer threshold value can be set for all types of devices so that the presentation service employs only a single time period for all types of devices. With these embodiments of the invention the determination of both the device type information and the corresponding device characteristics information may be omitted.

It should also be noted that while steps have been described above as being in a specific order other embodiments of the invention may order these steps in any desired manner. For example some embodiments of the invention may set the threshold value and initiate the timer before relaying the request for data to the real time service . Alternately some embodiments of the invention may relay the request for data to the real time service before determining the threshold value and initiating the timer . Still further with some embodiments of the invention the presentation service may set the threshold value for the timer before initiating the timer while with still other embodiments of the invention the timer can be started before the threshold value for the timer is determined. Moreover for example with some embodiments of the invention the presentation service may designate the cache after the request for data has been relayed to the real time service before the request for data has been relayed to the real time service before the timer has been set or after the timer has been set.

In any case once the threshold value for the timer has been set and the request for data relayed to the real time service the presentation service then monitors the real time service in step for a reply containing the retrieved data and the identification information identifying the presentation session corresponding to the request for the retrieved data. If a reply is not received then in step the presentation service determines if the timer has reached its threshold value. If the timer has not reached its threshold value then the presentation service continues to monitors the real time service for a reply with the requested data. If however the timer has reached its threshold value then the presentation service sends a reply to the user s remote communication device in step indicating that the desired data has not yet been retrieved from the data store .

More particularly when the presentation service determines that the threshold value has been reached it formulates and sends a reply to the user s remote communication device indicating that the desired data has not yet been retrieved. It should be appreciated that any suitable type of reply message may be employed by various embodiments of the invention. For example with some embodiments of the invention the reply message may be a page such as an HTML or WML page that displays a message to the user stating that the desired data has not yet been retrieved. With some embodiments of the invention the reply message may additionally prompt the user to manually resubmit the request for the desired data. Thus the reply message may display an invitation to the user to resubmit the request along with a command prompt to resubmit the request. When the user activates the command prompt associated software code in the reply page will instruct the user s remote communication device to resubmit the request. Such automatic reply operations are well known and thus will not be discussed in further detail. With still other embodiments of the invention however the reply message may simply include software instructing the user s remote communication device to automatically resubmit the request of the desired data. With these embodiments of the invention the reply message may thus omit displaying a message to the user.

For various embodiments of the invention the reply message will also include presentation session identification data identifying the presentation session associated with the request. This presentation session identification information may be the same presentation session identification information provided to the real time service or it may be different from the presentation session identification information provided to the real time service . Also while the presentation session information provided to the user s remote communication device may conveniently be transmitted with the reply message it may also be transmitted in a separate communication. For example the presentation session identification may be provided to the user s remote communication device immediately after the user s remote communication device has submitted an initial request for desired information.

In any case when the user s remote communication device resubmits the request for the desired information the resubmitted request includes the presentation session information associated with the initial request for the desired data. Thus when the resubmitted request is received by the presentation service the presentation service determines that the request matches an existing presentation session in step . The presentation service then proceeds immediately to step to determine if the desired data has been retrieved from the data store and stored in the cache .

If the desired data has been retrieved and cached in cache then the desired data is immediately returned to the user s remote communication device as noted above. If however the desired data has still not been cached in the cache then the process of steps and are repeated until the desired data is retrieved from the data store stored in the cache and then provided to the user s remote communication device in step .

It should be noted that with the illustrated embodiment the presentation service translates the retrieved data into a format that can be processed by the user s remote communication device before transmitting the retrieved data to the user s remote communication device . It should also be appreciated however that this translation can be made at any point. For example with some embodiments of the invention the retrieved data can be translated into an appropriate format before it is stored in the cache while with other embodiments of the invention the retrieved data may be translated into an appropriate format just before it is transmitted to the user s remote communication device . With still other embodiments of the invention however the requested data may alternately or additionally be translated by the access client the real time service the data store or even the user s remote communication device itself. Still further the translation may even be performed by a combination of these components including the presentation service .

The request for data may thus be submitted and resubmitted by the user s remote communication device until the desired data is retrieved from the data store by the real time service and stored in the cache . If there is an error in retrieving the desired data then the real time service may generate an error message informing the user s remote communication device that the data cannot be retrieved. With some embodiments of the invention this error message may be stored in the cache instead of the desired data. When the user s remote communication device then retrieves data from the cache it will retrieve the error message informing the user that the desired data could not be successfully retrieved from the data store . Still other embodiments of the invention however may relay the error message immediately after receiving the error message from the real time service .

With some embodiments of the invention the presentation service the real time service or both may pre fetch data from the data store . Thus various embodiments of the invention may employ heuristics to predict how much data a user will request from the data store base upon e.g. the user s previous pattern of data retrieval. For example some users will frequently retrieve new email messages from their email account. For such a user the presentation service or the real time service may independently periodically request all new email messages for the user from the data store . Accordingly when the user employs the remote communication device to retrieve his or her new email messages that data will already be stored in the cache . Still other users however may only occasionally request new email messages. For these users the presentation service or the real time service may not independently request new email messages from the data store .

Similarly some users will regularly request particular combinations of data. For example some users will typically request retrieval of an email message and then immediately request retrieval of any attachments to retrieved email messages. With these users the presentation service or the real time service may independently request attachment data with any requests to retrieve new email messages for the user from the data store . Accordingly when such a user then follows a request to retrieve a new email message with a request to retrieve attachment data for the retrieved email message that attachment data will already be stored in the cache .

Of course various embodiments of the invention may employ further heuristics instead of or in addition to heuristics relating to retrieval frequency or the type of data retrieved. Such heuristics may include for example the level of service subscribed to by a user the size of the data typically retrieved or any other desired heuristics evaluation. Also in addition to storing independently retrieved data in the cache various embodiments of the invention may also go ahead and forward the independently retrieved data to the remote communication device without receiving an express request to retrieve that data.

As previously noted the real time service retrieves the desired data from the data store through the access client . More particularly when the real time service receives a request for data from the presentation service it relays that request to the access client . Because the access client is hosted on the computer that has access to the data store the access client can instruct the computer to retrieve the desired data from the data store . When the computer has obtained the desired data from the data store the access client returns the desired data to the real time service .

With some embodiments of the invention the real time service may communicate with the access client using conventional communication techniques available to the computer to thereby establish the connection . In some situations however the computer will be located in an environment shielded from unauthorized access by a barrier such as the firewall illustrated in . In these situations the barrier may prevent many types of conventional two way communication between the computer and thus the access client and the real time service . With these embodiments of the invention the real time service and the access client may communicate using any suitable communication technique such as the use of a virtual private network VPN . In some situations however even if the barrier can be configured to allow for conventional two way communication between the computer and the real time service the process of reconfiguring the barrier may be onerous particularly if a large number of users are employing different computers to retrieve data from a remote communication device.

Accordingly with various embodiments of the invention the real time service may employ a connection to the access client through the network that will pass through the firewall. As will be appreciated by those of ordinary skill in the art various firewall systems will typically allow one or more specific access points by which a computer such as the computer may receive data from sources outside of the firewall. For example conventional firewalls typically designate a port sometimes identified as Port through which a computer may receive data from outside sources. The real time service according to various embodiments of the invention may thus use such an access port to employ a one way communication connection with the access client through this type of designated port.

Using this one way communication connection hereafter referred to as the command channel the real time service may send instructions to the access client . More particularly the real time service may send instructions commanding the access client to retrieve and relay information such as the desired information back to the real time service . It also should be noted that the real time service may use the one way command channel to instruct the access client to retrieve information from a location other than the data source as well. For example a user may wish to add information such as a new electronic mail message to the data store for storage or action. Upon receiving the new data from the user s remote communication device the presentation service through the real time service may then instruct the access client to retrieve the new data from the real time service for delivery to the data store .

Thus with various embodiments of the invention the command channel may be used only to send commands from the gateway server to the access client . Because a command typically will be an instruction to take some action e.g. retrieve headers for the first ten messages in the electronic mail folder inbox of the user retrieve today s appointments from the electronic calendar for the user perform a search for the text Mike in the electronic mail folder contacts of the user etc. the commands will usually be relatively small e.g. less than 1 kB . As a result of their small size multiple commands can be multiplexed on the command channel.

In turn the access client can send data associated with the command to the real time service or retrieve data associated with the command from the real time service over one or more alternate connections collectively referred to hereafter as data channels. For example the commands may include a specific address to which the associated data should be posted or from which the associated data should be retrieved . The command may also include a parameter that can subsequently be used by the access client to identify that its response either posting or retrieving data is a reply to that specific command. Using this information the access client may then post data to the specified address or retrieve data from the specified address through a different socket from the socket used by the command channel. Similarly the access client may also post various commands to the real time service . These commands may for example relate to the authorization of additional users for the access client .

Thus a reply to a command from the real time service will not interfere with the access client s receipt of new commands from the real time service or with the transmission of data associated with responses to earlier commands. Advantageously this arrangement improves the performance by allowing data channels to be established on as needed basis directly to the physical server currently serving the user s device Together the command channel and the data channels provide the connection that allows two way communication between the real time service and the access client through a barrier such as a firewall.

For example the real time service may command the access client to retrieve the desired data from the data store and then post the retrieved data along with the presentation session identification information corresponding to the request back to a specific address. The address may be a universal resource location URL address for a location maintained by the real time service thereby allowing the real time service to retrieve the desired data from the access client . The instructions or a preceding or subsequent instruction may also command the access client to take some action with respect to the new data such as storing the new data in the data store or sending the new data to another location.

As previously noted when the access client establishes the persistent connection with the real time service the real time service creates a real time session for that connection. The real time session may be for example a data object containing any desired data about the user and the connection such as the port of the computer through which the connection is established. With some embodiments of the invention the real time session may be stored in the directory . Alternately the real time session may be stored in another suitable memory location.

For various embodiments of the invention a proxy service may be employed between the access client and the real time service e.g. in the public wide area network . With this type of arrangement the proxy service may close the connection on its own accord after a predetermined amount of time without an exchange of data over the connection. Alternately or addition other problems could occur relating to the proxy service causing it to sever the connection . It would therefore be beneficial for the access client to be able to detect when the connection is severed so that it can reestablish the connection . Conventional application programming interfaces for network communications however such as conventional application programming interfaces for communicating using TCP IP are typically not convenient for providing an application feedback when a network connection suddenly closes. Moreover the real time service will not necessarily know that the connection has been severed until for example it tries to write to the socket through which the connection was established.

Accordingly with various examples of the invention the real time service may regularly send heartbeat messages to the access client . These heartbeats may be for example small groups of data packets that can be sent to continually maintain the one way connection between the real time service and the access client . By periodically trying to send these heartbeats the real time service can immediately detect when the connection has been severed. Thus by maintaining a continuous connection between the real time service and the access client the real time service will be prepared to immediately process requests for desired data from the user s remote communication device without having to initiate a new command channel for each new request.

With some embodiments of the invention the heartbeat may include data indicating to the access client when the next heartbeat from the real time service should be received. If the access client then does not receive the next heartbeat within the indicated time period and any additional buffer period as desired then the access client can conclude that the connection is severed and needs to be reestablished. Also because the heartbeat is generated by the real time service the time value indicating the rate of the heartbeat can be controlled by the real time service . More particularly the rate data for the heartbeats can be adjusted by the real time service based upon for example the amount of traffic being handled by the gateway server . Thus the heartbeat is dynamically schedulable.

For some implementations of the invention the scheduled rate of the heartbeat may be the same for every connection . Alternate embodiments of the invention however may have two separate intervals for heartbeats. More particularly some embodiments of the invention may have one heartbeat rate for active presentation sessions where a user is presently using a communication device to communicate with the gateway server and another heartbeat rate for inactive sessions. This arrangement can provide a quicker connection error detection time for sessions where a user will notice when the connection is erroneously severed and a less resource intensive connection error detection time where a user will not immediately notice when the connection has been erroneously severed.

While the use of the access client was described above with reference to a single access client accessing the data store various embodiments of the invention may have multiple access clients communicating with the gateway server . That is each of a plurality of users can maintain an access client communication with the gateway server . Moreover a user can employ multiple access clients to communicate with the gateway server .

Additionally various embodiments of the invention may allow a single access client to service more than one user. For example with these embodiments when a user installs the access client on the computer the access client may inquire as to whether the user wants to delegate remote access to the user s data in the data store through anyone else i.e. another user employing a different access client . If the user would like the ability to access desired data in the data store through another user s access client then the access client may facilitate that arrangement.

For example if the access client is being employed in a corporate network environment as illustrated in the access client may provide the user with a list of other persons having access to the corporate data store e.g. everyone in a corporate email server . When the user selects another person from the list the access client may e.g. arrange for the selected person to receive an email reporting his or her selection along with instructions on how to obtain and install an access client if necessary . The user s access client may also convey an encrypted message to the selected person either by electronic mail or by another transmission technique. The encrypted message contains the information necessary to obtain the user s access to the data store . Thus if the selected person agrees to provide access to the data store for the user the selected person s access client can employ the access information contained in the encrypted message to obtain the user s access to the data store .

Advantageously with some of the embodiments of the invention described above that employ a one way command channel the one way command channel can service multiple users of the access client . More particularly commands corresponding to different users may be multiplexed over the single command channel. With this arrangement when the access client establishes the connection with the real time service it identifies the users that it is serving to the real time service .

While the previous discussion described the user of only a single gateway server for ease of understanding many implementations of the invention would employ multiple gateway servers as shown in to both increase capacity and redundancy. For example some embodiments of the invention may employ gateway servers in an N 1 architecture including as many gateway servers as needed for a desired capacity plus an extra gateway server for redundancy.

A conventional N tier Web service system may typically have between one and four tiers depending upon the purpose of the service. For example a conventional Web service system may include a first tier Web server a second tier application server and then a third tier database server. In general a user may access such a Web service system by presenting the Web server tier with a request which then flows to the application server and onto the database server in a vertical manner. This type of conventional network will often include one or more load balancers that route incoming requests based upon the current use of each server i.e. the load balancer will route incoming requests to servers that are less occupied .

With various embodiments of the invention however each user has at least one access client installed on a computer which in turn establishes a persistent connection to a gateway server . Thus when a user employs a remote communication device to transmit a request to the data retrieval system it would be more efficient to specifically route the request to the gateway server that has already established a persistent connection to the user s access client .

Advantageously various implementations of the invention may conveniently match a user s incoming request to send or retrieve data with the user s access client . As noted above when an access client connects with a real time service the real time service creates a real time session for that connection. While a real time session exists for a persistent connection it may exist across multiple requests from remote communication devices . That is when a request from a remote communication device is received by the presentation service it can be mapped through a real time session to the real time service maintaining the connection to the user s access client . Moreover each time that the request is subsequently received from the remote communication device it can again be mapped back to the proper real time service through the real time session. Thus these embodiments of the invention provide a collocation process to collocate a user s presentation session maintained by a presentation service with the user s real time session corresponding to the persistent connection established between the user s access client and a real time service .

Referring now to with collocation when an access client A is turned on it negotiates a secure connection to a real time service provided by a gateway server e.g. the real time service A provided by gateway server A . In the process of establishing this connection information pertaining to the connection is stored in the directory . For example when a user USER employs the access client A the real time service may note that USER has established a connection from the access client A to gateway server A or to real time service A . It should be noted that with some embodiments of the invention a user may delegate his or access to a data store e.g. data store A in to multiple access clients as described above. If a user thereby is associated with connections to multiple real time services then suitable heuristics may be employed to select one connection to a gateway server that is preferable to the others for the purpose of collocating a presentation session with a real time session.

When a user subsequently employs a remote communication device to e.g. submit a request for data from the data store the presentation service receiving the request will initially authenticate the request as discussed in detail above. For example as previously noted the presentation service may provide the user s remote communication device with an authentication user interface requesting the user s name password etc. Once the remote communication device i.e. the user has been authenticated the presentation service makes a query to its associated real time service which in turn queries the directory as to the gateway server or alternately the real time service corresponding to the user. More specifically the real time service may query to the directory whether the user has established an existing connection between an access client and a gateway server and if such a connection currently exists which gateway server is maintaining the connection .

If for example a request for data from USER is initially routed to gateway server B by querying the directory the gateway server B can determine that the user s access client is currently connected to the gateway server A i.e. to the real time service A . Based upon this information the presentation service B generates a redirect response for the remote communication device . The redirect response may be device specific but may not require any special software. Instead the response may be for example a conventional HTML WML or HDML redirect command. The redirect response then causes the remote communication device to issue its subsequent requests for the desired data specifically to the gateway server A. More particularly the redirect response may for example provide the remote communication device with software instructions such an HTTP cookie. These software instructions contain routing information or alternately are themselves routing information to be included in subsequent submissions of the request for the desired data.

Accordingly when the remote communication device resubmits a request for desired information the routing information can be used to route the request directly to the presentation service associated with the real time service maintaining a connection to the user s access client . For example as shown in a data retrieval system according to various implementations of the invention may employ one or more load balancers . These load balancers route both incoming data retrieval requests and incoming data submission requests from remote communication devices to a gateway server . With these embodiments when a load balancer receives a request it first checks to determine if the request contains routing information such as a cookie as described above. If the request does not contain routing information then the load balancer assigns the request to a gateway server based upon the current load distribution of all of the gateway servers as known in the art. If however the load balance determines that a request does contain routing information then it routes the request to the gateway server identified in the routing information.

As will be appreciated by those of ordinary skill in the art with this arrangement each load balancer may have a public network address such as a public Internet protocol IP address. The gateway servers behind the load balancers may then have virtual network addresses that cannot be directly accessed from outside of the network. For these implementations of the invention the routing information will provide the virtual network address for the desired gateway server and the load balancer receiving a request containing the routing information can then map the request to the identified gateway server .

With various examples of the invention the redirect response may also contain additional handoff information to be inserted into the subsequent requests for the desired data. When the routed gateway server then receives a subsequent request for the desired it can determine from the handoff information that the request is a handoff from another gateway server . The handoff information may also contain a time stamp so that the routed gateway server can confirm that the handoff was recent. Using this information it will associate the request with a presentation session on the initial gateway server . The routed gateway server can thus collocate the presentation session from the presentation service of the initial gateway server to its own presentation service so that its own presentation service returns the desired data to the remote communication device when it is retrieved.

According to still other embodiments of the invention the routed gateway server may use the handoff information to employ the authentication performed by the initial gateway server thereby avoiding requiring that the user reauthenticate himself or herself. Accordingly for these embodiments the handoff information may be encrypted to prevent unauthorized users from creating false handoff information to avoid authentication. Of course the handoff information may be encrypted even if the routed gateway server does not employ the authentication performed by the initial gateway server . Also it should be noted that with various embodiments of the invention the collocation process can alternately be performed by the load balancers but this may require customized code.

Thus referring back to the above example for USER after a request for data from USER is initially routed to gateway server B the gateway server B may determine from a query to the directory that the user s access client is currently connected to the gateway server A i.e. to the real time service A . Accordingly the gateway server B provides a redirect response to the remote communication device A with handoff information. The handoff information will include routing information such as e.g. a virtual network address for the gateway server A. The handoff information may also be encrypted and may include a time stamp and e.g. confirmation of USER s authentication. When USER resubmits requests for the desired information the new requests will include the handoff information. Accordingly when the load balancer A receives the resubmitted requests it will route the requests to the gateway server A for handling.

As will be appreciated by those of ordinary skill in the art there may be some situations where this collocation process may not be employed. For example a user may initially employ a first access client to retrieve data. If that first access client then fails before the data is retrieved the user may be forced to employ a second delegated access client to retrieve the information. In this scenario it would not be desirable to reroute subsequent requests to another gateway server as the gateway server corresponding to the first access client may already have some or all of the requested data in the cache . Also collocation may not be desirable when a user first signs up to the data retrieval system with the computer but does not have an access client installed yet.

It also should be appreciated that with different embodiments of the invention a separate locator service may perform one or more of the collocation functions instead of the presentation service . For example with some embodiments of the invention a locator service may query the directory to determine the gateway server to which the user s access client is currently connected and then generate a corresponding redirect response for the remote communication device .

Of course various embodiments of the invention may alternately or additionally employ conventional remote call procedures to associate a presentation session maintained by a presentation service on a gateway server with a connection maintained by a real time service on a different gateway server . Such remote call procedures may be employed for example instead of the collocation process described above or if the collocation process fails for some reason.

To establish a secure connection to a computer a browser will typically use an encryption protocol such as the Hypertext Transfer Protocol Secure which employs the Secure Sockets Layer SSL encryption technique. With this protocol encryption key certificates are preinstalled and public key and private keys are used during a handshake process to negotiate a session key for the connection. With an SSL handshake a third party cannot determine the session key even if all of the exchanged data is intercepted. This type of protocol requires a great deal of resource overhead to begin however and requires a great deal of resource overhead to maintain. Moreover with various examples of the invention the presentation service may be implemented using a conventional Web server but the real time service may be implemented using a different type of server. With this arrangement the real time service may use HTTP and or HTTPS communications but only to deliver messages through firewalls e.g. for requests to Port which conventionally are passed by firewalls .

Accordingly it would be beneficial to allow the access client and the real time service without maintaining an SSL session. Advantageously various embodiments of the invention allow the access client to communicate with the real time service without having to maintain an SSL session. According to these embodiments the load balancers also serve as encryption protocol terminators in addition to load balancers. That is the load balancer may have SSL software or hardware e.g. SSL accelerator cards that handles SSL communications very quickly. When the load balancer passes a communication onto a gateway server the communication thus is decrypted to a regular HTTP format i.e. the load balancer decrypts the communication before passing it to the gateway server . These specialized load balancers are known in the art and may be obtained from a variety of sources and thus will not be discussed in further detail.

When the access client attempts to establish a connection to the real time service it does not communicate directly with the real time service . Instead the access client initially transmits an encrypted message such as a HTTPS message through a load balancer to a presentation server . The HTTPS message is received at the load balancer which decrypts the message and routes the message to a presentation service as a HTTP message. More particularly the load balancer routes the request to the presentation service of a gateway server according to its balancing algorithm e.g. to the gateway server that is the least busy . The presentation service then calls into the real time service to report that the access client will soon be providing a request to establish a connection.

In response the real time service creates an entry in a list of pending connections e.g. a table of access clients that will soon be connecting to the real time service . In response a unique session encryption key is generated e.g. a 128 bit key which is unrelated to the initial SSL communication between the access client and the load balancer . Any desired encryption algorithm such as RC4 may be used to generate the encryption key. The entry in the table will thus include the identity of the access client a public session identification and a private encryption key.

The presentation service then sends an HTTP reply that contains the address such as a universal resource location URL address corresponding to the real time service to which the access client should connect. The reply also includes the public session identification and the private encryption key. The access client can then transmit a message to the real time service using the address e.g. using a URL of the form http www.gateway.com real timeserver sessionlD xxxxxx . Using this arrangement the message sent from the access client to the real time service may be an unencrypted HTTP message but the data in the message can be encrypted using the private encryption key. The real time service can then use the session identification in the message to locate the appropriate entry in the table with the corresponding private encryption key. The real time service will then decrypt the contents of the message with the private encryption key.

Thus the access client and the real time service can communicate without maintaining an encryption session. Instead the access client and the real time service can use the public session identification and the private encryption key to securely communicate. Moreover by handing off the connection directly to the real time service these embodiments of the invention can avoid maximizing the limit of the load balancer . Of course with still other embodiments of the invention the access client and the real time service can securely communicate while maintaining an encryption session such as a SSL encryption session but also have the data exchanged over the secure connection separately encrypted. That is the data exchanged over the secure connection may use different encryption information as described in detail above than the encryption information used to maintain the secure connection.

While the invention has been described with respect to specific examples including presently preferred modes of carrying out the invention those skilled in the art will appreciate that there are numerous variations and permutations of the above described systems and techniques that fall within the spirit and scope of the invention as set forth in the appended claims.

