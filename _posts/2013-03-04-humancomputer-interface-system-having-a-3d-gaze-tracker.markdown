---

title: Human-computer interface system having a 3D gaze tracker
abstract: An apparatus for interfacing a person with a computer, the apparatus comprising a gaze tracker having a 3D camera and a picture camera that image the person and a controller that processes images acquired by the cameras to determine a gaze direction and point of regard of the person.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08888287&OS=08888287&RS=08888287
owner: Microsoft Corporation
number: 08888287
owner_city: Redmond
owner_country: US
publication_date: 20130304
---
The present application is a continuation in part of U.S. patent application Ser. No. 12 965 948 filed Dec. 13 2010 Now U.S. Pat. No. 8 408 706 B2 which is incorporated herein reference.

Embodiments of the invention relate to methods and apparatus for tracking a person s gaze and point of regard POR to which the gaze is attended and systems that use the methods and apparatus to interface a person with a computer.

Various types of eye tracking or gaze tracking systems for determining a direction of a person s gaze and what the person is looking at are known in the art. The systems are used by way of example for ergonomic and medical research diagnostics and interfacing a person with a computer or a computer generated artificial environment.

Generally the systems operate to determine a location for the person s pupil and a gaze direction along which the person is looking which is defined as a direction of a gaze vector that extends out from the eye along a line from a center of rotation of the eye through the center of the located pupil. A location of the eye in three dimensional 3D space is determined and used to determine coordinates of a region of space through which the gaze vector passes. The determined coordinates of the region hereinafter referred to as an origin of the vector locate the gaze vector in space. Given the direction and origin of the gaze vector its intersection with a region or object in the person s environment is identified to determine what the person is looking at which presumably is a point regard POR to which the person s attention is directed.

Hereinafter a POR is assumed to be coincident with an intersection of a person s direction of gaze and an object or region in the person s environment and is used to refer to the intersection object or region. A gaze tracking system hereinafter referred to as a gaze tracker provides both a direction and an origin for a person s gaze vector and optionally a POR for the person.

Intrusive and non intrusive methods and gaze trackers exist for determining a direction for a gaze vector. In some intrusive gaze trackers a person wears special contact lenses comprising induction micro coils that move with the eye and pupil. A high frequency electromagnetic field is used to track orientation of the micro coils and thereby the person s eyes and direction of gaze. In some intrusive gaze trackers a person is fitted with electrodes that sense changes in orientation of a dipole electric field that the eye generates to determine direction of gaze.

Non intrusive gaze trackers and tracking methods often image reflections referred to as Purkinje reflections of light from surfaces of different structures of the eye and process images of the reflections to determine their relative motion and therefrom changes in direction of a person s gaze. The changes in gaze direction are referenced to a reference gaze direction to determine the person s gaze direction. First second third and fourth Purkinje reflections refer respectively to reflections from the front surface of the cornea from the back surface of the cornea the front surface of the lens and the back surface of the lens.

For a given stationary source of light reflections from the front surface of the cornea the first Purkinje reflection are strongest and are conventionally referred to as glints . Locations of images of glints are relatively independent of direction of gaze for moderate eye rotations eye rotations up to about 15 and a fixed position of the head. Locations of images of glints are typically used to reference motion of images of features of the eye or of other Purkinje reflections to determine changes in a person s gaze direction.

In many non intrusive gaze trackers changes in location of an image of the pupil relative to an image of a glint are used to determine gaze direction. In some non intrusive gaze trackers reflections of light from the retina which are not usually classified as a Purkinje reflections are used to image the pupil and track eye motion and gaze direction. The retina acts like a retro reflector and light that enters the pupil and is reflected by the retina exits the pupil along a direction that it entered the eye and backlights the pupil. The retinal backlighting of the pupil produces the familiar bright eye or red eye effect frequently seen in images of people s faces acquired with a flash. Bright eye pupil images of a person are acquired by a camera using light sources that illuminate the person s face from a direction substantially coincident with the camera optic axis. Locations of the bright eye pupil in the images are tracked relative to locations of glints in the images to determine the person s gaze direction. Bright eye pupil images are not produced by off axis light sources and for off axis light sources an imaged pupil appears dark. In many non intrusive gaze trackers locations of dark pupil images are compared to locations of images of glints to determine direction of gaze.

For many applications of a gaze tracker a person s head is required to be stabilized relative to components of the gaze tracker so that it can provide acceptably accurate determinations of a direction and an origin for a gaze vector and therefrom a POR for the person. For some gaze trackers the person s head is stabilized by a static support such as a chin rest often used in ophthalmic examinations or a bite bar to fix the head and eyes relative to components of the gaze trackers.

For applications such as interfacing a person with a virtual or augmented reality it is advantageous for the person to be able to freely move his or her head and for these applications a person typically wears a headgear such as a helmet or goggles that comprises gaze tracker components. The headgear holds the gaze tracker components in substantially fixed locations relative to the person s head and provides fixed known distances and orientations of the eye relative to the components. The known distances and orientations facilitate determining gaze vector directions and origins for the person relative to the headgear. Gaze vector directions and origins relative to the real world a virtual or augmented reality are determined from the gaze directions and origins relative to the headgear and orientation of the headgear in the real world. Orientation of the headgear is determined using any of various optical electromagnetic or mechanical position and orientation sensor systems.

Some gaze trackers provide directions and origins of gaze vectors and PORs for a person without recourse to a worn headgear. However these gaze trackers generally operate for head positions restricted to a relatively small range of distances between about 50 cm centimeter and about 80 cm from the gaze trackers.

An embodiment of the invention provides a three dimensional 3D gaze tracker and a system that uses the 3D gaze tracker to interface a person with a computer. The 3D gaze tracker determines gaze vectors for a person who is substantially unencumbered by gaze tracking headgear and enjoying freedom of motion in a field of view FOV of the gaze tracker having a depth of field that extends to a relatively large distance from the tracker. Optionally the gaze tracker determines a POR for gaze vectors that it determines. In an embodiment of the invention the computer may generate images on a video display to interact with the person and the 3D gaze tracker or a processor that receives data defining the POR determined by the 3D gaze tracker generates an icon indicating location of the POR on the video display.

In an embodiment of the invention the 3D gaze tracker comprises a 3D camera which acquires range images of the person that provide 3D spatial coordinates for features of the person s face and or head and a camera hereinafter also a picture camera which acquires contrast images hereinafter pictures of the features. A processor processes the contrast and range images to distinguish the person s eyes and features of the eyes for example an eye glint a bright or dark pupil and features of the face or head such as the nose chin or forehead and determines 3D spatial coordinates for the features. The processor provides directions and origins for gaze vectors for the person and optionally PORs associated with the gaze vectors responsive to the distinguished features and their 3D spatial coordinates.

Optionally the 3D camera comprises a time of flight TOF 3D camera configured to provide range images in a FOV that extends to a distance between at least 1 m meter and 3 m from the gaze tracker. Optionally the FOV extends from a distance equal to about 30 cm from the gaze tracker.

In the discussion unless otherwise stated adverbs such as substantially and about modifying a condition or relationship characteristic of a feature or features of an embodiment of the invention are understood to mean that the condition or characteristic is defined to within tolerances that are acceptable for operation of the embodiment for an application for which it is intended. Unless otherwise indicated the word or in the specification and claims is considered to be the inclusive or rather than the exclusive or and indicates at least one of or any combination of items it conjoins.

This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used to limit the scope of the claimed subject matter.

In the detailed description below aspects of embodiments of the invention are discussed with respect to a 3D gaze tracker schematically shown in which comprises a TOF 3D camera and a picture camera in accordance with an embodiment of the invention. Aspects of determining gaze directions responsive to images of eye glints and pupils acquired by the 3D gaze tracker in accordance with an embodiment of the invention are discussed with reference to . Effects of head orientation on determining gaze directions and aspects of determining head orientations and gaze directions by the 3D gaze tracker in accordance with an embodiment of the invention are illustrated and discussed with reference to . A variation of a 3D gaze tracker that tracks a person with a cone of light to provide enhanced illumination of the person in accordance with an embodiment of the invention is discussed with reference to . Determinations of gaze vector origins using range images acquired by a 3D gaze tracker in accordance with an embodiment of the invention are discussed with reference to . schematically shows an embodiment of a 3D gaze tracker comprising a stereoscopic 3D imager that determines distances by triangulation.

In some embodiments of the invention the lower bound range is equal to or greater than about 30 cm. Optionally the lower bound range is equal to or greater than about 50 cm. In some embodiments of the invention the upper bound range is greater than or equal to about 1 m. Optionally the upper bound range is equal to or greater than about 2 m. In some embodiments of the invention the upper bound range is equal to about 3 m.

A view angle of 3D gaze tracker is a largest possible angle between lines that lie in FOV and a plane through optical axis . Horizontal and vertical view angles are view angles for horizontal parallel to the ground and vertical perpendicular to the ground planes respectively that contain optical axis . In some embodiments of the invention at least one of the horizontal and vertical view angles is equal to or greater than about 45 . Optionally at least one of the view angles is equal to or greater than 90 . In some embodiments of the invention at least one of the view angles is equal to about 120 or 150 .

By way of example 3D gaze tracker is assumed to be tracking the gaze of person to interface the person with a computer not shown via a video display . Video display may be any of various video displays such as by way of non limiting example a desk top computer screen a video game console screen a tablet screen or a smartphone screen. The computer also referred to as the video display computer may be any processing device or system such as by way of non limiting example a gaming console configured to support online video gaming a laptop smartphone or tablet that uses video display to interface with person .

Block arrows in schematically represent gaze vectors for person and dashed lines indicate their directions as converging to a POR at the lower left corner of video display . A controller controls 3D gaze tracker and may be interfaced with the video display computer by a suitable application programming interface API so that information generated by the 3D gaze tracker is applicable to images displayed on video display and may be used to modify the images. Modifying the displayed images comprises effecting any change to the displayed images and comprises by way of example making a change to the images themselves or adding information to the images.

It is noted that whereas in the above description controller may be understood to be separate from the video display computer controller may be integrated with comprise or be comprised in the video display computer and may be implemented using any combination of hardware or software components. Controller as well as the video display computer may for example and without limitation comprise an application specific integrated circuit ASIC a field programmable gate array FPGA or a system on a chip that may store and execute an instruction set that provides a functionality of 3D gaze tracker or the video display computer. Controller may comprise a general purpose processor having access to or including a computer readable memory storing an executable instruction set which the processor executes to provide a functionality of 3D gaze tracker or the video display computer. Controller may be configured as a distributed system optionally implemented in the cloud having various functionalities that communicate with each other to cooperate in performing tasks of 3D gaze tracker .

In an embodiment of the invention controller generates information that the API uses to indicate on video display a location of POR . Optionally controller provides information that defines a region of uncertainty ROU for the location of POR determined by 3D gaze tracker . For example location of POR may be visibly indicated on video display by a suitable POR icon which as schematically shown in may be a circle . Diameter of circle may indicate accuracy a ROU with which the 3D gaze tracker determines location of POR .

The location of POR icon provides visual feedback for person which the person may use to adjust a location for his or her POR in response to displays generated on video display . For example 3D gaze tracker may be used to enable person to interact with a video game presented on video display by the video display computer. As an illustrative non limiting example the video game might be an aerial dogfight video game schematically shown in in which person attempts to follow a maneuvering enemy fighter with her eyes to center her POR on the fighter. When person sees that her POR as indicated by circle is centered on enemy fighter she may operate optionally a joystick not shown to release an air to air missile not shown or fire a canon not shown to destroy the enemy fighter.

The 3D gaze tracker optionally comprises a light source controllable by controller to radiate a train of light pulses schematically represented by square pulses labeled with a numeral to illuminate objects and people in FOV and by way of example in person . Numeral is also used to refer to the light pulses. Whereas light pulses may comprise light from any portion of the spectrum provided by a suitable light emitting diode LED and or laser usually the light pulses are vision safe near infrared NIR light pulses.

An optical system represented by a lens having an optical axis that coincides with optical axis comprised in 3D gaze tracker collects light from light pulses that is reflected back to the 3D gaze tracker by features of person and directs the collected light to a beam splitter . Light that beam splitter receives from lens is schematically represented by a block arrow and the numeral is used to reference the light.

Beam splitter directs optionally about one half of the light it receives from lens to a photosensor hereinafter also referred to as a range photosensor having light sensitive pixels . Light that beam splitter directs to range photosensor is represented by a block arrow and the numeral is used to reference the light. Photosensor is shuttered open or closed to respectively enable it to register light or prevent it from registering the light. Optionally as schematically shown in shuttering is accomplished by a shutter located between beam splitter and photosensor that is controlled by controller to prevent or enable light directed towards the photosensor by beam splitter to propagate to the photosensor. In some embodiments turning on and turning off the photosensor respectively accomplish shuttering the photosensor open and closed.

Following a predetermined delay from a time at which each light pulse in the train of light pulses is radiated by light source to illuminate person controller controls shutter to shutter open photosensor for a short exposure period. Light that reaches 3D gaze tracker during the exposure period is transmitted by shutter and imaged onto photosensor for registration by pixels in the photosensor. An amount of light registered by a given pixel during the short exposure period is a portion of a total amount of light reflected from the light pulse by a feature imaged on the pixel and directed towards photosensor by beam splitter . The amount is a function of a distance of the feature from 3D gaze tracker .

The amounts of light reflected by features of person from the light pulses in light pulse train that are registered by pixels provides a range image of the person. Controller uses the amounts of light registered by the pixels to determine how long it takes light from light pulses to travel round trip from light source to the person s features respectively imaged on the pixels and back to 3D gaze tracker . The controller determines distances from the 3D gaze tracker of the features from the speed of light and the round trip times.

Light reflected by features of person that is collected by optical lens and not directed by beam splitter to photosensor is directed by the beam splitter to a photosensor hereinafter referred to as a picture photosensor having pixels . A block arrow schematically represents light directed by beam splitter to picture photosensor and the numeral is used to reference the light. Optionally a shutter located between beam splitter and picture photosensor shutters the photosensor. Unlike range photosensor however picture photosensor is shuttered open for relatively long exposure periods sufficiently long so that substantially all the light reflected from a pulse that is collected by 3D gaze tracker and directed by beam splitter to picture photosensor that is light is registered by the picture photosensor. Picture photosensor therefore provides a contrast image hereinafter also referred to as a picture of person similar to conventional pictures acquired by a camera.

Whereas generally a picture of person imaged on picture photosensor includes a picture of the person s head and objects and possibly other people in the near vicinity of the person for convenience of presentation only eyes of person are shown in picture .

Controller processes picture using any of various pattern recognition algorithms to identify and locate an image of an eye in the picture and identify at least one feature of the eye that is useable for determining a direction of gaze vector associated with the eye. The at least one eye feature comprises at least one of the pupil the iris a boundary between the iris and the sclera and a glint generated by light reflected off the eye. An enlarged image of eye imaged by 3D gaze tracker on picture photosensor is schematically shown in an inset in . A glint a pupil an iris sclera and a boundary between the sclera and iris are schematically shown for the eye in the inset. Controller determines a direction of a gaze vector for the eye responsive to the at least one identified eye feature.

By way of example in an embodiment of the invention controller determines gaze vector direction for an eye of person from locations of glint and pupil in the image of an eye in picture . schematically show relationships between features of eye that may be used in an embodiment of the invention for determining gaze direction for person responsive to images of glint and pupil of the eye.

In a camera comprising a lens and a photosensor is shown imaging eye . Functioning of camera in imaging eye simulates imaging of eyes of person by lens and picture photosensor in 3D gaze tracker . Principles of the imaging that apply to camera also apply to imaging of the eyes by 3D gaze tracker .

In center of rotation of eye is assumed by way of example to be located along an optical axis of camera and the eye is assumed to be illuminated by light represented by a block arrow that is coaxial with the optical axis. The light is reflected by surface of eye to generate a glint at an intersection of the optical axis and the eye surface. The glint is imaged on a photosensor with a center of the glint image located at an intersection of optical axis and the photosensor. A circle at intersection schematically represents the image of glint .

In the figure a gaze of eye is assumed to be directed towards camera along optical axis . As a result pupil is aligned with glint and center of the pupil lies on optical axis . Pupil is imaged on photosensor with the center of the pupil image located at intersection and coincident with the center of image of glint . The image of pupil is schematically represented by a filled circle located to the left of circle representing the image of glint .

If magnification of camera is represented by M centers of images and of glint and pupil are separated by a distance M Mdsin . Gaze direction of eye can be determined from a relationship sin Md . In practice images of a pupil and a glint are generally not perfect circles and typically is determined as a distance between centroids of images of the pupil and the glint.

A central image corresponds to an image acquired for eye for the orientation of the eye shown in for which there is no rotation 0 of the eye and glint is aligned with pupil along optical axis . Each of the other eye images is associated with an axis of rotation about which the eye in the image and direction of gaze of the eye is rotated by same angle . The axis of rotation passes though the center of rotation of the eye is parallel to the plane of and is associated with a circle arrow indicating direction of rotation of the eye about the axis. Direction of gaze for each image of the eye relative to the gaze direction of central image along optical axis is schematically indicated by a block arrow . For each different rotation of eye and its associated direction of gaze orientation of glint and pupil is different and the orientation and distance between the centers of the glint and pupil may be used to determine direction of gaze of person .

It is noted that embodiments of the invention are not limited to determining gaze direction in accordance with the discussion above. For example an embodiment may determine gaze direction of a person by processing images of his or her eyes to determine centers or centroids of their irises rather than centers or centroids of the pupils. The embodiment may use a location of the centers or centroids of the irises relative to a centroid or center of a glint to determine gaze direction. In some embodiments direction of gaze of an eye is determined from a distribution in an image of the eye of regions determined to belong to the eye s sclera referenced by numeral in and C relative to regions that are determined to belong to the iris. In some embodiments relative motion of Purkinje reflections in particular the glint and the fourth Purkinje reflection which is a reflection from the back of the eye lens is used to determine direction of gaze.

Influence of head orientation on gaze direction and limitations of determining gaze direction responsive only to relative positions of the pupil of an eye and the glint are illustrated for a simplified set of circumstances in . C.

All the figures show very schematically on a left side of the figure a perspective view of a camera imaging a person to acquire pictures of the person s eye for determining his or her direction of gaze responsive to relative positions of a glint and pupil in the acquired pictures. An arrow in B and C points from the schematic perspective view in the figure to a schematic picture and respectively of the person acquired by camera .

In camera is assumed to be directly in front of person with its optic axis aligned with and pointing at the person s nose. The person is looking slightly upward along a direction indicated by a block arrow . In picture of the person acquired by camera glint is therefore directly below pupil . The relative positions of the glint and pupil indicate the alignment of the person with the camera and the slightly upward direction of the person s gaze.

In the only change in the relative positions of camera and person is that the person s head is rotated clockwise in a direction indicated by a circle arrow about an axis that passes through the center of pupil and the center of glint . As a result the person is looking along a direction indicated by a block arrow that is rotated with respect to the gaze direction indicated by block arrow in . However whereas the gaze direction of the person in is different from that in relative locations of pupil and glint in picture of the person in are the same as those in picture of the person in . The relative locations are the same because the head is rotated about an axis through the pupil and glint.

In the only change in the positions of camera and person relative to their positions in is that the person s head is rotated counterclockwise in a direction indicated by a circle arrow about axis by an angle equal in magnitude but opposite in direction to that of the rotation angle in . A block arrow indicates direction of gaze of person in . Whereas direction of gaze indicated by block arrow is different from gaze directions indicated by block arrows and location of pupil relative to glint in picture is the same as in pictures and .

For the conditions noted in the discussion of the images of glint and pupil in and do not distinguish the gaze directions represented by block arrows and . Without additional information such as orientation of the person s head in glint and pupil acquired by camera by themselves do not disambiguate gaze directions indicated by the block arrows. Images of the person s features for example images of direction of the nose in pictures and may provide additional information useable to determine a direction of the person s head and differentiate the gaze directions.

In an embodiment of the invention controller processes range images acquired by range photosensor and or pictures of person shown in acquired by picture photosensor to determine head orientation of person for use in determining gaze directions of the person.

For example in an embodiment of the invention controller processes range images of person to determine distances from 3D gaze tracker of features hereinafter referred to as fiducial features of the person s head that may advantageously be used to indicate orientation of the head. Fiducial features may include facial features such as the forehead eyes tip of the nose lips and chin and the ears. Distances of the eyes cheekbones or ears of person from the 3D gaze tracker may be used to determine an azimuthal angle of the person s head. An azimuthal angle is an angle about an axis through the person s head that is perpendicular to the ground when the person is standing upright with the head. A tilt angle of the head about an axis through the ears which axis is parallel to the ground when the person is standing upright may be determined responsive to distance from 3D gaze tracker of the person s forehead and chin.

In an embodiment of the invention fiducial features are identified responsive to their images in a picture acquired by picture photosensor . Distances to the fiducial features imaged on pixels in picture photosensor are determined from distances provided by corresponding pixels in range photosensor on which light from the fiducial features is imaged.

To facilitate determining correspondence of pixels in range photosensor with pixels in picture photosensor optionally the photosensors are configured having equal size pixels and are positioned and mounted in 3D gaze tracker so that homologous pixels image same regions in FOV .

In some embodiments of the invention pixels and pixels may have different sizes. For example generally intensity of light in light pulses is limited by cost considerations and heat dissipation requirements for maintaining light source and components of 3D gaze tracker at acceptable operating temperatures. In addition durations of the light pulses and exposure periods provided by shutter are relatively short and may be less than 10 or 20 ns nanoseconds . Amounts of light from light source reflected by person that are available per pixel of range photosensor for acquiring a range image of the person may therefore be limited. As a result for pixels in range photosensor to register quantities of light sufficient to provide signals having acceptable signal to noise ratios SNRs it can be advantageous for the pixels to be relatively large. In an embodiment of the invention therefore pixels which are typically square may advantageously have side dimensions greater than about 10 microns .

On the other hand because exposure periods of picture photosensor may be at least three times longer than exposure periods of range photosensor more light is generally available for imaging a person on picture photosensor than for imaging the person on range photosensor . To resolve distances between a glint and the pupil of an eye pixels in picture photosensor are therefore advantageously relatively small.

In general a maximum change in a distance between a glint and the pupil of an eye per degree of rotation of the eye is about 0.17 mm if only the eye rotates and the glint is localized to the cornea. For example for a 1 of change in angle of direction of a person s gaze distance in relative to optical axis in the figure changes by about 0.17 mm. If 3D gaze tracker images person at a magnification of about 10on picture photosensor to resolve changes of about 2 in responsive to changes in distance between pupil and glint pixels in the picture photosensor are advantageously less than or equal to about 2.5 on a side.

In some embodiments for which pixels and differ in size range and picture photosensors and are aligned so that the larger pixels in one of the photosensors are substantially homologous with tiles of smaller pixels in the other of the photosensors and image same regions of FOV that their homologous tiles image. For example in an embodiment of the invention for which pixels in range photosensor are 10 along a side and pixels in picture photosensor are 2.5 along a side large pixels in range photosensor may be homologous with square tiles comprising 16 small 2.5 pixels in picture photosensor .

In some embodiments of the invention to accommodate different requirements and constraints of imaging on range photosensor and picture photosensor 3D gaze tracker comprises optics for adjusting magnification of imaging on the photosensors independently of each other.

For example an embodiment of the invention may comprise optical elements such as zoom lens optics not shown located between beam splitter and picture photosensor that controller controls to adjust magnification of images of person formed on the picture photosensor. For situations in which person is far from 3D gaze tracker the controller optionally controls the zoom lens optics to zoom in on the person and magnify an image of eyes and distances between glints and pupils in the image. The increased magnification improves accuracy with which distances between glints and pupils and thereby gaze directions are determined. In an embodiment of the invention controller controls magnification of images on picture photosensor responsive to distances to person provided by range images acquired by range photosensor and increases and decreases magnification as images acquired by the range photosensor indicate increase and decrease respectively in distance of person from 3D gaze tracker .

In some embodiments of the invention controller controls intensity of light in light pulses responsive to distance measurements provided by range photosensor . As person moves farther from or closer to 3D gaze tracker the controller respectively increases and decreases intensity of light in light pulses . Adjusting light intensity as a function of distance can improve efficiency with which light from light source is used. For constant intensity of light transmitted by light source SNR of signals provided by pixels for determining distance of features of person is inversely proportional to the square of the distance of the person from 3D gaze tracker . Increasing illumination with distance can compensate at least partially for decrease in intensity of illumination of person as the person moves away from 3D gaze tracker .

In some embodiments of the invention light source is controllable to direct light pulses into a cone hereinafter an illumination cone having a desired direction and solid angle to concentrate light in a limited region in FOV and improve efficiency with which light form the light source is used to illuminate person . In an embodiment of the invention controller controls direction and solid angle of the cone responsive to location of the face and head of person in FOV determined from images acquired by range photosensor and or picture photosensor to concentrate light on the person s face or a portion thereof. By illuminating a limited region of FOV that contains the head of person or a portion of the head such as a portion comprising the eyes intensity of light available for imaging the head and or eyes can be increased and accuracy of gaze vector determination improved.

Area A is an area illuminated by light from light pulses and is assumed to be located at a distance D of person from 3D gaze tracker . Area A determines a solid angle of illumination cone in accordance with an expression A D. A is optionally independent of D and optionally constant for any distance of person D within FOV . A is optionally determined so that in a time it takes 3D gaze tracker to acquire an image of person the person cannot generally move his or her head fast enough from a location along a central axis not shown of the illumination cone to move the head out of illumination cone .

Optionally area A is a square area having a side length equal to about 50 cm. Assuming that images of person are acquired by 3D gaze tracker at a video rate of 30 images per second it requires about 30 ms milliseconds for the 3D gaze tracker to acquire an image. In 30 ms a person moving at 10 km kilometers per hour moves about 10 cm. A 50 cm by 50 cm square illumination area A is therefore generally sufficient for defining a light cone that can be directed to track and provide continuous advantageous illumination of a person moving in FOV .

Any of various devices and methods can be used in practice of an embodiment of the invention to generate and control direction and solid angle of illumination cone . For example the light source may comprise an array of micro mirrors controllable to reflect and direct light provided by the light source into illumination cone . Optionally the light source comprises a lens system for example a zoom lens system having a focal point located at a light emitting element of the light source for controlling the solid angle of illumination cone . In some embodiments of the invention the light source comprises a mechanical system that rotates the light source to direct illumination cone to maintain person within the illumination cone. In some embodiments of the invention different light sources are turned on and off to maintain person within a small angle illumination cone as the person moves around in FOV .

Except for the rare and generally uninteresting circumstance for which a person looks directly at a camera that is imaging the person gaze direction by itself is not sufficient to define a gaze vector for the person and determine therefrom a POR. For most circumstances three spatial coordinates for example x y and z coordinates of a Cartesian coordinate system of an origin for the gaze vector is required to locate the gaze vector in space and determine a POR for the gaze vector.

In an embodiment of the invention range images of a person such as person in FOV of 3D gaze tracker acquired by range photosensor and or pictures of the person provided by picture photosensor are processed by controller to provide 3D spatial coordinates for origins of the person s gaze vectors. In particular distances from 3D gaze tracker determined responsive to range images acquired by range photosensor are used to provide a z coordinate for the origins. A z coordinate is arbitrarily assumed to be a coordinate measured along a z axis of an x y z Cartesian coordinate system for which the z axis is parallel to optical axis of 3D gaze tracker .

Whereas three spatial coordinates for a person s eye can usually be estimated from an image analysis of a picture of the person acquired by a camera such estimates are generally practical for a limited range of distances from the camera and are typically associated with relatively large margins of error. A TOF 3D camera such as provided by range photosensor and associated optics in 3D gaze tracker can provide spatial coordinates and in particular a coordinate for distance from the 3D camera and therefore a z coordinate of the eye relative to the camera having a relatively small margin for error.

At each position and the eye has a gaze vector and respectively. Each gaze vector and extends along a dashed line and respectively that passes from the eye s center of rotation through the center of its pupil . All the gaze vectors make a same inclination angle with the z axis. Gaze vectors and intersect video screen at intersection points and respectively where dashed line and associated with the gaze vectors intersect the video screen. Intersections and represent locations of PORs on video display that are determined from gaze vectors and respectively.

The eye is assumed to actually be located at middle position and intersection an actual POR for gaze vector associated with the eye at the middle position. Positions and represent lower and upper bound estimates respectively for the z coordinate of the eye that might reasonably result from image analysis of a picture that images the eye. A distance Z between positions and represents an uncertainty in the z coordinate of the eye determined from the image analysis. A concomitant uncertainty in where the actual POR is located is represented by a distance of uncertainty DOU between intersection points and on video display .

Z coordinates indicated by witness lines and along the z axis are referred to by numerals and and represent reasonable lower and upper error bounds respectively in the z coordinate of the eye determined by a TOF 3D camera. By way of example witness lines and may represent z coordinate lower and upper error bounds respectively for the TOF 3D camera comprising light source range photosensor and associated optical elements in 3D gaze tracker . Distance Z between z coordinates and represents an uncertainty in a z coordinate for the eye determined by the TOF camera.

If eye were located at it is assumed that its gaze vector not shown would lie along a dashed line that extends from point at an angle with respect to the z axis. The eye would be determined to have a POR located at an intersection point of dashed line with video screen . Similarly if eye were located at position it would be determined to have a POR located at an intersection point of a dashed line with video screen . The uncertainty generates a corresponding DOU which is a distance between intersection points and . DOU provided by the TOF 3D camera is generally smaller than DOU provided by image analysis alone.

By way of numerical example assume that a person s eye is located at a distance of about 50 cm from video display and that the video display has a diagonal dimension of about 60 cm so that a gaze angle for the eye may often be as large as 30 . An uncertainty Z in a z coordinate for the person s eye provided by image analysis may reasonably be assumed to be about 5 cm 2.5 cm . The uncertainty results in an uncertainty DOU in the location of a POR for the eye that may be estimated by the expression DOU Z tan which for Z 5 cm and 30 is equal to about 3 cm.

On the other hand an uncertainty in the z coordinate for the eye determined by a TOF 3D camera may reasonably be assumed equal to about 1 cm 0.5 cm resulting in an uncertainty DOU in the location of the POR for 30 equal to about 0.6 cm. For example assume a TOF 3D camera that illuminates a FOV having a view angle of 45 with light pulses having intensity greater than or equal to about 50 milliwatts and pulse width between 15 and 20 ns that images objects in the FOV on a photosensor comprising 10 10 pixels. The camera can generally provide distance measurements characterized by z coordinate accuracy equal to about 1 cm for distance measurements between about 0.5 m and 3 m.

In an embodiment of the invention to calibrate 3D gaze tracker shown in or 3D gaze tracker and adapt the 3D gaze tracker to differences in eye structure and facial features of different users of the 3D gaze tracker the 3D gaze tracker and display on video display are controlled to acquire calibration images of the users.

In an embodiment acquiring calibration images for a user such as person shown in comprises imaging the person for each of a plurality of different calibration positions in FOV . Different calibration positions differ in distance from gaze tracker and or location in FOV . For each calibration position a range image and a picture of the person are acquired for each of a plurality of different calibration PORs presented on video display to which the person s gaze is directed. Optionally for a plurality of calibration positions the person is requested to maintain his or her head in a fixed position and move only the eyes to direct gaze at different calibration PORs.

The images are processed to provide 3D spatial coordinates for the person s eye features such as the pupil iris sclera glints or Purkinje reflections and or fiducial features for each of the calibration positions and calibration PORs. The gaze vector for a given calibration position and POR is optionally determined by 3D spatial coordinates of the given calibration position and location of the calibration POR on video screen . The eye feature and fiducial feature coordinates and associated gaze vectors are stored as reference data in a suitable data array. In an embodiment of the invention the reference data array is used to determine gaze vectors of person as the person moves around freely in FOV .

In some embodiments of the invention to determine a gaze vector for person at a given time and position in FOV responsive to values in the reference data array 3D gaze tracker acquires a range image and picture of the person at the given time and position. Controller processes the range image and picture to identify and determine spatial coordinates for eye and fiducial features of the person.

To determine head orientation of the person the controller optionally determines an affine transformation of reference coordinates of fiducial features that in accordance with a best fit criterion such as a least squares criterion most closely reproduces the 3D spatial coordinates determined for the fiducial features. A transformation of a head orientation associated with the reference coordinates by the affine transformation provides the head orientation. A gaze vector direction relative to the head orientation of the person is determined responsive to coordinates of the eye features. The head orientation gaze vector direction and a gaze vector origin optionally determined from spatial coordinates of the eye define the gaze vector.

In some embodiments of the invention controller interpolates reference data values responsive to spatial coordinates for eye and fiducial features of the person provided from the range image and picture to determine a gaze vector for person .

In the above discussion 3D gaze trackers are shown comprising a TOF 3D camera which though sharing optical components with a picture camera is separate from the picture camera. Embodiments of the invention are not however limited to 3D gaze trackers having separate range and picture cameras nor to TOF 3D cameras.

In some embodiments of the invention a 3D gaze tracker comprises a single photosensor which is used to acquire both range images of a person and pictures of the person. A shutter that shutters the photosensor is controlled to shutter the photosensor open for exposure periods to acquire range images of the person that have durations which are different from durations of exposure periods that the shutter provides for acquiring pictures of the person.

And in some embodiments of the invention a 3D gaze tracker comprises a stereoscopic 3D imager that determines distances to features of a person in the 3D gaze tracker s FOV responsive to parallax exhibited by images of the features provided by two spatially separated cameras in the system.

It is noted that whereas in the above description a 3D gaze tracker in accordance with an embodiment of the invention is used to interface a person with a computer that interacts with the person via a video display. However embodiments of the invention are not limited to computers and systems that interface with a person via a video screen. For example a smart computerized vending machine may comprise a 3D gaze tracker in accordance with an embodiment of the invention to determine which of a plurality of items the vending machine offers for sale a person wishes to buy. The 3D gaze tracker determines on which of the vending machine products the person s POR settles and in response the vending machine illuminates for example with an internal light source the product to provide feedback to the person as to where the vending machine thinks the POR is located. If the POR remains substantially fixed on the product for a sufficient time after it is illuminated the vending machine dispenses the product after payment from the person is received.

In the description and claims of the present application each of the verbs comprise include and have and conjugates thereof are used to indicate that the object or objects of the verb are not necessarily a complete listing of components elements or parts of the subject or subjects of the verb.

Descriptions of embodiments of the invention in the present application are provided by way of example and are not intended to limit the scope of the invention. The described embodiments comprise different features not all of which are required in all embodiments of the invention. Some embodiments utilize only some of the features or possible combinations of the features. Variations of embodiments of the invention that are described and embodiments of the invention comprising different combinations of features noted in the described embodiments will occur to persons of the art. The scope of the invention is limited only by the claims.

