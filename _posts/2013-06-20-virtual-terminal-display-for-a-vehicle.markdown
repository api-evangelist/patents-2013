---

title: Virtual terminal display for a vehicle
abstract: A system and method for displaying data associated with an embedded system is provided that may include a vehicle data bus, an electronic control unit, and a display unit. The display unit may be configured to render a graphical user interface for the electronic control unit. Data may be exchanged between the electronic control unit and the display unit via the vehicle data bus in partial compliance with a virtual terminal protocol, where full compliance with the virtual terminal protocol requires that the graphical user interface rendered by the display unit be defined and controlled by the electronic control unit. Contrary to the requirement of full compliance with the virtual terminal protocol, the graphical user interface in the display unit may be defined and controlled by the display unit.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09513932&OS=09513932&RS=09513932
owner: Deere & Company
number: 09513932
owner_city: Moline
owner_country: US
publication_date: 20130620
---
This application claims priority to U.S. Provisional Application No. 61 817 572 filed Apr. 30 2013 the entire contents of which are incorporated by reference.

This application relates to embedded systems and in particular to display of data associated with embedded systems.

Vehicles may include one or more embedded systems. An embedded system may include a computer system designed for one or more specific control functions of a system or sub system. The computer system may be embedded as part of the system or sub system. Examples of the system or subsystem include an engine an air conditioner a fertilizer spreader a combine harvester a crop sprayer a tractor any type of farm machinery an automobile any type of vehicle or any other system subsystem or device. The embedded system may include data that is obtained from one or more sensors is a status or a setting of a device or is otherwise related to the embedded system.

In one embodiment a system for displaying data associated with an embedded system is provided that may include a vehicle data bus an electronic control unit and a display unit. The display unit may be configured to render a graphical user interface for the electronic control unit. The display unit may be in communication with the electronic control unit over the vehicle data bus. The electronic control unit may include a first virtual terminal service. The display unit may include a second virtual terminal service and a user interface applet. The second virtual terminal service may communicate via the vehicle data bus with the first virtual terminal service of the electronic control unit in partial compliance with a virtual terminal protocol where full compliance with the virtual terminal protocol may include a requirement that the electronic control unit define and control the graphical user interface rendered by the display unit. Contrary to the requirement for full compliance with the virtual terminal protocol a user interface applet of the display unit may define and control the graphical user interface. The user interface applet may also cause an exchange of data between the first and second virtual terminal services in partial compliance with the virtual terminal protocol.

In one embodiment a computer readable storage medium is provided for displaying data associated with an embedded system. The computer readable storage medium may include instructions executable to store and maintain a data element in a memory of an electronic control unit. The computer readable storage medium may further include instructions executable to transmit changes in the data element to a display unit over a vehicle data bus in partial compliance with a virtual terminal protocol wherein the virtual terminal protocol is for remote definition and control of graphical user interfaces. The computer readable storage medium may also include instructions executable to receive over the vehicle data bus in partial compliance with the virtual terminal protocol user updates to the data element made through a graphical user interface that is defined and controlled by the display unit instead of the electronic control unit where full compliance with the virtual terminal protocol includes a requirement that the graphical user interface be defined and controlled by the electronic control unit.

In one embodiment a method may be provided that displays data associated with an embedded system. An electronic control unit may be communicated with from a display unit via a vehicle data bus in partial compliance with a virtual terminal protocol where full compliance with the virtual terminal protocol requires that a graphical user interface in the display unit be defined and controlled by the electronic control unit. A graphical user interface may be defined by the display unit contrary to the requirement of the virtual terminal protocol that the graphical user interface in the display unit be defined and controlled by the electronic control unit. The graphical user interface may be controlled by the display unit contrary to the requirement of the virtual terminal protocol that the graphical user interface in the display unit be defined and controlled by the electronic control unit.

Further objects and advantages of the present disclosure will be apparent from the following description reference being made to the accompanying drawings.

The vehicle data bus may be a communications network that interconnects components of a vehicle such as an automobile a bus a train an industrial vehicle an agricultural vehicle a ship or an aircraft. Alternatively or in addition the vehicle data bus may be a communications network that interconnects components of an attachment to a vehicle such as a trailer or a vehicle hitchable device. In some examples the vehicle data bus may have specialized features for vehicle control such as assurance of message delivery assured non conflicting messages assured time of delivery relative low cost resilience in the presence of electromagnetic fields redundant routing and or other characteristics. The vehicle data bus may include a specialized communications network that provides such specialized features. The vehicle data bus may be a communications network designed to facilitate microcontrollers and devices to communicate with each other without a host computer. Examples of the vehicle data bus may include a controller area network CAN bus a local interconnect network LIN an ISO 9141 compliant network a J1850 compliant network and an Ethernet network.

The electronic control unit may be any embedded system that controls one or more electrical systems or subsystems in a vehicle or in an attachment to a vehicle. The electronic control unit ECU may be hardware and or a combination of hardware and software. Examples of the electronic control unit ECU may include an Electronic Engine Control Module ECM a Powertrain Control Module PCM a Transmission Control Module TCM a Brake Control Module BCM or EBCM a Central Control Module CCM a Central Timing Module CTM General Electronic Module GEM a Body Control Module BCM and a Suspension Control Module SCM .

The display unit may be any hardware or combination of hardware and software that renders images on a display device . Examples of the display unit may include a computer a monitor a touchscreen device a tablet computing device a mobile device a display controller a digital signal processor a video card or any other device that renders images on the display device . The display unit may include the display device a processor and a memory . Alternatively the display unit may be in communication with but not include the display device . For example the display unit may be electronically coupled to the display device with or without cabling.

The memory of the display unit may be any device for storing and retrieving data or any combination thereof. The memory may include non volatile and or volatile memory such as a random access memory RAM a read only memory ROM an erasable programmable read only memory EPROM or a flash memory. Alternatively or in addition the memory may include an optical magnetic hard drive flash drive or any other form of data storage device.

The processor may be any device that performs logic operations. The processor of the display unit may access data stored in the memory . The processor may also be in communication with additional components such as the display device or a display controller not shown that is electrically coupled to and or in communication with the display device . The processor may include a general processor a central processing unit a graphics processing unit an application specific integrated circuit ASIC a digital signal processor a field programmable gate array FPGA a digital circuit an analog circuit a microcontroller any other type of processor or any combination thereof. The processor may be any device that executes computer executable instructions or computer code embodied in the memory or in other memory to perform features of the display unit .

The display device may be any electro optical device for displaying a graphical user interface. Examples of the display device may include a liquid crystal display LCD an organic light emitting diode OLED display a cathode ray tube CRT display an electro luminescent display a plasma display panel PDP a vacuum florescent display VFD or any other type of display device.

Like the display unit the ECU may include a processor and a memory . The processor of the ECU may be any device that performs logic operations. For example the processor of the ECU may be any component that executes computer executable instructions or computer code embodied in the memory of the ECU to perform features of the ECU . In some examples the processor of the ECU may not have as much processing power as the processor of the display unit . For example the processor of the ECU may include a microcontroller and the processor of the display unit may include multiple central processing units. In other examples the processor of the ECU may have the same or greater processing power than the processor of the display unit .

The memory of the ECU may include an embedded real time application and a virtual terminal service . The memory of the display unit may include a virtual terminal service and a user interface applet .

The embedded real time application of the ECU may be an application that includes logic for controlling and or monitoring one or more electrical systems or subsystems. The user interface applet of the display unit may be an application that defines and controls a graphical user interface for the ECU . For example the embedded real time application may include logic for controlling and or monitoring a climate control system in a vehicle. Conversely the user interface applet of the display unit may include logic that defines and controls a graphical user interface for controlling and or monitoring the climate control system. In other words the embedded real time application of the ECU may include controller logic and the user interface applet of the display unit may include presentation logic.

In some examples the ECU may include one or more electronic control devices that interact with the display unit such that the graphical user interface provides a single interface to a system or device controlled by the multiple electronic control devices included in the ECU . For example a first of the electronic control devices may control the direction of air flow based on input received from the buttons of the graphical user interface while a second one of the electronic control devices may control other aspects of the climate control system based on input received from other controls of the graphical user interface .

Referring back to the virtual terminal service of the display unit and the virtual terminal service of the ECU may each be a component that includes an implementation of a virtual terminal protocol in the display unit and in the ECU respectively. The virtual terminal protocol may be any communications protocol for remote definition and control of graphical user interfaces such as virtual terminals. The virtual terminal protocol may be any past present or future published standard proprietary standard or any other type of standard for establishing and controlling a virtual terminal.

In one example the virtual terminal protocol may be any version of ISO 11783 6 International Organization for Standardization s standard entitled Tractors and machinery for agriculture and forestry Serial control and communications data network Part 6 Virtual terminal . In such an example the virtual terminal service of the ECU may include an implementation of ISO 11783 6 and the virtual terminal service of the display unit may include an implementation of a client of the implementation of ISO 11783 6 that is included in the virtual terminal service of the ECU . In a second example the virtual terminal protocol may be an X Window system protocol such as X Version 11 or any other version of the X Window system protocol. In a third example the virtual terminal protocol may be any version of ITU T International Telecommunications Union Telecommunications Standardization Sector standards for virtual terminal protocol . In a forth example the virtual terminal protocol may be an internet protocol that is based on any version of the Hypertext Transfer Protocol HTTP . In such an example the virtual terminal service of the ECU may operate as a web server and the user interface applet may operate as a browser.

The remote definition and control of graphical user interfaces described in the virtual terminal protocol may include a requirement that a first device transmit to a second device a definition of user interface controls to be displayed in a graphical user interface at the second device. For example ISO 11783 6 requires that an object pool be transmitted from a first device to a second device for full compliance with ISO 11783 6 where the second device is to host a virtual terminal for the first device where the object pool describes each user interface control to be displayed in the virtual terminal.

However in the system to display data associated with the embedded system the user interface applet defines and controls the graphical user interface in accordance with logic included in the user interface applet instead of in accordance with the virtual terminal protocol . For example the user interface applet may read a definition of the graphical user interface from a file on the display unit handle any events generated by a user interacting with the user interface . Nevertheless the virtual terminal services and may communicate data between the ECU and the display unit via the vehicle data bus in accordance with the virtual terminal protocol . Accordingly the virtual terminal services and may communicate data between the ECU and the display unit in partial compliance with the virtual terminal protocol .

According to the ISO 11783 6 standard the ECU is required to transmit an initial pool at initialization time. In addition the initial pool is to include user interface objects that represent all user interface controls to be displayed in a virtual terminal. Each one of the user interface objects has attributes such as a relative location of the respective user interface object on the virtual terminal. The initial pool may optionally include variable objects used to share data between two or more of the user interface objects. A change in one of the variable objects will be reflected in the user interface objects that share the variable object. Use of the variable objects may limit network traffic on the vehicle data bus because only the change in the one variable object needs to be communicated instead of communicating a change to all the user interface objects that share the variable object.

Contrary to the requirements of the ISO 11783 6 standard the system to display data associated with the embedded system may not include any user interface objects in the initial pool transmitted by the virtual terminal service of the ECU to the display unit . Instead the initial pool may describe data elements stored in the memory of the ECU . The data elements may be represented as variable objects in the initial pool . Each of the data elements may include a name or other type of identifier of the data element and a corresponding value of the data element . The data elements may include sensor data mode indicators status indicators control values or any other type of value obtained generated and or used by the ECU . For example the data elements may correspond to a temperature inside a vehicle a temperature outside a vehicle a fan speed setting a target temperature inside of a vehicle a flow rate a text value of a text input field or any other value. The VT service and or the embedded real time application may store and maintain the data elements in a data model in the memory of the ECU . The data model may be any type of database or data structure with which data may be stored and retrieved.

During operation of the system the virtual terminal service of the ECU may transmit the initial pool to the virtual terminal service of the display unit . The initial pool may include an indication that the user interface applet is to define and control the graphical user interface contrary to requirements of the virtual terminal protocol . The indication included in the initial pool may be a predefined variable object a predefined user interface object that is not ultimately displayed in the graphical user interface or any other structure that indicates that the user interface applet and or the display unit is to define and control the graphical user interface . Alternatively the user interface applet may not receive any such indication. Instead the user interface applet may simply operate under an assumption that the user interface applet is to define and control the graphical user interface . Alternatively or in addition the user interface applet and or the display unit may transmit an indication to the electronic control unit that the user interface applet is to define and control the graphical user interface .

During further operation of the system the embedded real time application may update values in the data elements . For example the embedded real time application may update values of the data elements in the data model that include sensor readings. The virtual terminal service of the ECU may transmit the data indicating the new values to the affected data elements to the virtual terminal service of the display unit . The user interface applet may receive the data via the virtual terminal service . The user interface applet may update the graphical user interface to reflect the new values of the affected data elements .

Conversely the user interface applet may receive input from a user via the graphical user interface . For example the user may update text in a text field change a position of a slider in the slider control or press one or more of the buttons and . The user interface applet may determine that the input from the user changes a value of one or more of the data elements . In response to such a determination the user interface applet may transmit an indication of the change in a value of one or more of the data elements via the virtual terminal service to the virtual terminal service of the ECU . The virtual terminal service of the ECU may update the data model and or notify the embedded real time application of the change.

The system may be implemented with additional different or fewer components than illustrated in . illustrates an example of the system that includes additional components not illustrated in . For example the system may include one or more components for communication that is not based on the virtual terminal protocol such as a parameter messaging communication module and a parameter messaging module in the ECU and an embedded proxy service in the display unit . Alternatively or in addition the system may include one or more components related to graphical user interface generation such as a virtual terminal rendering module and a layout manager . In still other examples the system may include one or more additional user interface devices such as a touch screen a mouse a keyboard a key pad a trackball a stylus or any other type of device with which information may be transmitted to the display unit by a user.

With respect to the ECU the parameter messaging communication module may be a module that sends and or receives messages over the vehicle data bus . For example the parameter messaging module in the ECU may be an implementation of ISO DIS 11783 7 International Organization for Standardization s standard entitled Tractors and machinery for agriculture and forestry Serial control and communications data network Part 7 Implement messages application layer . The parameter messaging module in the ECU may handle sending and receiving messages via the parameter messaging communication module on behalf of the embedded real time application .

With respect to the display unit the embedded proxy service may provide an application programming interface API through which the user interface applet may send and or receive messages to the embedded real time application over the vehicle data bus . The embedded proxy service may send messages to and or receive messages from the embedded real time application through the parameter messaging communication module . Alternatively or in addition the embedded proxy service may send the data to and or receive the data from the embedded real time application through the virtual terminal service . The embedded proxy service may provide an API to the user interface applet with which the user interface applet may communicate with the embedded real time application where the embedded proxy service selects an appropriate protocol to perform the communication.

The user interface applet may use components such as the layout manager to generate the graphical user interface . The layout manager may provide an API to applications such as the user interface applet for creating windows dialog boxes the user interface controls and and or other items in the graphical user interface . The layout manager may also generate events in response to a user interacting with the graphical user interface and provide the events to the application controlling the graphical user interface .

The virtual terminal rendering module may be a module that generates a graphical user interface in accordance with the virtual terminal protocol . In some examples in which the display unit includes the virtual terminal rendering module the virtual terminal rendering module may be inactive because the user interface applet generates the graphical user interface . In other examples the virtual terminal rendering module may optionally render a graphical user interface when the embedded real time application indicates to the display unit that the graphical user interface is to be designed and controlled in accordance with the virtual terminal protocol.

Each component of the system may include additional different or fewer components. For example the display unit may include an application framework such as Qt framework Ruby on Rails or Grails which may simplify the development of graphical user interface applications. The application framework may include features such as customizable widgets customizable navigation and or support for cross platform development. The user interface applet may be developed based on the application framework. The user interface applet may be any type of application or applet.

In one example the ECU may transmit the user interface applet via the vehicle data bus based on the virtual terminal protocol or some other protocol. The ECU may transmit the user interface applet to the display unit when the display unit and the ECU first connect or at some other time.

The system may be implemented in many different ways. Each module such as the embedded real time application the virtual terminal services and and the user interface applet may be hardware or a combination of hardware and software. For example each module may include an application specific integrated circuit ASIC a Field Programmable Gate Array FPGA a circuit a digital logic circuit an analog circuit a combination of discrete circuits gates or any other type of hardware or combination thereof. Alternatively or in addition each module may include memory hardware such as a portion of the memory for example that comprises instructions executable with the processor or other processor to implement one or more of the features of the module. When any one of the module includes the portion of the memory that comprises instructions executable with the processor the module may or may not include the processor. In some examples each module may just be the portion of the memory or other physical memory that comprises instructions executable with the processor or other processor to implement the features of the corresponding module without the module including any other hardware. Because each module includes at least some hardware even when the included hardware comprises software each module may be interchangeably referred to as a hardware module such as the virtual terminal service hardware module the user interface applet hardware module and the embedded real time application hardware module.

Although some features are shown stored in computer readable memories e.g. as logic implemented as computer executable instructions or as data structures in memory all or part of the system and its logic and data structures may be stored on distributed across or read from other types of machine readable storage media. The computer readable storage media may include memories hard disks floppy disks CD ROMs or any other type of storage medium or storage media.

The processing capability of the system may be distributed among multiple entities such as among multiple processors and memories optionally including multiple distributed processing systems. Parameters databases and other data structures may be separately stored and managed may be incorporated into a single memory or database may be logically and physically organized in many different ways and may implemented with different types of data structures such as linked lists hash tables or implicit storage mechanisms. Logic such as programs modules or circuitry may be combined or split among multiple programs distributed across several memories and processors and may be implemented in a library such as a shared library e.g. a dynamic link library DLL .

Although the disclosure refers to vehicles the system to display data associated with an embedded system may be for an embedded system that is unrelated to vehicles. For example the embedded system may be a medical device system. Accordingly references to the electronic control unit may refer to an embedded system generally and references to the vehicle data bus may refer more generally to any type of communication bus or network.

The display unit may communicate with the electronic control unit via the vehicle data bus in partial compliance with the virtual terminal protocol where full compliance with the virtual terminal protocol requires that the graphical user interface rendered by the display unit be defined and controlled by the electronic control unit .

The graphical user interface may be defined in accordance with logic included in the display unit contrary to the requirement of the virtual terminal protocol that the graphical user interface be defined and controlled by the electronic control unit .

The graphical user interface may be controlled in accordance with logic included in the display unit contrary to the requirement of the virtual terminal protocol that the graphical user interface be defined and controlled by the electronic control unit

The embedded real time application may include a data module that updates and interprets the data elements of the data model . In some examples the embedded real time application may include a user interface module that is configured to define and control the graphical user interface . The user interface module of the embedded real time application may be unused and or information transmitted by the user interface module over the vehicle data bus may be ignored by the display unit . Alternatively the embedded real time application may not include the user interface module . In some examples a first version of the embedded real time application that includes the user interface module may be replaced by a second version of the embedded real time application that does not include the user interface module .

During operation of the system the embedded real time application may transmit initial data to the display unit over the vehicle data bus . The initial data may identify the data elements in the data model stored in the ECU . Although the virtual terminal protocol may require that the initial data include a definition of the graphical user interface or the user interface controls and the initial data may be transmitted without such information.

As the data elements are changed by the ECU or changes to the data elements are made by the display unit indications of the data changes may be exchanged between the ECU and the display unit via the vehicle data bus in accordance with the virtual terminal protocol .

The display unit may transmit commands that control the ECU . For example in response to the button being pressed via the graphical user interface the user interface applet may send a command to the ECU to turn on an air conditioner. Although the commands may be transmitted by the display unit in response to user interface events such as in response to a button pressed event indicating that the button was pressed the user interface events are handled by the user interface applet . Accordingly the display unit may avoid transmitting user interface events to the ECU .

Network traffic on the vehicle data bus may be reduced by not transmitting the user interface events and or the definition of the graphical user interface or the user interface controls and . The reduced network traffic may effectively increase available bandwidth in the vehicle data bus . Accordingly the system may improve responsiveness bandwidth or capacity for vehicle control or status monitoring such as engine control guidance of the vehicle via a global position system GPS or any other purpose.

Responsiveness of the graphical user interface generated by the display unit may be decoupled from or independent of the ECU . For example if the processing power of the ECU is limited non use or removal of the user interface module from the ECU may increase available performance capacity of the ECU and limit any effect the processing power of the ECU may have on the responsiveness of the graphical user interface .

Accordingly the display unit illustrated in and may generate the graphical user interface that is independent of the processing capabilities the manufacturer and the software included in the ECU or . The richness and responsiveness of the graphical user interface may not be limited by the processing capabilities of the ECU or . In addition the richness and responsiveness of the graphical user interface may be independent of the type of the vehicle that includes the ECU or .

All of the discussion regardless of the particular implementation described is exemplary in nature rather than limiting. For example although selected aspects features or components of the implementations are depicted as being stored in memories all or part of systems and methods consistent with the innovations may be stored on distributed across or read from other computer readable storage media for example secondary storage devices such as hard disks floppy disks and CD ROMs or other forms of ROM or RAM. The computer readable storage media may be non transitory computer readable media which includes CD ROMs volatile or non volatile memory such as ROM and RAM or any other suitable storage device. Moreover the various modules and screen display functionality is but one example of such functionality and any other configurations encompassing similar functionality are possible.

The respective logic software or instructions for implementing the processes methods and or techniques discussed above may be provided on computer readable media or memories or other tangible media such as a cache buffer RAM removable media hard drive other computer readable storage media or any other tangible media or any combination thereof. The tangible media include various types of volatile and nonvolatile storage media. The functions acts or tasks illustrated in the figures or described herein may be executed in response to one or more sets of logic or instructions stored in or on computer readable media. The functions acts or tasks are independent of the particular type of instruction set storage media processor or processing strategy and may be performed by software hardware integrated circuits firmware micro code and the like operating alone or in combination. Likewise processing strategies may include multiprocessing multitasking parallel processing and the like. In one embodiment the instructions are stored on a removable media device for reading by local or remote systems. In other embodiments the logic or instructions are stored in a remote location for transfer through a computer network or over telephone lines. In yet other embodiments the logic or instructions are stored within a given computer central processing unit CPU graphics processing unit GPU or system.

Furthermore although specific components are described above methods systems and articles of manufacture consistent with the innovation may include additional fewer or different components. For example a processor may be implemented as a microprocessor microcontroller application specific integrated circuit ASIC discrete logic or a combination of other type of circuits or logic. Similarly memories may be DRAM SRAM Flash or any other type of memory. Flags data databases tables entities and other data structures may be separately stored and managed may be incorporated into a single memory or database may be distributed or may be logically and physically organized in many different ways. The components may operate independently or be part of a same program or apparatus. The components may be resident on separate hardware such as separate removable circuit boards or share common hardware such as a same memory and processor for implementing instructions from the memory. Programs may be parts of a single program separate programs or distributed across several memories and processors.

To clarify the use of and to hereby provide notice to the public the phrases at least one of . . . and or at least one of . . . or combinations thereof or . . . and or are defined by the Applicant in the broadest sense superseding any other implied definitions hereinbefore or hereinafter unless expressly asserted by the Applicant to the contrary to mean one or more elements selected from the group comprising A B . . . and N. In other words the phrases mean any combination of one or more of the elements A B . . . or N including any one element alone or the one element in combination with one or more of the other elements which may also include in combination additional elements not listed.

While various embodiments of the innovation have been described it will be apparent to those of ordinary skill in the art that many more embodiments and implementations are possible within the scope of the innovation. Accordingly the innovation is not to be restricted except in light of the attached claims and their equivalents.

