---

title: Virtual transportation point of sale
abstract: Embodiments provided herein include techniques for enabling a mobile device to communicate with smart media in a manner that can sidestep the secure element of the mobile deviceâ€”and the costs associated with it. The mobile device can communicate with the smart media using near-field communication (NFC) by creating an encrypted connection with a remote computer while bypassing a secure element of the mobile device. This allows the mobile device to provide point-of-sale (POS) functionality by reading and/or writing to the smart media, without compromising the security of the smart media.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09473295&OS=09473295&RS=09473295
owner: Cubic Corporation
number: 09473295
owner_city: San Diego
owner_country: US
publication_date: 20130712
---
The present application is a continuation in part of U.S. application Ser. No. 13 627 079 filed Sep. 26 2012 entitled PERSONAL POINT OF SALE which claims the benefit under 35 USC 119 e of 61 539 345 filed Sep. 26 2011 entitled MOBILE PHONE SECURE TOP UP . The present application also claims the benefit under 35 USC 119 e of 61 671 584 filed Jul. 13 2012 entitled VIRTUAL TRANSPORTATION POINT OF SALE . Each of these applications is hereby incorporated by reference in its entirety for all purposes.

Many systems such as transit systems in which contactless smart cards or similar media are used conduct transactions by reading from and or writing to the contactless smart cards. To do so a specialized card reader is often needed the card reader being configured to communicate with the contactless smart card using established smart card communication standards. Transit and other systems are however limited in their ability to deploy these card readers which can impede a user s ability to conduct transactions where a card reader is not available.

Embodiments provided herein include techniques for enabling a back end system to communicate with smart media via a third party card reader. This can allow transit parking banking and or other systems to provide point of sale POS functionality by reading and writing to the smart media using third party card readers without compromising the security of the smart media. Such functionality can enable systems to drastically expand the network of card readers available to end users.

An example method of establishing a secure connection with a smart media according to the disclosure includes receiving from a card reader identifying information regarding the smart media and determining with a computer an encryption key based on the identifying information. The method further includes establishing a secure communications link between the computer and the card reader. The secure communications link can be established based on at least a portion of information read from the smart media by the card reader. The method also includes communicating encrypted data to the card reader via the secure communications link to be written on the smart media.

The example method can include one or more of the following features. The smart media system can include a parking system database. The method can include receiving from the card reader information indicative of a payment and communicating to the card reader value data to be written on the smart media. The value data can include data corresponding to at least one of a product a unique reference transaction an updated command a deducted value or validation of a pass. The method can further include receiving from the card reader information indicative of usage of the smart media and debiting the smart media via the card reader a value associated with the usage of the smart media. The smart media can include at least one of a contactless smart card a virtual card residing on an electronic device a credit card a debit card or a radio frequency identification RFID tag. The method can also include receiving from the card reader information indicative of user input. The information indicative of the user input can include at least one of login information payment source information payment amount information or an indication of a product or service for purchase.

An example non transitory computer readable medium according to the disclosure can have instructions embedded thereon enabling a smart media to be used at a card reader. The instructions can include computer executable code for receiving from a card reader identifying information regarding the smart media determining an encryption key based on the identifying information and establishing a secure communications link with the card reader. The secure communications link can be established based on at least a portion of information read from the smart media by the card reader. The instructions can also include computer executable code for communicating encrypted data to the card reader via the secure communications link to be written on the smart media.

The example non transitory computer readable medium can include instructions for implementing one or more of the following features. Communicating a transaction summary to a smart media system. Communicating parking information to the smart media system. Receiving from the card reader information indicative of a payment and communicating to the card reader value data to be written on the smart media the value data corresponding to a value of the payment. Receiving from the card reader information indicative of usage of the smart media and debiting the smart media via the card reader a value associated with the usage of the smart media. Communicating with a smart media comprising at least one of a contactless smart card a virtual card residing on an electronic device a credit card a debit card or a radio frequency identification RFID tag. Receiving from the card reader information indicative of user input. Receiving the information indicative of the user input comprising at least one of login information payment source information payment amount information or an indication of a product or service for purchase.

An example computer server configured to establish a secure connection with a smart media via a card reader according to the disclosure can include a communications interface a processing unit coupled with the communications interface and a memory coupled with the processing unit. The memory can include instructions that when executed by the processing unit cause the computer server to receive from a card reader identifying information regarding the smart media determine an encryption key based on the identifying information and establish via the communications interface a secure communications link with the card reader. The secure communications link can be established based on at least a portion of information read from the smart media by the card reader. The memory can further include instructions for communicating encrypted data to the card reader via the secure communications link to be written on the smart media.

The example computer server can include one or more of the following features. The memory can further include instructions for causing the computer server to communicate a transaction summary to a smart media system. The transaction summary can include information regarding a parking transaction. The memory can further include instructions for causing the computer server to receive from the card reader information indicative of a payment and communicate to the card reader value data to be written on the smart media the value data corresponding to a value of the payment.

Numerous benefits are achieved over conventional techniques. For example a user can update smart media a card reader that is not deployed by the system in which the smart media is used. This not only can improve user experience by increasing a user s ease of access to card readers in which the user can engage in POS transactions but it can also allow a transit agency or other system to reduce the cost of deploying and maintaining its own network of card readers. These and other embodiments along with many of its advantages and features are described in more detail in conjunction with the text below and attached figures.

For the purposes of explanation the ensuing numerous provides specific details are set forth in order to provide a thorough understanding of various embodiments. It will be apparent however to one skilled in the art that various embodiments may be practiced without some of these specific details. For example circuits systems networks processes and other components may be shown as components in block diagram form in order not to obscure the embodiments in unnecessary detail. In other instances known circuits processes algorithms structures and techniques may be shown without unnecessary detail in order to avoid obscuring the embodiments. In other instances well known structures and devices are shown in block diagram form.

Embodiments provided herein include techniques for enabling a mobile device such as mobile phones smart phones tablet computers personal media players laptop computers and other portable electronic devices to securely communicate with smart media including but not limited to smart cards radio frequency identification RFID tags credit cards debit cards tickets and the like. The smart media in any physical form card ticket RFID etc. can include a memory with information such as a unique identifier e.g. card number serial number etc. and or other information such as an electronic purse cash one or more products e.g. passes an origin and or destination validity parameters and or individual tickets depending on the application in which the smart media is used transit transportation event ticketing etc. . The mobile device can communicate with the smart media using near field communication NFC by creating an encrypted connection with a remote computer while bypassing a secure element of the mobile device. This allows the mobile device to read and write to the smart media using standard protocols e.g. ISO 14443 and Internet connectivity via standard networks e.g. Wi Fi 802.11 3G 4G and the like without compromising the security of the smart media.

In some embodiments the ability to read and or write to smart media can include formatting and or initializing the smart media. For example using the techniques described herein below to read and or write to the smart media a mobile device may be utilized to initialize a smart media for use. In so doing the smart media may be formatted and encryption keys may be written to the smart media. Such functionality can facilitate the distribution of such smart media because the smart media would not have to be pre encoded prior to delivery. Moreover such encoding could help ensure the smart media receives the most recent formatting and or security key s .

Because techniques provided herein enable a mobile device to read from and write to smart media the mobile device to function as a personal point of sale POS device to a user. The POS device can conduct point of sale transactions such as the sale of a product or service ticket validation e.g. debit a value from the smart media and or cancel a ticket and the like. For example a user may use the mobile device to both purchase a product and update the smart media accordingly to reflect the purchase.

In this first embodiment the mobile device can include an NFC transceiver with modulation and demodulation circuitry enabling the mobile device to establish a contactless communication link with a contactless smart card via an NFC antenna . The contactless smart card and or other smart media can include an antenna loop and circuitry to store information and communicate via contactless communication link . In some embodiments the contactless smart card and or other smart media can communicate using ISO 14443 standards and may be induction and or battery powered.

The mobile device also can include a secure element . In certain applications the secure element can be utilized to emulate cards RFID tags and or other smart media with card emulation communicating information via the NFC transceiver . The secure element can offer encrypted communications and secure channels to help keep sensitive information e.g. credit card and or other account information personal data etc. from being compromised. However as indicated above it can cost a user to utilize the secure element in this manner. Thus embodiments can bypass the secure element to allow a user to use a contactless smart card and or other smart media and avoid the costs associated with the secure element . As described in more detail below communication with the smart media can still be encrypted by for example a central computer host in which case the mobile device can simply relay encrypted information between the contactless smart card and the central computer host . That said some embodiments may utilize the secure element .

In this first embodiment the mobile device includes other components such as a central processing unit CPU input device s and subscriber identity module SIM card . Among other things the SIM card can be used to identify the mobile device and or a related user to the central computer host . Input device s can be utilized to enable a user to provide input in any of a variety of ways. For example the input device s can include a touch screen button s microphone camera and the like. In some embodiments depending on the model of the mobile device and mobile carrier network the secure element may be present as either embedded in the mobile phone hardware and or firmware embedded in the subscriber identity module SIM card and or included in a separate form factor such as micro SD card.

The CPU can be used to process information and coordinate the functionality of the various components of the mobile device . The CPU can include one or more general purpose processors and or one or more special purpose processors such as digital signal processing chips graphics acceleration processors microprocessors and or the like . The CPU may be configured to execute one or more computer programs stored for example on a computer readable storage medium not shown or memory such as a disk drive a drive array an optical storage device a solid state storage device such as a random access memory RAM and or a read only memory ROM which can be programmable flash updateable and or the like. Such storage devices may be configured to implement any appropriate data stores including without limitation various file systems database structures and or the like. Moreover the computer readable storage medium can be removable incorporated into the mobile device and or communicatively coupled with the mobile device via a communication interface.

The mobile device can communicate with one or more communication networks via one or more antenna s . Such communication networks can include a mobile carrier network e.g. cell phone service via cell phone tower the Internet via Wi Fi access point and or other networks. In the first embodiment of the mobile device is able to gain access to the Internet via either or both of a Wi Fi access point or a mobile carrier network . The Internet in turn provides the mobile device access to the central computer host . In other embodiments other forms of wireless and or wired communication can be utilized depending on desired functionality.

The central computer host can comprise one or more computers configured to manage and or update smart media such as the contactless smart card . To this end it can manage and or access one or more encryption key s associated with each smart media. In some embodiments such as the first embodiment of encryption keys may be stored externally in an encryption engine such as a separate computer and or a specialized encryption hardware.

In this first embodiment the contactless smart card can be written to as follows. A user may bring contactless smart card within a range of the mobile device sufficient to activate the contactless smart card and start an initial communication between the mobile device and the contactless smart card . The user may activate a software application executed by the mobile device before doing so. The software application can for example enable a user to perform various point of sale transactions such as load value to the electronic purse purchase a product and or validate a ticket deliver an electronic benefit e.g. debit a card and or inactivate or cancel a ticket inactivate and or cancel the card deliver a monthly employer transit benefit etc. in which data of the contactless smart card is to be updated accordingly. In some embodiments the software application can perform functions that do not necessarily result in updating a value on the card. For example the software application can perform enforcement actions in which a value and or other information is read from a card to ensure fare compliance. To complete a transaction involving reading and or writing to the contactless smart card the software application can prompt the user to bring contactless smart card within a range of the mobile device e.g. tap the contactless smart card to the mobile device .

During the initial communication the mobile device can read certain unsecure information from the contactless smart card such as a serial card and or account number a name of a user associated with the contactless smart card and the like. The mobile device then can connect with the central computer host via the Internet using a data connection provided by the mobile carrier network Wi Fi access point and or another communication means with the Internet. In some embodiments the user may input identifying information e.g. login ID password etc. using input device s which can be used to establish an authenticated connection with the central computer host .

Using the serial number and or other information provided by the mobile device the central computer host can then establish a secure communications link with the mobile device. Information communicated via the secure communications link can be encrypted using one or more encryption keys associated with the contactless smart card . The encryption may take place in the central computer host using locally stored keys and or take place in the external encryption engine .

The encrypted information from the central computer host can be sent to the contactless smart card and used to update secure information of the contactless smart card . The mobile device may not have encryption keys to decrypt the encrypted information. Instead the mobile device can write to the contactless smart card by transparently passing the encrypted information along to the contactless smart card bypassing the secure element and simply modulating the encrypted information with the NFC transceiver in accordance with related NFC protocols. The contactless smart card can then update secure information stored in memory using the encrypted information. The contactless smart card can then communicate to the mobile device and or central computer host using encrypted and or non encrypted data to indicate whether the memory has been successfully or unsuccessfully updated.

The mobile device and external NFC module can be communicatively coupled using respective input output I O connectors . The mobile device s I O connector can include a generic or specialized interface such as a serial port mini universal serial port USB parallel port and the like and the external NFC module s I O connector can include a port configured to communicate with the mobile device s I O connector .

It will be understood that the embodiments provided in as well as other embodiments detailed herein are provided as non limiting examples that may not include every component for each embodiment. The external NFC module for example may include a processing unit memory and or other subcomponents. The contactless smart card can be replaced with any of a variety of smart media including credit and or debit cards RFID tags and the like. Moreover the smart media may be physically attached to the mobile device and or external NFC module e.g. as a sticker or other item adhesively coupled to the mobile device . The central computer host and or encryption engine may be a cloud based and or networked system of computers. Embodiments may also include using card emulation in addition or as an alternative to smart media and or the use of an external card reader in addition or as an alternative to the external NFC module . A person of ordinary skill in the art will recognize many additions substitutions and other variations.

In this system the contactless smart card can include an RF interface controller memory controller memory and encryption engine . The encryption engine can store generate and or manage one or more encryption key s to help ensure sensitive information stored in memory is not communicated via the RF interface without proper encryption. The memory can store information such as a value counter product and the like that may be used in one or more of a variety of applications such as transit fare event ticketing payment systems etc. Different blocks of memory may be encrypted with different keys and have different access conditions. Furthermore components of the contactless smart card can further ensure that only authorized entities are provided read and or write access to memory .

Mobile device can include memory communication interface point of sale POS application secure device identification and user interface each of which can communicate with be integrated into and or be managed by mobile operating system OS . In some embodiments such as those in which an external NFC module is not utilized the mobile device can include an RF interface . The mobile OS and or other applications can be stored in memory and executed by the mobile device for example upon device startup or upon receiving certain user input and or detecting other triggering events.

The POS application can be an application executed by the mobile device with which the user may initiate various point of sale functions related to the contactless smart card . In a transit context for example such functions can include purchasing a new product or service e.g. a 20 ride pass month long pass etc. and or validating a ticket e.g. debiting a card and canceling a ticket . The POS application can be evoked by user input e.g. pressing a link of a user interface shown on a touchscreen display of the mobile device and or when the mobile device detects the contactless smart card . The POS application also can receive input such as a login ID password and or other identifier to send to a central computer which may be used to identify a user and or establish a secure connection between the mobile device and the central computer .

The operation of POS application may vary depending on desired functionality. For example a user may execute the POS application on a personal mobile device to initiate point of sale functions related to a contactless smart card . Additionally or alternatively the POS application may be used by an agent and or vender to initiate point of sale functions related to the contactless smart card of a customer. In either case and in other scenarios the secure device identification which can be related to a SIM card of can identify the mobile device to the back end system for tracking and or login purposes. In some embodiments the POS application can be a client program that communicatively connects with a server program executed by the central computer . In some embodiments the POS application may be a browser based program that enables users to initiate point of sale functions via a web portal.

The RF interface of the mobile device can include an NFC transceiver and or antenna that enables the mobile device to communicate with the contactless smart card . Additionally or alternatively as shown in NFC and or other wireless functionality may be provided by an external NFC module . In embodiments in which an external NFC module is utilized the mobile device can include an external NFC module library enabling the mobile operating system to communicate with and or manage any of a variety of external NFC modules which can be manufactured by third parties. The external NFC module library can communicate with the external NFC module via an I O expansion module of the mobile device .

In addition to the central computer the back end system can include a variety of additional components depending on desired functionality. Components can include an external encryption engine which may have a master key as indicated one or more terminal computer s connection to a banking system and fare collection software that communicates with a user database and hotlists fare tables and or card database . Terminal computer s can be any of a variety of machines or devices computers vending machines etc. that can provide point of sale and or other functionality related to the transit system. As discussed earlier components shown in may be utilized in a transit system but components may vary depending on application. A person having ordinary skill in the art will recognize many substitutions alterations and variations.

The mobile device can communicate with the back end system via respective communication interfaces and . As indicated previously the central computer can utilize information from the mobile device to identify the mobile device and or a user associated with the mobile device . For example a transit system may be an account based system in which users can create accounts that are maintained by fare collection software and stored in the user database and hotlists . An account based system can enable the transit system to store payment information e.g. credit card information bank account transit benefit account associated with a user in the card database and or user database and hotlists . In this manner the mobile device may not need to communicate payment information to the central computer . Rather the central computer can use payment information stored in the card database and associated with a user in the user database and hotlists and or user database and hotlists to pay for a product or service requested by a user using the mobile device .

The back end system can process payments by utilizing a connection to a banking system . Payments may be processed periodically in batches or may be processed in real or near real time. Moreover the central computer can communicate information to the mobile device indicating whether a payment was successfully made. Depending on the product or service requested by a user via the mobile device the central computer can gather information from the fare tables e.g. to calculate a fare and or card database e.g. to verify and or authenticate a contactless smart card via the fare collection software to calculate an amount of payment and or a value to add deduct or write to the contactless smart card .

What is written to the contactless smart card can vary depending on desired functionality. For example in addition or as an alternative to the account based system described above the system can provide for writing one or more secure token s to the contactless smart card or other smart media without requiring the need for separate fare payment. With regards to bank cards such as credit and or debit cards this information may be written to a scratch pad i.e. unused portion of memory of the bank card thereby enabling the bank card to be utilized as a fare token ticket and or other media depending on the application.

At block the user input is received. User input can include any of a variety of information such as login information payment source information e.g. credit card information debit card information etc. payment amount information an indication of a product or service for purchase and the like. The user input may also indicate and or depend on a desired point of sale transaction the user wishes to make on the mobile device.

At block information is read from the smart media. The information read from the smart media can include a card number serial number and or other identifier which may be used to help identify the smart media to a central computer. The information read from the smart media may be data that is not encrypted and or secured and therefore accessible to the mobile device without the user of encryption keys. The information read from the card may also depend on the input received from the user. For example an indication that a certain point of sale transaction is desired may cause the mobile device to read a serial number from the smart media to provide to a central computer.

At block at least a portion of the information is provided to establish a secure communication link with a remote computer. For example the mobile device may provide a unique manufacturer serial number or other identifier of the smart media to a remote computer. The remote computer can then use a card database encryption engine and or the like to determine one or more encryption key s to use to establish a secure communications link. Other information such as user login information mobile device identification information etc. may also be used to establish the secure communications link.

At block encrypted data is received via the secure communications link. As indicated previously the mobile device may not decrypt the encrypted data. Instead at block the encrypted data may be written to the smart media. The mobile device may do so by simply sending the encrypted data to the smart media with no decryption. In so doing the mobile device may bypass a secure element. Bypassing the secure element may be done by utilizing a specific operating system procedure which may depend on the mobile device.

At block identifying information regarding the smart media is received. The identifying information can include a card number serial number and or other identifier of the smart media. Additionally or alternatively identifying information can include user identification information such as a username password etc. The information can be verified against data in a database or otherwise stored in a memory local to or remote from the computer. Other information such as login information payment source information payment amount information and or an indication of a product or service to purchase may also be received.

At block an encryption key is determined. In some embodiments the encryption key can be determined by utilizing for example a lookup table that associates identifying information regarding the smart media with an encryption key. In some embodiments determining the encryption key may include communicating with an external encryption engine. As indicated previously a master key and or multiple encryption keys may be used. The keys can be diversified based on the serial number of the smart card and the master key.

At block a secure communications link is established. The secure communications link which can be established between the computer and the mobile device can be based on at least a portion of information read from the smart media by the mobile device. For example encryption of the secure communications link can utilize an encryption key associated with an identifier read from the smart media.

At block encrypted data is communicated via the secure communication link. The encrypted data can include any of a variety of data which can be written to the smart media. For example the encrypted data can include a value e.g. a counter monetary value credit value etc. used to track the smart media s usage in a transit system. Additionally or alternatively for ticket validation such encrypted data can include an indication that a ticket related to the smart media has been used and or is otherwise no longer valid.

It should be appreciated that the specific steps illustrated in provide example flowcharts illustrating embodiments of methods for enabling a mobile device to communicate with a smart media. Alternative embodiments may include alterations to the embodiments shown. For example alternative embodiments may include reading and or writing information to and or from the smart media at different times. Furthermore additional features may be added or removed depending on the particular applications. One of ordinary skill in the art would recognize many variations modifications and alternatives.

Not all users may have access to a mobile device having internal or external NFC functionality. However techniques provided herein can apply equally to card readers and or other devices capable of writing to smart media e.g. via NFC and which may be deployed and or maintained by a third party. By leveraging card readers of third party networks a smart media system i.e. a system in which smart media is used such as a transit parking banking system etc. can make products and or services requiring reading and or writing to smart media far more accessible. For example a transit system may negotiate an agreement with a third party network such as a bank parking meter provider and the like to enable transit users to purchase products and services from the transit provider using a network of card readers such as ATMs parking meters etc.

In the embodiment shown in the back end system can establish a secure communications channel to the contactless smart card or other smart media via the card reader . To do so the card reader may access the back end system in a manner similar to the mobile device in the previously described embodiments. This can include for example utilizing specialized hardware and or software to execute an application programming interface API or using generic software such as an Internet browser to establish the secure connection between the contactless smart card and the back end system . In some embodiments once this connection is established the back end system may be able to authenticate with read from and or write to the contactless smart card directly without any decryption by the card reader of the information written to and or read from the contactless smart card which can help preserve the security of the connection when a third party card reader is used.

The card reader can have any of a variety of features depending on desired functionality. For example the card reader can be installed at location that is convenient for patrons such as a bus station bus stop rail station convenience store sports stadium or even a transit vehicle etc. The card reader can include features such as communications ports and software to securely connect to the back end system using wired and or wireless services public and or private networks and or other communications services. Furthermore the card reader can have the ability to handle a variety of contactless smartcard types that are valid in a transit or other system such cards conforming to ISO 14443 standards. Establishing a secure link between the contactless smart card and the back end system can be accomplished using encryption in the back end e.g. external encryption engine and or security incorporated into the card reader itself. The card reader can also include the ability to be powered locally by a number of discrete power sources including AC DC battery solar power rechargeable battery USB and the like which may vary depending on the type of system e.g. parking banking etc. the card reader may be a part of.

The functionality of the card reader to a contactless smart card user may also vary. Users such as transit patrons or retail agents can have the ability to purchase products or services e.g. add value to a transit pass buy one or more transit passes and or initiate receipt of benefits that can he delivered to the contactless smart card . Some embodiments may further utilize an application executable by a mobile device not shown that can perform any of a variety of functions. For example the application can direct a user to a nearby card reader .

A mobile device application can also be used to initiate transactions involving authenticating with reading and or writing to the contactless smart card . For example a mobile device application can be used to connect securely to the back end system and or an Internet web site enabling the user to log in securely e.g. by using a unique username and password connecting anonymously etc. . The application may further be used to store or use a payment credential such as a debit credit card bank account or transit benefit which can be used to fund any purchases made via this service. The application may also be used to initiate the loading of a value to the contactless smart card using an authorized payment credential. The value can be for example a transit pass stored value single or multi ride pass which is valid on a transit agency s system and or other product a unique reference transaction an updated command e.g. to hotlist or unhotlist a contactless smart card a deducted value indicating a debit from the card a monetary value or ride amount and or validation of a pass. The application may additionally or alternatively be used to authenticate the contactless smartcard to be used as a token where the back end system is using account based technology. The back end system can authorize payment for the value. Once payment has been authorized the back end system can record the transaction in a database and add transaction details to an electronic list that can optionally be securely accessed by the card reader and or the mobile phone application. The back end system can optionally send an encrypted record of the transaction which may include a digital signature to the mobile phone that initiated the transaction. And the encrypted record can be stored by the mobile phone application. Alternatively functionality similar to the mobile device application described above may be provided by a browser based application and or software executed by a personal computer or other electronic device that may not be a mobile device.

Once payment has been approved for the transaction the user may be able to update the contactless smartcard by writing the value directly or by writing a unique digitally signed transaction to the contactless smart card by visiting the card reader . In one embodiment for example a user may stand next to the card reader and access an application on a mobile device. The application may be executed automatically upon detection of the card reader QR code NFC tag and or other triggering event. In some embodiments the mobile device application can automatically connect to the card reader using any of a variety of wireless communications protocols and or technologies including Bluetooth 802.11 WiFi NFC and the like. The mobile device application and the card reader can help ensure that the communications is secure by using cryptographic standards. The mobile device application can then send a command to the card reader to update the contactless smart card and instruct the user to tap the contactless smart card to the card reader . The card reader can then verify that there is a valid transaction pending for the card serial number by checking an action list or autoload list comprising information for updating contactless smart cards such as a list of contactless smart cards with corresponding values or instructions to update the contactless smart cards received from the back end system contacting the back end system immediately to get an updated action list or autoload list and or obtaining an encrypted transaction record from the mobile device which can include obtaining a digital signature. The card reader can then authenticate the mobile device transaction record using security features local to the card reader or by authorizing the request via the back end system . If the transaction is authenticated then the card reader can securely update the contactless smart card with the proper value. The contactless smart card can be updated using security either embedded in the card reader or using a security module at the back end system . The contactless smart card can then record the transaction on the mobile device and at the back office server. Recording the transaction can include communicating a transaction summary which can include information regarding the transaction such as a time date value location and the like.

Other embodiments may incorporate additional or alternative features. For example the system can include postal meters contained inside the third party card readers to limit the total of value if the card reader is in an offline scenario. The card reader can contact the back end system periodically to update the stored transactions and reset the postal meter. Some or all of the functionality described in the mobile device application e.g. purchasing a product or service storing transaction data etc. may be available on the card reader itself or a device coupled therewith such as an ATM depending on desired functionality.

In some embodiments the card reader can behave in a more transparent manner. For example encryption and or other security may be handled entirely by the back end system and contactless smart card with no decryption of transaction content occurring on the card reader . In this manner the card reader can essentially function as a transparent device through which the back end system can read from and or write to the contactless smart card .

Although embodiments described herein have been directed primarily toward a transit system the invention is not so limited. For example the back end system can be utilized in a system other than transit that utilizes smart cards and or other smart media. is a block diagram of an embodiment of a system in which the back end system performs transactions for a parking system . Although the back end system and parking system are linked only via the Internet in the illustrated embodiment other embodiments may include additional degrees of integration between the back end system and parking system such as the usage of a private network and or sharing one or more components e.g. databases servers etc. between the two systems. Furthermore embodiments may incorporate the usage of a stand alone back end system that is not integrated with a particular system and or the usage of additional and or alternative systems e.g. parking transit banking etc. that may utilize the back end system to read from and or write to a contactless smart card . In such instances the contactless smart card may be utilized in one or more of the plurality of systems to pay for and or use products and or services offered by the one or more systems.

In the illustrated embodiment the card reader can be one of many third party card readers each incorporated into or otherwise associated with one or more parking meters and connected to the Internet via for example a wireless technology such as a cellular digital modem. In this embodiment a user can purchase a product or service using an interface coupled or connected to the card reader such as a touch screen keypad etc. and or using an application on a mobile device in a manner similar to the embodiments regarding a transit system previously described. The product or service e.g. a parking pass is priced by the card reader and or parking system and a purchase amount is billed to a payment card on file a cloud or virtual wallet such as PayPal V.me Google Wallet MasterPass etc. a linked debit account via ACH a pre tax parking account conforming to all relevant IRS regulations and or other payment source which may be linked to the contactless smart card . For embodiments in which a mobile device application is used location services of the mobile device e.g. GPS can indicate that the user is standing near a participating parking meter and the user can be presented with the location and meter number of collection. The user can then be directed by the mobile device application and or a user interface of the parking meter to tap their contactless card to the card reader coupled to the parking meter. Upon detecting the card the parking meter can establish a connection via the Internet with the back end system which can issue update commands over the connection to write a value e.g. top up to the contactless smart card . The back end system can then post a transaction summary to the parking system e.g. a database of the parking system .

Embodiments can additionally or alternatively allow a user to inserting currency into a parking meter associated with the card reader . For example when a user taps the contactless smart card to the card reader the card reader can establish a communication channel the back end system . If there is no pending load to the contactless smart card the user can be prompted to buy time and or another product or service offered by the parking system and or load value to the contactless smart card . When electing to load value to the contactless smart card or the back end account associated with the contactless smartcard the user can then be prompted to tender coins notes or payment card to the parking meter. If the user chooses to use currency the user can insert coins and or notes into the parking meter which can tabulate the total amount tendered. When the user is finished tendering currency the parking meter can display the total tendered and the user can push a confirmation key and or provide another type of user input that delivers the transactional amount to the back end system . The user can then be directed to present the contactless smart card to the card reader and the back end system can cause the card reader to load a corresponding value the contactless smart card or back end account associated with the contactless smartcard . The back end system can then post an appropriate transaction summary to the parking system and or other system in which the contactless smart card is used. This embodiment can for example enable a user to top up a contactless smart card used in a transit system by making a payment at a parking meter of the parking system . A similar process may be used to top up any other type of smart media such as a virtual card residing on a smart phone e.g. using NFC .

Embodiments may similarly allow a user to load a value to a contactless smart card using a credit or debit card into the meter. For example the user can tap the contactless smart card to a parking meter s card reader . The contactless smart card then establishes a channel to back end system . Seeing no pending load waiting the user can be prompted e.g. by a monitor or other user interface on the parking meter to buy time or load value to e.g. top up the contactless smart card . If the user chooses to load value the user is invited to tender coins notes or payment card. In the case in which a user elects to use a payment card the user can enter the amount desired to purchase or select a corresponding product or service with a fixed amount . The user can then be directed to insert a payment card and the meter s processing system not shown can collect an authorization from the payment network and advise the back end system of the valid tender and amount. The user can then be directed to present the contactless smart card to the reader and the back end system can use the link established via the card reader to update the card or the back end account with the approved amount. The back end system can then post an appropriate transaction summary to the parking system and or other system in which the contactless smart card is used.

Embodiments can also enable a contactless smart card to be used for products or services of the parking system . For example a user can tap the contactless smart card to the card reader which establishes a communication channel to the back end system . If there is no pending load waiting the user can be prompted to buy time or purchase another product or service or load value to the contactless smart card . If the user chooses to buy time the parking meter can walk the user through a standard process of time selection based on zone length of stay. The user can then be presented with the amount due and the tender options including the contactless smart card . When the user selects the contactless card option and presents the contactless smart card by tapping it to the card reader the back end system then debits the contactless smart card via the card reader of the indicated value e.g. by writing a new value to the contactless smart card that reflects a debit of the payment or the back end account associated with the contactless smartcard . The back end system can then post an appropriate transaction summary to the parking system and or other system in which the contactless smart card is used.

By leveraging card readers from any of a variety of card systems transit and other systems can help ensure that patrons have easy access to functions requiring reading from and or writing to contactless smart cards and or other smart media. Additionally or alternatively embodiments may further leverage the connectivity of a user s mobile device to access the back end system to carry out transactions as illustrated in .

In the foregoing description for the purposes of illustration methods were described in a particular order. It should be appreciated that in alternate embodiments the methods may be performed in a different order than that described. It should also be appreciated that the methods described above may be performed by hardware components and or may be embodied in sequences of machine readable instructions such as programming code which may be used to cause a machine such as a general purpose or special purpose processor or logic circuits programmed with the instructions to perform the methods. These machine readable and or computer readable instructions may be stored on one or more non transitory storage mediums such as CD ROMs or other type of optical disks floppy diskettes ROMs RAMs EPROMs EEPROMs magnetic or optical cards flash memory or other types of machine readable storage mediums suitable for storing electronic instructions.

With this understanding embodiments may be implemented by hardware software firmware middleware microcode hardware description languages or any combination thereof. When implemented in software firmware middleware or microcode the program code or code segments to perform the necessary tasks may be stored in a machine readable storage medium such as those described above. A processor s may perform the necessary tasks.

Embodiments provided herein are examples only and is not intended to limit the scope applicability or configuration of the disclosure. Rather the ensuing description of the embodiments will provide those skilled in the art with an enabling description for implementing one or more embodiments. It should be understood that various changes may be made in the function and arrangement of elements without departing from the spirit and scope of the disclosed systems and methods as set forth in the appended claims.

While illustrative and presently preferred embodiments of the disclosed systems methods and devices have been described in detail herein it is to be understood that the inventive concepts may be otherwise variously embodied and employed and that the appended claims are intended to be construed to include such variations except as limited by the prior art.

