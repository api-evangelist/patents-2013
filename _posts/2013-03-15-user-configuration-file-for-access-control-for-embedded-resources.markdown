---

title: User configuration file for access control for embedded resources
abstract: Multimedia content is featured on user pages of an online social network using embed codes that are generated using a configuration file associated with the source ID for the multimedia content and a content ID for the multimedia content. The configuration file, the source ID and the content ID are stored locally by the online social network so that any changes to the embed codes can be made by changing the configuration file associated with the source and regenerating the embed codes. By managing multimedia content in this manner, greater control can be exercised by the online social network over the multimedia content that are featured on its user pages.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09037644&OS=09037644&RS=09037644
owner: Facebook, Inc.
number: 09037644
owner_city: Menlo Park
owner_country: US
publication_date: 20130315
---
This application is a continuation under 35 U.S.C. 120 of U.S. patent application Ser. No. 13 178271 filed Jul. 7 2011 which is a continuation application under 35 U.S.C. 120 of U.S. patent application Ser. No. 12 719 793 filed Mar. 8 2010 which is a continuation under 35 U.S.C. 120 of U.S. patent application Ser. No. 11 682 678 filed Mar. 6 2007 now U.S. Pat. No. 7 680 882 which issued on Mar. 16 2010.

The present invention generally relates to processing of online social network data and more particularly to a method and system for managing multimedia content appearing on user pages of an online social network.

Over the past several years the amount of multimedia content available online has increased dramatically. With access to cheap storage and higher bandwidths photo sharing sites and video sharing sites have become widely used. Sharing personal photos with families and friends through one of these photo sharing sites is now commonplace. The explosion in video sharing is not so much attributable to the sharing of personal video created by the user but the sharing of video created by another person that the user finds particularly funny interesting or informative.

Video sharing is often done through e mail. Typically after viewing a video the user inputs e mail addresses of those persons with whom the user would like to share the video. In response the video sharing site sends an e mail to such persons with a hyperlink to the video. The person receiving the e mail can access the hyperlink to view the video and share the video with other persons in the same manner. Video viewership can increase very rapidly in this manner.

A less intrusive way of sharing video is through a profile or landing page a user maintains at an online social network. When a user finds a video that is particularly funny interesting or informative the user features that video on his or her landing page at the online social network. As people visit the user s landing page at the online social network they can watch the video from the user s landing page although the actual video feed is from a third party source.

As more and more users at online social networks feature videos and other multimedia content on their landing pages the task of managing them has become a challenge to online social networks. One major reason for the difficulty in managing such multimedia content is that much of it are not stored locally by the online social networks but are streamed from servers that host the multimedia content when they are accessed for viewing

The present invention provides a method and system for managing multimedia content that appear on various user pages of an online social network. According to embodiments of the present invention when multimedia content from a third party source is selected by a user to be featured on his or her profile or landing page source ID and content ID corresponding to the featured multimedia content are stored locally in a database managed by the online social network and an embed code for accessing the featured multimedia content is generated using the source ID and the content ID. The source ID is an identifier of the third party source of the multimedia content and is associated with a configuration file that is used in generating the embed code. The content ID is an identifier for the multimedia content used by the third party source and is used as an input parameter when generating the embed code with the configuration file.

By managing multimedia content in accordance with embodiments of the present invention greater control can be exercised by the online social network over the multimedia content that are featured in the landing pages of its users. For example inappropriate content can be filtered easily by searching for the source ID and content ID corresponding to the inappropriate content and flagging them so that the embed code for such content will not be generated. Blocking an entire site is even easier. It just requires a change to the configuration file corresponding to that site so that a web page displaying a message such as Access to the URL .com is not permitted. can be generated in place of the embed code. As another example invalid links that are caused by URL changes implemented by the source of the multimedia content can be fixed easily by making the appropriate correction to such source s configuration file. After the correction is made to the configuration file all embed codes generated using this configuration file will have the correct URL.

A first embodiment of the present invention is directed to a method for generating a web page e.g. a landing page of a user of an online social network that includes a multimedia section in which multimedia content from a third party source can be displayed. The method includes the steps of receiving a user selection of multimedia content of a third party source that is to be added to the multimedia section storing a source ID associated with the third party source storing a content ID associated with the multimedia content generating an embed code for the multimedia content using the source ID and the content ID and generating the web page including the multimedia section using the embed code. The embed code may be generated by executing a configuration file associated with the source ID wherein the configuration file specifies the format of the embed code and the location of the third party source e.g. its URL associated with the source ID.

A second embodiment of the present invention is directed to a method for generating a web page for a user of the online social network e.g. the user s landing page based on third party multimedia content aggregated by other users of the online social network. The method includes the steps of retrieving source IDs and content IDs of multimedia content aggregated by other users of the online social network selecting at least one multimedia content aggregated by the other users of the online social network generating an embed code for the selected multimedia content using its source ID and the content ID and generating the web page using the embed code. The embed code may be generated by executing a configuration file associated with the source ID wherein the configuration file specifies the format of the embed code and the location of the third party source associated with the source ID. The multimedia content may be selected based on its popularity with other users of the online social network who are related to the user of the online social network by N degrees of separation or less.

A third embodiment of the present invention is directed to a web server computer for an online social network. The web server computer includes a local database that stores content for a plurality of users of the online social network the content for each of the users including profile information and pointers to third party multimedia content and a processing unit that is programmed to generate a landing page for each of the users with the profile information and at least one pointer to third party multimedia content. Each of the pointers to third party multimedia content includes a source ID associated with a source of the third party multimedia content and a content ID associated with the third party multimedia content and the landing page includes an embed code for the third party multimedia content that is generated using the source ID and the content ID.

Degrees of separation in a social network are defined relative to an individual. For example in ME s social network H and ME are separated by 2 d s whereas in G s social network H and G are separated by only 1 d s. Accordingly each individual will have their own set of first second and third degree relationships.

As those skilled in the art understand an individual s social network may be extended to include nodes to an Nth degree of separation. As the number of degrees increases beyond three however the number of nodes typically grows at an explosive rate and quickly begins to mirror the ALL set.

The application server manages a user database a relationship database a search database and other databases . The user database contains profile information for each of the user in the online social network managed by the system . The profile information may include among other things a unique user identifier user ID name age gender location hometown references to image files listing of interests attributes and the like. The user database also contains information about groups e.g. organizations school alumni associations family etc. that users have defined. The group information may include among other things a unique group identifier group ID name description of the group and members of the group. The relationship database stores for each user the user IDs of all users with whom the user has a direct relationship i.e. direct friends of the user who are users of the online social network. In addition the contents of the user database are indexed and optimized for search and stored in the search database . The other databases may include a multimedia content database and a database for storing testimonials and various other information commonly stored in online social networks and communities. The user database the relationship database the search database and the other databases are updated to reflect inputs of new user information and edits of existing user information that are made through the remote computers .

The application server also manages the information exchange requests that it receives from the remote computers over the Internet. The graph servers receive a query from the application server process the query and return the query results to the application server . The graph servers manage a representation of the social network for all users in the member database. The graph servers have a dedicated memory device such as a random access memory RAM in which an adjacency list that indicates all first degree relationships in the social network is stored. The graph servers respond to requests from application server to identify relationships and the degree of separation between users of the online social network. The application server is further configured to receive data feeds e.g. RSS feeds from a third party server through an application programming interface API that third parties may use to send data to the application server for storage in one of the databases managed by the application server .

In the embodiments of the present invention described below users are respectively operating the remote computers that are programmed to execute web browser programs and access the web pages managed by the application server using the web browser programs. The web pages that are displayed to a user are transmitted from the application server to that user s remote computer and processed by the web browser program stored in that user s remote computer for display through the monitor of that user s remote computer.

The web page shown in includes multiple sections that contain different categories of content associated with the user. The user s profile information is provided in section . A list of the user s friends in the online social network and hyperlinks to their landing pages are provided in section . Section displays the user s blog. In this example the user is maintaining a blog at an external web site e.g. Xanga.com and the content of his or her blog is supplied from the external web site using an RSS feed. In a similar manner the content of the user s pictures that is displayed in section is supplied from an external web site e.g. Flickr using an RSS feed and the content of the user s videos that is displayed in section is supplied from an external web site e.g. YouTube using an RSS feed.

As a way to minimize the number of times an external web site is accessed for the necessary RSS feeds all RSS feeds from external web sites are stored in a cache storage unit . All RSS feeds are also assigned a minimum lifetime and a maximum lifetime. When a landing page of a user is accessed and the landing page contains sections that rely on RSS feeds the lifetime of each such RSS feed is checked. If it is below its minimum lifetime the last cached version of the RSS feed is accessed. If it has exceeded the minimum lifetime a query is issued to the external web site for the latest information. On a global basis whenever an RSS feed reaches its maximum lifetime a query is issued to the external web site for the latest information.

The query that is issued to an external web site for content associated with a user includes the user ID and password of that user as proof that access to the user s account maintained by the external web site is authorized. The user ID and password are provided by the user when the user sets up his or her landing page to retrieve content from external web sites through RSS feeds. The issued query is kept hidden at the user level and preferably encoded or encrypted so that the user ID and password contained in the query can be kept confidential.

The embed codes that enable direct streaming from the external video sites are typically made available by the external video sites for pasting into the HTML file corresponding to a user s landing page such as the one shown in . The process may even be automated so that the embed code is automatically pasted into the HTML file corresponding to a user s landing page. This would occur for example when a user visits an external video site views a video at the external video site and indicates that he or she would like to add the video to his or her landing page at an online social network.

In the embodiments of the present invention embed codes for video files are generated from a source ID which identifies the external source of the video file and a content ID which is an identifier of the video file used by the external source using configuration files having the following general format 

The parameter ID signifies a variable field into which the content ID is inserted. The source ID points to the configuration file to use because different configuration files are provided for different external video sites. For example each of videosite1 videosite2 and videosite3 has its own configuration file as shown below 

As an example if the source ID videosite3 and the content ID 51515 for a video file the embed code corresponding to that video file would be generated as 

In step the user navigates to an external video site and selects a video for viewing. In response to this selection the video is streamed to the user s computer and displayed to the user step . The user s display includes a hyperlink Post to Friendster. This hyperlink permits the user to feature this video on the user s landing page at the online social network Friendster. In step the user selects the hyperlink Post to Friendster. In response to this selection the user is prompted in step for user ID and password corresponding to the user s account at the online social network. Upon submission of this information the external video site transmits this information along with the particulars of the video file such as the source ID which identifies the external video site that is hosting the video file and the content ID which is an identifier of the video file used by the external video site to the online social network and various other data step . Steps and are carried out using the API provided by the online social network.

In step the online social network authenticates the user ID against the password using the information stored in its user database. If the user ID is authenticated i.e. the password matches the password for the user ID stored in the user database the particulars of the video file are stored in the multimedia content database of the online social network along with the user ID step . The following table conceptually illustrates the arrangement of the data that is stored in the multimedia content database.

In the table shown above each row represents data associated with a single video file. Source ID indicates the external video site that is hosting this video file and identifies the configuration file to be used in generating the embed code for this video file. Content ID indicates the unique ID used by the external video site to identify this video file and is used as an input parameter when generating the embed code for this video file. Thumbnail indicates the memory location of the thumbnail image corresponding to this video file. One or more entries under Tags indicate descriptive keywords associated with this video file. The entry under Description provides a brief description of the content of this video file. The particulars of the video file that are transmitted from the external video site to the online social network are controlled by the API .

When a landing page of a user such as the one shown in is generated it is generated from an HTML file corresponding to the landing page that is stored in the cache storage unit . This HTML file includes embed codes corresponding to any third party video that is featured by the user in section . In step the embed codes corresponding to the featured third party videos are generated and inserted into the HTML file corresponding to user s landing page. During this generation step the multimedia content database is checked for video file entries associated with the user that has an update flag set i.e. equal to 1 . For all video file entries that meet these conditions the embed code corresponding to such entries will be generated using a configuration file identified by that entry s source ID and inserted into the HTML file corresponding to the user s landing page. After the generation step is carried out for the user the update flag of all video file entries of the user is set to 0.

The generation step may be carried out on the fly each time the landing page of the user is requested. It is however preferable to carry out the generation step according to a predetermined schedule so as to conserve computational resources. For example the generation step is not carried out when none of the video file entries associated with the user s landing page has an update flag that is equal to 1 but is carried out when there is at least one video file entry with an update flag that is equal to 1.

When a user selects a third party video for viewing from a web page within the online social network e.g. a landing page of another user or a video search page the user may watch the third party video at the web page within the online social network without navigating to the third party s web site. When the user does this a hyperlink Add to Profile appears alongside the video display. This hyperlink permits the user to feature the video he or she is watching on the user s landing page. In response to this selection the source ID the content ID and the particulars of this video file are stored in the multimedia content database of the online social network along with the user ID of this user.

In the simplest implementation a single video is featured in section and this video represents the video that is the most popular with first degree friends of the user i.e. those users who are one degree of separation away . The popularity may be based on their adoption most often added to a landing page or their viewership most often viewed or a combination of the two. When two or more videos are featured in section the videos may be featured in the order of their rank with only the top N videos featured where N can be any plural integer .

In an alternative implementation a video s popularity with all users of the online social network up to a predetermined degree of separation e.g. 2 3 or N is considered. In this implementation the video s popularity with first degree friends may be weighted more than the video s popularity with second degree friends and the video s popularity with second degree friends may be weighted more than the video s popularity with third degree friends and so forth.

By managing multimedia content in accordance with embodiments of the present invention described above greater control can be exercised by the online social network over the multimedia content that are featured in the landing pages of its users. For example inappropriate multimedia content can be filtered easily by searching for the source ID and content ID corresponding to the inappropriate multimedia content in the multimedia content database and flagging them so that the next time a user page that features such multimedia content is accessed the embed code for such multimedia content will not be inserted into that user page.

As another example an entire site can be blocked. Assuming the source ID for the site to be blocked is videosite4 this can be done by modifying the configuration file associated with that site from 

Invalid links that are caused by URL changes implemented by the source of the multimedia content also can be fixed easily with the embodiments of the present invention. For example if the source of the multimedia content source ID videosite5 changes the URL for accessing its videos from

After this change is made to the configuration file all video file entries having source ID videosite5 will have their update flags set to 1 so as to cause embed codes for all multimedia content from videosite5 to be regenerated when user pages that feature such multimedia content is subsequently accessed.

In the embodiments of the present invention described above RSS feeds are described as the mechanism for transmitting content between the third party servers and the server computer of the online social network. Other types of web feeds may be employed with the present invention. Some of these examples include atom feeds and feeds based on the SOAP protocol. Also the embed codes shown above are HTML embed codes. The present invention is however not limited to any particular type of embed codes and may be practiced with embed codes for any markup language for creation of web pages.

In addition in the embodiments of the present invention described above video content that includes video and audio is provided as an example of the multimedia content. In general multimedia is media that uses multiple forms of information content and multimedia content is media content that includes multiple forms of information content.

While particular embodiments according to the invention have been illustrated and described above those skilled in the art understand that the invention can take a variety of forms and embodiments within the scope of the appended claims.

