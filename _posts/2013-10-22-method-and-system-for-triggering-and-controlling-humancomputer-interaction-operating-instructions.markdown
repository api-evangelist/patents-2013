---

title: Method and system for triggering and controlling human-computer interaction operating instructions
abstract: A method and system for triggering and controlling human-computer interaction operating instructions are described. The method pre-stores a mapping relationship between a display mode of light source in photograph image frame and a human-machine interaction instruction. While triggering and controlling the system, the method includes the steps of: acquiring the photograph image frame generated by a photographing device; detecting light source in photograph image frame for analyzing display mode of the detected light source in photograph image frame; determining human-computer interaction instruction corresponding to display mode of the detected light source in photograph image frame for triggering human-computer interaction instruction based on the pre-stored mapping relationship. The system comprises a mapping relationship database, a photograph-acquiring module, a light source detecting module, an analyzing module and an instruction-identifying module. The present invention allows the user to implement the non-contact type of human-computer interactions with the high precision.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09317135&OS=09317135&RS=09317135
owner: TENCENT TECHNOLOGY (SHENZHEN) COMPANY LIMITED
number: 09317135
owner_city: Shenzhen
owner_country: CN
publication_date: 20131022
---
This application is a continuation of International Application No. PCT CN2012 085422 filed on Nov. 28 2012 which claims priority to Chinese patent application No. 201110383741.9 filed on Nov. 28 2011 the content of which are incorporated herein by reference in their entirety.

The present invention relates to a human computer interaction technique and more particularly to a method and system for triggering and controlling a human computer interaction operating instruction.

In the application field of human computer interaction techniques the computing apparatus utilizes input output devices to implement the human computer interaction operation. While employing the human computer interaction the computing device provides a large amount of messages and prompts for the user by way of output device or display unit and thus the user may input the related information and operation instructions corresponding to the messages and prompts into the computing device.

Basically the input output devices used in the human computer interaction operation for the computing device include keyboard mouse touch panel or multi touch panel. Although the input output devices for the human computer interaction operation are widely used the usability of these input output devices is not user friendly enough and thus cannot implement the non contact type of human computer interactions. For example while operating the touch panel the user fingers the screen of the display unit which results in sanitation issues and many fingerprints are formed on the screen. Regarding to the application of the mid range or long range distance between the user and display unit such as a large screen or the projecting apparatus it is usually a long distance from the narrator to the computing device. When the narrator operates the computing device the narrator frequently has to approach the computing device to use the mouse and keyboard so that the operation of mid range or long range distance is quite inconvenient for the narrator.

Even if a gesture with a non contact type is used in human computer interaction operation however the interference immunity of the gesture is weakened and the identification precision of human computer interaction operation cannot be effectively increased. Consequently there is a need to develop a novel human computer interaction technique.

One objective of the present invention is to provide a method and system for triggering and controlling human computer interaction operating instructions to implement the non contact type of human computer interactions with the high precision.

According to the above objective the present invention sets forth a method and system for triggering and controlling human computer interaction operating instructions.

In one preferred embodiment of the present invention the method for triggering and controlling a human computer interaction operating instruction comprises the steps of 

pre storing a mapping relationship between a display mode of a light source in at least one photograph image frame and the human machine interaction instruction 

detecting the light source in the photograph image frame for analyzing the display mode of the detected light source in the photograph image frame and

determining the human computer interaction instruction corresponding to the display mode of the detected light source in the photograph image frame for triggering the human computer interaction instruction based on the pre stored mapping relationship.

In one preferred embodiment further comprises the step of attenuating a background image region of the photograph image frame for eliminating an image information irrelative to the light source and for emphasizing the light source to acquire the emphasized light source in the photograph image frame.

In one preferred embodiment the at least one photograph image frame comprises a plurality of photograph image frames and during the step of detecting the light source the light source in each of the photograph image frames is continuously detected for determining the light source with a invariant position in the photograph image frames to remove the light source with the invariant position from the photograph image frames.

In one preferred embodiment the step of pre storing the mapping relationship between a display mode of a light source in at least one photograph image frame and the human machine interaction instruction is a step of pre storing a mapping relation to an encoding transformation comprising the steps of 

pre storing the mapping relation between the display mode of the light source in the photograph image frame and an encoding and

In one preferred embodiment during the step of determining the human computer interaction instruction corresponding to the display mode of the detected light source in the photograph image frame further comprising the steps of determining the encoding corresponding to the display mode of the detected light source in the photograph image frame and determining the human computer interaction instruction corresponding to the encoding.

In another preferred embodiment of the present invention the system for triggering and controlling a human computer interaction operating instruction comprises 

a mapping relationship database pre storing a mapping relationship between a display mode of a light source in at least one photograph image frame and the human machine interaction instruction 

a photograph acquiring module acquiring the photograph image frame generated by a photographing device 

an analyzing module analyzing the display mode of the detected light source in the photograph image frame and

an instruction identifying module determining the human computer interaction instruction corresponding to the display mode of the detected light source in the photograph image frame for triggering the human computer interaction instruction based on the pre stored mapping relationship.

The present invention provides a method and system for triggering and controlling human computer interaction operating instructions employs a light source to perform a human computer interaction by detecting and identifying the display mode of the light source in the photograph image frame for determining the human computer interaction instruction corresponding to the display mode. Thus on one hand the present invention accomplishes the non contact type of human computer interactions. On the other hand since the light source in the photograph image frame is detectable and acquirable advantageously to be preferably immune from the interference therefore the present invention allows the user to implement the non contact type of human computer interactions with the high precision.

In one embodiment of the present invention the method pre stores a mapping relationship between a display mode of light source in photograph image frame and a human machine interaction instruction. While triggering and controlling the system the method includes the steps of acquiring the photograph image frame generated by a photographing device detecting light source in photograph image frame for analyzing display mode of the detected light source in photograph image frame determining human computer interaction instruction corresponding to display mode of the detected light source in photograph image frame for triggering human computer interaction instruction based on the pre stored mapping relationship.

In a visible region of the photographing device is a photograph image frame generated by the photographing device . The photographing device is capable of completely acquiring the visible region by automatic and or manual operation and clearly focusing the visible region . Within the visible region the user holds a light emitting device termed as the light source to perform the interaction operating procedure. In one embodiment the light source may be a flashlight a light of cellular phone and or the light emitting device with the functions of a switch mechanism and or a color selection mode. The image of light source image in the photograph image frame of the photographing device is photographed wherein the body of user and the background image are removed during the subsequent process.

When the photographing device completely acquires the visible region and clearly focuses the visible region the triggering controlling system of the data processing apparatus is activated.

In one embodiment the data processing apparatus may be a computing system with the functions of processing and calculation to form a procedure operation scheme. For example the computing system is selected from one group consisting of personal computer notebook computer tablet computer hand held devices e.g. smart phone with calculation capability robot with calculation capability television set with data processing capability set top box and the combinations.

In one embodiment the triggering controlling system operated in the data processing apparatus is a software program for acquiring the photograph image frame in the visible region by way of the photographing device for analyzing and calculating the photograph image frame so as to detect the display mode of the light source in the photograph image frame. Based on the pre stored mapping relationship between a display mode of a light source in at least one photograph image frame and the human machine interaction instruction the present invention determines the human computer interaction instruction corresponding to the display mode of the detected light source in the photograph image frame for triggering the human computer interaction instruction.

The method and system for triggering and controlling human computer interaction operating instructions maps the display mode of light source to a plurality of human computer interaction operating instructions for generating either an operation instruction with single touch by way of one light source or an operation instruction with multi touch by way of a plurality of light sources. In one case the operating instructions may be computer operation instructions and remote control instructions of television set.

The present invention pre stores a mapping relationship between a display mode of a light source in at least one photograph image frame and the human machine interaction instruction. In one embodiment the display mode of the light source in the photograph image frames is a predetermined region on which the light source is disposed a movement trace of the light source a color of the light source and or a flashing pulse of the light source within the photograph image frame.

In one case while the system stores a mapping relationship between a display mode of a light source in a photograph image frame and the human machine interaction instruction a direct mapping relationship between a display mode of a light source in a photograph image frame and the human machine interaction instruction is directly pre stored. In this case a mapping database represents the display mode of a light source in at least one photograph image frame. After detecting and identifying the display mode of the light source during the triggering controlling step the display mode is compared with that stored in the mapping database for acquiring the human machine interaction instruction.

In another case the present invention employs two mapping database including an encoding database and an encoding instruction mapping database. The encoding database pre stores the mapping relation between the display mode of the light source in the photograph image frame and an encoding. The encoding instruction mapping database pre stores the mapping relation between the encoding and the human machine interaction instruction. After detecting and identifying the display mode of the light source during the triggering controlling step the display mode is compared with that stored in the encoding database for acquiring the encoding. Then the acquired encoding is compared with that stored in the encoding instruction mapping database for acquiring the human machine interaction instruction. In this case the encoding database is fixed and disposed in the triggering controlling system and the human machine interaction instruction corresponding to the encoding in the encoding instruction mapping database can be modified.

Before triggering and controlling the video player e.g. computer with video player television set and set top box by detecting and identifying the light source the photographing device is aligned to and focused on the light source held by the user to clearly photograph the photograph image frame. The method for triggering and controlling a human computer interaction operating instruction includes the following steps.

In step S the photograph image frame e.g. visible region generated by a photographing device is acquired via the photographing port .

In step S the light source in the photograph image frame photographed by photographing device is detected and identified.

In S the human computer interaction instruction corresponding to the display mode of the detected light source in the photograph image frame is determined for triggering the human computer interaction instruction based on the pre stored mapping relationship.

In one embodiment of the present invention the display mode of the light source in the photograph image frames is a predetermined region on which the light source is disposed a movement trace of the light source a color of the light source and or a flashing pulse of the light source within the photograph image frame. The analyzing and determining methods for a mapping relationship between display mode of light source and the human machine interaction instruction with respect to each of the display modes are described in the following.

First the display mode of the light source in the photograph image frames is a predetermined region on which the light source is disposed within the photograph image frames. In this case a mapping relationship between the predetermined region of a light source in at least one photograph image frame and the human machine interaction instruction is pre stored. The system for triggering and controlling a human computer interaction operating instruction having an encoding transformation for pre storing the mapping relationship utilizes an encoding database and an encoding instruction mapping database.

For an example of remote control operation it shows that the display mode of the light source in the photograph image frames is a predetermined region on which the light source is disposed within the photograph image frames wherein Table 1 is encoding database and Table 2 is an encoding instruction mapping database.

In step S the display mode of the light source in the photograph image frame is a predetermined region on which the light source is disposed within the photograph image frames. While analyzing the display mode of the detected light source in the photograph image frame the method further includes the steps of dividing the photograph image frame into a plurality of image regions computing a coordinate of the detected light source in the photograph image frame and determining where the detected light source in the photograph image frame is disposed in one of the image regions. In one embodiment the coordinate of the average center of the light source in the visible region can be calculated by application programming interface API associated with coordinate computation. Afterward the predetermined region e.g. left center of the light source in the photograph image frame is determined based on the region parameter in the encoding database. In step S the predetermined region e.g. left center of the light source is compared with the encoding e.g. D in the encoding database. Then the encoding e.g. D is compared with the human computer interaction operating instruction in the encoding instruction mapping database e.g. Volume decrement to decrease the volume.

According to the above mentioned processing steps the software program executed in the television set and set top box easily makes a triggering controlling decision based on the position of the light source in the photograph image frame detected by the photographing device . For example the cellular phone serves as the light source for conveniently replacing the remote controller of the television set and set top box.

Second the display mode of the light source in the photograph image frames is a movement trace of the light source within the photograph image frames. A mapping relationship between a movement trace of a light source in at least one photograph image frame and the human machine interaction instruction is pre stored which is similar to Tables 1 and 2. is a schematic view of the trace of light source corresponding to the human computer interaction operating instruction in the photograph image frame according to one embodiment of the present invention.

In step S and S the display mode of the light source in the photograph image frames is a movement trace of the light source within the photograph image frames. While analyzing the display mode of the detected light source in the photograph image frame further comprises the steps of constructing a grid coordinate system in the photograph image frame for continuously identifying the light source in each of the photograph image frames and computing a plurality of grid coordinates of the grid coordinate system of the light source in the photograph image frames for generating the grid coordinates of the movement trace of the light source and determining the movement trace of the light source within the photograph image frames by calculating a plurality of grids associated with the grid coordinates along a direction formed by the grids.

In step S the human computer interaction instruction corresponding to the movement trace of the light source in the photograph image frame is determined based on the pre stored mapping relationship between the movement trace and the operating instructions. As shown in the trace encoding indicates that the movement trace of the light source passes through three grids downward and the mapping instruction corresponding to the trace encoding indicates the scroll of the content.

 2 The movement trace description represents a grid coordinate sequence including a plurality of grid coordinates and these grid coordinates can be depicted in the grids for form a standard movement trace.

The upper left of the photograph image frame formed by the photographing device is defined as the origin. For example two movement traces indicates a first grid coordinate sequence M and a second grid coordinate sequence M . The first grid coordinate sequence M is composed of coordinates 1 1 1 2 1 3 and 1 4 representing four continuous grids from top to bottom which is a standard movement trace. The second grid coordinate sequence M is composed of coordinates 1 1 1 2 1 3 and 2 3 representing an L type.

The detecting window is defined as four coordinates. The software program stores four coordinates of the movement trace of the light source to form a grid coordinate sequence. For example a grid coordinate sequence including coordinates 5 5 5 6 5 7 and 5 6 wherein coordinate 5 5 is transformed into coordinate 1 1 and the rest of coordinates are transformed into coordinates 1 2 1 3 and 1 2 . The coordinates 1 1 1 2 1 3 and 1 2 is compared with the first grid coordinate sequence M and a second grid coordinate sequence M . If it identical to M or M the grid coordinate sequence is regarded as M or M.

Third the display mode of the light source in the photograph image frame is a color of the light source within the photograph image frame. A mapping relationship between a color of a light source in at least one photograph image frame and the human machine interaction instruction is pre stored which is similar to Tables 1 and 2.

In step S while analyzing the display mode of the detected light source in the photograph image frame further comprises the steps of computing a coordinate of the detected light source in the photograph image frame and acquiring a color parameter e.g. three primary colors red R green G and blue B in the coordinate of the light source from the photograph image frame by using application programming interface API . In step S if the color parameter of the three primary colors red R green G and blue B of the light source is the range of the color encoding of primary colors red R green G and blue B to be determined the human computer interaction operating instruction corresponding to the determined color parameter.

Fourthly the display mode of the light source in the photograph image frame is a flashing pulse of the light source within the photograph image frame. A mapping relationship between a flashing pulse of a light source in at least one photograph image frame and the human machine interaction instruction is pre stored which is similar to Tables 1 and 2.

In step S the display mode of the light source in the photograph image frame is a flashing pulse of the light source within the photograph image frame. While analyzing the display mode of the detected light source in the photograph image frame further comprises the steps of continuously detecting the light source in each of the photograph image frames for determining the flashing pulse in the continuous photograph image frames during a predetermined detected time interval. In step S the flashing pulse is compared with mapping relationship between a flashing pulse of a light source in at least one photograph image frame and the human machine interaction instruction. If the flashing pulse is matched the human machine interaction instruction is triggered.

The mapping relationship database pre stores a mapping relationship between a display mode of a light source in at least one photograph image frame and the human machine interaction instruction. The photograph acquiring module acquires the photograph image frame generated by a photographing device. The light source detecting module detects the light source in the photograph image frame. The analyzing module analyzes the display mode of the detected light source in the photograph image frame. The instruction identifying module determines the human computer interaction instruction corresponding to the display mode of the detected light source in the photograph image frame for triggering the human computer interaction instruction based on the pre stored mapping relationship.

Further is a schematic view of the light source detecting module according to one embodiment of the present invention. The light source detecting module further includes an image processing module an acquiring module and an interference source elimination module .

The image processing module attenuates a background image region of the photograph image frame for eliminating the image information irrelative to the light source and for emphasizing the light source. The acquiring module acquires the emphasized light source in the photograph image frame from the image processing module . The interference source elimination module continuously detecting the light source in each of the photograph image frames from the image processing module and the acquiring module for determining the light source with an invariant position in the photograph image frames to remove the light source with the invariant position from the photograph image frames.

In one embodiment of the present invention the display mode of the light source in the photograph image frames is a predetermined region on which the light source is disposed a movement trace of the light source a color of the light source and or a flashing pulse of the light source within the photograph image frame. The analyzing module includes a region analyzing module a trace analyzing module a color analyzing module and a flashing pulse analyzing module

The region analyzing module divides the photograph image frame into a plurality of image regions computes a coordinate of the detected light source in the photograph image frame and determines where the detected light source in the photograph image frame is disposed in one of the image regions. The instruction identifying module inquire the region encoding database and the encoding instruction mapping database for acquiring corresponding instructions to perform triggering controlling steps based on the determination where the detected light source in the photograph image frame is disposed in one of the image regions.

The light source detecting module constructs a grid coordinate system in the photograph image frame for continuously identifying the light source in each of the photograph image frames and computes a plurality of grid coordinates of the grid coordinate system of the light source in the photograph image frames for generating the grid coordinates of the movement trace of the light source. The trace analyzing module determines the movement trace of the light source within the photograph image frames by calculating a plurality of grids associated with the grid coordinates along a direction formed by the grids. The instruction identifying module inquire the region encoding database and the encoding instruction mapping database for acquiring corresponding instructions to perform triggering controlling steps based on the movement trace of the light source within the photograph image frames.

The color analyzing module computes a coordinate of the detected light source in the photograph image frame and for acquiring a color parameter in the coordinate of the light source from the photograph image frame by using application programming interface API . The instruction identifying module inquire the region encoding database and the encoding instruction mapping database for acquiring corresponding instructions to perform triggering controlling steps based on the color of the light source within the photograph image frames.

The light source detecting module further continuously detects the light source in each of the photograph image frames. The flashing pulse analyzes module determines the flashing pulse of the light source in the photograph image frames during a predetermined time interval. The instruction identifying module inquire the region encoding database and the encoding instruction mapping database for acquiring corresponding instructions to perform triggering controlling steps based on the flashing pulse within the photograph image frames.

According to the above mentioned descriptions the present invention provides a method and system for triggering and controlling human computer interaction operating instructions employs a light source to perform a human computer interaction by detecting and identifying the display mode of the light source in the photograph image frame for determining the human computer interaction instruction corresponding to the display mode. Thus on one hand the present invention accomplishes the non contact type of human computer interactions. On the other hand since the light source in the photograph image frame is detectable and acquirable advantageously to be preferably immune from the interference therefore the present invention allows the user to implement the non contact type of human computer interactions with the high precision.

As is understood by a person skilled in the art the foregoing preferred embodiments of the present invention are illustrative rather than limiting of the present invention. It is intended that they cover various modifications and similar arrangements be included within the spirit and scope of the appended claims the scope of which should be accorded the broadest interpretation so as to encompass all such modifications and similar structure.

