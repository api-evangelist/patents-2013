---

title: Adjusting network service level on a scheduled basis
abstract: A user of a network service (such as an Ethernet e-line) can request a change in capacity (such as bandwidth) for a particular time period. When that time period occurs, the network service is evaluated to determine what switches need to be configured and how to configure them. The switches are configured accordingly. When the time period expires, the switches are re-configured to their original service level.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08578008&OS=08578008&RS=08578008
owner: tw telecom holdings inc.
number: 08578008
owner_city: Littleton
owner_country: US
publication_date: 20130716
---
Many applications such as data storage processing and presentation applications utilize a communication network in their operation. The communication network may for example provide a network connection that allows data to be transferred between two geographically remote locations. To produce the network connection outside service providers may utilize a network spanning multiple network devices from different vendors.

To implement a network application a business may request that the service providers maintain a network service at a particular service level such as a specific level of bandwidth latency or jitter. For example a business may request an Ethernet connection between two of its locations with a bandwidth of 400 Mbit second.

While utilizing network services is beneficial in some respects it also makes applications more dependent on the underlying network services supplied by outside service providers. Because of this dependency some businesses may have difficulty requesting a network service that meets the requirements of their applications. For example applications may require different service levels at different times. This difficulty may make businesses reluctant to move their applications into the cloud or to utilize outside service providers for their network services.

In an embodiment a system adjusts capacity on a network. The network includes a plurality of interconnected switching devices and the system includes a plurality of modules. In particular a user interface module receives an input that identifies i a network connectivity service provisioned to a user at a first service level the network connectivity service providing a dedicated network connection between at least two locations ii a time period in the future and iii a second service level for the network connectivity service to provide during the time period in the future. A service lookup module identifies which of the plurality of interconnected switching devices on the network need to be configured to alter the network connectivity service to provide the second service level. A start module determines that the time period identified in the input received by the user interface module is beginning. A terminate module determines that the time period identified in the input has ended. When the start module determines that the time period is beginning a service provisioning module configures each of the interconnected switching devices identified by the service lookup module to provide the second service level. In a similar manner when the terminate module determines the time period to have ended the service provisioning module configures each of the interconnected switching devices identified by the service lookup module to provide the first service level.

Further embodiments features and advantages of the invention as well as the structure and operation of the various embodiments are described in detail below with reference to accompanying drawings.

The drawing in which an element first appears is typically indicated by the leftmost digit or digits in the corresponding reference number. In the drawings like reference numbers may indicate identical or functionally similar elements.

As mentioned above business applications that utilize network services may require different service levels at different times. Embodiments relate to varying the network service level over time. In some situations a change in the required service level may be known in advance. For example an application may utilize a dedicated network connection between two locations at 400 Mbit s. In addition the application may have a scheduled backup that occurs between the two locations at a particular time period. While 400 Mbit s may be generally sufficient during the backup more bandwidth may be required perhaps double. In one embodiment a user may schedule an increase in bandwidth for that particular time period. At the start of the time period the allocated bandwidth doubles to 800 Mbit s and at the end of the time period the allocated bandwidth returns to 400 Mbit s.

In other circumstances the specific change in the required service level may not be known in advance. To deal with these situations some embodiments dynamically change the service level according to real time usage of the network service. In these embodiments a user may set up a business rule that specifies how to change a service level given a particular usage level. For example a user may set up a business rule that states that allocated bandwidth should be doubled when the bandwidth utilized exceeds a particular threshold. A plurality of these rules may be determined based on the Service Level Agreement SLA between the service provider and the user. By dynamically changing bandwidth allocation users can easily augment their network bandwidth to meet the fluctuating demand of their applications.

The Detailed Description that follows is divided into three sections. The first section describes with respect to a network that includes a plurality of interconnected switching devices and provides a dedicated network connection between at least two locations. The second section describes with respect to a system for altering the service level of the dedicated network connection at a scheduled time. The third section describes with respect to a system for altering the service level of the dedicated network connection at a scheduled time.

System provides connection between locations A and B. The locations A and B are connected to switching devices A and B at the edge of the network. Switching devices A and B may for example be access switches that serve as interfaces between end users or routers and the network . They may be connected by a network of communications links other switches and routers. The term switching device as used herein refers to both network switches and routers.

Connection may be a dedicated network connection. A dedicated network connection is a connection with bandwidth reserved for a particular user. In other words no other user of the network can have access to the bandwidth reserved for a particular user on a dedicated connection. Reserving may involve associating a particular bandwidth with a user. While still reserving bandwidth a network may be oversubscribed meaning that if all users were using all their associated bandwidth the network would have insufficient capacity. A dedicated network connection can be seen as a private connection to one user. Such a dedicated network connection may be point to point in which the connection connects two points on the network. The dedicated network connection may be public or private. On the other hand the connection may also be multipoint to multipoint in which a set of one or more points on the network is connected to a second set of one or more network points. A switching device may receive traffic for a particular network connection on a particular port.

In an example communication network may utilize an Ethernet protocol. In that example connection may be an Ethernet E Line. E Line is a data service defined by the Metro Ethernet Foram providing a point to point Ethernet connection between a pair of user network interfaces.

The connectivity provided by connection may have particular pre defined service levels. For example connection may transfer data between locations A and B at a particular bandwidth latency or jitter. Bandwidth is the amount of data that a communication line can transfer over a particular time period often measured in bit per second bps or multiples of it for example Mega bit per second or Mbps . Latency is a time delay of a communication line. In other words latency is the amount of time that elapses between when a datum is transmitted and when it is received. Jitter represents variations in time delay such as a deviation from an average signal latency.

Embodiments dynamically update the service level of network connectivity services such as connection based on either a pre defined schedule or usage as described below in turn.

Portal server enables a user to control its network connectivity services. Portal server may be implemented for example as a web interface such as the interface illustrated below with respect to . Portal server may provide a feature for the user to login with credentials. Portal server comprises a user interface module and a pricing module .

User interface module displays the assigned service level and schedule with any change to the service level. In an embodiment user interface module may receive an input that identifies i a network connectivity service provisioned to a user ii a time period in the future and iii a new service level requested for the network connectivity service during the time period in the future. User interface module may also enable a user to specify a periodic time period. In other words a time period that repeats cyclically such as weekly or monthly.

Pricing module determines a price for the service change specified using user interface module . In particular pricing module determines a price for providing the new service level specified using user interface module during the time period specified using user interface module . Pricing module determines the price based on the duration of the time period a difference between the new and already provisioned service levels and a pre defined rate. The pre defined rate may be specified in a rate table. In the example where the total allowed bandwidth is increased the rate table may specify a price per hour for each megabit per second above the already provisioned bandwidth. By multiplying a value in the rate table with the difference between the new and already provisioned service levels pricing module may determine price per hour for providing the new service level.

In addition to determining a price user interface module may verify the feasibility of a requested change. For example the requested change by the user may not be achievable due to physical limitations of connections. If the customer only has a 1 Gb s Ethernet line then the user cannot request more than 1 Gb s. In addition to checking the customer s connection user interface module may check the capacity of the underlying network by sending a query through control server to capacity server .

Real time capacity server includes an availability module that predicts future bandwidth availability based on historical data. For example availability module may use the past bandwidth consumption of the network devices that provide the network connectivity service to determine the feasibility of the requested bandwidth based on the past bandwidth consumption. How the feasibility is verified is described in greater detail below with respect to .

With the feasibility of the operation verified user may request the alteration. The request is sent from portal server to control server .

Control server is an orchestration component. According to the request from portal server it implements a state machine showing what state the system is in at any point in time. Also control server may receive requests from components other than portal server such as APIs or the user s proprietary portal.

After control server receives a scheduling request it passes the request on to scheduling server . Scheduling server is connected to a scheduling database which stores the requests such as a scheduled future event. Scheduling server also includes a start module .

Start module monitors scheduling database and the current time. When start module observes that the current time is at or near the scheduled start time start module determines that the time period identified in the input received by the user interface module is beginning and starts processing the scheduling request. For example if the user schedules the bandwidth on a connection from Atlanta to Los Angeles to be doubled on Friday at 11 pm for 48 hours start module begins processing the scheduling request on Friday at or near 11 pm. To process the scheduling request start module may send a message to control server with the service to be changed how and when service is to be changed and the quoted price.

Once control server receives a message from start module to process a change in the bandwidth of a connection it sends a request to service provisioning server .

Service provisioning server configures the network to achieve the requested change. Service provisioning server includes a service lookup module and a provisioning module and is connected to an inventory database . Inventory database stores the physical and logical inventory of the currently provisioned network connectively services and the devices that they each utilize. For example inventory database may store information on the switching devices and in particular the endpoint switching devices used by each E Line.

In response to the request from control server service lookup module uses the inventory database to identify which of the plurality of interconnected switching devices on communication network need to be configured to alter the network connectivity as requested by the user. For example service provisioning server identifies an endpoint device for each of the locations connected using the network connectivity services such as locations A and B in .

Once service lookup module identifies each of the interconnected switching devices provisioning module configures the switching devices to provide the requested bandwidth to the user. For example provisioning module may send configuration commands to each of the switching devices. In one embodiment each endpoint device may include a policer that limits bandwidth on a port associated with the user. To configure the endpoint device the service provisioning server alters the policer included on each of the endpoint devices to limit the bandwidth on the port associated with the user to the second bandwidth indicated by the user.

In one embodiment the plurality of interconnected switching devices may be heterogeneous. For example some of the switching devices may be switches made by Cisco System Inc. of San Jose Calif. and others may be switches made by Juniper Networks Inc. of Sunnyvale Calif. Configuring these different types of switches may require different commands. To deal with this problem provisioning module may first look up the necessary commands from inventory database for each type of switch. In an example provisioning module may utilize different sub modules which understand the mapping of generic attribute models to the specific configuration instruction set of the device being modified. Then provisioning module may send the appropriate type specific commands to each of the switching devices.

If able to provision the services without error service provisioning server updates the inventory database to indicate the new service level of the network connectivity server and signals back to control server informing it that the requested changes are complete. Then control server updates the state for that particular connection to reflect the new bandwidth assigned to it. After a change is made to a connection service provisioning server also updates the inventory so that it will reflect the change of the conventions in the network.

After the requested change is performed control server updates its internal state and sends a message to a notification server to notify the user that the change has occurred. The notification may for example be made by email phone call Short Message Service SMS or the updating of an API. The information that is sent to the user may include any potential difference between the requested change and the actual change that was accomplished.

In updating its internal state control server notifies a termination module that the service level has been updated. Terminate module monitors the current time comparing it to the time when the change in service is scheduled to end. When terminate module determines that the time period for the change has ended it sends a message to service provisioning server to return the network connectivity service to its previous service level.

Service provisioning server returns the network connectivity service to the previous service level in the same manner it altered the network connectivity service to provide the new service level. It determines the necessary switching devices and sends the necessary commands to the determined switching devices.

Once the network connectivity service returns to the original service level service provisioning server sends a message to billing server with the initially quoted price and the duration of the change. Billing server determines the amount to charge the user and bills the charge to the customer.

In examples messages between the server modules in can be transmitted using Advance Message Queuing Protocol AMQP Simple Object Access Protocol SOAP Representational state transfer REST and Java Message Service JMS .

Method begins at step with portal server enabling the user to specify the network modification. For example a user can request using the portal server that the bandwidth on the connection from Atlanta to Los Angeles be doubled from 400 Mbs to 800 Mbps starting at 11 am on Friday for 4 hours and that this be a recurring event that takes place every week.

At step portal server determines pricing information for the network modification. For example the cost for 100 Mbps in additional bandwidth may be 10 per hour. Because the example modification calls for 400 Mbps in additional bandwidth the price may be 40 per hour.

At step bandwidth control server coordinates with real time capacity server in to predict future availability. In the example above real time capacity server may evaluate utilization of network switches from Atlanta to Los Angeles on previous Fridays from 11 am to 3 pm to determine if there is 400 M bps in additional capacity. Additionally it may look at other events which are scheduled to occur and take their future consumption into account when determining feasibility.

At step portal server sends service price and scheduling information to control server . Then at step control server forwards the received data to scheduling server . Scheduling server stores service price and scheduling information at step and monitors this information at step .

Method begins at step when scheduling server determines that the scheduled start time is reached. For example if the user requested a bandwidth increase at 11 am on Friday scheduling server determines that the current time is at or near 11 am on a Friday.

At step scheduling server sends an event with service and price information to control server . In the example above the event information may identify the network connection between Atlanta and Los Angeles the new bandwidth of 800 Mbps the quoted price of 40 per hour and the duration of 4 hours. Scheduling server may send all of this information to bandwidth control server .

At step bandwidth control server forwards the service information to the service provisioning server . Service provisioning server configures the network devices at step . More details on how the network devices may be configured is provided with respect to .

Once the network switches are configured service provisioning server updates an inventory database such as inventory database in with the new service level information at step . In the running example the inventory database may have an entry listing service level information for the network connection between Atlanta and Los Angeles. The entry may be updated to change the bandwidth from 400 MBps to 800 Mbps.

Moreover once the network switches are configured service provisioning server indicates that the configuration is complete to bandwidth control server . At step bandwidth control server forwards the price to a billing server such as a billing server at step . In the running example the billing server may receive the quoted price of 40 hr and the duration of 4 hours and bill the customer 160. While step is shown here immediately after configuring the switches to the new service level a skilled artisan would recognize that it may instead occur after the switches are reconfigured back to the original service level.

Finally bandwidth control server at step directs notification server to notify the user of the change in the service level and at step records the service expiration time.

In step service provisioning server determines the devices needed to configure a service. For example the device needed to configure a service may be the endpoint device for the service. In other examples intermediate devices may need to be configured as well.

As illustrated by decision block for each device service provisioning server executes steps and . At step service provisioning server determines the commands needed to configure the device. As mentioned above the different switching devices may have different types and may have different command interfaces. To deal with this service provisioning server may look up the appropriate commands for a particular type of switching device. At step provisioning server sends the command to the device.

Referring to the example above two switches may need to be altered to change the bandwidth on the E line between Atlanta and Los Angeles an endpoint switch in Atlanta and an endpoint switch in Los Angeles. Step identifies these two switches. The Atlanta endpoint switch may have a different type than the Los Angeles endpoint switch. But both the Atlanta and Los Angeles endpoint switches may have policers that limit bandwidth to them to a particular level. Step determines a set of commands needed to configure each policer and step sends each set of commands to the respective device.

The user can choose the amount of bandwidth for purchase using the sliding selector . The maximum allowable bandwidth is the capacity of the connection assigned to the customer or an upper limit set by the network provider.

After selecting the desired bandwidth the user can see in real time the cost per Mbps per hour as well as the total cost associated with the selected bandwidth and time. Based on this information the user can make a decision on whether to purchase the required bandwidth or schedule the payment for the future.

As illustrated in the typical utilization of some network resources such as bandwidth has a cyclic recurring pattern to it. Based upon what the real time capacity server has collected off the network devices and has learned over time the real time capacity server calculates an average usage of bandwidth for each five minute time interval throughout a one week time period. Each five minute period may include data which fits that particular time slice as well as a pre determined surrounding time range 1 hour for example . In example the data may take into account a deviation without the surrounding time range. A skilled artisan would recognize that other intervals and periods may be used. In addition to the average the variance may also be used to determine a confidence range of usage for each interval with a particular confidence level. The maximum of the range is forecasted usage .

For example during a particular interval an average utilization may be 400 Mbps. Given known statistical techniques for a particular variance the confidence range may be determined with 95 confidence to be from 300 Mbps to 500 Mbps. In that case the forecasted usage is 500 Mbps.

The total capacity is the total capacity available in the network between the two locations. The difference between the total capacity and the highest forecasted usage for the time period of the scheduled increase is determined as the forecasted availability . If the forecasted availability meets or exceeds the additional bandwidth requested then the portal server in allows the bandwidth request.

Method begins at step when control server determines that a network events that has expired. In the running example the bandwidth was increased at 11 am for 4 hours. Thus in that example at step control server would determine that the current time is 3 pm.

When control server determines that the time for the network event has expired control server sends a termination message to service provisioning server at step . At step service provisioning server configures devices to provide the initial service level such as the initial bandwidth. Service provisioning server configures the devices in the same way as described earlier with respect to . Finally at step bandwidth control server directs the notification server to notify the user that the bandwidth is restored to the initial level.

In another embodiment the change in the assigned bandwidth to the user s connection is based upon utilization of that connection. For example the user can set a threshold such that if the utilization of a connection exceeds that threshold the system automatically triggers a request for increasing the bandwidth assigned to that connection. This embodiment is described with respect to .

Rule module receives an input that identifies a network connectivity service and a rule specifying i a usage metric for the network connectivity service ii a condition for assessing the usage metric and iii a manner for determining a new service level of the network connectivity service. In one embodiment a rule may specify increasing the bandwidth with a constant multiplier when the connection utilization exceeds a threshold. For example the rule may specify a threshold value for bandwidth utilization. If the actual bandwidth used exceeds the threshold value the total bandwidth allocated to the connection may increase. It may double or may increase to a new predefined level. A skilled artisan would identify that values other than double or triple may be used such as a 150 multiplier .

In another embodiment the rule may specify a sliding scale. For example the rule may indicate that whenever the bandwidth utilized on connection exceeds a particular percentage such as 80 of the bandwidth allocated the bandwidth allocated is increased to a new level.

In yet another embodiment a rule may specify that if the utilization of a connection exceeds the threshold the bandwidth of the connection is adjusted by predicting how much bandwidth the user will require on the given connection.

Rule module sends the specified rule to threshold alert server module which stores the rule. Threshold alert server module monitors the network to repeatedly evaluate the usage metric and determines whether the usage metric satisfies the condition. It keeps track of the utilization of the network connectivity service. Threshold alert server module may also track a quote provided by portal server . Threshold alert server is coupled to historical usage database .

Historical usage database stores data collected from network status server . Network status server includes a monitor module that connects to the network devices in network and measures metrics such as the amount of bandwidth utilized on all ports in the network. Network status server may collect the metrics by polling them periodically. Once collected network status server stores them into historical usage database . Historical usage database keeps track of how the services looked historically.

As mentioned above threshold alert server includes condition module . Condition module continually analyzes data from or prior to insertion into the historical usage database . It applies an exponential moving average filter over the data and determines if it is within a sliding window. Network utilization can vary quickly and widely. So the moving average filter helps smooth out the utilization data. If the utilization of a connection has been over the threshold for at least a specific duration of time set by the user or service provider condition module invokes usage module .

When invoked usage module determines based on the rule the new service level. For example the rule may state that if bandwidth utilization exceeds 80 double the allocated bandwidth. In this example when invoked usage module would determine the currently allocated bandwidth for the connection and double it to determine a new bandwidth value.

Once the new service level is determined threshold alert server triggers an alert to control server to adjust the service level of the connection. Just as described above with respect to control server works with service provisioning server to configure the connection notification server to notify the user of the change and billing server to bill out the change.

Once the change is made the condition module continually reads data from or prior to insertion into historical usage database to determine when the condition is no longer satisfied. When the condition is no longer satisfied usage module sends a message to control server which reconfigures the connection back to the initial service level. Again the network is configured as described above with respect to .

In some embodiments threshold alert server may constantly send updated alerts to the control server so that as the changes in the utilization of the connection are made the amount of bandwidth assigned to the connection is changed as well. Consequently the amount of bandwidth assigned to a connection will reflect the rule set in the rule module . For example a user may require that the connection from Atlanta to Los Angeles have an actual utilization of less that 75 of the maximum bandwidth the connection can provide. Assuming the maximum bandwidth is 400 Mbps the threshold alert module monitors the network repeatedly and if the used bandwidth of the connection goes above 300 Mbps it increases the maximum bandwidth allocated to the user so that at all times the utilization of the connection is below 75 . The rule may specify when the bandwidth utilized exceeds 75 to increase the bandwidth utilized by 25 . In the example above the bandwidth allocated would increase from 400 Mbps to 500 Mbps.

The user may configure another rule defining how to scale back the bandwidth utilization. For example the rule may indicate to reduce the allocated bandwidth by 25 when the bandwidth utilized is less than 50 what is allocated. In that example when the bandwidth utilized goes below 250 Mbps the bandwidth allocated would be decreased from 500 Mbps to 400 Mbps. In this way by specifying rules to both increase and decrease bandwidth the bandwidth allocated can dynamically flex up and down.

Portal server enables the user to configure a rule on how to update usage at step . Threshold alert server stores an alert at step and monitors network status at step . At step network status server polls service status and streams service status at step .

At step threshold alert server detects that a usage alert condition is satisfied and sends a message to the bandwidth control server to execute steps to of flowchart . Referring to the example above any time the utilization of the connection between Atlanta to Los Angeles increases over 300 Mbps threshold alert server detects an alert in step and sends a message to control server to adjust the connection bandwidth accordingly.

In another embodiment of the invention changes in the utilization and adjusting the bandwidth are performed for each flow on a connection rather than for the aggregated flows in a connection. In other words the dynamic bandwidth methods described in this invention are applied to individual flows of traffic. For example the system can provide dynamic bandwidth to web http traffic which can be one slice of the aggregated traffic on a given connection.

Flow level dynamic bandwidth management allows the user to treat different flows or different types of traffic in different ways. In other words it enables the user to use a class of service for different traffic types. For example if a user wants to guarantee a certain bandwidth for the voice traffic it can dynamically change the bandwidth assigned to voice traffic so that regardless of the aggregated traffic load on a connection each flow of voice traffic enjoys a guaranteed amount of bandwidth.

A Service Level Agreement may provide different guarantees for different classes of service. For example streaming video may require a great deal of bandwidth but latency may be relatively unimportant. Yet voice over IP data may require relatively little bandwidth but latency may be very important. The Service Level Agreement SLA can be decomposed into different classes of service and service level guarantees and a rule can be generated for each.

A skilled artisan would recognize that the components of the systems in enable adjustments of network service level based both on a schedule and on usage.

Many of the examples above are provided with respect to changing bandwidth. However a skilled artisan would recognize that these may be applied to changes in other service levels as well such as latency or jitter. Changing latency or jitter may involve configuring individual switching devices to re prioritize traffic. It also may involve reconfiguring a number of different switching devices to alter the flow of traffic through the network.

The term user as used herein may encompass both a customer of the network connectivity service such as an employee of a business that utilizes the network connectivity service and a network administrator of the service provider itself. Users may also be at different companies or organizations.

Inventory database and historical usage database each may be any stored type of structured memory including a persistent memory. In examples each database may be implemented as a relational database or file system.

Each of the servers and modules in may be implemented in hardware software firmware or any combination thereof.

Each of the servers and modules in may be implemented on the same or different computing devices. Such computing devices can include but are not limited to a personal computer a mobile device such as a mobile phone workstation embedded system game console television set top box or any other computing device. Further a computing device can include but is not limited to a device having a processor and memory including a nontransitory memory for executing and storing instructions. The memory may tangibly embody the data and program instructions. Software may include one or more applications and an operating system. Hardware can include but is not limited to a processor memory and graphical user interface display. The computing device may also have multiple processors and multiple shared or separate memory components. For example the computing device may be a part of or the entirety of a clustered computing environment or server farm.

Identifiers such as a b i ii etc. are sometimes used for different elements or steps. These identifiers are used for clarity and do not necessarily designate an order for the elements or steps.

The present invention has been described above with the aid of functional building blocks illustrating the implementation of specified functions and relationships thereof. The boundaries of these functional building blocks have been arbitrarily defined herein for the convenience of the description. Alternate boundaries can be defined so long as the specified functions and relationships thereof are appropriately performed.

The foregoing description of the specific embodiments will so fully reveal the general nature of the invention that others can by applying knowledge within the skill of the art readily modify and or adapt for various applications such specific embodiments without undue experimentation without departing from the general concept of the present invention. Therefore such adaptations and modifications are intended to be within the meaning and range of equivalents of the disclosed embodiments based on the teaching and guidance presented herein. It is to be understood that the phraseology or terminology herein is for the purpose of description and not of limitation such that the terminology or phraseology of the present specification is to be interpreted by the skilled artisan in light of the teachings and guidance.

The breadth and scope of the present invention should not be limited by any of the above described exemplary embodiments but should be defined only in accordance with the following claims and their equivalents.

