---

title: User information management apparatus and user information management method
abstract: A user information management apparatus stores various types of user information on a user in a storage unit, causes a providing unit to provide a user with an access code used to access the user information on the user stored in the storage unit, and when receiving the access code from the facility device installed in a facility that provides a service, causes the transmitting unit to transmit the user information corresponding to the service provided by the facility having the facility device among the various types of the user information stored in the storage unit.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09189651&OS=09189651&RS=09189651
owner: YAHOO JAPAN CORPORATION
number: 09189651
owner_city: Tokyo
owner_country: JP
publication_date: 20130910
---
The present application claims priority to and incorporates by reference the entire contents of Japanese Patent Application No. 2012 202527 filed in Japan on Sep. 14 2012.

The present invention relates to a user information management apparatus and a user information management method.

In stores that provide services in some cases it is verified whether a user who uses the provided services is eligible to receive the services. For example a store that sells alcohol or tobacco verifies whether a user is 20 years of age or older by checking a user s identification card such as a driver s license when selling the alcohol or tobacco.

As a related technology a technology has been proposed in which certification information stored in a mobile terminal is transmitted from an in vehicle device to a server and if a certificate authority confirms the owner of a vehicle associated with the certification information the lock on the vehicle is released for example Japanese Laid open Patent Publication No. 2002 96715 .

However when the user presents the identification card unnecessary information may be leaked. For example when the user presents the driver s license to a store staff to confirm the age the store staff may also see the address written on the driver s license.

It is an object of the present invention to at least partially solve the problems in the conventional technology.

According to one aspect of an embodiment of the present invention a user information management apparatus includes a storage unit that stores therein various types of user information on a user a providing unit that provides a user with an access code used to access the user information stored in the storage unit and a transmitting unit that transmits when receiving the access code from a facility device installed in a facility that provides a service user information corresponding to the service provided by the facility having the facility device among the various types of user information stored in the storage unit.

According to another aspect of an embodiment of the present invention a user information management method executed by a computer the method includes providing a user with an access code used to access a user information stored in a storage unit that stores therein various types of user information on a user and transmitting when receiving the access code from a facility device installed in a facility that provides a service user information corresponding to the service provided by the facility having the facility device among the various types of user information stored in the storage unit.

According to another aspect of an embodiment of the present invention computer readable recording medium having stored therein a user information management program for causing a computer to execute a process the process includes providing a user with an access code used to access a user information stored in a storage unit that stores therein various types of user information on a user and transmitting when receiving the access code from a facility device installed in a facility that provides a service user information corresponding to the service provided by the facility having the facility device among the various types of user information stored in the storage unit.

The above and other objects features advantages and technical and industrial significance of this invention will be better understood by reading the following detailed description of presently preferred embodiments of the invention when considered in connection with the accompanying drawings.

Exemplary embodiments hereinafter referred to as embodiments of a user information management apparatus a user information management method and a user information management program according to the present invention will be explained in detail below with reference to the accompanying drawings. The present invention is not limited to the embodiments below. The embodiments may be combined appropriately as long as the processing contents do not conflict with each other. In the following an example will be explained that a store serves as a service providing facility an in store device serves as a facility device and user information corresponding to a service provided by the store is transmitted to the in store device.

A first embodiment will be explained below. In the first embodiment a system will be explained in which a user registers various types of user information such as personal information on the user in a user information management apparatus and when the user uses a service provided by a store the store verifies whether the user is eligible to receive the service based on the user information provided by the user information management apparatus. is a schematic diagram illustrating a configuration of the system according to the first embodiment. As illustrated in a system includes a user terminal an in store device and a user information management apparatus . The user terminal and the user information management apparatus are connected so as to communicate with each other via a network not illustrated and the in store device and the user information management apparatus are connected so as to communicate with each other via the network not illustrated . The network may be any communication network such as the Internet a local area network LAN a virtual private network VPN or a mobile communication network regardless of whether it is wired or wireless. In the example in the connection between the user terminal and the user information management apparatus and the connection between the in store device and the user information management apparatus are denoted by solid lines indicating online states while the connection between the user terminal and the in store device is denoted by a dashed line indicating an offline state. Incidentally while illustrates an example in which the system includes one user terminal and one in store device the disclosed system is not limited to this example and may include an arbitrary number of the user terminals and the in store devices . Furthermore the system may include a plurality of the user information management apparatuses .

The user terminal is a terminal device of a user. For example the user terminal may be a desktop personal computer PC a tablet PC a notebook PC a mobile phone a smartphone or a personal digital assistant PDA .

The in store device is a device installed in a store that provides a service and may be for example a point of sale POS terminal that performs transaction processing in the store. The in store device may be an information processing apparatus such as a desktop PC a tablet PC or a notebook PC. In the store in some cases it is verified whether a user who uses a provided service is eligible to receive the service. For example when the store sells alcohol or tobacco the store verifies whether a user who buys alcohol or tobacco is 20 years of age or older. The in store device acquires user information needed for a service provided by the store and assists a store staff to confirm the user. For example the in store device acquires personal information such as the age of the user and displays the acquired personal information on a predetermined display unit display .

The user information management apparatus is an information processing apparatus such as a server computer that manages various types of information on the user. For example the user information management apparatus stores therein various types of user information on the user. The user information includes various types of personal information on the user such as the name the address the date of birth the age and the credit card number. A user may register the user information in the user information management apparatus via the user terminal . Alternatively an administrator or the like of the user information management apparatus may register the user information in the user information management apparatus after confirming that the information declared by the user is valid. The user information may include various types of information on the user such as a user authentication result in addition to the personal information.

The user information management apparatus provides the user with an access code to access the various types of user information on the user stored as above. When receiving the access code from the in store device installed in the store the user information management apparatus transmits user information corresponding to a service provided by the store from among the various types of user information stored as above to the in store device .

The user terminal the in store device and the user information management apparatus according to the first embodiment will be explained in detail below. First a configuration of the user information management apparatus will be explained. is a diagram illustrating a functional configuration example of the user information management apparatus according to the first embodiment.

As illustrated in the user information management apparatus includes a communication interface I F unit a storage unit and a control unit .

The communication I F unit is an interface such as a network interface card NIC . The communication I F unit transmits and receives various types of data to and from other devices via a network not illustrated . For example the communication I F unit transmits data of various screens such as a login screen and a user information selection screen to the user terminal and receives various types of operating information on the screens from the user terminal . The communication I F unit also transmits an access code to access the user information to the user terminal . The communication I F unit receives the access code from the in store device and transmits to the in store device user information corresponding to a service provided by a store where the in store device is installed.

The storage unit is a device for storing various types of information. For example the storage unit may be a semiconductor memory device such as a random access memory RAM or a flash memory or a storage device such as a hard disk or an optical disk.

The storage unit stores therein an operating system OS executed by the control unit and various programs used to manage the user information. The storage unit also stores therein various types of information. For example the storage unit stores therein a user information table access code information and security policy information .

The user information table is a table for storing various types of user information on a user who uses the system . For example the user information table stores therein a user ID and a password of the user. The user information table also stores therein various types of personal information on the user. For example the user information table stores therein the name the address the date of birth the age and a credit card number of the user as the various types of personal information. is a diagram illustrating an example of a data structure of the user information table according to the first embodiment. In the user information table illustrated in fields for storing the user ID the password the name the address the date of birth the age and the credit card number are provided and information is stored in each of the fields for each user. The various types of information stored in the user information table may separately be stored in a plurality of tables by associating the information with for example the user ID.

The access code information is data in which information on the access code that has been provided to the user is stored. For example in the access code information the user ID of the user who has received the access code and the date and time at which the access code has been provided are stored in association with the provided access code. Furthermore in the access code information information indicating the user information to be provided is stored in association with the access code. is a diagram illustrating an example of a data structure of the access code information according to the first embodiment. In the access code information illustrated in a user ID a provision date and time and information indicating a type of the user information to be provided are stored for each access code. For example in the example in an access code XXXXXA is provided to a user with a user ID 0001 on 2012 XX XX at 12 00 00 and the user information to be provided by the access code is age . For another example the access code XXXXXB is provided to a user with a user ID 0002 on 2012 XX XX at 12 05 05 and the user information to be provided by the access code is credit card number .

The security policy information is data in which a security policy on whether to provide the user information upon reception of the access code is stored. In the first embodiment a validity period of the access code is stored as the security policy information . For example if 10 minutes is set in the security policy information the access code is considered as valid within 10 minutes of the provision date and time of the access code.

The control unit is a device that controls the user information management apparatus . For example the control unit may be an electronic circuit such as a central processing unit CPU or a micro processing unit MPU or an integrated circuit such as an application specific integrated circuit ASIC or a field programmable gate array FPGA .

The control unit includes an internal memory for storing control data and programs that define various processing procedures and performs various types of processing based on the data and the programs. The control unit functions as various processing units when various programs are executed. For example the control unit includes an authenticating unit an accepting unit a generating unit a providing unit a registering unit a verifying unit and a transmitting unit .

The authenticating unit authenticates a user when access is requested by the user terminal . For example when access is requested by the user terminal the authenticating unit transmits a web page of a login screen containing input fields of a user ID and a password to the user terminal so that the login screen is displayed on the user terminal . If login is requested via the login screen the authenticating unit authenticates the user by checking whether the user ID and the password input in the input fields of the login screen match the user ID and the password of any of the users stored in the user information table . If the input user ID and the password do not match the user ID and the password of any of the users stored in the user information table the authenticating unit notifies the user terminal of an authentication failure.

The accepting unit accepts designation of user information to be provided to the in store device from the user authenticated by the authenticating unit . For example the accepting unit transmits to the user terminal a web page of a selection screen for selecting user information to be provided so that the selection screen is displayed on the user terminal . The selection screen displays for example items indicating the types of the user information such as the name and the address stored in the user information table and enables to individually select each of the items to select the user information to be provided. If the completion of the selection is designated via the selection screen the accepting unit specifies the user information of the item in the selected state on the selection screen as the designated user information to be provided to the in store device .

The generating unit generates an access code to be provided to the user. For example when the completion of the selection is designated via the selection screen the generating unit generates a new access code according to a predetermined code generation rule so that the access code does not become the same as any access code generated in the past. The access code may be a numerical code a character code or a code in which numerals and characters are combined.

The providing unit provides the access code generated by the generating unit to the user. For example the providing unit transmits access code data to the user terminal of the user in order to provide the access code to the user. The way of providing the access code is not limited to transmitting the access code data. For example the providing unit may encode the access code into a two dimensional code or the like and may transmit image data of an image of the encoded two dimensional code to the user terminal . Alternatively the providing unit may display numerals or characters of the access code on the user terminal to provide the access code to the user.

The registering unit registers in the access code information the user ID of the user authenticated by the authenticating unit and the user information that is specified by the accepting unit so as to be provided to the in store device in association with the access code that is generated by the generating unit and provided by the providing unit . Therefore the access code provided by the providing unit is stored in the access code information .

When receiving the access code from the in store device the verifying unit verifies whether the received access code is a proper code. For example the verifying unit determines whether the received access code is stored in the access code information . If the access code is stored in the access code information the verifying unit verifies whether the received access code satisfies the security policy stored in the security policy information . For example the verifying unit determines whether the validity period of the received access code has not expired after the date and time at which the access code was provided to the user. If the received access code is not registered in the access code information and if the received access code does not satisfy the security policy the verifying unit notifies the in store device that the access code is not a proper code.

When it is determined that the access code is a proper code through the verification by the verifying unit the transmitting unit specifies the user ID and the to be provided user information stored in the access code information in association with the access code. The transmitting unit reads data of the specified user information on the specified user ID from the user information table and transmits the read data of the user information to the in store device .

A configuration of the user terminal will be explained below. is a diagram illustrating a functional configuration example of the user terminal according to the first embodiment.

As illustrated in the user terminal includes an operation input unit a display unit a communication I F unit a storage unit and a control unit .

The operation input unit is an input device for inputting various types of information. For example the operation input unit may be a mouse or a keyboard. The operation input unit receives input of various operations from the user and inputs operating information indicating the contents of the received operations to the control unit .

The display unit is a display device for displaying various types of information. For example the display unit may be a liquid crystal display LCD or a cathode ray tube CRT . The display unit displays various types of information. For example the display unit displays the login screen and the selection screen.

The communication I F unit is an interface such as a NIC. The communication I F unit transmits and receives various types of data to and from other devices via the network. For example the communication I F unit receives data of various screens such as the login screen and the selection screen from the user information management apparatus and transmits various types of operating information on the screens to the user information management apparatus . The communication I F unit also receives the access code from the user information management apparatus .

The storage unit is a device for storing various types of information. For example the storage unit may be a semiconductor memory device such as a RAM or a flash memory or a storage device such as a hard disk or an optical disk.

The storage unit stores therein an OS executed by the control unit and various programs used to manage the user information. The storage unit also stores therein various types of data. For example the storage unit stores therein an access code .

The control unit is a device that controls the user terminal . For example the control unit may be an electronic circuit such as a CPU or an MPU or an integrated circuit such as an ASIC or an FPGA. The control unit includes an internal memory for storing control data and programs that define various processing procedures and performs various types of processing based on the data and the programs. The control unit functions as various processing units when various programs are executed. For example the control unit includes an access control unit a storing unit and a presenting unit .

When predetermined operation to request acquisition of an access code is performed on the operation input unit the access control unit issues an access request to the user information management apparatus . Accordingly the user information management apparatus transmits data of the login screen and the login screen of the user information management apparatus is displayed on the display unit . The user enters a user ID and a password in the login screen to perform login and selects user information to be provided by the access code from the selection screen that is displayed after login.

When receiving the access code from the user information management apparatus the storing unit stores the access code in the storage unit . Therefore the access code is stored in the storage unit .

When predetermined operation to request presentation of the access code is performed on the operation input unit the presenting unit presents the access code stored in the storage unit . For example the presenting unit enables the access code stored in the storage unit to be read by wireless near field communication such as near field communication NFC or radio frequency identification RFID . The way of presenting the access code is not limited to enabling the access code to be read by radio. For example if the access code is image data of a two dimensional code or the like the presenting unit may display an image of the image data on the display unit . Furthermore the presenting unit may convert the access code to image data of a two dimensional code or the like and may display an image of the converted access code on the display unit . Moreover the presenting unit may display numerals or characters of the access code on the display unit .

A configuration of the in store device will be explained below. is a diagram illustrating a functional configuration example of the in store device according to the first embodiment.

As illustrated in the in store device includes an operation input unit a display unit a reader unit a communication I F unit a storage unit and a control unit .

The operation input unit is an input device for inputting various types of information. For example the operation input unit may be a mouse a keyboard or a touch panel. The operation input unit receives input of various types of information from a store staff and inputs operating information indicating the contents of the received operations to the control unit .

The display unit is a display device for displaying various types of information. For example the display unit may be an LCD or a CRT. The display unit displays various types of information. For example the display unit displays whether the user satisfies a service providing condition.

The reader unit reads the access code and outputs the read access code to the control unit . The reader unit may read the access code by wireless near field communication. Alternatively the reader unit may read an image of a two dimensional code in which the access code is encoded and may decode the read image to output the encoded access code to the control unit .

The communication I F unit is an interface such as a NIC. The communication I F unit transmits and receives various types of data to and from other devices via the network. For example the communication I F unit transmits the access code to the user information management apparatus and receives the user information from the user information management apparatus .

The storage unit is a device for storing various types of information. For example the storage unit may be a semiconductor memory device such as a RAM or a flash memory or a storage device such as a hard disk or an optical disk.

The storage unit stores therein an OS executed by the control unit and various programs used to manage the user information. The storage unit also stores therein various types of data. For example the storage unit stores therein service condition information .

The service condition information is data in which a condition is stored that needs to be satisfied by a user when the user uses a service provided by a store having the in store device . For example if a store sells alcohol or tobacco a condition that a user who buys alcohol or tobacco should be 20 years of age or older is stored as the service condition information .

The control unit is a device that controls the in store device . For example the control unit may be an electronic circuit such as a CPU or an MPU or an integrated circuit such as an ASIC or an FPGA. The control unit includes an internal memory for storing control data and programs that define various processing procedures and performs various types of processing based on the data and the programs. The control unit functions as various processing units when various programs are executed. For example the control unit includes a read control unit a user information requesting unit and a determining unit .

When predetermined operation to request start of reading the access code is performed on the operation input unit the read control unit reads the access code by controlling the reader unit . Incidentally when operation is performed to provide a service for which it is necessary to verify whether a user is eligible to receive the service the read control unit may start reading the access code in conjunction with the operation. For example if the in store device is a POS terminal and a product code of alcohol or tobacco is scanned the read control unit may display a message for requesting presentation of the access code and start reading the access code in conjunction with the scan operation.

The user information requesting unit transmits the access code that the reader unit has read under the control of the read control unit to the user information management apparatus to thereby request the user information management apparatus to provide the user information.

When receiving the user information from the user information management apparatus the determining unit determines whether the received user information satisfies the condition stored in the service condition information . The determining unit displays whether the user satisfies the service providing condition on the display unit based on a determination result. For example when receiving the age of the user as the user information from the user information management apparatus for the sale of alcohol or tobacco the determining unit determines whether the user is 20 years of age or older and if the user is under 20 years of age displays a message that the sales condition is not satisfied. Meanwhile the determining unit may control processes so as not to provide the service if the received user information does not satisfy the condition stored in the service condition information . For example if the user is under 20 years of age for the sale of alcohol or tobacco the determining unit may prevent the transaction process from being completed until alcohol or tobacco is removed. Furthermore when the user information is information on a credit card and if a credit card number and an expiry date are displayed so as to be viewed by a store staff the information may be misused. Therefore a part of the information may be displayed as turned letters.

The flow for providing the user information on the user by the system according to the first embodiment will be explained below with reference to and . is a sequence diagram illustrating the flow for providing the access code to the user.

 1 When the user performs predetermined operation on the operation input unit to request acquisition of an access code the user terminal issues an access request to the user information management apparatus .

 3 When receiving the access request the user information management apparatus transmits a web page of the login screen to the user terminal so that the login screen is displayed on the user terminal . Accordingly the user enters a user ID and a password in the login screen by operating the operation input unit and performs operation to request login. 4 When the operation to request the login is performed on the login screen the user terminal transmits the user ID and the password entered in the login screen to the user information management apparatus . 5 The user information management apparatus authenticates the user by the user ID and the password received from the user terminal . 6 When the user is authenticated by the user ID and the password the user information management apparatus transmits a notice that the authentication has successfully completed and also transmits a web page of the selection screen to the user terminal so that the selection screen is displayed on the user terminal . The user designates user information to be provided to the in store device from the selection screen by operating the operation input unit and performs operation to designate the completion of the selection. 7 When the operation to designate the completion of the selection is performed on the selection screen the user terminal notifies the user information management apparatus of the user information that is in the selected state on the selection screen and requests an access code. 8 The user information management apparatus generates the access code. 9 The user information management apparatus registers the user ID of the authenticated user and the selected user information in the access code information in association with the generated access code. 10 The user information management apparatus provides the generated access code to the user. For example the user information management apparatus transmits the generated access code to the user terminal . The user terminal stores the received access code.

 11 The user requests the store to provide a service. For example the user requests the store to sell alcohol or tobacco.

 12 If it is necessary to verify whether the user is eligible to receive the service a store staff requests the user to present an access code.

 13 The user performs predetermined operation on the operation input unit to request presentation of the access code and presents the access code by using the user terminal .

 14 The in store device reads the presented access code by using the reader unit and transmits the read access code to the user information management apparatus .

 15 When receiving the access code the user information management apparatus verifies whether the received access code is a proper code.

 16 When determining that the access code is a proper code through the verification the user information management apparatus specifies the user ID and the user information to be provided which are stored in the access code information in association with the access code and reads data of the specified user information on the specified user ID from the user information table . 17 The user information management apparatus transmits the read data of the user information to the in store device . 18 When receiving the user information from the user information management apparatus the in store device determines whether the received user information satisfies the condition stored in the service condition information . 19 The in store device displays whether the user satisfies the service providing condition on the display unit based on a determination result. 20 When the service is permitted to be provided the store staff provides the service to the user. The user information provided by the user information management apparatus is not limited to the personal information on the user and any information on the user may be used. For example the user information management apparatus may store as the user information a user authentication result on the login screen in the user information table and may transmit the user information with data of the stored authentication result to the in store device and the in store device may provide a service to the user when the user information management apparatus has successfully authenticated the user.

Furthermore the user information management apparatus may store as the user information on the user characteristic information indicating the characteristics of the user and may also transmit the characteristic information to the in store device . The characteristic information may be any information that enables to identify the user. For example image data of a face of the user or physical characteristic information such as a height sex a fingerprint a voiceprint or a position of a mole may be used. For example the user information management apparatus stores the image data of the face of the user in the storage unit in association with the user ID of the user. The transmitting unit specifies the user ID associated with the access code from the access code information and transmits the image data associated with the specified user ID as the user information to the in store device . The in store device displays an image of the transmitted image data. Therefore a store staff can identify the user by comparing the face in the image with the actual face of the user who has requested the service. The method to identify the user is not limited to the method performed by a person such as a store staff. For example it may be possible to mount a camera on the in store device to capture the face of the user and perform matching or the like by comparing the captured face with a face of the received image data to identify the user. Furthermore if the characteristic information is a voiceprint it may be possible to record voice of the user by a microphone and determine whether the voiceprints match with each other to identify the user. Moreover if the characteristic information is a fingerprint it may be possible to acquire the fingerprint of the user by a fingerprint reader and determine whether the fingerprints match with each other to identify the user. Namely the in store device may acquire the physical characteristics of the user to identify the user.

As described above by selecting the user information to be provided and by transmitting to the in store device the user information corresponding to a service provided by a store having the in store device it becomes possible to prevent leakage of unnecessary information. Furthermore it becomes possible to provide the user information by the access code so that the user need not carry a driver s license or a credit card on which the personal information on the user is written and can reduce the possibility of losing the driver s license or the credit card. Furthermore because the user information management apparatus provides the user information on each of the users the user information management apparatus can be used as a substitute for an identification certificate of the user. Moreover because the user information management apparatus manages the user information on each of the users and provides the user information to the in store device the in store device need not manage the information on the users. Furthermore because the in store device can acquire necessary user information by transmitting the access code to the user information management apparatus it becomes possible to reduce load of the system construction in the store. Therefore it is possible to securely authenticate the users at low costs.

Furthermore in the conventional technology because the user terminal and the in store device are offline even when user identification is performed when a user has visited a store it is difficult for the store to associate the user with the user information managed by the user information management apparatus . In contrast according to the first embodiment it is possible to associate the user who has visited the store with the user information on the user managed by the user information management apparatus by using the access code. Moreover in the conventional technology it is difficult to reflect a result of the user authentication performed by the user information management apparatus over the network into the store in the real world because the user terminal and the in store device are offline. In contrast according to the first embodiment it is possible to reflect the result of the user authentication performed over the network into the device in the store by using the access code. Furthermore in the conventional technology it is difficult to use the user information managed by the user information management apparatus over the network to support user s purchase or activities in the real world because the user terminal and the in store device are offline. In contrast according to the first embodiment it is possible to associate the user information managed over the network with the user in the real world by using the access code so that the user information may be used to support user s purchase or activities.

Operation of the system according to the first embodiment will be explained below. First explanation will be given of the flow of an access code providing process for providing an access code to the user by the user information management apparatus of the first embodiment. is a flowchart illustrating the flow of the access code providing process. The access code providing process is performed at a predetermined timing for example a timing at which the operation to designate the completion of the selection is performed on the selection screen and the user information that is in the selected state on the selection screen is notified by the user terminal .

As illustrated in the generating unit generates a new access code S . The registering unit registers the user ID of the user authenticated by the authenticating unit and the user information selected on the selection screen in the access code information in association with the generated access code S . The providing unit provides the generated access code to the user S and the process ends.

Next explanation will be given of the flow of a user information providing process for providing the user information to the in store device by the user information management apparatus of the first embodiment. is a flowchart illustrating the flow of the user information providing process. The user information providing process is performed at a predetermined timing for example a timing at which the access code is received.

As illustrated in the verifying unit determines whether the received access code is stored in the access code information S . If the access code is stored in the access code information YES at S the verifying unit determines whether the received access code satisfies the security policy stored in the security policy information S . If the access code satisfies the security policy YES at S the transmitting unit specifies the user ID and the user information to be provided which are stored in the access code information in association with the received access code S . The transmitting unit reads data of the specified user information on the specified user ID from the user information table and transmits the read data of the user information to the in store device S and the process ends.

In contrast if the received access code is not registered in the access code information NO at S and if the received access code does not satisfy the security policy NO at S the transmitting unit notifies the in store device that the access code is not a proper code S and the process ends.

As described above the user information management apparatus stores various types of user information on the user in the storage unit . Furthermore the user information management apparatus provides the access code used to access the user information stored in the storage unit to the user. When receiving the access code from the in store device installed in the store that provides the service the user information management apparatus transmits to the in store device user information corresponding to the service provided by the store having the in store device from among the various types of user information stored in the storage unit . Therefore the user information management apparatus can prevent leakage of unnecessary information.

Furthermore the user information management apparatus presents the selection screen to receive designation of the user information to be provided to the in store device and provides an access code used to access the designated user information to the user. When receiving the access code from the in store device the user information management apparatus transmits to the in store device the user information designated on the selection screen among the various types of user information stored in the storage unit . Therefore the user information management apparatus enables the user to designate the user information to be provided so that unnecessary user information is not transmitted to the in store device and leakage of unnecessary information can be prevented.

Moreover the validity period of the access code is determined and if the access code received from the in store device has not expired the user information management apparatus transmits to the in store device the user information corresponding to the service provided by the in store device . Therefore by appropriately determining the validity period the user information management apparatus can prevent unauthorized use of the access code even when the access code is leaked so that leakage of unnecessary information can be prevented.

A second embodiment will be explained below. The configurations of the system the user terminal and the in store device according to the second embodiment are the same as the configurations of the system the user terminal and the in store device according to the first embodiment illustrated in and therefore explanation thereof will be omitted.

As illustrated in the storage unit of the user information management apparatus further stores therein service information .

The service information is data in which user information needed for a service is stored for each of services. For example the service information is data in which user information needed for a service is stored for each of the services that are provided by a store and that need the user information. is a diagram illustrating an example of a data structure of the service information. For example a person is not allowed to buy alcohol or tobacco if he she is under 20 years of age. Therefore in the service information illustrated in age is stored as the user information needed for purchase of tobacco and age is also stored as the user information needed for purchase of alcohol. Furthermore if a credit card is used for payment a credit card number is needed. Therefore in the service information illustrated in a credit card number is stored as the user information needed for payment by a credit card.

The accepting unit transmits to the user terminal a web page of a selection screen for selectively presenting services provided by the store instead of the user information provided to the store to thereby display the selection screen on the user terminal and receives designation of a service via the selection screen. is a diagram illustrating an example of a selection image. A selection image displays names of services on buttons arranged on the screen and enables to select a service by the buttons .

Furthermore an advertisement may be displayed on the selection image according to the second embodiment. When a service is designated via the selection screen the accepting unit displays the advertisement associated with the designated service on the selection image for presentation to the user. For example the accepting unit displays as the advertisement a neighborhood store that provides the designated service on the selection image . Furthermore if the designated service is related to goods the accepting unit displays as the advertisement an advertisement associated with the goods or related goods used with the goods on the selection image . For example if the designated service is a purchase of tobacco the accepting unit displays as the advertisement an advertisement for tobacco or an advertisement for a lighter or an ashtray to be used with tobacco on the selection image . The advertisement associated with each of the services may be acquired by sending a query to other server device that stores therein advertisements to be provided for the respective services. Alternatively the user information management apparatus may store as advertisement information the advertisements associated with the respective services in the storage unit and acquire an advertisement to be displayed based on the advertisement information. The layout of the selection image illustrated in is one example and the present invention is not limited thereto.

The registering unit registers in the access code information the user ID of the user authenticated by the authenticating unit and the service that is presented by the accepting unit and that is designated via the selection image in association with the access code. The registering unit may store in the access code information the user information that is needed to provide the designated service and that is stored in the service information instead of storing the service. For example the registering unit reads the user information needed for the designated service from the service information and stores the read user information in the access code information in association with the access code.

When receiving the access code from the in store device the verifying unit verifies whether the received access code is a proper code.

When it is determined that the access code is a proper code through the verification by the verifying unit the transmitting unit specifies the user ID and the service that are stored in the access code information in association with the access code. The transmitting unit reads the user information needed for the specified service from the service information and specifies the read user information as the user information to be provided. Subsequently the transmitting unit reads data of the specified user information on the specified user ID from the user information table and transmits the read data of the user information to the in store device . Incidentally if the registering unit has registered the user information in the access code information instead of the service as described above the transmitting unit specifies the user ID and the user information that are stored in the access code information in association with the access code reads data of the specified user information on the specified user ID from the user information table and transmits the read data of the user information to the in store device .

As described above the user information management apparatus further stores in the storage unit the service information in which the user information needed for a service is stored for each of the services that are provided by the store and that need the user information. The user information management apparatus presents the services that need the user information and receives designation of a service. The user information management apparatus registers in the access code information the designated service or the user information that is stored in the service information as the user information needed to provide the service in association with the access code to be provided. When receiving the access code from the in store device the user information management apparatus obtains a service that is stored in the access code information in association with the received access code and transmits to the in store device the user information that is stored in the service information as the user information needed to provide the service or the user information that is stored in the access code information in association with the received access code. Therefore even if a user does not know the user information needed to receive a service the user information management apparatus allows the user to designate a subject service and provides the access code that is used to provide only the user information needed for the subject service to the user. Moreover when the user provides the access code provided by the user information management apparatus to the in store device installed in a store that provides a service desired by the user the user information management apparatus can transmit only necessary user information to the in store device and therefore can prevent leakage of unnecessary information.

Furthermore the user information management apparatus further presents an advertisement related to the designated service to the user. Therefore the user information management apparatus can provide the advertisement to the user in accordance with the service to be used so that the advertisement effectiveness can be improved.

A third embodiment will be explained below. The configurations of the system the user terminal and the in store device according to the third embodiment are the same as the configurations of the system the user terminal and the in store device according to the first embodiment illustrated in and therefore explanation thereof will be omitted.

As illustrated in the storage unit of the user information management apparatus further stores therein in store device information .

The in store device information is data in which user information needed for a service provided by a store having the in store device is stored for each of the in store devices . is a diagram illustrating an example of a data structure of the in store device information. For example a store A where an in store device A is installed sells alcohol or tobacco. In this case the user information needed for the in store device A is age. Therefore in the in store device information illustrated in the age is stored as the user information needed for the in store device A. Furthermore a store B where an in store device B is installed accepts payment by a credit card. In this case the user information needed for the in store device B is a credit card number. Therefore in the in store device information illustrated in a credit card number is stored as the user information needed for the in store device B.

The accepting unit according to the third embodiment transmits a web page of a selection screen for selecting whether to issue an access code to the user terminal to display the selection screen on the user terminal and receives a designation to issue the access code via the selection screen.

When the designation to issue the access code is given via the selection screen the generating unit generates a new access code. In the third embodiment the access code is generated when the designation to issue the access code is given via the selection screen. However it may be possible not to display the selection screen and may generate the access code when the user authentication has successfully completed.

The registering unit according to the third embodiment registers the user ID of the user authenticated by the authenticating unit in the access code information in association with the access code generated by the generating unit . Namely in the third embodiment the user information is not registered in the access code information .

When receiving the access code from the in store device the verifying unit verifies whether the received access code is a proper code.

When it is determined that the access code is a proper code through the verification by the verifying unit the transmitting unit transmits the user information needed for a service provided by a store having the in store device that has transmitted the access code based on the in store device information . For example the transmitting unit reads the user information that is stored in the in store device information in association with the in store device that has transmitted the access code and specifies the read user information as the necessary user information. Then the transmitting unit reads data of the specified user information on the specified user ID from the user information table and transmits the read data of the user information to the in store device that has transmitted the access code.

As described above the user information management apparatus further stores in the storage unit the in store device information in which the user information needed for a service provided by a store having the in store device is stored for each of the in store devices . When receiving the access code from the in store device the user information management apparatus transmits to the in store device the user information needed for the service provided by the store having the in store device that has transmitted the access code based on the in store device information . Therefore the user information management apparatus can transmit only the user information needed for the service provided by the store having the in store device to each of the in store devices and therefore can prevent leakage of unnecessary information.

While the embodiments of the present invention have been explained in detail above with reference to the accompanying drawings the embodiments are described by way of example only. Various modifications and changes of the invention including the aspects described in the Detailed Description of the Embodiments can be made based on the knowledge of one skilled in the art.

For example while an example is explained in the above embodiments that a store serves as a facility that provides a service and an in store device serves as a facility device the present invention is not limited to this example. For example the present invention may be applied when identification is performed in public institutions such as administrative institution or Legal Affairs Bureau.

Furthermore while an example is explained in the above embodiments that the user information management apparatus stores therein the user information to be provided upon reception of the access code the present invention is not limited to this example. For example the in store device may send a request for necessary user information to the user information management apparatus together with the access code and when the user information management apparatus determines that the access code is a proper code the user information management apparatus may transmit the requested user information to the in store device . The user information management apparatus transmits only the user information requested by the in store device to the in store device so that leakage of unnecessary information can be prevented.

Moreover while an example is explained in the above embodiments that a period during which the access code is considered as valid is stored in the security policy information to set the validity period of the access code as the security policy the present invention is not limited to this example. For example it may be possible to set as the security policy a limitation on the number of times that the user information can be provided by an access code. In this case for example the upper limit number of times that the user information can be provided is stored in the security policy information . Furthermore the access code information is provided with a memory area for storing the number of times that the user information has been provided by the access code. The transmitting unit counts up the number of provisions corresponding to the access code every time the user information is provided by the access code and if the number of provisions reaches the upper limit the transmitting unit invalidates the access code and notifies the in store device that the access code is not a proper code. Moreover for example it may be possible to limit the number of times that the user information can be provided by the access code to one by using the access code like a one time password. In this case for example when provision of the user information by the access code is completed the transmitting unit may delete the record of the access code from the access code information . In this way by limiting the number of times that the user information can be provided by the access code it becomes possible to prevent leakage of the user information even when the access code is leaked so that it becomes possible to enhance the security of the access code. Furthermore it may be possible to store as the security policy information an IP address for which access is authorized or an IP address for which access is not authorized so as to permit only access from the authorized IP address and block access from the unauthorized IP address. For example it may be possible to store the IP address of the in store device as the security policy information and block access by devices other than the in store device . With this configuration it is possible to enhance the security.

Furthermore while an example is explained in the above embodiments that the age is used as the user information needed to sell alcohol or tobacco the present invention is not limited to this example. For example to sell alcohol or tobacco it is only necessary to verify whether the user is 20 years of age or older. Therefore the user information management apparatus may transmit as the user information on the user information on whether the user is 20 years of age or more.

Moreover while an example is explained in the above embodiments that the user ID of the user the provision date and time and the user information to be provided are stored in the access code information in association with the provided access code the present invention is not limited to this example. For example the user ID of the user the provision date and time and the user information to be provided may be encoded and the encoded data may be contained in the access code. In this case the user information management apparatus may decode the encoded data contained in the received access code and obtains the user ID of the user the provision date and time and the user information to be provided. With this configuration the user information management apparatus need not store the user ID of the user the provision date and time and the user information to be provided in association with the generated access code so that the storage area can be reduced. Furthermore if a plurality of the user information management apparatuses are present each of the user information management apparatuses can recognize the user ID the provision date and time and the user information to be provided by the access code.

The user information management apparatus as described above may be implemented by a plurality of server computers. Furthermore the structure of the user information management apparatus may be changed flexibly depending on the functions. For example the functions may be implemented by calling an external platform by an application programming interface API or a network computing.

Moreover a unit recited in the claims may be replaced with a section a module or a means or a circuit . For example the searching unit may be replaced with a searching means or a search circuit.

According to an embodiment of the present invention the user information management apparatus can prevent leakage of unnecessary information.

Although the invention has been described with respect to specific embodiments for a complete and clear disclosure the appended claims are not to be thus limited but are to be construed as embodying all modifications and alternative constructions that may occur to one skilled in the art that fairly fall within the basic teaching herein set forth.

