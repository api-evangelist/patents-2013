---

title: Caching method and caching system using dual disks
abstract: A caching method and a caching system using dual disks, adapted to an electronic apparatus having a first storage unit and a second storage unit, are provided, in which an access speed of the second storage unit is higher than that of the first storage unit. In the method, a data access to the first storage unit is monitored, a data category of the data in an access address of the data access is identified and whether the data category belongs to a cache category is determined. If the data category belongs to the cache category, an access count of the data in the access address being accessed is accumulated and whether the accumulated access count is over a threshold is determined. If the access count is over the threshold, the data in the access address is cached to the second storage unit.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09146876&OS=09146876&RS=09146876
owner: Acer Incorporated
number: 09146876
owner_city: New Taipei
owner_country: TW
publication_date: 20130416
---
This application claims the priority benefit of Taiwan application serial no. 102102065 filed on Jan. 18 2013. The entirety of the above mentioned patent application is hereby incorporated by reference herein and made a part of this specification.

The present invention is directed to a caching method and a caching system and more particularly to a caching method and a caching system applied in an electronic apparatus having dual disks.

With the development of the semiconductor technology capacity of a memory has dramatically increased and a flash memory is particularly suitable to be used in a portable electronic apparatus for having characteristics such as non volatility low power consumption or small volume. Therefore in recent years a NAND flash memory is gradually used as a storage medium of a solid state drive SSD in considering the volume.

The special features of the SSD lie in replacing the mechanical structure of a hard disk drive HDD by utilizing the characteristics of flash memory and performing data accesses by writing and erasing memory blocks. Thus the efficiency of reading from and writing into a storage apparatus may be significantly improved. Comparing with the traditional storage apparatus the SSD has advantages such as low power consumption shock resistance low temperature resistance and high stability. Under the consideration of volume the SSD has gradually become the main data storage apparatus adopted by the portable electronic apparatus.

However due to the expensive price a capacity of the SSD capable of being equipped by a consumer electronics product in the market is quite limited. Thus a dual disk system composed of a HDD with a high capacity and a SSD with a small capacity has gradually become popular. Therein the main data accesses are still from the HDD and the SSD is used as a cache space and a data storage region in a sleep mode . Accordingly on one hand an average data access speed of a PC platform is dramatically improved while on the other hand the time of resuming from the sleep mode is effectively shortened. In order to effectively use the small capacity SSD it is necessary to design a dual disk system capable of being implemented and has high efficiency according to the features of the currently existing operation systems.

Accordingly the present invention is directed to a caching method and a caching system using dual disks capable of improving efficiency of data access and system resume.

The present invention is directed to a caching method using dual disks which is adapted to an electronic apparatus having a first storage unit and a second storage unit wherein an access speed of the second storage unit than that of the first storage unit. In the method a data access to the first storage unit is monitored a data category of the data in an access address of the data access is identified and whether the data category belongs to a cache category is determined. If the data category belongs to the cache category an access count of the data in the access address being accessed is accumulated and whether the accumulated access count is over a threshold is determined. If the access count is over the threshold the data in the access address is cached to the second storage unit.

The present invention is directed to a caching system using dual disks which includes a monitoring module an identification module and a cache module. The monitoring module is configured to monitor a data access to a first storage unit. The identification module is configured to identify a data category of data in an access address of the data access and determine whether the data category belongs to a cache category. If the data category belongs to the cache category the cache module accumulates an access count of the data in the access address being accessed and if the accumulated access count is over the threshold the data in the access address is cached to a second storage unit. An access speed of the second storage unit is higher than that of the first storage unit.

To sum up in the caching method and the caching system using dual disks of the present invention data accessed by an operation system is categorized and only background processes are cached to a solid state drive SSD with discarding foreground applications such that the limited cache space is efficiently utilized. Additionally in the present invention when the system resumes from a sleep mode the background processes are firstly loaded and then other data is loaded until the desktop is resumed. As such the time of resuming the desktop may be effectively shortened.

In order to make the aforementioned and other features and advantages of the present invention more comprehensible several embodiments accompanied with figures are described in detail below.

Generally in an operation system OS the data being accessed most frequently is the background processes which can be categorized into three types system service processes general usage processes and application software processes. The system service processes and the general usage processes are indispensable elements e.g. explore.exe svchost.exe or winlogon.exe for normal operation of a computer and the application software processes are commonly related to applications. For instance while a document file Abc.docx is edited in the foreground an executable file WINWORD.exe is shown in a process list of the operation system and the file Abc.docx is shown in an application list. The aforesaid process is a main program to open Word while the application is installed on the main program of Word and configured to open a specific file.

For instance and respectively illustrate an application list and a process list according to an embodiment of the present invention. First referring to when a user runs an application outlook to open an email a plurality of applications related to outlook are shown in the application list of the task manager of the OS. The applications are generated according to a window corresponding to each email in the mailbox. However no matter which application is used the same process OUTLOOK.EXE 32 in the process list illustrated in is corresponded to. Based on the premise of saving cache space a target cached by the caching system of the present invention is the process instead of the application.

In order to efficiently utilize a solid state drive SSD with limited capacity and high price a target to be cached by the present invention points to all of the background processes which have a small amount but frequently used data instead of specific files which have a great amount but seldom used data or applications. In the present invention currently running applications and processes are further obtained from the OS and an access count of the processes is accumulated for determining whether to perform a caching operation.

The dual disk system includes a hard disk drive HDD a solid state drive SSD an operation system OS and a caching system . The caching system obtains an access frequency of each data block in the HDD being cached by using logical block addressing LBA information in the HDD . In addition the caching system obtains information of applications and processes which are currently running from the OS . As such the caching system may decide a category and an amount of data to be cached from the HDD to the SSD according to the access frequency of the data blocks and the information of the applications and the processes so as to improve the overall data access efficiency of the dual disk system .

In detail is a block diagram illustrating a caching system using dual disks according to an embodiment of the present invention. In the present embodiment the detailed implementation of the caching system in the aforementioned embodiment will be further described. The caching system includes a monitoring module an identification module and a cache module . The modules may be hardware devices composed of logical circuit elements and perform the caching function or may be programs stored in a storage medium of the electronic apparatus and capable of being loaded into a processor of the electronic apparatus to perform the caching function which constructs no limitations to the present invention.

First the monitoring module monitors a data access to a first storage unit e.g. the HDD step S . Here each time when the user executes a program or performs an operation on the electronic apparatus the electronic apparatus accesses the first storage unit to obtain data required for performing the related operation.

Then the identification module identifies a data category of data in an access address of the data access step S . In detail the identification module sends a request to a host bus adapter HBA to obtain the access address of the data access monitored by the monitoring module . Then the identification module may call an application programming interface API such as a PSAPI of the OS to obtain a list showing the currently running applications and processes and statuses thereof so as to identify a data category of the data in the access address.

Afterward the identification module determines whether the identified data category belongs to one of at least one cache category step S . The cache category includes system service processes and general usage processes which is not limited herein.

In detail among the background processes the system service processes are mainly defined in the category System.ServiceProcess and responsible for shared services such as disk management automatic updates dynamic host configuration protocol DHCP memory buffer management or user logins in the operation system. The general usage processes includes for example a resource manager e.g. explorer.exe i.e. the desktop an executable file e.g. rundll32.exe of a built in function of a dynamic link library DLL an executable file e.g. ctfmon.exe of an input method and so forth. The application software processes are referred to executable files related to application software. By pre loading the processes which are frequently accessed to a storage unit having a higher speed for example the SSD the efficiency of data access may be effectively improved.

If the data category identified by the identification module belongs to the cache category the cache module accumulates an access count of the data in the access address being accessed step S and determines whether the accumulated access count is over a threshold step S . If the access count is over the threshold the cache module caches the data in the access address to a second storage unit e.g. the SSD having a higher access speed step S . Accordingly the overall data access efficiency of the dual disk system is improved.

In another embodiment in addition to all of the background processes the foreground processes is categorized in to application frame and user data by using the architecture of the operation system and therein only the application frames are cached with discarding the user data so as to improve the data access efficiency.

For instance illustrates an application list and a process list according to an embodiment of the present invention. Referring to in the present embodiment an application list of the task manager includes four tasks which are Powerpoint Outlook Word and MSN. The process corresponding to each of the applications may be found in a process list of the task manager and these processes are foreground processes. As illustrated in the first task in the application list corresponds to POWERPNT.EXE 32 in the process list the second task corresponds to OUTLOOK.EXE 32 in the process list the third task corresponds to WINWORD.EXE 32 in the process list and the fourth task corresponds to MSNMSGR.EXE 32 in the process list . If it is assumed that the user opens 10 different Word files the operation system has to open the executable file WINWORD.EXE no matter which file is opened. Accordingly comparing with the opened user data in which each file is read only once the executable file WINWORD.EXE which is opened for 10 time in total of one of the foreground processes is more important. Thus in the present embodiment the user data is discarded and only the application frame i.e. the executable file WINWORD.EXE is cached so as to improve the data access efficiency.

It is noted that before entering a sleep mode the operation system dumps all data related to the currently running processes and applications from the memory to the SSD such that in the system resume all the data can be rapidly loaded back from the SSD to the memory so as to achieve an effect of quick resume. Accordingly in the present invention a system resume mechanism is combined with the aforementioned cache policy so as to shorten the time for the system to resume the desktop. Another embodiment is illustrated in detail as follows.

First the sleep module not shown receives the sleep operation step S so as to back up data in a buffer unit not shown of the electronic apparatus to the second storage unit. The sleep operation is triggered and generated for example by the user pressing a sleep button of the operation system or by the operation system under a condition of not receiving an operation within a predetermined time period but the present invention is not limited thereto. Additionally the buffer unit is for example a random access memory RAM or any other type of memory but the present invention is also not limited thereto.

It is noted that through the caching of the cache module in the above embodiment a portion of the data in the buffer unit has already cached in the second storage unit. Thus after receiving the sleep operation the sleep module for example examines whether the data in the buffer unit of the electronic apparatus is already cached to the second storage unit step S .

Therein if the sleep module determines that there is a portion of the data in the buffer unit not yet cached to the second storage unit the sleep module backs up the uncached data in the buffer unit to the second storage unit step S and then enters the sleep mode step S . The aforementioned uncached data includes applications and application software processes. Otherwise if the sleep module determines that all of the data in the buffer unit is already cached to the second storage unit the sleep module may directly enter the sleep mode step S .

In the sleep mode the sleep module for example continues to detect the resume operation issued by the user. When receiving the resume operation step S the sleep module loads the data which is previously stored or backed up in the second storage unit to the buffer unit so as to resume the system back to the normal operation mode. In the process of resuming the system the sleep module for example firstly loads the data in the second storage unit which belongs to the cache category to the buffer unit step S . The data belonging to the cache category is for example the system service processes and the general usage processes which are indispensable to maintain the system in the normal operation and after the processes are loaded the sleep module may rapidly resume the desktop of the operation system step S .

Finally in the situation of resuming the desktop the sleep module continues to load the data in the second storage unit which does not belong to the cache category to the buffer unit step S so as to complete the system resume. The aforementioned data which does not belong to the cache category is for example applications and application software processes. Accordingly the time of the system resuming from the sleep mode may be shortened and a time point for the user to start any other task after the sleep mode may be as earlier as possible such that the user is provided with good usage experience.

In view of the foregoing the caching method and the caching system using dual disks of the present invention utilizes the information capable of being obtained by the operation system to categorize data accesses executed by the electronic apparatus into foreground applications and background processes and caches the background processes to the SSD having a higher speed with discarding the foreground applications so as to improve the data access efficiency under the situation that the SSD has limited capacity. In addition the present invention further categorizes the applications and the processes according to an order of priority. When the computer resumes from the sleep mode the processes having the higher priority are waked up and the processes and applications having lower priority are then waked up until the desktop is resumed such that the time of resuming the desktop can be effectively shortened.

Although the invention has been described with reference to the above embodiments it will be apparent to one of the ordinary skill in the art that modifications to the described embodiment may be made without departing from the spirit of the invention. Accordingly the scope of the invention will be defined by the attached claims not by the above detailed descriptions.

